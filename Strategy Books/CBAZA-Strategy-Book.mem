


                                                ***********************
                                                *    "RECORD COPY"    *
                                                * Schedule No. 7-6-2  *
                                                * Retain Until 12-99  *
                                                ***********************


                       PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL





                       POWERTRAIN ELECTRONIC CONTROL STRATEGY BOOK





|                                STRATEGY LEVEL "CBAZA"





      THE PROCEDURE FOR OBTAINING COPIES OF THIS BOOK OR ANY OTHER  AVAILABLE  "CB"
      DOCUMENTATION IS EXPLAINED ON THE NEXT PAGE.



                         ED SCHOENBERG
                         PHONE: (313)322-6488
                         STRATEGY PLANNING & PROCESS DESIGN SECTION
                         CONTROL SYSTEMS DEPT
                         POWERTRAIN ELECTRONICS 
                         DEVELOPMENT - PTE





|                        SOFTWARE RELEASE DATE: FEBRUARY 24, 1993
|                        STRATEGY BOOK RELEASE DATE: FEBRUARY 26, 1993





                           OBTAINING DOCUMENTATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             "CB" STRATEGY DOCUMENTATION

      All current strategy documentation is stored on  the  VAX  computer  cluster.
      Documentation  can  be  obtained  by logging into a VAX computer (I.E.  SYS2,
      SYS3, SYS4, ETC.) and issuing one or more of the following VAX/DCL commands.

      Generally, two types of documentation are available:

      1.  UPDATE PACKAGES - Change bars at the left margin  are  used  to  indicate
      where  changes in text have occurred since the previous level.  Some of these
      changes may simply be enhancements or corrections to the text of the previous
      level  and  may  be unrelated to the strategy level change.  This file can be
      used as a quick reference to show the changes which have been made  for  this
      release.   The  file name format is CB***UP.MEM, where *** is the desired new
      strategy level.

      2.  COMPLETE BOOKS - The file name format is  CB***.MEM,  where  ***  is  the
      desired  strategy  level.   Changes  in  text  which  have occurred since the
      previous level book will be indicated with change bars.  The  INDEX  contains
      an entry, "CHANGED PAGES," which lists all pages containing changes.

      The following VAX/DCL commands may be helpful in working with  Strategy  Book
      documentation:

      TO DETERMINE IF A SPECIFIC STRATEGY BOOK IS AVAILABLE, TYPE:


                                 DIR STRATEGY:CB***.MEM
                                DIR STRATEGY:CB***UP.MEM


      TO OBTAIN A LINE PRINTER COPY OF A GIVEN DOCUMENT, TYPE:

       PRINT/NOFEED STRATEGY:CB***.MEM     where *** = the desired strategy level


      TO OBTAIN A XEROX COPY OF A GIVEN DOCUMENT, TYPE:

            XEROX STRATEGY:CB***.MEM/DEST=EEE/USERNAME=name/COPIES=no/PMODE=P

                where: *** = the desired strategy level
                       name = your user name
                       no = desired number of copies (i.e. 1)


      TO DETERMINE TARGETING OF EMR'S FOR FUTURE RELEASES, TYPE:

                                          EDTS

           AT THE EDTS MAIN MENU, SELECT "Standard Reports Menu" (number 6)
           THEN, SELECT "EMR's Within EMR Group" (number 3)


      TO DETERMINE THE STATUS OF STRATEGY BOOK DOCUMENTATION, TYPE:

                                  @STRATEGY:BOOKSTATUS

                           OBTAINING DOCUMENTATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


         

                              TABLE OF CONTENTS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  TABLE OF CONTENTS


                                                                    LAST
      PAGES               SUBJECT                                 REVISION


|     1-1 to 1-32         STRATEGY EVOLUTION                      CBAZA

      2-1 to 2-18         SYMBOLOGY                               CBAS0

      3-1 to 3-10         EEC OVERVIEW                            CBAV0

      4-1 to 4-14         HARDWARE INTERFACE
      4-2 to 4-5           I/O CHANNEL ASSIGNMENTS                CBAS0
      4-6 to 4-14          SUMMARY OF SOFTWARE SWITCHES           CBAQ0

      5-1 to 5-8          CRANK/UNDERSPEED/RUN MODE SELECTION
                           STRATEGY                               CBAR0

      6-1 to 6-4          THROTTLE MODE SELECTION STRATEGY        CBAS0

      7-1 to 7-172        FUEL STRATEGY
      7-2 to 7-4           FUEL STRATEGY OVERVIEW                 CBAD0
      7-5 to 7-13          HEGO SENSOR INPUT PROCESSING           CBAQ0
      7-14 to 7-17         OUTPUT SHAFT SPEED LIMITER LOGIC       CBAY0
      7-18 to 7-21         WARM EGO LOGIC                         CBAO0
      7-22 to 7-23         LUGGING MODE DETERMINATION             CBAA0
      7-25 to 7-26         LAMMUL RESET LOGIC                     CBAR0
      7-27 to 7-32         OPEN LOOP FLAG DETERMINATION           CBAX0
      7-33 to 7-34         CALCULATION OF LAMAVE                  CBAO0
      7-35 to 7-42         OPEN LOOP LAMBSE CALCULATION           CBAR0
      7-43 to 7-47         LAMBSE RESET LOGIC                     CBAW0
      7-48 to 7-61         CLOSED LOOP LAMBSE CALCULATION         CBAS0 
      7-62                 LAMBSE CLIP LOGIC                      CBAO0
      7-63                 DAC REGISTER CALCULATIONS              CBAA0
      7-64 to 7-81         ADAPTIVE FUEL LOGIC                    CBAS0
      7-82 to 7-84         KAM ADAPTIVE FUEL LOGIC                CBAS0
      7-85 to 7-91         DECEL FUEL SHUT OFF LOGIC              CBAR0
      7-92 to 7-96         FUEL PULSEWIDTH, BACKGROUND FUEL       CBAR0
      7-97 to 7-104        BACKGROUND TRANSIENT FUEL BACKGROUND   CBAT0
      7-105 to 7-107       BACKGROUND QUICK AND DIRTY FUEL LOGIC  CBAY0
      7-108 to 7-109       HOT INJECTOR COMPENSATION              CBAA0
      7-110 to 7-115       INJECTOR DELAY LOGIC                   CBAQ0
      7-116                RPM LIMITER HIGH LOAD                  CBAQ0
      7-117                FUEL PUMP CONTROL LOGIC                CBAA0
      7-118                PPCTR CONTROL                          CBAA0
      7-119 to 7-120       RPM LIMITER LOGIC                      CBAU0
      7-121                PIP INTERRUPT LOGIC FOR FUEL 
                            SYNCHRONIZATION                       CBAR0
      7-122 to 7-126       SIGNATURE PIP INJECTOR SYNCHRONIZATION CBAN0
|     7-127 to 7-130       FOREGROUND FUEL CALCULATIONS EXECUTION CONTROL CBAZA
|     7-131 to 7-134       FOREGROUND TRANSIENT FUEL LOGIC        CBAZA
|     7-135 to 7-136       FOREGROUND QUICK AND DIRTY FUEL LOGIC  CBAZA
|     7-137 to 7-141       FUEL PULSEWIDTH, FOREGROUND FUEL       CBAZA
      7-142 to 7-143       INJECTOR TIMING                        CBAA0
|     7-144 to 7-152       INJECTOR OUTPUT CONTROL                CBAZA
|     7-153 to 7-156       FUEL SCHEDULING LOGIC                  CBAZA

                              TABLE OF CONTENTS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                                                    LAST
      PAGES               SUBJECT                                 REVISION


|     7-157 to 7-159       FUEL PULSEWIDTH, MAIN FUEL OFF         CBAZA
|     7-160 to 7-165       CALCULATE DYNAMIC FUEL CORRECTION      CBAZA
      7-166 to 7-169       FUEL PULSEWIDTH, WILL_PULS_FIT         CBAX0
      7-170 to 7-171       FUEL PULSEWIDTH, DYNAMIC FUEL OFF      CBAX0
      7-172                SPEED LIMITER SELFTEST CODE SETTING - 
                            OBDII                                 CBAU0

      8-1 to 8-90         IGNITION TIMING STRATEGY
      8-2                  OVERVIEW                               CBAB0
      8-3 to 8-7           FINAL SPARK CALCULATION                CBAB0
      8-8 to 8-10          SELECT LOWEST SPARK VALUE              CBAP0
      8-11 to 8-13         BASE EMISSIONS AND DRIVE SPARK         CBAD0
      8-14 to 8-16         BORDERLINE DETONATION SPARK            CBAH0
      8-17 to 8-19         SPARK FOR LOW LOAD OPERATING 
                          CONDITIONS                              CBAB0
      8-20 to 8-25         TORQUE TRUNCATION VIA SPARK RETARD     CBAR0
      8-26 to 8-27         MAXIMUM BRAKE TORQUE SPARK             CBAD0
      8-28 to 8-43         TORQUE BASED FEEDBACK SPARK AT IDLE    CBAR0
      8-44 to 8-45         OSCILLATION MODULATION                 CBAM0
      8-46                 DISTRIBUTOR ROTOR REGISTRY             CBAA0
      8-47                 SIGNATURE PIP DISTRIBUTOR              CBAA0
      8-48 to 8-51         MKAY/SIGKAY CALCULATION                CBAO0
      8-52 to 8-54         TRANSIENT SPARK COMPENSATION           CBAH0
      8-55 to 8-58         PIP DATA CALCULATION                   CBAO0
      8-59 to 8-68         SPOUT CALCULATION                      CBAW0
      8-69                 COMPUTER CONTROLLED DWELL              CBAH0
      8-70 to 8-73         BASE DWELL CALCULATION                 CBAH0
      8-74 to 8-76         DWELL CALCULATION                      CBAH0
      8-77 to 8-88         KNOCK CONTROL STRATEGY                 CBAP0
      8-89 to 8-90         TORQUE MODULATION BACKGROUND 
                            CALCULATION                           CBAX0

      9-1 to 9-30         EGR STRATEGY
      9-2 to 9-3           EGR SELECT                             CBAI0
      9-4 to 9-6           EGR ENABLE                             CBAR0
      9-7 to 9-9           DESIRED EGR MASS FLOW                  CBAQ0
      9-10 to 9-17         PRESSURE FEEDBACK EGR                  CBAR0
      9-18 to 9-24         SONIC EGR                              CBAI0
      9-25                 ACTUAL PERCENT EGR                     CBAS0
      9-26 to 9-28         EVR CONTROLLER                         CBAI0
      9-29 to 9-30         DUTY CYCLE GENERATION                  CBAR0

      10-1 to 10-56       IDLE SPEED CONTROL
      10-2 to 10-8         GENERIC ISC                            CBAS0
      10-9 to 10-21        DESIRED RPM CALCULATION                CBAT0
      10-22 to 10-26       DESIRED MASS AIR FLOW CALCULATION      CBAV0
      10-27 to 10-28       ISLAST, ISFLAG, AND HCAMFG LOGIC       CBAN0
      10-29 to 10-31       RPM ERROR CALCULATION                  CBAR0
      10-32 to 10-36       DASHPOT CALCULATIONS                   CBAK0
      10-37 to 10-42       MODE SELECT                            CBAA0
      10-43 to 10-49       IPSIBR CALCULATION                     CBAN0
      10-50 to 10-51       ISC DUTY CYCLE CALCULATION             CBAH0
      10-52                PERLOAD_ISC CALCULATION                CBAH0

                              TABLE OF CONTENTS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                                                    LAST
      PAGES               SUBJECT                                 REVISION


      10-53 to 10-55       KAM UPDATE                             CBAN0
      10-56                ISC DUTY CYCLE EXPANDER PULSEWIDTH     CBAA0

      11-1 to 11-10       A/C CLUTCH STRATEGY
      11-2                 A/C CLUTCH INPUT                       CBAR0
      11-3 to 11-8         A/C CLUTCH CONTROL                     CBAP0
      11-9 to 11-10        A/C CLUTCH OUTPUT                      CBAR0

      12-1 to 12-10       CANISTER PURGE STRATEGY
      12-2 to 12-9         CANISTER PURGE                         CBAU0
      12-10                DUTY CYCLE EXPANDER PULSEWIDTH         CBAA0

      13-1 to 13-12       THERMACTOR AIR STRATEGY
      13-2 to 13-10        THERMACTOR CONTROL                     CBAV0
      13-11 to 13-12       REPEAT DUTY CYCLE EXPANDER             CBAQ0

      14-1 to 14-14       ELECTRO-DRIVE FAN STRATEGY
      14-2 to 14-4         LOW SPEED FAN STRATEGY                 CBAQ0
      14-5 to 14-7         HIGH SPEED FAN STRATEGY                CBAV0
      14-8 to 14-11        ELECTRO-DRIVE FAN CONTROL STRATEGY     CBAM0
      14-12 to 14-14       ELECTRO-DRIVE FAN OUTPUT STRATEGY      CBAM0

      15-1 to 15-4        DATA OUTPUT LINK                        CBAQ0

      16-1 to 16-50       DATA COMMUNICATIONS LINK
      16-2 to 16-42        GENERIC                                CBAM0
      16-43 to 16-46       PID TABLES AND BITMAP DEFINITIONS      CBAT0
      16-47 to 16-50       UART MESSAGE CHECK                     CBAR0  

      17-1 to 17-4        EXPORT FEATURES                         
      17-2 to 17-4         SPEED WARNING CHIME                    CBAR0

      18-1 to 18-6        ALTERNATIVE CALIBRATION
      18-2 to 18-3         CALIBRATION INITIALIZE LOGIC           CBAR0
      18-4 to 18-6         CALIBRATION CLEAR LOGIC                CBAR0

      19-1 to 19-24       AIR CHARGE CALCULATION
      19-2 to 19-3         AIRMETER OVERVIEW                      CBAO0
      19-4 to 19-8         SAMPLE AIRMETER CALCULATION            CBAQ0
      19-9 to 19-11        MANIFOLD FILLING MODEL                 CBAM0
      19-12 to 19-14       AIR CHARGE ANTICIPATION                CBAM0
      19-15 to 19-16       FINAL CYLINDER AIRCHARGE               CBAM0
      19-17 to 19-22       AIR CHARGE BACKGROUND CALCULATIONS     CBAT0
      19-23 to 19-24       AIR LEAKAGE CALCULATIONS               CBAN0

      20-1 to 20-54       TRANSMISSION INPUT CONVERSIONS
      20-2 to 20-4         AODE TRANSMISSION CALCULATIONS         CBAR0
      20-5 to 20-9         TRANSMISSION CONTROL INDICATOR LIGHT   CBAR0
      20-10 to 20-11       TCIL OUTPUT                            CBAS0
      20-12 to 20-13       TRANSMISSION CONTROL SWITCH            CBAP0
      20-14                TCIL HARDWARE PRESENT                  CBAN0
      20-15                ETV OVERCURRENT MONITOR VOLTAGE        CBAK0
      20-16 to 20-17       4 x 4 LOW SWITCH                       CBAK0

                              TABLE OF CONTENTS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                                                    LAST
      PAGES               SUBJECT                                 REVISION


      20-18 to 20-21       RT_NOVS_KAM CALCULATION                CBAS0
      20-22 to 20-23       OSS CALCULATION                        CBAN0
      20-24 to 20-25       OUTPUT SHAFT SPEED SENSOR TEST         CBAK0
      20-26 to 20-27       OSS INPUT PROCESSING, FOREGROUND       CBAN0
      20-28 to 20-34       MODULATED LOCKUP SOLENOID TEST         CBAN0
      20-35 to 20-37       VS_RATE CALCULATIONS                   CBAN0
      20-38 to 20-40       THROTTLE BASED AIRFLOWS                CBAG0
      20-41 to 20-48       MLPS CONVERSION                        CBAW0
      20-49 to 20-51       AODE TRANSMISSION CALCULATIONS         CBAP0
      20-52 to 20-54       COLD SHIFT MULTIPLIER                  CBAX0

      21-1 to 21-60       SHIFT CONTROL
      21-2 to 21-5         PRNDL BASED DESIRED GEAR DETERMINATION CBAA0
      21-6 to 21-11        GR_DS, PRNDL = 3 OR 4 LOGIC            CBAY0
      21-12 to 21-16       DELAY/VERIFY SHIFT LOGIC               CBAY0
      21-17 to 21-20       GR_SEQ_PNTR CALCULATION                CBAC0
      21-21 to 21-25       PRNDL BASED COMMANDED GEAR
                            DETERMINATION                         CBAX0
      21-26 to 21-27       GR_CM, PRNDL = 1 LOGIC                 CBAK0
      21-28 to 21-29       GR_CM, PRNDL = 2 LOGIC                 CBAX0
      21-30 to 21-33       GR_CM, PRNDL = 3 OR 4, UPSHIFT LOGIC   CBAY0
      21-34 to 21-37       GR_CM, PRNDL = 3 OR 4,
                            DOWNSHIFT LOGIC                       CBAS0
      21-38 to 21-42       LOAD SHIFT IN PROGRESS TIMER           CBAV0
      21-43 to 21-45       DETERMINE SHIFT SOLENOID STATES        CBAA0
      21-46 to 21-53       SHIFT VALIDATION LOGIC                 CBAV0
      21-54 to 21-60       TORQUE MODULATION CONTROL              CBAZ0

      22-1 to 22-48       ELECTRONIC PRESSURE CONTROL
      22-2 to 22-14        ELECTRONIC PRESSURE CONTROL GUIDE      CBAR0
      22-15 to 22-16       START-UP TV LOGIC                      CBAH0
      22-17 to 22-21       ENGAGEMENT/STALL TV LOGIC              CBAH0
      22-22 to 22-26       NORMAL TV CALCULATION                  CBAR0
      22-27 to 22-28       TQ_IALPHA CALCULATION                  CBAA0
      22-29 to 22-35       DYNAMIC EPC CALCULATION                CBAY0
      22-36                TV VFS OUTPUT ROUTINE                  CBAA0
      22-37                VFS DUCE REPEATER                      CBAA0
      22-38 to 22-43       EPC CURRENT MONITOR                    CBAO0
      22-44 to 22-45       TRANSMISSION OVERTEMPERATURE TEST      CBAR0
      22-46 to 22-48       TORQUE NET CALCULATION                 CBAY0

      23-1 to 23-64       CONVERTER CLUTCH CONTROL
      23-2                 OVERVIEW                               CBAR0
      23-3                 HOT LOCKUP LOGIC                       CBAA0
      23-4 to 23-9         SCHEDULED BYPASS CLUTCH SLIP           CBAW1
      23-10 to 23-22       UNCONDITIONAL UNLOCK LOGIC             CBAR0
      23-23 to 23-27       SHIFT MODULATION LOGIC                 CBAR0
      23-28 to 23-34       BYPASS CLUTCH DUTY CYCLE CALCULATION   CBAT0
      23-35 to 23-43       PID CONTROL LOGIC                      CBAM0
      23-44 to 23-47       SLIP CALCULATION                       CBAK0
      23-48 to 23-51       SCHEDULED LOCK/UNLOCK LOGIC            CBAW0

                              TABLE OF CONTENTS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                                                    LAST
      PAGES               SUBJECT                                 REVISION


      23-52 to 23-59       MODULATED BYPASS CLUTCH SLIP
                            BREAK AWAY                            CBAU0
      23-60                DUCE PULSEWIDTH                        CBAA0
      23-61 to 23-64       FAILURE MODE MANAGEMENT LOCKUP         CBAR0

      24-1 to 24-56       INPUT CONVERSIONS AND FILTERS
      24-2 to 24-18        INPUT CONVERSIONS AND FILTERS          CBAR0
      24-19 to 24-20       CALIBRATION FOR FREQUENCY CHANGES      CBAX0
      24-21 to 24-23       LOAD CALCULATION                       CBAG0
      24-24 to 24-28       INFERRED BAROMETRIC PRESSURE           CBAK0
      24-29                BAROMETRIC PRESSURE FILTER             CBAK0
      24-30                BP INITIALIZATION MODULE               CBAK0
      24-31 to 24-35       NEUTRAL/DRIVE TRANSITION LOGIC         CBAA0
      24-36 to 24-39       ENGINE SPEED CALCULATION               CBAS0
      24-40 to 24-41       ROLLING AVERAGE ROUTINE                CBAE0
      24-42 to 24-45       VEHICLE SPEED PROCESSING               CBAP0
      24-46 to 24-48       VEHICLE MOVING DETECTOR                CBAU0
      24-49 to 24-50       ACSTRT, TCSTRT, INIT_TOT ROUTINE       CBAL0
      24-51 to 24-52       POWER MODE                             CBAA0
      24-53 to 24-54       COLD TEMPERATURE TV SOLENOID OPERATION CBAA0
      24-55 to 24-56       DYNAMIC TV DUE TO COLD TRANSMISSION    CBAA0

      25-1 to 25-4        OUTPUT CONVERSIONS                      CBAQ0

      26-1 to 26-16       TIMERS                                  CBAW1

      27-1 to 27-34       FAILURE MODE MANAGEMENT
      27-2                 OVERVIEW                               CBAA0
      27-3 to 27-4         FAILURE RECOGNITION                    CBAA0
      27-5                 ACP SWITCH INPUT SIGNAL PROCESSING     CBAM0
      27-6 to 27-8         ACT SENSOR UPDATE                      CBAP0
      27-9 to 27-12        ADAPTIVE FUEL TABLE FMEM               CBAD0
      27-13 to 27-14       AODE INPUT EQUATIONS                   CBAO0
      27-15 to 27-19       ECT SENSOR UPDATE                      CBAV0
      27-20 to 27-21       EVP SENSOR FMEM                        CBAA0
      27-22 to 27-25       MASS AIR FLOW SENSOR FMEM              CBAD0
      27-26 to 27-28       PFE SENSOR FMEM                        CBAA0
      27-29 to 27-30       TOT SENSOR FMEM                        CBAA0
      27-31 to 27-34       TP SENSOR FMEM                         CBAD0

      28-1 to 28-8        KEEP ALIVE MEMORY                       CBAN0

      29-1 to 29-4        EEC-IV SELF TEST OVERVIEW
      29-2                 EEC-IV SELF TEST OVERVIEW              CBAL0
      29-3 to 29-4         EEC-IV SELF TEST BLOCK DIAGRAMS        CBAL0

      30-1 to 30-8        SELF TEST ENTRY/EXIT LOGIC              CBAL0

      31-1 to 31-42       ENGINE OFF SELF TEST
      31-2 to 31-4         ENGINE OFF SELF TEST SEQUENCE          CBAL0
      31-5 to 31-6         KAM/RAM TEST                           CBAL0
      31-7                 READ-ONLY MEMORY TEST (ROM)            CBAL0
      31-8 to 31-9         ENGINE COOLANT TEMPERATURE SENSOR      CBAL0
      31-10                THROTTLE POSITION SENSOR               CBAL0

                              TABLE OF CONTENTS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                                                    LAST
      PAGES               SUBJECT                                 REVISION


      31-11                AIR CHARGE TEMPERATURE  SENSOR TEST    CBAL0
      31-12                MASS AIRFLOW SENSOR                    CBAL0
      31-13 to 31-14       EXHAUST GAS RE-CIRCULATION SENSOR TEST CBAL0
      31-15 to 31-16       MANUAL LEVER POSITION SENSOR INPUT 
                            TEST                                  CBAL0
      31-17 to 31-19       TRANSMISSION OIL TEMPERATURE SENSOR 
                            TEST                                  CBAL0
      31-20                ACC/NEUTRAL INPUT TEST                 CBAL0
      31-21                IVPWR INPUT TEST                       CBAL0
      31-22 to 31-23       ELECTRONIC THROTTLE VALVE SOLENOID 
                            TEST                                  CBAL0
      31-24                OCTANE ADJUST INPUT TEST               CBAL0
      31-25                OUTPUT CIRCUIT CHECK                   CBAp0
      31-26 to 31-28       OUTPUT CIRCUIT CHECK TEST STRUCTURE    CBAL0
      31-29 to 31-31       MLUS OCC TEST                          CBAL0
      31-32 to 31-35       FUEL PUMP MONITOR TEST                 CBAN0
      31-36                KAM QUALIFICATION TEST                 CBAL0
      31-37 to 31-42       OUTPUT TEST MODE                       CBAR0

      32-1 to 32-60       ENGINE RUNNING SEQUENCE
      32-2 to 32-3         ENGINE RUNNING SELF TEST STRUCTURE     CBAW0
      32-4 to 32-5         EGOBAR FILTER AND STATE FLAGS CBAL0
      32-6                 DELAY LOGIC CLARIFICATION              CBAL0
      32-7 to 32-11        ENGINE RUNNING INITIALIZATION          CBAT0
      32-12 to 32-16       GENERIC IDLE SPEED CONTROL             CBAS0
      32-17                TRANSMISSION CONTROL SWITCH CIRCUIT 
                            TEST                                  CBAP0
      32-18                HIGH RPM ISC TEST                      CBAL0
      32-19                ECT SENSOR TEST                        CBAL0
      32-20                THROTTLE POSITION SENSOR               CBAL0
      32-21                AIR CHARGE TEMPERATURE SENSOR TEST     CBAL0
      32-22 to 32-23       BRAKE ON/OFF TEST                      CBAL0
      32-24                MASS AIRFLOW SENSOR                    CBAW0
      32-25                TRANSMISSION OIL TEMPERATURE SENSOR    CBAL0
      32-26 to 32-27       EGO SWITCHING TEST                     CBAL0
      32-28 to 32-29       THERMACTOR AIR TEST                    CBAR0
      32-30 to 32-31       SPARK CONTROL TEST                     CBAL0
      32-32 to 32-35       EXHAUST GAS RE-CIRCULATION SYSTEM TEST CBAL0
      32-36                LOW RPM ISC TEST                       CBAL0
      32-37 to 32-41       GOOSE TEST                             CBAO0
      32-42                2 MINUTE DELAY TIMING CHECK            CBAL0
      32-43 to 32-53       CYLINDER BALANCE TEST                  CBAR0
      32-54 to 32-60       THROTTLE PLATE ADJUSTMENT MODE         CBAQ0

      33-1 to 33-106      CONTINUOUS TEST STRUCTURE
      33-2                 FILTERING LOGIC                        CBAQ0
      33-3 to 33-4         FAULT THRESHOLD/UPCOUNT VALUE 
                            SELECTION                             CBAL0
      33-5 to 33-6         KAM CODE WARM_UP COUNTER/ERASE LOGIC   CBAL0
      33-7                 ECT OPEN/SHORT TESTS                   CBAL0
      33-8                 ACT SENSOR TESTS                       CBAL0
      33-9 to 33-10        IN-RANGE THROTTLE POSITION, INJECTOR 
                            LOAD                                  CBAL0

                              TABLE OF CONTENTS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                                                    LAST
      PAGES               SUBJECT                                 REVISION


      33-11                IN-RANGE THROTTLE POSITION, LOAD 
                            CALCULATIONS                          CBAL0
      33-12 to 33-20       IN-RANGE AIR METER, TP, INJECTOR 
                            PROCESSING                            CBAM0
      33-21                MASS AIRFLOW SENSOR                    CBAV0
      33-22 to 33-29       SONIC EGR                              CBAR0
      33-30 to 33-43       DELTA PFE EGR                          CBAL0
      33-44 to 33-45       EGR SYSTEM SELECT
      33-46                TRANSMISSION OIL TEMPERATURE SENSOR    CBAL0
      33-47 to 33-54       TFI IGNITION TEST                      CBAL0
      33-55                THROTTLE POSITION SENSOR TEST          CBAL0
      33-56 to 33-58       VEHICLE SPEED SENSOR TEST              CBAO0
      33-59 to 33-62       BRAKE ON/OFF CIRCUIT TEST              CBAL0
      33-63 to 33-71       ADAPTIVE TABLE CLIP TEST               CBAS0
      33-72 to 33-92       EGO SWITCHING DYNAMIC FUEL
                            STRATEGIES                            CBAT0
      33-93 to 33-96       FUEL PUMP CIRCUIT TEST                 CBAL0
      33-97 to 33-99       ISC FEEDBACK CONTROL LIMITS TEST       CBAN0
      33-100 to 33-106     MALFUNCTION INDICATOR LIGHT            CBAU0

      34-1 to 34-4        ERROR CODE DESCRIPTION                  CBAS0

      35-1 to 35-2        ROM IDENTIFICATION CODE                 CBAA0

|                         INDEX                                   CBAZA

                              TABLE OF CONTENTS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL















                                      CHAPTER 1

                                  STRATEGY EVOLUTION

















































                                         1-1

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   STRATEGY EVOLUTION


      ======================================================================
      RELEASE    BASE  ERD/    EMR
      FILE       FILE  URD NO. NO.       DESCRIPTION OF CHANGE
      ======================================================================
|     CBAZA      CBAZ0
|     (02/24/93)
|                      10057   94-1194   FUEL - TRANSIENT - Chronometric 
|                                        improvement for 15 mhz eec module.
|                      3990    94-1202   FUEL - INJECTOR OUTPUT - SIM_MIN logic 
|                                        performs no useful function.
|                      3990    94-1202A  FUEL - INJECTOR OUTPUT - SIM_MIN 
|                                        logic performs no useful function.
      ======================================================================
      CBAZ0      CBAY0
      (02/18/93)
                       10030   94-1177B  TRANSMISSION - EPC - Temporary 
                                         being corrupted, TV_PRES could contain 
                                         wrong value.
                       9550    94-1177C  OBD-I CONT TEST OTHER - shift 
                                         validation incrementing CXXXfil for 
                                         good shifts.
                       10017   94-1186   TRANSMISSION - SHIFT CONTROL - 
                                         Inconsistant torque modulation triggers.
                       10113   94-1201   TORQUE CALC - TRANSMISSION TORQUE CALC - 
                                         Error in the computation of TR_TQ_LIMIT.
      ======================================================================
      CBAY0      CBAX0
      (02/05/93)
                       9773    94-1092B  TRANSMISSION - OTHER - At high 
                                         TOT, flags FLG_TVSTR_CD, etc. are set.
                       9643    94-1124A  FUEL - QUICK AND DIRTY - 
                                         Hesitation after cold start extended 
                                         idle.
                       9487    94-1131   TRANSMISSION - SHIFT CONTROL - Shift 
                                         problems in 4X4L.
                       9614    94-1137   TORQUE CALC - TRANSMISSION TORQUE CALC - 
                                         Unacceptable driveability at low ambients.
                       9760    94-1147   FUEL - INJECTOR TIMING - 8061 STRATEGIES 
                                         will reset during long fuel pulses.
                       9842    94-1155   GENERAL - OTHER - Add new DTIMER macro 
                                         as a ROM thrift.
                       9896    94-1165   IDLE SPEED - DESMAF - Error in DESMAF 
                                         calc when ISCFLG = 0.
                       9929    94-1169   OBD-I CONT TEST EGO SWITCHING TEST - 
                                         Delete unused scalars.
                       9927    94-1177   EGR - SONIC EGR - APT = -1 check is 
                                         not done before EOFF update.
                       9927    94-1177A  EGR - SONIC EGR - Remove 
                                         duplicate code which updates EGRBAR, 
                                         EOFF.
      ======================================================================
      CBAX0      CBAW2
      (01/14/93)
                       9403    94-0462S  TRANSMISSION - SHIFT CONTROL - Undo 
                                         emrs which correct the "manual override 
                                         of PPH".

                                         1-2

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       7265    94-0680   FUEL - OTHER - Doc. error with y-input 
                                         of FN1327 & FN1329.
                       9172    94-1057B  FUEL - VEHICLE SPEED LIMITING - Dynamic 
                                         Fuel interferes with Half fuel and DIS 
                                         cutout intent.
                       9641    94-1070D  BAROMETRIC PRES - BP SENSOR INPUT 
                                         PROCESSING - Remove BP sensor parameters 
                                         DOCUMENTATION ONLY.
                       9155    94-1092   TRANSMISSION - OTHER - '94 torque 
                                         modulation improvements.
                       9573    94-1095   TRANSMISSION - EPC - inadequate line 
                                         pressure on manual 4-2 pullin's.
                       9660    94-1122   GENERAL - OTHER - Move SIM_MIN = SIMLIM4 
                                         init. to RAM_INIT.
      ======================================================================
      CBAW2      CBAW1
      (12/28/92)
                       9641    94-1070C  BAROMETRIC PRES - BP SENSOR INPUT PRO - 
                                         Remove more poorly documented BP sensor 
                                         parameters.
      ======================================================================
      CBAW1      CBAW0
      (12/18/92)
                       7480    94-0643   BAROMETRIC PRES BP SENSOR - Delete BP 
                                         sensor strategy.
                       9584    94-1008A  TRANSMISSION - SHIFT CONTROL - 
                                         Transmission shift schedule messed up.
                       9282    94-1069   TRANSMISSION - CONVERTER CLUTCH 
                                         CONTROL - Remove FLG_DE_CMGR from 
                                         converter clutch logic.
                       9472    94-1070   BAROMETRIC PRES OTHER - CB is out of 
                                         memory.  Thrift BP Sensor strategy.
                       9472    94-1070A  BAROMETRIC PRES OTHER - Reinstate 
                                         FILHYS.  Delete NEW_BAP.
                       9472    94-1070B  BAROMETRIC PRES OTHER - Thrift more 
                                         undocumented BP sensor parameters.
      ======================================================================
      CBAW0      CBAV0
      (12/09/92)
                       9011    94-1001   OBD-I ENG RUN - MASS AIRFLOW SENSOR - 
                                         In KOER, if MAF sensor fails, EGO codes 
                                         are also set.
                       9011    94-1001B  OBD-I ENG RUN - MASS AIRFLOW SENSOR - 
                                         In KOER, perform MAF test AFTER High 
                                         RPM ISC test.
                       7603    94-1008   TRANSMISSION - SHIFT CONTROL - Over temp 
                                         conditions trailer tow davis dam.
                       8915    94-1009   TRANSMISSION - CONVERTER CLUTCH CONTROL - 
                                         GR_HOT should be minimum gear to enter 
                                         hot lockup.
                       9134    94-1021A  GENERAL - OTHER - Missing RET in VS 
                                         Chime Software Module.
                       9146    94-1023A  TRANSMISSION - SELF TEST/FMEM - EPC 
                                         short  causes fourth gear failure.
                       9146    94-1023B  TRANSMISSION - SELF TEST/FMEM - Fix typo 
                                         in MLPS conversion module.
                       9187    94-1038   TRANSMISSION - SHIFT CONTROL - Time out 
                                         entry conditions in torque modulation.


                                         1-3

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       9239    94-1040   EGO - UPSTREAM MONITOR - The incorrect 
                                         ego codes are sometimes set.
                       9078    94-1053A  OBD-I ENG RUN - SPARK CONTROL - SAFTOT 
                                         overrides SAF in running self test.
                       9270    94-1056   FUEL - OPEN LOOP - Error in 
                                         implementation of LMBJMP.
                       9398    94-1058   FUEL - INJECTOR OUTPUT - Cranking 
                                         injector logic not working properly.
                       9431    94-1078   FUEL - OPEN LOOP - LAMBSE RESET LOGIC, 
                                         ANPIP and ENPIP are not handled correctl.
      ======================================================================
      CBAV0      CBAU0
      (10/22/92)
                       6344    93-643    OBD-I CONT TEST MASS AIR FLOW - Code 
                                         157,low maf voltage,being set 
                                         prematurely during low N.
                       6344    93-643A   OBD-I CONT TEST - MASS AIR FLOW - Move 
                                         VMAFLOWN to region 7.
                       6034    94-374B   TRANSMISSION - OTHER - Correct typo - 
                                         TQ*SR*(TP_REL_H) should be 
                                         FNTQ*SR*(TP_REL_H).
                       6424    94-405    OBD-I ENG RUN - MASS AIRFLOW SE - Code 
                                         157 being set prematurely at low TP.
                       8524    94-462O   TRANSMISSION - SHIFT CONTROL - Manual 
                                         override of PPH doesn't work; PDL = 
                                         3 to 4.
                       7498    94-720C   IDLE SPEED - DESIRED RPM - ISC distur-
                                         bances due to A/C and ACT.
                       7003    94-857B   OBD-I CONT TEST - MASS AIR FLOW - MAF 
                                         fault should not be filtered if 
                                         outside N and TP range.
                       8626    94-905A   FAN - HIGH SPEED FAN - A/C Rapid 
                                         Cycling at startup at high ambients.
                       8540    94-920    TRANSMISSION - SELF TEST/FMEM - Logic 
                                         error occurs for false shift errors.
                       8517    94-944    FMEM - ECT SENSOR UPDATE - If ECT 
                                         and ACT both fail open - engine won't
                                         start.
                       8619    94-950    THERMACTOR - UP/DOWN STREAM - Catalyst 
                                         protection: replace AWOTMR with up/down 
                                         count timer.
                       8751    94-962A   TRANSMISSION - EPC - Check default 
                                         timer properly in Torque Modulation.
                       8751    94-962B   TRANSMISSION - EPC - Clear FLG_UP_TQM 
                                         and FLG_SPK_TQM whenever FLG_SFT_IN 
                                         = 0.
                       8840    94-964    COMMUNICATION - DCL - DCL may
                                         transmit DMR data in a receive slot.
                       8787    94-986    TRANSMISSION - SHIFT CONTROL - 
                                         Seperate Shift in Progress Times 
                                         for 4X4L.
                       9000    94-999    TRANSMISSION - SELF TEST/FMEM - Found
                                         EPC open circuit FMEM problem.
                       8511    96-095    FUEL - INJECTOR OUTPUT - Documenta-
                                         tion Error LST_PW_TABLx should be 
                                         LST_PWx.
      ======================================================================



                                         1-4

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      CBAU0      CBAT0
      (09/14/92)
                       6921    94-520H   FMEM - FAILURE RECOGNITION - Modify 
                                         MLPS fault logic.
                       6339    94-595    SPEED LIMITING  ENGINE SPEED LIMITING - 
                                         Symptom & no code for max RPM & veh 
                                         speed sensors.
                       6948    94-833    TRANSMISSION - CONVERTER CLUTCH CONTROL - 
                                         Improve the "Catchnet" test.
                       8263    94-852    SPEED LIMITING - ENGINE SPEED LIMITING - 
                                         Delta-time of PIP (DT12S), updated 
                                         before fuel limiting.
                       8392    94-858    GENERAL - OTHER - ALT_CAL_FLG is set 
                                         during pwr up after battery disconnect.
                       8429    94-865    CANNISTER PURGE OTHER - Add Vehicle 
                                         speed logic check condition to enable 
                                         purge.
                       8429    94-865A   CANNISTER PURGE OTHER - Revise vehicle 
                                         speed logic of 94-865 to fit convention.
                       8431    94-869    THERMACTOR - UP/DOWN STREAM - Lock out 
                                         Downstream Thermactor Air during Open 
                                         Loop Fuel.
                       8431    94-869A   THERMACTOR - UP/DOWN STREAM - Delete 
                                         unused codes from MIL logic.
      ======================================================================
      CBAT0      CBAS0
                       6728    93-150X   OBD-I CONT TEST - EGO SWITCHING TEST - 
                                         Corrections to 150R and 150S, additional 
                                         fail criteria.
                       8165    93-713M   OBD-I ENG RUN - ENGINE RUNNING 
                                         INITIALIZATION - Eliminate potential for 
                                         Error Code 225 in E.R. VIP.
                       6034    94-374    TORQUE CALC - TRANSMISSION TORQUE CALC - 
                                         Implement Torque Manangement for Upshifts.
                       6034    94-374A   TRANSMISSION - OTHER - Call "UPSHIFT 
                                         TORQUE MODULATION SET-UP" from 
                                         background.
                       6034    94-374D   TORQUE CALC - TRANSMISSION TORQUE CALC - 
                                         Update NICT_TRIG_EN always (when 
                                         FLG_UPS_TQM = 1).
                       6599    94-417    AIR CHARGE CALC OTHER - Improved INF_MAF 
                                         calculation compensating for EGR and ACT.
                       7607    94-704A   INPUT PROCESS - OTHER - Correct errors/
                                         omissions from 94-704.
                       7530    94-713    IDLE SPEED - DESIRED RPM - Need separate 
                                         neut/drive RPM adder for A/C.
                       7322    94-761    OBD-I ENG RUN - Throttle plate adjustment 
                                         mode TP adjust mode does not beep when 
                                         out of range.
                       8058    94-777    GENERAL - OTHER - Add cal. parameter for 
                                         200 microsec.
                       8065    94-789    TRANSMISSION - CONVERTER CLUTCH 
                                         CONTROL - Replace thrifted functions 
                                         fndnssft32 and fndnssft43.
                       8147    94-803    TRANSMISSION - EPC - Software error in 
                                         dyanamic EPC table.
                       8148    94-810    SPARK - DESIRED SPARK - DRIVE.
                       8097    94-814    OBD-I ENG OFF - ENGINE OFF SEQUENCE - 
                                         OK code 111 not being transmitted in KOEO.

                                         1-5

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       8232    94-825    SPARK - KNOCK - Knock strategy bin point 
                                         error.
                       8196    94-831    FUEL - CLOSED LOOP - LAMBSE reset logic 
                                         deleted in thrift.
                       8245    94-840    TRANSMISSION - SELF TEST/FMEM - 
                                         TV_COUNT_LST not updating to TV_COUNTS 
                                         at EPC failure.
                       8369    94-850    TRANSMISSION - EPC - FN12T, FN23T and 
                                         FN34T don't work.
      ======================================================================
      CBAS0      CBAR0
      (07/10/92)
                       6947    93-377A   EGR - ACTUAL PERCENT EGR - 93-377 was 
                                         not fully implemented.
                       6446    93-669C   OBD-I ENG OFF - OTHER - Make the KOEO 
                                         End Of Line test more robust.
                       5748    94-213    TRANSMISSION - DYN TV CALC - Make 
                                         Dynamic TV a function of NEBART for 
                                         4-3's and 3-2's.
                       5748    94-213A   TRANSMISSION - DYN TV CALC - Use 
                                         NE_STRT_SFT instead of NEV_STRT_SFT 
                                         for TV_DYN.
                       5748    94-213C   TRANSMISSION - DYN TV CALC - Back out 
                                         94-213,A/correct CMS latest levels/
                                         avoid seq. probs.
                       5737    94-223B   TRANSMISSION - SHIFT VAL - Incorrect 
                                         arithmetic sign in shift validation 
                                         logic.
                       5737    94-223C   TRANSMISSION - SHIFT VAL - Correct 
                                         documentation to match software.
                       6185    94-295    OTHER - N/A - Add General Purpose 
                                         Function definitions to Symbology.
                       6791    94-295A   GENERAL - OTHER - Revise Symbology - 
                                         Delete    INC and DEC, revise CLIP.
                       6271    94-343B   Transmission - EPC - Make 4-3/3-4 
                                         Dynamic EPC vary with TP_REL and 
                                         NEBART.
                       6271    94-343D   Transmission - EPC - Correct range of 
                                         normalizing functions.
                       6469    94-379    TRANSMISSION - TCIL - Clean up TCIL 
                                         doc'n in strategy book.
                       6469    94-379A   TRANSMISSION - TCIL - Clean up TCIL 
                                         doc'n in strategy book.
                       6421    94-445    TRANSMISSION - CONVERTER CLUTCH 
                                         CONTROL - Inconsistent relocks after 
                                         throttle rate unlock.
                       6421    94-445A   TRANSMISSION - CONVERTER CLUTCH 
                                         CONTROL - Corrections to 94-445 after 
                                         thrifts to CB.
                       6834    94-471    GENERAL - OTHER - Update SYMBOLOGY 
                                         chapter to current symbology usage.
                       6802    94-538    SPARK - SPOUT CALC - SAFTOT 
                                         calculation should occur after 
                                         final clips.
                       7240    94-649    TRANSMISSION - SHIFT CONTROL - 
                                         Improve sequenced 4-2 downshifts.
                       7441    94-662    TRANSMISSION - OTHER - Logic 
                                         conflicts in the INTRN_RT_NOVS_KAM_
                                         CALC module.

                                         1-6

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       7579    94-675    TRANSMISSION - SELF TEST/FMEM - 
                                         More robust shift validation 
                                         required for all NON-TSS app.
                       7663    94-696    FUEL - TRANSIENT - TFC will take 
                                         fuel out on restart. IMPLEMENT 
                                         THIS ONE!
                       7663    94-696B   FUEL - TRANSIENT - Correct 
                                         definition of TFC_TMR. Should be 
                                         free running. HOT!
                       7606    94-697    FUEL - OTHER - Thrift Idle fuel 
                                         modulation.
                       7606    94-697A   FUEL - OTHER - Cleanup to Thrift 
                                         Idle fuel modulation EMR.
                       7607    94-704    INPUT PROCESS - OTHER - Thrift all 
                                         power steering pressure switch 
                                         strategy.
                       7834    94-744    CANNISTER PURGE 10HZ SOLENOID - 
                                         Engine surge and noise during 
                                         neutral   diagnostics.
                       7628    94-765    FUEL - OTHER - Eliminate lean 
                                         spiking when purge is turned off.
                       7628    94-765A   FUEL - OTHER - Define and add 
                                         parameter to 94-765.
                       7881    94-770    FUEL - OPEN LOOP - Need to delay WOT 
                                         breakpoints at lower RPM'S.
                       7629    95-089B   FUEL - CLOSED LOOP - ECT Mult on 
                                         FN1351 for Cold Operation.
                       7184    95-102    GENERAL - OTHER - RPM calc. does not 
                                         take advantage of full 0.25 accuracy.
      ======================================================================
      CBAR0      CBAQ0
      (06/05/92)
                       7286    92-476E   TRANSMISSION - CONVERTER CLUTCH CONTROL 
                                         - Correct errors in upshift converter 
                                         clutch control.
                       7286    92-476G   TRANSMISSION - CONVERTER CLUTCH CONTROL - 
                                         Correct documentation error.
                       5965    92-555A   MISCELLANEOUS - A/C - Intermittent A/C 
                                         Recognition error.
                       5965    92-555B   MISCELLANEOUS - A/C - Intermittent A/C 
                                         Recognition error.
                       6728    93-150R   OBD-I CONT TEST EGO SWITCHING TEST - 
                                         ego test robustness.
                       6728    93-150V   OBD-I CONT TEST EGO SWITCHING TEST - 
                                         ego test robustness.
                       6013    93-263M   MISCELLANEOUS - Change NRMCES and NMRRLD 
                                         to non-viewable parmameters.
                       4942    93-323C   FUEL - Documentation clearification of 
                                         the current fuel strategy.
                       5253    93-436    EGR - PFE ACTUAL - Documentation error
                                         in EGR_PFE LOGIC.
                       5954    93-598    ISC - OTHER - Provide separate A/C 
                                         delay times for start-up and cycling.
                       5954    93-598A   ISC - DESIRED RPM - Eliminate A/C delay 
                                         timer logic from ISC.
                       5954    93-598B   ISC - DESIRED RPM - Replace ACRQST with 
                                         AC_PPM_RQST.



                                         1-7

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       6391    93-649B   TRANSMISSION - SELF TEST/FMEM - False 
                                         vehicle speed codes are set when 
                                         PDL_ERROR =1.
                       7394    93-649E   TRANSMISSION - SELF TEST/FMEM - Correct 
                                         parameter transaction for 93-649b.
                       7035    93-708A   GENERAL - OTHER - Avoid future
                                         software/strategy errors.
                       7094    93-724A   SPARK - OTHER - Add anti plug fouling 
                                         strategy.
                       5350    94-152    FUEL - DFSO - Prevent exhaust backfires 
                                         while racing the engine.
                       5990    94-291    EGR - OUTPUT CONTROL - Strategy Module 
                                         duplication. Clarify implementation.
                       5993    94-300    MISCELLANEOUS - Remove unused function,
                                         due to duplication.
                       6195    94-352    Fuel - Open Loop - Potential for improve-
                                         ment in fuel control.
                       6116    94-365    THERMACTOR - EAM - Add Electric Air 
                                         Management Monitor (EAMM) Self-Test 
                                         / FMEM.
                       6116    94-365C   OBD-I CONT TEST - MALFUNCTION INDICATOR 
                                         LIGHT - Add EAMM to MIL. *REQUIRED* for 
                                         production w/ Elec Air Pump.
                       6474    94-384    TRANSMISSION - SELF TEST/FMEM - Implement 
                                         FMEM Lock-Up in C* strategies.
                       6491    94-388    TRANSMISSION - EPC - Correct typo - TVEPC 
                                         should have been TCEPC.
                       6593    94-422    TRANSMISSION - EPC - Potential for reverse
                                         clutch damage in failure mode.
                       6646    94-428    GENERAL - OTHER - Saudi Arabia exports 
                                         require 'chime' feature.
                       6639    94-451A   TRANSMISSION - CONVERTER CLUTCH CONTROL - 
                                         Clear FLG_UNLK_DS if change of mind shift 
                                         occurs.
                       6681    94-462A   TRANSMISSION - SHIFT CONTROL - ignore pph 
                                         on manual shifts.
                       7350    94-521B   FUEL - ADAPTIVE - PG_DC should be PURGDC.
                       7350    94-521C   FUEL - ADAPTIVE - Do not use reference 
                                         cell values for update rate calcs.
                       7025    94-551    OBD-I CONT TEST EGR - Initialize FIEPT, 
                                         CFIEPT. Lock out 327, 337 til EGR enabled.
                       7025    94-551D   OBD-I CONT TEST - EGR - Correct docu-
                                         mentation of EFMLO and EFMHI.
                       5983    94-557    TRANSMISSION - SHIFT CONTROL - RPM Cap 
                                         is ignored if downshift is in progress.
                       7048    94-560C   TRANSMISSION - CONVERTER CLUTCH CONTROL 
                                         - To eliminate converter clutch cycling
                                         at cold temperatures.
                       7146    94-581    CANNISTER PURGE OTHER - Modify open loop
                                         purge entry conditions.
                       7293    94-611    TRANSMISSION - EPC - Thrift left over 
                                         engagement logic/high temp modulation.
                       7375    94-616    FUEL - CRANK - N_RUN used to replace
                                         NRUN needs to be loaded with a value.
                       7017    94-617    GENERAL - OTHER - Need more compre-
                                         hensive logic for shared output
                                         determinations.



                                         1-8

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       7391    94-620    TRANSMISSION - CONVERTER CLUTCH CONTROL 
                                         - thrift altitude & unsteady thorttle 
                                         delays for CC lock.
                       7391    94-620A   TRANSMISSION - CONVERTER CLUTCH CONTROL 
                                         - Avoid sequencing problem with 94-428.
                       7391    94-620B   TRANSMISSION - CONVERTER CLUTCH CONTROL 
                                         - Add BPUNMN and BPUNMH back into 
                                         strategy.
                       7391    94-620C   TRANSMISSION - CONVERTER CLUTCH CONTROL 
                                         - Correct CMS/doc'n.
                       7483    94-642    TRANSMISSION - OTHER - Thrifts needed to 
                                         keep strategy under 56K.
                       7483    94-642A   TRANSMISSION - OTHER - Remove redundant 
                                         condition in EPC_GUIDE.
                       7469    94-645    SPARK - OTHER - Improve tip-in retard 
                                         strategy.
                       7478    94-651    GENERAL - OTHER - Delete heated 
                                         windshield strategy.
                       7478    94-651A   GENERAL - OTHER - Delete heated 
                                         windshield strategy.
                       7479    94-656    GENERAL - OTHER - Delete CID strategy.
                       7479    94-656A   GENERAL - OTHER - Delete CID strategy.
                       7592    94-678    A/C CLUTCH - OTHER - Dual A/C delay 
                                         timers not required in CB or CZ.
                       7484    94-711    OBD-I CONT TEST OTHER - Back out 
                                         94-356 (EAMM). (!! 94-711a to go in 
                                         NEXT release!!)
      ======================================================================
      CBAQ0      CBAP0
      (04/16/92)
                       4337    92-140I   FUEL - RPM LIMITER - Problems implementing
                                         EMR 92-140 in ECBADB.
                       5718    93-250B   FUEL - INJECTOR OUTPUT - Inconsistent 
                                         indexing of LST_PW_TABL - memory,time 
                                         thrift.
                       4727    93-512    SELF-TEST - CONTINUOUS - Delete lock 
                                         out of multiple EGR codes, Fault Filter 
                                         Overview.
                       5746    93-565A   SPEED CONTROL - SPEED LIMITING - Bring 
                                         Vehicle Speed Limiting in line with 
                                         CZ/CC, Use OSS.
                       5746    93-565B   SPEED CONTROL - SPEED LIMITING - Define 
                                         NLMT_FLG2 for mainline CB.
                       5885    93-588    ISC - Expand allowable range of EDF 
                                         Parameters.
                       5557    94-202    FUEL - DYNAMIC MAKEUP - Prevent dynamic 
                                         fuel operation when HALF_FUEL = 1.
                       5876    94-230B   FUEL - Modify LESFLG1 logic to include 
                                         NUMEGO = 1 condition.
                       6290    94-328    FAN - LOW SPEED FAN - Request 
                                         electrodrive fan remain activated 
                                         throughout koer.
                       5516    94-342    TRANSMISSION - GR_CM MLPS=2 - Make 
                                         Manual 4-2 pull-ins more flexible.
                       5910    94-357    OTHER - N/A - To limit purge for extended 
                                         engine on idle soaks.
                       6600    94-420A   TRANSMISSION - SPEED SENSOR CALC - 
                                         Change doc'n of TSS_CLK_FRQL calibration 
                                         for 18MHz proc.

                                         1-9

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       6623    94-431    COMMUNICATION - DOL - Addition of 
                                         distance-to-empty feature (dol).
                       6623    94-431C   THERMACTOR - UP/DOWN STREAM - Replace AM2 
                                         control - deleted by mistake.
                       6732    94-442    GENERAL - OTHER - Add I/O channel 
                                         assignment/list of switches to books.
                       6764    94-464    FUEL - TRANSIENT - Tip-in detonation in 
                                         warm engine.
                       7177    94-464A   FUEL - TRANSIENT - Non-modeled system 
                                         errors causing lean spikes.
                        847    94-466    INPUT PROCESS - OTHER - Strategy can 
                                         recognize an EGO switch when the EGO has 
                                         not sw.
                       6857    94-486    FUEL - TRANSIENT - AIR_CHG_PRV updated 
                                         too often.
                       7115    94-497A   FUEL - TRANSIENT - Transient fuel init. 
                                         kills engine. (you want this one).
                       6981    94-513    FUEL - OPEN LOOP - Need EEC memory 
                                         space - thrift lean cruise logic.
                       6981    94-513A   FUEL - OPEN LOOP - Cleanup to 94-513; 
                                         delete additional parms, doc. cleanup.
                       6773    94-521    FUEL - ADAPTIVE - Improve Adaptive Fuel 
                                         update rates.
                       7208    94-521A   FUEL - ADAPTIVE - Random number algorithm 
                                         will not function properly.
                       7039    94-523    SPARK - OTHER - Foreground tip-in retard 
                                         will not work.
                       7040    94-536    FUEL - CLOSED LOOP - BIAS_G/ptpamp calc. 
                                         is incorrect when ptpamp = ISC_PTP.
                       7104    94-544    SPARK - OTHER - SPK_AIR_CHG not being 
                                         updated if NEW_RPM = 0.
                       7103    94-568    FAN - EDF CONTROL - Correct the scaling 
                                         of LSF_RLY_PRCT, and HSFAN_DELAY.
      ======================================================================
      CBAP0      CBAO0
      (03/04/92)
                       5218    93-416    SPARK - KNOCK WINDOW - X normalizing
                                         function not appropriate for FN1144.
                       5341    93-469    SELF-TEST - CONTINUOUS - Delete 
                                         unused parameters.
                       5341    93-469A   SELF-TEST - CONTINUOUS - Delete 
                                         unused parameters.
                       4976    93-470A   FMEM - ECT SENSOR - Revise FMEM for 
                                         ECT and ACT. - Add another CB detail.
                       5413    93-477    OTHER - Thermactor dump during closed 
                                         loop.
                       5416    93-482    SPARK - OSC MOD - Calculate DNDT_SPK at 
                                         start of spark routine.
                       5453    93-499    SELF-TEST - KOER - Prevent false cylinder 
                                         balance test failure when A/C is on.
                       5534    93-502    MISCELLANEOUS - A/C - Error in the WOT A/C
                                         Cutout logic.
                       5593    93-543    SPARK - KNOCK WINDOW - Only one KTS pulse 
                                         is cancelled regardless of WINCLD.
                       6118    93-560C   FUEL - Resolution problem in FN348A 
                                         causing CRK_FUL to be clipped.
                       6471    93-560D   FUEL - CRANK - Resolution of ECT multi-
                                         plier for CRK_FUL not great enough.


                                         1-10

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       6458    93-594B   TRANSMISSION - SPEED SENSOR CA - Clarify 
                                         VS Processing Documentation.
                       6458    93-594C   TRANSMISSION - SPEED SENSOR CA - Update 
                                         Transmission Overview and clarify use 
                                         of TSTRAT.
                       6458    93-594D   TRANSMISSION - SPEED SENSOR CA - Update 
                                         Transmission Overview and clarify use 
                                         of TSTRAT.
                       6458    93-594E   TRANSMISSION - SPEED SENSOR CA - Update 
                                         Trans overview; Clarify VS processing 
                                         and add VS_PREV.
                       6479    93-661    THERMACTOR - OTHER - Do Thermactor bypass 
                                         when FN606 >= ATMR1.
                       6752    93-691    TRANSMISSION - RT_NOVS - RT_NOVS calcu-
                                         lation is incorrect.
                       5224    94-139    FUEL - CRANK - Poor high altitude starts.
                       5463    94-171    FUEL - Minimize cat. overtemp when 
                                         alternate injector firing.
                       5463    94-171    FUEL - Replace parameter name 
                                         HALF_FUEL_LAM with shorter HF_LAM.
                       5463    94-171D   FUEL - Prevent FUEL_LAMBSE_RESET module 
                                         to run if HALF_FUEL = 1.
                       5463    94-171E   FUEL - Include additional logic with 
                                         HF_LAM, left out mistakenly.
                       5737    94-223D   TRANSMISSION - SHIFT VAL - Calibration 
                                         Constant V_VSS_MULT is not used in CB 
                                         and CZ.
                       5701    94-268    SELF-TEST - KOEO - Add Electrodrive fans 
                                         to KOEO Self-Test OCC test.
                       5701    94-268A   SELF-TEST - KOEO - Add params correct 
                                         Doc's (Delete SBS1)(94-268: add fan KOEO).
                       5701    94-268B   SELF-TEST - KOEO - Correct flow chart 
                                         error. Match Software implementation.
                       5701    94-268C   SELF-TEST - KOEO - Replace code 623 with 
                                         652 to match software.
                       4646    94-269    FUEL - Cleanup: Strategy does not 
                                         reference the setting of CRKFLG.
                       6261    94-315    Spark - Other - Improve Tip-in retard 
                                         strategy.
                       6315    94-333    SPARK - OTHER - CB is TFI only - does
                                         not require DIS FMEM.
                       6315    94-333B   SPARK - OTHER - FN911 is not used - 
                                         delete it.
                       6416    94-367    FUEL - CRANK - CB users want dual 
                                         CRK_PIP_INJ feature.
                       6500    94-404    SPARK - OTHER - Foreground Tip-in retard 
                                         required to eliminate tip-in det.
                       6500    94-404A   SPARK - OTHER - Cancel EMR 93-039. 
                                         Do not multiply FN1144B by DT12S.
                       6500    94-404B   SPARK - OTHER - Tidy up foreground 
                                         tip-in retard strategy.
                       6133    94-412    INPUT PROCESS - OTHER - Modify 
                                         Transmission Control Switch Input 
                                         strategy.
                       6759    94-446    SPARK - KNOCK - Delete the individual 
                                         cylinder knock strategy.
                       6785    94-457    SPARK - TORQUE TRUNCATION VIA SPARK - 
                                         Delete unused parameters.


                                         1-11

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       6785    94-457A   SPARK - TORQUE TRUNCATION VIA SPARK - 
                                         Delete unused parameters.
                       6941    94-497    FUEL - TRANSIENT - Stalls and lean starts.
      ======================================================================
      CBAO0      CBAN0
      (01/14/92)
                       3144    92-243    SELF-TEST - CONTINUOUS - Continuous MAF 
                                         test uses N, not NBAR.
                       5375    92-496B   AIR MEASUREMENT - OTHER - Clarify 
                                         engineering/documentation content of 
                                         92-496.
                       4947    93-422C   EGR - PFE ACTUAL - Confusion over the 
                                         requirements of 93-422,A,B and 93-213.
                       5374    93-489    ISC - DESIRED RPM - Turn off AC when 
                                         RUNNING = 1 (in KOER).
                       5437    93-500M   SELF-TEST - CONTINUOUS - IPDL_LST 
                                         exists in documentation but not software.
                       4727    93-512G   SELF-TEST - CONTINUOUS - Replace BDELTA 
                                         with MDELTA in BP sensor test to match 
                                         S'ware.
                       5631    93-527A   ISC - DESIRED RPM - Turn off A/C when 
                                         RUNNING = 1 (in KOER).
                       4651    93-552    FUEL - OPEN LOOP - Documentation cleanup 
                                         of LAMBSE and ANPIP.
                       5878    93-594    TRANSMISSION - FMEM - Provide FMEM 
                                         action for VSBAR.
                       5878    93-594A   TRANSMISSION - FMEM - Replace MS_CLOCK 
                                         with "current CLOCK time in milliseconds".
                       6016    93-604A   TRANSMISSION - EPC - Unable to set error 
                                         code when EPC is an open circuit.
                       6097    93-619B   SELF-TEST - KOER - Correct documentation 
                                         error.
                       6111    93-620    SPARK - Clarify dwell calculation 
                                         documentation.
                       6220    93-633    OBD-I Cont Test - Fuel Pump Circu - 
                                         Software correction needed for false 
                                         code 543 (tech induced).
                       6378    93-647    COMMUNICATION - DCL - DCL will not 
                                         wake-up/switch to cart mode for SBDS.
                       6353    93-651    TRANSMISSION - EPC - TV_PRES_BAR 
                                         calculation is incorrect.
                       4911    94-090K   FUEL - Change HEGO input strategy to 
                                         reflect new naming convention.
                       5737    94-223    TRANSMISSION - SHIFT VAL - Unable to 
                                         validate 1-2 shifts with current test.
                       5913    94-240    AIR MEASUREMENT - FMEM - Improve 
                                         strategy book clearity by relocating 
                                         air meter FMEM.
                       5987    94-255    FUEL - TRANSIENT - Remove parameter "KFT" 
                                         from all strategies not using it.
                       6083    94-286    EGR - PFE ACTUAL - Strategy does not match
                                         code(used FN074 in lue of FN074B.
                       6084    94-302    SELF-TEST - CONTINUOUS - Correct software-
                                         VSSTMR cleared when VIP_FPMTMR cleared.
                       6183    94-303    Thermactor - Up/Down Stream - Replace 
                                         HLUA_FLG with the flag used in s'ware 
                                         (HMTMR_FLG).



                                         1-12

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       6463    94-303A   THERMACTOR - UP/DOWN STREAM - Correct 
                                         error made when cleaning up flop flop 
                                         logic.
                       6445    94-371    FUEL - TRANSIENT - Injector output control
                                         is causing lean spikes on tip-in.
                       6445    94-371A   FUEL - TRANSIENT - Injector output control
                                         is causing lean spikes on tip-in.
                       6466    94-383    TORQUE CALC - TRANSMISSION TO - TQ_INP_NET
                                         and tq_inp_mbt not calculated correctly.
                       6570    94-402    FUEL - TRANSIENT - Simplification of 
                                         transient fuel tracking/handling.
                       6578    94-408    FUEL - TRANSIENT - QD transient fuel 
                                         affects dynamic fuel.
                       6600    94-420    TRANSMISSION - SPEED SENSOR CALC - Change 
                                         range of TSS_CLK_FRQL to accomodate 
                                         18MHz proc.
                       5839    95-048A   TRANSMISSION - DSRD GEAR DET - In 
                                         GR_DS_AUTO_COM4, IGR_DS can be set wrong.
      ======================================================================
      CBAN0      CBAM0
      (11/14/91)
                       3084    92-184    OTHER - N/A - Correct potential problem 
                                         while using the "when" macro.
                       5376    92-484A   SELF-TEST - CONTINUOUS - Eliminate mask 
                                         of multiple egr error codes.
                       6015    92-559    SELF-TEST - CONTINUOUS - Disabling of 
                                         Idle Speed Test based on DSDRPM isn't 
                                         working.
                       5228    93-242Q   OTHER - N/A - HLS_COUNT_DT should be 
                                         vector calibratable.
                       5718    93-250A   FUEL - INJECTOR OUTPUT - Documentation 
                                         EMR doesn't match code.
                       4802    93-278D   FUEL - PURGE - Documentation errors in 
                                         93-278 series.
                       5668    93-357I   TRANSMISSION - UNCOND UNLCK - Fix error 
                                         in mlus test (unable to exit unc unlock).
                       5105    93-389D   FUEL - TRANSIENT - Standardize transient 
                                         fuel in CC, CB, &CC.
                       5056    93-396    TRANSMISSION - FMEM - Rename OCIL, ASML, 
                                         and ASMIL to TCIL.
                       5056    93-396E   TRANSMISSION - FMEM - Correct Parameter 
                                         Trans. and Self-Test for CB,CC, and CZ.
                       5072    93-420B   TRANSMISSION - UNCOND UNLCK - Change 
                                         resolution of UNLKDLY_TMR and UNLKDLYTM.
                       4991    93-441    MISCELLANEOUS - PSPS is changing with 
                                         no actual hardware attached.
                       5832    93-441A   SYSTEM COMM - DCL - Documentation 
                                         error in DCL BITMAP_1.
                       5339    93-446    FUEL - INJECTOR SYNC - Improved emissions 
                                         during starts + shorter start times.
                       5339    93-446A   FUEL - INJECTOR SYNC - Improved injector 
                                         output control, & synchronization.
                       5339    93-446B   FUEL - INJECTOR SYNC - Using hardware 
                                         present switches is not allowed.
                       5339    93-446C   FUEL - INJECTOR SYNC - Undo effect of 
                                         EMRS 94-446, 94-446A, 94-446B.
                       5204    93-457A   SPEED CONTROL - SPEED LIMITING - Improve 
                                         Output Shaft Speed Limiting.


                                         1-13

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       5204    93-457C   TRANSMISSION - OTHER - Correct entry 
                                         condition for vehicle speed processing.
                       6151    93-457D   TRANSMISSION - FMEM - Add VS_LIM_BAR, 
                                         TCVS_LIM_BAR, and NOBAR to strategy.
                       4700    93-472    MISCELLANEOUS - OTHER - Byte thrift.
                       5365    93-476    ISC - FMEM - Update ISC to correct TP 
                                         adjust test at intended RPM.
                       5541    93-476A   SELF-TEST - KOER - Allow low RPM / high 
                                         ISC to be detected, TP adjust test.
                       5436    93-485    SPARK - KNOCK WINDOW - Byte Thrift in KTS 
                                         calculation.
                       5446    93-486    SELF-TEST - CONTINUOUS - Software Thrift.
                       5446    93-486A   SELF-TEST - CONTINUOUS - Don't move 
                                         setting of THRESHOLD flags described in 
                                         93-486.
                       5437    93-500    SELF-TEST - KOEO - MLPS test 
                                         improvement.
                       5437    93-500D   SELF-TEST - KOEO - New MLPS test 
                                         improvement.
                       5437    93-500I   SELF-TEST - KOEO - Revise mpls test error 
                                         bands and test overview.
                       5437    93-500N   SELF-TEST - KOEO - Error in mlps module 
                                         entry conditions, module never executed.
                       4727    93-512F   FUEL - Correct type errors in Fuel Pump 
                                         Monitor Test (KOEO).
                       5777    93-559    TRANSMISSION - TV PRES GUIDE - Filter 
                                         TV_PRES to reduce induced pump noise.
                       5467    93-560    FUEL - CRANK - Improved starting at 
                                         lower ambients.
                       5467    93-560A   MISCELLANEOUS - OTHER - Clarify ECT / 
                                         ECT_INST relative to initial conditions.
                       5811    93-562    SYSTEM COMM - DCL - Delete use of CART 
                                         IC's Test Mode.
                       6101    93-562A   SYSTEM COMM - DCL - Delete unused 
                                         parameter CART_TESTMODE.
                       5894    93-582    TRANSMISSION - CLUTCH SLIP - Directly 
                                         accessing CLOCK_EXT may result in error.
                       5440    93-587    TRANSMISSION - OTHER - Revise processing 
                                         to read falling edge of OSS sig.
                       5940    93-597    SELF-TEST - CONTINUOUS - Intermittant pip 
                                         fault and fault clearing inop wrt code212.
                       5985    93-601    SELF-TEST - CONTINUOUS - Thermactor 
                                         test not funtioning properly.
                       6050    93-612    SELF-TEST - KOER - Hego test in koer 
                                         exit routine needs correction.
                       6062    93-617    SELF-TEST - KOEO - Output test mode 
                                         has AM1/AM2 spec'd but AM2 isn't cycled.
                       4903    94-107    FUEL - CRANK - Allow greater control 
                                         over cranking PW.
                       5133    94-112A   TRANSMISSION - OTHER - Add OSSMIN2 to 
                                         parameter dictionary.
                       6283    94-121D   Idle Speed - Desired RPM - Make ISC 
                                         compatible with new ACC and EDF strategy.
                       5239    94-130    TRANSMISSION - Delete call to PCSFTCMPT 
                                         module (does not exist for C*).
                       5318    94-140    SELF-TEST - KOER - Parameter VIPRR1 needs 
                                         larger range for functionality.
                       5318    94-140A   SELF-TEST - KOER - 94-140 exceeded usable 
                                         range for VIPRR1, make reasonable.

                                         1-14

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       5103    94-143B   MISCELLANEOUS - CHKAIR - CHKAIR - TAQ1 
                                         not in strategy - remove from parameter 
                                         dict.
                       5103    94-143D   MISCELLANEOUS - THERMACTOR - AWOTMR_FLG 
                                         not used in strategy - eliminate from 
                                         dictionary.
                       5647    94-192    TRANSMISSION - SHFT MODULATION - 
                                         Enhancement of torque modulation.
                       5693    94-197    AIR MEASUREMENT - Improved/relocation of 
                                         calculations for INV_MAP and INV_MVAC.
                       5583    94-210B   SELF-TEST - Implement EMRs 92-337A, 93-276
                                         & 93-276B in CB and CZ.
                       5642    94-228    AIR MEASUREMENT - MAFS SAMPLE - Mass 
                                         airflow meter drifts with ambient and 
                                         meter temperature.
                       5642    94-228B   AIR MEASUREMENT - MAFS SAMPLE - Correct 
                                         recursive nature of 94-228.
                       5963    94-253    FUEL - TRANSIENT - Update all 94-new 
                                         man. fil. strategies to FG transient fuel.
                       5963    94-253A   FUEL - TRANSIENT - CB and CZ don't 
                                         have PCOMP => TFC_HR should be TFC_FUEL.
                       5963    94-253C   FUEL - TRANSIENT - Missed a few 
                                         parameters in 94-253.
                       6048    94-279    FUEL - INJECTOR OUTPUT - Engine miss 
                                         caused by missing or too big injector 
                                         pulse.
                       6049    94-280    SELF-TEST - KOER - Correct spark control 
                                         test in koer - software only.
                       6114    94-281    SELF-TEST - CONTINUOUS - DFSFLG, 
                                         PCOMP_ENA, and OLFLG check missing in 
                                         inrange test.
      ======================================================================
      CBAM0      CBAL0
      (09/12/91)
                       5373    92-461B   SYSTEM COMM - DCL - Update DCL code in 
                                         CA and BAB, do A/D documentation cleanups.
                       5668    93-357G   TRANSMISSION - UNCOND UNLCK - Fix error 
                                         in mlus test (unable to exit unc unlock).
                       5486    93-495    SELF-TEST - MIL - Threshold_mil is being 
                                         stompted upon.
                       5348    93-497    SYSTEM COMM - DCL - A/C (driver demand) 
                                         bit in bitmap 1 incorrect.
                       5686    93-532    TRANSMISSION - CLUTCH SLIP - SLIP_ABS 
                                         Calculation incorrect when PDL=2, 
                                         GR_CM = 3.
                       5697    93-536    TRANSMISSION - TV PRES GUIDE - Incorrect 
                                         EPC pressures during shifts.
                       5016    94-085G   AIR MEASUREMENT - Old manifold filling 
                                         inadequate / bring CB&CZ to final level.
                       5016    94-085H   AIR MEASUREMENT - Density corrections to 
                                         AIR_CHG calculation left out.
                       5016    94-085J   AIR MEASUREMENT - Airleakage calculation 
                                         inproper // Sequencing problems.
                       5016    94-085K   AIR MEASUREMENT - Provide decel multiplier
                                         for tip-outs//make init. cleaner.
                       5016    94-085L   AIR MEASUREMENT - Replace english with 
                                         logic for integration check on maf.



                                         1-15

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       5016    94-085M   AIR MEASUREMENT - MAFS SAMPLE - CC & CZ 
                                         don't have SIGPIP => modify 
                                         AIR_SAMPLE_METER.
                       5022    94-102    ISC - IPSIBR CALC - Add Function FN811 to 
                                         the ISC_A_PROP equation.
                       4948    94-142    OTHER - N/A - Add ACPSW into the HEDF 
                                         Strategy and update to latest level.
                       4948    94-142A   ISC - DESIRED RPM - Update fan logic to 
                                         account for name change.
                       5583    94-210    SELF-TEST - Change spark strategy when in 
                                         TP adjust mode (as in 93-276A).
                       5583    94-210A   SELF-TEST - CONTINUOUS - Repl ITP, VMAXSW 
                                         with TP_REL, V_MAXSW(as per 93-481,
                                         93-309A).
                       5856    94-229    SPARK - Increase range of SPLCLP.
                       5855    94-231    OTHER - MN-12 and SN-95 require EDF/HEDF 
                                         on different pins.
                       5872    94-233    AIR MEASUREMENT - MANIFOLD FILL - FG/BG 
                                         sequencing causing massive overshoot 
                                         from idle.
                       5408    95-030A   OTHER - N/A - Clarify the meaning of 
                                         acpsw.
      ======================================================================
      CBAL0      CBAK0
      (07/18/91)
                       4207    93-070F   FUEL - BG_PW_CALC - injector parameter 
                                         documentation needs clarification.
                       5212    93-252A   FUEL - INJECTOR SYNC - EMR 93-252 
                                         documentation is incomplete; delete 
                                         FUEL_INJ_SYNC_COM*.
                       4044    93-282    TRANSMISSION - OTHER - Torque modulation 
                                         for vehicle without turbine speed sensor.
                       4044    93-282B   TRANSMISSION - OTHER - Torque modulation 
                                         for vehicle without turbine speed sensor.
                       4044    93-282C   TRANSMISSION - OTHER - Torque modulation 
                                         for vehicle without turbine speed sensor.
                       4044    93-282D   SPARK - OTHER - Torque modulation for 
                                         vehicle without turbine speed sensor.
                       4920    93-282E   TRANSMISSION - OTHER - Make exit and entry
                                         conditions for torq mododulation func's 
                                         of TP_REL.
                       5134    93-282F   TRANSMISSION - OTHER - Make entry 
                                         condition one-shot and add default timer 
                                         for torque modulation.
                       4950    93-300E   EGR - UNKNOWN - Correct description of 
                                         V_DELPFE_HP.
                       4836    93-357    SELF-TEST - CONTINUOUS - MLUS Test Rewrite
                                         with enhanced FMEM action.
                       4836    93-357D   SELF-TEST - CONTINUOUS - Correct Errors 
                                         in MLUS test rewrite.
                       4570    93-401    ISC - DESIRED RPM - Separate the logic 
                                         that joins FN821A and FN880 together.
                       4983    93-410    SELF-TEST - KOEO - Replace A3C with ACCS 
                                         in Selftest.
                       5072    93-420    TRANSMISSION - UNCOND UNLCK - Allow 
                                         nverter to remain locked @CT for fuel 
                                         economy.
                       4947    93-422B   EGR - PFE ACTUAL - EPT_OK_FLG and 
                                         SEM_FLG can not shut off EGR.

                                         1-16

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       5246    93-425    OTHER - Clarify flip-flop.
                       5138    93-428    TRANSMISSION - OTHER - Define FLG_CLD_32 
                                         in EDTS.
                       4812    94-074    TRANSMISSION - OTHER - Use TSTRAT to 
                                         event execution of transmission strategy.
                       5165    94-111    MISCELLANEOUS - INPUT CNVRT - ACSTRT/
                                         TCSTRT/INIT_TOT routine in code, but 
                                         not strategy book.
                       5397    94-153    FUEL - Memory thrift - delete wall 
                                         wetting from CB 94 mainline.
                       5397    94-153A   FUEL - TRANSIENT - Missed 5 paramters 
                                         for deletion when thrifting WW from CB94.
      ======================================================================
      CBAK0      CBAJ0
      (06/13/91)
                       2832    91-464A   FMEM - EGO SENSOR - EMR 91-464 did not 
                                         cover the FMEM chapter.
                       3576    92-320V   SELF-TEST - MIL - Upgrade MIL on/off 
                                         transition. Avoid MIL on / no code.
                       4429    92-435G   TRANSMISSION - MLUS OUTPUT - Add STROKE 
                                         mode - Freeze BCSDC on OPEN to PID change.
                       4429    92-435I   TRANSMISSION - PID CONTROL - STROKE 
                                         mode - Add scalar offset to DC1.
                       4593    92-435J   TRANSMISSION - PID CONTROL - Make P, I 
                                         and D gains FN(TQ_BAR) = filtered TQ_NET.
                       4578    92-476    TRANSMISSION - PID CONTROL - Revise UCC 
                                         upshift control - Non Turbine Speed 
                                         Sensor.
                       4578    92-476A   TRANSMISSION - PID CONTROL - Correct 
                                         errors in revised UCC upshift control.
                       4928    92-476B   TRANSMISSION - PID CONTROL - Correct 
                                         errors in revised UCC upshift control.
                       4928    92-476C   TRANSMISSION - PID CONTROL - Move 
                                         BCSDC_SFT_ST update from foreground to 
                                         background.
                       5093    92-476D   TRANSMISSION - PID CONTROL - Correct 
                                         errors in revised UCC upshift control.
                       4409    92-485B   SELF-TEST - KOEO - Add MLPS test to KOEO 
                                         Self-Test.
                       4409    92-485E   SELF-TEST - KOEO - Delete ref. in 
                                         overview to unused parameters. MLPS KOEO 
                                         test.
                       4680    92-492    SELF-TEST - CONTINUOUS - Software 
                                         functional issue with cont. MAF sensor 
                                         test.
                       5205    92-492A   SELF-TEST - CONTINUOUS - Undo effects 
                                         of 92-492.
                       5205    92-492B   SELF-TEST - CONTINUOUS - Undo effects 
                                         of 92-492.
                       4731    92-496    AIR MEASUREMENT - Commonize BP strategy.
                       4932    92-506    TRANSMISSION - ENGAG/STALL TV  Need 
                                         separate reverse stall pressure function.
                       4601    92-511    FUEL - Injector output FOFFLG2 operation 
                                         inconsistant with FOFFLG, which it 
                                         replaced.
                       4601    92-511A   FUEL - Injector output Correct reason 
                                         and request description for EMR 92-511.
                       5326    92-534    MISCELLANEOUS - INFERRED BP - BPUPDTTMR 
                                         not timing and hence BP not updating.

                                         1-17

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       4921    93-258B   TRANSMISSION - FMEM - Clean up from 
                                         93-258A - C625CNT must be a KAM register.
                       4959    93-362A   MISCELLANEOUS - Improper substitution 
                                         of BAPFMM in BP register.
                       4919    93-367    FUEL - OPEN LOOP - Maximize 0-60 times 
                                         and SAE HP, while protecting cat temps.
                       5062    93-375    MISCELLANEOUS - Byte thrift - Delete 
                                         unused function 384.
                       5066    93-379    SPARK - ECHO PIP - Correct the accuracy 
                                         for SA10_RPM_CLR and SA10_RPM_SET.
                       5033    93-390    TRANSMISSION - CLUTCH SLIP - Use TOT as 
                                         entry condition to allow continuous slip.
                       3959    93-395    FMEM - DIS - Correct error in DIS_FMEM 
                                         strategy (also uses less ROM).
                       3959    93-395A   FMEM - DIS - Correct error in DIS_FMEM 
                                         strategy (also uses less ROM).
                       5147    93-399    TRANSMISSION - TIP IN/OUT - Thrift Tip-in,
                                         Tip-out Logic from CB, CC, and CZ.
                       5147    93-399A   TRANSMISSION - OTHER - Thrift 4th gear 
                                         slip tables and VSBART_FM calculation.
                       5147    93-399B   TRANSMISSION - OTHER - Thrift FN114C 
                                         (normalizing function for 4th gear slip 
                                         table).
                       5147    93-399C   TRANSMISSION - TIP IN/OUT - Thirft 
                                         FNTIPDC from CB, CC, and CZ.
                       5174    93-418    TRANSMISSION - FMEM - PPH will not 
                                         allow trans to upshift if VSS fails.
                       5019    93-421    SELF-TEST - KOER - ISUBND can not be 
                                         calibrated.
                       5266    93-423    TRANSMISSION - GR_CM MLPS=2 - Implement 
                                         OD to Manual 2 pull-in logic in all AODE 
                                         appl.
                       5262    93-424    ISC - OTHER - Software error found in 
                                         implementation of 92-345 in CB.
                       5265    93-426    TRANSMISSION - CLUTCH SLIP - Reduce 
                                         engine surge in manual 3rd.
                       5294    93-431    SELF-TEST - CONTINUOUS - Vip code 211 
                                         always set on when engine starts.
                       5328    93-440    SELF-TEST - CONTINUOUS - Code 211 always 
                                         sets upon transition of CRKFLG.
                       4714    94-073    ISC - DASHPOT - Provide a DASPOT 
                                         mulptiplier for neutral.
                       4996    94-092    MISCELLANEOUS - ACPSW input is required.
                       4996    94-092A   MISCELLANEOUS - A/C - ACPSW hardware 
                                         resent check is required.
                       5133    94-112    TRANSMISSION - OTHER - Replace references 
                                         to TSS with OSS in doc'n and software.
      ======================================================================
      CBAJ0      CBAI0
      (05/09/91)
                       3346    92-139B   MISCELLANEOUS - Change parameter
                                         dictionary for RAM/ROM byte thrift.
                       3495    92-165A   FUEL - DYNAMIC MAKEUP - Dynamic pulses may
                                         no longer be appended to main pulses.
                       3495    92-165B   FUEL - DYNAMIC MAKEUP - Cancel EMRS
                                         92-165, 92-165A for all strategies.
                       3019    92-194    SPEED CONTROL - SPEED LIMITING - Engine is
                                         required to run above 7000 RPM.
                       3329    92-233    MISCELLANEOUS - RAM thrift.

                                         1-18

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       3298    92-239    FUEL - FN371 needs a new lower vector clip
                                         to enrichen more on N/D.
                       3429    92-253    ISC - Unable to calibrate FN825A and
                                         FN825B using cal-console.       
                       3488    92-271    SELF TEST - Byte thrift required to fit 
                                         OBD-I EMRs.
                       3792    92-355A   OTHER - EMR #92-240 cannot be implemented 
                                         in CA as written.
                       4888    92-502    TRANSMISSION - CLUTCH SLIP - Apply Test
                                         for Converter Clutch Instability to all
                                         AODE strategies.
                       4888    92-502A   TRANSMISSION - CLUTCH SLIP - Params. based
                                         on MS_CLOCK are now based on clock ticks.
                       4837    92-505    TRANSMISSION - CLUTCH SLIP - Allow for
                                         more aggressive converter operation in
                                         manual 3.
                       5123    92-520    TRANSMISSION - CMDED GEAR DET - 
                                         TM_UNLK_WDOG logic does not work as 
                                         expected.
                       3433    93-066    FUEL - DYNAMIC MAKEUP - Time and byte 
                                         thrift in checking AIR_DOWN_CAL.
                       3447    93-071    MISCELLANEOUS - DUCE initialization does 
                                         not take immediate effect.
                       3494    93-074    MISCELLANEOUS - OTHER - Ensure validity of
                                         queue subroutine pointers.
                       4527    93-150C   SELF TEST - CONTINUOUS - PURGING and
                                         PRGFLG not representative of state of 
                                         purge.
                       4304    93-226    SPARK - SPK_SOURCE can have an incorrect 
                                         value.
                       4921    93-258A   TRANSMISSION - FMEM - Clean up from
                                         93-258 - Delete parmeters from deleted
                                         modules.
                       5121    93-258C   SELF TEST - CONTINUOUS - EMR 93-258 
                                         neglected to delete OFMMAX_FLG from EDTS.
                       4040    93-316    TRANSMISSION - NORM TV CALC - Separate 
                                         non-shifting TV clip to improve lube flow.
                       4650    93-327    TRANSMISSION - Revise shift validation 
                                         logic error codes, improve FMEM.
                       4794    93-336    SELF TEST - KOER - False code 172 in DCL 
                                         appl. with multiplexed HEGO and STI.
                       4856    93-344A   OTHER - Make the range/resolution of AC 
                                         Calibration Constants more sensible.
                       4817    93-346A   SELF TEST - KOER - Self test logic does 
                                         not support DELTA PFE EGR.
                       4895    93-351    MISCELLANEOUS - THERMACTOR - Increase fuel
                                         economy - dump air in lean cruise.
                       5105    93-389    FUEL - TRANSIENT - Allow switchable 
                                         transient fuel calculation.
                       5105    93-389A   FUEL - TRANSIENT - Allow switchable bin 
                                         for FUEL_MAS_ACT calc. and modify adapt.
                       5105    93-389C   FUEL - TRANSIENT - BIN_SWTICH logic in 
                                         FUEL_MAS_ACT calculation wrong.
                       5162    93-400    EGR - Generic EGR will not function 
                                         properly.
                       5162    93-400A   EGR - OTHER - AMPEM is required to be 
                                         calculated with no EGR.
      ======================================================================


                                         1-19

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      CBAI0      CBAH0
      (04/08/91)
                       2724    92-158B   SPARK - Register thrift.
                       2724    92-158C   SPARK - Cleanup - deletion of unused 
                                         fox functions.
                       3613    92-158F   TRANSMISSION - Delete from parameter 
                                         dictionary; parameters no longer used.
                       3100    92-201    MISCELLANEOUS - Install SHADOW 
                                         instruction for IPPC(R-CON) function.
                       3397    92-277    TRANSMISSION - ENGAG/STALL TV - 
                                         FLG_TVENG_MD not being set properly.
                       3348    92-290    TRANSMISSION - Byte thrift.
                       4540    92-326X   SELF TEST - CONTINUOUS - CB a TFI only 
                                         strategy.
                       4855    92-326Z   SELF TEST - CONTINUOUS - Correct page 6 
                                         of 92-326X IGN TST.
                       3991    92-440    EGR - DUTY CYCLE - EGRDC freezes under 
                                         certain conditions.
                       4372    92-457B   SELF TEST - CONTINUOUS - False code (639) 
                                         can be set when Torque Converter not full.
                       4372    92-457D   SELF TEST - CONTINUOUS - Revise fault 
                                         filter/VSFMFLG logic. Document entry 
                                         logic.
                       4792    92-457K   TRANSMISSION - Change name and rescale 
                                         VSSMIN2.
                       3548    93-081B   MISCELLANEOUS - Include these EMRs in CB 
                                         backlog.
                       3946    93-089E   AIR MEASUREMENT - MANIFOLD FILL - Separate
                                         ECT function for Man. Fil. AIR_CHG_WOT.
                       3244    93-118    TRANSMISSION - VS_RATE calculated 
                                         incorrectly.
                       3244    93-118A   TRANSMISSION - Cleanup parameter 
                                         dictionary.
                       4428    93-118B   TRANSMISSION - Correct error in the 
                                         VSRATE/VSRATEPH calculation.
                       4783    93-142D   FUEL - FG_PW_CALC - Error in EMR 93-142B.
                       4411    93-161G   TRANSMISSION - Revise calculation of 
                                         TQ_INP_NET to match definition.
                       4348    93-242K   OTHER - DUCE FMEA documentation does not 
                                         reflect intent of S/W.
                       4460    93-250    FUEL - Clarification of the current fuel 
                                         strategy.
                       4466    93-252    FUEL - INJECTOR SYNC - Clarification of 
                                         the current fuel strategy.
                       4465    93-253    SPARK - TORQUE TRUNC - Torque truncation 
                                         occurs when not required.
                       4187    93-258    TRANSMISSION - EPC - ETV Overcurrent test 
                                         is redundant with continuous selftest E.
                       4590    93-302    TRANSMISSION - Delete unused parameters 
                                         from the DOC file.
                       4612    93-304    MISCELLANEOUS - PURGE - Improve base 
                                         calibration for PURG_ADP_SF.
                       5004    93-306A   SPARK - KNOCK WINDOW - Add CB to 93-306.
                       4729    93-308    MISCELLANEOUS - HEDF/EDF - Delete VRCM-
                                         related registers.
                       4736    93-313    FUEL - FG_PW_CALC - Foreground fuel 
                                         strategy does not match code..
                       4684    93-321    FUEL - TRANSIENT - Emissions.
                       4684    93-321A   FUEL - TRANSIENT - Emissions.

                                         1-20

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       4684    93-321B   FUEL - TRANSIENT - Emissions.
                       4769    93-322    SPARK - TIP RETARD - Initialize 
                                         TIP_ALLOW_LD to 1.
                       4769    93-322A   SPARK - TIP RETARD - Change range of 
                                         TIP_ALLOW_LD.
                       4853    93-340    SELF TEST - Instruction causes wrong 
                                         branch to be taken in VIP code.
                       4766    93-343    OTHER - RPM calculation error.
                       4856    93-344    OTHER - Software Error.
                       4897    93-348    SPARK - KNOCK WINDOW - Knock strategy: 
                                         Make KTS width a function of LOAD.
                       4417    94-046    SPARK - NORMAL SPARK - Allow Negative 
                                         Values In FN2100, Base Spark Table.
                       4417    94-046A   SPARK - NORMAL SPARK - Allow Negative 
                                         Values In FN2100 and FN2110.
                       4767    94-066    EGR - Implement Generic Sonic EGR 
                                         Strategy.
                       4767    94-066A   EGR - Add Generic PFE EGR Strategy.
                       4767    94-066B   EGR - Implement Generic Sonic EGR 
                                         Strategy.
                       4734    94-067    ISC - IPSIBR CALC - Reset IPSIBR to 
                                         Prevent Hot Re-start Stalls during crank.
                       4734    94-067C   ISC - IPSIBR CALC - Reset IPSIBR 
                                         during crank.
      ======================================================================
      CBAH0      CBAG0
      (02/20/91)
                       2555    91-390    AIR MEASUREMENT - ANTICIPATION - Add
                       2656              FN8000 to the ISCDTY calculation.
                       2078
                       2656    91-390A   SELF TEST - KOER - Base strategy
                                         changes to the ISCDTY calculation.
                       2656    91-390G   ISC - DESIRED RPM - DSDRPM documentation
                                         update for AA strategy.
                       4516    91-589    OTHER - Software documentation needs 1991
                                         copyright date.
                       3551    92-291    TRANSMISSION - ENGAG/STALL TV - Thrift TV
                                         Engagement logic.
                       4204    92-324L   MISCELLANEOUS - Provide a separate LAMMAX
                                         for PURGE logic (documentation error).
                       4346    92-326N   SELF TEST - CONTINUOUS - Modify IDM test
                                         fault filtering.
                       4346    92-326R   SELF TEST - CONTINUOUS - Unnecessary
                                         assignment statement.
                       4346    92-326S   SELF TEST - CONTINUOUS - Modify IDM test
                                         fault filtering.
                       4346    92-326T   SELF TEST - CONTINUOUS - Assignment of
                                         PIPIDM:= 0 in IDM test BG.
                       4430    92-387C   MISCELLANEOUS - INFERRED BP - EMRs 92-387,
                                         A, and B are unclear about the BPUPDTTMR's
                                         range.
                       4430    92-387D   MISCELLANEOUS - INFERRED BP - Check that
                                         INPUT_BP_INFERRED_COM1 is correctly
                                         implemented.
                       4194    92-435F   TRANS - MLUS - Need unique HOT speed
                                         ratio term to enable Hot Lock.
                       4236    92-446    TRANSMISSION - TV PRES GUIDE - TV_PRES 
                                         calculation - correct use of temporary 
                                         flg_eng_stall.

                                         1-21

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       4379    92-459    TRANSMISSION - MLUS OUTPUT - High TP 
                                         lockups are too slow.
                       4464    92-461A   SYSTEM COMM - DCL - Ensure the DCL A/D
                                         substitution is robust.
                       4307    93-055A   FUEL - Provide a reset calibration switch
                                         for CRKPIP_CTR.
                       3437    93-067    FUEL - DYNAMIC MAKEUP - Time and byte
                                         by moving enable dynamic update.
                       3432    93-068    FUEL - DYNAMIC MAKEUP - Modest RAM, ROM, 
                                         and time thrift by moving intcyl calc.
                       4550    93-070E   FUEL - BG_PW_CALC - Correction of 93-070C.
                       4629    93-142B   FUEL - FG_PW_CALC - Old and new pages
                                         or EMR 93-142 are not correct.
                       4023    93-156    ISC - DESIRED RPM - Add battery charging
                                         logic to DSDRPM section.
                       4392    93-161E   TRANSMISSION - 93-161* EMRs result in
                                         cycling spark when limiting.
                       4041    93-167B   TRANSMISSION - Modify UNCOND_UNLK_COM8.SS 
                                         to use GR_CM.
                       3892    93-181    TRANSMISSION - CMDED GEAR DET - Reduce
                                         shift time of sequenced shifts.
                       4210    E93-182B  MISCELLANEOUS - HEDF/EDF - Add two
                                         speed fan control in ISC for CB strategy.
                       4235    93-189    FUEL - Improve LAMBSE ramp-rate strategy.
                       4235    93-189A   FUEL - Complete documentation of ramp-rate
                                         strategy.
                       3996    93-204    SPARK - DIS_FMEM strategy is not needed in
                                         generic spark.
                       4267    93-206    AIR MEASUREMENT - Revise LOAD scaling for 
                                         boosted engine.
                       4327    93-224    FUEL - Count of EGO switch transitions
                                         being incremented by twos.
                       4327    93-224A   FUEL - To prevent EGO_CNT2 from
                                         incrementing in single EGO systems.
                       4410    93-236    FUEL - FG_PW_CALC - Strategy pages do not
                                         match EEC code.
                       4647    93-241B   MISCELLANEOUS - IAC - Thrift IAC from CB
                                         to maintain 56K memory and EDF.
                       4348    93-242H   OTHER - DUCE period calibration parameters
                                         should be VECTOR-calibratable.
                       4215    93-249    SELF TEST - CONTINUOUS - Add PURGEDC = 0
                                         requirement to code 187.
                       4480    93-254    SYSTEM COMM - DCL - Software error in
                                         implementation of EMR #92-427.
                       4529    93-268    FUEL - TRANSIENT - Revise scaling of
                                         CC_WW_FRAC.
                       4537    93-272    FUEL - Remove the ISC flag criteria in the
                                         initialization.
                       4536    93-274    SELF TEST - KOEO - CB's VIP software is
                                         deleting valid VIP error codes.
                       4597    93-285    TRANSMISSION - Software error in
                                         implementation of EMR 94-035.
                       4620    93-289    FUEL - TRANSIENT - Software error in
                                         FN1335 lookup.
                       4618    93-296    TRANSMISSION - Software error in
                                         RT_NOVS_KAM_CALC_COM.
                       4167    94-035    MISCELLANEOUS - INPUT CNVRT - TQ_NET can
                                         go negative: signed value required.


                                         1-22

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       4523    94-051    MISCELLANEOUS - HEDF/EDF - Add EDF and
                                         HEDF strategy.
                       4523    94-051A   MISCELLANEOUS - HEDF/EDF - Clear up 
                                         documentation for V_LOW_FAN_ON and
                                         add parameters.
                       4523    94-051B   MISCELLANEOUS - A/C - Add latest AC
                                         control strategy.
                       4523    94-051C   MISCELLANEOUS - A/C - Add latest AC
                                         control logic for ISC.
                       4523    94-051D   MISCELLANEOUS - A/C - Add latest AC
                                         control strategy.
                       4588    94-052    SPARK - EDIS OUTPUT - ROM and RAM 
                                         thrift - delete EDIS strategy.
                       4588    94-052A   SPARK - EDIS OUTPUT - ROM and RAM 
                                         thrift - delete EDIS strategy.
                       4588    94-052B   SPARK - EDIS OUTPUT - ROM and RAM 
                                         thrift - delete EDIS strategy.
                       4588    94-052C   SPARK - EDIS OUTPUT - Update paremeter
                                         dictionary.
      ======================================================================
      CBAG0      CBAF0
      (01/05/91)
                       4503    93-070D   FUEL - Error in fuel module:
                                         FUEL_BG_CALC_COM*.
                       4131    93-168B   MISCELLANEOUS - Cleanup DUCE documentation
                                         in the CMS environment.
                       4259    93-203    FUEL - TRANSIENT - Delete transient fuel
                                         from the strategy; has wall wetting.
                       4447    93-203A   FUEL - TRANSIENT - Eliminate FN022C, which
                                         is no longer required.
                       3822    93-212    MISCELLANEOUS - Maximum fuel economy
                                         required.
                       3822    93-212B   MISCELLANEOUS - Maximum fuel economy
                                         required.
                       3822    93-212C   MISCELLANEOUS - Maximum fuel economy
                                         required.
                       4296    93-213    EGR - DELPR is incorrectly calculated.
                       4401    93-235    OTHER - Delete Ride Control strategy to
                                         save memory.
                       4390    93-238    FUEL - Error with scheduling first fuel
                                         pulse on PIP down edge.
                       4400    93-241    MISCELLANEOUS - IAC - Thrift IAC from CB
                                         to maintain 56K memory.
                       4400    93-241A   MISCELLANEOUS - IAC - Replace FN1036A with
                                         TOTLDST for Input Conversions equation b.
                       4399    93-244    SPARK - Audible detonation.
                       4459    93-247    AIR MEASUREMENT - ANTICIPATION - Changes 
                                         to aircharge anticipation and exiting
                                         crank.
                       4459    93-247A   AIR MEASUREMENT - ANTICIPATION - Correct 
                                         definition of AIR_WOT_ANT.
                       4465    93-253    SPARK - TORQUE TRUNC - Torque truncation
                                         occurs when not required.
                       4350    93-261    FUEL - Wall wetting improvements for the
                       4469              cold weather trip.
                       4472
                       4495
                       3721    94-019    AIR MEASUREMENT - Install new Variable Cam
                                         Timing strategy.

                                         1-23

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       4458    94-019A   AIR MEASUREMENT - EMR 94-019 is not needed
                                         for the 4.6L-4V engine.
                       4402    94-041    MISCELLANEOUS - Delete VCRM logic: ROM and
                                         RAM thrift.
      ======================================================================
      CBAF0      CBAE0
      (11/28/90)
                       2901    92-166    SPARK - NORMAL SPARK - Implement generic 
                                         spark for BA and CA.
                       2901    92-166A   SPARK - NORMAL SPARK - Echo PIP As Spout 
                                         module must be replaced by generic 
                                         modules.
                       3271    92-174B   FUEL - Fix transient fuel issues; 
                                         documentation and strategy.
                       3473    92-174D   FUEL - TRANSIENT - AISF may incorrectly be
                                         set to zero, triggering TFC_FUEL.
                       3086    E92-182   FUEL - TRANSIENT - To add experimental
                                         wall-wetting to CA.
                       3086    E92-182A  FUEL - TRANSIENT - Cleanup EMR for
                                         experimental wall-wetting.
                       3390    E92-182B  FUEL - Revise wall-wetting;
                                         initialization and feedback loop
                                         calculation.
                       2672    92-185    SPARK - DETONATION - Problem resolution/
                                         functional enhancement.
                       3412    92-201A   MISCELLANEOUS - Install SHADOW instruction
                                         for IPPC(R-CON) function.
                       3242    92-211    OTHER - Calibration console access.
                       2854    93-040    MISCELLANEOUS - HEDF/EDF - Add variable
                                         speed fan control via DCL.
                       2854    93-040A   MISCELLANEOUS - HEDF/EDF - Update VSF fan
                                         control (clean-up EMR).
                       2854    93-040B   MISCELLANEOUS - HEDF/EDF - Variable speed
                                         fan default value.
                       3893    93-128    OTHER - Problem found with S-CON software
                                         hooks and SWDC memory.
                       4392    93-161F   TRANSMISSION - CB and CZ need complete 
                                         93-161* without 94-035 added.
                       4211    93-183    AIR MEASUREMENT - MANIFOLD FILL - Manifold
                                         filling; idle filter transition.
                       4338    93-222    FUEL - TRANSIENT - Cold stumble problems;
                                         add wall-wetting ECT/ATMR1 modifier.
                       4338    93-222A   FUEL - TRANSIENT - Incorrect function base
                                         values and resolution.
                       4339    93-227    ISC - ISCKAM UPDATE - ISCKAM gets zeroed
                                         on power-up.
                       4386    E93-232   TRANSMISSION - TQ_IALFA CALC - Software
                                         logic errors.
      ======================================================================
      CBAE0      CBAD0
      (11/02/90)
                       4133    92-139C   SELF TEST - KOEO - Implementation of EMR
                                         92-139,B not correct.
                       2724    92-158    TRANSMISSION - Incorporate 'real time TQ
                                         calculation' into AXOD-E BA for 92.
                       2724    92-158D   SPARK - Byte thrift.
                       3262    92-228E   SELF TEST - KOER - Use V_OCS_ENA to enable
                                         the KOER OCIL test.


                                         1-24

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       1969    92-236    TRANSMISSION - UNCOND UNLCK - Cause
                                         Unconditional Unlock when PDL = 3 and
                                         GEAR_CUR = 4.
                       3301    92-240    FUEL - CLOSED LOOP - Operation of timer
                                         "TSLAMUn" is not specified.
                       4151    92-267A   TRANSMISSION - SHIFT VAL - Shift
                                         validation logic is incorrect.
                       4151    92-267B   TRANSMISSION - SHIFT VAL - Protect Shift
                                         Validation from quick gear changes.
                       4087    92-270X   TRANSMISSION - PID CONTROL - Only jump to
                                         FNENGDC(1) on transition from hard (open)
                                         mode.
                       4087    92-270Y   TRANSMISSION - PID CONTROL - X-input to 
                                         FN[2|3|4]SSLP should be VSBART_RT.
                       4087    92-270Z   TRANSMISSION - PID CONTROL - CA/CB UCC 
                                         strategy needs 92-270K fix to GR_SEQ_PNTR.
                       3309    92-324    FUEL - Decrement Purge Duty Cycle if
                       3611              LAMBSE is at its clip.
                       3309    92-324A   FUEL - Increment/Decrement Purge logic.
                       3611
                       3820    92-324B   SELF TEST - MIL - Lack of HEGO switching 
                                         codes 173 and 177 are being set.
                       3863    92-324D   OTHER - Purge strategy resolution 
                                         improvement.
                       3863    92-324F   OTHER - Add EDTS parameter transaction
                                         for PRG_INIT_FLG.
                       4004    92-324G   MISCELLANEOUS - PURGE - Purge decrement
                                         clipping normal purge.
                       4004    92-324H   MISCELLANEOUS - PURGE - Limit PRG_DEC 
                                         0.99 to make code shorter.
                       4028    92-324I   FUEL - MIL light turns on/off/on during
                                         rich purge condition.
                       4107    92-324K   SELF TEST - CONTINUOUS - Revise canister
                                         purge filter.
                       4016    92-326F   SELF TEST - CONTINUOUS - VPIPERRCNT, 
                                         VPIPPASCNT control in ignition foreground 
                                         and background.
                       4224    92-326I   SELF TEST - CONTINUOUS - Possible MIL
                                         light with no code implication.
                       4284    92-326L   SELF TEST - CONTINUOUS - Delete references
                                         to Dual Plug DIS from Continuous VIP in 
                                         CB.
                       4074    92-331B   TRANSMISSION - SHIFT VAL - Shift
                                         validation can't occur. Restore 
                                         FLG_NOV_KAM in RT_NOVS calculation.
                       4075    92-332F   SELF TEST - CONTINUOUS - MLUS and GRV test
                                         modifications.
                       3980    92-334B   FUEL - TRANSIENT - Idle fuel modulation is
                                         not executing in TP adjust mode.
                       3792    92-355    OTHER - 92-240 can't be implemented in CA
                                         as written.
                       3364    92-356    MISCELLANEOUS - INPUT CNVRT - Calculate
                                         VSBART_FM - based on NIBART, NOBART, or
                                         NEBART.
                       3123    92-368    SYSTEM COMM - DCL - Verify BITMAP_x 
                                         definition and add new PID codes.
                       3123    92-368A   SYSTEM COMM - DCL - Replace PID code 2E
                                         (adder of LTMTB1) with IOCC.


                                         1-25

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       3123    92-368D   SYSTEM COMM - DCL - Revisions to PID
                                         tables and BITMAPS.
                       3530    92-379B   SELF TEST - KOER - Ensure SPK_STATE of 2
                                         during TP test.
                       3803    92-387B   AIR MEASUREMENT - Improve modularity of
                                         BP update routine.
                       4071    92-418    TRANSMISSION - MLUS OUTPUT - Allow UCC
                                         operation when PRNDL = 1 or 2
                                         (calibratable).
                       4083    92-422    TRANSMISSION - FMEM - Failure mode shift 
                                         scheduling not functional.
                       3212    92-427    SYSTEM COMM - DCL - Add the ability to
                                         access all of RAM (2K) with one base
                                         adder.
                       4143    92-435    TRANSMISSION - PID CONTROL - UCC - Apply
                                         FNENGDC/DC1 clip on entry to closed loop
                                         also.
                       4194    92-435A   TRANSMISSION - PID CONTROL - Revise (i) 
                                         entry to hardlock, (ii) use of tip-in/out.
                       4220    92-435C   TRANSMISSION - MLUS DC CALC - Incorporate
                                         BCSDC ramp on transition to hard lock 
                                         mode.
                       4149    92-435D   TRANSMISSION - SLIP CALC - Fix software 
                                         error in BYP_SLIP_CALC_COM2 in CA, CB and
                                         CA.
                       4092    92-437    TRANSMISSION  - UNCOND UNLCK - SOFTWARE 
                                         ERROR - Should use VSBART_RT, not VSBART.
                       3950    92-439    SELF TEST - CONTINUOUS - Add Self Test 
                                         strategy to support 4x4L operation.
                       3950    92-439A   SELF TEST - CONTINUOUS - Correct parameter
                                         name V_VVS_NRHI on documentation.
                       3502    93-078A   MISCELLANEOUS - INPUT CNVRT - Calculate
                                         NOVS every loop also.
                       3954    93-141    MISCELLANEOUS - OTHER - Error in floating
                                         point divide procedure.
                       3937    93-145    MISCELLANEOUS - Improve documentation
                                         of Rolling Average Utility Routine.
                       4095    93-161    SPARK - TORQUE TRUNC - Engine torque
                                         exceeds transmission torque capacity.
                       4095    93-161B   SPARK - TORQUE TRUNC - Engine torque
                                         exceeds transmission torque capacity.
                       4095    93-161C   TRANSMISSION - Transmission torque 
                                         limit; correct errors.
                       4095    93-161D   SPARK - TORQUE TRUNC - Engine torque
                                         exceeds transmission torque capacity.
                       4197    93-184    FUEL - INJECTOR TIMING - Keep TOTAL_DELAY 
                                         in range 0 through NUMCYL.
                       4248    93-190    MISCELLANEOUS - Bug found in the 
                                         software; KAMQC should reside in KAM.
                       4286    93-205    SYSTEM COMM - DCL - DCL VCRM
                                         communication.
                       4080    94-010G   TRANSMISSION - GRCMKIV initializes 
                                         GR_CM_KAM some places, GR_CM in others.
                       1940    94-023    TRANSMISSION - Add 4x4L strategy to AOD-I.
                       4110    94-030    SPARK - Ease of calibration and reduction 
                                         of ROM useage.
                       4110    94-030A   SPARK - Ease of calibration and reduction 
                                         of ROM useage.
      ======================================================================

                                         1-26

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      CBAD0      CBAC0
      (10/02/90)
                       2390    90-241L   SELF TEST - CONTINUOUS - Development.
                       2390    90-241M   SELF TEST - CONTINUOUS - Development.
                       2390    90-241N   SELF TEST - CONTINUOUS - Development.
                       2390    90-241O   SELF TEST - CONTINUOUS - Development.
                       1485    91-126    VIP - MIL strategy is being removed
                       1486              from control strategy and moved to 
                                         self test part of strategy book.
                       1485    91-126B   SELF TEST - MIL - Additional MIL
                       1486              changes are required for 1991
                                         production.
                       2934    91-126D   SELF TEST - CONTINUOUS - CID failure to
                                         illuminate MIL.
                       2934    91-126E   SELF TEST - CONTINUOUS - CID failure to
                                         illuminate MIL.
                       3018    91-126F   SELF TEST - CONTINUOUS - MIL light
                                         remains on after correction of EGR
                                         flow fault.
                       3497    91-126G   SELF TEST - MIL - Delete EGO buzz/lazy EGO
                                         service codes from affecting MIL.
                       1769    91-142A   FUEL - CLOSED LOOP - Reset LESTMR1 and 
                                         LESTMR2 upon a LAMBSE reset to 1.0.
                       3484    91-169T   SELF TEST - CONTINUOUS - VKOEO_CPUOK flag
                                         not cleared when EDIS CPUOK pulsewidth on 
                                         IDM not present.
                       2518    91-342    SELF TEST - CONTINUOUS - New MLUS, ETV,
                                         and gear ratio validity tests.
                       2518    91-342A   SELF TEST - CONTINUOUS - Correction.
                       2518    91-342B   SELF TEST - CONTINUOUS - Correct parameter
                                         description for C645UP/LVL.
                       2518    91-342D   SELF TEST - CONTINUOUS - New MLUS, ETV,
                                         and gear ratio validity tests.
                       2518    91-342E   SELF TEST - CONTINUOUS - New MLUS, ETV,
                                         and gear ratio validity tests.
                       2518    91-342F   SELF TEST - CONTINUOUS - New MLUS, ETV,
                                         and gear ratio validity tests.
                       2518    91-342H   SELF TEST - CONTINUOUS - Correct
                                         definition and assignment of ETVDIF.
                       2518    91-342P   SELF TEST - CONTINUOUS - Correction to
                                         MLUS test.
                       3411    91-342T   SELF TEST - CONTINUOUS - Prevent MLUS code
                                         629 due to rapid load increase from 
                                         coasting.
                       2557    91-368A   SELF TEST - CONTINUOUS - Add strategies
                                         to 91-368 (use LBMF_INJn) for software 
                                         commonality.
                       2679    91-383    SELF TEST - CONTINUOUS - Change required 
                                         to Adaptive test.
                       2679    91-383A   SELF TEST - CONTINUOUS - Change required 
                                         to EGO test.
                       2679    91-383E   SELF TEST - CONTINUOUS - Corrections.
                       2679    91-383F   SELF TEST - CONTINUOUS - Corrections.
                       2696    91-389    FMEM - EGO SENSOR - Add applications to
                                         91-126C. Set EGO FMEM with codes 194, 195.
                       2753    91-409    SELF TEST - CONTINUOUS - Software 
                                         reviewers' convenience.
                       2753    91-409B   SELF TEST - CONTINUOUS - Consolidation
                                         of EMRs.

                                         1-27

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       2753    91-409I   SELF TEST - CONTINUOUS - Eliminate EGO
                                         test failure void.
                       2753    91-409L   SELF TEST - CONTINUOUS - Add constraint 
                                         on Adaptive Clip Test.
                       3016    91-409O   SELF TEST - CONTINUOUS - V_LEGOTMR1 is
                                         held to zero after a jumpback with
                                         failure present.
                       3016    91-409P   SELF TEST - CONTINUOUS - Use register
                                         common to all affected strategies.
                       3322    91-409S   SELF TEST - CONTINUOUS - Ego test byte
                                         thrift.
                       3752    91-409W   SELF TEST - CONTINUOUS - Prevent rich EGO
                                         failure due to purging.
                       3319    91-416D   SELF TEST - KOEO - MLUS OCC add initial
                                         delay; write to DUCE directly.
                       2850    91-438    SELF TEST - CONTINUOUS - Code 121 sets
                                         without any actual failure.
                       2850    91-438A   SELF TEST - CONTINUOUS - Code 121 sets
                                         without any actual failure; replace 
                                         EMR 91-438.
                       2850    91-438B   SELF TEST - CONTINUOUS - Code 121 sets
                                         during WIGGLE mode.
                       2939    91-438C   SELF TEST - CONTINUOUS - Thrift in-range 
                                         TP, MAF, and fuel test.
                       2988    91-485    SELF TEST - CONTINUOUS - Change 3-digit 
                                         slow code pulsewidth to 0.4 seconds.
                       3311    92-060A   SELF TEST - KOEO - AM1 requires OCC 
                                         testing.
                       3462    92-147H   SELF TEST - More slip-related parameters
                                         were added that need rescaling.
                       3305    92-225    SELF TEST - KOEO - Correct OCC test
                                         difficulties with DUCE.
                       4011    92-270T   TRANSMISSION - MLUS - Revise hardlock 
                                         entry; clear FLG_TIP when not in tip-in/
                                         tip-out.
                       4011    92-270U   TRANSMISSION - CMDED GEAR DET - Gear shift
                                         is being commanded while FLG_UNLK_DS = 1.
                       4043    92-270V   TRANSMISSION - MLUS DC CALC - FLG_PID_CTL
                                         is not being cleared when BCSDC =
                                         BCSDC_HRD.
                       3621    92-305    SELF TEST - CONTINUOUS - Delete Sonic EGR 
                                         to stay under 48K.
                       3576    92-320I   SELF TEST - MIL - Correct MIL light
                                         strategy/documentation.
                       3576    92-320J   SELF TEST - MIL - Correct MIL light
                                         strategy/documentation.
                       3576    92-320R   SELF TEST - MIL - Delete DIS_FMFLG from
                                         MIL documentation.
                       3672    92-326    SELF TEST - CONTINUOUS - C243FIL and
                                         C232FIL deleted.
                       4089    92-326D   SELF TEST - CONTINUOUS - Cancel EMR 92-326
                                         since it does not apply to CB.
                       3852    92-332C   SELF TEST - CONTINUOUS - Continuous MLUS
                                         test modification.
                       4075    92-332I   SELF TEST - CONTINUOUS - Delete unused 
                                         parameters/registers.
                       3715    92-334    FUEL - TRANSIENT - Unnecessary TFC delays
                                         caused by improper order of calculation.


                                         1-28

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       3715    92-334A   FUEL - TRANSIENT - Unnecessary TFC delays
                                         caused by improper order of calculation.
                       3610    92-338    SELF TEST - CONTINUOUS - Code 121 can set
                                         on cold starts: add FLG_ECTSTABLQ = 1.
                       3764    92-360A   SELF TEST - CONTINUOUS - Add NUMOUT *
                                         INJOUT / PIPOUT to VINJ_LOAD calculation.
                       3808    92-362    SELF TEST - CONTINUOUS - Use filtered
                                         "LOAD" values in tolerances for in-range
                                         test.
                       3681    92-370A   FUEL - Documentation does not match code.
                       4010    92-411    SELF TEST - CONTINUOUS - Desensitize
                                         in-range test to excess purge flow.
                       3292    93-063    FUEL - CLOSED LOOP - TRANSIENT - Protect 
                                         strategy for clock overflow.
                       4049    93-070C   FUEL - Correct deficiencies in
                                         implementation of EMR #93-070.
                       3502    93-078    MISCELLANEOUS - Incorrect VSBAR
                                         calculation at low vehicle speed.
                       3330    93-097B   FMEM - MIL - Change MIL pages to reflect
                                         intent of 93-097 and 92-320J.
                       3330    93-097D   MISCELLANEOUS - THERMACTOR - Reinstate
                                         EGO/Adaptive codes deleted by 93-097C.
                       3659    93-101    FUEL - Do not allow cranking fuel
                                         pulsewidths to accumulate.
                       3562    93-122    FUEL - Improve start times with EDIS 
                                         Pseudo PIP module.
                       3855    93-123G   OTHER - Pulsewidth in Self Test changed
                                         from 500ms to 400ms.
                       3912    93-136    SPARK - KNOCK WINDOW - Software glitch.
                       3912    93-136A   SPARK - KNOCK WINDOW - Cancel EMR 93-136.
                       3493    93-142    FUEL - FG_PW_CALC - Make '93 Mass Air
                                         Strategies "sequential only".
                       3948    93-143    FUEL - INJECTOR TIMING - TOTAL_DELAY 
                                         error correction and time and byte thrift.
                       4086    93-159    EGR - CONTINUOUS - Sonic EGR strategy was 
                                         deleted.
                       4086    93-159A   SELF TEST - Reinstate Sonic EGR Self Test.
                       4191    93-178    SELF TEST - Delete unused parameters from
                                         EDTS for CB.
                       3226    94-007    ISC - DASPOT - Change FLG_DASMNQ logic to
                                         improve catalyst durability.
                       3185    94-008B   MISCELLANEOUS - IAC - Enhance IAC logic
                                         as a function of N, TP_REL, and spark.
                       3185    94-008C   MISCELLANEOUS - IAC - The spark X and Y
                                         functions and IAC logic were changed.
                       3185    94-008D   MISCELLANEOUS - IAC - Change the "greater
                                         than" to a "less than" symbol for IAC
                                         logic.
      ======================================================================
      CBAC0      CBAB0
      (08/24/90)
                       3504    91-169U   SELF TEST - CONTINUOUS - Fault filtering
                                         of foreground detected errors modified.
                       3504    91-169Y   SELF TEST - CONTINUOUS - Fault filtering
                                         of foreground detected errors modified.
                       2062    92-154    MISCELLANEOUS - Need more resolution on
                                         Purge Duty Cycle.
                       3193    92-205    FUEL - Fix the injector output module for
                                         fuel cut-out.

                                         1-29

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       3193    92-205A   FUEL - Fix the injector output module for
                                         fuel cut-out.
                       3218    92-207C   FUEL - Fix the injector output module for
                                         fuel cut-out.
                       2559    92-228    TRANSMISSION - SHIFT CONTROL - Add OCIL to
                       3262              CA for FN36 and EN53.
                       3318    92-241    TRANSMISSION - OFMFLG - Force TV_COUNTS to
                                         zero when ETV_TEST = 1 (FN622 > 15).
                       3357    92-244    TRANSMISSION - FMEM - OFMFLG will cause
                                         alternate fire at all engine torques.
                       3357    92-244A   TRANSMISSION - FMEM - Correct typo in
                                         original EMR.
                       3357    92-244B   TRANSMISSION - FMEM - Add ETV_OCM_MN_D as
                                         a display-only parameter.
                       3413    92-252    FMEM - Prevent alternate fire on ETV
                                         failure at low torques.
                       3413    92-252C   FMEM - Prevent alternate fire on ETV
                                         failure at low torques.
                       3327    92-255    TRANSMISSION - TIP IN/OUT - Modulated 
                                         bypass clutch tip-in logic overrides
                                         shift logic.
                       3436    92-256    TRANSMISSION - Universal Converter Bypass
                                         Clutch Strategy Lock/Unlock, phase 1A.
                       3294    92-259    MISCELLANEOUS - 19-byte thrift in time/
                                         temperature procedure.
                       2920    92-261A   SPARK - Generic spark strategy does not
                                         match engine requirements.
                       3421    92-267    FMEM - Shift validation logic is 
                                         incorrect.
                       3472    92-270    TRANSMISSION - Universal converter bypass
                                         clutch strategy; PID control; phase 2a.
                       3472    92-270A   TRANSMISSION - Universal converter bypass
                                         clutch strategy; PID control; phase 2b.
                       3472    92-270B   TRANSMISSION - Universal converter bypass
                                         clutch strategy; PID control; phase 2c.
                       3472    92-270D   TRANSMISSION - Universal converter bypass 
                                         clutch strategy; PID control; phase 2e.
                       3472    92-270E   TRANSMISSION - Universal converter bypass 
                                         clutch strategy; PID control; phase 2f.
                       3472    92-270F   TRANSMISSION - Universal converter bypass 
                                         clutch strategy; PID control; phase 2g.
                       3472    92-270G   TRANSMISSION - Universal converter bypass 
                                         clutch strategy; PID control; phase 2h.
                       3472    92-270H   TRANSMISSION - Universal converter bypass 
                                         clutch strategy; define parameters.
                       3472    92-270I   TRANSMISSION - Universal converter bypass 
                                         clutch corrections.
                       3472    92-270J   TRANSMISSION - Universal converter bypass 
                                         clutch corrections.
                       3779    92-270K   TRANSMISSION - MLUS - Fix errors in UCC
                                         strategy.
                       3799    92-270L   TRANSMISSION - MLUS - Fix errors in UCC
                                         strategy (2).
                       3802    92-270M   TRANSMISSION - MLUS - Correct UCC errors
                                         (3).
                       3802    92-270P   TRANSMISSION - MLUS - Revise tip-in 
                                         tip-out logic; remove clip when 
                                         FLG_TIP = 0.


                                         1-30

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       3802    92-270Q   TRANSMISSION - MLUS - Set DELTA_RATIO to
                                         zero outside of shifts.
                       3802    92-270R   TRANSMISSION - MLUS - Do not clip output
                                         of PID controller.
                       3802    92-270S   TRANSMISSION - MLUS - Replace FLG_VE_DSGR
                                         with TM_VER_SFT in SCHLD_BYP_SLIP_COM*.
                       3524    92-282    SELF TEST - CONTINUOUS - Replace LOAD with
                                         PCT_LOAD in continuous EGR flow test.
                       3524    92-282A   SELF TEST - CONTINUOUS - Replace VECTMR 
                                         with V_EGR_CTMR in Continuous EGR.
                       3540    92-286    TRANSMISSION - GR_DS 3 OR 4 - Clutch
                                         chatter on tip-ins after minimum 1-2
                                         backout.
                       3598    92-299    EGR - Emission.
                       3598    92-299A   EGR - Emission.
                       3598    92-299B   SELF TEST - KOER - Generic EGR requires 
                                         changes in KOER EGR test; add V_EGREN.
                       3500    92-314    FUEL - EGO SENSOR - Don't reset Fuel KAM
                                         if EGO failure is detected.
                       3604    92-318    EGR - PFE ACTUAL - Generic EGR does not
                                         function correctly.
                       3541    92-325    SELF TEST - CONTINUOUS - TRLOAD is byte 
                                         value, but loaded as word.
                       3589    92-331    TRANSMISSION - CMDED GEAR DET - Thrift
                                         RT_NOVS_KAM calculation.
                       3589    92-331A   TRANSMISSION - CMDED GEAR DET - Add
                                         parameters to strategy.
                       3580    92-333    ISC - GENERAL CONTROL - Common FN1861
                                         inadequate for neutral and drive.
                       3730    92-344    EGR - ENABLE LOGIC - Can't change PFEHP
                                         in VECTOR.
                       3549    92-345    FUEL - OPEN LOOP - Supply a separate 
                                         peak-to-peak value at idle.
                       3592    92-346    TRANSMISSION - MLUS - Reduce power
                                         dissipation requirements of MLUS.
                       3592    92-346A   TRANSMISSION - MLUS - Reduce power
                                         dissipation requirements of MLUS.
                       3771    92-364    OTHER - Cold start run-ups inconsistent 
                                         with varying ECTs.
                       3880    92-384    FUEL - Correct software error in FUEL_SUM
                                         calculation.
                       3803    92-387    AIR MEASUREMENT - Add ECT timer to BP
                                         update routine.
                       3938    92-391B   TRANSMISSION - EPC - Improve VFS
                                         temperature compensation.
                       3956    92-393    TRANSMISSION - CLUTCH VAL - False setting 
                                         of C628 causing unconditional unlock.
                       3321    93-055    FUEL - Fix CRKPIPCTR logic so that a 
                                         partial reset is possible.
                       3386    93-062    AIR MEASUREMENT - AM calculation not in
                                         strategy book.
                       3362    93-070    FUEL - HOT INJECTOR - HICOMP discrepancy
                                         in LMBF_INJ calculation.
                       3946    93-089E   AIR MEASUREMENT - MANIFOLD FILL - Separate
                                         ECT function for manifold filling
                                         AIR_CHG_WOT.
                       3855    93-123A   OTHER - Addition to strategy book.
                       3855    93-123C   OTHER - CB strategy needs to run at 
                                         18 MHz.

                                         1-31

                              STRATEGY EVOLUTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       3855    93-123D   OTHER - To run at 18 MHz, some parameter
                                         ranges need to be increased.
                       3855    93-123E   OTHER - CB strategy needs to run at 
                                         18 MHz.
                       3132    95-001    ISC - DESIRED RPM - Maximum Y-range limit
                                         is too low on FN875D and FN875N.
      ======================================================================
      CBAB0      CBAA0
      (07/14/90)
                       3541    92-285    SPARK - DETONATION - Baseline spark for
                                         ACT/ECT adjuster error.
                       2395    93-017    MISCELLANEOUS - Background loop times for
                                         generic strategies are high.
                       3548    93-081E   MISCELLANEOUS - Include strategy to
                                         support all program assumptions.
                       3548    93-081G   MISCELLANEOUS - Update parameter 
                                         dictionary. 
                       3548    93-081H   OTHER - Correction to a documentation
                                         error.
                       3330    93-097    MISCELLANEOUS - THERMACTOR - EAM and Two
                                         output Thermactor.
                       3330    93-097A   MISCELLANEOUS - THERMACTOR - Change MIL 
                                         pages. EMR 92-320J not yet implemented.
                       3330    93-097C   MISCELLANEOUS - THERMACTOR - Delete EGO /
                                         Adaptove codes: not yet implemented.
                       3815    93-117    AIR MEASUREMENT - MANIFOLD FILL - Correct
                                         overflow problem found in development.
      ======================================================================
      CBAA0      CAAQ0
      (06/22/90)
                       3085    E92-186   SYSTEM COMM - DCL - Delete the PID table
                                         to free up RAM for experimental.
                       3535    93-077    UNKNOWN - Create CB strategy for '93 MY
                                         4.6L-4V FN10 and 5.0L VN58.
                       3548    93-081A   MISCELLANEOUS - Include strategy to
                                         support all program assumptions.
                       3548    93-081C   MISCELLANEOUS - Strategy needs to run at
                                         different frequencies.
                       3548    93-081D   MISCELLANEOUS - Incorrect implentation 
                                         sequence for 93-081A.
                       3548    93-081F   MISCELLANEOUS - Strategy needs to run at
                                         different frequencies.
                       3571    E93-089   AIR MEASUREMENT - MANIFOLD FILL - Manifold
                                         filling strategy improvements.
                       3571    E93-089A  AIR MEASUREMENT - MANIFOLD FILL - Manifold
                                         filling corrections.
                       3571    E93-089B  AIR MEASUREMENT - MANIFOLD FILL - Manifold
                                         filling strategy improvements.
                       3571    93-089C   AIR MEASUREMENT - MANIFOLD FILL - On 
                                         transition into Air Charge filtering, 
                                         define start.
      ======================================================================








                                         1-32












                                      CHAPTER 2

                                      SYMBOLOGY

















































                                         2-1

                                  SYMBOLOGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                        SYMBOLOGY

   DEFINED PARAMETERS

      A defined parameter is a variable or a constant that  is  defined  in  EEC-IV
      source code according to its definition in the strategy parameter dictionary.
      Defined parameters are represented in the strategy description by identifiers
      whose alphabetic characters are in the upper case.

   STRATEGY SPECIFICATION PARAMETERS

      A strategy specification parameter is a variable or a constant  that  is  not
      defined   in  the  strategy  parameter  dictionary.   Strategy  specification
      parameters are represented in the strategy description by  identifiers  whose
      alphabetic  characters are in the lower case.  These parameters are used only
      to facilitate the description of strategy function.  A strategy specification
      parameter need not be defined in the EEC-IV source code if the implementation
      structure does not require it.

      The scope of the identifier representing a strategy  specification  parameter
      may  include  more  than one strategy module, but it is strictly local to one
      strategy chapter.  A strategy specification variable cannot be used  to  pass
      information  between strategy modules that execute asynchronously.  The value
      of a strategy  specification  variable  does  not  persist  between  repeated
      executions of any particular strategy module in which it is referenced.

   INPUTS

      The inputs to most logical operations will be conditional statements  of  the
      form:
                                          X > Y

      where, X is a variable (RAM), and Y is a calibration constant,  fox  function
      or  table  look-up,  or a mathematical expression.  In some cases, Y may also
      represent a variable.

      Typically, six types of conditional statements will appear  in  the  strategy
      logic diagrams.  They are; X > Y, X < Y, X >= Y, X <= Y, X = Y, and X <> Y.

           SYMBOL           MEANING
           ------     ------------------------
            =         EQUAL TO
            <>        NOT EQUAL TO
            >         GREATER THAN
            >=        GREATER THAN OR EQUAL TO
            <         LESS THAN
            <=        LESS THAN OR EQUAL TO

      It should be noted that when the expression X > Y or X <  Y  is  encountered,
      the  conditional statement can be calibrated such that it will never be true,
      and the appropriate strategy action will never take place.  For  example,  if
      the  variable  X has a range of 0 to 255, and the calibration constant in the
      logical statement, X > Y, is selected to be 255, the statement will always be
      false.  This provides a means for calibrating out certain strategy functions.

      When any conditional statement is  true,  the  INPUT  STATE  to  the  logical
      operation  is  said  to  be 'TRUE', and is assigned a value of '1'.  When the
      statement is false, the INPUT STATE is 'FALSE', and is assigned  a  value  of
      '0'.

                                         2-2

                                  SYMBOLOGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   LOGICAL OPERATIONS

      Two logical operations are used, the 'AND' gate and the 'OR' gate.  An  'AND'
      gate is represented by the following symbol:


      A ---------------------|
                             |AND -| C
      B ---------------------|


      where A and B are INPUT STATES and C is defined as the OUTPUT  STATE  of  the
      logical  'AND' operation.  The value of the OUTPUT STATE is a function of the
      INPUT STATES as shown in the following truth table:

                            AND GATE
           ============================================
           INPUT STATE     INPUT STATE     OUTPUT STATE
                A               B                C
           ============================================
                0               0                0
           --------------------------------------------
                0               1                0
           --------------------------------------------
                1               0                0
           --------------------------------------------
                1               1                1
           ============================================


      Likewise, the 'OR' gate is represented by:


      A ---------------------|
                             |OR --| C
      B ---------------------|


      And the OUTPUT STATE for various INPUT STATES is  given  by  the  'OR'  truth
      table:

                             OR GATE
           ============================================
           INPUT STATE     INPUT STATE     OUTPUT STATE
                A               B                C
           ============================================
                0               0                0
           --------------------------------------------
                0               1                1
           --------------------------------------------
                1               0                1
           --------------------------------------------
                1               1                1
           ============================================






                                         2-3

                                  SYMBOLOGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   OUTPUTS


      The output of all logical operations results in one of two possible paths:

           1) The output is an input to another logical operation.


           A ----------|
                       |AND -- C --|
           B ----------|           |OR -| E
                                   |
           D ----------------------|


           In this case, OUTPUT STATE C is an input to an 'OR' gate.  It should  be
           treated  like any other conditional statement when determining the value
           of the final OUTPUT STATE E.


           2) ACTION is taken based upon the OUTPUT STATE.


           A ---------------|
                            |AND -- C --| Energize OUTPUT
           B ---------------|           |
                                        | --- ELSE ---
                                        |
                                        | De-energize OUTPUT


           The ACTION described in the action box is taken when OUTPUT STATE  C  is
           'true'.   If  an  ALTERNATE  ACTION  is  required when OUTPUT STATE C is
           'false', the alternate action is described below an  ELSE  statement  in
           the  action  box.  If no alternate action is required, no ELSE statement
           will appear.
























                                         2-4

                                  SYMBOLOGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Multiple "ELSE/ACTION" blocks can appear in a logic diagram in which three or
      more alternate actions are possible.  Consider the following example:


      A ---------------|
                       |AND -- C --| ACTION #1
      B ---------------|           |
                                   | --- ELSE ---
      D ---------------|           |
                       |AND -- F --| ACTION #2
      E ---------------|           |
                                   | --- ELSE ---
                                   |
                                   | ACTION #3



      The procedure is:

      1.  Test for ACTION #1.  If "C" is true, perform ACTION #1.

      2.  Otherwise, test for ACTION #2.  If "F" is true, perform ACTION #2.

      3.  Otherwise, perform ACTION #3.



      Notes about multiple "ELSE/ACTION" logic:

      1.  When logic has multiple "ELSE/ACTION" blocks, only one action  block  can
          be performed during a program pass.  Priority is always top down.  In the
          example, if "C" and "F" are simultaneously true, "C" takes precedence and
          ACTION #1 is performed.

      2.  If the final "ELSE/ACTION" block does not have logic as input pointing to
          it  (as  in  the  example),  the  final action block is performed when no
          preceeding action block is true.  Action is always performed during  each
          program pass with this type of logic.

      3.  If the final "ELSE/ACTION" block has logic as input pointing to  it,  the
          final  action  block is performed only when no preceeding action block is
          true and when its input logic is true.  Action is  not  always  performed
          during each program pass with this type of logic.

















                                         2-5

                                  SYMBOLOGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   HYSTERESIS


      Hysteresis in a strategy is a situation in which the logic used  to  make  an
      output  true  is  different from the logic used to make the output false.  An
      example use would be to prevent on/off cycling of an output because of jitter
      in an input parameter.


      Hysteresis is represented in strategy  logic  diagrams  using  the  following
      "flip-flop" notation:


      A ---------------------|S  Q-| C
                             |
      B ---------------------|C


      The actual conditional statements and direction  of  hysteresis  will  depend
      upon  the  specific  application  in  each strategy module The action of this
      hysteresis notation is given by the following truth table:


              HYSTERESIS FLIP-FLOP
           ==========================
           S(SET)  C(CLEAR)  Q-OUTPUT
            A        B          C
           ==========================
            0        0      no change
           --------------------------
            0        1          0
           --------------------------
            1        0          1
           --------------------------
            1        1          1
           ==========================


      The action of the flip-flop can be described as follows:

      When the "A" (set) input is true, regardless of the "B" (clear) input  level,
      the  flip-flop  sets  and the "C" output is true.  When the "B" input is true
      and the "A" input is false, the flip-flop clears and the "C" output is false.
      When "A" and "B" are both false, the "C" output remains unchanged.

      ADVICE:

      1.  Since the intent of a flip-flop is to provide hysteresis, the state of  a
          flip-flop  must  be  remembered from pass to pass.  The output is usually
          defined as a flag.

      2.  All flip-flops must be serviced every  pass  through  the  program,  even
          though  some  flip-flops  are  shown  in  portions  of logic that may not
          execute each pass.  The normal  practice  is  to  lump  and  service  the
          flip-flops  together at the beginning of a routine.  This guarantees that
          all flip-flop outputs will reflect the correct  state  based  on  current
          input conditions.  Then, when logic refers to a flip-flop, the logic only
          needs to look at the flag which represents the state of the flip-flop.


                                         2-6

                                  SYMBOLOGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      3.  Clear (0) is  the  default  initial  value  of  the  output  flag  for  a
          flip-flop.   The  strategy  specification  must  explicitly  state if the
          initial value should be set (1).

      4.  The set input always takes precedence over the clear  input.   When  both
          are  true,  the  flip-flop  output  should  set.   In some instances, the
          software practice has been to perform the clear logic first, followed  by
          the  set  logic.   The  procedure  may  initially clear the flag and then
          reverse the decision later.  This practice could cause  problems  if  the
          flip-flop  output  flag is tested during an EOS interrupt because the EOS
          can catch the flag in the wrong state.

          The flip-flop procedure should always be:

          IF set condition met
               THEN set flip-flop output flag
          ELSE IF clear condition met
               THEN clear flip-flop output flag
          ELSE
               No change to flip-flop output flag
          ENDIF




      Some flip-flops are specified without a hysteresis term to save  bytes;  this
      is the preferred method of presenting flip-flops.  In this case there are two
      calibration parameters, one for the set condition,  and  one  for  the  clear
      condition.  When flip-flops are specified this way, the calibration parameter
      used to set the flip-flop will end in _SH or  _SL.   The  parameter  used  to
      clear  will  end  in  _CH  or  _CL.   The H or L determines the larger (H) or
      smaller (L) parameter.


      Example:

      DEL_LOAD < DLOD_SL ----|S  Q-| C
                             |
      DEL_LOAD >= DLOD_CH ---|C


                     1.0 |
                         |           
      DEL_LOAD           |          /|\                |    o = state change
                         |           | clear region    |
              DLOD_CH    |    -------o-----------------|--------------
                         |           |                 |
                         |           |                 |
                         |           | no change  (hysteresis)
              DLOD_SL    |    -------|-----------------o--------------
                         |           |                 |
                         |           |  set region    \|/
                         |    
                     0.0 ---------------------------------------------------------






                                         2-7

                                  SYMBOLOGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                     HOW TO INTERPRET THE HEXADECIMAL REPRESENTATION
                           OF A REGISTER CONTAINING BIT FLAGS


      1) Display the register on the calibration console.

      2) Press the 'HEX' button on the calibration console to display the  register
      in hexadecimal format.

      3) Two hexadecimal digits will be displayed.  In order to determine which bit
      flags are set, use the following hexadecimal-to-binary conversion chart:


           HEXADECIMAL DIGIT DISPLAYED         BINARY EQUIVALENT STRING
           --------------------------------------------------------------
                                         |
                         0               |                0000
                         1               |                0001
                         2               |                0010
                         3               |                0011
                         4               |                0100
                         5               |                0101
                         6               |                0110
                         7               |                0111
                         8               |                1000
                         9               |                1001
                         A               |                1010
                         B               |                1011
                         C               |                1100
                         D               |                1101
                         E               |                1110
                         F               |                1111


      The LEFTMOST hexadecimal digit represents the  state  of  bit  flags  in  bit
      positions  7 through 4.  The RIGHTMOST hexadecimal digit represents the state
      of bit flags in bit positions 3 through 0.

      Consider the following:  The 8-bit binary string  representing  the  leftmost
      and   rightmost  hexadecimal  digits  together,  read  from  left  to  right,
      represents the state of bit flags in bit position 7 through bit position 0.



















                                         2-8

                                  SYMBOLOGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      EXAMPLE:

      You want to examine the state of NDSFLG, a bit flag in bit position  5  of  a
      register which is at address B0.

      1) Display the contents of B0 on the calibration console.

      2) Display the contents in hexadecimal format.

      3) The hexadecimal value '2F' is displayed.

           ----------------------------------------------------
           | HEXADECIMAL      |       2       |       F       |
           |------------------|---------------|---------------|
           | BINARY           | 0 | 0 | 1 | 0 | 1 | 1 | 1 | 1 |
           |------------------|---------------|---------------|
           | BIT POSITION     | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |
           ----------------------------------------------------


      This means that bit flags in position 5 (NDSFLG), 3, 2, 1 and 0 are set to 1.







































                                         2-9

                                  SYMBOLOGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   THE "DO:" STATEMENT


      The DO:  statement is used to call a logic subroutine in strategy.  It is not
      used,  as it often is by software, to avoid repeating a frequently used piece
      of code.  It is primarily used to allow  a  process  to  be  broken  up  into
      smaller  pieces  so  that  the  strategy  can  be  easily represented without
      resorting  to  large,  cumbersome,  confusing  pieces  of  logic.   The   DO:
      statement  can also provide an "executive routine" or calling structure for a
      series of sequential pieces of logic.

      The DO:  statement can call either an  entire  strategy  module  or  strategy
      process.   A  strategy  module is a segment of strategy that has an overview,
      definitions and a process and usually corresponds to a  software  module.   A
      strategy  process  is  a  subset  of  a  strategy  module,  usually  used  to
      conveniently break up a logic diagram in a strategy book.   Do  not  use  the
      version  type  extension  for strategy modules, i.e.  COM1, COM5.  This makes
      the calling module independent of various module varieties.  The syntax is:


                    DO: DSDRD_GR MODULE  or  DO: RPM LIMITER PROCESS


      The DO:  statement is used on the  "ACTION"  or  right  hand  side  of  logic
      diagram.

      The format for the called subroutine (Module or Process) is that it must have
      an  explicitly  stated  start  and  end  point.  This shows that the piece of
      strategy contained  within  the  start  and  end  points  is  executed  as  a
      subroutine,  not necessarily every background loop through the strategy.  The
      syntax is:


       BEGIN: DSDRD_GR MODULE               BEGIN: RPM LIMITER PROCESS
                 .                                      .
                 .                                      .
                 .                                      .
      CONTINUE: DSDRD_GR MODULE            CONTINUE: RPM LIMITER PROCESS
            (if required)                          (if required) 
                 .                                      .
                 .                                      .
                 .                                      .
        END: DSDRD_GR MODULE                  END: RPM LIMITER PROCESS


      The CONTINUE:  syntax is used to identify the continuation of a logic diagram
      on  to a page that does not have either a START:  or an END:  statement.  The
      intent is to have any page of a strategy book be able  to  be  identified  as
      being  part  of a subroutine or not.  For example, a logic diagram that takes
      up 3 pages will begin with a START:  statement on the first page, begin  with
      a  CONTINUE:  statement on the second page and end with an END:  statement on
      the third page.








                                         2-10

                                  SYMBOLOGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      At the end of the module or process, there is an implicit "RETURN" statement,
      that  is,  the  next  execution step of the strategy must return to the place
      where the DO:  statement was called.  For example, if  a  DO:   statement  is
      executed  in  the  middle  of  an  ELSE/ACTION  block, the strategy continues
      execution after returning to the originating point.


      A ---------------------|
                             |AND -| ACTION 1
      B ---------------------|     |
                                   | --- ELSE ---
      C ---------------------|     |
                             |AND -| DO: XYZ PROCESS ------> BEGIN: XYZ PROCESS
      D ---------------------|     |                 <--|              .
                                   | --- ELSE ---       |              .
                                   |                    |              .
                                   | ACTION 2           |      END: XYZ PROCESS
                                                        |              
                                                        |              |
                                                        |--------------|


      E > F -----------------------| ACTION 1
                                   |
                                   | --- ELSE ---
                                   |
                                   | ACTION 2


      If the first AND gate containing "A" and "B" is false and the second AND gate
      containing  "C" and "D" is true, then the XYZ PROCESS is called and executed.
      After returning to the DO:  statement, strategy execution continues with  the
      evaluation of the "E > F" condition in the second ELSE/ACTION block.

      DO:  statements can be nested,  that  is,  one  DO:   statement  can  call  a
      subroutine which contains another DO:  statement within itself.  There are no
      restrictions on this other than the basic  rule  continues  to  apply:   Each
      process  or module that is executed must return to the originating point upon
      its execution.

      Flip flops should not be included within a DO:  statement since they must  be
      evaluated  every  background  loop.  The strategy designer must have the flip
      flops shown as being executed every background loop and use  the  appropriate
      flop flop output flags within the DO:  statement.
















                                         2-11

                                  SYMBOLOGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  The "ROLAV" Statement

      The ROLAV statement is used to invoke the  rolling  average  routine  in  the
      strategy.   The  EEC-IV  filters  inputs  using this rolling average routine.
      This is a difference equation  implementation  of  a  first  order  low  pass
      filter.  The filter behaviour is defined by the discrete time solution to the
      first order differential equation and takes the form:

                                                 - (FK_TMR/TC) 
                                   f  =  1  -  e

      Where "f" is called the filter constant in the difference equation:

                   new_average = f * new_value + (1 - f) * old_average

      Using the first two terms of the series expansion:

                                x                 x
                               e   =  1  +  x  +  --  +    
                                                  2!

      Simplifying, the exponential "f" becomes:

                       - (FK_TMR/TC)                  1
         f  =  1  -  e                  =  1  -  -------------  =  . . .
                                                   (FK_TMR/TC) 
                                                  e

                             1                      1              
         f  =  1  -  -----------------  =   ------------------- .   
                     1 + (FK_TMR / TC)       1 + (TC / FK_TMR)     

      The time constant (TC) is a function of the  input  being  filtered.   It  is
      calibratable.   Generally,  a  longer time constant filters more heavily, but
      also introduces more time lag into the signal.

      For most filters, the sampling period (FK_TMR) will equal the background loop
      time  (BG_TMR).   In  those  case where the sample period is not equal to the
      background loop time, the true sample period is to be passed to  the  rolling
      average routine.  See the calling convention below.

      The ROLAV statement is used on the "ACTION" or right hand  side  of  a  logic
      diagram.   The  strategy  will  specify  calls to the rolling average routine
      using the following convention:

      condition -------------| new_average = ROLAV(new_value,TC[,FK_TMR])

      Where:
       -  old_average = Current value of  new_average  prior  to  filtering.   This
          parameter is implicit in the call to the rolling average routine.
       -  new_average = Output value of rolling  average  filter.   This  parameter
          becomes the old_average on the next filtering event.
       -  new_value = Input value to be filtered.
       -  TC = Time constant.
       -  FK_TMR = Elapsed  time  between  successive  calculations.   This  is  an
          optional argument only to be specified if it is different from background
          loop time.



                                         2-12

                                  SYMBOLOGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   The "ABS" Statement

      The ABS function returns a value which is the absolute value of parameter  x.
      ABS has the following form:

      ABS(x)

      The parameter x cannot be of flag type.



                                  The "CLIP" Statement

      The CLIP function returns the value x clipped between the range low and high.
      low  is  the  lower  limit and high is the upper limit.  low and high MUST be
      specified in the given order.  CLIP has the following form:

      CLIP( x, low, high)

      EXAMPLE:

      y = CLIP( x, low, high)

      This is equivalent to the following logic chart.

      x > high ---------------------| y = high
                                    |
                                    | --- ELSE ---
                                    |
      x < low ----------------------| y = low
                                    |
                                    | --- ELSE ---
                                    |
                                    | y = x

      NOTE: 

      If the limits high and low are calibrated such that low >= high, then the
      output will be high. The high limit ALWAYS take priority.





















                                         2-13

                                  SYMBOLOGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   The "MAX" Statement

      The MAX function returns the maximum value of a list of parameters x1,...xn.
      MAX has the following form:

      MAX(x1,...,xn)

      The parameters x1 through xn cannot be of flag type.

      Example:

      y = MAX(x, 10)

      This is equivalent to the following logic chart. 

      x < 10 -----------------------| y = 10
                                    |
                                    | --- ELSE ---
                                    |
                                    | y = x



                                   The "MIN" Statement

      The MIN function returns the minimum value of a list of parameters  x1,...xn.
      MIN has the following form:

      MIN(x1,...,xn)

      The parameters x1 through xn cannot be of flag type.

      Example:

      y = MIN(x, 15)

      This is equivalent to the following logic chart.

      x > 15 -----------------------| y = 15
                                    |
                                    | --- ELSE ---
                                    |
                                    | y = x

















                                         2-14

                                  SYMBOLOGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   The "SQR" Statement

      The SQR function returns a value which represents the square of the parameter
      x.  SQR has the following form:

      SQR(x)

      The parameter x cannot be a flag type.



                                  The "SQRT" Statement

      The SQRT function returns a value which represents the  square  root  of  the
      parameter x.  SQRT has the following form:

      SQRT(x)

      The parameter x cannot be a flag type, and MUST NOT be NEGATIVE.









































                                         2-15

                                  SYMBOLOGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                The "pid_def()" Construct


      A PID is a way to  access  parameter  values  by  name  via  a  communication
      protocol between the Powertrain Control Module and an outside requestor.

      Parameter values from within  the  PCM  can  be  accessed  from  the  outside
      environment  via the communication network.  This is done by the generic scan
      tool as required by CARB-OBDII regulations to obtain information in reference
      to  OBDII system monitors and their status.  This can also be done by SBDS or
      other systems capable of establish and sustaining  communications  using  the
      SCP.

      CARB regulations require the availability of a number of PIDs  regarding  the
      state of the on board diagnostic system.  These, as well as the Ford specific
      PIDs, will be defined via the strategy documents  in  a  similar  manner.   A
      construct  will be used in the strategy documents to define the data conveyed
      in a PID request.  That construct is the:

                            pid_def(pid_number, description)

      Where:

      "pid_number" is the symbol used to refer to the PID.  For example,  all  PIDs
      defined  by  SAE  standard  J1979  will  by  of the form j1979_xx[_xxx].  The
      portion inside the brackets [] is optional.  Other conventions will  be  used
      for j2190 or SBDS specific PIDs.

      "description" is the actual data to be used in the transmission of  the  PID.
      This  could  reference a register (RAM, KAM or ROM) that is maintained in the
      strategy.  For example ECT or TEST_SW.  This could also be an  equation  used
      to  compute  the  PID.  This equation may or may not reference other internal
      registers in the strategy.  An example of this would be (((ECT - 32) * 5/9) +
      40).   The  PID may also be a bit map of a number of flag bits.  In this case
      the following convention is used for the "description" parameter:

      pid_def(xxxx_xx_xxx,(b0: FLG_1,
                           b1: FLG_2,
                           b2: 1,
                           b3: 0,
                           b4: FLG_3,
                           b5: FLG_4,
                           b6: 0,
                           b7: 0)

      Whenever a parameter is referenced in the "description" and is in lower  case
      in  the  pid_definitions  context,  logic will be present in the context that
      describes how that  parameter  is  to  be  determined.   The  pid_definitions
      context  is  delineated  by  a "BEGIN:  pid_defintions" statement and a "END:
      pid_defintions" statement.  The pid_defintions  context  is  located  in  the
      module  in the strategy that is most relavent to the PIDs being defined.  The
      pid_definitions  contexts  will  therefore  be  distrubuted  throughout   the
      strategy.  See the following for an example of a module with PID definitions:

      The  "pid_def()"  constructs  do  not  imply   anything   with   respect   to
      implementation.  It is left up to the best judgement of the software designer
      as to how to implement the PID scheme.



                                         2-16

                                  SYMBOLOGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      MODULE NAME

      OVERVIEW

      Put overview text here.  .  .



      DEFINITIONS

      Put definitions text here.  .  .


      PROCESS
                         STRATEGY MODULE: STRATEGY_MODULE_COM1n


      BEGIN: pid_definitions
       ;comment describing that this section is defining PIDs.

      REGISTER1 = Y --------------|
                                  |AND -| flag1 := 1
      REGISTER2 = X --------------|     |
                                        | --- ELSE ---
                                        |
                                        | flag1 := 0

      unconditionally ------------------| parameter1 := (REGISTER3 * M) + B

      pid_def(j1979_xx_xxx, REGISTER4)

      pid_def(j2190_xx, parameter1)

      pid_def(sbds_xx_xxx, FNnnn(REGISTER5))

      pid_def(xxxx_xx_xxx, (REGISTER6 * M) + B))

      pid_def(xxxx_xx, bo: flag1,
                       b1: FLG_1,
                       b2: 0,
                       b3: 1,
                       b4: FLG_2,
                       b5: CAL_SW_1,
                       b6: 0,
                       b7: 0)

      END: pid_definitions

      Continue with the control strategy logic here. . .











                                         2-17

                                  SYMBOLOGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 The "send()" Construct

      The SCP interface strategy allows for numerous messages to  be  supported  by
      the Powertrain Control Module and the vehicle network databus.

      These messages can be sent from various locations in the strategy,  depending
      on  their functional intent, to be received by one or more recieving nodes on
      the bus.

      In order to provide a uniform method of sending an SCP message,  a  construct
      will  be  used in the strategy documents to define the data to be transmitted
      in an SCP message.  That construct is the

                               send(msg_name: scp_data_[])

      Where:

      "msg_name" is the name of the particular message to be sent.  For example,  a
      response to an SAE standard J1979 request might be named REPORT_OBDII_PID.

      "scp_data_[]" is the actual data to be  sent  in  the  message  transmission.
      Since  there  are  up  to  seven  (7) data bytes available to be sent in each
      message, the values of scp_data_[] could all be defined.  These values  could
      be  either  register  names,  or constant hex values, or even a PID which was
      defined in the "pid_def()" construct.  While not all seven of the scp_data_[]
      values  are  required to be defined in a "send()" command, the construct does
      not allow for data to be missing in between defined values.

      An example of the use of the "send()" construct follows:
             send(REPORT_OBDII_PID: 41h, 01h, 
                                j1979_01_011,
                                j1979_01_012,
                                j1979_01_013,
                                j1979_01_014)

      ..which tells the software designer to send a message called REPORT_OBDII_PID
      over the network with the following defined values:

              scp_data_1 = 41h
              scp_data_2 = 01h
              scp_data_3 = the value defined in pid_def(j1979_01_011,...)
              scp_data_4 = the value defined in pid_def(j1979_01_012,...)
              scp_data_5 = the value defined in pid_def(j1979_01_013,...)
              scp_data_6 = the value defined in pid_def(j1979_01_014,...)

      NOTES:  SCP messages which contain no variable data bytes are to be sent 
              from the strategy without the "scp_data_[]" portion defined.  

              The priority/type and target specifier bytes are unique values 
              for each message, and thus are NOT defined in the "send()" construct.
              As a result, all messages referenced by "send()" must also be defined
              in the SCP interface strategy for the software designers' reference.

      The "send()" constructs do not attempt to imply software implementation,  but
      rather  a  means  of  communicating  information  to the software designer to
      transmit over the SCP network.




                                         2-18












                                      CHAPTER 3

                                     EEC OVERVIEW

















































                                         3-1

                                 EEC OVERVIEW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                        ELECTRONIC ENGINE CONTROL SYSTEM OVERVIEW

                                 STRATEGY MODULE: EEC_CB


      The Electronic Engine Control system is intended to provide  a  more  optimum
      engine  control  strategy  than  is  possible  through  a strictly mechanical
      system.  This is accomplished by  using  a  microprocessor  which  interprets
      input  data from a number of engine parameter sensors, and based on a control
      strategy in the microprocessor's  program  chips,  generates  output  control
      signals to a number of actuators.

      The control  strategy  is  divided  into  two  segments,  an  engine  control
      strategy,  and  self  test diagnostics.  The diagnostics will be discussed in
      another section.   The  engine  control  strategy  is  segmented  into  three
      principal modes:


           -CRANK
           -UNDERSPEED
           -RUN

      The  strategy  description  and  the  entrance  and   exit   conditions   for
      CRANK/UNDERSPEED/RUN  are shown on the following pages.  RUN is of particular
      interest because it contains the control  logic  for  most  engine  operating
      regions.   The  RUN  strategy  is  further  broken  down  into three modes to
      facilitate optimum control.  Based primarily on throttle position, they are:


           -CLOSED THROTTLE
           -PART THROTTLE
           -WIDE OPEN THROTTLE


      The specific entrance and exit conditions for these modes  are  described  in
      the throttle mode selection section.
























                                         3-2

                                 EEC OVERVIEW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                     EEC IV OUTPUTS
                                    HARDWARE MODULES


   AIR MANAGEMENT 1 (AM1) (SFI-MA2)

      This Software output controls (via software) a Thermactor  Air  Bypass  (TAB)
      valve;  via  a vacuum solenoid.  When AM1 is OFF, the air is bypassed (dumped
      to the atmosphere).  When AM1 is ON air is routed to an up/down-stream valve.


   AIR MANAGEMENT 2 (AM2) (SFI-MA2)

      This Software output controls a vacuum solenoid which controls the  secondary
      air system to a catalyst via an up/down-stream divertor valve (TAD); but this
      output only controls if AM1 output is ON.


   CANISTER PURGE (CANP)

      This software controls a solenoid which  purges  fuel  vapor  from  a  carbon
      canister.  The carbon canister collects fuel vapor when the engine is off.


   DATA OUTPUT LINK (DOL)

      This software generates a digital  signal  to  one  of  the  Economy  Display
      Subsystems:   Tripminder, Fuel Economy Meter Clock, etcetera).  This displays
      such information as current Miles per Gallon to the driver.


   ELECTRONIC VACUUM REGULATOR (EVR)

      This software output controls a solenoid which varies the vacuum to  the  EGR
      valve via a varying frequency and/or duty cycle pulse train to the regulator.
      The Actuator contains a clamping diode which eliminates the need for a  diode
      in the control module.























                                         3-3

                                 EEC OVERVIEW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   FUEL PUMP (FP)

      The software for the Fuel Pump controls  a  relay  which  provides  power  to
      operate the electric fuel pump.


   INJECTORS

      The Sequential Fuel Injection system uses one output driver per injector  (as
      compared  to  the  EFI systems which have two or more injectors controlled by
      each driver).  The SFI system provides more precise timing  and  duration  of
      the  fuel injection.  As most EFI systems, SFI uses High Resistance (16 Ohms)
      high pressure (39 psi) injectors.


   IDLE SPEED CONTROL - BYPASS AIR - CONSTANT CURRENT (ISC-BPA)

      The EEC controls a linear  actuator  which  varies  air  intake  (from  0  to
      maximum) through a bypass valve in the throttle body.  The software outputs a
      duty-cycled pulse train which is coverted  into  a  constant  current.   This
      output is cycled at a frequency of 160 Hz.


   SPARK OUTPUT (SPOUT)

      The Spark software generates an ignition control signal  capable  of  driving
      the  Thick  Film  Ignition  Module  (TFI).   The driver is a tri-state device
      (High, low, open) which interfaces with the TFI-IV module  (This  Module  can
      accomodate a 250 Hz/sec acceleration).  The spout signal is referenced to the
      PIP signal.  Its timing is controlled by the SAF calculation.  If the EEC  is
      in LOS mode, the TFI module causes the spark timing to be equal to 10 deg BTC
      (same as PIP).


   SPEED WARNING CHIME (SWC)

      The software operates a chime module  when  a  calibrated  vehicle  speed  is
      exceeded.  This is a legal feature required in Saudi Arabia and is for export
      purposes only.





















                                         3-4

                                 EEC OVERVIEW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                HARDWARE PRESENT SWITCHES

      Hardware present switches define the types of devices connected  to  the  EEC
      module through the wiring harness.


                            FUEL RELATED HARDWARE PARAMETERS


       -  DEGPIP = Degrees per PIP period = 360/ENGCYL.

       -  ENGCYL = Number of PIPs per revolution = cylinder number/2.

       -  FN1327 = Fuel pulsewidth to injector map; 0 ->  use  FUELPW1,  1  ->  use
          FUELPW2.

       -  FN1329 = Injector Firing order map.

       -  HP_CID = CID Hardware present; 1 -> CID sensor present,  0  ->  Signature
          PIP may be present.

       -  HP_CIDSEL = CID Hardware select switch; 0 -> Hall Effect  present,  1  ->
          VRS sensor.

       -  IGN_TYPE = Indiactes the type of ignition hardware; 0 ->  Push  start  or
          start  wireless  TFI,  1 -> ICCD-TFI, 2 -> Dual plug LDR-DIS, 3 -> Single
          plug LDR-DIS, 4 -> EDIS HDR-DIS (36 tooth - 1).

       -  MHPFD = Signature PIP duty cycle
                  .99 = Sig PIP distributor not present
                  .20 = 8 cyl, <= 35% rduty cycle
                  .24 = 6 cyl, <= 30% duty cycle
                  .29 = 4 cyl, <= 30% duty cycle.

       -  NUMCYL = Number of engine cylinders.

       -  NUMEGO = Number of EGO sensors (1 or 2).























                                         3-5

                                 EEC OVERVIEW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      INPUTS


       -  BIHP = Brake input; 0 -> No Brake input, 1 -> Brake input available.

       -  HPOC = Overdrive cancel hardware present switch;
                 -1 -> no OCS (no OCIL), 
                  0 -> OCS is a latched relay (no OCIL logic), 
                  1 -> OCS is a momentary contact (OCIL output is a bulb (LSO-3)), 
                  2 -> OCS is a momentary contact (OCIL output is a LED (LSO-4).

       -  HWRT, ACRT = Heated Windshield recognition times.  If no H/W present, set
          HWRT  =  65,535  and  set  ACRT  =  0.  If H/W present, see strategy book
          description.

       -  KIHP = Knock Hardware Present Switch; 1 -> Knock Sensor Present, 0 ->  No
          Knock sensor.

       -  PSPSHP = Power Steering Pressure Switch; 0 -> No Power Steering  Pressure
          switch input, 1 -> Power steering pressure switch.

       -  TRLOAD = Transmission Load;
                   0 -> Manual Transmission, no clutch or gear switches,
                        forced neutral state (NDSFLG = 0),
                   1 -> Manual Transmission, no clutch or gear switch,
                   2 -> Manual Transmission, one clutch or gear switch,
                   3 -> Manual Transmission, both clutch and gear switches,
                   4 -> Auto Transmission, non-electronic, neutral drive switch,
                   5 -> Auto Transmission, non-electronic, neutral pressure switch
                       (AXOD),
                   6 -> Auto Transmission, electronic, PRNDL sensor - park, 
                        reverse, neutral, overdrive, manual 1, manual 2.

       -  VSTYPE = Vehicle speed sensor H/W present switch; 0 -> No  Vehicle  Speed
          Sensor, 1 -> Vehicle speed sensor present (VSS).

























                                         3-6

                                 EEC OVERVIEW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS


       -  EAM_HP = Electric Air Pump Hardware present (requires THRMHP = 1);  1  ->
          Electric Air Pump present, 0 -> Two-output engine driven pump.

       -  HPACL = Ride Control Hardware present; 1 -> Ride Control present, 0 -> No
          Ride Control present.

       -  PFEHP = EGR system present; 0 -> Sonic EGR System, 1 -> PFE EGR System.

       -  SWC_HP = Speed Warning Chime Hardware present; 1 -> Speed  Warning  Chime
          present, 0 -> No Speed Warning Chime present.

       -  THRMHP = Thermactor Hardware Present Switch; 0 -> None of  the  following
          hardware present, 1 -> Thermactor Hardware present, AM1, AM2.

       -  TRHMHP = Thermactor Hardware Present switch; 0 -> no thermactor  hardware
          present, 1 -> thermactor hardware present (two-output or electric).

       -  TSTRAT = Transmission Strategy Switch; 
                   0 -> No transmission control (Manual trans., AOD, ATX, C6, 
                        C3, etc.),
                   1 -> SIL (Shift Indicator Light),
                   2 -> A4LD with 3-4 shift control and converter clutch control,
                   3 -> AXOD,
                   4 -> E4OD,
                   5 -> A4LD-E,
                   6 -> AXOD-E,
                   7 -> AOD-I,
                   8 -> F4E,
                   9 -> CD4E.




























                                         3-7

                                 EEC OVERVIEW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 INITIALIZATION ROUTINE


      After Power is first applied, the software initializes all of the  Read/Write
      (RAM)  registers  before  executing  the strategy.  All RAM registers are set
      equal to zero unless initialized to another value  (either  set  value  or  a
      calculated  value) as shown below.  NOTE:  The parameters are not necessarily
      initialized in the order shown.


      RAM/FLAG                                INITIAL VALUE

      ACOFFTMR                                255.0 sec
      ACRPMTMR                                31.875 sec
      ACTPTMR2                                31.875 sec
      ACT                                     60 Deg F
      AELOAD                                  LOAD
      AETP                                    192.0
      AIR_CHG_WOT                             0.001
      ANPIP1                                  1
      ANPIP2                                  1
      APT                                     -1 (Closed Throttle)
      BP_INTR                                 1
      CONPR                                   650.0 Counts
      CRKFLG                                  1 (Crank Mode)
      DOL_COUNT                               0.5
      ECT                                     60 Deg F
      EGRBAR                                  307 Counts
      ENPIP1                                  1
      ENPIP2                                  1
      EOFF                                    307 Counts
      EPTBAR                                  650 Counts
      EVP                                     307 Counts
      F_A_RATIO1                              6.8298e-2
      F_A_RATIO2                              6.8298e-2
      GEAR_CUR                                1
      GEAR_OLD                                1
      GR_CM                                   GR_CM_KAM
      GR_CM_LST                               1
      GR_DS                                   1
      GR_DS_LST                               1
      GR_OLD                                  1
      IBAP                                    BP
      IEGR                                    307 Counts
      INJ_PIP_CNT1                            1.0
      INJ_PIP_CNT2                            1.0
      IPDL                                    7
      LAMAVE1                                 1.0
      LAMAVE2                                 1.0
      LAMBSE1                                 1.0
      LAMBSE2                                 1.0
      LAMMUL                                  1.0


                            (Continued on the following page)





                                         3-8

                                 EEC OVERVIEW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           (Continued from the previous page)


      RAM/FLAG                                INITIAL VALUE

      LAM_OLD1                                0.0
      LAM_OLD2                                0.0
      MKAY                                    1.0
      NORM_SPOUT                              1
      OLFLG                                   1 (Open Loop)
      PDL                                     7 
      PDL_LST                                 4
      PPCTR                                   PIPNUM
      PUMP                                    1.0
      RANNUM                                  8193
      RATCH                                   RATIV
      RT_NOVS                                 1
      SAF                                     10 Deg BTDC
      SIM_MIN                                 SIMLIM4
      TOT                                     60 Deg F
      TPBAR                                   RATIV
      TPBART                                  RATIV
      TPBARTV                                 RATIV
      TSLMPH                                  ^FF (255 msec.)
      UNDSP                                   1 (Underspeed)
      VBAT                                    12.5 Volts
      WINDOW_BETA                             0.95


      The strategy checks the validity  of  the  Adaptive  Fuel  and  Idle  Airflow
      (ISCKAM)  after the RAM initialization.  This particular KAM qualification is
      described in the KAM Chapter.




























                                         3-9

                                 EEC OVERVIEW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL






























































                                         3-10












                                      CHAPTER 4

                                  HARDWARE INTERFACE

















































                                         4-1

                 HARDWARE INTERFACE, I/O CHANNEL ASSIGNMENTS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 I/O CHANNEL ASSIGNMENTS


      OVERVIEW

      This module is intended to provide the user with a  quick  reference  to  I/O
      channel  assignments.   Each  line consists of the channel name, the function
      assigned to that channel, a description of the function, and a  list  of  any
      software switches that must be set to activate that function on the specified
      channel.  If nothing appears under the 'Settings'  column,  the  function  is
      assigned to the channel by default.


      PROCESS
                              STRATEGY MODULE: HWINT_IO_CB


                             I/O CHANNEL ASSIGNMENTS FOR CB


                              HIGH SPEED OUTPUT ASSIGNMENTS

      Channel         Acronym         Description             Settings
      -------         -------         -----------             --------

      HSO_0           INJ1_CMD        Injector # 1
      HSO_1           INJ2_CMD        Injector # 2
      HSO_2           INJ3_CMD        Injector # 3
      HSO_3           INJ4_CMD        Injector # 4
      HSO_4           INJ5_CMD        Injector # 5
      HSO_5           INJ6_CMD        Injector # 6
      HSO_6           INJ7_CMD        Injector # 7            NUMCYL=8
      HSO_6           EDF             Electro Drive Fan       NUMCYL < 8 and
                                                              EDFHP = 1
      HSO_7           INJ8_CMD        Injector # 8            NUMCYL=8
      HSO_7           HEDF            High Speed EDF          NUMCYL < 8 and
                                                              HEDFHP=1
      HSO_8           SPOUT_CMD       Spark Output
      HSO_9           KTS_CMD         Knock Threshold Select  KIHP = 1





















                                         4-2

                 HARDWARE INTERFACE, I/O CHANNEL ASSIGNMENTS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              LOW SPEED OUTPUT ASSIGNMENTS

      Channel         Acronym         Description             Settings
      -------         -------         -----------             --------

      LSOUT_0         AM1             Air Management Sol. 1   THRMHP=1; SWC_HP=0
      LSOUT_0         SWC             Speed Warning Chime     SWC_HP=1; THRMHP=0
      LSOUT_1         FLG_SS_1        Shift Solenoid #1
      LSOUT_2         FLG_SS_2        Shift Solenoid #2
      LSOUT_3         EDF             Electro. Drive Fan      EDFHP = 1 and
                                                              NUMCYL = 8
      LSOUT_3         TCIL_BULB       Trans. Control          HPTCS = 1 and
                                        Indicator Light       (EDFHP = 0 or
                                                              (EDFHP = 1 and
                                                              NUMCYL < 8))
      LSOUT_4         TCIL_LED        Trans. Control          HPTCS=2 and
                                        Indicator LED         (HEDFHP = 0 or
                                                              (HEDFHP = 1 and
                                                              NUMCYL < 8))
      LSOUT_4         HEDF            High Speed Electro      HEDFHP = 1 and
                                        Drive Fan             NUMCYL = 8
      LSOUT_5         STO             Self Test Output
      LSOUT_5         STO_STATE       Self Test Output
      LSOUT_5         MIL             Malfunction Indicator   MIL_SW <> 0
                                        Light
      LSOUT_6         ACR             Air Cond. Relay         LINK_SW = 0,2,4,6
      LSOUT_6         DOL             Data Output Link        LINK_SW = 1,3,5,7
      LSOUT_7         PUMP            Fuel Pump
































                                         4-3

                 HARDWARE INTERFACE, I/O CHANNEL ASSIGNMENTS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                       DUCE LEVELS


      Channel         Acronym         Description             Settings
      -------         -------         -----------             --------

      DUCE_0          ISC             Idle Speed Control
      DUCE_1          EVR             Electronic Vacuum
                                        Regulator
      DUCE_2          CANP            Canister Purge
      DUCE_3          AM2             Air Management 2        THRMHP=1; EAM_HP=0
      DUCE_4          LUS             Lock-up Solenoid
      DUCE_5          **UNUSED**
      DUCE_6          **UNUSED**
      DUCE_7          **UNUSED**


                            ANALOG INPUT CHANNEL ASSIGNMENTS


      Channel         Acronym         Description             Settings
      -------         -------         -----------             --------

      ATOD_00         TOT_CHNL        Trans Oil Temp
      ATOD_01         VCAL_CHNL       VCAL Input
      ATOD_02         IVPWR_CHNL      VPWR Input
      ATOD_03         OCC_CHNL        Output Circuit
                                        Check
      ATOD_04         HEGO2_CHNL      EGO-2 Sensor            Multiplexed with Fuel
                                                                Pump Monitor
      ATOD_05         IEIVOCM_CHNL    TV
      ATOD_06         MAF_CHNL        Mass Air Meter
      ATOD_07         TP_CHNL         Throttle Position
      ATOD_08         ECT_CHNL        Engine Coolant Temp
      ATOD_09         ACT_CHNL        Air Charge Temp
      ATOD_10         PRNDL_CHNL      PRNDL Position          TRLOAD = 6
      ATOD_10         NDS_CHNL        Neutral Drive Switch
      ATOD_11         HEGO1_CHNL      EGO-1 Sensor
      ATOD_12         EVP_CHNL        Pressure Feedback EGR   PFEHP = 1





















                                         4-4

                 HARDWARE INTERFACE, I/O CHANNEL ASSIGNMENTS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               HIGH SPEED INPUT PIN LEVELS


      Channel         Acronym         Description             Settings
      -------         -------         -----------             --------

      HSI_0           PIP_LVL         PIP Input Level
      HSI_1           KNK_LVL         Knock Input Level       KIHP = 1
      HSI_2           BP_LVL          Barometric Pressure     BPSSW = 1
      HSI_3           TSS             Turbine Speed Sensor    TSSHP = 1
      HSI_4           ACCS            A/C Clutch
      HSI_5           MPH_LVL         Variable Speed Sensor   VSTYPE = 1 or 2
                                        Differential
      HSI_6           **UNUSED**
      HSI_7           IDM_LVL         Ignition Diagnostic
                                        Monitor Input Level


                                   BI-DIRECTIONAL PORT


      Channel         Acronym         Description             Settings
      -------         -------         -----------             --------

      BIDIR_1         **UNUSED**
      BIDIR_2         **UNUSED**


                                  ROM PORT ASSIGNMENTS


      Channel         Acronym         Description             Settings
      -------         -------         -----------             --------

      RP_0            **UNUSED**
      RP_1            ITCS            Trans. Control Switch   HPTCS = 0,1, or 2
      RP_2            ACPSW           AC Pressure Switch
      RP_3            OCTADJ          Field Octane Adjust     OCTADJHP = 1
      RP_4            BOO_LVL         Brake On Off            BIHP = 1





















                                         4-5

               HARDWARE INTERFACE, SUMMARY OF SOFTWARE SWITCHES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OVERVIEW

      This module is intended to provide  the  user  with  a  summary  of  software
      switches  available  to  turn on/off I/O and strategy features.  Each section
      contains the name of the switch, a short description of  the  name,  and  the
      available settings.


                           STRATEGY MODULE:  HWINT_SWITCHES_CB

      SWITCH                  DESCRIPTION AND SETTINGS
      ------                  ----------------------------------------

      AIR_DOWN_CAL            Indicates which PIP edge to calculate CYLARC
                              0 = use up edge
                              1 = use down edge

      ANTICIPATION            Switch to activate air charge anticipation
                                   calculation
                              0 = bypass calculation
                              1 = perform anticipation calculation

      ARCHIDLE_SW             AIRCHG idle switch
                              0 = use FN052 slow/fast at idle
                              1 = use FKARCIDLE filter at idle

      ARCHSW                  Air charge select switch
                              0 = no filter
                              1 = use manifold filling model

      BIHP                    Brake input hardware present switch
                              0 = no brake input hardware present
                              1 = brake input hardware present

      BPSSW                   BP selection switch
                              0 = no BP sensor present
                              1 = BP sensor present

      CC_ERR_SW               Switch to enable flashing TCIL for converter
                                clutch errors
                              0 = disable flashing TCIL
                              1 = enable flashing TCIL

      CIDRSW                  Switch to enable idle drive injector timing
                              0 = disable idle drive injector timing
                              1 = enable idle drive injector timing

      CINTSW                  Switch to enable special fuel timing in neutral
                              0 = disable special neutral fuel timing
                              1 = enable special neutral fuel timing

      CRKTMR_INC              Switch to allow CRKPIP_CTR to run when
                                   engine state is out of crank
                               0 = freeze CRKPIP_CTR when not in crank
                              >0 = allow CRKPIP_CTR to increment when
                                      not in crank mode




                                         4-6

               HARDWARE INTERFACE, SUMMARY OF SOFTWARE SWITCHES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      SWITCH                  DESCRIPTION AND SETTINGS
      ------                  --------------------------------------------------

      CRKCTR_RESET            CRKPIP_CTR reset switch
                              0 = do not reset CRKPIPCTR upon stall
                              1 = reset CRKPIPCTR upon stall

      DISFMEM_DSRD            Flag to indicate if FMEM action to be taken upon
                                DIS failure
                              0 = do not take FMEM action
                              1 = take FMEM action

      DWFHP                   Dual wound fan hardware present switch
                              0 = high speed fan is not dual wound
                              1 = high speed fan is dual wound

      EAM_HP                  Electric air pump hardware present switch
                              0 = electric pump not present
                              1 = electric pump present

      EDFHP                   Electrodrive fan present switch
                              0 = no electrodrive fan present
                              1 = electrodrive fan present
                              Used in conjunction with HEDFHP

      ENA_CSLP_TST            Continuous slip test enable switch
                              0 = disable test
                              1 = enable test

      ENGCYL                  Number of PIP's per engine revolution
                              2 = 4 cylinder engine
                              3 = 6 cylinder engine
                              4 = 8 cylinder engine

      EPC_CM_ENA              Switch to enable EPC current monitor test
                              0 = disable test
                              1 = enable test

      FIRST_DN_ENG            Flag to fire injector on the first down edge
                              0 = do not fire on the first down edge
                              1 = fire on the first down edge

      HCAMSW                  Adaptive fuel idle cells on hicam switch
                              0 = use idle cells on hicam
                              1 = do not use idle cells on hicam

      HEDFHP                  Two speed fan output present switch
                              0 = one speed fan present
                              1 = two speed fan present
                              Used in conjunction with EDFHP

      HP_CID                  CID hardware present switch
                              0 = signature PIP distributors
                              1 = CID sensor input present
                              NOTE:  if CID sensor present, make sure
                              HP_CIDSEL is set to correct value.




                                         4-7

               HARDWARE INTERFACE, SUMMARY OF SOFTWARE SWITCHES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      SWITCH                  DESCRIPTION AND SETTINGS
      ------                  --------------------------------------------------

      HP_CIDSEL               CID sensor hardware select switch
                              0 = hall effect sensor
                              1 = VR sensor

      HPTCS                   Trans. Control Switch hardware present
                              -1 = no TCS switch
                               0 = TCS switch present, no indicator light
                               1 = TCS switch present, indicator light (bulb)
                               2 = TCS switch present, indicator light (LED)

      IDLE_CELL_SW            Switch to enable use of special adaptive idle cells
                              0 = use special adaptive idle cells
                              1 = do not use special adaptive idle cells

      IDLE_TEMP_SW            INJDLY temperature switch
                              0 = no temperature compensation in idle
                              1 = temperature compensation in idle

      IGN_TYPE                Flag to indicate ignition type
                              1 = TFI-ICCD
                              2 = LDR-DIS-DP
                              3 = LDR-DIS-SP

      ISC_PTP_SW              Switch to use ISC_PTP at idle
                              0 = do not use ISC_PTP at idle
                              1 = use ISC_PTP at idle

      KIHP                    Knock hardware present switch
                              0 = no knock hardware
                              1 = knock hardware present

      KNKCYL                  Number of cylinders for knock control

      LAMSW                   Lambda reset switch
                              0 = do not allow lambda to reset upon entry
                                  into closed loop control
                              1 = allow lambda to reset upon entry into
                                  closed loop control

      LINK_SW                 Communication link configuration switch
                              0 = CART mode / no DOL, no DCL
                              1 = CART mode / DOL present, no DCL
                              2 = CART mode / no DOL, DCL present
                              3 = CART mode / DOL present, DCL present
                              4 = UART mode / no DOL, no DCL
                              5 = UART mode / DOL present, no DCL
                              6 = UART mode / no DOL, DCL present
                              7 = UART mode / DOL present, DCL present

      LUGSW                   LUGTMR logic switch
                              0 = use LUGTMR logic
                              1 = do not use LUGTMR logic





                                         4-8

               HARDWARE INTERFACE, SUMMARY OF SOFTWARE SWITCHES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      SWITCH                  DESCRIPTION AND SETTINGS
      ------                  --------------------------------------------------

      MIL_SW                  MIL enable switch
                              0 = MIL not turned on
                              1 = turn MIL on per FMEM
                              2 = development only, MIL on for any
                                     CVIP fault

      MILLIM                  Switch to enable MIL bulb check
                              0 = disable bulb check
                              1 = enable bulb check

      MLUS_TST_ENA            Continuous MLUS test enable switch
                              0 = disable test
                              1 = enable test

      MPGSW                   Managed fuel air calibration switch
                              0 = disable spark and EGR MFA tables
                              1 = enable spark and EGR FMA tables

      NUMCYL                  Number of cylinders in the engine

      NUMEGO                  Number of EGO sensors

      OCTADJHP                Field octane adjust hardware present switch
                              0 = adjustment hardware not present
                              1 = adjustment hardware present

      PFEHP                   Switch to select EGR strategy
                              0 = use sonic strategy
                              1 = use PFE strategy
                              2 = do not use any EGR

      PRLDSW                  Switch to determine PERLOAD
                              0 = let PERLOAD = LOAD/PEAK_LOAD
                              1 = let PERLOAD = LOAD
                              2 = let PERLOAD = TPLDST/PEAK_LOAD_SL2

      PSPSHP                  Power steering pressure switch hardware present
                              0 = no power steering pressure switch
                              1 = power steering pressure switch present

      PURGSW                  Switch to allow open loop canister purge
                              0 = do not allow open loop purge
                              1 = allow open loop purge

      SFT_ERR_SW              Flashing OCIL for shift error selection switch
                              0 = do not flash for shift errors
                              1 = flash for shift errors

      SW_MLK                  Switch for manual converter clutch control
                              0 = automatic bypass clutch control
                              1 = unconditional bypass clutch lockup
                              2 = unconditional bypass clutch unlock





                                         4-9

               HARDWARE INTERFACE, SUMMARY OF SOFTWARE SWITCHES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      SWITCH                  DESCRIPTION AND SETTINGS
      ------                  --------------------------------------------------

      SW_MPD                  MPG mode switch for therm. air bypass
                              0 = no bypass in MPG mode
                              1 = bypass in MPG mode

      SW_MSF                  Switch to allow for manually selecting GR_CM
                              0 = calculate new GR_CM
                              1 = use GRMSFT as new GR_CM

      SW_RLK                  Closed throttle / brake hysteresis switch
                              0 = unlock in hysteresis zone
                              1 = remain locked in hysteresis zone

      SW_SFTIN                Desired gear in progress switch
                              0 = let FLG_SFT_IN = 0 for new desired gear
                              1 = always determine new desired gear

      SW_STALTV               Switch to do stall TV
                              0 = do normal TV
                              1 = always do stall TV

      SW_SUPD                 Switch to activate 2nd update of info. for
                                   converter clutch upshift control
                              0 = do not update at end of closed loop control
                              1 = update at end of closed loop control

      TFCISW                  Transient fuel comp. initialization switch
                              0 = assume dry manifold at startup
                              1 = assume wet manifold at startup

      THRMHP                  Thermactor/super/inlet air control switch
                              0 = disable thermactor/supercharger/and
                                     inlet air control logic output
                              1 = enable thermactor
                              2 = enable SBS1/SBS2 (supercharger)
                              3 = enable inlet air control

      TRLOAD                  Transmission load switch
                              0 = manual trans / no clutch sw, no gear sw,
                                         forced neutral state
                              1 = manual trans / no clutch sw, no gear sw
                              2 = manual trans / clutch OR gear sw
                              3 = manual trans / clutch AND gear sw
                              4 = auto trans / non electronic, neutral-drive switch
                              5 = auto trans / non electronic, neutral pressure sw.
                              6 = auto trans / electronic, PRNDL sensor
                              7 = F4E PRNDL switches
                              8 = unused

      TSSHP                   Turbine speed sensor hardware present switch
                              0 = no turbine speed sensor
                              1 = turbine speed sensor present






                                         4-10

               HARDWARE INTERFACE, SUMMARY OF SOFTWARE SWITCHES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      SWITCH                  DESCRIPTION AND SETTINGS
      ------                  --------------------------------------------------

      TSTRAT                  Transmission strategy switch
                              0 = no trans. control (man, AOD, ATX, etc)
                              1 = Shift Indicator Light
                              2 = A4LD w/ 3-4 shift
                              3 = AXOD
                              4 = E4OD
                              5 = A4LD-E
                              6 = AXOD-E
                              7 = AOD-E
                              8 = 4EAT (OR F4E)
                              9 = CD4E

      V_ADAPTV_ENA            Adaptive fuel table test enable switch
                              0 = disable test
                              1 = enable test

      V_CBOO_ENA              Continuous BOO test enable switch
                              0 = disable test
                              1 = enable test

      V_CLSW_SEL              CVIP clutch switch test
                              0 = disable test
                              1 = enable test

      V_CPUOK_ENA             KOEO EDIS module test enable switch
                              0 = disable test
                              1 = enable test

      V_DELPFE_HP             Delta PFE EGR system hardware present switch
                              0 = EGR system is not DPFE
                              1 = EGR system is DPFE

      V_EGOHP                 Switch to bypass running EGO test
                              0 = disable test
                              1 = enable test

      V_EGOIDL_ENA            Switch to enable EGO sensor test at idle air flows
                              0 = disable test
                              1 = enable test

      V_ETV_TEST              Enable flag for VIP ETV solenoid test
                              0 = disable test
                              1 = enable test

      V_FPMFLG                Switch to request fuel pump circuit tests
                              0 = disable test
                              1 = enable test










                                         4-11

               HARDWARE INTERFACE, SUMMARY OF SOFTWARE SWITCHES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      SWITCH                  DESCRIPTION AND SETTINGS
      ------                  --------------------------------------------------

      V_GOOSW                 Goose test enable switch
                              0 = disable goose test
                              1 = enable goose test

      V_ISC_TST               ISC test type enable switch
                              0 = disable tests
                              1 = enable test #1
                              2 = enable tests #1 & #2

      V_LUSOCC_ENA            MLUS OCC test enable switch
                              0 = disable test
                              1 = enable test

      V_MODE_OPT              Switch to select throttle plate adjustment
                                     procedure
                              0 = do 2 min. timing check
                              1 = do TP adjustment

      V_MODE_SEL              Flag to choose which error to use during TP
                                   adjust mode
                              0 = use RPM error
                              1 = use ISCDTY error

      V_NEUTST_ENA            KOEO neutral drive switch test enable
                              0 = disable test
                              1 = enable test

      V_SPK_ENABL             Spark test enable switch
                              0 = disable test
                              1 = do the KOER spout test

      V_TCS_ENA               Switch to enable TCS circuit test
                              0 = disable test
                              1 = enable test

      VAIRFL                  Flag for secondary air test
                              0 = disable test
                              1 = enable test

      VBISW                   KOER brake input test enable switch
                              0 = disable test
                              1 = enable test

      VCBFLG                  Cylinder balance test flag
                              -1 = allow test
                               0 = bypass test
                               1 = do test, allow multiple entry

      VCIDSW                  Cylinder Identification test switch
                              0 = disable test
                              1 = enable test






                                         4-12

               HARDWARE INTERFACE, SUMMARY OF SOFTWARE SWITCHES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      SWITCH                  DESCRIPTION AND SETTINGS
      ------                  --------------------------------------------------

      VIP_DIS_HP              HDR and SP DIS CVIP test enable switch
                              0 = disable test
                              1 = enable test

      VPSSW                   RVIP power steering pressure switch test
                              0 = disable test
                              1 = enable test

      VSSSW                   CVIP VSS test enable switch
                              0 = disable test
                              1 = enable test

      VSTYPE                  Integrated vehicle speed/cruise control system
                                 hardware present switch
                              0 = no MPH and no VSC
                              1 = MPH and no VSC
                              2 = MPH and VSC

      VTABFL                  Flag for thermactor test
                              0 = disable test
                              1 = enable test




































                                         4-13

               HARDWARE INTERFACE, SUMMARY OF SOFTWARE SWITCHES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL






























































                                         4-14












                                      CHAPTER 5

                     CRANK/UNDERSPEED/RUN MODE SELECTION STRATEGY

















































                                         5-1

                     CRANK/UNDERSPEED/RUN MODE SELECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OVERVIEW


      The EEC IV  strategy  operation  is  divided  into  three  distinct  strategy
      segments.  These are:


          1)  CRANK
          2)  UNDERSPEED
          3)  RUN


      The CRANK mode is entered after a power-up initialization or after an  engine
      stall.   CRANK  employs  a special strategy to aid engine starting.  When the
      CRANK logic first  becomes  false,  the  UNDERSPEED  mode  is  entered.   The
      UNDERSPEED  mode  employs  a  special spark and fuel strategy in place of the
      normal engine control strategy (RUN).  After start, the RUN mode  is  entered
      and  the  normal engine control strategy is executed.  If the engine stumbles
      during RUN mode, the UNDERSPEED mode can again be  entered  to  help  recover
      from the stumble and prevent a stall.


      The specific strategies are:


                                     CRANK STRATEGY


      Fuel                     Fire all injector ports simultaneously
                               every CRKPIP PIPS. See the Fuel strategy.

      Spark Advance            10 degrees BTDC (on PIP signal)
      Thermactor Air           bypass
      EGR                      disabled
      Purge                    disabled
      ISC                      FN884(TCSTRT)

      Data Output Link         execute strategy
      A/C Clutch               disabled
      S.I.L.                   disabled
      Thermactor Pump Clutch   disabled



















                                         5-2

                     CRANK/UNDERSPEED/RUN MODE SELECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   UNDERSPEED STRATEGY


      Fuel                     Fire all injector ports in the
                               same manner as in the RUN mode.
                               An additional multiplier (FN387
                               or FN387A) is included in the
                               pulsewidth equation. See the 
                               Fuel Background Pulsewidth module.


      Spark Advance            10 degrees BTDC (on PIP signal)

      Other outputs are the same as the RUN mode.



                                      RUN STRATEGY


      The normal engine control strategy is described  in  the  remainder  of  this
      book.






































                                         5-3

                     CRANK/UNDERSPEED/RUN MODE SELECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS


      INPUTS

      Registers:

       -  ACSTRT = Temperature of ACT at startup, deg F.

       -  ECT = Engine coolant temperature, deg F.

       -  ECTCNT = Number of times ECT sensor input was read.

       -  N = Engine RPM.

       -  PIPCNT = Number of PIPs which have occurred.

       -  RUNUPTMR = Time since runup rpm exceeded (0.125 secs).

       -  TCSTRT = Temperature of Engine Coolant at Cold Startup, deg F.

       -  TOT = Transmission oil temperature.

       -  TSLPIP = Time since last PIP.

      Bit Flags:

       -  CRKFLG = Engine Mode Flag; 1 -> Crank Mode, 0 <> Crank Mode.

       -  PTSCR = Part throttle since crank mode flag; 0 -> driver has  not  tipped
          in since start, 1 -> driver tipped in, kick down desired RPM.

       -  UNDSP = Run/Underspeed Flag; 1 -> Underspeed (or CRANK), 0 -> Run.

      Calibration Constants:

       -  CRKPIP = Number of PIPs between injector outputs during Crank.

       -  FN384(ECT) = Maximum engine speed to exit Crank versus ECT.

       -  FN385(ECT) = Underspeed-to-run transition as a function of ECT.

       -  FN387A = Fuelpw multiplier versus ECT;  purpose:   underspeed  mode  fuel
          control; Input = ECT.

       -  FN884(TCSTRT) = ISC Duty Cycle in Crank, deg.

       -  NCNT = Minimum number of PIP necessary to exit CRANK Mode.

       -  NSTALL = Engine Stall speed to re-enter CRANK Mode.

       -  UNRPMH = Hysteresis term for UNDERSPEED Mode.








                                         5-4

                     CRANK/UNDERSPEED/RUN MODE SELECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  ACSTRT_ACCUM = ACSTRT accumulator, deg F.

       -  ECTCNT = See above.

       -  INIT_TOT = TOT at  start-up;  arithmetic  average  of  the  first  8  TOT
          reading.

       -  N = See above.

       -  N_RUN = Engine RPM to exit Crank mode [=FN384(ECT)].

       -  PIPCNT = See above.

       -  TCSTRT_ACCUM = TCSTRT accumulator, deg F.

      Bit Flags:

       -  AIR_CRK_INT =  Flag  that  indicates  if  the  air  registers  have  been
          initialize; 0 -> registers not initialiezed yet, 1 -> registers have been
          initialiezed.

       -  AIR_PIP_CNT = Counter that counts the first four pip edges.

       -  CRKFLG = See above.

       -  FIRST_PIP = Indicates that first PIP has been received.

       -  FLG_STALL =  Flag  indicating  a  stall  has  occurred;  transition  from
          underspeed/run to crank.

       -  RUNUP_FLG = Flag indicating that initial runup is complete;  1  ->  Runup
          complete.

       -  UNDSP = Run/Underspeed Flag; 1 -> Underspeed (or CRANK), 0 -> Run.






















                                         5-5

                     CRANK/UNDERSPEED/RUN MODE SELECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: CRK_UNDSP_RUN_COM2


      Always -------------------------------------| FLG_STALL = 0
                                                  | N_RUN = FN384(ECT)



      CRKFLG = 1 ---------------------------|     | (Crank Mode)
                                            |AND -| PIPCNT = 0
      N <= N_RUN ---------------------------|     | PTSCR = 0 
                                                  | UNDSP = 1 
                                                  |
                                                  | --- ELSE ---
      CRKFLG = 1 ---------------------------|     | 
                                            |     | 
      N > N_RUN ----------------------------|     | (Exit Crank) 
                                            |AND -| CRKFLG = 0 
      ECTCNT >= 8 --------------------------|     | UNDSP = 1
                                            |     | 
      PIPCNT >= NCNT -----------------------|     | 
                                                  | --- ELSE ---
                                                  |
      CRKFLG = 1 ---------------------------|     | (Crank Mode)
                                            |AND -| UNDSP = 1
      N > N_RUN ----------------------------|     |
                                                  | --- ELSE ---
                                                  |
                                                  | (Engine stall)
      N < NSTALL ---------------------------------| PIPCNT = 0
                                                  | CRKFLG = 1
                                                  | FLG_STALL = 1
                                                  | ECTCNT = 0
                                                  | PTSCR = 0
                                                  | TCSTRT_ACCUM = 0
                                                  | UNDSP = 1
                                                  | ACSTRT_ACCUM = 0
                                                  | INIT_TOT = 0
                                                  | RUNUP_FLG = 0
                                                  | RUNUPTMR = 0
                                                  |
                                                  | --- ELSE ---
                                                  |
                                                  | (Enter Underspeed)
      N < FN385(ECT) -----------------------------| PIPCNT = 0
                                                  | UNDSP = 1
                                                  |
                                                  | --- ELSE ---

                                (continued on next page)









                                         5-6

                     CRANK/UNDERSPEED/RUN MODE SELECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

      N > (FN385(ECT) + UNRPMH) ------------|     |
                                            |AND -| (Enter Run)
      UNDSP = 1 ----------------------------|     | PIPCNT = 0
                                                  | UNDSP = 0
                                                  |
                                                  | --- ELSE ---
                                                  |
                                                  | (No Change)
                                                  | PIPCNT = 0




      TSLPIP >= 800 msec -------------------------| N = 0
                                                  | FIRST_PIP = 0
                                                  | AIR_CRK_INT = 0
                                                  | AIR_PIP_CNT = 0









































                                         5-7

                     CRANK/UNDERSPEED/RUN MODE SELECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL






























































                                         5-8












                                      CHAPTER 6

                           THROTTLE MODE SELECTION STRATEGY

















































                                         6-1

                           THROTTLE MODE SELECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           THROTTLE MODE SELECTION STRATEGY


      OVERVIEW

      The throttle mode scheduler is used to determine what engine operating region
      is  currently  extant.   The  variable APT (At Part Throttle flag) is used to
      indicate throttle mode and is assigned the following values:

                Throttle Mode            APT
                ------------------       ---
                CLOSED THROTTLE          -1
                PART THROTTLE             0
                WIDE OPEN THROTTLE        1

      The value of APT is determined by the logic  shown  on  the  following  page.
      Briefly,  throttle  angle breakpoints, in terms of counts, are used to define
      the CLOSED/PART_THROTTLE and PART/WIDE_OPEN_THROTTLE transitions.  Hysteresis
      is incorporated in both breakpoints to prevent jitter between modes.

      TP_REL is a parameter which indicates the amount of throttle movement  beyond
      the  closed  throttle/idle  setting.  TP_REL is computed by subtracting RATCH
      from TP.  Larger values of  TP_REL  indicates  wide  open  throttle,  smaller
      values  of  TP_REL  indicates  part  throttle, and near zero TP_REL indicates
      closed throttle.

      The variable RATCH is the output of a ratchet  algorithm  which  continuously
      seeks the minimum throttle angle corresponding to a CLOSED THROTTLE position.
      This alleviates the necessity to set  the  throttle  position  sensor  at  an
      absolute  position and compensates for system changes and differences between
      vehicles.  The ratchet algorithm uses  filtered  throttle  position  for  the
      determination of RATCH.

      A more detailed explanation of the throttle position  ratchets  and  throttle
      position filter is contained in the INPUT CONVERSIONS AND FILTERS chapter.

























                                         6-2

                           THROTTLE MODE SELECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS


      INPUTS

      Registers:

       -  APT = Status of Part Throttle; -1 -> Closed  Throttle,  1  ->  Wide  Open
          Throttle, 0 -> Part Throttle.

       -  N = engine speed, revs/min.

       -  TP_REL = Relative Throttle position, counts.

      Bit Flags:

       -  CRKFLG = Flag indicating engine mode; 1 -> Crank.

      Calibration Constants:

       -  DELTA = CT/PT Breakpoint value above RATCH.

       -  HYST2 = Hysteresis term to enter WOT mode.

       -  HYSTS = A/D counts, Closed Throttle to Part Throttle hysteresis value.

       -  FN513 = PT/WOT Breakpoint value above RATCH as a funtion of engine speed.



      OUTPUTS

      Registers:

       -  APT = See above.

      Bit Flags:

       -  CL_THRTL = Indicates that the throttle is closed; 1 -> closed throttle, 0
          -> part throttle or wide open throttle.

       -  CTPTFG = Closed throttle to PT/WOT transition flag.

       -  PTSCR = Part throttle mode since exiting CRANK Flag.
















                                         6-3

                           THROTTLE MODE SELECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            THROTTLE MODE SELECTION LOGIC


      The logic described below considers the current position of the throttle  and
      compares its value to the RATCH, Closed Throttle, plus the change in throttle
      position from the last setting.  If both flip-flops in the logic clear,  then
      Part Throttle is set.


      PROCESS
                               STRATEGY MODULE: THROT_COM1


      TP_REL <= DELTA ----------------------|S Q -| Closed Throttle mode
                                            |     | APT = -1
      TP_REL > DELTA + HYSTS ---------------|C    | CL_THRTL = 1
                                                  |
                                                  | --- ELSE --- 
                                                  | 
      TP_REL > FN513(N) + HYST2 ------------|S Q -| Wide Open Throttle 
                                            |     | mode
      TP_REL <= FN513(N) -------------------|C    | APT = 1
                                                  | CL_THRTL = 0
                                                  |
                                                  | --- ELSE ---
                                                  |
                                                  | Part Throttle Mode
                                                  | APT = 0
                                                  | CL_THRTL = 0



      NOTE: PTSCR is initialized to 0.


      previous APT = -1 --------------------|     
                                            |     
      current APT <> -1 --------------------|AND -| CTPTFG = 1
                                            |     | Closed Throttle to
      CRKFLG = 1 ---------------------------|     | Part Throttle transition
                                                  |
                                                  | --- ELSE ---
      previous APT = -1 --------------------|     |        
                                            |     | 
      current APT <> -1 --------------------|AND -| CTPTFG = 1
                                            |     | Closed Throttle to
      CRKFLG = 0 ---------------------------|     | Part Throttle transition
                                                  | PTSCR = 1
                                                  |
                                                  | --- ELSE ---
                                                  |
                                                  | CTPTFG = 0 








                                         6-4












                                      CHAPTER 7

                                    FUEL STRATEGY

















































                                         7-1

                    FUEL STRATEGY, FUEL STRATEGY OVERVIEW - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 FUEL STRATEGY OVERVIEW


      OVERVIEW

      The A/F ratio control actuators consist  of  injectors  whose  fuel  metering
      function is affected by energizing and de-energizing the injector solenoids.

      Each injector has a metering needle or  pintle  which  opens  or  closes  the
      injector nozzle to release fuel.

      A high pressure fuel pump delivers fuel to the injectors at approximately  42
      PSI.

      Based upon the  calculated  air  mass  value,  the  software  calculates  the
      injector pulsewidths required to give the desired A/F ratio.

      The desired A/F ratio for all operating conditions is determined by  the  A/F
      strategy and calibration.

      The strategy is designed to handle 4, 6, or 8 output Sequential EFI systems.

      The calibration parameters ENGCYL and NUMCYL control the  engine  type.   The
      user must set both parameters for the strategy to work correctly.

      On SEFI applications, each cylinder has an injector  located  in  the  intake
      port near the intake valve.  The injectors are individually fired in an order
      that matches the firing order of the engine.   The  injector  output  numbers
      correspond   to   engine   cylinder  numbers.   This  allows  for  consistent
      nomenclature for the module pinouts and the  wiring  harness.   Under  normal
      engine  running,  each injection is timed to occur at an optimum point in the
      intake event.  Injector timing is determined by strategy and calibration.

      Timed sequential fuel injection requires identification of cylinder #1.


























                                         7-2

                    FUEL STRATEGY, FUEL STRATEGY OVERVIEW - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                          STEREO EGO FUEL SYSTEM CONFIGURATION


      The following Side 1 and Side 2 designations are used.



                |                                                      |
                |                                                      |
                |                                                      |
                |       EGO SENSOR ----- E     E -----    EGO SENSOR   |
                |       EGO-1                             EGO-2        |
                |       HEGO-1                            HEGO-2       |
                |                                                      |
                |                                                      |
                |                                                      |
                |                        -------                       |
                |                       | I   I |                      |
                | SIDE 1 INJECTORS -->  | I   I |  <-- SIDE 2 INJECTORS|
                |                       | I   I |                      |
                |                    #1 | I   I |                      |
                |                        -------                       |
                |                                                      |
                |                                                      |
                |                                                      |
                |                                                      |
                |                                                      |
                |______________________________________________________|


                                    FRONT OF VEHICLE
                                       (TOP VIEW)



                                         NUMEGO


      A calibration switch exists which is used to tell the computer how  many  EGO
      sensors  are  present.   If  NUMEGO  = 1, the system is treated as a mono EGO
      sensor system and all fuel pulsewidths are calculated  from  the  single  EGO
      sensor  (treated  as  EGO-1).  If NUMEGO = 2:  Fuel pulsewidths for the EGO-2
      injectors are calculated from EGO-2 sensor information; Fuel pulsewidths  for
      the  EGO-1  injectors  are  calculated from EGO-1 sensor information.  FN1327
      links the injector outputs to the appropriate EGO sensor.















                                         7-3

                    FUEL STRATEGY, FUEL STRATEGY OVERVIEW - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                       FUEL MODES


      Fuel control strategy is divided into 2 mutually exclusive modes:

       -  OPEN LOOP

       -  CLOSED LOOP




      OPEN LOOP MODE


      During open  loop  operation,  the  computer  calculates  the  injector  fuel
      pulsewidths  required  to provide a pre-determined A/F ratio or lambda value.
      The desired lambda values (LAMBSE1, LAMBSE2) can vary with  engine  operating
      conditions  and  are calibration-dependent.  During open loop, LAMBSE1 equals
      LAMBSE2.



      CLOSED LOOP MODE


      During closed loop operation, the computer ramps the  desired  lambda  values
      (LAMBSE1,  LAMBSE2)  in  a limit cycle manner about stoichiometry.  Using the
      EGO (Exhaust Gas Oxygen) sensor, the computer increases or  decreases  lambda
      at  a  calculated  rate  of  change.   The  rate  at  which lambda changes is
      calibration dependent.  For Stereo EGO operation, LAMBSE1  and  LAMBSE2  vary
      independently using EGO-1 and EGO-2 sensors.  For Mono EGO operation, LAMBSE1
      equals LAMBSE2.



























                                         7-4

                 FUEL STRATEGY, HEGO SENSOR INPUT PROCESSING - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              HEGO SENSOR INPUT PROCESSING


      OVERVIEW

      There are currently 2 HEGO sensors which may be connected to EEC  module  for
      non-OBDII  strategies.  In accordance with OBDII protocol, the names of these
      sensors contain reference to their location and can be presented  as  HEGOxy,
      where

         x = 1 for engine Bank1 and 2 for engine Bank2;                        
         y = 1 for upstream HEGO sensor and 2 for downstream (rear) HEGO sensor.

      For example, current names for HEGO1 and HEGO2 sensors  are  now  HEGO11  and
      HEGO21.   Accordingly,  HEGO12  and  HEGO22 sensors are located downstream of
      catalysts for engine Bank1 and  Bank2  respectively  (downstream  HEGO12  and
      HEGO22 sensors are not available now for non-OBDII strategies).

      Strategy parameters (flags, timers, counters, etc.) which are associated with
      certain  HEGO sensor have the same designations as HEGO sensor.  For example,
      current flags EGOFL1 and EGOFL2 become EGOFL11 and EGOFL21.

      However, some strategy parameters which are not associated with engine  Bank1
      or   Bank2,   but   rather  associated  with  location,  have  only  location
      designation.   For  example,  HEGO  switch  point  for  upstream  HEGO's   is
      SWTPOINT1,  and  for  down-  stream  HEGO's  is  SWTPOINT2.   It is therefore
      important to remember that any HEGO parameters with single digit naming could
      be referring to a Bank or a location (up/downstream).  SWTPOINT1 refers to an
      upstream parameter, while LAMBSE1 refers to a Bank1 related parameter.



      DEFINITIONS

      INPUTS

      Registers:

       -  C171FIL = Lack of HEGO switch, adaptive fuel at limit fault filter.

       -  C172FIL = Lack of HEGO switch, HEGO indicates lean fault filter.

       -  C173FIL = Lack of HEGO switch, HEGO indicates rich fault filter.

       -  C175FIL = Lack of HEGO21 switch, adaptive fuel at limit fault filter.

       -  C176FIL = Lack of HEGO21 switch, HEGO indicates lean fault filter.

       -  C177FIL = Lack of HEGO21 switch, HEGO indicates rich fault filter.

       -  EGOCNT11 = Number of HEGO11 switches since HEGO11 sensor failed.

       -  EGOCNT21 = Number of HEGO21 switches since HEGO21 sensor failed.

       -  FPM = Fuel Pump Monitor.

       -  LAMBSE1 = Desired equivalence ratio for Bank1 injectors.



                                         7-5

                 FUEL STRATEGY, HEGO SENSOR INPUT PROCESSING - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  LAMBSE2 = Desired equivalence ratio for Bank2 injectors.

       -  LESTMR11 = Lack of HEGO11 switch timer, sec.

       -  LESTMR21 = Lack of HEGO21 switch timer, sec.

       -  NUMEGO = Switch indicating  number  of  upstream  HEGO  sensors  present;
          select mono or stereo.

       -  lam1_at_clip = Temporary clip flag LAMBSE1 (bank 1), 1 -> clip level  has
          been reached.

       -  lam2_at_clip = Temporary clip flag LAMBSE2 (bank 2), 1 -> clip level  has
          been reached.

      Bit Flags:

       -  CRKFLG = Engine mode flag; 1 -> in crank mode, 0 -> not in crank mode.

       -  EGOFL11 = Bank1 upstream HEGO flag.

       -  EGOFL21 = Bank2 upstream HEGO flag.

       -  EGO1FMFLG = Flag indicating there is an HEGO11 failure.

       -  EGO2FMFLG = Flag indicating there is an HEGO21 failure.  (for stereo HEGO
          systems only).

       -  LEGOFG11 = Lack of HEGO11 switching flag.

       -  LEGOFG21 = Lack of HEGO21 switching flag.

       -  OLFLG = Open loop flag; 1 -> open loop fuel, 0 -> closed loop fuel.

       -  STIFLG = Self Test Input (demultiplexed); 1 -> STI grounded.

       -  SWTFL11 = Bank1 upstream HEGO switch flag; 0 -> no HEGO11  switch,  1  ->
          HEGO11 switch.

       -  SWTFL21 = Bank2 upstream HEGO switch flag; 0 -> no HEGO21  switch,  1  ->
          HEGO21 switch.

      Calibration Constants:

       -  BYPLES1 = Time delay before lack of switch.

       -  C171LVL = Lack of HEGO  switch,  adaptive  fuel  at  limit  fault  filter
          threshold.

       -  C172LVL  =  Lack  of  HEGO  switch,  HEGO  indicates  lean  fault  filter
          threshold.

       -  C173LVL  =  Lack  of  HEGO  switch,  HEGO  indicates  rich  fault  filter
          threshold.

       -  C175LVL = Lack of HEGO21 switch, adaptive  fuel  at  limit  fault  filter
          threshold.



                                         7-6

                 FUEL STRATEGY, HEGO SENSOR INPUT PROCESSING - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  C176LVL = Lack of HEGO21  switch,  HEGO21  indicates  lean  fault  filter
          threshold.

       -  C177LVL = Lack of HEGO21  switch,  HEGO21  indicates  rich  fault  filter
          threshold.

       -  FILHYS = Hysteresis  term  to  prevent  spurious  exit  of  Failure  Mode
          strategy.

       -  FN021 = LOAD normalizing function for LTMTB1(LTMTB2).
                  Input = Load.
                  Output = Normalized Load.

       -  FN070 = N normalizing function.

       -  KAM_NO_RESET = Switch which indicates if KAM should be reset upon an HEGO
          failure; 1 -> do not reset KAM.

       -  LAMMAX = Minimum LAMBSE clip when in closed loop.

       -  LAMMIN = Minimum LAMBSE clip when in closed loop.







































                                         7-7

                 FUEL STRATEGY, HEGO SENSOR INPUT PROCESSING - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  CHKSUM = KAM memory word which contains the sum of the LTMTB1  or  LTMTB2
          contents.

       -  EGOCNT11 = See above.

       -  EGOCNT21 = See above.

       -  EGOCT11 = Number of HEGO11 switches since last adaptive fuel update.

       -  EGOCT21 = Number of HEGO21 switches since last adaptive fuel update.

       -  EGOSS11 = HEGO11 switches since start.

       -  EGOSS21 = HEGO21 switches since start.

       -  EGOSSS1 = Upstream HEGO switches since start.

       -  KWUCTR = KAM warm_up counter.  Stores number of warm_ups in  KAM.   Reset
          to zero if KAM is corrupted (due to disconnected battery, etc.)

       -  LTMTB1rc = HEGO11 Adaptive Fuel cell which corresponds to
                     r = Integer part of FN021 (LOAD) and
                     c = Integer part of FN070 (N).

       -  LTMTB2rc = HEGO21 Adaptive Fuel cell which corresponds to
                     r = Integer part of FN021 (LOAD) and
                     c = Integer part of FN070 (N).

       -  LESTMR11 = See above.

       -  LESTMR21 = See above.

      Bit Flags:

       -  EGOFL11 = See above.

       -  EGOFL21 = See above.

       -  EGO1FMFLG = See above.

       -  EGO2FMFLG = See above.

       -  LEGOFG11 = See above.

       -  LEGOFG21 = See above.

       -  LESFLG1 = Lack of HEGO switching flag; 1 -> HEGO is not switching,  0  ->
          HEGO is switching.








                                         7-8

                 FUEL STRATEGY, HEGO SENSOR INPUT PROCESSING - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: FUEL_INPUT_EGO_COM1



                  MULTIPLEXED INPUTS (HEGO21 + FPM) AND (HEGO11 + STI)


      There are two multiplexed inputs HEGO21 and FPM, and HEGO11 and STI.
      The HEGO inputs are analog while FPM and STI are digital.  Each input
      comes into the EECIV module on a separate pin and is combined with a second
      input via a resistor ladder.  The paired inputs are read by the analog
      to digital converter and represented as a value from 0 to 1023 counts.
      The strategy can de-multiplex the inputs because each combination of input
      states is represented as a range of count values.


      HARDWARE                                SOFTWARE
      =============================================================
      HEGOx1 = lean = 0 to ~0.45 volts         EGOFLx1 = 0 (clear)
      HEGOx1 = rich = ~0.45 to 1 volt          EGOFLx1 = 1 (set)
      ----------------------------------------------------------
      STI = open = 5 volts (in EEC module)    STIFLG = 0 (clear)
      STI = closed = 0 volts                  STIFLG = 1 (set)
      ----------------------------------------------------------
      FPM = on = 12 volts                     FPM = 1 (set)
      FPM = off = 0 volts                     FPM = 0 (clear)


      EGOFL11                        STIFLG
      ------------------------OR--------------
      EGOFL21         FPM                            MIN             MAX
      ==========================================================================
        0     |       1       |       0       |      856      |      1023
      --------------------------------------------------------------------------
        1     |       1       |       0       |      559      |       855
      --------------------------------------------------------------------------
        0     |       0       |       1       |      428      |       558
      --------------------------------------------------------------------------
        1     |       0       |       1       |       0       |       427
      --------------------------------------------------------------------------



















                                         7-9

                 FUEL STRATEGY, HEGO SENSOR INPUT PROCESSING - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      LAMBSE1 = LAMMAX ------------|
                                   |OR --| lam1_at_clip = 1
      LAMBSE1 = LAMMIN ------------|     |
                                         | --- ELSE ---
                                         |
                                         | lam1_at_clip = 0



         LESTMR11 - LACK OF HEGO11 SWITCHING TIMER (TIME SINCE LAST EGO SWITCH)


      lam1_at_clip = 0 ------------|
                                   |OR --| LESTMR11 = 0
      OLFLG = 1 -------------------|     |
                                         | --- ELSE ---
                                         |
                                         | Count up LESTMR11



      Additional logic associated with LESTMR11;

      SWTFL11 = 1 -----------------------| Increment EGOCNT11


      LESTMR11 >= BYPLES1 ---------------| LEGOFG11 = 1
                                         | EGOCNT11 = 0


      EGOCNT11 > 0 ----------------------| LEGOFG11 = 0



      Upstream HEGO11 counters:

      SWTFL11 = 1 -----------------|
                                   |AND -| Increment EGOSS11
      CRKFLG = 0 ------------------|     | Increment EGOSSS1
                                         | Increment EGOCT11
                                         |
                                         | --- ELSE ---
                                         |
                                         | Freeze Counters


      LEGOFG11 = 1  ---------|
                             |
      LEGOFG21 = 1 ----------|AND -|
                             |     |
      NUMEGO = 2 ------------|     |OR --| LESFLG1 = 1
                                   |     |  (HEGO is not switching)
      LEGOFG11 = 1 ----------|     |     |
                             |AND -|     |
      NUMEGO = 1 ------------|           |
                                         | --- ELSE ---
                                         |
                                         | LESFLG1 = 0
                                         |  (HEGO is switching)

                                         7-10

                 FUEL STRATEGY, HEGO SENSOR INPUT PROCESSING - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               Engine Bank2 HEGO21 sensor.


      NUMEGO = 2 ------------------------| Do: Bank2_HEGO
                                         | Do: FMEM_HEGO
                                         |
                                         | --- ELSE ---
                                         |
                                         | Do: FMEM_HEGO


      BEGIN: Bank2_HEGO

      LAMBSE2 = LAMMAX ------------|
                                   |OR --| lam2_at_clip = 1
      LAMBSE2 = LAMMIN ------------|     |
                                         | --- ELSE ---
                                         |
                                         | lam2_at_clip = 0


         LESTMR21 - LACK OF HEGO21 SWITCHING TIMER (TIME SINCE LAST EGO SWITCH)


      lam2_at_clip = 0 ------------|
                                   |OR --| LESTMR21 = 0
      OLFLG = 1 -------------------|     |
                                         | --- ELSE ---
                                         |
                                         | Count up LESTMR21






























                                         7-11

                 FUEL STRATEGY, HEGO SENSOR INPUT PROCESSING - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      CONTINUE: Bank2_HEGO



      Additional logic associated with LESTMR21.


      SWTFL21 = 1 -----------------------| Increment EGOCNT21


      LESTMR21 >= BYPLES1 ---------------| LEGOFG21 = 1
                                         | EGOCNT21 = 0


      EGOCNT21 > 0 ----------------------| LEGOFG21 = 0



      Upstream HEGO21 counters:


      SWTFL21 = 1 -----------------|     | Increment EGOSS21
                                   |AND -| Increment EGOSSS1
      CRKFLG = 0 ------------------|     | Increment EGOCT21
                                         |
                                         | --- ELSE ---
                                         |
                                         | Freeze Counters

      END: Bank2_HEGO






























                                         7-12

                 FUEL STRATEGY, HEGO SENSOR INPUT PROCESSING - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: FMEM_HEGO

      FMEM determination:


      C171FIL > C171LVL ----------------|
       (lack of HEGO11 sw,adapt at clip)|
                                        |
      C172FIL > C172LVL ----------------|OR --| EGO1FMFLG = 1
       (lack of HEGO11 sw, lean)        |     |
                                        |     |
      C173FIL > C173LVL ----------------|     |
       (lack of HEGO11 sw, rich)              |
                                              | --- ELSE ---
      C171FIL < C171LVL - FILHYS -------|     |
                                        |     |
      C172FIL < C172LVL - FILHYS -------|AND -| EGO1FMFLG = 0
                                        |
      C173FIL < C173LVL - FILHYS -------|


      For Stereo HEGO systems:

      NUMEGO = 2 -----------------------|
                                        |
      C175FIL > C175LVL ----------|     |AND -| EGO2FMFLG = 1
       (lack of HEGO21 sw,        |     |     |
        adapt at clip)            |     |     |
                                  |OR --|     |
      C176FIL > C176LVL ----------|           |
       (lack of HEGO21 sw, lean)  |           |
                                  |           |
      C177FIL > C177LVL ----------|           |
       (lack of HEGO21 sw, rich)              |
                                              | --- ELSE ---
      NUMEGO = 2 -----------------------|     |
                                        |     |
      C175FIL < C175LVL - FILHYS -|     |AND -| EGO2FMFLG = 0
                                  |     |
      C176FIL < C176LVL - FILHYS -|AND -|
                                  |
      C177FIL < C177LVL - FILHYS -|


      HEGO FMEM:

      EGO1FMFLG = 1 --------------------|
                                        |AND -| LTMTB1 = 0.5
      KAM_NO_RESET = 0 -----------------|     | KWUCTR = 0
                                              | CHKSUM = sum of adaptive fuel cells

      NUMEGO = 2 -----------------------|
                                        |
      EGO2FMFLG = 1 --------------------|AND -| LTMTB2 = 0.5
                                        |     | KWUCTR = 0
      KAM_NO_RESET = 0 -----------------|     | CHKSUM = sum of adaptive fuel cells

      END: FMEM_HEGO


                                         7-13

               FUEL STRATEGY, OUTPUT SHAFT SPEED LIMITER LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            OUTPUT SHAFT SPEED LIMITER LOGIC


      OVERVIEW

      The output shaft speed limiter  logic  protects  vehicle  function  in  three
      stages.

      These stages are shown below:

      1) Stage One:  Reduces the engine's power  output  in  a  gradual  manner  by
      enriching  the  fuel  and  retarding  the spark (See Open Loop Fuel and Spark
      Strategies).

      2) Stage Two:  Further reduces the engine output by disabling the outputs  to
      one-half  of the injector ports.  This action will occur only if the fuel and
      spark strategy in Stage One is ineffective.

      3) Stage Three:  Turns off all injector outputs.


      DEFINITIONS

      INPUTS

      Registers:

       -  NOBAR = Filtered output shaft speed, rpm.

      Bit Flags:

       -  FLG_4X4L = 4X4L Flag.

      Calibration Constants:

       -  HNO_CL = Disable stage 1 no speed limiter, rpm.

       -  HNO_4X4L_CL = Disable stage 1 no speed limiter in 4X4L, rpm.

       -  HNO_SH = Enable stage 1 no speed limiter, rpm.

       -  HNO_4X4L_SH = Enable stage 1 no speed limiter in 4X4L, rpm.

       -  NOMAX = Stage 3 Output Shaft speed limit.

       -  NOMAX_4X4L = Stage 3 Output Shaft speed limit in 4X4L.

       -  VHNO_CL = Disable stage 2 no speed limiter, rpm.

       -  VHNO_4X4L_CL = Disable stage 2 no speed limiter in 4X4L, rpm.

       -  VHNO_SH = Enable stage 2 no speed limiter, rpm.

       -  VHNO_4X4L_SH = Enable stage 2 no speed limiter in 4X4L, rpm.






                                         7-14

               FUEL STRATEGY, OUTPUT SHAFT SPEED LIMITER LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Bit Flags:

       -  FOFFLG2 = Stage 2 alternate fire VS exceeded.

       -  HSPFLG = High Speed Mode Flag; 1 -> High  Speed  Alt.   Fuel/Spark  Speed
          Limit.

       -  NLMT_FLG2 = Stage 3 no fuel VS exceeded.

       -  NO_LIM_STG1 = Stage 1 output shaft speed flag

       -  NO_LIM_STG2 = Stage 2 output shaft speed flag














































                                         7-15

               FUEL STRATEGY, OUTPUT SHAFT SPEED LIMITER LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: FUEL_NO_LIM_COM1


      FLG_4X4L = 0 ------------------------| vhno_sh = VHNO_SH
                                           | vhno_cl = VHNO_CL
                                           | hno_sh = HNO_SL
                                           | hno_cl = HNO_CL
                                           | nomax = NOMAX
                                           |
                                           | --- ELSE ---
                                           |
                                           | vhno_sh = VHNO_4X4L_SH
                                           | vhno_cl = VHNO_4X4L_CL
                                           | hno_sh = HNO_4X4L_SL
                                           | hno_cl = HNO_4X4L_CL
                                           | nomax = NOMAX_4X4L


      NOBAR > vhno_sh ---------------|S Q -| NO_LIM_STG2
       (very high speed)             |
                                     |
      NOBAR < vhno_cl ---------------|C



      NOBAR > hno_sh ----------------|S Q -| NO_LIM_STG1
       (high speed)                  |
                                     |
      NOBAR < hno_cl ----------------|C



      NOBAR > nomax -----------------------| STAGE 3
                                           | (Turn off all injectors)
                                           | NLMT_FLG2 = 1
                                           |
                                           | --- ELSE ---
                                           |
      NO_LIM_STG2 = 1 ---------------------| STAGE 2
                                           | (Fire alternate injectors
                                           |  using normal fuel strategy)
                                           | FOFFLG2 = 1
                                           | HSPFLG = 0
                                           | NLMT_FLG2 = 0
                                           |
                                           | --- ELSE ---
                                           |
      NO_LIM_STG1 = 1 ---------------------| STAGE 1
                                           | (Do fuel enrichment and spark
                                           |  retard)
                                           | FOFFLG2 = 0
                                           | HSPFLG = 1
                                           | NLMT_FLG2 = 0

                                (continued on next page)




                                         7-16

               FUEL STRATEGY, OUTPUT SHAFT SPEED LIMITER LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

                                           | --- ELSE ---
                                           |
                                           | FOFFLG2 = 0
                                           | HSPFLG = 0
                                           | NLMT_FLG2 = 0





















































                                         7-17

                        FUEL STRATEGY, WARM EGO LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                     WARM EGO LOGIC


      OVERVIEW 

      The Warm HEGO Logic determines if the HEGO sensor is  warm  enough  to  enter
      Closed Loop control.  Time since start-up and coolant temperature at start-up
      are used to determine if the sensor is warm.  The output from  the  logic  is
      the flag, 'WRMEGO'.



      DEFINITIONS

      INPUTS

      Registers:

       -  ATMR1 = Time since start (time since exiting crank mode), sec.

       -  ATMR2 = Time since ECT became greater than TEMPFB, sec.

       -  ATMR4 = Time since reaching ECTSTABL, sec.

       -  ECT = Engine coolant temperature, deg F.

       -  TCSTRT = Temperature of ECT at Cold Startup, deg F.

      Bit Flags:

       -  CRKFLG = Engine Mode Flag; 1 -> Crank Mode, 0 -> not in Crank Mode.

       -  FLG_STABLECT = ATMR4 flip flop flag; 1 -> output enabled.

      Calibration Constants:

       -  CTHIGH = Hot Start Minimum Engine coolant Temperature, deg F.

       -  CTLOW = Cold Start Maximum ECT, deg F.

       -  ECTSTABL = Minimum ECT for stabilized Open Loop fuel table, deg F.

       -  ECTSTABLTIM = Minimum time above ECTSTABL to use FN1360.

       -  ECTSTHYS = Hysteresis for ECTSTABL.

       -  OPCLT1 = ATMR1 Closed Loop enable time delay for TCSTRT <= CTLOW.

       -  OPCLT2 = ATMR1 Closed Loop enable time delay for CTLOW < TCSTRT < CTHIGH.

       -  OPCLT3 = ATMR1 Closed Loop Enable Time delay for TCSTRT >= CTHIGH.

       -  OPCLT4 = ATMR2 Closed Loop enable time delay for TCSTRT <= CTLOW.

       -  OPCLT5 = ATMR2 Closed Loop Enable Time Delay for CTLOW < TCSTRT < CTHIGH.





                                         7-18

                        FUEL STRATEGY, WARM EGO LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  ATMR4 = See above.

      Bit Flags:

       -  FLG_ECTSTABLQ = ECT stabilized flag; 1 -> ECT stabilized, use FN1360.

       -  FLG_STABLECT = See above.

       -  WRMEGO = HEGO sensor should be warm flag.















































                                         7-19

                        FUEL STRATEGY, WARM EGO LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: FUEL_WRMEGO_COM1


      TCSTRT >= CTHIGH ------------|
                                   |AND -|
      ATMR1 >= OPCLT3 -------------|     |
                                         |
      CTLOW < TCSTRT < CTHIGH -----|     |
                                   |AND -|OR --| WRMEGO = 1
      ATMR1 >= OPCLT2 -------|     |     |     |
                             |AND -|     |     |
      ATMR2 >= OPCLT5 -------|           |     |
                                         |     |
      TCSTRT <= CTLOW -------------|     |     |
                                   |AND -|     |
      ATMR1 >= OPCLT1 -------|     |           |
                             |AND -|           |
      ATMR2 >= OPCLT4 -------|                 |
                                               | --- ELSE ---
                                               | 
                                               | WRMEGO = 0






































                                         7-20

                        FUEL STRATEGY, WARM EGO LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      CRKFLG = 0 ------------------|                            
                                   |AND -|S Q -| FLG_STABLECT                   
      ECT >= ECTSTABL -------------|     |                        
                                         |                        
      ECT < ECTSTABL - ECTSTHYS ---|     |                        
                                   |OR --|C                       
      CRKFLG = 1 ------------------|                              


      FLG_STABLECT = 1 ------------------| Increment ATMR4    
                                         |                    
                                         |  --- ELSE ---      
                                         |                    
                                         | ATMR4 = 0     



      ATMR4 > ECTSTABLTIM ---------------| FLG_ECTSTABLQ = 1
                                         |  (ECT stabilized)
                                         |
                                         | --- ELSE ---
                                         |
                                         | FLG_ECTSTABLQ = 0
                                         |  (cold engine)




































                                         7-21

                  FUEL STRATEGY, LUGGING MODE DETERMINATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               LUGGING MODE DETERMINATION


      OVERVIEW 

      The strategy provides the capacity of Open Loop Fuel Control during "lugging"
      conditions; lugging usually occurs at part throttle, high load, and low rpm.

      The "lugging" open loop multiplier is adjusted for altitude through  the  use
      of FN212A and FN129A.

      CALIBRATION NOTES: 
           1.  LDMH and LDMHH should correspond to high loads (near WOT). 
           2.  LDLTM must be less than or equal to LUGTIM (since LUGTMR is 
               clipped to LUGTIM).

      DEFINITIONS

      INPUTS

      Registers:

       -  APT = At Part Throttle; -1 -> Closed throttle, 0 -> Part throttle,  1  ->
          Wide Open throttle.

       -  ECT = Engine Coolant Temperature, deg.  F.

       -  PERLOAD = Percent of Peak LOAD at any altitude, unitless.

      Bit Flags:

       -  WRMEGO = Ego sensor should be warm flag.

      Calibration Constants:

       -  LDEL = Minimum ECT to enable Lugging Open Loop, deg.  F.

       -  LDEH = Maximum ECT to enable Lugging Open Loop, deg.F.

       -  LDMH = Minimum PERLOAD to enable Lugging Open Loop (near W.O.T.).

       -  LDMHH = Hysteresis for LDMH.

       -  LDLTM = Minimum time in lugging mode before forcing open loop, sec.



      OUTPUTS

      Bit Flags:

       -  LDFLG = Lugging Mode Flag; 1 -> Lugging Mode, 0 -> Not in Lugging Mode.








                                         7-22

                  FUEL STRATEGY, LUGGING MODE DETERMINATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS

                          STRATEGY MODULE:  FUEL_LUG_MODE_COM1


      APT = 0 ------------------------------|
       (part throttle)                      |
                                            |
      LDEL < ECT < LDEH --------------------|
                                            |
      LUGTMR >= LDLTM ----------------------|AND ---| LDFLG = 1
                                            |       |
      PERLOAD >= LDMH + LDMHH ---|S Q-------|       | --- ELSE ---
                                 |          |       |
      PERLOAD < LDMH ------------|C         |       | LDFLG = 0
                                            |
      WRMEGO = 1 ---------------------------|











































                                         7-23

                      FUEL STRATEGY, LAMMUL RESET LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   LAMMUL RESET LOGIC


      OVERVIEW

      This module calculates the parameter, LAMMUL. LAMMUL is used to prevent
      cold engine stalls following transmission engagement.


      DEFINITIONS 

      INPUTS 

      Registers: 

       -  ALT_CAL_FLG = Alternate calibration flag; 1 -> Alternate calibration is
          used
          for spark plug fouling prevention.

       -  MULTMR = Time since incrementing LAMMUL, sec. 

       -  REVFLG = Reverse engagement flag; 1 -> reverse, 0 -> drive.

      Bit Flags: 

       -  DNDSUP = Delayed Neutral/Drive flag; 0 -> neutral, 1 -> drive. 

       -  NEUFLG = N/D transition occurred. 

      Calibration Constants: 

       -  FN371 = Initial LAMMUL as a function of ECT. This is a Fuel Multiplier to
          provide fuel compensation during Drive Engagement. 

       -  FN371_ALT = FN371 which is used during alternate calibration for spark
          plug
          fouling prevention.

       -  FN393F = Time between LAMMUL decrements - forward gear. 

       -  FN393R = Time between LAMMUL changes - reverse gear.

       -  TRLOAD = Transmission Load switch; 
                   0 -> Manual Transmission, no clutch or gear switches, 
                        forced neutral state (NDSFLG = 0). 
                   1 -> Manual Transmission, no clutch or gear switch. 
                   2 -> Manual Transmission, one clutch or gear switch. 
                   3 -> Manual Transmission, both clutch and gear switches. 
                   4 -> Auto Transmission, non-electronic, neutral drive switch. 
                   5 -> Auto Transmission, non-electronic, neutral pressure switch,
                        (AXOD). 
                   6 -> Auto Transmission, electronic, PRNDL sensor - park, 
                        reverse, neutral, overdrive, manual 1, manual 2. 







                                         7-24

                      FUEL STRATEGY, LAMMUL RESET LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS 

      Registers: 

       -  LAMMUL = Multiplier which is used to prevent cold-engine stalls following
          transmission engagement. 

       -  MULTMR = See above.

      Bit Flags: 

       -  NEUFLG = See above.



      PROCESS
                           STRATEGY MODULE:  FUEL_LAMMUL_COM4


      ALT_CAL_FLG = 1 ---------------------------| fn371 = FN371_ALT(ECT)
                                                 |
                                                 | --- ELSE ---
                                                 |
                                                 | fn371 = FN371(ECT)



      TRLOAD <= 3 -------------------------------| No LAMMUL RESET
       (Manual Transmission)                     | No change to LAMMUL
                                                 | No change to NEUFLG
                                                 |
                                                 | --- ELSE ---
      DNDSUP = 1 --------------------------|     |
       (Transmission in gear)              |AND -| LAMMUL RESET
                                           |     | LAMMUL = fn371
      NEUFLG = 1 --------------------------|     | NEUFLG = 0
       (Transition from neutral)                 |
                                                 | --- ELSE ---
                                                 |
      DNDSUP = 0 --------------------------------| NEUFLG = 1   
       (Transmission in neutral)


      NOTE:  LAMMUL, FN371_ALT, and FN371 have a range  of  0  through  1.99.   The
      LAMMUL  Reset  logic is done both in open loop and closed loop fuel.  LAMMUL,
      however, is only applied in open loop fuel.



      LAMMUL can either jump lean (ramp rich) or jump rich (ramp  lean),  depending
      upon  whether  neutral  to drive transitions cause rich or lean errors.  This
      logic is done both in open loop and closed loop fuel.








                                         7-25

                      FUEL STRATEGY, LAMMUL RESET LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                     RAMP BACK LOGIC


      REVFLG = 1 --------------|
                               |AND -|
      MULTMR >= FN393R --------|     |
       (in reverse)                  |OR --|           
                                     |     |     
      REVFLG = 0 --------------|     |     |     
                               |AND -|     |        (LAMMUL was RESET RICH)
      MULTMR >= FN393F --------|           |AND -| LAMMUL = LAMMUL + 0.0039
       (in forward)                        |     | MULTMR = 0
                                           |     | Clip LAMMUL to
      LAMMUL < 1.0 ------------------------|     | 1.0 as a maximum 
                                                 | 
                                                 | --- ELSE ---
      REVFLG = 1 --------------|                 |
                               |AND -|           |
      MULTMR >= FN393R --------|     |           |
       (in reverse)                  |OR --|     |
                                     |     |     |
      REVFLG = 0 --------------|     |     |     |
                               |AND -|     |     | (LAMMUL was RESET LEAN) 
      MULTMR >= FN393F --------|           |AND -| LAMMUL = LAMMUL - 0.0039   
       (in forward)                        |     | MULTMR = 0 
                                           |     | Clip LAMMUL to
      LAMMUL > 1.0 ------------------------|     | 1.0 as a minimum

































                                         7-26

                 FUEL STRATEGY, OPEN LOOP FLAG DETERMINATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                        OPEN LOOP/CLOSED LOOP FUEL DETERMINATION


      OVERVIEW

      This module determines the state of the desired open loop flag, OL_DESIRED.



      DEFINITIONS

      INPUTS

      Registers:

       -  CTNTMR = Closed throttle neutral timer.

       -  CTTMR = Time since entering Closed throttle mode, secs.  CTTMR is used to
          delay Decel Fuel Shutoff (DFSO).

       -  IDLTMR = Time at idle in drive, sec.

       -  N = Engine revolutions, rpm.

       -  OLTMR = Open loop delay timer, sec.

       -  LOAD = Universal Load parameter, unitless; aircharge  normalized  to  Sea
          Level.

       -  PERLOAD = Percent of Peak LOAD at any altitude, unitless.

       -  PPCTR = Number of PIP's since exiting Decel Fuel Shutoff.

       -  VSBAR = Vehicle speed, mph.

      Bit Flags:

       -  CHKAIR = Thermactor Status flag; 0 -> Forced open loop, 1 ->  not  forced
          open loop.

       -  CTNFLG = 1 -> Closed throttle neutral idle.

       -  DNDSUP = Delayed Neutral/Drive flag; 0 -> neutral, 1 -> drive.

       -  FL_OLTMR_337 = Flip flop flag for FN337.

       -  FL_OLTMR_338 = Flip flop flag for FN337.

       -  FL_OLTMR_VSBAR = Flip flop flag for DCEVS.

       -  FLG_ECTSTABLQ = ECT stabilized flag; 1 -> ECT stabilized, use FN1360.

       -  FLG_OL_320A = Open loop due to FN320A, cold crowd enrichment.

       -  FLG_OL_337 = Open loop due to FN337, hot stabilized crowd enrichment.

       -  FLG_OL_338 = Open loop due to FN338, decel.



                                         7-27

                 FUEL STRATEGY, OPEN LOOP FLAG DETERMINATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FLG_OL_VS = Open loop due to high vehicle speed.

       -  HALF_FUEL = Flag which indicates alternate injections are to be cut  out;
          1 -> Half Fuel.

       -  HSPFLG = High Speed Mode Flag; 1 -> High speed alternate Fuel/Spark.

       -  LDFLG = Lugging Mode flag; 1 -> Lugging mode.

       -  NO_FUEL = Flag which indicates all injectors are to be cut out; 1  ->  No
          Fuel.

       -  WRMEGO = If set, EGO sensor should be warm and  flag  set  to  1  if  EGO
          sensor  is switching; and reset to 0 if it has cooled down.  Its state is
          controlled by the WRMEGO logic.

      Calibration Constants:

       -  DCEVS = Minimum vehicle speed to do Decel Combustion Enrichment.

       -  DCEVSH = Hysteresis for DCEVS.

       -  DCECTTM =  Minimum  time  at  closed  throttle  to  do  Decel  Combustion
          Enrichment.

       -  FN320A(ECT) = Minimum  PERLOAD  required  for  Open  Loop  fuel  control,
          unitless.

       -  FN337(N) = Minimum PERLOAD required for Open Loop Fuel, unitless.

       -  FN338(N) = Maximum LOAD required for Open Loop decels.

       -  HLDTM1 = Open loop time delay for FN320A(ECT), sec.

       -  HLDTM2 = Open loop time delay for FN337(N), sec.

       -  HLODH = Hysteresis term for FN320A(ECT) and FN337(N), unitless.

       -  LLDTM = Open loop time delay for FN338(N), sec.

       -  LOLODH = Closed Loop Enable LOAD hysteresis for FN338(N), unitless.

       -  NIOLD = Maximum time to allow closed loop fuel if  in  neutral  at  idle,
          secs.

       -  OLITD1 = Time allowed at idle before entering open loop.

       -  PIPNUM = Number of PIPs for DFSO exit fuel ramp.

       -  VS_OL_CL =  Maximum  vehicle  speed  to  allow  entry  into  closed  loop
          calculation.

       -  VS_OL_SH = Minimum vehicle speed to force open loop lambda calculation.







                                         7-28

                 FUEL STRATEGY, OPEN LOOP FLAG DETERMINATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:


       -  OLTMR = See above.

      Bit Flags:

       -  FL_OLTMR_337 = See above.

       -  FL_OLTMR_338 = See above.

       -  FL_OLTMR_VSBAR = See above.

       -  FLG_OL_320A = See above.

       -  FLG_OL_337 = See above.

       -  FLG_OL_338 = See above.

       -  FLG_OL_VS = See above.

       -  OL_DESIRED = Open loop desired flag; 1 -> open loop desired, 0 ->  closed
          loop desired.



































                                         7-29

                 FUEL STRATEGY, OPEN LOOP FLAG DETERMINATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: FUEL_OLFLG_COM2


      FLG_OL_320A = 1 -------------|
                                   |AND -|
      OLTMR >= HLDTM1 -------------|     |
                                         |
      FLG_OL_337 = 1 --------------|     |
                                   |AND -|
      OLTMR >= HLDTM2 -------------|     |
                                         |
      FLG_OL_338 = 1 --------------|     |
                                   |AND -|
      OLTMR >= LLDTM --------------|     |
                                         |
      APT = 1 ---------------------------|OR --| Open Loop Fuel desired.
       (wide open throttle)              |     | OL_DESIRED = 1
                                         |     |
      WRMEGO = 0 ------------------------|     |
       (Cold EGO sensor)                 |     | 
                                         |     | 
      PPCTR < PIPNUM --------------------|     |
       (Decel Fuel Shutoff)              |     |
                                         |     |
      CTNTMR > NIOLD --------------|     |     |
       (Neutral idle)              |AND -|     |
                                   |     |     |
      CTNFLG = 1 ------------------|     |     |
                                         |     |
      IDLTMR > OLITD1 -------------------|     |
       (Drive idle)                      |     |
                                         |     |
      CHKAIR = 0 ------------------------|     |
       (Thermactor Open Loop)            |     |
                                         |     |
      HSPFLG = 1 ------------------------|     |
       (High vehicle speed limiting)     |     |
                                         |     |
      HALF_FUEL = 1 ---------------------|     |
       (alternate injections cut-out)    |     |
                                         |     |
      NO_FUEL = 1 -----------------------|     |
       (all injectors cut-out)           |     |
                                         |     |
      LDFLG = 1 -------------------------|     |
       (Lugging mode)                    |     |
                                         |     |
      FLG_OL_VS = 1 ---------------------|     |
                                               | --- ELSE ---
                                               |
                                               | Closed Loop Fuel desired.
                                               | OL_DESIRED = 0







                                         7-30

                 FUEL STRATEGY, OPEN LOOP FLAG DETERMINATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OLTMR - OPEN LOOP TIMER  (0.125 sec resolution)


      OLTMR delays Open Loop fuel control during short transients.  This is helpful
      during manual transmission shifts or other fast throttle movements.


      PERLOAD >= FN320A(ECT) ------------|S Q -| FLG_OL_320A
       (Cold crowd enrichment)           |                      
                                         |                      
      PERLOAD < FN320A - HLODH ----------|C                     


      PERLOAD >= FN337(N) ---------------|S Q -| FL_OLTMR_337
       (Stabilized crowd                 |                            
        enrichment)                      |                            
                                         |                            
      PERLOAD < FN337 - HLODH -----------|C                           


      FL_OLTMR_337 = 1 ------------------|                      
                                         |AND -| FLG_OL_337 = 1 
      FLG_ECTSTABLQ = 1 -----------------|     |
                                               | --- ELSE --- 
                                               | 
                                               | FLG_OL_337 = 0 


      LOAD <= FN338(N) ------------------|S Q -| FL_OLTMR_338
       (Decel load)                      |
                                         |
      LOAD > FN338 + LOLODH -------------|C


      VSBAR >= DCEVS --------------------|S Q -| FL_OLTMR_VSBAR
                                         |
      VSBAR < DCEVS - DCEVSH ------------|C


      FL_OLTMR_338 = 1 ------------------|
                                         |
      CTTMR >= DCECTTM ------------------|AND -| FLG_OL_338 = 1
                                         |     |
      FL_OLTMR_VSBAR = 1 ----------------|     |
                                               | --- ELSE ---
                                               |
                                               | FLG_OL_338 = 0


      FLG_OL_320A = 1 -------------------|
                                         |
      FLG_OL_337 = 1 --------------------|OR --| Increment OLTMR
                                         |     |
      FLG_OL_338 = 1 --------------------|     |
                                               | --- ELSE ---
                                               |
                                               | OLTMR = 0



                                         7-31

                 FUEL STRATEGY, OPEN LOOP FLAG DETERMINATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Determine the state of forced open loop based on vehicle speed flag.


      VSBAR > VS_OL_SH ------------------|S Q -| FLG_OL_VS
                                         |
      VSBAR < VS_OL_CL ------------------|C






















































                                         7-32

                     FUEL STRATEGY, CALCULATION OF LAMAVE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  CALCULATION OF LAMAVE


      OVERVIEW

      This module calculates the  LAMBSE  average  to  be  used  in  Self  Test  to
      determine if the adaptive tables have reached their clip.

      The LAMBSE average, LAMAVE1/LAMAVE2,  is  only  calculated  in  Closed  Loop.
      Also,  it  requires  at least two HEGO switches after entering Closed Loop to
      calculate an average.


      DEFINITIONS

      Registers:

       -  LAMBSE1 = Desired equivalence ratio for HEGO11 injectors.

       -  LAMBSE2 = Desired equivalence ratio for HEGO21 injectors.

       -  LAM_OLD1 = Value of LAMBSE1 the last time HEGO11 switched.

       -  LAM_OLD2 = Value of LAMBSE2 the last time HEGO21 switched.

      Bit Flags:

       -  OLFLG = Open Loop Fuel flag; 1 -> open loop, 0 -> closed loop possible.

       -  SWTFL11 = Bank1 upstream HEGO11 switch flag; 0 -> no HEGO11 switch, 1  ->
          sensor HEGO11 switch.

       -  SWTF211 = Bank1 upstream HEGO21 switch flag; 0 -> no HEGO21 switch, 1  ->
          sensor HEGO21 switch.



      OUTPUTS

      Registers:

       -  LAMAVE1 = Average of LAMBSE1;  averages  the  value  of  LAMBSE1  at  the
          current HEGO11 switch and last HEGO11 switch.

       -  LAMAVE2 = Average of LAMBSE2;  averages  the  value  of  LAMBSE2  at  the
          current HEGO21 switch and last HEGO21 switch.

       -  LAM_OLD1 = See above.

       -  LAM_OLD2 = See above.










                                         7-33

                     FUEL STRATEGY, CALCULATION OF LAMAVE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: FUEL_LAMAVE_COM1


      OLFLG = 1 -----------------------------| LAM_OLD1 = 0
                                             | LAM_OLD2 = 0
                                             | LAMAVE1 = 1.0
                                             | LAMAVE2 = 1.0
                                             | 
                                             | Exit FUEL_LAMAVE_COM1 module



      SWTFL11 = 1 ---------------------|
        (HEGO11 switch)                |
                                       |AND -| LAM_OLD1 = LAMBSE1
      OLFLG = 0 -----------------------|     |  (not enough HEGO switches 
                                       |     |   since going Closed Loop  
      LAM_OLD1 = 0 --------------------|     |   to calculate LAMAVE1)
                                             | 
                                             | --- ELSE ---
      SWTFL11 = 1 ---------------------|     | 
        (HEGO11 switch)                |AND -| LAMAVE1 = (LAM_OLD1 + LAMBSE1) / 2
                                       |     | LAM_OLD1 = LAMBSE1
      OLFLG = 0 -----------------------|     |  (update LAM_OLD1 for next time)
                                         



      SWTFL21 = 1 ---------------------|
        (HEGO21 switch)                |
                                       |AND -| LAM_OLD2 = LAMBSE2
      OLFLG = 0 -----------------------|     |  (not enough EGO switches 
                                       |     |   since going Closed Loop 
      LAM_OLD2 = 0 --------------------|     |   to calculate LAMAVE2)
                                             |
                                             | --- ELSE ---
      SWTFL21 = 1 ---------------------|     |
        (HEGO21 switch)                |AND -| LAMAVE2 = (LAM_OLD2 + LAMBSE2) / 2
                                       |     | LAM_OLD2 = LAMBSE2
      OLFLG = 0 -----------------------|     |  (update LAM_OLD2 for next time)
                                         

      NOTE:  LAMAVE1 and LAMAVE2 are initialized to 1.0, and LAM_OLD1 and  LAM_OLD2
      are initialized to 0.0.















                                         7-34

                 FUEL STRATEGY, OPEN LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                     OPEN LOOP/CLOSED LOOP FUEL STATE DETERMINATION
                              OPEN LOOP LAMBSE CALCULATION


      OVERVIEW

      The purpose of the Open Loop Lambse Calculation  is  to  schedule  a  desired
      equivalence  ratio  (lambda  value)  when  engine operating conditions either
      prevent the use of the HEGO sensor or stoich operation is not appropriate.

      Due  to  the  current  design  of  the  HEGO  sensor,  only  operation  about
      stoichiometry  can  be utilized.  In the future, Universal HEGOs will be able
      to provide feedback at points either rich or lean  of  stoich.   Closed  loop
      operation  is  also  required  for adaptive fuel to "learn" the variabilities
      associated with production tolerances of airflow measuring and fuel  metering
      devices.  Given, however, that closed loop fuel is not always the appropriate
      mode of operation, the open loop logic performs two functions:

      1.  To determine whether open loop fuel is appropriate. 
      2.  To schedule the optimum equivalence ratio (LAMBSE). 


      Optimum Air/Fuel (A/F) ratio at any given engine  speed-load  is  that  which
      will  develop the required torque with the lowest fuel consumption consistent
      with smooth reliable operation.  This optimum A/F ratio is not  constant  but
      depends  on  many  factors.   The proper A/F ratio for each particular set of
      operating conditions is most  conveniently  viewed  under  the  two  headings
      stabilized  and  cold engine/startup.  Stabilized is taken to mean continuous
      operation with normal  engine  temperatures.   Cold  engine/startup  includes
      starting and warming up or when the HEGO sensor is not ready to switch.


      Notes on Cold/Start-up Open Loop Fuel:

      A.  Entry conditions:

       -  WRMEGO = 0, HEGO sensor may not be ready to switch or,
       -  ECT < ECTSTABL, engine coolant temperature too cold and OL_DESIRED = 1;
          standard open loop conditions met. 


      B.  Fuel scheduling:

       -  Fuel may be scheduled as a function of load, temperature and time since
          start. 















                                         7-35

                 FUEL STRATEGY, OPEN LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Notes on Stabilized Engine Open Loop Fuel:

      A.  Mixture conditions:

      Mixture requirements for lowest fuel consumption can generally be  adequately
      described  as a function of engine load which for purposes of this discussion
      will be defined as the ratio of aircharge to standard aircharge.


      Idle, extremely light loads or deceleration - 

      No useful work is being done at idle other than driving accessory loads, i.e.
      brake torque is zero.  The lowest fuel consumption is that A/F which provides
      steady, reliable cylinder firing.  Extremely light loads or  decels  at  high
      RPMs  may  require  A/F scheduling.  This is because the mass of residual gas
      tends to be constant, therefore,  at  closed  throttle/slight  part  throttle
      decels, the percentage of residual diluting the fresh charge increases, hence
      the need to richen the incoming charge.


      Medium loads, typical part throttle operation at road load - 

      Best economy is around 18:1 A/F ratio, however, this may  lead  to  excessive
      highway  NOx  levels.   Also,  current  catalyst  technology makes use of the
      closed loop fuel limit cycle to maximize conversion efficiency.  This, closed
      loop  fuel  operation  is  desirable  from both an adaptive fuel and catalyst
      efficiency standpoint.


      Full load, typical W.O.T. operation -

      A rich A/F ratio is required to maximize the  torque  output  of  the  engine
      during  periods  of  high driver demand.  Maximum torque output is about 13:1
      A/F ratio (LBT).  Best fuel economy is sacrificed in return for higher torque
      output.


      Best economy at a given load is independant of RPM at least down to idle type
      loads,  under conditions at which fuel distribution is good.  Departures from
      best fuel economy may be required due to the following:

            .  Poor distribution (usually a function of TP and RPM).

            .  To reduce temperature of hot spots such as exhaust 
               valves, spark plug points or piston crowns - that is, 
               to assist cooling.














                                         7-36

                 FUEL STRATEGY, OPEN LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      B.  Entry Conditions:

       -  WRMEGO = 1 - engine coolant hot and engine is stabilized, HEGO sensor  is
          ready to switch.
       -  High Load enrichment required - scheduled as a  function  of  speed/load.
          An  open  loop  delay  time is provided to prevent unnecessary enrichment
          during high load spikes such as during shifts.  A second enrichment timer
          provides  the  ability  to  schedule  fuel  as  a function of time in the
          enrichment mode to enhance durability in heavy truck applications.
       -  Decel loads - either enrichment or  enleanment  can  be  scheduled  as  a
          function of speed/load.
       -  Extended idle - the ability  to  go  open  loop  for  idle  stability  is
          provided as a function of time at idle.
       -  W.O.T.  mode - open loop is automatically scheduled as a function of wide
          open throttle mode.
       -  CHKAIR = 0 - thermactor air control can put upstream air into the exhaust
          manifold  ahead  of the HEGO sensor causing the HEGO to always read lean.
          Open loop is therefore required.
       -  Lack of HEGO switching requires the scheduling of open loop operation.
       -  Decel Fuel Shutoff is an open loop state.



      C.  Fuel Scheduling:

       -  Fuel may be scheduled as a function of load, RPM, temperature and time at
          high load.


      D.  Special Cases:  Separate and distinct logic is  provided  for  open  loop
      entry for the following special conditions:

       -  Lugging mode - a high load, low RPM region forced by the operation of the
          AOD transmission in its full torque overdrive mode.
       -  High Vehicle Speed Limiting  mode  -  a  spark  retard,  fuel  enrichment
          strategy used as a first stage in limiting vehicle speed.




      DEFINITIONS

      INPUTS

      Registers:

       -  ACT = Air charge temperature, deg F. 

       -  APT = At Part Throttle; -1 -> Closed throttle, 0 -> Part throttle, 
          1 -> Wide Open throttle. 

       -  ATMR1 = Time since start (time since exiting crank mode), sec.

       -  BP = Barometric Pressure, " Hg.

       -  ECT = Engine Coolant Temperature, used in calculation of input to FN022A.




                                         7-37

                 FUEL STRATEGY, OPEN LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  EGOSSS1 = HEGO switches since start.

       -  LAMBSE2 = Desired  equivalence  ratio  for  Bank  2  injectors.   LAMBSE2
          appears in the fuel pulsewidth equation for HEGO21.

       -  LAMMUL = Multiplier which is used to prevent cold-engine stalls following
          transmission engagement.

       -  LOAD = Universal Load parameter, unitless; aircharge  normalized  to  Sea
          Level.

       -  VS_RATE = Filtered vehicle acceleration rate.

       -  N = Engine revolutions, rpm.

       -  PERLOAD = Percent of peak LOAD at any altitude.

       -  PPCTR = Number of PIP's since exiting Decel Fuel Shutoff.

       -  TCSTRT = Temperature of ECT at Cold Start, deg F.

       -  VSBAR = Filtered vehicle speed.

      Bit Flags:

       -  ALT_CAL_FLG = Flag to indicate use of alternate calibration.

       -  DNDSUP = Delayed Neutral/Drive flag; 0 -> neutral, 1 -> drive.

       -  FLG_ECTSTABLQ = ECT stabilized flag; 1 -> ECT stabilized, 0 -> ECT cold.

       -  HALF_FUEL = Flag which indicates one half of the injectors are cut out; 1
          -> half_fuel mode.

       -  HSPFLG = High speed mode flag; 1 -> High Speed alternate fuel/spark.

       -  LDFLG = "Lugging" mode open loop flag; 1 -> lugging mode.

       -  LESFLG1 = Lack of HEGO switching flag; 1 -> HEGO is not switching,  0  ->
          HEGO is switching.

       -  OL_DESIRED = Open Loop Desired Flag; 1 -> Open Loop desired, 0 ->  Closed
          Loop desired.

       -  RUNNING = Flag which indicates that idle speed  is  being  controlled  by
          Engine  Running  VIP;  1  ->  in  Engine  Running VIP, 0 -> not in Engine
          Running VIP.

       -  V_MODE_SETUP = VIP throttle Adjust Mode enable flag; 1 -> enable.

       -  WRMEGO = If set; HEGO sensor should be warm and flag set  to  1  if  HEGO
          sensor  is switching, and reset to 0 if it has cooled down.  Its state is
          controlled by the WRMEGO logic.







                                         7-38

                 FUEL STRATEGY, OPEN LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  CTHIN = Maximum TCSTRT value to use NUMPR.

       -  CTLOW = Cold Start Maximum ECT, deg F.

       -  DFSLAM = Relative lambse value to exit decel fuel shutoff.

       -  EGOCL1 = Number of HEGO switches since start required to set WRMEGO = 1.

       -  FN022B = Temperature normalizing function; used for table lookup.
                   Input = FRCBFT *ACT + (1-FRCBFT) * ECT 
                          --OR--
                   Input = FRCSFT * ACT + (1-FRCSFT) * ECT

       -  FN072A = PERLOAD normalizing function; used for table lookup. 
                   Input = PERLOAD.
                   Output = Normalized perload. 

       -  FN129A(BP) = Multiplier to FN309 to compensate for altitude.

       -  FN212A(BP) = Multiplier to FN308 to compensate for altitude.

       -  FN300 = Multiplier as a function of ACT, modifies FN1360.

       -  FN301 = Closed Throttle Open Loop multiplier.

       -  FN303 = WOT Fuel Multiplier as a function of engine speed N.

       -  FN308 = Sea level fuel multiplier, RPM.

       -  FN309 = Altitude lugging fuel multiplier, RPM.

       -  FN325 = Multiplier as a function of ECT for FN1360.

       -  FN396A = High Speed Fuel enrichment, mph.

       -  FN1360 = Stabilized Open Loop Fuel Table = an 8  X  10  table  of  lambda
          values as a function of engine speed N, and PERLOAD.
                   X = Normalizing function for N - FN070B 
                   Y = Normalizing function for PERLOAD - FN072B 

       -  FN1361 = Startup Open Loop Fuel Table = a 8 x 10 table of lambda values
          as a function of [FRCSFT*ACT + (1 - FRCSFT)*ECT] and ATMR1. TABSFT is the
          Synonym for this Table. 
                   X = Temperature normalizing function - FN022B. 
                   Y = Time (ATMR1) normalizing function - FN018.

       -  FN1362 = Base Open Loop Fuel table = a 10 x 8 table of lambda values as a
          function of [FRCBFT*ACT + (1 - FRCBFT)*ECT] and PERLOAD. TABBFT is the
          Synonym for this Table. 
                   X = Temperature normalizing function - FN022B.
                   Y = PERLOAD normalizing function - FN072A.

       -  FN1362_ALT = Alternate FN1362 used when ALT_CAL_FLG = 1.

       -  FRCBFT = Act fraction for FN1362 lookup.



                                         7-39

                 FUEL STRATEGY, OPEN LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FRCSFT = ACT fraction for FN1361 lookup.

       -  HF_LAM = Fixed value for LAMBSE when HALF_FUEL condition is active.

       -  MINACCL = Minimum  vehicle  speed  rate  to  enable  Wide  Open  Throttle
          (FN303).

       -  NUMPR = Open Loop Fuel multiplier.

       -  OLIDRV = Drive Open Loop Idle fuel multiplier.

       -  OLINEUT = Neutral Open Loop Idle fuel multiplier.

       -  OLMCL = Open Loop Fuel multiplier.

       -  OLMTD1 = NUMPR Open Loop Fuel multiplier time delay, secs.

       -  PIPNUM = Number of PIPs for DFSO exit fuel ramp.

       -  TRLOAD = Transmission Load switch;
                   0 -> Manual Transmission, no clutch or gear switches,
                        forced neutral state 
                   1 -> Manual Transmission, no clutch or gear switch.
                   2 -> Manual Transmission, one clutch or gear switch.
                   3 -> Manual Transmission, both clutch and gear switches.
                   4 -> Auto Transmission, non-electronic, neutral drive switch.
                   5 -> Auto Transmission, non-electronic, neutral pressure switch,
                        (AXOD).
                   6 -> Auto Transmission, electronic, PRNDL sensor - park, 
                        reverse, neutral, overdrive, manual 1, manual 2.



      OUTPUTS

      Registers:

       -  LAMBSE1 = Desired  equivalence  ratio  for  Bank  1  injectors.   LAMBSE1
          appears in the fuel pulsewidth equation for HEGO11.

       -  TSLAMUn = Time at which last LAMBDA update occurred, clock ticks.

      Bit Flags:

       -  OLFLG = Open Loop Fuel flag; 1 -> open loop, 0 -> closed loop possible.















                                         7-40

                 FUEL STRATEGY, OPEN LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: FUEL_OL_LAMBSE_COM2


      ALT_CAL_FLG = 1 ---------------------| fn1362 = FN1362_ALT(TEMP,PERLOAD)
                                           |
                                           | --- ELSE ---
                                           |
                                           | fn1362 = FN1362(TEMP,PERLOAD)


      RUNNING = 1 -------------|
                               |AND -|
      V_MODE_SETUP = 1 --------|     |
                                     |    
      LESFLG1 = 0 -------------|     |OR --| OLFLG = 0              
       (hego is switching)     |     |     | (closed loop fuel       
                               |AND -|     | lambse determined from 
      OL_DESIRED = 0 ----------|           | closed loop fuel logic) 
                               |           | 
      EGOSSS1 >= EGOCL1 -------|           |
       (enough hego switches)              | 
                                           | --- ELSE ---
                                           |
      HALF_FUEL = 1 -----------------------| LAMBSE1 = LAMBSE2 = HF_LAM
                                           | OLFLG = 1
                                           | TSLAMUn = clock 
                                           |
                                           | --- ELSE ---
                                           |
      PPCTR < PIPNUM ----------------------| Decel Fuel Shutoff Exit
       (Decel fuel shut off)               |  (Ramp fuel)
                                           |  Set LAMBSE1 = LAMBSE2 = 1 + DFSLAM -
                                           | [(PPCTR / PIPNUM) * DFSLAM] 
                                           | OLFLG = 1
                                           | TSLAMUn = clock 
                                           | 
                                           | --- ELSE ---
      WRMEGO = 0 --------------------|     | 
       (cold hego)                   |OR --| Cold Engine/Startup Fuel Tables
                                     |     | Do: "C" Multiplier Logic
      FLG_ECTSTABLQ = 0 -------------|     | LAMBSE1 = LAMBSE2 =
       (ECT cold)                          | [FN300(ACT)* fn1362(TEMP,PERLOAD) -
                                           | FN1361(TEMP,ATMR1)]*C*LAMMUL*OLMCL
                                           | OLFLG = 1
                                           | TSLAMUn = clock 
                                           |
                                           | --- ELSE ---
                                           |
                                           | Stabilized Engine Fuel Table
                                           | Do: "C" Multiplier Logic
                                           | LAMBSE1 = LAMBSE2 =
                                           | FN1360(N,PERLOAD)*FN325(ECT)*
                                           | FN300(ACT) * C * LAMMUL * OLMCL
                                           | OLFLG = 1
                                           | TSLAMUn = clock 




                                         7-41

                 FUEL STRATEGY, OPEN LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  "C" MULTIPLIER LOGIC


      HSPFLG = 1--------------------------| High Vehicle Speed
                                          | Limiting Mode
                                          | 'C' = FN396A(VSBAR)
                                          |
                                          | --- ELSE ---
                                          |
      LDFLG = 1 --------------------------| Lugging Mode
                                          | 'C' = FN308(N) * FN212A(BP)
                                          |  + FN309(N) * FN129A(BP)
                                          |
                                          | --- ELSE ---
      DNDSUP = 1 -------------|           |
       (In drive)             |OR --|     |
                              |     |     | 
      TRLOAD <= 3 ------------|     |     | 
       (Manual transmission)        |     |
                                    |AND -| 'C' = FN301(N)
      APT = -1 ---------------------|     |
                                    |     |
      WRMEGO = 0 -------------|     |     |
       (cold hego)            |OR --|     |
                              |           |
      FLG_ECTSTABLQ = 0 ------|           |
       (ECT cold)                         |
                                          | --- ELSE ---
      DNDSUP = 0 -------------------|     |
       (In neutral)                 |     |
                                    |     | Mid ambient neutral idle
      APT = -1 ---------------------|AND -| 'C' = OLINEUT * NUMPR
                                    |     |
      CTLOW < TCSTRT < CTHIN -------|     |
                                    |     |
      ATMR1 < OLMTD1 ---------------|     |
                                          | --- ELSE ---
      DNDSUP = 0 -------------------|     |
       (In neutral)                 |AND -| Neutral Idle
                                    |     | 'C' = OLINEUT
      APT = -1 ---------------------|     |
                                          | --- ELSE ---
      DNDSUP = 1 -------------------|     |
       (In drive)                   |AND -| Drive Idle
                                    |     | 'C' = OLIDRV
      APT = -1 ---------------------|     |
                                          | --- ELSE ---
                                          |
      APT = 1 ----------------------|     | Wide Open Throttle
                                    |AND -| 'C' = FN303(N)
      VS_RATE >= MINACCL -----------|     |
                                          | --- ELSE ---
                                          |
                                          | 'C' = 1






                                         7-42

                      FUEL STRATEGY, LAMBSE RESET LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   LAMBSE RESET LOGIC


      OVERVIEW

      LAMBSE is reset to 1.0 under the conditions listed below, provided it  is  in
      Closed  Loop  fuel  control.   LAMBSE  is not reset in Open Loop Fuel Control
      because the value of LAMBSE is calculated using the  Open  Loop  Fuel  logic.
      LAMBSE is reset in Closed Loop as described below.

          1) When entering or exiting Closed Loop RPM Control mode.

          2) When Changing load states.

          3) Any time a transition is made from Open Loop to Closed Loop
          Fuel control.

          4) Any time a transition is made from purge valve ON to OFF.
                  ( To protect against lean spikes )

      LAMBSE is always clipped to 1.0 as a maximum.  The intent is  to  allow  rich
      errors and to prevent lean errors, given that running rich does not cause any
      drivability concerns.


      DEFINITIONS

      INPUTS

      Registers:

       -  APT = At Part Throttle; -1 -> Closed throttle, 0 -> Part throttle,
          1 -> Wide open Throttle.

       -  ISCFLG = ISC mode indicator flag;  -1  ->  Dashpot  Mode,  0  ->  Dashpot
          Preposition Mode, 1 -> closed Loop RPM Control Mode, 2 -> Closed Loop RPM
          Control (Lock_out entry to RPM control).

       -  ISCFLG_LST = Value of ISCFLG from the last background pass.

       -  ISFLAG = Flag that indicates the degree of loading on the engine at idle;
          0  -> Drive, 1 -> Drive and A/C (WAC Relay De-Energized), 2 -> Neutral, 3
          -> Neutral and A/C (WAC Relay De-Energized).

       -  ISLAST = Register which indicates the engine load state from the previous
          background pass.

       -  LAMBSE1 = Desired open loop (or closed loop) equivalence ratio for  Bank1
          injectors.  LAMBSE1 appears in the fuel pulsewidth equation for HEGO11.

       -  LAMBSE2 = Desired open loop (or closed loop) equivalence ratio for  Bank2
          injectors.  LAMBSE2 appears in the fuel pulsewidth equation for HEGO21.

       -  PURGDC = Canister Purge Duty Cycle, currently.

       -  PGDC_LST = Value of PURGDC from the previous background pass.

      Bit Flags:


                                         7-43

                      FUEL STRATEGY, LAMBSE RESET LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  HALF_FUEL = Flag which indicates one half of the injections are to be cut
          out; 1-> Half Fuel.

       -  OLFLG = Open Loop Flag; 1 -> Indicates  Open  Loop  Fuel  Control,  0  ->
          Indicates Closed Loop Fuel Control.

       -  OLFLG_LST = Previous open loop flag value; 1  Indicates  Open  Loop  Fuel
          Control, 0 -> Indicates Closed Loop Fuel Control.

       -  LIMIT_PURGE = Flag which indicates Purge Duty Cycle is being limited  due
          to LAMBSE being clipped; 1 -> limited Purge.

      Calibration Constants:

       -  LAMSW = Lambda reset switch; 1 -> Allows lambda to be  reset  upon  entry
          into  closed  loop  control,  0 -> Does not allow lambda to be reset upon
          entry into closed loop control.

       -  LMBJMP = Desired rich correction.

       -  LAMMIN = Min LAMBSE clip when closed loop.



      OUTPUTS

      Registers:

       -  ANPIP = Actual number of PIP signals since the last HEGO switch;  clipped
          to a maximum of 255; reset to zero when not in closed loop.

       -  ENPIP = Expected number of PIP signals between HEGO switches; reset to  1
          when not in closed loop.

       -  ISCFLG_LST = See above.

       -  LAMBSE1 = See above.

       -  LAMBSE2 = See above.

       -  LESTMR11 = Lack of HEGO11 switching timer, sec.

       -  LESTMR21 = Lack of HEGO21 switching timer, sec.

       -  TSLAMUn = Time at which last LAMBDA update occurred, clock ticks.

      Bit Flags:

       -  OLFLG_LST = See above.

       -  V_LAMJMP1 = Self test flag indicating a LAMBSE1 jump has occured.

       -  V_LAMJMP2 = Self test flag indicating a LAMBSE2 jump has occured.







                                         7-44

                      FUEL STRATEGY, LAMBSE RESET LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: FUEL_LAMBSE_RESET_COM1


      HALF_FUEL = 1 ----------------------| Exit this module
                                          |  (prevent HF_LAM from being
                                          |   overwritten)



      1)  Lambse Reset - Entering/Exiting Closed Loop RPM Control mode.


      ISCFLG = 1 -------------------|
                                    |
      ISCFLG_LST <> 1 --------------|AND -| Clip LAMBSE1 to 1.0 as a maximum
       (entering RPM control mode)  |     | LESTMR11 = 0
                                    |     | ANPIP = 0
      LAMBSE1 > 1.0 ----------------|     | ENPIP = 1
                                          | V_LAMJMP1 = 1
                                          | TSLAMU1 = clock


      ISCFLG = 1 -------------------|
                                    |
      ISCFLG_LST <> 1 --------------|AND -| Clip LAMBSE2 to 1.0 as a maximum
       (entering RPM control mode)  |     | LESTMR21 = 0
                                    |     | ANPIP = 0
      LAMBSE2 > 1.0 ----------------|     | ENPIP = 1
                                          | V_LAMJMP2 = 1
                                          | TSLAMU2 = clock


      ISCFLG = 0 -------------------|
                                    |AND -| LAMBSE1 = LAMBSE1
      ISCFLG_LST = 1 ---------------|     |  - LMBJMP
       (leaving RPM control mode and      | LAMBSE2 = LAMBSE2
        entering Dashpot preposition)     |  - LMBJMP
                                          | Clip LAMBSE1 and LAMBSE2 to
                                          |  to LAMMIN as a minimum.
                                          | V_LAMJMP1 = 1
                                          | V_LAMJMP2 = 1


















                                         7-45

                      FUEL STRATEGY, LAMBSE RESET LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      2)  Lambse Reset - Load State Change at Idle


      APT = -1 ---------------------|
       (closed throttle)            |
                                    |
      ISFLAG <> ISLAST -------------|AND -| Clip LAMBSE1 to 1.0 as a maximum
       (load state change)          |     | LESTMR11 = 0
                                    |     | ANPIP = 0
      LAMBSE1 > 1.0 ----------------|     | ENPIP = 1
                                          | V_LAMJMP1 = 1
                                          | TSLAMU1 = clock


      APT = -1 ---------------------|
       (closed throttle)            |
                                    |
      ISFLAG <> ISLAST -------------|AND -| Clip LAMBSE2 to 1.0 as a maximum
       (load state change)          |     | LESTMR21 = 0
                                    |     | ANPIP = 0
      LAMBSE2 > 1.0 ----------------|     | ENPIP = 1
                                          | V_LAMJMP2 = 1
                                          | TSLAMU2 = clock



      3)  Lambse Reset - Open Loop to Closed Loop Transition


      OLFLG_LST = 1 ----------------|
       (previous state = open loop) |
                                    |
      OLFLG = 0 --------------------|
       (current state = closed      |AND -| Clip LAMBSE1 to 1.0 as Maximum
        loop)                       |     | LESTMR11 = 0
                                    |     | ANPIP = 0
      LAMSW = 1 --------------------|     | ENPIP = 1
                                    |     | V_LAMJMP1 = 1
      LAMBSE1 > 1.0 ----------------|     | TSLAMU1 = clock


      OLFLG_LST = 1 ----------------|
       (previous state = open loop) |
                                    |
      OLFLG = 0 --------------------|
       (current state = closed      |AND -| Clip LAMBSE2 to 1.0 as Maximum
        loop)                       |     | LESTMR21 = 0
                                    |     | ANPIP = 0
      LAMSW = 1 --------------------|     | ENPIP = 1
                                    |     | V_LAMJMP2 = 1
      LAMBSE2 > 1.0 ----------------|     | TSLAMU2 = clock









                                         7-46

                      FUEL STRATEGY, LAMBSE RESET LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      4)  Lambse Reset - Purge valve ON to OFF Transition

      PURGDC = 0 -------------------|
                                    |
      PGDC_LST > 0.0 ---------------|
                                    |AND -| Clip LAMBSE1 to 1.0 as Maximum
      LIMIT_PURGE = 0 --------------|     | LESTMR11 = 0
                                    |     | ANPIP = 0
      LAMBSE1 > 1.0 ----------------|     | ENPIP = 1
                                          | V_LAMJMP1 = 1
                                          | TSLAMU1 = clock


      PURGDC = 0 -------------------|
                                    |
      PGDC_LST > 0.0 ---------------|
                                    |AND -| Clip LAMBSE2 to 1.0 as Maximum
      LIMIT_PURGE = 0 --------------|     | LESTMR21 = 0
                                    |     | ANPIP = 0
      LAMBSE2 > 1.0 ----------------|     | ENPIP = 1
                                          | V_LAMJMP2 = 1
                                          | TSLAMU2 = clock




              Set registers to reference previous values of ISCFLG & OLFLG


      unconditionally --------------------| ISCFLG_LST = ISCFLG
                                          | OLFLG_LST = OLFLG





























                                         7-47

                FUEL STRATEGY, CLOSED LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OVERVIEW 

      NOTE:  In the following OVERVIEW, the term BIAS is used to describe the  bias
      from  stoichiometry.   In  the  definitions and process, the term is actually
      named BIAS_G.  BIAS_G has more resolution than the previous BIAS register.

      The following description applies to each side of an engine if  operating  in
      stereo HEGO mode.

      1.  Independent closed loop ramp rates and  jumpback  (LAMBSE1  and  LAMBSE2)
          amounts are calculated.

      2.  Calibration values for peak-to-peak amplitude, bias, and transport  delay
          are common to both sides.

      3.  ANPIP, ENPIP, and LAMBSE calculations are unique to each side.

      4.  The injector  pulsewidths,  FUELPW1  and  FUELPW2,  are  calculated  from
          LAMBSE1 and LAMBSE2, respectively.



      NOTE:  If system uses only one HEGO sensor, the  strategy  uses  LAMBSE1  and
      FUELPW1 for the desired LAMBSE and fuel Pulsewidth.  (NUMEGO = 1)



      INTENT


      The goals of the closed loop strategy are:

      1.  To add capability of introducing large amounts of Air/Fuel biasing (up to
          45% expressed as ratio of bias to peak-to-peak amplitude).

      2.  To maximize the feedback limit cycle frequency for all bias values.

      3.  To adapt to HEGO sensor slow down as the sensor ages (see  Adaptive  HEGO
          Strategy).

      4.  To maintain a simple calibration procedure to describe  the  closed  loop
          limit cycle.


















                                         7-48

                FUEL STRATEGY, CLOSED LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      APPROACH


      The fuel flow is driven in a limit cycle manner about  stoichiometry.   Using
      the HEGO (Exhaust Gas Oxygen) sensor, the computer increases or decreases the
      injector pulsewidths in a controlled manner.  If the  HEGO  reads  rich,  the
      pulsewidths  will  be  decreased  (made leaner) at a calculated rate.  If the
      HEGO reads lean, the  pulsewidths  will  be  increased  (made  richer)  at  a
      calculated rate.

      When an HEGO switch occurs, an instantaneous change (or "jumpback")  is  made
      in  the air/fuel ratio back towards stoichiometry.  The jump is made relative
      to the A/F ratio (lambda) value at the HEGO switch.

      The limit cycle can be biased to operate on the average richer (or leaner) of
      stoichiometry.












































                                         7-49

                FUEL STRATEGY, CLOSED LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      An example of the closed loop limit cycle is shown below:


      LIMIT CYCLE DESCRIPTION
      (lean bias example)


      - - - - - - - - - *
      |               * *                                           *
      |             *   *                                         *
      |           *     *              LEAN                     *
      |         *       *                                     *
      |       *         *                                   *
      |     *           *                                 *
      |   *       |       *                             *
      | *-  -  - --- -  -  -* -  -  -  -  -  -  -  -  *  -  - AVERAGE
      |                       *                       *       A/F RATIO
      |                         *                     *
      | --------------------------*-------------------*----- STOICHIOMETRY
      |           |                 *                 *
      |           |                   *               *
      |         BIAS_G                 *             *
      |         TERM                      *           *
      |                                     *         *
      |                         RICH          *       *
      |--PEAK TO PEAK                           *     *
      |  AMPLITUDE                                *   *
      |                                             * *
      - - - - - - - - - - - - - - - - - - - - - - - - *


                                   HEGO SENSOR STATUS

      RICH **************                             ********************
                        *                             *
                        *                             *
                        *                             *
      LEAN              *******************************


                               INJECTOR PULSEWIDTH STATUS

      ON **      ****     *****    ******   *******  *******    *****     
          *      *  *     *   *    *    *   *     *  *     *    *   *     
          *      *  *     *   *    *    *   *     *  *     *    *   *     
          *      *  *     *   *    *    *   *     *  *     *    *   *     
      OFF ********  *******   ******    *****     ****     ******   ******
                        |                             |
      <--DECREASING --->|<---------INCREASING ------->|<---DECREASING --->
         PULSEWIDTH     |          PULSEWIDTH         |    PULSEWIDTH










                                         7-50

                FUEL STRATEGY, CLOSED LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      The bias term is used to make the limit cycle operate at an average A/F ratio
      rich  or  lean  of  stoichiometry.   For  zero bias, the average A/F ratio is
      stoichiometry.

      Based on calibration information supplied by the user,  the  fuel  pulsewidth
      ramp rates and jumpback distances are calculated automatically to produce the
      proper limit cycle.

      The calibration items are:  FN1351(N,LOAD),  FN1352(N,LOAD),  FN1353(N,LOAD),
      and FN346A(ECT).


                                 FN1353(N,LOAD) = BIAS_G


      The direction of the bias is controlled by the sign of the  bias  value.   If
      the bias term is negative, a rich bias is indicated.  If the sign of the bias
      term is positive, a lean bias is indicated.


                          FN1351(N,LOAD) * FN346A(ECT) = tdrevs


      System transport lag time; time delay from when a fuel change is  made  until
      the  HEGO  sensor  indicates this change; varies with engine speed, units are
      REVs.  On a cold engine, multiplier FN346A(ECT)  compensate  for  a  sluggish
      HEGO.


                           FN1352(N,LOAD) or ISC_PTP = PTPAMP


      Peak-to-Peak amplitude determines the labmda  excursions  allowed  in  Closed
      Loop  Fuel.   Too large an excursion will be felt as a road load surge or rpm
      variations at idle.  Because of the RPM rolls at idle, the capability  exists
      in the strategy to use a specific idle peak-to-peak, ISC_PTP.


                               ***********************
                                 ***** WARNING *****
                                   ***************


      It is imperative that an accurate value  for  the  system  transport  lag  be
      entered.   An  incorrect  value  will  result  in  greatly  reduced  catalyst
      efficiencies due to excessively fast or slow ramp rates,  incorrect  jumpback
      amounts, etc.


                                   ***************
                                 ***** WARNING *****
                               ***********************








                                         7-51

                FUEL STRATEGY, CLOSED LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Two methods of achieving the desired bias are employed.

      1.  Variable jumpback distance on one side of the limit cycle with  symmetric
          pulsewidth ramp rates.

      2.  No jumpback on one side of the limit  cycle  with  asymmetric  pulsewidth
          ramp rates.



      The  logic  used  to  achieve  biasing  depends  on  the  absolute  value  of
      BIAS_G/PTPAMP (|BIAS_G/PTPAMP|):  where:


               BIAS_G = Amount of bias from stoichiometry, FN1353(N,LOAD)


         PTPAMP = Limit cycle peak-to-peak amplitude, FN1352(N,LOAD) or ISC_PTP


      Any calculated value of |B/P| exceeding 0.45 is clipped  to  0.45.   This  is
      done to avoid extremely long limit cycle periods.



      FOR NO BIAS  |BIAS_G/PTPAMP| = 0


      The limit cycle has full jumpback on both sides  of  stoichiometry  and  uses
      symmetric pulsewidth ramp rates.



      FOR SMALL BIAS  0 < |BIAS_G/PTPAMP| <= 0.171573  (0.171573 = 3 - SQRT(8)) 


      The limit cycle has a partial  jumpback  on  one  side  of  stoichiometry  to
      achieve biasing and uses symmetric pulsewidth ramp rates.



      FOR LARGE BIAS  0.171573 < |BIAS_G/PTPAMP| <= 0.45


      The limit cycle has no  jumpback  on  one  side  of  stoichiometry  and  uses
      asymmetric pulsewidth ramp rates to achieve biasing.


      Examples of biasing are shown on the next page.











                                         7-52

                FUEL STRATEGY, CLOSED LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      CLOSED LOOP LIMIT CYCLE EXAMPLES
      (not drawn to scale)

                            NO BIAS   | BIAS_G/PTPAMP | = 0
           *       *       *       *       *
          **      **      **      **      **
         * *     * *     * *     * *     * *     SYMMETRIC RAMP RATES
        *  *    *  *    *  *    *  *    *  *     FULL JUMPBACK IN
      -----*---*---*---*---*---*---*---*---*---  BOTH DIRECTIONS
            *  *    *  *    *  *    *  *    *
             * *     * *     * *     * *     *
              **      **      **      **      *
               *       *       *       *       *


                       SMALL BIAS   | BIAS_G/PTPAMP | < 0.171573
           *          *          *          *
          **         **         **         ** 
         * *        * *        * *        * *         SYMMETRIC RAMP RATES
        *  *       *  *       *  *       *  *         PARTIAL JUMPBACK
      -----*------*---*------*---*------*---*----     IN ONE DIRECTION
           *     *    *     *    *     *    *
            *   *      *   *      *   *      *   *
             * *        * *        * *        * *
              **         **         **         **
               *          *          *          *


                      MODERATE BIAS   | BIAS_G/PTPAMP | = 0.171573
           *           *           *           *
          **          **          **          **              
         * *         * *         * *         * *    SYMMETRIC RAMP RATES
        *  *        *  *        *  *        *  *    NO JUMPBACK
      -----*-------*---*-------*---*-------*---*--  IN ONE DIRECTION
           *      *    *      *    *      *    *
           *     *     *     *     *     *     *
            *   *       *   *       *   *       *
             * *         * *         * *         *
              *           *           *              


                       LARGE BIAS   | BIAS_G/PTPAMP | > 0.171573
           *                    *
         * *                  * *
       *   *                *   *                *   ASYMMETRIC RAMP RATES
           *              *     *              *     NO JUMPBACK
      -----*------------*-------*------------*-----  IN ONE DIRECTION
           *          *         *          *
           *        *           *        *
            *     *              *     *
             *  *                 *  *
              *                    *


      NOTE:  Limit cycle frequency decreases with increasing bias.





                                         7-53

                FUEL STRATEGY, CLOSED LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      After an HEGO switch, a finite amount of time (equal to  the  transport  lag)
      should  pass  before  the HEGO can switch.  Noise in the HEGO system could be
      interpreted by the computer as HEGO switches.  These phantom  switches  could
      occur at a faster rate than dictated by the system transport lag time.  Since
      the jumpback is made from the lambda when the HEGO switches, phantom switches
      could make the jumpback go beyond the average Air/Fuel ratio.  A high rate of
      phantom switches would create a high rate of jumps.  A special feature of the
      closed loop strategy prevents this problem.

      A full jumpback is done only if the proper transport lag  time  has  elapsed.
      If  not, the jumpback distance is reduced to match the reduction in transport
      lag time.  The actual  strategy  uses  PIP  signal  counts  to  control  this
      feature.

      The jumpback distance is multiplied by the ratio piprat.

      piprat = Ratio of the actual number of PIP signals since the last HEGO switch
      to  the  expected  number  of PIP signals between HEGO switches; clipped to a
      maximum of 1.0.  piprat is a temporary register.


                                  piprat = ANPIP/ENPIP


      ANPIP = Actual number of PIP signals since the last HEGO switch; clipped to a
      maximum of 255; reset to one when not in closed loop; reset to zero after the
      HEGO switches and the jumpback distance is calculated.

      ENPIP = Expected number of PIP signals between HEGO switches; reset to 1 when
      not in closed loop.

      The transport delay (FN1351) is entered as REVS.  The strategy uses units  of
      both seconds and PIPS.  The transport delay in PIPS is:


                      tdpip = FN1351(N,LOAD) * ENGCYL * FN346A(ECT)


      Transport delay in seconds is:


                       tdsec = FN1351(N,LOAD) * 60/N * FN346A(ECT)


      tdpip and tdsec are temporary registers.


      NOTE:  In the following logic diagrams, an HEGO switch is defined as either:


      1.  The HEGO sensor reads rich during the  current  background  loop  and  it
          reads lean during the previous background loop.

      2.  The HEGO sensor reads lean during the  current  background  loop  and  it
          reads rich during the previous background loop.





                                         7-54

                FUEL STRATEGY, CLOSED LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  ANPIP = Actual number of PIP signals since the last HEGO switch;  clipped
          to a maximum of 255; reset to zero when not in closed loop; reset to zero
          after the HEGO switches and the jumpback distance is calculated.

       -  BIAS_G = Closed Loop biasing term = FN1353(N,LOAD).

       -  HEGO = Heated Exhaust Gas Oxygen Sensor; GX  has  mono  and  stereo  HEGO
          capacity,   HEGO11   and  HEGO21  represent  the  HEGO  sensors;  generic
          represent= HEGOxy.

       -  ENPIP = Expected number of PIP signals between HEGO switches; reset to  1
          when not in closed loop.

       -  FUELPW1 = HEGO11 injector pulsewidths, clock ticks.

       -  FUELPW2 = HEGO21 injector pulsewidths, clock ticks.

       -  LAMBDA = Air/Fuel equivalency ratio.

       -  LAMBSE1 = Desired open loop (or closed loop) equivalence ratio for  Bank1
          injectors.  LAMBSE1 appears in the fuel pulsewidth equation for HEGO11.

       -  LAMBSE2 = Desired open loop (or closed loop) equivalence ratio for  Bank2
          injectors.  LAMBSE2 appears in the fuel pulsewidth equation for HEGO21.

       -  LOAD = Universal normalized load parameter.

       -  MINPWT = MINPW converted to clock ticks.

       -  N = Engine RPM.

       -  PTPAMP = Limit cycle peak_to_peak amplitude.

       -  TSLAMUn = Time at which last LAMBDA update occurred, clock ticks.

       -  VSBAR = Filtered vehicle speed.

      Bit Flags:

       -  EGOFL11 = Bank1 upstream HEGO flag.

       -  EGOFL21 = Bank2 upstream HEGO flag.

       -  ISCFLG = Mode indicator flag.

       -  LEGOFG11 = Lack of HEGO11 switching.

       -  LEGOFG21 = Lack of HEGO21 switching.

       -  OLFLG = Open loop fuel flag; 1 -> open loop fuel, 0 -> closed loop fuel.




                                         7-55

                FUEL STRATEGY, CLOSED LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  FN039 = Engine speed (N) normalizing function for FN1355.

       -  FN315 = A/F bias multiplier in part throttle mode as a function of VSBAR.

       -  ENGCYL = Number of PIPs per engine revolution; or Number of cylinders/2.

       -  FN339 = Closed  Loop  ramp  rate  Multiplier  versus  absolute  value  of
          BIAS_G/PTPAMP.
                  Input = |BIAS_G/PTPAMP|.
                  Output = Ramp rate multiplier. 

       -  FN342 = Closed Loop Jumpback distance Multiplier  versus  |BIAS_G/PTPAMP|
          (Toward BIAS_G).
                  Input = |BIAS_G/PTPAMP|.
                  Output = Jumpback distance Multiplier. 

       -  FN344 = Closed Loop Jumpback Distance Multiplier  versus  |BIAS_G/PTPAMP|
          (Opposite BIAS_G).
                  Input = |BIAS_G/PTPAMP|.
                  Output = Jumpback distance multiplier. 

       -  FN346 = Expected number of PIPs multiplier.
                  Input = |BIAS_G/PTPAMP|.
                  Output = Multiplier. 

       -  FN346A = Cold engine multiplier.
                  Input = ECT
                  Output = Multiplier

       -  FN1351 = System transport lag time; time delay from when a fuel change is
          made until the HEGO sensor indicates this change, units are REVs.
                   X = FN039(N)
                   Y = FN021(LOAD)
                   Output = Transport delay, REVs. 

       -  FN1352 = Closed Loop Peak-to-Peak amplitude, units are lambdas.
                   X = FN039(N)
                   Y = FN021(LOAD)
                   Output = Peak-to-Peak amplitude, PTPAMP. 

       -  FN1353 = Amount of Bias from stoichiometry.
                   X = FN039(N)
                   Y = FN021(LOAD)
                   Output = Bias from stoichiometry. (Store in register). 

       -  ISC_PTP = Idle speed peak-to-peak value.

       -  ISC_PTP_SW = Idle speed peak-to-peak value to be used at idle flag; 1  ->
          use ISC_PTP.

       -  NUMEGO = Number of HEGO sensors present; mono or stereo only.







                                         7-56

                FUEL STRATEGY, CLOSED LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  ANPIP = See above.

       -  BIAS_G = See above.

       -  ENPIP = See above.

       -  LAMBSE1 = See above.

       -  LAMBSE2 = See above.

       -  PTPAMP = See above.

       -  TSLAMUn = Time of last LAMBDA update.











































                                         7-57

                FUEL STRATEGY, CLOSED LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: FUEL_CL_LAMBSE_COM14


      OLFLG = 0 ------------|    
        (closed loop)       | 
                            |AND -| MONO HEGO OR STEREO
      LEGOFG21 = 1 ---|     |     | HEGO WITH LACK OF
                      |OR --|     | HEGO12 SWITCHING.
      NUMEGO = 1 -----|           | USE HEGO11 SENSOR
       (MONO HEGO)                | ONLY FOR CLOSED LOOP
                                  | CONTROL OF LAMBSE1 AND
                                  | LAMBSE2 = LAMBSE1
                                  |
                                  | --- ELSE ---
      OLFLG = 0 ------------|     |
        (closed loop)       |AND -| STEREO HEGO WITH LACK
                            |     | OF HEGO11 SWITCHING.
      LEGOFG11 = 1 ---------|     | USE HEGO21 SENSOR
                                  | ONLY FOR CLOSED LOOP
                                  | CONTROL OF LAMBSE2 AND
                                  | LAMBSE1 = LAMBSE2
                                  |
                                  | --- ELSE ---
                                  |
      OLFLG = 0 ------------------| NORMAL STEREO HEGO.
         (closed loop)            | USE HEGO11 SENSOR
                                  | FOR CLOSED LOOP
                                  | CONTROL OF LAMBSE1
                                  |         AND
                                  | USE HEGO21 SENSOR
                                  | FOR CLOSED LOOP
                                  | CONTROL OF LAMBSE2



























                                         7-58

                FUEL STRATEGY, CLOSED LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  Calculation of BIAS_G


      always ---------------------| BIAS_G = FN1353(N,LOAD) * 
                                  |          FN315(VSBAR)



                                  Calculation of PTPAMP


      ISCFLG > 0 -----------|
       (idle speed RPM      |
        control)            |AND -| PTPAMP = ISC_PTP
                            |     |
      ISC_PTP_SW = 1 -------|     |
       (idle speed PTP value      |
        desired)                  |
                                  | --- ELSE ---
                                  |
                                  | PTPAMP = FN1352(N,LOAD)



                             Calculation of tdpip and tdsec


      always ---------------| tdpip = FN1351(N,LOAD) * ENGCYL * FN346A(ECT)
                            | tdsec = FN1351(N,LOAD) * 60/N * FN346A(ECT)































                                         7-59

                FUEL STRATEGY, CLOSED LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Jumpback and ENPIP calculations  based  on  bias  and  HEGO  state:   (HEGOx1
      switches  correspond  to  SWTFLx1 and EGOFLx1 flags; x=1 for engine Bank1 and
      x=2 for engine Bank2).


      BIAS_G >= 0 ----------|
                            |
      SWTFLx1 = 1 ----------|AND -| LAMBSEn = LAMBSEn + [PTPAMP +
                            |     |           | BIAS_G |] * FN344 *
      EGOFLx1 = 1 ----------|     |           pipratn
                                  | ENPIP = tdpip
                                  | ANPIP = 0
                                  |
                                  | --- ELSE ---
      BIAS_G >= 0 ----------|     |
                            |     |
      SWTFLx1 = 1 ----------|AND -| LAMBSEn = LAMBSEn - PTPAMP *
                            |     |           FN342 * pipratn
      EGOFLx1 = 0 ----------|     | ENPIP = tdpip * FN346(|BIAS_G/PTPAMP|)
                                  | ANPIP = 0
                                  |
                                  | --- ELSE ---
      BIAS_G < 0 -----------|     |
                            |     |
      SWTFLx1 = 1 ----------|AND -| LAMBSEn = LAMBSEn +
                            |     |           PTPAMP * FN342 * pipratn
      EGOFLx1 = 1 ----------|     | ENPIP = tdpip * FN346(|BIAS_G/PTPAMP|)
                                  | ANPIP = 0
                                  |
                                  | --- ELSE ---
      BIAS_G < 0 -----------|     |
                            |     |
      SWTFLx1 = 1 ----------|AND -| LAMBSEn = LAMBSEn - [PTPAMP +
                            |     |           | BIAS_G |]* FN344 * pipratn
      EGOFLx1 = 0 ----------|     | ANPIP = 0
                                  | ENPIP = tdpip


      When a jumpback occurs (HEGOx1 switches), reset TSLAMUn to clock:


      SWTFLx1 = 1 ----------------| TSLAMUn = clock
       (LAMBSEn jumpback)   

















                                         7-60

                FUEL STRATEGY, CLOSED LOOP LAMBSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Ramp-rate calculations based on bias and HEGO state:  (when the HEGOx1 sensor
      has not switched)


      BIAS_G >= 0 ----------|    
                            |AND -| LAMBSEn = LAMBSEn - [(PTPAMP - |BIAS_G|) *
      EGOFLx1 = 0 ----------|     |    (1 - FN339) * (clock - TSLAMUn)] / tdsec
                                  | TSLAMUn = clock
                                  |
                                  | --- ELSE ---
      BIAS_G < 0 -----------|     |
                            |AND -| LAMBSEn = LAMBSEn - [(PTPAMP - |BIAS_G|) *
      EGOFLx1 = 0 ----------|     |    FN339 * (clock - TSLAMUn)] / tdsec
                                  | TSLAMUn = clock
                                  |
                                  | --- ELSE ---
      BIAS_G >= 0 ----------|     |
                            |     |
      EGOFLx1 = 1 ----------|AND -| LAMBSEn = LAMBSEn + [(PTPAMP - |BIAS_G|) *
                            |     |    FN339 * (clock - TSLAMUn)] / tdsec
      FUELPWn > MINPWT -----|     |  TSLAMUn = clock
                                  |
                                  | --- ELSE ---
      BIAS_G < 0 -----------|     |
                            |     |
      EGOFLx1 = 1 ----------|AND -| LAMBSEn = LAMBSEn + [(PTPAMP - |BIAS_G|) *
                            |     |    (1 - FN339) * (clock - TSLAMUn)] / tdsec
      FUELPWn > MINPWT -----|     | TSLAMUn = clock
                                  |
                                  | --- ELSE ---
                                  |
                                  | No change to LAMBSEn
                                  | TSLAMUn = clock



























                                         7-61

                       FUEL STRATEGY, LAMBSE CLIP LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    LAMBSE CLIP LOGIC


      OVERVIEW

      LAMBSE1 and LAMBSE2 (the desired equivalence ratios)  are  clipped  as  shown
      below:


      DEFINITIONS

      INPUTS

      Bit Flags:

       -  OLFLG = Open Loop Flag; 1 -> Open Loop Fuel Control,  0  ->  Closed  Loop
          Fuel Control.

      Calibration Constants:

       -  LAMMAX = Maximum LAMBSE clip when in closed loop.

       -  LAMMIN = Minimum LAMBSE clip when in closed loop.



      OUTPUTS

      Registers:

       -  LAMBSE1 = Desired equivalence ratio for HEGO11 injectors.

       -  LAMBSE2 = Desired equivalence ratio for HEGO21 injectors.



      PROCESS
                         STRATEGY MODULE: FUEL_LAMBSE_CLIP_COM1


      OLFLG = 0 ----------------------------| CLIP LAMBSE1 AND
                                            | LAMBSE2 BETWEEN
                                            | LAMMIN AND LAMMAX
                                            |
                                            | --- ELSE ---
                                            |
                                            | CLIP LAMBSE1 AND
                                            | LAMBSE2 BETWEEN
                                            | 0.0000305 AND
                                            | 1.9999695










                                         7-62

                   FUEL STRATEGY, DAC REGISTER CALCULATIONS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                DAC REGISTER CALCULATIONS


      OVERVIEW 

      Special registers have been added to assist in the calibration development by
      increasing the resolution of key parameters for display purposes.

      Note: 
      Because DSLMBS1_D and DSLMBS2_D are signed word quantities, a value  of  zero
      will be output as 5 volts.


      DEFINITIONS

      INPUTS

      Registers:

       -  LAMBSE1 = Desired A/F equivalence ratio for EGO #1.

       -  LAMBSE2 = Desired A/F equivalence ratio for EGO #2.



      OUTPUTS

      Registers:

       -  DSLMBS1_D = DISPLAY ONLY, Rescaled LAMBSE1 used  for  DAC'ing;  increased
          resolution.

       -  DSLMBS2_D = DISPLAY ONLY, Rescaled LAMBSE2 used  for  DAC'ing;  increased
          resolution.



      PROCESS

                           STRATEGY MODULE:  FUEL_DAC_REG_COM1


      always -----------------| DSLMBS1_D = LAMBSE1 - 1.0
                              |
                              | DSLMBS2_D = LAMBSE2 - 1.0















                                         7-63

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   ADAPTIVE FUEL LOGIC


      OVERVIEW 

      Fuel injected systems may exhibit vehicle to vehicle steady state  A/F  ratio
      errors due to normal variability in fuel system components.

      The  adaptive  fuel  strategy  attacks  this  problem   by   memorizing   the
      characteristics  of  the  individual  fuel system being used.  This memorized
      information is used to  predict  what  the  system  will  do  based  on  past
      experience.

      The ability to predict fuel system  behavior  improves  both  open  loop  and
      closed  loop  fuel  control.  As an example, the memorized information can be
      used on cold starts to achieve better open loop fuel control before the  HEGO
      sensor reaches operating temperature.

      The chief benefit of the adaptive fuel strategy will be to reduce the effects
      of product variability in the field.

      The memorized or adaptive information is stored in table  form  in  the  Keep
      Alive  Memory (KAM).  KAM is continuously powered by the vehicle battery even
      when the vehicle is shut off.  As a result, the table is not lost on  vehicle
      shutdown.



































                                         7-64

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Adaptive Fuel Table Discussion:

      The adaptive fuel tables, LTMTB1 and  LTMTB2,  are  2-dimensional  arrays  of
      learned  fuel  system  corrections.  Ideally, if LAMBSE1 = 1.0, LAMBSE2 = 1.0
      and data from a mature adaptive fuel table  is  used,  a  stoichiometric  A/F
      ratio  would  result at whatever speed-load point adaptive learning had taken
      place.

      Present table size is 8(rows) x 10(columns) or 80  cells  for  each  Adaptive
      Fuel Table, plus depending on the strategy family, either 4 or 6 special idle
      adaptive cells.  There will always be 86 total cells per table.

      The total learned fuel system correction for the HEGO11 side of the engine is
      called  KAMRF1  where  KAMRF1  =  0.5  +  LTMTB1rc.   The  corresponding fuel
      correction for the HEGO21 side  is  called  KAMRF2,  where  KAMRF2  =  0.5  +
      LTMTB2rc.

      During adaptive learning, only the LTMTB1  and  LTMTB2  cells  are  modified.
      Therefore,  the  ranges  of  each of the KAMRF1 and KAMRF2 multipliers (0.5 +
      0.0) to (0.5 + 1.0) or 0.5 to 1.5.

      The range of the LTMTB1 and LTMTB2 cells can be further restricted by use  of
      the calibration parameter clips, MINADP and MAXADP.

      The precise location where KAMRF1 and KAMRF2 are used is shown  in  the  fuel
      pulsewidth equation.

      If KAM fails the KAM validation test (described later), or if there is a lack
      of  HEGO  switching  (described  in  the  Failure Mode Strategy chapter), all
      LTMTB1 and/or LTMTB2 cells are initialized to 0.5 or 80 (HEX) resulting in  a
      value of KAMRF1 = KAMRF2 = 0.5 + 0.5 = 1.0.

      When allowed, updates to LTMTB1 and LTMTB2 are statistically  distributed  in
      the  vicinity  of  the  speed-load operating point, except in the case of the
      idle  cells.   Only  the  current  idle  cell  is  updated,  no   statistical
      distribution is done.

      Data extracted from the table undergoes a 4-point linear interpolation.  This
      is explained further under the FN1325A description.  Note that the idle cells
      do not undergo four point interpolation.  Only the current idle cell is used.

      LTMTB1, LTMTB2 and FN1325A share the same normalizing functions.   FN021A  is
      the  LOAD  normalizing  function.   FN070D  is the engine speed N normalizing
      function.

      As an example of an adaptive fuel table, LTMTB1, is shown on the  next  page.
      HEGO21 Adaptive Fuel Table, LTMTB2, uses similar nomenclature.













                                         7-65

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              ADAPTIVE FUEL TABLE (LTMTB1)


                                     LTMTB1rc CELLS

                            (LTMTB2 has similar designation)


             Special idle  ------>|80 81 82 83 84 85
             adaptive cells       |
                             7    |70 71 72 73 74 75 76 77 78 79 
                                  |
                             6    |60 61 62 63 64 65 66 67 68 69
                                  |
                             5    |50 51 52 53 54 55 56 57 58 59
                                  |
                 FN021A      4    |40 41 42 43 44 45 46 47 48 49
               NORMALIZED         |
                 ENGINE      3    |30 31 32 33 34 35 36 37 38 39
                  LOAD            |  
                 (LOAD)      2    |20 21 22 23 24 25 26 27 28 29
                                  |   
                             1    |10 11 12 13 14 15 16 17 18 19
                                  |   
                             0    |00 01 02 03 04 05 06 07 08 09
                                  ------------------------------

                                    0  1  2  3  4  5  6  7  8  9

                                          FN070D NORMALIZED
                                            ENGINE SPEED
                                                (N)


      The special Adaptive Idle cells are not defined by FN021A or FN070D; they are
      defined by the value of the ISFLAG.  (See ISFLAG definition)
























                                         7-66

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   FN1325A DESCRIPTION


      FN1325A is a 9(rows) x 10(columns) table containing 1 cell  corresponding  to
      each  cell in the adaptive fuel table LTMTB1 or LTMTB2.  (The 9th row is used
      to reference the idle cells and is not accessible from FN021A which only goes
      from 0 to 7).

      The normalizing functions for FN1325A, LTMTB1 and LTMTB2 are shared.   FN021A
      is  the  LOAD normalizing function.  FN070D is the engine speed N normalizing
      function.

      FN1325A is designed to do the following: 

      1.  Identify LTMTB1 and LTMTB2 cells where learning is allowed to occur. 

         Learning is allowed in any LTMTB1 and LTMTB2 cells whose corresponding
         FN1325Arc cell contains a value >= 0. Negative FN1325A cell values
         disallow learning in the corresponding LTMTB1 and LTMTB2 cell(s). 

      2.  Define a high confidence speed-load region that can be referenced from
      any other speed-load point. 

         This occurs whenever a negative value is entered into a FN1325A cell. The
         negative number serves as an offset to LTMTB100 and LTMTB200. If 1 of
         the 4 cells used by the 4-point linear interpolation LTMTB1 or LTMTB2
         table lookup routine contained -42, the cell value used by the
         interpolation routine for the cell that contained the -42 would be the
         value found in the LTMTB1 or LTMTB2 cell located at the intersection of
         row 4 and column 2. In the extreme, if -42 was entered into every cell
         of FN1325Arc except for the cell corresponding to LTMTB142 and LTMTB242,
         learning would be allowed only in cell LTMTB142 and LTMTB242 and the
         learned correction in LTMTB142 and LTMTB242 would be applied to all
         speed-load points for fuel calculations referencing HEGO11 (every cell
         referenced by the 4-point linear interpolation routine during the LTMTB1
         table lookup would point to cell LTMTB142). This calibration for FN1325A
         is shown on the next page. 

      3.  Specify the values of the Loop Counters (LPCT1L, LPCT1R, LPCT2L and
      LPCT2R) required to update an individual LTMTB1 or LTMTB2 cell(s). 

         This is done by entering a value into FN1325A that is >= 0. The value
         entered represents 1/2 the required update value. A value of 20 entered
         would require (LPCT1R, LPCT1L, LPCT2L and LPCT2R) to be greater than 40
         for an update to occur. 

         NOTE: FN1325A controls the update rate and update area for both LTMTB1
         and LTMTB2. 












                                         7-67

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                  LTMTB1 AND LTMTB2 LEARNING/USE CONTROL TABLE FN1325A


                                      FN1325A CELLS


             Special idle
             adaptive cells ---->|-42 -42 -42 -42 -42 -42
                                 |
                            7    |-42 -42 -42 -42 -42 -42 -42 -42 -42 -42
                                 |
                            6    |-42 -42 -42 -42 -42 -42 -42 -42 -42 -42
                                 |
                            5    |-42 -42 -42 -42 -42 -42 -42 -42 -42 -42
                                 |
                FN021A      4    |-42 -42  20 -42 -42 -42 -42 -42 -42 -42
              NORMALIZED         |
                ENGINE      3    |-42 -42 -42 -42 -42 -42 -42 -42 -42 -42
                 LOAD            |
                (LOAD)      2    |-42 -42 -42 -42 -42 -42 -42 -42 -42 -42
                                 |
                            1    |-42 -42 -42 -42 -42 -42 -42 -42 -42 -42 
                                 |
                            0    |-42 -42 -42 -42 -42 -42 -42 -42 -42 -42 
                                  ---------------------------------------

                                    0   1   2   3   4   5   6   7   8   9

                                            FN070D NORMALIZED
                                              ENGINE SPEED
                                                  (N)





























                                         7-68

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS 

      INPUTS 

      Registers:

       -  ACT = Air charge temperature, deg F.

       -  ADPTMR = Adaptive learning enable timer (see TIMERS chapter).

       -  BIAS_G = Closed loop fuel biasing term = FN1353(N,LOAD).

       -  ECT = Coolant temperature deg.  faren.

       -  EGOCT11 = HEGO11 switches since last Adaptive Fuel Update.

       -  EGOCT21 = HEGO21 switches since last Adaptive Fuel Update.

       -  ISCFLG = ISC MODE Flag; 1 -> RPM CONTROL Mode.

       -  ISFLAG = Flag that indicates the degree of loading on the engine at Idle.
          See  the  ISC  Chapter;  0  ->  Drive,  1  ->  Drive  +  A/C  (WAC  Relay
          De-Energized), 2 -> Neutral, 3 -> Neutral + A/C (WAC Relay De-Energized).

       -  KAMRF1/KAMRF2 = Adaptive Fuel strategy correction factor.  It is composed
          of the value LTMTB1rc + 0.5.

       -  KWUCTR = KAM warm_up counter.  Stores number of warm_ups in  KAM.   Reset
          to zero if KAM is corrupted battery disconnect, etc.)

       -  LAMBSE1 = Desired open loop (or closed loop) equivalence ratio for HEGO11
          injectors.  LAMBSE1 appears in the fuel pulsewidth equation for HEGO11.

       -  LAMBSE2 = Desired open loop (or closed loop) equivalence ratio for HEGO21
          injectors.  LAMBSE2 appears in the fuel pulsewidth equation for HEGO21.

       -  LAMWIN = LAMBSE window window outside which adaptive is enabled.

       -  LOAD = Universal normalized load parameter.

       -  LPCT1L = Number of background loops that the LAMBSE1 outside  a  deadband
          in the rich direction, with HEGO11 sensor reading lean.

       -  LPCT2L = Number of background  loops  that  the  LAMBSE2  was  outside  a
          deadband in the rich direction, with HEGO21 sensor reading lean.

       -  LPCT1R = Number of background  loops  that  the  LAMBSE1  was  outside  a
          deadband in the lean direction, with HEGO11 sensor reading rich.

       -  LPCT2R = Number of background  loops  that  the  LAMBSE2  was  outside  a
          deadband in the lean direction, with HEGO21 sensor reading rich.

       -  LSTCOL = Last normalized column value.

       -  LSTROW = Last normalized row value.

       -  LTMTB1rc = HEGO11 Adaptive Fuel Table cell.



                                         7-69

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  LTMTB2rc = HEGO21 Adaptive Fuel Table cell.

       -  N = Engine revolutions, RPM.

       -  PURGDC = Canister Purge Duty Cycle.

       -  PTPAMP = Limit cycle peak-to-peak amplitude.

       -  RANNUM = Random number adder.

       -  ROWTBU = Register which contains the row number of the Adaptive Fuel cell
          to be updated.

       -  TCSTRT = Temperature of ECT at cold start, deg F.

       -  TFC_HR = Fuel  mass  per  injection  from  transient  fuel  compensation,
          lbs/cylinder.

       -  UPRATE = KAM update rate.

      Bit Flags:

       -  AFMFLG = ACT Failure Mode (FMEM) flag.

       -  CFMFLG = ECT FMEM flag.

       -  EFMFLG = EGR FMEM flag.

       -  EGOFL11 = Bank1 upstream HEGO flag.

       -  EGOFL21 = Bank2 upstream HEGO flag.

       -  HCAMFG = Flag indicating state of Hi Cam.

       -  LIMIT_PURGE = Flag which indicates purge duty cycle is being limited  due
          to lambse being clipped; 1 -> limited purge.

       -  MFMFLG = MAP/MAF FMEM flag.

       -  TFMFLG = TP FMEM flag.

       -  WARM_UP = Indicates engine warmup occured.

      Calibration Constants:

       -  ADAPTM = Adaptive learning enable time delay, sec.

       -  ADEGCT = HEGO switch requirement to increment counters.

       -  AFACT1 = Minimum ACT to Update Adaptive Fuel Table deg F.

       -  AFACT2 = Maximum ACT to update Adaptive Fuel Table, deg F.

       -  AMPMUL = Multiplier to determine LAMWIN from PTPAMP.

       -  DELCOL = Calibration constant (normalized engine speed N) which  provides
          the  ability  to  lock  out  table  updates  under  transient conditions;
          establishes  an  operating  range  (engine  speed)   within   which   the
          appropriate loop counter may be incremented.

                                         7-70

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  DELROW = Same function as DELCOL but for normalized load LOAD.

       -  DELAMB = Deadband (around LAMBSE1 = 1.0) within which loop counter values
          are not altered.

       -  FAEGCT = Fast Adaptive HEGO count.  Number of HEGO switches  required  to
          permit  adaptive  learning  when  KWUCTR < KWUCNT.  Should be set to 0 to
          permit fast adaptive learning for the first few warm_up cycles.

       -  FN021A = LOAD normalizing function for LTMTB1(LTMTB2) and FN1325A. 

       -  FN070D = N normalizing function. 

       -  FN1325Arc = LTMTB1 and LTMTB2 learning/use control table.
                     X = FN070D(N)
                     Y = FN021A(LOAD)

       -  HCAMSW = Calibratible switch which allows selection  of  when  and  which
          adaptive fuel cells are to be used.

       -  IDLE_CELL_SW = Calibration switch to  enable  use  of  the  special  idle
          cells; 1 -> special cells enabled.

       -  KWUCNT = Maximum mumber of warm_up  cycles  to  use  fast  adaptive  HEGO
          count.  It should be set to approx.  3 to 5 warm_ups.

       -  MAXADP = Maximum adaptive correction.

       -  MINADP = Minimum adaptive correction.

       -  NUMEGO = Switch indicating number of HEGO sensors present; Select mono or
          stereo.

       -  RANMUL = Multiplier for Random number generation.

       -  VECT3 = Minimum coolant temperature (engine on), deg F.

       -  VECT5 = Starting coolant temperature for warm_up counter, deg F.



      OUTPUTS

      Registers:

       -  CHKSUM = KAM memory word which contains the sum of the LTMTB1  or  LTMTB2
          contents.

       -  COLTBU = A register which contains the  column  number  of  the  Adaptive
          Learning Cell to be updated.

       -  EGOCT11 = See above.

       -  EGOCT21 = See above.

       -  KAMRF1/KAMRF2 = See above.




                                         7-71

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  KWUCTR = See above.

       -  LAMWIN = See above.

       -  LPCT1L = See above.

       -  LPCT2L = See above.

       -  LPCT1R = See above.

       -  LPCT2R = See above.

       -  LSTCOL = See above.

       -  LSTROW = See above.

       -  LTMTB1rc = See above.

       -  LTMTB2rc = See above.

       -  RANNUM = See above.

       -  ROWTBU = See above.

       -  nrmces = See above.

       -  nrmrld = See above.

      Bit Flags:

       -  WARM_UP = See above.





























                                         7-72

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: FUEL_ADAPT_COM1


      Calculate the random number to be used this background pass:

      always ---------------------------------| RANNUM = RANNUM * RANMUL +
                                              |           RANMUL / 4
                                              | rancol = rannum_hi
                                              |        = the high byte of the
                                              |           low word of RANNUM
                                              | ranrow = rannum_lo
                                              |        = the low byte of the
                                              |           low word of RANNUM
                                              | RANNUM = the low word of RANNUM
                                              |          (save for next pass)



      Calculate the cell to be updated this background pass:

      IDLE_CELL_SW = 1 -----------------|
       (Idle cells enabled)             |
                                        |AND -| kamcol = ISFLAG
      ISCFLG = 1 -----------------------|     | COLTBU = ISFLAG
       (RPM control)                    |     | kamrow = 8
                                        |     | ROWTBU = 8
      HCAMFG = 0 -----------------|     |     |
                                  |OR --|     |
      HCAMSW = 0 -----------------|           |
                                              |
                                              | --- ELSE ---
                                              |
                                              | kamcol = FN070D(N)
                                              | COLTBU = kamcol + 0.5 + rancol
                                              | kamrow = FN021A(LOAD)
                                              | ROWTBU = kamrow + 0.5 + ranrow























                                         7-73

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Determine if adaptive is enabled/disabled or if adaptive area has changed:

      AFMFLG = 1 -----------------------|
                                        |
      CFMFLG = 1 -----------------------|
                                        |
      MFMFLG = 1 -----------------------|
                                        |
      TFMFLG = 1 -----------------------| 
                                        | 
      OLFLG = 1 ------------------------| 
       (open loop fuel control)         | 
                                        | 
      ADPTMR < ADAPTM ------------------| 
                                        | 
      |kamrow - LSTROW| > DELROW -------|OR --| LPCT1R = 0
                                        |     | LPCT1L = 0
      |kamcol - LSTCOL| > DELCOL -------|     | LPCT2R = 0
                                        |     | LPCT2L = 0
      TFC_HR <> 0 ----------------------|     | EGOCT11 = 0
                                        |     | EGOCT21 = 0
      ACT <= AFACT1 --------------------|     | LSTCOL = kamcol
                                        |     | LSTROW = kamrow
      ACT >= AFACT2 --------------------|     |
                                        |     | Do: NEW_UPRATE_CALC
      LOAD < ADPLOD --------------------|     |
                                              | Exit FUEL_ADAPT_COM1
                                              |
                                              | --- ELSE ---
                                              |
                                              | Continue with FUEL_ADAPT_COM1





























                                         7-74

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calculate the LAMBSE window, LAMWIN:

      always ---------------------------------| LAMWIN = DELAMB + (PTPAMP *
                                              |           AMPMUL)



      Calculate the EGO based learning rate:
      (This logic gives the system the capability to learn faster during "green
       engine" conditions).


      WARM_UP = 0 ----------------------|
                                        |
      TCSTRT < VECT5 -------------------|
                                        |AND -| WARM_UP = 1
      ECT >= VECT3 ---------------------|     | KWUCTR = KWUCTR + 1
                                        |     | Clip KWUCTR to 255
      RUN MODE -------------------------|     


      KWUCTR < KWUCNT ------------------------| egolearn_rat = FAEGCT
       (First few warm_up cycles)             | (Use fast learning rate)
                                              |
                                              | --- ELSE ---
                                              | 
      KWUCTR >= KWUCNT -----------------------| egolearn_rat = ADEGCT
                                              | (Use normal learning rate)
































                                         7-75

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calculate Bank 1 loop counters:

                                   (LPCT1L and LPCT1R)

      EGOCT11 >= egolearn_rat ----------|
                                        |
      EGOFL11 = 1 ----------------------|AND -| Increment LPCT1R (max 255)
                                        |     |
      LAMBSE1 >= (1 + BIAS_G + LAMWIN) -|     | 
                                        |     |
      LIMIT_PURGE = 0 ------------|     |     |
                                  |OR --|     |
      PURGDC = 0 -----------------|           |
                                              | --- ELSE ---
      EGOFL11 = 0 ----------------------|     |
                                        |     | 
      LAMBSE1 <= (1 + BIAS_G - LAMWIN) -|AND -| Increment LPCT1L (max 255)
                                        |
      EGOCT11 >= egolearn_rat ----------|


      Calculate Bank 2 loop counters:

                                   (LPCT2L and LPCT2R)

      NUMEGO = 2 -----------------------|
                                        |           
      EGOCT21 >= egolearn_rat ----------|
                                        |
      EGOFL21 = 1 ----------------------|AND -| Increment LPCT2R (max 255)
      (HEGO21 is rich)                  |     |
                                        |     |
      LAMBSE2 >= (1 + BIAS_G + LAMWIN) -|     | 
                                        |     |
      LIMIT_PURGE = 0 ------------|     |     |
                                  |OR --|     |
      PURGDC = 0 -----------------|           |
                                              | --- ELSE ---
      NUMEGO = 2 -----------------------|     |
                                        |     |
      EGOFL21 = 0 ----------------------|     |
      (HEGO21 is lean)                  |     |
                                        |AND -| Increment LPCT2L (max 255)
      LAMBSE2 <= (1 + BIAS_G - LAMWIN) -|
                                        |
      EGOCT21 >= egolearn_rat ----------|














                                         7-76

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Determine if adaptive cells should be incremented/decremented; Bank 1:

      LTMTB1 cells are updated when the following conditions are satisfied: 
      Note that r = ROWTBU and c = COLTBU in the following charts.


      FN1325Arc >= 0 -------------------|     
                                        |   
      LPCT1R > 2 * UPRATE --------------|AND -| LTMTB1rc = LTMTB1rc - 0.0039 
                                        |     |  (1 bit)
      LTMTB1rc > MINADP ----------------|     | DECREMENT CHKSUM
                                              | LPCT1R = 0
                                              | EGOCT11  = 0
                                              |
                                              | --- ELSE ---
                                              |
      LPCT1R > 2 * UPRATE --------------------| LPCT1R = 0
                                              | EGOCT11 = 0
                                              |
                                              | --- ELSE ---
      LPCT1L > 2 * UPRATE --------------|     |
                                        |     | 
      LTMTB1rc < MAXADP ----------------|AND -| LTMTB1rc = LTMTB1rc + 0.0039
                                        |     |  (1 bit)
      FN1325Arc >= 0 -------------------|     | INCREMENT CHKSUM
                                              | LPCT1L = 0
                                              | EGOCT11 = 0
                                              |
                                              | --- ELSE ---
                                              |
      LPCT1L > 2 * UPRATE --------------------| LPCT1L = 0
                                              | EGOCT11 = 0




























                                         7-77

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Determine if adaptive cells should be incremented/decremented; Bank 2:


      FN1325Arc >= 0 -------------------|
                                        |
      LPCT2R > 2 * UPRATE --------------|                                   
                                        |AND -| LTMTB2rc = LTMTB2rc - 0.0039
      LTMTB2rc > MINADP ----------------|     | DECREMENT CHKSUM
                                        |     | LPCT2R = 0
      NUMEGO = 2 -----------------------|     | EGOCT21  = 0
                                              | 
                                              | --- ELSE ---
      NUMEGO = 2 -----------------------|     | 
                                        |AND -| LPCT2R = 0
      LPCT2R > 2 * UPRATE --------------|     | EGOCT21 = 0
                                              | 
                                              | --- ELSE ---
      LPCT2L > 2 * UPRATE --------------|     |
                                        |     |
      LTMTB2rc < MAXADP ----------------|     |
                                        |AND -| LTMTB2rc = LTMTB2rc + 0.0039
      FN1325Arc >= 0 -------------------|     | INCREMENT CHKSUM
                                        |     | LPCT2L = 0
      NUMEGO = 2 -----------------------|     | EGOCT21 = 0
                                              | 
                                              | --- ELSE ---
      NUMEGO = 2 -----------------------|     | 
                                        |AND -| LPCT2L = 0
      LPCT2L > 2 * UPRATE --------------|     | EGOCT21 = 0































                                         7-78

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: NEW_UPRATE_CALC

      This algorithm calculates the average loop counter value to  be  used  during
      the  adaptive  algorithm.   The  standard four point interpolation routine is
      used.  If, however, one or more  of  the  cells  in  the  four  points  is  a
      reference  cell, then the average of the values in the positive cells is used
      in place of the negative values.

      If the system is in the special idle cells, the UPRATE value is equal to  the
      value in FN1325A specified by kamcol.

      Note:  kamrow_max = maximum number of table rows (excluding the Special Idle
                           Cells row).
             kamrow_spec = row number for the Special Idle Adaptive Cells.
             kamcol_max = maximum number of table columns.


      kamrow = kamrow_spec -------------------| Read the value in FN1325A 
                                              |   specified by kamcol.
                                              | Load this value in UPRATE.
                                              | 
                                              | Exit the subroutine NEW_UPRATE_CALC
                                              |
                                              | --- ELSE ---
                                              |
                                              | Continue with subroutine
                                              |   NEW_UPRATE_CALC


      Separate kamcol and kamrow into an integer and remainder.

      always ---------------------------------| kamcol_rem = kamcol - int(kamcol)
                                              | kamcol = int(kamcol)
                                              | kamrow_rem = kamrow - int(kamrow)
                                              | kamrow = int(kamrow)


      Check for row and column boundary conditions:

      kamcol < kamcol_max -------|      
                                 |AND -| adapt1_uprat = FN1325A(kamcol,kamrow)
      kamrow < kamrow_max -------|     | adapt2_uprat = FN1325A(kamcol + 1,kamrow)
                                       | adapt3_uprat = FN1325A(kamcol,kamrow + 1)
                                       | adapt4_uprat = 
                                       |            FN1325A(kamcol + 1,kamrow + 1)
                                       |
                                       | --- ELSE ---
                                       |
      kamcol = kamcol_max -------|     |
                                 |AND -| adapt1_uprat = FN1325A(kamcol,kamrow)
      kamrow = kamrow_max -------|     | adapt2_uprat = adapt1_uprat
                                       | adapt3_uprat = adapt1_uprat
                                       | adapt4_uprat = adapt1_uprat
                                       | (use FN1325A 4 times so not to wrap
                                       |  around table or use special idle cells)
                                       |
                                       | --- ELSE ---

                                (continued on next page)

                                         7-79

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

                                       |
      kamcol = kamcol_max -------------| adapt1_uprat = FN1325A(kamcol,kamrow)
                                       | adapt2_uprat = adapt1_uprat
                                       | adapt3_uprat = FN1325A(kamcol,kamrow + 1)
                                       | adapt4_uprat = adapt3_uprat
                                       | (use kamcol_max values twice so not
                                       |  to wrap around table)
                                       | 
                                       | --- ELSE ---
                                       |
      kamrow = kamrow_max -------------| adapt1_uprat = FN1325A(kamcol,kamrow)
                                       | adapt2_uprat = FN1325A(kamcol + 1,kamrow)
                                       | adapt3_uprat = adapt1_uprat
                                       | adapt4_uprat = adapt2_uprat
                                       | (use kamrow_max values twice so not to
                                       |  wrap around table or use special
                                       |  idle cells)


      always --------------------------| uprat_cnt = 0


      Check for reference cells:

      adapt1_uprat >= 0 ---------------| uprat_cnt = uprat_cnt + 1
                                       | adapt1_uprat_ref = 0
                                       | 
                                       | --- ELSE ---
                                       |
                                       | adapt1_uprat = 0
                                       | adapt1_uprat_ref = 1


      adapt2_uprat >= 0 ---------------| uprat_cnt = uprat_cnt + 1
                                       | adapt2_uprat_ref = 0
                                       | 
                                       | --- ELSE ---
                                       |
                                       | adapt2_uprat = 0
                                       | adapt2_uprat_ref = 1


      adapt3_uprat >= 0 ---------------| uprat_cnt = uprat_cnt + 1
                                       | adapt3_uprat_ref = 0
                                       | 
                                       | --- ELSE ---
                                       |
                                       | adapt3_uprat = 0
                                       | adapt3_uprat_ref = 0









                                         7-80

                      FUEL STRATEGY, ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      adapt4_uprat >= 0 ---------------| uprat_cnt = uprat_cnt + 1
                                       | adapt4_uprat_ref = 0
                                       |
                                       | --- ELSE ---
                                       |
                                       | adapt4_uprat = 0
                                       | adapt4_uprat_ref = 1


      If all cells are referenced cells, set UPRATE to a maximum value.  Else, 
      find UPRATE average.

      uprat_cnt = 0 -------------------| UPRATE = 127 (maximum value)
                                       |
                                       | --- ELSE ---
                                       | 
                                       | uprate_avg = (adapt1_uprat + 
                                       |       adapt2_uprat + adapt3_uprat + 
                                       |       adapt4_uprat) / uprat_cnt
                                       | 
                                       | Truncate UPRATE to an integer


      adapt1_uprat_ref = 1 ------------| adapt1_uprat = uprate_avg


      adapt2_uprat_ref = 1 ------------| adapt2_uprat = uprate_avg


      adapt3_uprat_ref = 1 ------------| adapt3_uprat = uprate_avg


      adapt4_uprat_ref = 1 ------------| adapt4_uprat = uprate_avg


      always --------------------------| Make kamcol and kamrow real numbers
                                       |   kamcol = kamcol + kamcol_rem
                                       |   kamrow = kamrow + kamrow_rem
                                       | 
                                       | Do four point interpolation using kamrow
                                       |  and kamcol, and the four adaptn_uprat
                                       |  values calculated above.  Store this
                                       |  value in UPRATE.

      END: NEW_UPRATE_CALC             















                                         7-81

                    FUEL STRATEGY, KAM ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 KAM ADAPTIVE FUEL LOGIC


      OVERVIEW 

      The adaptive fuel table stored in KAM is used as a reference  for  both  open
      and closed loop fuel control.  The method by which the adaptive fuel table is
      referenced as shown below.

      Notes:
      HCAMSW is a calibration switch allowing  the  developer  to  select  how  the
      adaptive fuel idle cells are to be used.  If HCAMSW is set to 1, the adaptive
      fuel idle cells are used only when in the filtered air mass region and no RPM
      adder above base idle is present (HCAMFG = 0).  This includes FN825A, FN825B,
      FN826A and BZZRPM.

      For purposes of interpolation, the LTMTBn 80  to  LTMTBn  85  cells  are  not
      included.  These cells should correspond to the special idle cells.  The idle
      adaptive cells are treated as containing 0.5.









































                                         7-82

                    FUEL STRATEGY, KAM ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  LTMTB1rc = HEGO11 adaptive fuel cell which corresponds to
                     r = Row number of HEGO11 table 
                     c = Column number of HEGO11 table

       -  LTMTB2rc = HEGO21 adaptive fuel cell which corresponds to
                     r = Row number of HEGO11 table 
                     c = Column number of HEGO11 table

      Bit Flags:

       -  CRKFLG = Crank Flag; 1 -> In crank mode, 0 -> Not in crank mode.

       -  HCAMFG = Hi Cam Flag; 1 -> Indicates an RPM adder above idle is  present,
          0 -> Indicates nodesired engine speed adder exists.

       -  ISCFLG = ISC mode indicator flag;  -1  ->  Dashpot  Mode,  0  ->  Dashpot
          Preposition Mode, 1 -> closed Loop RPM Control Mode, 2 -> Closed Loop RPM
          Control (Lock_out entry to RPM control).

       -  ISFLAG = Flag that indicates the degree of loading on the engine at idle;
          0  -> Drive, 1 -> Drive and A/C (WAC Relay De-Energized), 2 -> Neutral, 3
          -> Neutral and A/C (WAC Relay De-Energized).

       -  LEGOFG11 = Lack of HEGO11 switching.

       -  LEGOFG21 = Lack of HEGO21 switching.

      Calibration Constants:

       -  FN070(N) = Normalizing function for engine speed.

       -  HCAMSW = Switch which allows selection of when and  which  adaptive  fuel
          cells are to be used.  See OVERVIEW above.

       -  IDLE_CELL_SW = Calibration switch to  enable  use  of  the  special  idle
          cells; 1 -> Special cells enable, 0 -> Special cells disabled.

       -  NUMEGO = Constant indicating number of HEGO sensors present; one or two.



      OUTPUTS

      Registers:

       -  KAMREF1 = Adaptive fuel strategy correction factor for HEGO11.

       -  KAMREF2 = Adaptive fuel strategy correction factor for HEGO21.

       -  NORM_FN070 = The output of FN070(N).




                                         7-83

                    FUEL STRATEGY, KAM ADAPTIVE FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: FUEL_KAM_ADAPT_COM1


      CRKFLG = 1 ------------------|
       (CRANK Mode)                |
                                   |OR --| KAMRF1 = 1.0
      LEGOFG11 = 1 ----------|     |     | KAMRF2 = 1.0
                             |AND -|     | Use no interpolation
      LEGOFG21 = 1 ----------|           | 
                                         | --- ELSE ---
      IDLE_CELL_SW = 1 ------------|     |
       (Idle cells enabled)        |     |
                                   |     |
      ISCFLG > 0 ------------------|AND -| KAMRF1 = 0.5 + LTMTB1rc
                                   |     | KAMRF2 = 0.5 + LTMTB2rc
      HCAMFG = 0 ------------|     |     | r = 8, c = ISFLAG
       (No RPM adder)        |OR --|     | Use no interpolation
                             |           | 
      HCAMSW = 0 ------------|           | 
       (Ignore HCAMFG)                   |
                                         | --- ELSE ---
                                         |
                                         | KAMRF1 = 0.5 + LTMTB1rc 
                                         | KAMRF2 = 0.5 + LTMTB2rc
                                         | Use 4 point interpolation



      Lack of HEGO switching affect on KAMRF1/2:



      LEGOFG21 = 1 ----------------|
                                   |OR --| KAMRF2 = KAMRF1
      NUMEGO = 1 ------------------|     |
                                         | --- ELSE ---
                                         |
      LEGOFG11 = 1 ----------------------| KAMRF1 = KAMRF2





















                                         7-84

                   FUEL STRATEGY, DECEL FUEL SHUT OFF LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                               DECEL FUEL SHUT OFF LOGIC


|     OVERVIEW 

|     The Fuel Shutoff strategy is divided into two sub-strategies: 

|         1) Decel Fuel Shut Off

|         2) Manual Transmission Shift Fuel Shut Off.


|     The Decel Fuel Shut Off strategy turns off the fuel flow during specific load
|     and  rpm  condition only during Closed Throttle Mode.  The FUELPWs are zeroed
|     during a decel until the rpm is within the band created by [DFSRPM -  DFSRPH]
|     of the idle rpm range.

|     The Manual Transmission Shift Fuel Shut Off strategy turns off fuel  flow  at
|     the  beginning  of  the  shift,  until  the rpm is within the band created by
|     [SHFRPM - SHFHYS] of the idle speed (or until the transmission  has  been  in
|     Neutral for DSTM2 seconds).


|     Calibration Guide:

|     The use of Decel Fuel Shutoff can aggravate Clunk.   Therefore,  DFSO  should
|     occur  only at low airflow in order to minimize the rate of change of Torque.
|     CTDFSO can be used to delay DFSO.

|     CTEDSO should be greater than CTDFSO to prevent DFSO after Tip-in, Tip-out.

|     For MANUAL TRANSMISSIONS:  SHFRPM should be greater than DFSRPM.




























                                         7-85

                   FUEL STRATEGY, DECEL FUEL SHUT OFF LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     DEFINITIONS

|     INPUTS

|     Registers:

|      -  APT = At Part Throttle; -1 -> Closed throttle, 0 -> Part throttle,
|         1 -> Wide Open throttle. 

|      -  CTTMR = Time since entering Closed throttle mode, secs.  CTTMR is used to
|         delay Decel Fuel Shutoff (DFSO).

|      -  CYLARC_BG = Air Charge Mass inducted per Intake Stroke, lbm/Intake.

|      -  DSDRPM = Desired engine speed.

|      -  ECT = Engine Coolant Temperature, deg F.

|      -  LOAD = Normalized CYLARC_BG divided by SARCHG.

|      -  N = Engine speed, rpm.

|      -  NDDTIM = Time since Transmission shift, sec.  In the DFSO Strategy,  this
|         timer  is  used  to  delay  Decel Fuel Shutoff if a vehicle with a manual
|         transmission shifts into Neutral during the decel.

|      -  NOVS = N/VSBAR to infer transmisssion gear.

|      -  PPCTR = PIP counter for Fuel Ramp, unitless.

|      -  VSBAR = Vehicle speed, mph.

|     Bit Flags:

|      -  NDSFLG = Neutral/Drive Flag; 1 -> Drive.

|     Calibration Constants:

|      -  CTDFSO = Minimum time delay after  entering  Closed  Throttle  to  enable
|         DFSO, sec.

|      -  CTEDSO = Decel Fuel Shutoff time delay during extended decels.  This time
|         delay  allows  DFSO during extended decels (ie., down mountains), even if
|         times at Part Throttle are very short (light Tip-ins), sec.

|      -  DFHLOD = Minimum load for hard decel fuel shut off in lower gears.

|      -  DFHLODH = Hysteresis for DFHLOD.

|      -  DFLOD = Maximum load to enable decel Fuel Shut-off.

|      -  DFLODH = Hysteresis for DFLOD.

|      -  DFNOVS = NOVS value below which DFSO permitted.

|      -  DFNOVH = Hysteresis for DFNOVS.




                                         7-86

                   FUEL STRATEGY, DECEL FUEL SHUT OFF LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|      -  DFSECT = Minimum ECT to allow Decel Fuel Shutoff.

|      -  DFSVS = Minimum VSBAR for Decel fuel shut off, mph.

|      -  DFSVSH = Hysteresis for DFSVS.

|      -  DFSRPH = Hysteresis for DFSRPM, unitless.

|      -  DFSRPM = Minimum rpm for Decel fuel shutoff, rpm.

|      -  DSTM2  =  Maximum  time  that  DFSO  logic  is  enabled   during   manual
|         transmission shifts, secs.

|      -  NDFSO = Neutral deceleration fuel shut off; 1 -> DFSO in neutral.

|      -  PIPNUM = Number of PIPS to remain in Open Loop Fuel after DFSO.  Prevents
|         LAMBSE from ramping rich due to normal transport delay time.  Set to 1 to
|         calibrate out.

|      -  SHFHYS = Hysteresis term, rev/min.  If the rpm  drops  this  amount,  the
|         normal Fuel Strategy operates.

|      -  SHFRPM = Minimum rpm at which DFSO  logic  is  enabled,  rev/min.   (This
|         corresponds to the rpms during the shift.)

|      -  TRLOAD = Transmission Load switch;
|                   0 -> Manual Transmission, no clutch or gear switches,
|                        forced neutral state (NDSFLG = 0).
|                   1 -> Manual Transmission, no clutch or gear switch.
|                   2 -> Manual Transmission, one clutch or gear switch.
|                   3 -> Manual Transmission, both clutch and gear switches.
|                   4 -> Auto Transmission, non-electronic, neutral drive switch.
|                   5 -> Auto Transmission, non-electronic, neutral pressure
|                        switch, (AXOD).
|                   6 -> Auto Transmission, electronic, PRNDL sensor - park,
|                        reverse, neutral, overdrive, manual 1, manual 2.
























                                         7-87

                   FUEL STRATEGY, DECEL FUEL SHUT OFF LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     OUTPUTS

|     Registers:

|      -  PPCTR = PIP counter for Fuel Ramp, unitless.

|     Bit Flags:

|      -  DCELQ4 = Flip flop state flag using engine  speed  to  disable  DFSO  for
|         manual transmissions during gear shifts.

|      -  DCELQ5 = Flip flop state flag using engine speed and load to engage  DFSO
|         during closed throttle decelerations.

|      -  DFSFLG = Indicates DECEL Fuel shutoff.

|      -  DFSVS_HYS_FG = Flip flop state flag using vehicle speed to engage DFSO.

|      -  FLG_DFSO_LOAD = Flip flop state flag using low load values to indicate  a
|         hard decel to engage DFSO.

|      -  FLG_DFSO_NOVS = Flip flop state flag using transmission  gear  to  engage
|         DFSO.





































                                         7-88

                   FUEL STRATEGY, DECEL FUEL SHUT OFF LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     PROCESS 
|                            STRATEGY MODULE: FUEL_DFSO_COM1


|     Evaluate each flip flop each background pass:


|     VSBAR >= DFSVS ----------------------|S Q -| DFSVS_HYS_FG
|                                          |
|     VSBAR < DFSVS - DFSVSH --------------|C


|     LOAD <= DFHLOD ----------------------|S Q -| FLG_DFSO_LOAD
|      (hard decel)                        |
|                                          |
|     LOAD > DFHLOD + DFHLODH -------------|C


|     NOVS <= DFNOVS ----------------------|S Q -| FLG_DFSO_NOVS
|      (in higher gear)                    |
|                                          |
|     NOVS > DFNOVS + DFNOVH --------------|C


|     N - DSDRPM > SHFRPM -----------------|S Q -| DCELQ4
|                                          |
|     N - DSDRPM <= SHFRPM - SHFHYS -------|C
|      (Short rpm)


|     N - DSDRPM > DFSRPM -----------|
|      (RPM high enough)             |AND -|S Q -| DCELQ5
|                                    |     |
|     LOAD <= DFLOD -----------------|     |
|      (Not making power)                  |
|                                          | 
|     N - DSDRPM < DFSRPM - DFSRPH --|     |
|                                    |OR --|C
|     LOAD > DFLOD + DFLODH ---------|





















                                         7-89

                   FUEL STRATEGY, DECEL FUEL SHUT OFF LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                                       "A" LOGIC

|               MANUAL OR AUTO TRANS - DFSO DURING CLOSED THROTTLE DECEL


|     NDSFLG = 1 --------------------|
|      (Trans. in gear)              |OR --|
|                                    |     |
|     NDFSO = 1 ---------------------|     |
|                                          |
|     CTTMR >= CTDFSO ---------------------|
|                                          |
|     CTTMR > CTEDSO ----------------|     |
|      (Extended decel)              |     |AND -| "A"
|                                    |     |
|     FLG_DFSO_LOAD = 1 -------------|OR --|
|                                    |     |
|     FLG_DFSO_NOVS = 1 -------------|     |
|                                          |
|     DCELQ5 = 1 --------------------------|



|                                       "B" LOGIC

|                     MANUAL TRANSMISSION - DFSO DURING GEAR CHANGE


|     TRLOAD <= 3 -------------------------|
|      (Manual transmission)               |
|                                          |
|     NDSFLG = 0 --------------------------|
|                                          |AND -| "B"
|     NDDTIM < DSTM2 ----------------------|
|                                          |
|     DCELQ4 = 1 --------------------------|
























                                         7-90

                   FUEL STRATEGY, DECEL FUEL SHUT OFF LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     "A" ---------------------------|
|                                    |OR --|
|     "B" ---------------------------|     |
|                                          |
|     APT = -1 ----------------------------|
|      (Closed throttle)                   |
|                                          |
|     ECT >= DFSECT -----------------------|AND -| TURN OFF FUEL
|      (Engine warmed up)                  |     | D = 0
|                                          |     | DFSFLG = 1
|     DFSVS_HYS_FG = 1 --------------------|     | PPCTR = 0
|                                          |     |
|     RUNNING = 0 -------------------------|     |
|      (Not in engine running self test)         | --- ELSE ---
|                                                |
|                                                | TURN ON FUEL
|                                                | (Driver wants to
|                                                |  accelerate)
|                                                | D = 1.0
|                                                | DFSFLG = 0


|     NOTE:  PPCTR is incremented in the foreground.





































                                         7-91

               FUEL STRATEGY, FUEL PULSEWIDTH, BACKGROUND FUEL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                                    BACKGROUND FUEL


|     OVERVIEW

|     The desired fuel air ratio for each bank is calculated  once  per  background
|     loop, under non-cranking conditions.  In addition, a multiplier that contains
|     the decel fuel multiplier and the multiplier that indicates pulses per engine
|     event  are calculated each time.  Under underspeed conditions, the multiplier
|     also contains  the  underspeed  fuel  multiplier.   In  crank  mode,  a  fuel
|     pulsewidth  value  is  calculated  based  on  number  of PIP events in crank,
|     barometric pressure, and engine temperature.



|     NOTE:  Bracketed parameters are non-displayable temporary registers.

|     DEFINITIONS

|     INPUTS

|     Registers:

|      -  ACT = Air Charge Temperature, deg F.

|      -  AHISL_TICK  =  Dual  slope  high  slope  in  lbs/tick,  compensated   for
|         temperature.

|      -  ALOSL_TICK  =  Dual  slope  low  slope  in  lbs/tick,   compensated   for
|         temperature.

|      -  APT = At Part Throttle - indicates throttle mode; -1 -> closed  throttle,
|         0 -> part throttle, 1 -> wide open throttle.

|      -  BKPT_PW  =  Dual  slope  fuel  breakpoint  divided  by  the   low   slope
|         (temperature compensation), ticks.

|      -  BP = Barometric Pressure, " Hg.

|      -  CRKPIP_CTR_BG = Background PIP counter for crank fuel.

|      -  CRK_PIP_INJ = Number of PIPs per injector firings during crank.

|      -  D = Deceleration fuel shutoff multiplier.

|      -  ECT = Engine Coolant Temperature, deg F.

|      -  FB_DIFF = Difference between FUEL_BKPT divided by temperature compensated
|         high  slope  and  FUEL_BKPT divided by temperature compensated low slope,
|         ticks.

|      -  HICOMP = Hot injector compensation enrichment factor.

|      -  KAMRFn = Fuel correction factor obtained from the  adaptive  fuel  tables
|         that  use  the  EGO  sensor(s)  for input.  KAMRFn = [0.5 + LTMTBn(r,c)],
|         where:  c = column, r = row, n = bank number.




                                         7-92

               FUEL STRATEGY, FUEL PULSEWIDTH, BACKGROUND FUEL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|      -  LAMBSEn = The stoichiometric equivalence value; n = bank number.

|      -  VBAT = Battery voltage inferred from IIVPWR, volts.

|     Bit Flags:

|      -  ALT_CAL_FLG = Flag to indicate use of alternate calibration.

|      -  CRKFLG = Engine mode flag; 1 -> crank mode, 0 -> underspeed/run mode.

|      -  UNDSP = Engine mode flag; 1 -> crank/underspeed mode, 0 -> run mode.

|     Calibration Constants:

|      -  AHISL = High fuel flow injector slope, lb/sec.

|      -  ALOSL = Low fuel flow injector slope, lb/sec.

|      -  FN023(CRKPIP_CTR_BG) = Normalizing function for  number  of  PIP's  since
|         start of crank.

|      -  FN024(ACT) = Normalizing function for air charge temperature.

|      -  FN348A(ECT) = Crank fuel pulsewidth  multiplier  as  a  function  of  ECT
|         (should be calibrated in pw/pip).

|      -  FN348BP(BP) = Crank fuel pulsewidth multiplier as a function of BP.

|      -  FN367(VBAT) = Injector offset as a function of battery voltage, second.

|      -  FN387A(ECT) = Fuel pulsewidth multiplier as a function of ECT.

|      -  FN387_ALT(ECT) = Alternate FN387A used when ALT_CAL_FLG = 1

|      -  FN1350 = Crank fuel pulsewidth
|                  X = FN023(CRKPIP_CTR_BG)
|                  Y = FN024(ACT)

|      -  FUEL_BKPT = The amount of fuel flow when transfer is made  from  the  low
|         slope to the high slope.

|      -  MINPW = Minimum pulsewidth for requested fuel.

|     Non-Calibratable Constants:

|      -  [stcf] = Seconds-to-Ticks conversion factor.














                                         7-93

               FUEL STRATEGY, FUEL PULSEWIDTH, BACKGROUND FUEL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     OUTPUTS

|     Registers:

|      -  AHISL_TICK = See above.

|      -  ALOSL_TICK = See above.

|      -  BKPT_PW = See above.

|      -  CRK_FUL = Fuel pulsewidth used in crank mode.

|      -  F_A_RATIOn = Desired fuel-to-air ratio for EGO-n.

|      -  FB_DIFF = See above.

|      -  LBMF_INJn = Fuel mass that will be injected when an  injector  is  turned
|         on, lbm.

|      -  MINPWT = Minimum fuel pulsewidth in ticks.

|      -  MINPW_LBMF = MINPW * ALOSL.

|      -  PWOFF = Injector pulsewidth offset, clock ticks.

|      -  PWOFS_D = DISPLAY ONLY; injector pulsewidth offset - output of FN367,


































                                         7-94

               FUEL STRATEGY, FUEL PULSEWIDTH, BACKGROUND FUEL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     PROCESS
|                          STRATEGY MODULE: FUEL_BG_CALC_COM8


|     Calculate  the  following  parameters  for  use  in   the   foreground   fuel
|     calculation.


|     always ------------------| AHISL_TICK = AHISL / [(1 + HICOMP) * [stcf]]
|                              | ALOSL_TICK = ALOSL / [(1 + HICOMP) * [stcf]] =
|                              |  AHISL_TICK * ALOSL / AHISL
|                              | BKPT_PW = FUEL_BKPT / ALOSL_TICK 
|                              | FB_DIFF = (FUEL_BKPT / AHISL_TICK) - BKPT_PW
|                              | MINPWT = MINPW * [stcf]
|                              | MINPW_LBMF = MINPWT * ALOSL_TICK


|     CRKFLG = 1 --------|      
|      (in crank mode)   |AND -| CRK_FUL = FN348A * FN348BP * FN1350 * CRK_PIP_INJ
|                        |     | LBMF_INJ1 = [(CRK_FUL * [stcf]) + FB_DIFF] *
|     APT < 1 -----------|     |              AHISL_TICK  
|      (not at WOT)            | LBMF_INJ2 = LBMF_INJ1
|                              |
|                              | --- ELSE ---
|                              |
|     CRKFLG = 1 --------------| CRK_FUL = 0
|                              | (de-choke)
|                              | LBMF_INJ1 = 0
|                              | LBMF_INJ2 = 0


|     ALT_CAL_FLG = 1 ---------| fn387a = FN387_ALT(ECT)
|                              |
|                              | --- ELSE ---
|                              |
|                              | fn387a = FN387A(ECT)


|     UNDSP = 1 ---------------| F_A_RATIO1 = (KAMRF1 * fn387A * D) / 
|      (in underspeed mode)    |               (14.64 * LAMBSE1)
|                              | F_A_RATIO2 = (KAMRF2 * fn387A * D) / 
|                              |               (14.64 * LAMBSE2)
|                              |
|                              | --- ELSE ---
|                              |
|                              | F_A_RATIO1 = (KAMRF1 * D) / 
|                              |               (14.64 * LAMBSE1)
|                              | F_A_RATIO2 = (KAMRF2 * D) / 
|                              |               (14.64 * LAMBSE2)


|     Calculate the fuel pulsewidth offset from zero  to  low  slope  intercept  in
|     seconds (PWOFS_D) and in ticks (PWOFF).


|     always ------------------| PWOFS_D = FN367(VBAT)
|                              |
|                              | PWOFF = PWOFS_D * [stcf]


                                         7-95

               FUEL STRATEGY, FUEL PULSEWIDTH, BACKGROUND FUEL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                      DUAL SLOPE INJECTOR CALIBRATION PARAMETERS

|                       FUEL MASS VERSUS FUEL PULSEWIDTH DIAGRAM

|     FUEL (lbm/injection)

|     3.0e-5 |
|            |                                                 ..
|            |                                               ..
|            |                                             ..
|            |                                           ..
|     2.5e-5 |                                         ..
|            |                                       ..
|            |                                     ..|
|            |                                   ..  |
|            |                                 ..    |
|            |                               ..      | AHISL
|            |                             ..        |
|            |                           ..__________|
|            |                         ..
|            |                       ..
|     1.5e-5 |                     ..    
|            | ----------------->.<---- FUEL_BKPT
|            |                  .
|            |                 .|
|            |                . |ALOSL
|     1.0e-5 |               .  |
|            |              .___|  
|            |             .   
|            |            .
|            |            |     
|            |         (.)| 
|            |        (.) |     
|            |       (.)  |     
|            |      (.)   |     
|            |     (.)    |      
|          0 .__________________________________________________________*
|               |  ^      |         |    |    |    |    |    |    | Pulsewidth
|              0.5 |     1.5       2.5       3.5       4.5       5.5  (seconds)
|                  |      |
|                  |<---->|MINPW
|                  |
|               FN367(VBAT) 

|     NOTES:  FN367 (a.k.a.  PWOFF) is added into the pulsewidth in the  foreground
|     in module FUEL_INJ_OUT_COMx.


|     NOTE:  A calibration guide is available for determination  of  ALOSL,  AHISL,
|     FN367, and FUEL_BKPT from injector flow data.










                                         7-96

             FUEL STRATEGY, BACKGROUND TRANSIENT FUEL BACKGROUND - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             BACKGROUND TRANSIENT FUEL LOGIC


      OVERVIEW

      Background:

      A liquid fuel film resides on the walls of the intake ports and valves.   The
      film  mass varies primarily with manifold absolute pressure and manifold wall
      temperature.  During steady state conditions, the film mass is constant.  The
      rates  of  condensation  and  evaporation  on  the  manifold walls are equal.
      During transients, the film mass changes creating air/fuel ratio errors.


       .  During accelerations, the film mass increases.  Fuel will condense faster
          on  the  intake  ports  and  valves  until equilibrium is reached.  In an
          uncompensated  system  at  stoichiometry,  fuel  is  diverted  from   the
          cylinders, resulting in a momentary lean condition.

       .  During decelerations, the  film  mass  decreases.   Fuel  will  evaporate
          faster from the intake ports and valves until equilibrium is reached.  In
          an uncompensated system at stoichiometry, fuel is added to the cylinders,
          resulting in a momentary rich condition.


      The problem is magnified in closed loop fuel systems because the fuel control
      will incorrectly chase the transient air/fuel excursions.



      Intent:

      The transient fuel compensation strategy augments the closed/open  loop  fuel
      control  to  keep  cylinder  events  at the desired air/fuel ratio during all
      engine transients.  The goals are:


       .  To eliminate lean air/fuel excursions during accelerations.

       .  To eliminate rich air/fuel excursions during decelerations.




















                                         7-97

             FUEL STRATEGY, BACKGROUND TRANSIENT FUEL BACKGROUND - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Approach:


       .  The film mass rate of change is proportional to the amount of  fuel  that
          must be added to or subtracted from the manifold film.

                                               /                     \
             FILM MASS           1            |  STEADY       ACTUAL  |
             RATE OF      = --------------- * |  STATE    -           |
             CHANGE          TIME CONSTANT    | FILM MASS   FILM MASS |
                                               \                     /
             EFTR = (EISF_FG - AISF)/EFTC 
             WHERE:
             EISF_FG = (background correction + foreground correction)

          (background correction) = FN1321(ECT,LOAD) * FN313(N) * MTEISF 

          (foreground correction) = [(delta eisf)/(delta cyl_air_chg)] 
                                    * (delta cyl_air_chg)

                                  = (FN312S(ECT) * FN313(N) * MTEISF)
                                    * (CYL_AIR_CHG - TFC_CHG)

             EFTC = FN1322DL(ECT,LOAD) * MTEFTC  (during decels)
                                -- or --
                  = FN1322AL(ECT,LOAD) * MTEFTC  (during accels)


       .  Steady state film mass is calculated  from  N,  LOAD,  ECT  and  must  be
          calibrated for different applications.

       .  The actual film mass is a time integration  of  the  film  mass  rate  of
          change  and  is  calculated  in  foreground  after  the  final  aircharge
          calcuation once per pip period.

                                               /                           \ 
                     ACTUAL      ACTUAL       | FILM MASS        TIME SINCE |
                     FILM     =  FILM    +    | RATE OF     *      LAST     |
                     MASS        MASS         | CHANGE            UPDATE    |
                                               \                           / 


                     AISF =  AISF + (EFTR * DT12S * stcf)

       .  The computer adjusts fuel flow to match the transient  fuel  flow  to  or
          from the manifold fuel film.

                 COMPENSATED   CLOSED/OPEN LOOP   FILM MASS RATE OF CHANGE
                  FUEL FLOW  =    FUEL FLOW     +   OR FUEL FLOW
                  (ACTUAL)      (BASE STRATEGY)    (TFC STRATEGY)










                                         7-98

             FUEL STRATEGY, BACKGROUND TRANSIENT FUEL BACKGROUND - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  AISF = Actual Intake Surface Fuel.

       -  ATMR1 = Time since exiting Crank Mode, secs.

       -  CTTMR = Time since entering Closed throttle mode, secs.  CTTMR is used to
          delay Decel Fuel Shutoff (DFSO).

       -  CYL_AIR_CHG  =  Current  cylinder  aircharge  to  be  used  in  the  fuel
          calculation, lbm.

       -  DSDRPM = Idle speed control desired RPM.

       -  DT12S = The period of time between two  adjacent  rising  edges  of  PIP,
          ticks/pip.

       -  EFTR = Equilibrium Fuel Transfer Rate during the previous  program  pass.
          lbm/sec.

       -  ISCFLG = ISC Mode Flag; 1 -> rpm control mode.

       -  LOAD = Universal load as ratio of aircharge over standard.

       -  N = RPM.

       -  TFC_TMR = Transient fuel timer, secs.

      Bit Flags:

       -  CRKFLG = Flag indicating engine mode; 1 -> engine Cranking, 0  ->  engine
          not Cranking.

       -  DFSFLG = Indicates Decel Fuel Shutoff.

       -  EFFLG1 = Equilibrium Fuel Flag.  This flag controls the initialization of
          AISF.

       -  TFC_FG_EN = Foreground TFC_HR calculation enable  flag;  1  ->  calculate
          TFC_HR, 0 -> don't calculate TFC_HR.

       -  UNDSP = 1 -> engine in UNDERSPEED or CRANK, 0 -> engine not in UNDERSPEED
          or CRANK.

      Calibration Constants:

       -  AISFM = Multiplier on AISF when in DFSO.   Determines  Fuel  Puddle  size
          upon re-entering normal fuel.

       -  FN018 = ATMR1 normaling function for valve temp.  compensator tables.

       -  FN022C = ECT normalizing function for transient fuel tables.




                                         7-99

             FUEL STRATEGY, BACKGROUND TRANSIENT FUEL BACKGROUND - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FN071L = LOAD Normalizing function; used for table lookup.

       -  FN312S(ECT) = Change in the transient fuel  puddle  mass  per  change  in
          aircharge.

       -  FN313(N) = Equilibrium  intake  surface  fuel  engine  speed  multiplier,
          unitless.

       -  FN1321 = Equilibrium Intake Surface Fuel Table.
                   X = FN022C(ECT)
                   Y = FN071L(LOAD)

       -  FN1322AL = Transient fuel time constant for accels.
                    X = FN022C(ECT)
                    Y = FN071L(LOAD)

       -  FN1322DL = Transient fuel time constant for decels.
                    X = FN022C(ECT)
                    Y = FN071L(LOAD)

       -  FN1323A = Transient fuel accel time  since  start  multiplier,  unitless.
          This  empirical  table  compensates  for intake valve temperatures during
          warm-up.  X = FN022C(ECT) Y = FN018(ATMR1)

       -  FN1323D = Transient fuel decel time  since  start  multiplier,  unitless.
          This  empirical  table  compensates  for intake valve temperatures during
          warm-up.  X = FN022C(ECT) Y = FN018(ATMR1)

       -  MTEFTC = Equilibrium Fuel transfer constant multiplier.

       -  MTEISF = Equilibrium intake surface fuel multiplier.

       -  SARCHG = Standard Air Charge, lbm/Intake = 4.4256 * 10E-5 * (Engine  size
          in cubic inches / number of cylinders).

       -  TFC_IDLE_OFF = Calibration switch which disables use of transient fuel at
          idle; 1 -> no TFC at idle, 0 -> TFC at idle.

       -  TFCISW = Transient fuel compensation initialization switch.

       -  TFCTM  =  Time  delay  after  start  before   enabling   Transient   Fuel
          compensation.

       -  TFSMN = Maximum rpm deadband above Idle rpm  to  disable  Transient  Fuel
          during Dashpot Mode, rpm.

       -  TIP_OUT_TIME = The time after  returning  to  closed  throttle  when  the
          transient is over.












                                        7-100

             FUEL STRATEGY, BACKGROUND TRANSIENT FUEL BACKGROUND - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  AISF = See above.

       -  EFTR = See above.

       -  EISF = Background based steady state fuel film mass, lbm.

       -  EISF_FG = Foreground based steady state fuel film mass, lbm.

       -  EFTC = Time Constant for transient fuel, sec.

       -  TFC_HR = Fuel  mass  per  injection  from  transient  fuel  compensation,
          lbm/pip.

       -  TFC_MULT = Transient fuel multiplier, unitless.

       -  TFC_CHG = Aircharge that transient fuel (background)  was  evaluated  at,
          lbm.

       -  TFC_SLOPE = Change in the  transient  fuel  puddle  mass  per  change  in
          aircharge.

      Bit Flags:

       -  EFFLG1 = See above.

       -  TIP_OUT_OVER = Tip-out transient over;1 -> tip-out over.

       -  TFC_FG_EN = See above




























                                        7-101

             FUEL STRATEGY, BACKGROUND TRANSIENT FUEL BACKGROUND - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: FUEL_TRANS_BG_COM1


                         BACKGROUND TRANSIENT FUEL COMPENSATION


      These calculations are performed during each program pass  (i.e., each
      background loop),  with the exception that NONE of the Background Transient
      Fuel Compensation calculations or control logic are executed during Engine
      Running VIP Self-Test.

      1) Calculate EISF; the equilibrium intake surface fuel and slope of Puddle 
      Mass per Aircharge to be used in the foreground if conditions permit.  LOAD 
      is recalculated  with the updated value for CYL_AIR_CHG.  TFC_CHG is stored 
      to reference the delta aircharge calculation in the foreground.

      UNDSP = 0 ------------------------------------| Increment TFC_TMR
       (in run mode)                                |  (clip at 255)
                                                    |
                                                    | --- ELSE ---
                                                    | 
                                                    | TFC_TMR = 0

      TFC_TMR < TFCTM ------------------------------| EFFLG1 = 0
       (make sure manifold emptying is over)        | TFC_HR = 0
                                                    | TFC_FG_EN = 0
                                                    |  (do not perform transient
                                                    |   fuel compensation)
                                                    |
                                                    | EXIT THIS ROUTINE
                                                    |
                                                    | --- ELSE ---
                                                    |
                                                    | LOAD = CYL_AIR_CHG / SARCHG 
                                                    | (update load value)
                                                    |
                                                    | EISF = FN1321(ECT,LOAD) 
                                                    |        * FN313(N) * MTEISF
                                                    | 
                                                    | CONTINUE THIS ROUTINE



















                                        7-102

             FUEL STRATEGY, BACKGROUND TRANSIENT FUEL BACKGROUND - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      2) Calculate if transient fuel should be enabled.

      EFFLG1 = 0 -----------------------------| 
                                              |AND -| EFFLG1 = 1
      TFCISW = 1 -----------------------------|     | AISF = EISF     
       (assume wet manifold at startup)             | TFC_HR = 0   
                                                    | TFC_FG_EN = 0
                                                    |  (do not run TFC)
                                                    |
                                                    | --- ELSE ---
      EFFLG1 = 0 -----------------------------|     |
                                              |AND -| EFFLG1 = 1
      TFCISW = 0 -----------------------------|     | AISF = 0 
       (assume dry manifold at startup)             | TFC_HR = 0
                                                    | TFC_FG_EN = 0
                                                    |  (do not run TFC)
                                                    |
                                                    | --- ELSE ---
                                                    |
      DFSFLG = 1 -----------------------------------| AISF = EISF * AISFM
       (in DFSO)                                    | TFC_HR = 0 
                                                    | TFC_FG_EN = 0
                                                    |  (do not run TFC)
                                                    |
                                                    | --- ELSE ---
      TFC_IDLE_OFF = 1 -----------------|           |
                                        |AND -|     |
                                        |     |     |
      ISCFLG > 0 -----------------------|     |     | 
       (rpm control or lockout)               |     |
                                              |     |
                                              |OR --| AISF = EISF 
                                              |     | TFC_HR = 0   
                                              |     | TFC_FG_EN = 0
      ISCFLG = -1 ----------------------|     |     |  (do not run TFC)
                                        |AND -|     | 
      N - DSDRPM < TFSMN ---------------|           |
       (low rpm decel)                              |
                                                    | --- ELSE ---
                                                    |
                                                    | EFTC = 1
                                                    | TFC_FG_EN = 1
                                                    |
                                                    | Do TFC
















                                        7-103

             FUEL STRATEGY, BACKGROUND TRANSIENT FUEL BACKGROUND - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      3) Calculate TFC_SLOPE for use in foreground and capture the current  
      CYL_AIR_CHG.  TFC_SLOPE is simply (delta eisf/delta cyl_air_chg).

      always ---------------------------------------| TFC_SLOPE = FN312S(ECT) 
                                                    |             * FN313(N)
                                                    | TFC_CHG = CYL_AIR_CHG


      4) Calculate EFTC; the equilibrium fuel time constant and the transient fuel
      multiplier.


      CTTMR > TIP_OUT_TIME -------------------------| TIP_OUT_OVER = 1
       (tip-out transient completed)                |
                                                    | --- ELSE --- 
                                                    |
                                                    | TIP_OUT_OVER = 0


      EISF > AISF ----------------------------|
                                              |OR --| USE ACCEL CALIBRATION
      TIP_OUT_OVER = 1 -----------------------|     | 
                                                    | EFTC = FN1322AL(ECT,LOAD) 
                                                    |        *  MTEFTC
                                                    | TFC_MULT = FN1323A(ECT,ATMR1)
                                                    |            * stcf * DT12S
                                                    |
                                                    | --- ELSE ---
                                                    |
                                                    | USE DECEL CALIBRATION
                                                    |
                                                    | EFTC = FN1322DL(ECT,LOAD) 
                                                    |        *  MTEFTC
                                                    | TFC_MULT = FN1323D(ECT,ATMR1)
                                                    |            * stcf * DT12S

























                                        7-104

             FUEL STRATEGY, BACKGROUND QUICK AND DIRTY FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            BACKGROUND QUICK AND DIRTY LOGIC


      OVERVIEW

      Quick and dirty fuel is intended to reduce the lean air/fuel excursions on a
      tip-in due to injector output scheduling limitations.  QD_FUEL is added
      QD_EVENT times to the base fuel during a tip-in/tip-out episode.


      DEFINITIONS

      INPUTS

      Registers:

       -  CTTMR = At closed throttle timer.

       -  ECT = Engine coolant temperature.

       -  N_BYTE = Engine speed.

       -  N_QD_MAX = Maximum N while tipped in.

      Bit Flags:

       -  TFMFLG = Throttle Position failure mode flag; 1 -> failed TP.

       -  UNDSP = Flag indicating underspeed mode; 1-> in underspeed mode.

       -  QD_TIP_OUT = Tip-out transient over;1-> tip-out completed.

      Calibration Constants:

       -  FN312QD(ECT) = Amount of QD fuel to compensate for injector output errors
          on tip-ins.

       -  QD_DEL_N = Difference between maximum transient N and current N to  allow
          the setting of QD_READY.

       -  QD_TP_TME = Time after closed throttle to enable QD fuel.


      OUTPUTS

      Registers:

       -  N_QD_MAX = See above.

       -  QD_FUEL = Quick and dirty fuel to add to base fuel.










                                        7-105

             FUEL STRATEGY, BACKGROUND QUICK AND DIRTY FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Bit Flags:

       -  QD_READY = Flag indicating when QD_FUEL was added on to  base  fuel,  can
          only be added on once per tip-in;1 -> QD_READY ready to shoot.

       -  QD_TIP_OUT = See above.






















































                                        7-106

             FUEL STRATEGY, BACKGROUND QUICK AND DIRTY FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: FUEL_QD_BG_COM1


                         BACKGROUND QUICK AND DIRTY COMPENSATION


                                         NOTE: None of the background Quick and
      Dirty Compensation calculations
                                               and logic execute during Engine
      Running VIP Self-Test.


      CTTMR > QD_TP_TME ----------------------| QD_TIP_OUT = 1
       (tip-out considered over)              | QD_FUEL = FN312QD(ECT)
                                              |
                                              | --- ELSE ---
                                              |
                                              | QD_TIP_OUT = 0


      QD_TIP_OUT = 0 -------------------|
       (still tiped-in)                 |AND -| N_QD_MAX = N_BYTE
                                        |     |
      N_BYTE > N_QD_MAX ----------------|     |
       (capture max N)                        |
                                              | --- ELSE ---
      QD_TIP_OUT = 1 -------------------|     |
       (tip-out transient completed)    |     |
                                        |     |
      TFMFLG = 0 -----------------------|     |
       (TP sensor ok)                   |AND -| QD_READY = 1
                                        |     | N_QD_MAX = 0
      (N_QD_MAX - N_BYTE) > QD_DEL_N ---|     |
       (really did tip-in)              |     |
                                        |     |
      UNDSP = 0 ------------------------|     |
       (run mode only)                        |
                                              | --- ELSE ---
                                              |
                                              | DO NOTHING



















                                        7-107

                   FUEL STRATEGY, HOT INJECTOR COMPENSATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                HOT INJECTOR COMPENSATION


      OVERVIEW

      Under conditions of high injector tip temperatures,  injector  fuel  delivery
      decreases  as  a function of increasing injector tip temperature.  The amount
      of vaporized fuel delivered by  the  injector  increases  as  hot  soak  time
      increases,  or  as  conducted  heat (from cylinder head) and/or radiated heat
      (from intake/exhaust manifold) increases.  Higher fuel pressure or lower fuel
      volatility  helps the situation, but fuel volatility is beyond the developers
      control.  Hot Injector compensation has therefore been applied to the desired
      fuel  flow.   Tip  temperature  has  been  characterized  to be a function of
      ECT/ACT, ACSTRT, ATMR3 and AM as follows:

       -  ECT/ACT for conducted or radiated heat
       -  ACSTRT for soak time
       -  ATMR3 for fuel mass to cool the injector
       -  AM for fuel mass to cool the injector

      Hot injector compensation is:

              HICOMP = FN1349(TEMP_FRAC(FRCHIC),ACSTRT) * FN1348(ATMR3,AM).

      Thus when HICOMP goes to 0, no enrichment is desired.  FN1350 has been  added
      for crank fuel enrichment as a function of ACT and CRKPIP_CTR_BG.  ACT is the
      input - in case of a stall and no key off, you will get a  better  enrichment
      factor as opposed to ACSTRT.



      DEFINITIONS

      INPUTS

      Registers:

       -  ACSTRT = ACT at start-up; arithmetic average of the first 8 ACT readings.

       -  ACT = Air Charge Temperature, degrees F.

       -  AM = Air mass flow, lb/min.

       -  ATMR3 = Time since entering RUN mode, secs.

       -  CRKPIP_CTR = Foreground PIP counter for crank fuel.

       -  CRKPIP_CTR_BG = Background equivalent of CRKPIP_CTR.

       -  TEMP_FRAC(FRCHIC) = ACT/ECT combination used to look up FN1349, 
          degrees F.









                                        7-108

                   FUEL STRATEGY, HOT INJECTOR COMPENSATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  FN005 = Temperature normalizing function.

       -  FN007 = AM normalizing function.

       -  FN008 = ATMR3 normalizing function.

       -  FN023 = CRKPIP_CTR_BG normalizing function.

       -  FN024 = ACT normalizing function.

       -  FN1349 = Fuel enrichment factor. 
                   X = FN005(TEMP_FRAC(FRCHIC))
                   Y = FN005(ACSTRT, ACT)

       -  FN1348 = Time multiplier. 
                   X = FN008(ATMR3)
                   Y = FN007(AM)

       -  FRCHIC = Fraction of ECT or ACT to use in FN1349. If FRCHIC = 1.0, all
          ACT is used, if FRCHIC = 0, all ECT is used.



      OUTPUTS

      Registers:

       -  HICOMP = Hot injector compensation enrichment factor.



      PROCESS
                         STRATEGY MODULE: FUEL_HOT_INJ_COMP_COM1


              HICOMP = FN1349(TEMP_FRAC(FRCHIC),ACSTRT) * FN1348(ATMR3,AM)






















                                        7-109

                     FUEL STRATEGY, INJECTOR DELAY LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  INJECTOR DELAY LOGIC


      OVERVIEW

      Injector timing is the delay before each injector output is fired.  The delay
      is  taken from TDC of the reference PIP signal for each injector output.  The
      units for injector timing are absolute engine crank degrees.   The  range  is
      clipped between 0 and 716 degrees ATDC with 4 degrees resolution.

      Either edge (on or off) of the injector pulse can be timed.  The  calibration
      switch INJREF defines the reference edge for injector timing.

          INJREF = 0, Use start of fuel pulse.

          INJREF = 1, Use end of fuel pulse.

      Regardless of which edge is used, the injector delay is used only to start  a
      fuel pulse.  Once started, pulsewidth accuracy has top priority.

      When the fuel system is not in sync (FUEL_IN_SYNC = 0), the  injector  timing
      is  coincident  with the relevant PIP signal.  The injector outputs are fired
      in sequence after receiving the rising edge of  the  reference  PIP  signals.
      Actual  timing  will  be  the result of the random link between signature PIP
      (cylinder #1) and #1 injector output.

      During RAM initialization, the rolling average filter for  INJDLY  is  loaded
      with an initial value, INJIV.  This action eliminates the excessive length of
      time it used to take to filter INJDLY from its initial  value  of  0  to  its
      desired   timing.   Note:   For  1989  Model  year,  because  of  a  software
      limitation, INJIV must be calibrated to less than ENGCYL * 90 degrees.   This
      will be corrected for 1990.

      When the fuel system is in sync (FUEL_IN_SYNC = 1), injector timing is  based
      on the following calculation.  See the foreground injector timing section for
      complete details.
























                                        7-110

                     FUEL STRATEGY, INJECTOR DELAY LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  ATMR1 = Time since exiting crank mode, sec.

       -  ATMR2 = Time since engine coolant temperature became greater than TEMPFB,
          sec.

       -  ECT = Engine Coolant Temperature, deg F.

       -  INJDLY = Injector delay in degrees.

       -  LOAD = Universal load as ratio of aircharge over standard.

       -  N = Engine speed, rpm.

       -  TCSTRT = Temperature of engine coolant (ECT) at initial startup, deg F.

      Bit Flags:

       -  CRKFLG = Flag indicating when in CRANK mode; 1 -> crank.

       -  DNDSUP = Delayed Neutral/Drive flag; 0 -> neutral, 1 -> drive.

       -  IDLE_TEMP_SW = INJDLY temperature switch; 1 ->  temperature  compensation
          in idle, 0 -> no temperature compensation in idle.

       -  IDLFLG = Flag indicating transmission in Drive and at Idle.

       -  TIM_INT_FLG = First pass injector timing calculation.

      Calibration Constants:

       -  CIDRSW = Calibration switch  to  enable  Special  Fuel  Timing  at  Idle,
          unitless; 1 -> Enable, 0 -> Disable.

       -  CINTSW = Cal Switch to enable special fuel timing in Neutral, unitless; 1
          -> enable special neutral fuel timing.

       -  CINTV = Injector Timing Value in Neutral, deg F.

       -  CTHIGH = Coolant temperature at Hot start, deg F.

       -  CTLOW = Coolant temperature at Cold start, deg F.

       -  DEGPIP = Engine degrees per PIP period, deg. (90 deg = 8 cyl; 
          120 deg = 6 cyl; 180 = 4 cyl) 

       -  FN070 = Normalizing function for engine speed N as X-input to FN1315.

       -  FN085 = Normalizing function for LOAD as Y-input to FN1315.

       -  FN336(ECT) = Injector timing versus ECT (X-input).




                                        7-111

                     FUEL STRATEGY, INJECTOR DELAY LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FN1315 = An 10x8 table which gives injector delay as a function of 
          engine speed and load.
                   X = FN070(N)
                   Y = FN085(LOAD)

       -  IDKADD = Injector delay timing adder.

       -  IDKMUL = Injector delay timing multiplier.

       -  INJDLY_MIN = Minimum allowable injector delay.

       -  MIDTV = Injector timing value for Idle in Drive, deg.  Range of 0 to 720.

       -  NITMR1 = ATMR1 timed delay to enter Closed Loop fuel  after  Cold  start,
          sec.  Range of 0-255 sec., accuracy 1 sec.

       -  NITMR2 = ATMR1 timed delay to enter Closed Loop fuel after Medium  start,
          sec.  Range of 0-255 sec., accuracy 1 sec.

       -  NITMR3 = ATMR1 timed delay to enter Closed Loop  fuel  after  Hot  start,
          sec.  Range of 0 to 255 sec., accuracy 1 sec.

       -  NITMR4 = ATMR2 timed delay to enter Closed Loop fuel  after  Cold  start,
          sec.  Range of 0 to 255 sec., accuracy 1 sec.

       -  NITMR5 = ATMR2 timed delay to enter Closed Loop fuel after Medium  start,
          sec.  Range of 0 to 255 sec., accuracy 1 sec.

       -  TCINJD = Time constant for INJDLY, sec.



      OUTPUTS

      Registers:

       -  INJDLY = Injector delay in degrees.

       -  INJDLY_BETA = The injector timing in percent of PIP periods.

      Bit Flags:

       -  TIM_INT_FLG = See above.

















                                        7-112

                     FUEL STRATEGY, INJECTOR DELAY LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE:  FUEL_INJDLY_COM1


      The following calculates the startup delay  logic  for  fixed  idle  injector
      timing:


      TCSTRT >= CTHIGH ---------|
                                |AND -|
      ATMR1 >= NITMR3 ----------|     |
                                      |
      CTLOW < TCSTRT < CTHIGH --|     |
                                |AND -|OR --| "A"
      ATMR1 >= NITMR2 ----|     |     |
                          |AND -|     |
      ATMR2 >= NITMR5 ----|           |
                                      |
      TCSTRT <= CTLOW ----------|     |
                                |AND -|
      ATMR1 >= NITMR1 ----|     |
                          |AND -|
      ATMR2 >= NITMR4 ----|





































                                        7-113

                     FUEL STRATEGY, INJECTOR DELAY LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      CRKFLG = 1 ---------------------------| Exit background injector
                                            | timing calculation
                                            |
      DNDSUP = 0 ---------------------|     | --- ELSE ---
                                      |     |
      CINTSW = 1 ---------------------|AND -| Neutral Timing with Temperature
                                      |     |  Compensation
      "A" ----------------------------|     | temp = [CINTV + FN336(ECT)]  
                                      |     |  
      IDLE_TEMP_SW = 1 ---------------|     |
                                            | --- ELSE ---
      DNDSUP = 0 ---------------------|     |
                                      |     |
      CINTSW = 1 ---------------------|AND -| Neutral Timing without Temperature
                                      |     |  Compensation
      "A" ----------------------------|     | temp = CINTV
                                            |  
                                            | --- ELSE ---
      IDLFLG = 1 ---------------------|     |
                                      |     |
      CIDRSW = 1 ---------------------|AND -| Idle Timing with Temperature
                                      |     |  Compensation
      IDLE_TEMP_SW = 1 ---------------|     |  (in drive)
                                            | temp = [MIDTV + FN336(ECT)]
                                            |
                                            | --- ELSE ---
      IDLFLG = 1 ---------------------|     |
                                      |AND -| Idle Timing without Temperature
      CIDRSW = 1 ---------------------|     |  Compensation
                                            |  (in drive)
                                            | temp = MIDTV
                                            |  
                                            | --- ELSE ---
                                            |
                                            | temp = IDKMUL * (FN1315(N,LOAD)
                                            |        + FN336(ECT)) + IDKADD
                                            | Clip to INJDLY_MIN as a minimum


      TIM_INT_FLG = 0 ----------------------| INJDLY = temp 
       (first pass)                         |  (store temp for old value for 
                                            |   rolling average)


      always -------------------------------| INJDLY = ROLAV(temp,TCINJD)
                                            | TIM_INT_FLG = 1














                                        7-114

                     FUEL STRATEGY, INJECTOR DELAY LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      The following calculates the desired injector delay in percent of PIP periods
      or  "betas".   If  the injector delay plus the PIP offset from TDC is greater
      than 716 degrees, then the requested delay will be past TDC and  720  can  be
      subtracted  to give the same delivered timing.  INJDLY can only be calculated
      in 4 degree steps).


      always -------------------------------| temp = INJDLY + 10


      temp <= 716 --------------------------| INJDLY_BETA = temp/DEGPIP
                                            |
                                            | --- ELSE ---
                                            |
                                            | INJDLY_BETA = (temp - 720)/DEGPIP













































                                        7-115

                     FUEL STRATEGY, RPM LIMITER HIGH LOAD - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                                 RPM LIMITER HIGH LOAD


|     OVERVIEW 

|     This module calculates the pip periods equivlent to the  desired  rpm  output
|     limits.



|     DEFINITIONS

|     INPUTS

|     Bit Flags:

|      -  NDSFLG = Neutral/drive flag; 1 -> drive.

|     Calibration Constants:

|      -  NLMTHI_0 = Low gear stage 3 rev limit.

|      -  NLMTLO_0 = Low gear stage 2 rev limit.

|      -  NLMTNEUHI_0 = Neutral stage 3 rev limit.

|      -  NLMTNEULO_0 = Neutral stage 2 rev limit.



|     OUTPUTS

|     Registers:

|      -  PIPLMT_HIG = Stage 3 rev limit in use.

|      -  PIPLMT_LOW = Stage 2 rev limit in use.




|     PROCESS
|                         STRATEGY MODULE: FUEL_RPM_LIM_BG_COM5


|     NDSFLG = 0 -----------------------------------| PIPLMT_HIG = 
|                                                   |  Fn_A(NLMTNEUHI_0)
|                                                   | PIPLMT_LOW = 
|                                                   |  Fn_A(NLMTNEULO_0)
|                                                   |
|                                                   | --- ELSE ---
|                                                   |
|                                                   | PIPLMT_HIG = 
|                                                   |  Fn_A(NLMTHI_0)
|                                                   | PIPLMT_LOW = 
|                                                   |  Fn_A(NLMTLO_0)


|     Where y = Fn_A(x) is defined as x rpm converted to a pip period y in ticks.

                                        7-116

                    FUEL STRATEGY, FUEL PUMP CONTROL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                                FUEL PUMP CONTROL LOGIC


|     OVERVIEW

|     EFI vehicles are equipped with  an  electric  fuel  pump  controlled  by  the
|     computer  via  a  relay.   The  fuel pump relay is energized according to the
|     logic below.

|     DEFINITIONS

|     INPUTS

|     Registers:

|      -  TSLPIP = Timer indicating time since  last  PIP  low-to-high  transition,
|         sec.



|     OUTPUTS

|     Registers:

|      -  PUMP = Bit flag indicating fuel pump mode; 0 -> fuel pump disabled, 1  ->
|         fuel pump enabled.



|     PROCESS
|                            STRATEGY MODULE: FUEL_PUMP_COM1


|     TSLPIP < 1 SECOND -----------------| PUMP = 1
|                                        |
|                                        | --- ELSE ---
|                                        |
|                                        | PUMP = 0






















                                        7-117

                         FUEL STRATEGY, PPCTR CONTROL - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                                     PPCTR CONTROL


      OVERVIEW 

|     This counter counts PIPs when not in Decel Fuel Shut-Off. PPCTR is updated at
|     PIP rising edge before injector pulsewidth is calculated and output. 


|     DEFINITIONS 

      INPUTS 

|     Bit Flags: 

|      -  DFSFLG = Decel Fuel Shut-Off flag; 1 -> the decel fuel multiplier is not
|         one. 

|     Calibration Constants: 

|      -  PIPNUM = Number of PIPs to remain in Open Loop fuel after DFSO. Prevents
|         LAMBSE
|         from ramping off rich due to normal transport delay time. Set to 1 to
|         calibrate
|         out. 



|     OUTPUTS 

      Registers: 

|      -  PPCTR = PIP counter; updated at PIP rising edge before injector
|         pulsewidth is calculated and output. 



|     PROCESS 
|                           STRATEGY MODULE: FUEL_PPCTR_COM1


|     DFSFLG = 0 ----------------------| Increment PPCTR every PIP
|                                      |  (Clip at PIPNUM)
|                                      | 
|                                      | --- ELSE ---
|                                      |
|                                      | PPCTR = 0













                                        7-118

                       FUEL STRATEGY, RPM LIMITER LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                                   RPM LIMITER LOGIC


|     OVERVIEW

|     The RPM limiter logic turns off the  fuel  if  the  engine  RPM  exceeds  its
|     "red-line" limit.


|     DEFINITIONS

|     INPUTS

|     Registers:

|      -  DT12S = The period of time between two adjacent rising edges of PIP.

|      -  DT23S = Last DT12S time.

|      -  PIPLMT_HIG = Stage 3 rev limit in use.

|      -  PIPLMT_LOW = Stage 2 rev limit in use.

|     Bit Flags:

|      -  FOFFLG2 = Stage 2 alternate fire VS exceeded.

|      -  NLMT_FLG2 = Stage 3 no fuel VS exceeded.

|      -  OFM_FMEM =  ETV  overcurrent  based  alternate  fire  request  flag;  1->
|         Alternate fire requested, 0 -> Normal fire.

|      -  PIP_ST2_FLG = Flag indicating Stage 2 rev limiting required  due  to  PIP
|         condition.

|     Calibration Constants:

|      -  MNPIPn = Minimum PIP period, clock ticks; n = 4  (4-cylinder  engine),  6
|         (6-cylinder engine), or 8 (8-cylinder engine).

|      -  PIPLIMHYT = Rev limiter hystersis, clock ticks.



|     OUTPUTS

|     Bit Flags:

|      -  FUEL_CUT = Fuel cut out active.  Set in foreground  for  continuous  self
|         test.

|      -  HALF_FUEL = Flag which indicates one-half of the  injections  are  to  be
|         cut-out; 1 -> half fuel.

|      -  NO_FUEL = Flag which indicates that all injections are to be  cut-out;  1
|         -> no fuel.




                                        7-119

                       FUEL STRATEGY, RPM LIMITER LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|      -  PIP_ST2_FLG = See above.



|     PROCESS
|                         STRATEGY MODULE: FUEL_RPM_LIM_FG_COM3


|                 BAD PIP DETERMINATION (done in PIP_DATA on PIP_HIGH)


|     dt12s < MNPIPn -------------------------| Exit PIP_DATA routine
|      (RPM higher than PIP noise filter)     |  (ignore this PIP)
|                                             |
|                                             | --- ELSE ---
|                                             |
|                                             | DT23S = DT12S
|                                             | DT12S = dt12s  


|     DT12S < PIPLMT_LOW ---------|
|                                 |AND -|S Q -| PIP_ST2_FLG
|     DT23S < PIPLMT_LOW ---------|     |
|                                       |
|     DT12S > PIPLMT_LOW +              |
|              PIPLIMHYT ---------|     |
|                                 |AND -|C
|     DT23S > PIPLMT_LOW +        |
|              PIPLIMHYT ---------|


|     DT12S < PIPLMT_HIG ---------|
|                                 |AND -|
|     DT23S < PIPLMT_HIG ---------|     |OR --| HALF_FUEL = 0
|                                       |     | NO_FUEL = 1
|     NLMT_FLG2 = 1 --------------------|     | FUEL_CUT = 1
|                                             |
|                                             | --- ELSE ---
|     PIP_ST2_FLG = 1 ------------------|     |
|                                       |     |
|     FOFFLG2 = 1 ----------------------|OR --| HALF_FUEL = 1
|                                       |     | NO_FUEL = 0
|                                       |     | FUEL_CUT = 1
|     OFM_FMEM = 1 ---------------------|     |
|                                             | --- ELSE ---
|                                             |
|                                             | HALF_FUEL = 0
|                                             | NO_FUEL = 0

|     The flag, FUEL_CUT, is cleared in Background by the continuous selftest
|     routine.









                                        7-120

         FUEL STRATEGY, PIP INTERRUPT LOGIC FOR FUEL SYNCHRONIZATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                     PIP INTERRUPT LOGIC FOR FUEL SYNCHRONIZATION


|     OVERVIEW

|     The  synchronization  logic  processed  during  the  PIP  high  interrupt  is
|     responsible  for  incrementing  the  SYNC_CTR  which  is  a  register used to
|     identify the position and cycle of the engine's cylinders.

|     If signature PIP is utilized and the engine has eight cylinders (NUMCYL = 8),
|     a  special  process occurs during the interrupt.  Because of software design,
|     SYNC_CTR cannot reach eight but instead becomes zero.  To allow the  loss  of
|     synchronization  logic to work, recognition of the SYNC_CTR reaching eight is
|     necessary (see SIGNATURE_PIP_PROCESSING).  Therefore, when  the  SYNC_CTR  is
|     incremented  and  overflows,  a  flag  (SYNC_CTR_C)  is  set  to indicate the
|     condition.   The  flag  is   cleared   and   SYNC_CTR   is   reset   by   the
|     SIGNATURE_PIP_PROCESSING logic when signature PIP is recognized.



|     DEFINITIONS

|     INPUTS

|     Registers:

|      -  SYNC_CTR = Counter which counts cylinders from the PIP signal.


|     OUTPUTS

|     Registers:

|      -  SYNC_CTR = See above.

|     Bit Flags:

|      -  SYNC_CTR_C = Overflow flag for SYNC_CTR when greater than 7.



|     PROCESS
|                        STRATEGY MODULE: FUEL_PIP_INT_SYNC_COM1

|                       (processed during the PIP high interrupt)


|     unconditionally -----------------------------| SYNC_CTR = SYNC_CTR + 1


|     SYNC_CTR > 7 --------------------------------| SYNC_CTR_C = 1
|                                                  | SYNC_CTR = 0








                                        7-121

            FUEL STRATEGY, SIGNATURE PIP INJECTOR SYNCHRONIZATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                        SIGNATURE PIP INJECTOR SYNCHRONIZATION


|     OVERVIEW

|     The technique utilized for fuel synchronization is the signature PIP  signal.
|     Signature  PIP  is  a unique PIP signal which has a lower duty cycle (usually
|     30% or 35%) than other PIP signals (50%).  It is used with  distributor  type
|     ignition systems to identify the position and cycle of cylinder #1.

|     Figure 1 shows the PIP signal of a four cylinder engine  when  signature  PIP
|     hardware  is  present.   When a PIP down-edge is recognized, the elapsed time
|     (HFDLTA) since the last up-edge is  calculated.   To  determine  whether  the
|     latest  PIP signal is a signature PIP, the fraction of the difference between
|     half of the last PIP period (DT12S/2) and HFDLTA  to  DT12S/2  is  calculated
|     (see  process).   If  the  value  is greater than the minimum half period for
|     signature PIP detection, MHPFD, the signal is a signature PIP.  The value  of
|     MHPFD  depends  only  on  the  number of cylinders and the Signature PIP Duty
|     Cycle.  Appropriate values are shown in Table 1.



|                |<-- TDC CYL #1 - BEGINNING POWER STROKE
|                |
|               |<-- 10 BTDC        -->| |<-- HFDLTA
|     PIP        _     __    __    __    _     __    __    __    _     __    __
|     SIGNAL:  _| |___|  |__|  |__|  |__| |___|  |__|  |__|  |__| |___|  |__|  |_ 

|                              -->|     |<-- DT12S


|             Figure 1:  PIP Signal When Signature PIP Hardware Is Present
|                                (Four Cylinder Engine)




|               CYLINDERS     SIGNATURE DUTY CYCLE     MHPFD

|                   8           =OR< 35 percent         .20
|                   6           =OR< 30 percent         .24
|                   4           =OR< 30 percent         .29


|     NOTE:  If Signature PIP Distributor is NOT present, then MHPFD = .99.


|                        Table 1:  Appropriate Values for MHPFD



|     The SYNC_CTR is a register used to indicate the position  and  cycle  of  the
|     remaining  cylinders  after  that  of  cylinder #1 is known (signature PIP is
|     identified).  SYNC_CTR starts its count at zero and  increments  by  one  for
|     each  low-to-high  transition of the PIP signal until its value equals NUMCYL
|     (number of cylinders present).  When the  signature  PIP  is  identified  and
|     SYNC_CTR  equals  NUMCYL, the SYNC_CTR is reset to zero.  Figure 2 shows this
|     process for a four cylinder engine.  A second function of the SYNC_CTR is  to
|     predict when the signature PIP should reoccur.

                                        7-122

            FUEL STRATEGY, SIGNATURE PIP INJECTOR SYNCHRONIZATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                |<-- TDC CYL #1 - BEGINNING POWER STROKE
|                |
|               |<-- 10 BTDC       
|     PIP        _     __    __    __    _     __    __    __    _     __    __
|     SIGNAL:  _| |___|  |__|  |__|  |__| |___|  |__|  |__|  |__| |___|  |__|  |_ 

|     SYNC_CTR  |     |     |     |     |     |     |     |     |     |     |
|     VALUE:    4->0  1     2     3     4->0  1     2     3     4->0  1     2


|                 Figure 2:  SYNC_CTR Values for a Four Cylinder Engine



|     A special case exists for an eight  cylinder  engine.   Because  of  software
|     design,  SYNC_CTR  cannot reach eight but instead becomes zero.  To allow the
|     loss of synchronization logic to work, recognition of the  SYNC_CTR  reaching
|     eight  is  necessary.   Therefore,  when  the  SYNC_CTR  is  incremented  and
|     overflows, a flag (SYNC_CTR_C) is set to indicate the condition.  The flag is
|     cleared when signature PIP is recognized.  Figure 3 shows the process.



|                  |<-- TDC CYL #1 - BEGINNING POWER STROKE
|                  |
|                 |<-- 10 BTDC       
|     PIP          _     __    __    __    __    __    __    __    _     __    __
|     SIGNAL:    _| |___|  |__|  |__|  |__|  |__|  |__|  |__|  |__| |___|  |__|  |_

|     SYNC_CTR    |     |     |     |     |     |     |     |     |     |     |
|     VALUE:      0->0  1     2     3     4     5     6     7     0->0  1     2
|                 |     |     |     |     |     |     |     |     |     |     |
|     SYNC_CTR_C  |     |     |     |     |     |     |     |     |     |     |
|     VALUE:      1->0  0     0     0     0     0     0     0     1->0  0     0 


|                Figure 3:  SYNC_CTR Values for an Eight Cylinder Engine



|     When the engine is not in the run mode, no attempt is made to synchronize the
|     SYNC_CTR  with  signature PIP and fuel is not allowed to synchronize with the
|     PIP signal.  If the engine is in the run mode and SYNC_CTR equals NUMCYL  (or
|     SYNC_CTR  = 0 and SYNC_CTR_C = 1) and signature PIP is identified, the system
|     is synchronized and the command to synchronize fuel  is  issued.   Also,  the
|     signature  PIP duration is recorded and corrected for later use, and the flag
|     representing the status of the logic (SYNFLG) is set equal to one.













                                        7-123

            FUEL STRATEGY, SIGNATURE PIP INJECTOR SYNCHRONIZATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     The strategy is designed to handle loss of  synchronization.   Two  types  of
|     synchronization  losses  exist.  First, the counter may overrun the number of
|     cylinders.  Second, a signature PIP may be seen  when  the  counter  has  not
|     reached  the  correct  number of cylinders.  For either case, the preliminary
|     failure flag will be set.  If a second attempt to match SIGPIP to the correct
|     counter  value  fails,  it  is  assumed  that  synchronization has been lost.
|     SYNFLG will be cleared and the command to synchronize fuel will be  canceled.
|     When  synchronization  is  lost,  the  strategy  requires at least two engine
|     revolutions (one complete cycle of the  PIP  counter,  SYNC_CTR)  to  recover
|     synchronization.



|     DEFINITIONS

|     INPUTS

|     Registers:

|      -  DT12S  =  The  period  in  ticks  between  consecutive  PIP   low-to-high
|         transitions which is commonly referred to as the PIP period.

|      -  HFDLTA = Last period from PIP up-edge to down-edge, ticks.

|      -  MKAY = Half period multiplier to correct for average error caused by Hall
|         effect sensor in distributor and armature.

|      -  SIGDLT = Uncorrected signature PIP half period, ticks.

|      -  SIGKAL = Signature PIP half period multiplier - initial value  =  1.66666
|         for  30% duty cycle signature PIP, = 1.42857 for 35% duty cycle signature
|         PIP.

|      -  SYNC_CTR = Counter which counts cylinders from the PIP signal and  resets
|         when equal to the number of cylinders in the engine.

|     Bit Flags:

|      -  SIGPIP = Indicates when the Signature PIP half period has been identified
|         and the current PIP down edge is the signature edge.

|      -  SYNC_CTR_C = Overflow flag for SYNC_CTR when greater than 7.

|      -  SYNC_FAIL = Indicates sync signal has been lost or was incorrectly placed
|         after system was in sync; 0 -> sync okay, 1 -> bad or lost sync signal.

|      -  UNDSP = Flag indicating engine mode; 0 -> RUN mode, 1  ->  UNDERSPEED  or
|         CRANK mode.

|     Calibration Constants:

|      -  MHPFD =  Calibration  constant  dependent  on  number  of  cylinders  and
|         Signature PIP Duty Cycle.

|      -  NUMCYL = Number of cylinders in the engine.





                                        7-124

            FUEL STRATEGY, SIGNATURE PIP INJECTOR SYNCHRONIZATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     OUTPUTS

|     Registers:

|      -  HFDLTA = See above.

|      -  PSGDLT = Previous uncorrected signature PIP half period, ticks.

|      -  SIGDLT = Uncorrected signature PIP half period, ticks.

|      -  SYNC_CTR = See above.

|     Bit Flags:

|      -  FUEL_IN_SYNC = Fuel synchronized with PIP.

|      -  SIGPIP = See above.

|      -  SYNC_CTR_C = See above.

|      -  SYNC_FAIL = See above.

|      -  SYNC_UP_FUEL  =  Fuel  synchronization   request;   1   ->   begin   fuel
|         synchronization.

|      -  SYNFLG = Cylinder #1 correctly identified flag;  1  ->  SYNC_CTR  aligned
|         with cylinder #1, 0 -> SYNC_CTR not aligned with cylinder #1.




|     PROCESS
|                        STRATEGY MODULE: FUEL_SIG_PIP_SYNC_COM1

|                       (Processed During the PIP Low Interrupt)

|                               SIGNATURE_PIP_PROCESSING


|     UNDSP = 0 -----------------------|
|      (run mode)                      |
|                                      |
|     (DT12S/2) > HFDLTA --------------|AND -| SIGPIP = 1      
|                                      |     | 
|     (DT12S/2) - HFDLTA               |     | 
|     ------------------ > MHPFD ------|     |
|         (DT12S/2)                          | --- ELSE ---
|                                            | 
|                                            | SIGPIP = 0











                                        7-125

            FUEL STRATEGY, SIGNATURE PIP INJECTOR SYNCHRONIZATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     UNDSP = 1 -----------------------------| SYNC_CTR = 0
|      (not in run mode)                     | SYNC_CTR_C = 0
|                                            | SYNFLG = 0
|                                            | SYNC_UP_FUEL = 0
|                                            | FUEL_IN_SYNC = 0
|                                            |
|                                            | --- ELSE ---
|     SIGPIP = 1 ----------------------|     |
|      (signature PIP identified)      |     |
|                                      |AND -| SYNFLG = 1
|     SYNC_CTR = NUMCYL ---------|     |     | SYNC_UP_FUEL = 1
|      (counter in sync)         |     |     | PSGDLT = SIGDLT
|                                |OR --|     | SIGDLT = HFDLTA
|     SYNC_CTR = 0 --------|     |           | HFDLTA = SIGKAL * HFDLTA / MKAY
|                          |AND -|           | SYNC_CTR = 0
|     SYNC_CTR_C = 1 ------|                 | SYNC_CTR_C = 0
|                                            | SYNC_FAIL = 0
|                                            |
|                                            | --- ELSE ---
|     SYNC_FAIL = 0 -------------------|     |
|                                      |     |
|     SIGPIP = 0 ----------------------|AND -| SYNC_CTR = 0
|                                      |     | SYNC_CTR_C = 0
|     SYNC_CTR >= NUMCYL --------|     |     | SYNC_FAIL = 1
|                                |OR --|     |               
|     SYNC_CTR_C = 1 ------------|           |
|                                            | --- ELSE ---
|     SYNC_FAIL = 0 -------------------|     |
|                                      |     |
|     SIGPIP = 1 ----------------------|AND -| SYNC_FAIL = 1
|                                      |     |                
|     SYNC_CTR <> NUMCYL --------------|     |                
|                                            | --- ELSE ---
|     SIGPIP = 0 ----------------|           |
|      (not signature PIP)       |           |
|                                |AND -|     |
|     SYNC_CTR >= NUMCYL --|     |     |     |
|      (counter to large)  |     |     |     |
|                          |OR --|     |     |
|     SYNC_CTR_C = 1 ------|           |     |
|                                      |OR --| SYNC_CTR = 0
|     SIGPIP = 1 ----------------|     |     | SYNC_CTR_C = 0
|      (signature PIP)           |     |     | SYNFLG = 0
|                                |AND -|     | SYNC_UP_FUEL = 0
|     SYNC_CTR <> NUMCYL --------|           | FUEL IN SYNC = 0
|      (signature in wrong place)


|     unconditionally -----------------------| Exit this module











                                        7-126

         FUEL STRATEGY, FOREGROUND FUEL CALCULATIONS EXECUTION CONTROL- CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                    FOREGROUND FUEL CALCULATIONS EXECUTION CONTROL

      OVERVIEW

|     This module specifies execution conditions and required execution order
|     for certain foreground fuel routines that are external to this module.

      DEFINITIONS

      INPUTS

      Registers:

|      -  DT12S = The period of time between the two most recent adjacent rising
|         edges
|         of the PIP input signal;  i.e., it is the value of the most recently
|         completed
|         PIP period.

|      -  SYNC_CTR = Cylinder sequence counter incremented every PIP rising edge;
|         used
|         to identify cylinder/crankshaft position.

      Bit Flags:

|      -  PIP_HIGH = PIP Input level;  1 <-> the most recent PIP signal transition
|         was
|         a rising edge;  0 <-> the most recent PIP signal transition was a falling
|         edge.

|      -  SYNFLG = 1 <-> SYN_CTR is synchronized with signature PIP.

      Calibration Constants:

|      -  AIR_DOWN_CAL = Indicates on which PIP edge to calculate Cylinder Air
|         Charge;
|         0 <-> use PIP up-edge;  1 <-> use PIP down-edge.

|      -  FULPIPALT_DT = "FUeL_PIPs_ALTernate_edge_calculations_DT12s_breakpoint";
|         Units:
|         806x Master I/O Timer counts ('ticks').  This is the DT12S value
|         corresponding
|         to the maximum allowed engine RPM at which the full set of PIP-triggered
|         foreground fuel and aircharge calculations are to be performed at every
|         rising
|         PIP edge or at every falling PIP edge  (Ref.: AIR_DOWN_CAL); above that
|         RPM
|         value, the full set of calculations is to be performed only on alternate
|         rising
|         PIP edges or only on alternate falling PIP edges.   For a given desired
|         value
|         of the engine RPM breakpoint,  the corresponding numeric calibration
|         value for
|         FULPIPALT_DT is calculated for 8065-based EEC-IV modules as follows:

|         FULPIPALT_DT = {[(60)*(10**6)*(clock_freq)]/[(Nb)*(ENGCYL)*(5.333)*(18)]}




                                        7-127

         FUEL STRATEGY, FOREGROUND FUEL CALCULATIONS EXECUTION CONTROL- CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|          -  (10**6) = 1,000,000 = 10 to the 6th power.

|          -  clock_freq = The numeric value of the clock frequency (in MHz) of the
|             8065 CPU
|             in 8065-based EEC-IV modules. [Note: If freq = xx Mhz, substitute
|             "xx" only.]

|          -  For 8061-based EEC-IV modules, replace (5.333) with (2.0);  and
|             substitute the
|             correct numeric value of the 8061 CPU clock frequency (in MHz) into
|             "clock_freq". [If freq = xx Mhz, substitute "xx".]

|          -  Nb = The desired engine RPM breakpoint.

|          -  ENGCYL = Number of PIPs per engine revolution.




      OUTPUTS

      Bit Flags:

|      -  fulfg_altpip = "FUeL_ForeGround_ALTernate_PIP_edge_execution_indicator";
|         1 <->
|         certain PIP-triggered foreground fuel routines are being executed only on
|         alternate rising PIP edges or only on alternate falling PIP edges  (Ref.:
|         AIR_DOWN_CAL); 0 <-> the full set of PIP-triggered foreground fuel
|         routines are
|         being executed on every rising PIP edge or on every falling PIP edge.
|         (NOTE:
|         This flag's identifier is in the lower case; this flag is a 'strategy
|         specification flag'; this flag need not be explicitly defined in software
|         if
|         the logic which this flag is used to express is accurately implemented.)

|      -  QD_READY = Flag indicating when QD_FUEL is about to be added, or is
|         currently
|         being added, to the current value of base fuel;  can only be added once
|         per
|         tip-in; 1 <-> QD_FUEL is about to be delivered or is currently being
|         delivered;
|         0 <-> QD_FUEL is not to be delivered.



|     EXTERNAL PROCEDURES CALLED:

|         fuel_transient_fg_calculations

|         fuel_qd_fg_calculations

|         fuel_pw_fg_calculations

|         fuel_fg_injector_outp_service

|         fuel_fg_dynamic_calculations



                                        7-128

         FUEL STRATEGY, FOREGROUND FUEL CALCULATIONS EXECUTION CONTROL- CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
|                         STRATEGY MODULE: FUEL_FG_PIPEDG_COM1


|     BEGIN: fuel_fg_pipedg

|     ;Execute this routine at each rising PIP
|     ;edge and at each falling PIP edge.


|     PIP_HIGH = 1 ---------------|
|      ;pip up-edge               |
                                  |AND -|
|     SYNFLG = 0 ------------|    |     |
|      ;not in sync          |    |     |
|                            |OR -|     |
|     AIR_DOWN_CAL = 0 ------|          |
|      ;execute on pip up-edge          |
|                                       |OR --| Do: fuel_fg_pip_routines
                                        |     |
|     PIP_HIGH = 0 ---------------|     |     | ;then exit fuel_fg_pipedg
|      ;pip down-edge             |     |     |
|                                 |     |     |
|     SYNFLG = 1 -----------------|AND -|     |
|      ;fuel in sync              |           |
|                                 |           |
|     AIR_DOWN_CAL = 1 -----------|           |
|      ;execute on pip down-edge              |
|                                             | --- ELSE ---
|                                             | 
|                                             | Do: fuel_fg_injector_outp_service
|                                             |  ;executed at every pip up-edge
|                                             |  ; and at every pip down-edge
|                                             | 
|                                             | ;then exit fuel_fg_pipedg

|     END: fuel_fg_pipedg























                                        7-129

         FUEL STRATEGY, FOREGROUND FUEL CALCULATIONS EXECUTION CONTROL- CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     BEGIN: fuel_fg_pip_routines

|     ;called from fuel_fg_pipedg.


|     DT12S >= FULPIPALT_DT ------------------| ;foreground quick & dirty fuel
|      ;lower rpm range                       | ; TP ATOD is initiated by s/w
|                                             |
|                                             | fulfg_altpip := 0
|                                             |  ;ref.: see action block below
|                                             |
|                                             | Do: fuel_transient_fg_calculations
|                                             | Do: fuel_qd_fg_calculations
|                                             | Do: fuel_pw_fg_calculations
|                                             | Do: fuel_fg_injector_outp_service
|                                             | Do: fuel_fg_dynamic_calculations
|                                             |
|                                             | --- ELSE ---
|     DT12S < FULPIPALT_DT -------------|     |
|      ;higher rpm range                |AND -| ;foreground quick & dirty fuel
|                                       |     | ; TP ATOD is initiated by s/w
|     SYNC_CTR is even -----------------|     |
|      ;alternate pip up-edges or             | QD_READY := 0
|      ; alternate pip down-edges             |  ;disable delivery of QD_FUEL
|                                             |
|                                             | fulfg_altpip := 1
|                                             |  ;some fg fuel routines are now
|                                             |  ; to be called only on alternate
|                                             |  ; pip up-edges or only on
|                                             |  ; alternate pip down-edges, and
|                                             |  ; some of them need to know
|                                             |  ; when this is occurring
|                                             |
|                                             | Do: fuel_transient_fg_calculations
|                                             | Do: fuel_qd_fg_calculations
|                                             | Do: fuel_pw_fg_calculations
|                                             | Do: fuel_fg_injector_outp_service
|                                             |
|                                             | ;fuel_fg_dynamic_calculations
|                                             | ; is not to be performed
|                                             |
                                              | --- ELSE ---
                                              |
|                                             | ;higher rpm range and
|                                             | ; sync_ctr is odd
|                                             |
|                                             | QD_READY := 0
|                                             |  ;disable delivery of QD_FUEL
|                                             |
|                                             | fulfg_altpip := 1
|                                             |  ;ref.: see action block above
|                                             |
|                                             | Do: fuel_fg_injector_outp_service
|                                             |  ;executed at every pip up-edge
|                                             |  ; and at every pip down-edge

|     END: fuel_fg_pip_routines



                                        7-130

                FUEL STRATEGY, FOREGROUND TRANSIENT FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                            FOREGROUND TRANSIENT FUEL LOGIC


|     OVERVIEW 

|     Foreground transient fuel is primary intended to improve compensation during 
|     tip-outs.  During a tip-in the background loop time is on the order of a pip 
|     period and the puddle mass is increasing at its maximum rate.  Processing 
|     power is well matched with calculating puddle mass.  The tip-out is the exact
|     opposite.  During a tip-out the background loop time is several times a pip
|     period and the puddle mass is increasing at its maximum rate.  To compensate
|     for this miss-match of processing power and changing puddle mass a foreground
|     term has been added to the equilibrium puddle mass.


|     CALIBRATION WARNING:
|     If the manifold filling is calibrated to give an overshoot in CYL_AIR_CHG,
|     transient fuel will take out fuel on the tip-in.  This will cause air/fuel
|     to lean-out.


|     DEFINITIONS 

|     INPUTS

|     Registers:

|      -  CYL_AIR_CHG  =  Current  cylinder  aircharge  to  be  used  in  the  fuel
|         calculation, lbm.

|      -  DT12S = The period of time between two  adjacent  rising  edges  of  PIP,
|         ticks/pip.

|      -  EFTC = Time Constant for transient fuel, sec.

|      -  EISF = Background based steady state fuel film mass, lbm.

|      -  TFC_CHG = Aircharge that transient fuel (background)  was  evaluated  at,
|         lbm.

|      -  TFC_MULT = Transient fuel multiplier, unitless.

|      -  TFC_SLOPE = Change in the  transient  fuel  puddle  mass  per  change  in
|         aircharge.

       -  

|     Bit Flags:

|      -  fulfg_altpip =  "FUeL_ForeGround_ALTernate_PIP_edge_execution_indicator";
|         1  <->  This  foreground transient fuel routine is being executed only on
|         alternate rising PIP edges or only on alternate falling PIP edges  (Ref.:
|         AIR_DOWN_CAL);  0  <->  This  foreground  transient fuel routine is being
|         executed on every rising PIP edge or on every falling PIP  edge.   (NOTE:
|         This  flag's  identifier  is  in the lower case; this flag is a 'strategy
|         specification flag'; this flag need not be explicitly defined in software
|         if   the  logic  which  this  flag  is  used  to  express  is  accurately
|         implemented.)


                                        7-131

                FUEL STRATEGY, FOREGROUND TRANSIENT FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|      -  TFC_FG_EN = Foreground TFC_HR calculation enable  flag;  1  ->  calculate
|         TFC_HR, 0 -> don't calculate TFC_HR.

|     Calibration Constants:

|      -  TFC_MIN = The minimum compensation clip.





|     OUTPUTS

|     Registers:

|      -  AISF = The actual intake surface fuel, lbm.

|      -  EFTR = The puddle mass transfer rate, lbm/sec.

|      -  EISF_FG = Foreground based steady state fuel film mass, lbm.

|      -  TFC_HR = Fuel  mass  per  injection  from  transient  fuel  compensation,
|         lbm/pip.


|     Bit Flags:

|      -  dt_temp = "Delta_Time_TEMPorary_register"; The interval of time since the
|         last time this routine executed, assuming that this routine executes once
|         every PIP period when fulfg_altpip = 0; Units:   806x  Master  I/O  Timer
|         counts ('ticks').





























                                        7-132

                FUEL STRATEGY, FOREGROUND TRANSIENT FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     PROCESS
|                          STRATEGY MODULE: FUEL_TRANS_FG_COM1


|                        FOREGROUND TRANSIENT FUEL COMPENSATION



|     BEGIN: fuel_transient_fg_calculations

|            ;called from within the FUEL_FG_PIPEDG_COM strategy module.



|     1. Determine if foreground is enabled.

|     TFC_FG_EN = 0 ------------------------| EXIT fuel_transient_fg_calculations
|      ;foreground disabled                 |
|                                           | --- ELSE ---
|                                           |
|                                           | CONTINUE with
|                                           |     fuel_transient_fg_calculations



|     2. Calculate the equlibrium puddle mass based on EISF (background) and the 
|     new CYL_AIR_CHG.

|                EISF_FG = EISF + [(CYL_AIR_CHG - TFC_CHG) * TFC_SLOPE]



|     3. Calculate EFTR; the puddle mass transfer rate.

|                             EFTR = (EISF_FG - AISF)/EFTC



|     4. Calculate AISF; the actual intake surface fuel.


|     fulfg_altpip = 1 ---------------------| dt_temp = DT12S + DT12S
|                                           |
|                                           | ;it has been two PIP periods
|                                           | ; since the last time this
|                                           | ; routine executed.
|                                           |
|                                           | --- ELSE ---
|                                           |
|                                           | dt_temp = DT12S
|                                           | ;it has been one PIP period
|                                           | ; since the last time this
|                                           | ; routine executed.


|                        AISF =  AISF + (EFTR * dt_temp  * stcf)

|                           (clip AISF to zero as a minimum)


                                        7-133

                FUEL STRATEGY, FOREGROUND TRANSIENT FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     5. Calculate TFC_HR; the transient fuel compensation.


|                               tfc_hr = EFTR * TFC_MULT

|     |tfc_hr| > TFC_MIN -------------------| TFC_HR = tfc_hr
|      ;magnitude of tfc_hr great enough    |
|                                           | --- ELSE ---
|                                           | 
|                                           | TFC_HR = 0


|     END: fuel_transient_fg_calculations















































                                        7-134

             FUEL STRATEGY, FOREGROUND QUICK AND DIRTY FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                           FOREGROUND QUICK AND DIRTY LOGIC


|     OVERVIEW 

|     This routine is performed directly after foreground transient fuel.  Quick
|     and dirty fuel is intended to reduce the lean air/fuel excursions that occur 
|     during a rapid tip-in due to injector output scheduling limitations. 


|     DEFINITIONS 

|     INPUTS

|     Registers:

|      -  TFC_HR = Transient fuel compensation, lbm/pip.

|      -  QD_COUNTER = Counter used to keep track of  how  many  time  QD_FUEL  was
|         added to TFC_HR.

|      -  QD_FUEL = Quick and dirty fuel to compensate for injector output  control
|         limitations.

|      -  QD_TP_LAST = Last foreground TP value.

|     Bit Flags:

|      -  QD_FG_SET = Flag indicating when QD_COUNTER is loaded; 1-> loaded.

|      -  QD_READY = Flag indicating when QD_FUEL was added on to  base  fuel,  can
|         only be added on once per tip-in.

|     Calibration Constants:

|      -  QD_EVENTS = Number of events to add QD component.

|      -  QD_TP_MIN = Minimum delta change in TP to trigger the addition of QD_FUEL
|         to TFC_HR, counts.


      OUTPUTS

      Registers:

|      -  TFC_HR = Compensation fuel to be added onto base fuel, lbm/pip.

|      -  QD_COUNTER = See above.


|     Bit Flags:

|      -  QD_FG_SET = See above.

|      -  QD_READY = See above.





                                        7-135

             FUEL STRATEGY, FOREGROUND QUICK AND DIRTY FUEL LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
|                           STRATEGY MODULE: FUEL_QD_FG_COM1


|                             QUICK AND DIRTY COMPENSATION


|     BEGIN: fuel_qd_fg_calculations.

|            ;called immediately after foreground transient fuel.
|            ;called from within the FUEL_FG_PIPEDG_COM strategy module.



|     QD_READY = 0 ---------------------------| QD_TP_LAST = (read TP A/D)
|      (QD component already added)           |
|                                             | EXIT THIS ROUTINE
|                                             |
|                                             | --- ELSE ---
|                                             |
|                                             | qd_tp_cur = (read TP A/D)
|                                             | qd_tp_dif = qd_tp_cur - QD_TP_LAST 
|                                             | QD_TP_LAST = qd_tp_cur
|                                             | 
|                                             | CONTINUE THIS ROUTINE


|     qd_tp_dif > QD_TP_MIN ------------|
|      (tp diff great enough)           |AND -| QD_COUNTER = QD_EVENTS
|                                       |     | QD_FG_SET = 1
|     QD_FG_SET = 0 --------------------|     
|      (counter not set)                    


|     QD_COUNTER <> 0 ------------------------| QD_COUNTER = QD_COUNTER - 1
|      (add qd component)                     | (clip counter to 0)
|                                             | TFC_HR = TFC_HR + QD_FUEL


|     QD_FG_SET = 1 --------------------|     
|      (qd counter was set)             |AND -| QD_READY = 0
|                                       |     | QD_FG_SET = 0
|     QD_COUNTER = 0 -------------------| 
|      (counted down)


|     END: fuel_qd_fg_calculations.













                                        7-136

           FUEL CONTROL STRATEGY, FUEL PULSEWIDTH, FOREGROUND FUEL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               FOREGROUND FUEL PULSEWIDTH


      OVERVIEW

      This module is designed to calculate updated main fuel pulsewidths  for  each
      engine  bank, using the latest air charge value calculated upon completion of
      the air charge computation during the PIP interrupt.   Included  within  this
      module are:  minimum and maximum pulsewidth clips; a check for a greater than
      10% change in computed pulsewidth to determine  whether  to  update  previous
      fuel  pulsewidths (IF the injectors are synchronized with the prior request);
      a request for a new computation  of  the  injector  timing;  a  test  of  the
      conditions  for  execution  of  the  dynamic fuel; and, if the conditions are
      correct, a CALL to the dynamic fuel strategy.

      NOTE:  Parameters whose alphabetic characters  are  in  the  lower  case  are
      non-displayable temporary registers.



      DEFINITIONS

      INPUTS

      Registers:

       -  AHISL_TICK  =  Dual  slope  high  slope  in  lbs/tick,  compensated   for
          temperature.

       -  ALOSL_TICK  =  Dual  slope  low  slope  in  lbs/tick,   compensated   for
          temperature.

       -  CYL_AIR_CHG = Current cylinder air charge used in fuel calculation, lbm.

       -  DT12S = The period between the last two PIP low-to-high transitions.

       -  DT12SH = The high byte in the three byte time between PIP up-edges.

       -  F_A_RATIOn = Desired fuel/air ratio for the identified engine bank number
          (n); n = 1, 2.

       -  FB_DIFF = Difference between FUEL_BKPT divided by temperature compensated
          high  slope  and  FUEL_BKPT divided by temperature compensated low slope,
          ticks.

       -  [fuel_bk(n)] = A temporary register that contains the fuel mass  required
          for the identified engine bank number (n); n = 1, 2.

       -  [fuelpw(n)] = A temporary register that contains  the  interim  value  of
          fuel pulsewidth (in ticks) for the identified engine bank number (n); n =
          1, 2.

       -  FUELPWn = The  previous  injector  pulsewidth  (in  clockticks)  for  the
          identified engine bank number (n); n = 1, 2.






                                        7-137

           FUEL CONTROL STRATEGY, FUEL PULSEWIDTH, FOREGROUND FUEL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  MINPWT = Minimum desired fuel pulsewidth, ticks.

       -  MINPW_LBMF = Fuel Mass at MINimum fuel PulseWidth, LBM.

       -  PWOFF = Injector pulsewidth offset, clock ticks.

       -  TFC_HR = Fuel  mass  per  injection  from  transient  fuel  compensation,
          lbs/cylinder.

      Bit Flags:

       -  CRKFLG = Flag indicating when in CRANK mode; 1 -> crank.

|     Calibration Constants:

       -  FN1327 = A single-row table that maps an injector's 'injector number'  to
          a   numeric  indicator  of  the  engine  bank  in  which  the  injector's
          corresponding cylinder is located.  (NOTE:  This numeric indicator is NOT
          equal  to  the  engine  bank's  'bank number'; a table output of 0 (zero)
          corresponds to engine bank  1; a table output of 2 corresponds to  engine
          bank  2.)
                        X input  =  'injector number'
                        Y input  =  Null
                   table output  =  'engine bank indicator'

       -  FN1329 = A single-row table that  maps  an  injector's  'firing  sequence
          number' to its 'injector number'.
                      X input  =  'firing sequence number'
                      Y input  =  Null
                 table output  =  'injector number'

       -  FUEL_BKPT = The amount of fuel flow when transfer is made  from  the  low
          slope to the high slope.

       -  NUMCYL = Number of cylinders in the engine.

      Non-Calibratable Constants:

       -  [stcf] = Seconds to (clock)Ticks Conversion Factor.





















                                        7-138

           FUEL CONTROL STRATEGY, FUEL PULSEWIDTH, FOREGROUND FUEL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  [fgbeta(n)] = The fuel pulsewidth in percent of a PIP period.  This is  a
          temporary register that will be used to calculate injector on-edge time.

       -  [fuel_bk(n)] = See above.

       -  [fuelpw(n)] = See above.

       -  FUELPWn = See above.

       -  LBMF_INJn = Two registers which contain the fuel mass per  injection  for
          each engine bank; n = 1, 2.

      Bit Flags:

       -  CHANGE_FUELPW = A flag that indicates that  the  desired  pulsewidth  for
          in-progress  fuel  injections  needs  to  be  modified because the latest
          calculated fuel pulsewidth value for that injection has changed  by  more
          than 10%.






































                                        7-139

           FUEL CONTROL STRATEGY, FUEL PULSEWIDTH, FOREGROUND FUEL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: FUEL_FG_CALC_COM9



      For each engine bank, compute the fuel required by a cylinder in  that  bank,
      and compute the corresponding pounds mass per injection.



|     BEGIN:  fuel_pw_fg_calculations

|             ;Called from within the FUEL_FG_PIPEDG_COM strategy module.


|     CRKFLG = 1 -----------------------------| EXIT this fuel_pw_fg_calc routine.
       (in crank mode)                        |
                                              | --- ELSE ---
                                              |
|                                             | Continue executing fuel_pw_fg_calc


      [fuel_bk(n)] < FUEL_BKPT ---------------| [fuel_bk(n)] = [CYL_AIR_CHG *
       (run mode and low slope)               |                F_A_RATIOn] + TFC_HR
                                              |  (n = 1,2; identifying engine bank)
                                              | LBMF_INJn = [fuel_bk(n)]
                                              | [fuelpw(n)] = [fuel_bk(n)] / 
                                              |                          ALOSL_TICK
                                              |
                                              | --- ELSE ---
                                              |
       (run mode and high slope)              | [fuel_bk(n)] = [CYL_AIR_CHG *
                                              |                F_A_RATIOn] + TFC_HR
                                              |  (n = 1,2; identifying engine bank)
                                              | LBMF_INJn = [fuel_bk(n)]
                                              | [fuelpw(n)] = { ( [fuel_bk(n)] /
                                              |              AHISL_TICK) - FB_DIFF}


      The fuel pulsewidth is checked to ensure that it exceeds some minimum  value,
      and  if it does not, the minimum pulsewidth is output.  The only exception to
      this is if the pulsewidth is zero, in which case no fuel is output.


      [fuelpw(n)] > 0 ------------------|
                                        |AND -| [fuelpw(n)] = MINPWT
      [fuelpw(n)] < MINPWT -------------|     | LBMF_INJn = MINPW_LBMF













                                        7-140

           FUEL CONTROL STRATEGY, FUEL PULSEWIDTH, FOREGROUND FUEL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Check to see if the pulsewidth would require the injector to be on more  than
      all  the time, in which case, clip the injector 'on' time to be 1/32 of a PIP
      period less than 'full on'.


      DT12SH = 0 -----------------------|
       (time is in 2 bytes)             |
                                        |AND -| [fuelpw(n)] = (NUMCYL - 0.03125) *
      ([fuelpw(n)] /                    |     |                DT12S
        DT12S) >= NUMCYL ---------------|     | [fgbeta(n)] = [(NUMCYL - 0.03125) +
       (fuel is on too long)                  |                (PWOFF / DT12S)]
                                              | LBMF_INJn = [([fuelpw(n)] +
                                              |              FB_DIFF) * AHISL_TICK]
                                              |
                                              | --- ELSE ---
                                              |
      DT12SH = 0 -----------------------------| [fgbeta(n)] = ([fuelpw(n)] / DT12S)
                                              |                   + (PWOFF / DT12S)
                                              |
                                              | --- ELSE ---
                                              |
                                              | [fgbeta(n)] = 0


      IF the currently calculated fuel pulsewidth, [fuelpw(n)], has changed by more
      than  10%  from  the last computed value (stored in FUELPWn), AND IF the last
      computed value is not zero (e.g., as in the case of fuel cut-off),  THEN  set
      the  CHANGE_FUELPW  flag.   At  the  next  check  of the output queue, if any
      injector has a pulse in progress with the off-edge in  the  queue,  then  the
      off-edge  will be updated to provide the latest pulsewidth.  In the case of a
      reduction in pulsewidth size, the off-edge will not be scheduled  to  be  any
      earlier than the current time.


      {absolute value of [([fuelpw(n)] -
                FUELPWn) / FUELPWn]} > 0.10 --| CHANGE_FUELPW = 1


      Set the stored pulsewidth equal to the currently calculate pulsewidth.


      always ---------------------------------| FUELPWn = [fuelpw(n)]



|     END: fuel_pw_fg_calculations



|     (NOTE:  The software  referenced  in  the  FUEL_INJector_TIMing_COM  strategy
|     module is executed in conjunction with execution of the software specified by
|     the above fuel_pw_fg_calculations routine.)








                                        7-141

                        FUEL STRATEGY, INJECTOR TIMING - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                                    INJECTOR TIMING


|     OVERVIEW

|     Each time a new fuel pulse start time is calculated and the  delay  from  the
|     current  PIP  edge  is  between  0.5 and 1.5 PIP periods, a request for a new
|     delay calculation is requested.


|     NOTES:

|     1.  The change in injector timing between  consecutive  injector  firings  is
|     limited  to a maximum of one half PIP period.  This has the effect of walking
|     the injector timing for large timing changes.

|     2.  The final value of injector delay is limited to the range  0  degrees  to
|     716  degrees.   Intermediate  calculations  and  results are maintained in an
|     unlimited fashion.

|     3.  The user must set DEGPIP to match his engine.  DEGPIP is  the  number  of
|     engine  crank  degrees  per  PIP  interval.   (90  for  8-cylinder,  120  for
|     6-cylinder, 180 for 4-cylinder).



|     DEFINITIONS

|     INPUTS

|     Calibration Constants:

|      -  INJREF = Indicates which edge of the fuel pulse is the reference edge for
|         fuel timing, INJDLY; 0 -> start edge.


























                                        7-142

                        FUEL STRATEGY, INJECTOR TIMING - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     PROCESS
|                          STRATEGY MODULE: FUEL_INJ_TIM_COM1


|     INJECTOR TIMING EXAMPLES

|     INJDLY = 400 DEGREES


|                                     ENGINE CYCLE

|        TDC            BDC            TDC             BDC


|         |              |              |               |                |
|         |              |              |               |                |
|         |<----POWER--->|<---EXHAUST-->|<---INTAKE---->|<-COMPRESSION-->|
|         |     STROKE   |    STROKE    |    STROKE     |  STROKE        |
|         |              |              |               |                |


|        360            540            720             180             360

|         | 1ST PIP                                                          

|     PIP SIGNAL

|         | #1 PIP
|         |
|        ****  *****    *****  *****   *****   *****   *****   *****    **
|        *  *  *   *    *   *  *   *   *   *   *   *   *   *   *   *    *
|        *  *  *   *    *   *  *   *   *   *   *   *   *   *   *   *    *
|        *  *  *   *    *   *  *   *   *   *   *   *   *   *   *   *    *
|       **  ****   ******   ****   *****   *****   *****   *****   ******
|         |    |        |      |       |       |       |
|         0   80       170    260     350     440     530

|        TDC                                 |
|         |                                  |
|         |<--------- INJDLY = 400 --------->|
|         |                                  |
|         |ON       INJECTOR  1         ******
|         |                             *    *
|         |                             *    *
|         |OFF             INJREF = 1   *    *
|     ***********************************    ******************************

|         |                                  |
|         |         INJECTOR  1              |
|         |         INJREF = 0               ******
|         |                                  *    *
|         |                                  *    *
|         |                                  *    *
|     ****************************************    *************************






                                        7-143

                    FUEL STRATEGY, INJECTOR OUTPUT CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                                INJECTOR OUTPUT CONTROL


      OVERVIEW

|     1.  The injector pulse start should be based on pulsewidth and timing values
|         calculated from the most recent input data (PIP, LOAD, lambda, etc.). 

|     2.  The injector timing value is used only to start the injector pulse,
|         regardless of which edge is used as the reference. 

|     3.  Pulsewidth accuracy has top priority after an injector pulse is started. 

|     4.  If possible, the pulsewidth should be updated while in progress to take
|         advantage of the most recent input data. That is, the injector pulse can
|         end early or extend later as conditions change. 

|     5.  Each time a fuel PW is outputted or corrected, the Data Output Link Fuel
|         Summation, FUEL_SUM is updated. FUEL_SUM = FUEL_SUM + LBMF_INJn (N=1, if
|         FUELPW1 is outputted; n=2 if FUELPW2 is outputted.) 








































                                        7-144

                    FUEL STRATEGY, INJECTOR OUTPUT CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS


      INPUTS

      Registers:

|      -  CRK_FUL = Fuel pulsewidth used in crank mode, sec.

|      -  CRK_PIP_INJ = Number of PIP periods per Injector firing.

|      -  FUELPW1/FUELPW2 = EGO-1 (or EGO-2) injector pulsewidth, clock ticks. 

|      -  PWOFF = Injector pulsewidth offset, clock ticks.


|     Bit Flags:

|      -  CRKFLG = Flag indicating status of engine mode; 1 -> in Crank.

|      -  FIRST_PIP = Flag indicating when first PIP up edge has been processed.

|      -  SYNFLG = Flag indicating whether fuel is synchronous; 1 -> synchronous,
|         0 -> asynchronous. It is initialized to 0. 


      Calibration Constants:

|      -  EDSEL = Switch for selective Crank Fuel Timing at Falling - Edge of PIP. 

|      -  FN1327 = Fuel pulsewidth register map, used to determine which fuel
|         register is used. 
|                  X =  Injector output number.  
|                  Y =  Null.

|      -  FN1329 = Injector firing order used for correcting  Inj_Bank  to  correct
|         the firing order.
|                  X =  INJ_BANK.
|                  Y =  Null.

|      -  NUMCYL = Number of cylinders in the engine.

|      -  NUMEGO = Number of EGO sensors present; mono or stereo.

















                                        7-145

                    FUEL STRATEGY, INJECTOR OUTPUT CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS


      Registers:

|      -  CRK_FUL = See above.

|      -  CRK_PIP_INT = CRK_PIP_INJ initialization indicator; 
|         1 -> CRK_PIP_INJ initialized.

|      -  FUEL_SUM = For DOL summer pulsewidth.

|      -  PWOFF = See above.



|     EXTERNAL ROUTINES REFERENCED


|      -  fuel_fg_inj_outp_schedule  (in strategy module FUEL_SCHEDULE_COM)

|      -  fuel_fg_inj_main_pw_off  (in strategy module FUEL_MAIN_OFF_COM)






































                                        7-146

                    FUEL STRATEGY, INJECTOR OUTPUT CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
|                          STRATEGY MODULE: FUEL_INJ_OUT_COM2



|     BEGIN: fuel_fg_injector_outp_service

|            ;called from within the FUEL_FG_PIPEDG_COM strategy module.



|     CRKFLG = 1 ------------|
|                            |AND -|
|     CRK_FUL = 0 -----------|     |
|                                  |OR --| No injector output
|     CRKFLG = 1 ------------|     |     | EXIT fuel_fg_injector_outp_service
|                            |     |     |
|     CRK_FUL <> 0 ----------|AND -|     |
|                            |           |
|     FIRST_PIP = 0 ---------|           |
|                                        | --- ELSE ---
|                                        | 
|                                        | CRK_PIP_INT = 1
                                         |
|                                        | CONTINUE with
|                                        |     fuel_fg_injector_outp_service


































                                        7-147

                    FUEL STRATEGY, INJECTOR OUTPUT CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     CRKFLG = 1 ------------------|
|      (crank)                     |     
|                                  |AND -| NORMAL CRANK - Falling Edge Timing    
|     EDSEL = 0 -------------------|     | .Fire NUMCYL injector outputs every 
|                                        |  CRK_PIP_INJ number of PIP's, upon
|                                        |  receiving the falling edge of the 
|                                        |  proper PIP signal.
|                                        | .Outputs included are INJ-1 thru 
|                                        |  INJ-NUMCYL.
|                                        | .Use CRK_FUL as the injector pulsewidth.
|                                        | .The injector offset PWOFF is included
|                                        |  in the actual injector pulse output.
|                                        | .Update FUEL_SUM
|                                        |
|                                        | --- ELSE ---
|                                        |
|     CRKFLG = 1 ------------------------| NORMAL CRANK - Rising Edge Timing
|                                        | .Fire NUMCYL injector outputs every
|                                        |  CRK_PIP_INJ number of PIP's, upon
|                                        |  receiving the rising edge of the
|                                        |  proper PIP signal.
|                                        | .Outputs included are INJ-1 thru
|                                        |  INJ-NUMCYL.
|                                        | .Use CRK_FUL as the injector pulsewidth.
|                                        | .The injector offset PWOFF is included
|                                        |  in the actual injector pulse output.
|                                        | .Update FUEL_SUM
|                                        |
|                                        | --- ELSE ---
|                                        |
|     SYNFLG = 0 ------------------------| RUN OR UNDERSPEED, NOT IN SYNC
|      (not in sync)                     | .Fire the appropriate injector outputs
|                                        |  upon receiving the rising edge of the 
|                                        |  proper PIP signal. Injector timing is 
|                                        |  random.
|                                        | .Outputs included are INJ-1 thru
|                                        |  INJ-NUMCYL.
|                                        | .Software execution must be
|                                        |  consistent with all documentation
|                                        |  in this strategy module.
|                                        | .Software execution must include
|                                        |  executing the strategy specified
|                                        |  in strategy routines:
|                                        |  fuel_fg_inj_outp_schedule
|                                        |  (in strategy module FUEL_SCHEDULE_COM)
|                                        |  and fuel_fg_inj_main_pw_off (in
|                                        |  strategy module FUEL_MAIN_OFF_COM)
|                                        | .FN1329 governs the firing order.
|                                        | .FN1327 governs the use of FUELPW1 or 
|                                        |  FUELPW2 as the injector pulsewidth.
|                                        | .The injector offset PWOFF is included
|                                        |  in the actual injector pulse output.
|                                        | .Add FUELPWn to FUEL_SUM; increment
|                                        |    PULSCT
|                                        |
|                                        | --- ELSE ---
                                         |

|                               (continued on next page)

                                        7-148

                    FUEL STRATEGY, INJECTOR OUTPUT CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                            (continued from previous page)

|                                        | RUN, IN SYNC, DOUBLE FIRE
|                                        | .Fire the appropriate injector outputs
|                                        |  upon receiving the rising edge of the 
|                                        |  proper PIP signal. Injector timing is 
|                                        |  random.
|                                        | .Outputs included are INJ-1 thru 
|                                        |  INJ-NUMCYL.
|                                        | .Software execution must be
|                                        |  consistent with all documentation
|                                        |  in this strategy module.
|                                        | .Software execution must include
|                                        |  executing the strategy specified
|                                        |  in strategy routines:
|                                        |  fuel_fg_inj_outp_schedule
|                                        |  (in strategy module FUEL_SCHEDULE_COM)
|                                        |  and fuel_fg_inj_main_pw_off (in
|                                        |  strategy module FUEL_MAIN_OFF_COM)
|                                        | .FN1329 governs the firing order.
|                                        | .FN1327 governs the use of FUELPW1 or
|                                        |  FUELPW2 as the injector pulsewidth.
|                                        | .The injector offset PWOFF is included
|                                        |  in the actual injector pulse output.
|                                        | .Upon the "not in sync" to "sync" 
|                                        |  transition, the injector firing pattern
|                                        |  is adjusted to line up INJ-1 with 
|                                        |  signature PIP.
|                                        | .Add FUELPWn to FUEL_SUM (for the 
|                                        |  DOL_COUNT Calculation)
|                                        | .Increment PULSCT



|     END:  fuel_fg_injector_outp_service

























                                        7-149

                    FUEL STRATEGY, INJECTOR OUTPUT CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                                 INJECTOR OUTPUT LOAD


|     On stereo EGO applications, each injector output must be linked to the proper
|     EGO  sensor.   FN1327 is a 1x9 table that is used to match injector output to
|     EGO sensor.  Each slot in the table corresponds  to  an  individual  injector
|     output.   The  table value is an address offset to select between FUELPW1 and
|     FUELPW2.


|                              IF FN1327 = 0, use FUELPW1.

|                              IF FN1327 = 2, use FUELPW2.


|     For this register addressing scheme, FUELPW1 and FUELPW2 must be  consecutive
|     word registers and FUELPW1 must be first.

|     The FN1327 table reserves space to control up to 8 injector outputs (the zero
|     slot  is never referenced).  The actual number is determined by NUMCYL, which
|     is the number of cylinders in the engine.   The  user  must  fill  the  table
|     locations to match NUMCYL.

|     The FN1327 table must be calibrated for all applications, regardless  of  the
|     EGO type (stereo or mono).  NOTE that if NUMEGO = 1 (mono-EGO), all values in
|     FN1327 must be zero (corresponding to FUELPW1), or no fuel will  be  sent  to
|     Bank 2.

































                                        7-150

                    FUEL STRATEGY, INJECTOR OUTPUT CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     5.0L Injector Output Load Examples:


                                              
|                          SEFI              
|                          STEREO EGO         
|                          NUMCYL=8,NUMEGO=2  
|     TABLE    INJECTOR    ------------------ 
|      SLOT     OUTPUT     FN1327 PULSEWIDTH  
|     ------   --------    ------ -----------  
|       0      NOT USED       0   FILLER          
|       1      INJ-1          0   FUELPW2         
|       2      INJ-2          0   FUELPW2         
|       3      INJ-3          0   FUELPW2         
|       4      INJ-4          0   FUELPW2         
|       5      INJ-5          2   FUELPW1         
|       6      INJ-6          2   FUELPW1         
|       7      INJ-7          2   FUELPW1         
|       8      INJ-8          2   FUELPW1         


|                          SEFI               
|                          MONO-EGO           
|                          NUMCYL=8,NUMEGO=1  
|                         ------------------  
|                         FN1327 PULSEWIDTH   
|                         ------ -----------  
|                            0   FILLER       
|                            0   FUELPW1         
|                            0   FUELPW1         
|                            0   FUELPW1         
|                            0   FUELPW1         
|                            0   FUELPW1         
|                            0   FUELPW1         
|                            0   FUELPW1         
|                            0   FUELPW1         
























                                        7-151

                    FUEL STRATEGY, INJECTOR OUTPUT CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                                 INJECTOR FIRING ORDER


|     On SEFI applications, each injector output is linked to it's matching  engine
|     cylinder.   The injector output number is the cylinder number.  The injectors
|     must be fired in the proper order to achieve sequential operation.

|     FN1329 is a 1x8 table which is used to control  the  injector  firing  order.
|     The table contains the firing order of the engine.



|     5.0L Injector Firing Order Examples


|                      SEFI           
|     FN1329        NUMCYL = 8        
|     TABLE       ---------------     
|      SLOT       FN1329  OUTPUT      
|     ------      ------ --------     
|       0           1    INJ-1          
|       1           5    INJ-5          
|       2           4    INJ-4          
|       3           2    INJ-2          
|       4           6    INJ-6          
|       5           3    INJ-3          
|       6           7    INJ-7          
|       7           8    INJ-8          
































                                        7-152

                     FUEL STRATEGY, FUEL SCHEDULING LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                                 FUEL SCHEDULING LOGIC


|     OVERVIEW

|     This module is executed for each main fuel pulse.  Based on the  engine  bank
|     for  which  the  main  fuel  pulse was calculated, this module determines the
|     injector for which the main pulse would normally be scheduled in the  absence
|     of  any  injector  cut-out  requirements.  Based on the current status of the
|     various injector cut-out conditions, the module then determines  whether  the
|     main  pulse  is actually to be delivered.  If the main pulse is to be output,
|     then this module directs the main pulse's on-edge to  be  scheduled  for  the
|     correct injector.

      Note:  Parameters whose alphabetic characters  are  in  the  lower  case  are
      non-displayable temporary registers.



      DEFINITIONS

      INPUTS

      Registers:

|      -  INJ_BANK1 = The firing sequence number of the  SEFI  injector  in  engine
|         Bank 1 for which a main fuel pulse would normally next be scheduled.

|      -  INJ_BANK2 = The firing sequence number of the  SEFI  injector  in  engine
|         Bank 2 for which a main fuel pulse would normally next be scheduled.

|      -  VCUTOUT = The 'injector number' of the injector that is to be disabled as
|         part of the Engine-Running On-Demand Cylinder Balance Test.

|     Bit Flags:

|      -  CRKFLG = Crank flag.

|      -  FGFFLG = Toggle flag for alternate injector firing; 1 -> No firing of the
|         injector for which the next main fuel pulse would otherwise be scheduled.

|      -  HALF_FUEL = Flag which indicates that  alternate  injections  are  to  be
|         cut-out; 1 -> half fuel.

|      -  NO_FUEL = Flag which indicates that all injections are to be  cut-out;  1
|         -> no fuel.

|      -  RUNNING = Flag indicating if KOER (key-on Engine  Running)  Self-Test  is
|         operating; 1 -> operating.











                                        7-153

                     FUEL STRATEGY, FUEL SCHEDULING LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     Calibration Constants:

|      -  FN1327 = A single-row table that maps an injector's 'injector number'  to
|         a   numeric  indicator  of  the  engine  bank  in  which  the  injector's
|         corresponding cylinder is located.  (NOTE:  This numeric indicator is NOT
|         equal  to  the  engine  bank's  'bank number'; a table output of 0 (zero)
|         corresponds to engine bank #1; a table output of 2 corresponds to  engine
|         bank #2.)
|                       X input  =  'injector number'
|                       Y input  =  Null
|                  table output  =  'engine bank indicator'

|      -  FN1329 = A single-row table that  maps  an  injector's  'firing  sequence
|         number'  to  its  'injector  number'.  Arranged in firing sequence number
|         order.
|                       X input  =  'firing sequence number'
|                       Y input  =  Null
|                        Output  =  'injector number'

      OUTPUTS

      Registers:

|      -  LST_PW[inj_num] = The main fuel  PulseWidth  (in  ticks)  (not  including
|         PWOFF)  most  recently scheduled for the injector whose 'injector number'
|         is [inj_num].  (It is one of the  registers  in  an  array  of  registers
|         composed  of  one  register for each SEFI injector on the engine.) (NOTE:
|         This table is used exclusively by the Dynamic Fuel strategy to  determine
|         whether the currently calculated main fuel pulsewidth is greater than the
|         main fuel pulsewidth that was previously calculated and scheduled for the
|         cylinder that is currently on its intake stroke.)

|      -  [mainpw_bank_indicator] = A numeric INDICATOR  of  the  engine  BANK  for
|         which  the  subject  MAIN  fuel  PulseWidth was calculated.  (NOTE:  This
|         numeric indicator is NOT equal to the  engine  bank's  'bank  number';  a
|         numeric  value  of  0  (zero) corresponds to engine bank #1; a value of 2
|         corresponds to engine bank #2.)

|      -  [mainpw_bank_num] = The BANK NUMber of the  engine  bank  for  which  the
|         subject  MAIN  fuel  PulseWidth  was calculated; can equal either 1 or 2.
|         NOTE:  This variable is calculated in  this  routine  for  use  in  other
|         foreground fuel routines.

|      -  [mainpw_inj_num] = The INJector NUMber of  the  injector  for  which  the
|         subject  MAIN  fuel  Pulse  would  normally  be  scheduled.   For  a SEFI
|         injector, it identifies the location in  the  engine  of  the  injector's
|         corresponding  cylinder.   (Note:  An injector's 'injector number' is NOT
|         the same as its 'firing sequence number'.)

|      -  [mainpw_seq_num] = The firing SEQuence NUMber of the injector  for  which
|         the  subject  MAIN  fuel  Pulse  would normally be scheduled.  (Note:  An
|         injector's 'firing sequence number' is NOT  the  same  as  its  'injector
|         number'.)

|     Bit Flags:

|      -  FGFFLG = See above.



                                        7-154

                     FUEL STRATEGY, FUEL SCHEDULING LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
|                          STRATEGY MODULE: FUEL_SCHEDULE_COM1

|                    (Performed in the FUEL_SERVICE software module)


|     BEGIN: fuel_fg_inj_outp_schedule

|            ;referenced from the FUEL_INJ_OUT_COM strategy module.



|     The main fuel pulsewidth was
|       calculated for engine Bank 1 ---------| [mainpw_seq_num] = INJ_BANK1
|                                             |
|                                             | --- ELSE ---
|                                             |
|                                             | [mainpw_seq_num] = INJ_BANK2



|     Always ---------------------------------| [mainpw_inj_num] =
|                                             |       FN1329([mainpw_seq_num],0)
|                                             |
|                                             | [mainpw_bank_indicator] =
|                                             |       FN1327([mainpw_inj_num],0)



|     [mainpw_bank_indicator] = 0 ------------| [mainpw_bank_num] = 1
|                                             |
|                                             | --- ELSE ---
|                                             |
|                                             | [mainpw_bank_num] = 2



|     CRKFLG = 0 -----------------------|
|      (not in crank)                   |
|                                       |
|     HALF_FUEL = 1 --------------------|AND -| FGFFLG = 1
|      (alternate injection desired)    |     |
|                                       |     |
|     FGFFLG = 0 -----------------------|     |
|                                             | --- ELSE ---
|                                             |
|                                             | FGFFLG = 0













                                        7-155

                     FUEL STRATEGY, FUEL SCHEDULING LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     RUNNING = 1 ----------------|
|                                 |AND -|
|     VCUTOUT = [mainpw_inj_num] -|     |
|                                       |OR --| (do NOT schedule the
|     FGFFLG = 1 -----------------------|     |  main fuel pulse's on-edge)
|                                       |     | STORE the current clocktime
|     NO_FUEL = 1 ----------------------|     |  as the previous off-edge time.
|                                             |
|                                             | LST_PW[mainpw_inj_num] = ^FFFF
|                                             | (mislead the dynamic fuel
|                                             |  strategy to prevent it from
|                                             |  subsequently scheduling a
|                                             |  fuel pulse for that injector)
|                                             |
|                                             | --- ELSE ---
|                                             |
|                                             | SCHEDULE the main fuel pulse's
|                                             |  on-edge for injector number
|                                             |  "[mainpw_inj_num]".
|                                             |
|                                             | Call fuel_fg_inj_main_pw_off


|     END: fuel_fg_inj_outp_schedule




































                                        7-156

                FUEL STRATEGY, FUEL PULSEWIDTH, MAIN FUEL OFF - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                            FUEL PULSEWIDTH, MAIN FUEL OFF


      OVERVIEW

|     This module is executed for each non-zero main fuel pulse.  This  routine  is
|     called before a main fuel pulse off-edge is placed in the output carousel for
|     a high speed output port.  The routine calculates the off-edge time from  the
|     on-edge time and the fuel pulsewidth.  If there is sufficient space to insert
|     the off-edge into the carousel and the off-edge  time  is  within  the  early
|     limit  (i.e.,  there  is  not enough time to first place it into the software
|     queue), then the edge is placed in the carousel.  Otherwise, the direction of
|     the edge transition and the edge time are placed in the software queue.

|     LST_PWx, LBMF_TABx, and FUEL_SUM are also updated by this  routine.   LST_PWx
|     is  a  table  containing  the main pulsewidths output to each of the engine's
|     cylinders by the most recent of their respective main  fuel  pulses.   It  is
|     used  by the Dynamic Fuel strategy.  LBMF_TABx is a table containing the mass
|     of fuel injected to each of the engine's cylinders  by  the  most  recent  of
|     their  respective  main  fuel pulses.  FUEL_SUM keeps track of the total fuel
|     consumption for the trip computer.


|     NOTE:  Parameters whose alphabetic characters  are  in  the  lower  case  are
      non-displayable temporary registers.



      DEFINITIONS


      INPUTS

      Registers:

|      -  CRK_FUL = Fuel pulsewidth used in crank mode, sec.

|      -  FUELPW[bank_num] = The main FUEL PulseWidth  (in  ticks)  (not  including
|         PWOFF)  most  recently calculated for a cylinder in the engine bank whose
|         'bank number' is [bank_num], where [bank_num] is 1 or 2.

|      -  FUEL_SUM  =  An  accumulator  which  stores  the  total  amount  of  fuel
|         delivered; lbm.

|      -  LBMF_INJ[bank_num] = The Fuel Mass (lbm) of  the  main  fuel  pulse  most
|         recently  delivered  by a SEFI injection to a cylinder in the engine bank
|         whose 'bank number' is [bank_num], where [bank_num] is 1 or 2.

|      -  [mainpw_bank_num] = The BANK NUMber of the  engine  bank  for  which  the
|         subject  MAIN  fuel  PulseWidth  was calculated; can equal either 1 or 2.
|         This temporary  variable  is  calculated  elsewhere  in  a  part  of  the
|         foreground fuel strategy that executes synchronously with this module.

|      -  [mainpw_inj_num] = The 'INJector NUMber' of the injector  for  which  the
|         subject  MAIN  fuel  pulse is scheduled.  (Note:  An injector's 'injector
|         number' is NOT the same as its 'firing sequence number'.) This  temporary
|         variable  is  calculated  elsewhere  in  a  part  of  the foreground fuel
|         strategy that executes synchronously with this module.


                                        7-157

                FUEL STRATEGY, FUEL PULSEWIDTH, MAIN FUEL OFF - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|      -  [on_edge_time] = The time at which the injector is to be  turned  on  for
|         the  cylinder  for  which  the  main fuel pulse is to be scheduled; clock
|         ticks.  This temporary variable is calculated elsewhere in a part of  the
|         foreground fuel strategy that executes synchronously with this module.

|      -  PWOFF = Injector pulsewidth offset, clock ticks.

|     Bit Flags:

|      -  CRKFLG = Engine Mode Flag; 1 -> Crank Mode, 0 -> Not in Crank Mode.

|     Non-Calibratable Constants:

|      -  [stcf] = Seconds-to-ticks conversion.



      OUTPUTS

      Registers:

       -  FUEL_SUM = See above.

|      -  LBMF_TAB[inj_num] = The fuel mass of the main fuel  pulse  most  recently
|         delivered  by the injector whose 'injector number' is [inj_num].  (One of
|         the registers in an array of registers composed of one register for  each
|         injector on the engine.)

|      -  LST_PW[inj_num] = The main fuel  PulseWidth  (in  ticks)  (not  including
|         PWOFF)  most  recently scheduled for the injector whose 'injector number'
|         is [inj_num].  (One of the registers in an array of registers composed of
|         one register for each injector on the engine.)

|      -  [off_edge_time] = The time at which the fuel off-edge command  is  to  be
|         executed  to  turn  off  the fuel on the injector for which the main fuel
|         pulse is  to  be  scheduled;  clock  ticks.   (The  information  in  this
|         temporary  register  is to be transformed as appropriate and communicated
|         to the appropriate hardware structure, in a manner  consistent  with  all
|         required  h/w and opsys protocol, so that the off-edge event is correctly
|         scheduled.)




















                                        7-158

                FUEL STRATEGY, FUEL PULSEWIDTH, MAIN FUEL OFF - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
|                          STRATEGY MODULE: FUEL_MAIN_OFF_COM4

|                    (called before the main fuel off-edge is queued
|                     or placed in the hardware output carousel)    



|     BEGIN: fuel_fg_inj_main_pw_off

|            ;called from within the FUEL_SCHEDULE_COM strategy module.


|     Calculate the off-edge time as specified below, and then schedule it.


|     CRKFLG = 1 -----------------------------| [off_edge_time] = [on_edge_time] +
|                                             |   (CRK_FUL * [stcf]) + PWOFF
|                                             |
|                                             | --- ELSE ---
|                                             |
|                                             | [off_edge_time] = [on_edge_time] +
|                                             |   FUELPW[mainpw_bank_num] + PWOFF




|     always ---------------------------------| LST_PW[mainpw_inj_num] =
|                                             |          FUELPW[mainpw_bank_num]
|                                             | LBMF_TAB[mainpw_inj_num] =
|                                             |          LBMF_INJ[mainpw_bank_num]
|                                             | FUEL_SUM = FUEL_SUM +
|                                             |          LBMF_INJ[mainpw_bank_num]


|     END: fuel_fg_inj_main_pw_off
























                                        7-159

               FUEL STRATEGY, CALCULATE DYNAMIC FUEL CORRECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                           CALCULATE DYNAMIC FUEL CORRECTION


|     OVERVIEW

|     The dynamic fuel correction is a fuel pulse that is injected  into  the  open
|     valve  of  the  cylinder  that  is currently on its intake stroke.  This fuel
|     pulse is the result of the difference between:  (1) the air  charge  used  in
|     the  main  fuel  pulsewidth  calculation  most  recently  performed  for that
|     cylinder, and (2) the air charge used in the current calculation of the  main
|     fuel  pulsewidth  (being performed for a cylinder that is later in the engine
|     firing sequence, and earlier in its own cycle, than is the cylinder currently
|     on its intake stroke).

|     The dynamic fuel correction is limited to MINPW for a minimum; for a maximum,
|     it  is  limited  so  that  it will not extend past the point in time when the
|     cylinder will no longer induct the fuel injected on this intake event.

|     NOTE:  Parameters whose alphabetic characters  are  in  the  lower  case  are
|     non-displayable temporary registers.



      DEFINITIONS

      INPUTS

      Registers:

|      -  [current_time] = The value in the EEC module CPU's 'master I/O timer'  (a
|         h/w-dedicated  register); unreferenced relative time (not a time interval
|         referenced to any  event);  increments  by  1  (one)  every  Timer  count
|         ('tick'), where a 'tick' is the time interval equal to the product:
|         (period_of_CPU_machine_state)*(the_number_of_CPU_output_carousel_slots);
|         the Timer rolls-over after attaining its maximum possible value.

|      -  CYL_AIR_CHG = Current cylinder air charge used in fuel calculation, lbm.

|      -  DYNPW = Dynamic fuel correction pulsewidth, clockticks.

|      -  ENABLE_DYNAM = Counter that enables dynamic fuel makeup  pulse  4  engine
|         revolutions after the strategy has identified number one cylinder.

|      -  LST_PW(x) = The array of registers containing the  fuel  pulsewidths  (in
|         units  of  clockticks)  most recently delivered by each of the individual
|         injectors; indexed by 'injector number'.

|      -  MINPWT = Minimum allowed pulsewidth for requested fuel; ticks.

|      -  [off_edge_time] = Time of  the  off-edge  of  the  main  fuel  pulsewidth
|         (previously  calculated) for the cylinder that is currently on its intake
|         stroke.

|      -  SYNFLG = Indicates when number one cylinder has been identified  and  the
|         SYNC_CTR  has  been  aligned  with  the  occurrence of PIP for number one
|         cylinder.




                                        7-160

               FUEL STRATEGY, CALCULATE DYNAMIC FUEL CORRECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|      -  SYNC_CTR = Counter that counts occurrences of successive engine cylinders
|         being  at 10-deg BTDC, by incrementing at every PIP rising edge, and then
|         resets when equal to the number of cylinders in the engine.



|     Bit Flags:

|      -  CHANGE_FUELPW = A flag that indicates that  the  desired  pulsewidth  for
|         in-progress  fuel  injections  needs  to  be  modified because the latest
|         calculated fuel pulsewidth value has changed  by  more  than  10%;  1  ->
|         change current pulsewidth.

|      -  STATE_FLAG =  Indicates  the  edge-type  of  the  last  command  for  the
|         indicated  injector  that  was  sent  to the carousel; 1 -> on-edge, 0 ->
|         off-edge.



|     Calibration Constants:

|      -  AIR_DOWN_CAL = A switch that indicates when to perform the  cylinder  air
|         charge  calculation:   0  ->  perform  calculation  on  PIP up-edge; 1 ->
|         perform calculation on PIP down-edge.

|      -  DYN_MIN_ARC = Minimum air charge value below which dynamic makeup fuel is
|         disabled.   This  parameter  should  be used to prevent dynamic fuel upon
|         recoveries from decels.

|      -  ENGCYL = Number of intake strokes per engine revolution.

|      -  FN1327 = A single-row table that maps an injector's 'injector number'  to
|         a   numeric  indicator  of  the  engine  bank  in  which  the  injector's
|         corresponding cylinder is located.  (NOTE:  This numeric indicator is NOT
|         equal  to  the  engine  bank's  'bank number'; a table output of 0 (zero)
|         corresponds to engine bank  1; a table output of 2 corresponds to  engine
|         bank  2.)
|                       X input  =  'injector number'
|                       Y input  =  Null
|                  table output  =  'engine bank indicator'

|      -  FN1329 = A single-row table that  maps  an  injector's  'firing  sequence
|         number'  to  its  'injector  number'.  Arranged in firing sequence number
|         order.
|                       X input  =  'firing sequence number'
|                       Y input  =  Null
|                        Output  =  'injector number'

|      -  PWCAL = Value above which the ratio of the current fuel pulsewidth to the
|         previous main fuel pulsewidth will produce a dynamic fuel correction.



|     Non-calibratable Constants:

|      -  INJ_OFF_DELAY = Minimum injector off time.




                                        7-161

               FUEL STRATEGY, CALCULATE DYNAMIC FUEL CORRECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     OUTPUTS

|     Registers:

|      -  DYNPW = See above.

|      -  [dyn_on_edge] = Time that the dynamic fuel pulse is to begin.

|      -  ENABLE_DYNAM = See above.

|      -  [intcyl_bank_indicator] = A numeric indicator of the engine BANK in which
|         the  CYLinder  currently  on  its INTake stroke is located.  (Note:  This
|         numeric indicator is NOT equal to the  engine  bank's  'bank  number';  a
|         numeric  value of 0 (zero) corresponds to engine bank  1; a numeric value
|         of 2 corresponds to engine bank  2.)

|      -  [int_inj_num] = The 'INJector NUMber' of the injector whose corresponding
|         cylinder  is  currently  on  its  INTake  stroke.  (NOTE:  This temporary
|         register, calculated in this module, is used  in  this  module  and  also
|         input  by other foreground fuel modules.) (Note:  An injector's 'injector
|         number' identifies the  location  in  the  engine  of  its  corresponding
|         cylinder; it is NOT the same as its 'firing sequence number'.)

|      -  [int_seq_num] = The  'firing  SEQuence  NUMber'  of  the  injector  whose
|         corresponding cylinder is currently on its INTake stroke.  Updated when a
|         new air charge is to be calculated.   (NOTE:   This  temporary  register,
|         calculated in this module, is used in this module and also input by other
|         foreground fuel modules.) (Note:  An injector's 'firing sequence  number'
|         is NOT the same as its 'injector number' which identifies the location in
|         the engine of the injector's corresponding cylinder.)

|     Bit Flags:

|      -  CHANGE_FUELPW = See above.

|      -  IMMEDIATE = Indicates if the current output command  should  be  executed
|         immediately; 1 -> execute immediately.

|     Routines Called:

|      -  WILL_PULS_FIT



















                                        7-162

               FUEL STRATEGY, CALCULATE DYNAMIC FUEL CORRECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     PROCESS
|                          STRATEGY MODULE: FUEL_DYN_CALC_COM3


|     BEGIN: fuel_fg_dynamic_calculations

|            ;Called from within the FUEL_FG_PIPEDG_COM strategy module.

|     (Note:  By the time this  routine  is  called,  a  new  pulsewidth  has  been
|     calculated for each engine bank.)



|     First, determine if a dynamic fuel pulse is to be calculated.  If it is  not,
|     then exit this routine.


|     SYNFLG = 0 -----------------------------| ENABLE_DYNAM = ENGCYL * 4
|                                             | ;Then EXIT
|                                             | ;  fuel_fg_dynamic_calculations
|                                             |
|                                             | --- ELSE ---
|     SYNFLG = 1 -----------------------|     |
|                                       |AND -| ENABLE_DYNAM = ENABLE_DYNAM - 1
|     ENABLE_DYNAM <> 0 ----------------|     |  ;(decrement enabling counter)
|                                             | ;Then EXIT
|                                             | ;  fuel_fg_dynamic_calculations
|                                             |
|                                             | --- ELSE ---
|                                             |
|     CYL_AIR_CHG >= DYN_MIN_ARC -------------| Continue on in this routine.
|                                             |
|                                             | --- ELSE ---
|                                             |
|                                             | EXIT fuel_fg_dynamic_calculations




|     Next, identify the firing sequence number of the cylinder that  is  currently
|     on its intake stroke.


|     ENGCYL = 4 ------------------------|
|                                        |AND -| [int_seq_num] = SYNC_CTR - ENGCYL
|     AIR_DOWN_CAL = 0 ------------------|     |
|                                              | --- ELSE ---
|                                              |
|                                              | [int_seq_num] =
|                                              |         {SYNC_CTR - (ENGCYL - 1)}


|     [int_seq_num] <= 0 ----------------------| [int_seq_num] =
|                                              |    {[int_seq_num] + (ENGCYL * 2)}






                                        7-163

               FUEL STRATEGY, CALCULATE DYNAMIC FUEL CORRECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     Next, identify the injector number of the cylinder that is currently  on  its
|     intake  stroke,  and  then  identify  the engine bank containing the cylinder
|     currently on its intake stroke.

|     unconditionally -------------------------| [int_inj_num] =
|                                              |          FN1329([int_seq_num],0)
|                                              |
|                                              | [intcyl_bank_indicator] =
|                                              |          FN1327([int_inj_num],0)



|     Then, obtain the latest  pulsewidth  calculated  for  the  engine  bank  that
|     contains the cylinder currently on its intake stroke.


|     [intcyl_bank_indicator] = 0 ------------| [t_current_pw] = FUELPW1
|                                             |
|                                             | --- ELSE ---
|                                             |
|                                             | [t_current_pw] = FUELPW2




|     The dynamic fuel correction is calculated for the cylinder that is  currently
|     on the intake stroke of its cycle.

|     Determine if there is a need for the dynamic pulse:


|     [ratio_puls_width] = [t_current_pw] / LST_PW([int_inj_num])


|     [delta_puls_width] = [t_current_pw] - LST_PW([int_inj_num])


|     [ratio_puls_width] > PWCAL --------|
|                                        |
|     [delta_puls_width] > 0 ------------|AND -| DYNPW = [delta_puls_width]
|                                        |     | CHANGE_FUELPW = 0
|     [delta_puls_width] > MINPWT -------|     |  (need normal dynamic pulse)
|                                              |
|                                              | --- ELSE ---
|     [ratio_puls_width] > PWCAL --------|     |
|                                        |AND -| DYNPW = MINPWT
|     [delta_puls_width] > 0 ------------|     | CHANGE_FUELPW = 0
|                                              |  (need minimum dyn PULSE)
|                                              |
|                                              | --- ELSE ---
|                                              |
|                                              | DYNPW = 0
|                                              |  (no pulse needed)







                                        7-164

               FUEL STRATEGY, CALCULATE DYNAMIC FUEL CORRECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|     Determine if the dynamic pulse can be output immediately or whether  it  must
|     wait  for  the  main  fuel pulse to complete.  If the main fuel pulse has not
|     completed, then determine if the off-edge is in the queue or the carousel and
|     schedule the dynamic pulse on-edge appropriately.


|     DYNPW > 0 -------------------------|
|                                        |
|     STATE_FLAG = 0 --------------------|
|      (last command in carousel was     |AND -| IMMEDIATE to 1
|       off-edge for this injector)      |     |  (send out dyn pulse now)
|                                        |     | [dyn_on_edge] = [current_time]
|     [off_edge_time] < [current_time] --|     | Call WILL_PULS_FIT
|                                              |
|                                              | --- ELSE ---
|     DYNPW > 0 -------------------------|     |
|                                        |AND -| [dyn_on_edge] = [off_edge_time]
|     STATE_FLAG = 0 --------------------|     | Call WILL_PULS_FIT
|                                              |
|                                              | --- ELSE ---
|     DYNPW > 0 -------------------------|     |
|                                        |     |
|     STATE_FLAG = 1 --------------------|     |
|      (last command in carousel was     |AND -| [dyn_on_edge] =
|       on-edge for this injector)       |     |    [off_edge_time] + INJ_OFF_DELAY
|                                        |     | Call WILL_PULS_FIT
|     CHANGE_FUELPW = 0 -----------------|     |
|                                              | --- ELSE ---
|                                              |
|                                              | Exit this routine



|     END: fuel_fg_dynamic_calculations


























                                        7-165

                FUEL STRATEGY, FUEL PULSEWIDTH, WILL PULS FIT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                                     WILL PULS FIT


|     OVERVIEW

|     This routine uses the current dynamic fuel pulsewidth  value,  together  with
|     the time of its on-edge, to calculate the desired time of its off-edge.  This
|     routine then determines if the dynamic fuel pulse will be able to fit between
|     the  time  of  its  on-edge  and  the time that the cylinder currently on its
|     intake stroke will stop inducting charge.  If the entire pulse will not  fit,
|     then  the  routine  will determine if the minimum allowed pulse will fit.  If
|     the minimum pulse will NOT fit, then no dynamic pulse will be output;  if the
|     minimum  pulse  WILL fit, then the time of the off-edge for the maximum pulse
|     that will fit is determined.

|     If a (non-zero) pulse is to be output, then this routine:  (1) schedules  the
|     pulse's  on-edge,  and  then  (2)  CALLs  a  routine  which will schedule the
|     off-edge.


|     Note:  Parameters whose alphabetic characters  are  in  the  lower  case  are
|     non-displayable temporary registers.



      DEFINITIONS


      INPUTS

      Registers:

|      -  [off_edge_time] = Time of the off-edge for the main fuel  pulsewidth  for
|         the cylinder that is currently on its intake stroke.

|      -  [dyn_on_edge] = Time that the injector is to  turn  on  for  the  current
|         dynamic fuel pulse.

|      -  DT12S = Time period between the latest two PIP  low-to-high  transitions;
|         ticks.

|      -  DYNPW = PulseWidth of the DYNamic fuel pulse, ticks.

|      -  LAST_HI_PIP = Time of the latest PIP low-to-high transition.

|      -  MINPWT = MINimum allowed fuel PulseWidth, in Ticks.

|      -  PWOFF = Injector PulseWidth OFFset, ticks.


      Calibration Constants:

|      -  CALCLP = Percent of a PIP period, from the PIP up-edge at the start of an
|         intake  stroke  to  the point when fuel will no longer be inducted on the
|         current intake event.





                                        7-166

                FUEL STRATEGY, FUEL PULSEWIDTH, WILL PULS FIT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|      



|     OUTPUTS

      Registers:

|      -  [dyn_min_tim] = Time that the injector would turn off if  delivering  the
|         minimum allowed fuel pulsewidth.

|      -  [dyn_off_tim] = Time that the injector will turn  off  the  dynamic  fuel
|         pulse.

|      -  [dyn_tim_limit] = Calculated time when no additional fuel can be inducted
|         by the cylinder that is currently on its intake stroke.

|      -  DYNPW = see above.



|     ROUTINES CALLED:

|      -  DYNAMIC_FUEL_OFF




































                                        7-167

                FUEL STRATEGY, FUEL PULSEWIDTH, WILL PULS FIT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
|                          STRATEGY MODULE: FUEL_DYN_FIT_COM1

|     BEGIN: WILL_PULS_FIT     (Called from the Dynamic Fuel Correction routine)


|                              (Note: This routine assumes that MINPWT <= DYNPW
|                                     and that [off_edge_time] <= [dyn_on_edge].)
|                              (Ref.: See the graph on the following page.)



|     Unconditionally ---------------------| [dyn_tim_limit] =
|                                          |    LAST_HI_PIP + (DT12S * CALCLP)
|                                          |
|                                          | [dyn_off_tim] = [dyn_on_edge] +
|                                          |                  DYNPW + PWOFF
|                                          | [dyn_min_tim] = [dyn_on_edge] +
|                                          |                  MINPWT + PWOFF



|     [dyn_off_tim] <= [dyn_tim_limit] ----| (dynamic fuel pulse will fit;
|                                          | (maintain current desired values
|        (case I)                          |  of DYNPW and [dyn_off_tim].)
|                                          | SCHEDULE dynamic fuel on-edge
|                                          |  to occur at [dyn_on_edge].
|                                          | Call DYNAMIC_FUEL_OFF
|                                          |
|                                          | --- ELSE ---
|                                          |
|     [dyn_min_tim] <= [dyn_tim_limit] ----| (normal dynamic pulse won't fit,
|                                          |  but the minimum pulse WILL fit;
|        (case II)                         |  determine max allowed pulse.)
|                                          | [dyn_off_tim] = [dyn_tim_limit]
|                                          | DYNPW = ([dyn_off_tim] -
|                                          |                   [dyn_on_edge])
|                                          | SCHEDULE dynamic fuel on-edge
|                                          |  to occur at [dyn_on_edge].
|                                          | Call DYNAMIC_FUEL_OFF
|                                          |
|                                          | --- ELSE ---
|        (case III)                        |
|                                          | (the minimum allowed pulse
|                                          |  will not fit.)
|                                          | DYNPW = 0
|                                          | (cancel dynamic fuel pulse.)
|                                          | Exit dynamic fuel routine

|     END: WILL_PULS_FIT










                                        7-168

                FUEL STRATEGY, FUEL PULSEWIDTH, WILL PULS FIT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|         Re:                            The WILL_PULS_FIT routine.

|                                        The graph shown below illustrates the
|     three mutually exclusive
|                                        cases defined by the conditions specified
|     in the routine.

|                                        The assumptions shown below derive from
|     the routine's assumption
|                                        that  MINPWT <= DYNPW  and that
|     [off_edge_time] <= [dyn_on_edge],
|                                        together with the equations defining
|     [dyn_min_tim] and
|                                        [dyn_off_tim] in the above routine.



|     Assumptions:  [dyn_on_edge] < [dyn_min_tim]   <=  [dyn_off_tim]
|                         V               V                   V

|               ----------|---------------|-------------------|--------------->time

|                          {dyn_tim_limit}   {dyn_tim_limit}    {dyn_tim_limit}

|     Cases:                   (III)              (II)               (I)



|     Case I:   [dyn_on_edge] <  [dyn_min_tim] <= [dyn_off_tim] <= {dyn_tim_limit}

|     Case II:  [dyn_on_edge] <  [dyn_min_tim] <= {dyn_tim_limit} < [dyn_off_tim]

|     Case III: [dyn_on_edge] <= {dyn_tim_limit} < [dyn_min_tim] <= [dyn_off_tim]



























                                        7-169

           FUEL CONTROL STRATEGY, FUEL PULSEWIDTH, DYNAMIC FUEL OFF - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


|                                   DYNAMIC FUEL OFF

      OVERVIEW

|     This routine is called after:  (1) a  dynamic  fuel  pulse  on-edge  for  the
|     injector  whose  corresponding cylinder is currently on its intake stroke has
|     been scheduled, AND (2) the fuel pulse's off-edge has been calculated.   This
|     routine schedules the fuel pulse off-edge for the injector.

|     NOTE:  Parameters whose alphabetic characters  are  in  the  lower  case  are
|     non-displayable temporary registers.



      DEFINITIONS

      INPUTS

      Registers:

|      -  AHISL_TICK  =  Temperature  compensated  high  slope  for  a  dual  slope
|         characterization of injector flow, lbm/tick.

|      -  ALOSL_TICK  =  Temperature  compensated  low  slope  for  a  dual   slope
|         characterization of injector flow, lbm/tick.

|      -  BKPT_PW = Dual slope breakpoint in lbm divided by temperature compensated
|         low slope (lbm/tick), ticks.

|      -  DYNPW = Dynamic fuel correction pulsewidth, ticks.

|      -  [dyn_off_tim] = The desired time that the dynamic fuel pulse is  to  end;
|         i.e., the time at which the injector is to turn-off.

|      -  FB_DIFF = Difference between FUEL_BKPT divided by temperature compensated
|         high  slope  and  FUEL_BKPT divided by temperature compensated low slope,
|         ticks.

|      -  FUEL_SUM = An accumulator which stores the total amount of  fuel  output,
|         lbm.

|      -  PWOFF = Injector pulsewidth offset, ticks.

      Calibration Constants:

|      -  FUEL_BKPT = The amount of fuel flow when transfer is made  from  the  low
|         slope to the high slope, lbm/injection.













                                        7-170

           FUEL CONTROL STRATEGY, FUEL PULSEWIDTH, DYNAMIC FUEL OFF - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

|      -  FUEL_SUM = See above.

|      -  [dyn_off_tim] = The desired time that the dynamic fuel pulse is  to  end,
|         i.e., the time at which the injector is to turn-off.

|      -  [inj_dyn] = Fuel mass delivered by the dynamic fuel pulse, lbm.



      PROCESS
|                          STRATEGY MODULE: FUEL_DYN_OFF_COM1

|        (called when the dynamic fuel on-edge is placed in the output carousel)


|     BEGIN:  DYNAMIC_FUEL_OFF

|     always ----------------------------| Schedule the dynamic fuel off-edge
|                                        | to occur at time [dyn_off_tim]
|                                        | (calculated elsewhere).


|     Determine the mass  of  fuel  that  has  been  injected  and  update  certain
|     registers.   (FUEL_SUM  maintains  the  total  fuel  injected,  for  the  DOL
|     calculation.)


|     DYNPW < BKPT_PW -------------|
|                                  |AND -| [inj_dyn] = DYNPW * ALOSL_TICK
|     DYNPW > 0 -------------------|     |
                                         | --- ELSE ---
                                         |
|     DYNPW > 0 -------------------------| [inj_dyn] = (DYNPW + FB_DIFF)
|                                        |   * AHISL_TICK


|     always ----------------------------| FUEL_SUM = FUEL_SUM + [inj_dyn]

|     END: DYNAMIC_FUEL_OFF

















                                        7-171

          FUEL STRATEGY, SPEED LIMITER SELFTEST CODE SETTING - OBDII - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       SPEED LIMITER SELFTEST CODE SETTING - OBDII


      OVERVIEW

      To assist service diagnosis of reported misfire a continuous self  test  code
      is set when the fuel cut off speed limiter is invoked.



      DEFINITIONS

      INPUTS

      Bit Flags:

       -  FUEL_CUT = Fuel cutout active.  Set in  foreground  for  continuous  self
          test.



      OUTPUTS

      Bit Flags:

       -  FUEL_CUT = See above.



      PROCESS
                         STRATEGY MODULE: FUEL_RPM_LIM_OBD1_COM1


      FUEL_CUT = 1 ---------------------------| error_detected = 1
                                              | call fault filter 461
                                              | FUEL_CUT = 0
                                              | 
                                              | --- ELSE ---
                                              |
                                              | Call fault filter 461
                                              |  (Error 461 not detected)



















                                        7-172












                                      CHAPTER 8

                               IGNITION TIMING STRATEGY

















































                                         8-1

                      IGNITION TIMING STRATEGY, OVERVIEW - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   OVERVIEW

   The relationships of the calculations are shown below via variable  usage.   The
   entries in the boxes are headings of sections in the strategy.

                           STRATEGY MODULE: SPARK_OVER_COM1

   +------------+              +----------------+              
   | BORDERLINE |              | BASE EMISSIONS |              +---------------+
   |   SPARK    |<-SPK_LAMBSE--|       AND      |--SPK_LAMBSE->| MAXIMUM BRAKE |
   | DETONATION |              |  DRIVE SPARK   |              | TORQUE SPARK  |
   +------------+              +----------------+              +---------------+
         |                              |                              |       |
      SPK_BDL                        SPK_BASE                      SPK_M_B_T   |
         |                              |                              |       |
         +--------------+     +---------+                              |       |
                        |     |                                        |       |
                        |     |    +----------------------+            |       |
                        |     |    |  SPARK FOR LOW LOAD  |      SPK_MBT_LAST  |
                        |     |    | OPERATING CONDITIONS |            |       |
                        |     |    +----------------------+            |       |
                        |     |       |                                |       |
                        |     |       |                                V       |
                        |     |       |             +-------------------+      |
                        |     |   SPK_LOW_LOAD      | TORQUE TRUNCATION |      | 
                        |     |       |             | VIA SPARK RETARD  |      |
                        |     |       |             +-------------------+      |
   +-------------+      |     |       |                  |      |              |
   | OSCILLATION |      |     |       |      +-----------+      |              |
   | MODULATION  |      |     |       |      |                  |              |
   +-------------+      |     |       |  SPK_TRUNC              |              |
      |       |         |     |       |      |                  |              |
      |   SPK_OSC_OFF   V     V       V      V                  |              |
      |       |      +---------------------------+              |              |
      |       +----->| SELECT LOWEST SPARK VALUE |         LAST_LD_MBT         |
      |              +---------------------------+              |              |
      |                     |                                   |              |
      |                SPK_ABS_LIM                              |              |
      |                SPK_FLEX_LIM                             V              |
      |                     |                   +-----------------------+      |
      |                     +------------------>| TORQUE BASED FEEDBACK |      |
      |                     |                   |     SPARK AT IDLE     |      |
   SPK_OSCMOD               |                   +-----------------------+      |
      |                     |                               |                  |
      |                     |                          SPK_IDLE_FB             |
      |                     |                           SPK_STATE              |
      |                     V                               |                  |
      |             +-------------------------+<------------+                  |
      +------------>| FINAL SPARK CALCULATION |                                |
                    +-------------------------+                                |
                                 |                                             |
                                SAF                                            |
                                 |                                             |
                                 V                                             |
                         +----------------+                                    |
                         | spark delivery |                          TR_SPK_DELTA
                         +----------------+                                    |
                                 |                                             |
                         spout transition                                      V

                                         8-2

              IGNITION TIMING STRATEGY, FINAL SPARK CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 FINAL SPARK CALCULATION


      OVERVIEW

      This is the final background spark calculation.  It  determines  whether  the
      feedback  spark  calculation  should  be  used  and adds the oscillation mode
      modifier.  In no case is spark allowed to exceed  the  absolute  spark  limit
      (SPK_ABS_LIM).

      This module also determines whether spark is to be output in echo  pip  mode.
      Under  high  load,  low  engine speed conditions, such as when cranking or in
      underspeed, engine rpm changes dramatically.  As a result the delivered spark
      could  be significantly in error due to position prediction errors by the EEC
      computer.  As a solution to this condition, the strategy will  recognize  the
      potential  for the condition and force the spark and dwell output to occur at
      the PIP edges, since these are physical position parameters.  This is  called
      echo pip.



      DEFINITIONS

      INPUTS

      Registers:

       -  LOAD = Universal load variable.  Normalized CYLARC_BG divided by  SARCHG,
          unitless.

       -  N_BYTE = Engine speed with the range of  values  of  0  to  4080  with  a
          resolution of 16 RPM.

       -  SPK_ABS_LIM = Spark is never allowed to go above this  value  because  of
          detonation, torque limitation or base spark requirements.

       -  SPK_FLEX_LIM = This is a desirable spark  limit  which  may  be  exceeded
          briefly  when  torque is required by a strategy such as feedback spark or
          oscmod.

       -  SPK_IDLE_FB = Spark by Feedback Spark logic.

       -  SPK_OSCMOD = OSCMOD correction to other spark calculations.

       -  SPK_STATE = Defines the use of feedback spark, 0 -> feedback spark is not
          being  used,  1  ->  transitioning  into  feedback  spark, 2 -> using the
          feedback spark calculation, 3 -> transitioning out of feedback spark.

       -  SPLCLP = Rotor registry lower clip, degrees BTDC.

       -  SPUCLP = Rotor registry upper clip, degrees BTDC.









                                         8-3

              IGNITION TIMING STRATEGY, FINAL SPARK CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Bit Flags:

       -  CL_THRTL = Indicates that the throttle is closed; 1 -> closed throttle,  
          0 -> part throttle or wide open throttle.

       -  ECHO_PIP = Indicates that the SPOUT output should echo the PIP input; 
          1 -> SPOUT follows PIP.

       -  NO_START = In Key On Engine Off VIP test when set.

       -  RUNNING = Flag which indicates that idle speed  is  being  controlled  by
          Engine  Running  VIP;  1  ->  in  Engine  Running VIP, 0 -> not in Engine
          Running VIP.

       -  SA10_LOD_FLG = Indicates that load exceeds desired value for echoing  PIP
          as SPOUT.

       -  SA10_RPM_FLG = Indicates the engine speed  is  below  desired  value  for
          echoing PIP as SPOUT.

       -  UNDSP = Underspeed Flag; 1 -> Underspeed or Crank Mode, 0 -> Run mode.

       -  V_MODE_SETUP = VIP throttle Adjust Mode enable flag; 1 -> enable.

      Calibration Constants:

       -  SA10_LOD_CLR = Load value  below  which  echo  PIP  mode  should  not  be
          required by spark.

       -  SA10_LOD_SET = Load value above which echo PIP mode may be required.

       -  SA10_RPM_CLR = Engine speed value above which echo PIP mode should not be
          required by spark.

       -  SA10_RPM_SET = Engine speed value  below  which  echo  PIP  mode  may  be
          required.

       -  SPK_ADD  =  Calibration  adder  to  over-all  spark  equation.   Used  to
          explicitly specify spark advance when SPK_MUL is calibrated to zero, deg.

       -  SPK_MUL = Calibration multiplier to over-all spark equation.   Typically,
          SPK_MUL  is  set  to  zero  and  then SPK_ADD explicitly determines spark
          advance, deg.

















                                         8-4

              IGNITION TIMING STRATEGY, FINAL SPARK CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  SAF = Spark Advance Final, deg.

       -  SPK_SOURCE = Identifies the source calculation for the final spark value.
                       0 -> Underspeed or Crank, spark fires on PIP.
                       1 -> Base spark calculation.
                       2 -> Borderline spark calculation.
                       3 -> Tip-in retard torque truncation.
                       4 -> Low gear torque truncation.
                       5 -> Vehicle speed limiter torque truncation.
                       6 -> Stabilized low load operation.
                       7 -> Cold engine low load operation.
                       8 -> Idle feed back spark at minimum clip.
                       9 -> Idle feed back spark normal calculation.
                       10 -> Spark supplied by VIP.
                       11 -> Base spark calculation plus oscillation 
                             modulation.
                       12 -> Borderline spark calculation plus oscillation
                             modulation.
                       13 -> Tip-in retard torque truncation plus oscillation
                             modulation.
                       14 -> Low gear torque truncation plus oscillation
                             modulation.
                       15 -> Vehicle speed limiter torque truncation plus
                             oscillation modulation.

      Bit Flags:

       -  ECHO_PIP = Indicates that the SPOUT output should echo the PIP  input;  1
          -> SPOUT follows PIP.

       -  ECHO_TRANS =  Indicates  when  transition  from  spark  output  has  been
          completed; 0 -> transition complete.

       -  SA10FG = Flag requesting that spark and dwell  occur  at  PIP  transition
          when equal to one.

       -  SA10_LOD_FLG = Indicates that load exceeds desired value for echoing  PIP
          as SPOUT.

       -  SA10_RPM_FLG = Indicates the engine speed  is  below  desired  value  for
          echoing PIP as SPOUT.















                                         8-5

              IGNITION TIMING STRATEGY, FINAL SPARK CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: SPARK_FINAL_CALC_COM1


      Spark advance final is the  value  of  spark  calculated  by  the  background
      strategy.  This value is further modified by the foreground.  Alternately SAF
      will be in echo pip mode where spark is output on PIP edges.

                                                 | (Spark not calculated because
                                                 | the engine is not running)
      NO_START = 1 ------------------------------| No change to ECHO_PIP
       (Key on engine off VIP)                   | No change to ECHO_TRANS
                                                 | No change to SAF
                                                 | No change to SPK_SOURCE
                                                 |
                                                 | --- ELSE ---
                                                 |
      RUNNING = 1 -------------------------|     | (Spark determined by VIP)
                                           |AND -| No change to ECHO_PIP
      V_MODE_SETUP = 0 --------------------|     | No change to ECHO_TRANS
                                                 | SAF is determined by VIP
                                                 | SPK_SOURCE = 10
                                                 |
                                                 | --- ELSE ---
      UNDSP = 0 ---------------------------|     |
       (Run mode)                          |     | 
                                           |     | (Transition out of echo PIP)
      SA10FG = 0 --------------------------|AND -| ECHO_PIP = 0
       (Special conditions not present)    |     | ECHO_TRANS = 1
                                           |     | SAF = saf_fin 
      ECHO_PIP = 1 ------------------------|     | SPK_SOURCE = spk_source_fin
       (In echo pip mode)                        |
                                                 | --- ELSE ---
                                                 |
      UNDSP = 0 ---------------------------|     | (Normal spark)
                                           |AND -| No change to ECHO_PIP
      SA10FG = 0 --------------------------|     | No change to ECHO_TRANS
                                                 | SAF = saf_fin
                                                 | SPK_SOURCE = spk_source_fin
                                                 |
                                                 | --- ELSE ---
                                                 |
                                                 | (Transition into echo PIP)
      ECHO_PIP = 0 ------------------------------| ECHO_PIP = 1
       (Not in echo pip mode)                    | ECHO_TRANS = 1
                                                 | SAF = 10
                                                 | SPK_SOURCE = 0
                                                 |
                                                 | --- ELSE ---
                                                 |
                                                 | No change to ECHO_PIP
                                                 | No change to ECHO_TRANS
                                                 | SAF = 10 
                                                 | SPK_SOURCE = 0 






                                         8-6

              IGNITION TIMING STRATEGY, FINAL SPARK CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Clip the value of SAF  (spark  advance  final)  so  that  it  doesn't  exceed
      SPK_ABS_LIM.

      SPK_ABS_LIM <= saf -----| saf_fin = SPK_ABS_LIM * SPK_MUL + SPK_ADD
                              | spk_source_fin = spk_source_abs
                              |
                              | --- ELSE ---
                              |
                              | saf_fin = saf * SPK_MUL + SPK_ADD
                              | spk_source_fin = spk_source_saf


      Determine if Feed Back Spark calculation is being used.

      SPK_STATE = 0 ----------| saf =  SPK_FLEX_LIM + SPK_OSCMOD
       (Not in Feed           | spk_source_saf = spk_source_flex
        Back Spark)           |
                              | --- ELSE ---
                              |
                              | saf = SPK_IDLE_FB + SPK_OSCMOD
                              | spk_source_saf = spk_source_fb


      CL_THRTL = 0 --------------------------------|
       (Not at closed throttle)                    |
                                                   |
      SA10_RPM_FLG = 1 ----------------------------|AND -| SA10FG = 1
        (Low engine speed)                         |     |
                                                   |     | 
      SA10_LOD_FLG = 1 ----------------------------|     |
        (High load)                                      | 
                                                         | --- ELSE --- 
                                                         | 
                                                         | SA10FG = 0 


      N_BYTE < SA10_RPM_SET --------|S  Q ---------------| SA10_RPM_FLG
       (Low engine speed)           |
                                    |
      N_BYTE >= SA10_RPM_CLR -------|C
       (High load)


      LOAD >= SA10_LOD_SET ---------|S  Q ---------------| SA10_LOD_FLG
       (High load)                  |
                                    |
      LOAD < SA10_LOD_CLR ----------|C













                                         8-7

             IGNITION TIMING STRATEGY, SELECT LOWEST SPARK VALUE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                SELECT LOWEST SPARK VALUE


      OVERVIEW

      Select the most retarded value of  spark  from  the  base  spark,  borderline
      detonation limit, torque truncation and cold start spark calculations.



      DEFINITIONS

      INPUTS

      Registers:

       -  CYL_AIR_CHG = Current cylinder air charge.

       -  LOAD = Universal LOAD as ratio of air charge over standard.

       -  NEW_RPM  =  Flag  indicating  new  PIP  information  is   available   for
          calculation of RPM.

       -  SPK_BASE = Desired spark advance for optimal emissions and  driveability,
          deg.

       -  SPK_BDL = Borderline detonation spark limit, deg.

       -  SPK_LOW_LOAD = Idle emissions spark ceiling.  Lowest of Cold Start  Spark
          and Inspection Maintenance requirements.

       -  SPK_OSC_OFF = The amount by which the base spark calculation  is  reduced
          to make room for an increase as calculated by the OSCMOD strategy.

       -  SPK_TRUNC = Spark ceiling when engine torque needs to be limited.

      Calibration Constants:

       -  SARCHG  =  Air  charge  mass  of   cylinder   volume   at   standard   BP
          (4.4256*(10**-5)) * (single cylinder displacement (cu.in.)).

       -  TCNDT_SPK = Time constant for DNDT_SPK.



      OUTPUTS

      Registers:

       -  SPK_ABS_LIM = Spark is never allowed to go above this  value  because  of
          detonation, torque limitation or base spark requirements.

       -  SPK_AIR_CHG = Cylinder air charge used to calculate load for use in spark
          calculations.   SPK_FLEX_LIM  = This is a desirable spark limit which may
          be exceeded briefly when  torque  is  required  by  a  strategy  such  as
          feedback spark or oscmod.




                                         8-8

             IGNITION TIMING STRATEGY, SELECT LOWEST SPARK VALUE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: SPARK_LOWEST_COM5


      Calculate DNDT_SPK and LOAD at the start of the  spark  strategy.   Save  the
      value of load used in the spark calculation.


      NEW_RPM = 1 ----------------------------| DNDT_SPK = ROLAV (dndti,TCNDT_SPK)

                                SPK_AIR_CHG = CYL_AIR_CHG

                               LOAD = CYL_AIR_CHG / SARCHG

      Calculate the flexible spark limit, SPK_FLEX_LIM,  by  determining  the  more
      retarded  of the sum of SPK_ABS_LIM plus the oscmod offset, and SPK_LOW_LOAD.
      This value of spark  may  be  exceeded  by  the  oscillation  modulation  and
      feedback spark calculations.

      Select lowest:

      abs_plus_off > SPK_LOW_LOAD ------------| SPK_FLEX_LIM = SPK_LOW_LOAD
                                              | spk_source_flex = spk_source_low
                                              |
                                              | --- ELSE ---
                                              |
                                              | SPK_FLEX_LIM = abs_plus_off
                                              | spk_source_flex = 10 + 
                                              |                   spk_source_abs


                        abs_plus_off = SPK_ABS_LIM + SPK_OSC_OFF


      Calculate the absolute spark limit,  SPK_ABS_LIM,  by  determining  the  most
      retarded  of  borderline,  torque  truncation  and base spark.  This value of
      spark can never be exceeded.

      Select lowest:

      intermed_lim > SPK_BASE ----------------| SPK_ABS_LIM = SPK_BASE
                                              | spk_source_abs = 1
                                              |
                                              | --- ELSE ---
                                              |
                                              | SPK_ABS_LIM = intermed_lim
                                              | spk_source_abs = spk_source_int













                                         8-9

             IGNITION TIMING STRATEGY, SELECT LOWEST SPARK VALUE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calculate the intermediate spark limit which is needed by the absolute  spark
      limit  calculation,  by  determining  the most retarded of the borderline and
      torque truncation values.

      Select lowest:

      SPK_BDL > SPK_TRUNC --------------------| intermed_lim = SPK_TRUNC
                                              | spk_source_int = spk_source_trunc
                                              |
                                              | --- ELSE ---
                                              |
                                              | intermed_lim = SPK_BDL
                                              | spk_source_int = 2















































                                         8-10

           IGNITION TIMING STRATEGY, BASE EMISSIONS AND DRIVE SPARK - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             BASE EMISSIONS AND DRIVE SPARK


      OVERVIEW

      The base  spark  strategy  is  essentially  MBT  spark  modified  to  achieve
      functional requirements for emissions and drive quality.



      DEFINITIONS

      INPUTS

      Registers:

       -  BP = Barometric Pressure, " Hg.

       -  ECT = Engine coolant temperature, deg F.

       -  EGRACT = Actual EGR percent = 100 * EM / AMPEM.

       -  LAMBSE1 = Desired equivalence ratio for EGO-1 injectors.

       -  LOAD = Universal load variable.  Normalized CYLARC_BG divided by  SARCHG,
          unitless.

       -  N = Engine RPM.

      Calibration Constants:

       -  FN013 = Normalized LOAD for half-sized spark tables.

       -  FN015 = Normalized LAMBSE for spark calculation.

       -  FN017 = Normalized rpm for half-sized spark tables.

       -  FN711(LOAD) = The increase in spark for each percent of  EGR,  deg  /  _%
          EGR.

       -  FN712(BP) = Proportions the contribution from the base sea level and base
          altitude spark tables as a function of altitude, unitless.

       -  FN2100 = Base spark table at sea level.  The values in this table  should
          be  used  at  all  altitudes  unless  there are specific altitude related
          emissions reasons, deg.
                   X = FN016(N)
                   Y = FN012(LOAD)

       -  FN2110 = Base spark table at altitude.  These values should be  the  same
          as  the base sea level table unless there are specific altitude emissions
          related reasons to justify a change, deg.
                   X = FN016(N) 
                   Y = FN012(LOAD)

       -  FN2120 = The change in desired spark as  a  function  of  engine  coolant
          temperature, deg.
                   X = FN014(ECT)
                   Y = FN013(LOAD)

                                         8-11

           IGNITION TIMING STRATEGY, BASE EMISSIONS AND DRIVE SPARK - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FN2140 = This table is intended to adjust spark for whatever  calibration
          adjustments which may be necessary.  Examples of such adjustments are are
          retarding spark when lean for improved NOX, adjusting spark when rich due
          to  wide  open  throttle  and  over-advancing  spark  to  reduce catalyst
          temperatures.
                   X = FN017(N)
                   Y = FN015(SPK_LAMBSE)

      Bit Flags:

       -  OLFLG = Open Loop Flag; 1 -> Open Loop conditions met, 0 ->  Closed  Loop
          conditions met.



      OUTPUTS

      Registers:

       -  SPK_BASE = Desired spark advance for optimal emissions and driveability.

       -  SPK_LAMBSE = Value of LAMBSE to be used in spark calculations, unitless.






































                                         8-12

           IGNITION TIMING STRATEGY, BASE EMISSIONS AND DRIVE SPARK - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: SPARK_BASE_COM1


      SPK_BASE = FN2100(N,LOAD) * FN712(BP)
               + FN2110(N,LOAD) * (1 - FN712(BP))
               + FN2120(ECT,LOAD)
               + FN711(LOAD) * EGRACT
               + FN2140(N,SPK_LAMBSE)
               + [spk_base_iac]


      SPK_LAMBSE is one when the fuel calculation is closed loop  because  air/fuel
      mixture  will  be  at  stoichiometry  regardless  of the value of LAMBSE.  By
      assuming the SPK_LAMBSE to be one, the spark is not erroneously corrected for
      mixture when closed loop fuel control has controlled to stoichiometry.


      OLFLG = 1 --------------------| SPK_LAMBSE = LAMBSE1
       (open loop fuel control)     |
                                    | --- ELSE ---
                                    |
                                    | SPK_LAMBSE = 1
                                    |  (air fuel mixture is close to 
                                    |   stoichiometry)


      NOTE: [spk_base_iac] is available with Inlet Air Control Strategies;
            zero otherwise.































                                         8-13

            IGNITION TIMING STRATEGY, BORDERLINE DETONATION SPARK - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               BORDERLINE DETONATION SPARK


      OVERVIEW

      This logic calculates the spark advance at which borderline level  detonation
      takes place.

      One part of BORDERLINE_SPK is  the  Transient  Spark  strategy  (also  called
      lugging mode strategy) which attempts to reflect the ability of the engine to
      tolerate higher spark  without  detonation  during  transient  conditions  as
      opposed  to steady state conditions.  One possible explanation is that during
      a tip-in cylinder temperature increases from one  stabilized  temperature  to
      another  higher  temperature and that this change is not reflected adequately
      in ECT.  The result is that the engine can tolerate a greater  spark  advance
      for a few seconds until the cylinder temperature stabilizes at its new level.
      It is also thought that the amount of swirl of the air  charge  may  have  an
      effect.  This strategy provides a means to supply an increase in spark during
      transitions.



      INPUTS

      Registers:

       -  ACT = Air Charge Temperature, deg F.

       -  BP = Barometric Pressure, " Hg.

       -  ECT = Engine coolant temperature, deg F.

       -  EGRACT = Actual EGR percent = 100*EM/AMPEM.

       -  LOAD = Universal load variable.

       -  LUGTMR =  The  time  since  the  engine  transitioned  into  higher  load
          operating conditions.

       -  N = Engine RPM.

       -  OCTADJ = Field Octane Adjust input, unitless;  1  ->  Retard  for  octane
          adjustment is desired, 0 -> No retard is desired.

       -  SPK_LAMBSE = Value of LAMBSE to be used in spark calculations, unitless.

      Calibration Constants:

       -  FN012(LOAD) = Normalized LOAD for full-sized spark tables.

       -  FN013(LOAD) = Normalized LOAD for half-sized spark tables.

       -  FN015(SPK_LAMBSE) = Normalized LAMBSE for spark calculation.

       -  FN016(N) = Normalized RPM for full-sized spark tables.

       -  FN017(N) = Normalized RPM for half-sized spark tables.



                                         8-14

            IGNITION TIMING STRATEGY, BORDERLINE DETONATION SPARK - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FN721(LOAD) = Increase in the detonation limit as a function  of  percent
          EGR, deg / % EGR.

       -  FN722(BP) = The octane level of fuel sold at high altitude  is  typically
          lower than equivalent fuel grades sold as sea level.  This function gives
          the calibrator the option of compensating the spark calculation for  fuel
          quality as a function of altitude.

       -  FN723(LUGTMR) = Transient increase in the detonation limit  following  an
          increase in load, degrees.

       -  FN724A(ECT) = Multiplier which corrects  for  the  non-linear  effect  of
          coolant

       -  FN725A(ACT) = Multiplier which corrects  for  the  non-linear  effect  of
          ambient air temperature on borderline detonation, unitless.

       -  FN2200 = Base borderline detonation table, degrees.
                   X = FN016(N)
                   Y = FN012(LOAD)

       -  FN2220  =  Borderline  detonation  adjustment  for  coolant  temperature,
          degrees spark/degree F.
                   X = FN017(N) 
                   Y = FN013(LOAD)

       -  FN2230 = Borderline detonation adjustment  for  air  charge  temperature,
          degrees spark/degree F.
                   X = FN017(N)
                   Y = FN013(LOAD)

       -  FN2240 = Borderline detonation adjustment for a change in Air/Fuel ratio.
                   X = FN017(N)
                   Y = FN015(SPK_LAMBSE)

       -  FN2250 = Increase in spark values that the engine  can  tolerate  without
          detonation after a load increase but before the engine begins to knock.
                   X = FN017(N)
                   Y = FN013(LOAD)

       -  OCTADJHP = Octane adjust input hardware present switch; 0  ->  no  OCTADJ
          input exists, 1 -> an OCTADJ input is present.

       -  SPK_OA = Field Octane adjust spark adder, degrees.



      OUTPUTS

      Registers:

       -  SPK_BDL = Borderline detonation spark limit, degrees.








                                         8-15

            IGNITION TIMING STRATEGY, BORDERLINE DETONATION SPARK - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: SPARK_BORDERLINE_COM1


      SPK_BDL = FN2200(N,LOAD)
                + FN2250(N,LOAD) * FN723(LUGTMR)
                + FN2240(N,SPK_LAMBSE)
                + FN721(LOAD) * EGRACT
                + FN2220(N,LOAD) * FN724A(ECT) 
                + FN2230(N,LOAD) * FN725A(ACT) 
                + FN722(BP)
                + bl_octane_adjust_add
                + spk_bdl_ffs
                + spk_bdl_iac


      Calculate borderline spark added for the octane adjust service switch.

      OCTADJ = 1 ------------------------|
       (octane adjust input is high)     |AND -| bl_octane_adjust_add = SPK_OA
                                         |     | 
      OCTADJHP = 1 ----------------------|     |
       (octane adjust feature enabled)         |
                                               | --- ELSE ---
                                               |
                                               | bl_octane_adjust_add = 0


      NOTE: spk_bdl_iac is present in Inlet Air Control Strategies otherwise 
            it does not exist.
            spk_bdl_ffs is present in Flexible Fuel Strategies otherwise it
            does not exist.




























                                         8-16

      IGNITION TIMING STRATEGY, SPARK FOR LOW LOAD OPERATING CONDITIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                         SPARK FOR LOW LOAD OPERATING CONDITIONS


      OVERVIEW

      Spark retard is used to increase catalyst temperatures by  forcing  increased
      air  mass  flow.   This approach is used in the Cold Start Low Load Spark and
      Stabilized Low Load Spark strategies.   A  second  application  is  to  limit
      piston slap (cold knock) at colder engine temperatures.

      The Cold Idle Spark logic provides  an  upper  clip  for  spark  during  cold
      starts.   The clip serves to retard the spark below MBT which causes the idle
      speed control to deliver a higher air mass flow through the engine  in  order
      to  maintain  the  desired  rpm.  The higher air mass flow serves to heat the
      catalyst so that it can begin to function sooner.

      During extended idles the air mass flow is low enough that the catalyst cools
      and  becomes  less efficient.  The Stabilized Low Load strategy retards spark
      under stabilized idle conditions to maintain catalyst temperature.



      DEFINITIONS

      INPUTS

      Registers:

       -  AM = Air mass flow, lb/min.

       -  APT = At Part Throttle; -1 -> Closed throttle, 0 -> Part throttle,  1  ->
          Wide Open throttle.

       -  ATMR3 = Time since entering run mode, sec.

       -  ECT = Engine coolant temperature, deg F.

       -  ISCFLG = ISC mode indicator flag;  -1  ->  Dashpot  Mode,  0  ->  Dashpot
          Preposition Mode, 1 -> closed Loop RPM Control Mode, 2 -> Closed Loop RPM
          Control (Lockout entry to RPM control).

       -  LOAD = Universal load variable.  Normalized CYLARC_BG divided by  SARCHG,
          unitless.

       -  N = Engine RPM.

       -  STB_LOLD_TMR  =  Timer  to  control  spark  clip  for  Stable  Low   Load
          conditions, sec.

      Calibration Constants:

       -  CLLS_AT_PT = Enables and disables the cold low load spark  clip  at  part
          throttle, unitless.

       -  FN012(LOAD) = Normalized LOAD for full-sized spark tables.

       -  FN013(LOAD) = Normalized LOAD for half-sized spark tables.



                                         8-17

      IGNITION TIMING STRATEGY, SPARK FOR LOW LOAD OPERATING CONDITIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FN016(N) = Normalized RPM for full-sized spark tables.

       -  FN017(N) = Normalized RPM for half-sized spark tables.

       -  FN018B(ATMR3) = ATMR3 normalizing function.

       -  FN020C(ECT) = Temperature normalizing function for ECT.

       -  FN741(STB_LOLD_TMR) = Ceiling for spark  limiting  for  Stable  Low  Load
          conditions.

       -  FN2000 = Maximum spark allowed during a cold start.  This  spark  depends
          on  the  coolant  temperature which is essentially the temperature at the
          start for the relatively short time during which this table is used.
                   X = FN020C(ECT)
                   Y = FN018B(ATMR3)

       -  FN2001 = Adds spark to the cold idle  clip  when  the  speed  load  point
          results  in an air mass flow which is high enough so that retarding spark
          is not necessary to achieve catalyst light off.  It also allows disabling
          the  clip  when  the load is high enough to indicate that the customer is
          demanding performance.
                   X = FN017(N)
                   Y = FN013(LOAD)

       -  SPUCLP = Rotor registry upper clip, degrees BTDC.

       -  STAB_LOLD_AM = Value of AM below which spark may be  clipped  for  Stable
          Low Load conditions.

      Bit Flags:

       -  DNDSUP = Delayed Neutral/Drive flag; 0 -> neutral, 1 -> drive.



      OUTPUTS

      Registers:

       -  SPK_LOW_LOAD = Emissions spark value at idle.  It is  the  lower  of  the
          Cold Low Load and Stable Low Load calculations.

       -  STB_LOLD_TMR  =  Timer  to  control  spark  clip  for  Stable  Low   Load
          conditions, sec.

      Bit Flags:

       -  SLL_DWN_FLG = Controls STB_LOLD_TMR; 1 -> decrement STB_LOLD_TMR, 0 -> no
          change to STB_LOLD_TMR.

       -  SLL_UP_FLG = Controls STB_LOLD_TMR; 1 -> increment STB_LOLD_TMR, 0 ->  no
          change to STB_LOLD_TMR.







                                         8-18

      IGNITION TIMING STRATEGY, SPARK FOR LOW LOAD OPERATING CONDITIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: SPARK_LOW_LOAD_COM1


      Set SPK_LOW_LOAD to the more retarded of Cold Low Load and  Stable  Low  Load
      spark:

      spk_lo_ld_cold > spk_lo_ld_stab ------| SPK_LOW_LOAD = spk_lo_ld_stab
                                            | spk_source_low = 6
                                            |
                                            | --- ELSE ---
                                            |
                                            | SPK_LOW_LOAD = spk_lo_ld_cold
                                            | spk_source_low = 7


      Cold Idle Spark:

      CLLS_AT_PT = 1 -----------------|
                                      |OR --| spk_lo_ld_cold = FN2000(ECT,ATMR3)
      APT = -1 -----------------------|     |               + FN2001(N,LOAD)
       (closed throttle)                    |
                                            | --- ELSE ---
                                            |
                                            | spk_lo_ld_cold = SPUCLP


      Stabilized Low Load strategy:

      DNDSUP = 0 ---------------------------| spk_lo_ld_stab = FN741(STB_LOLD_TMR)
       (in neutral)                         |
                                            | --- ELSE ---
                                            |
                                            | spk_lo_ld_stab = SPUCLP


      ISCFLG > 0 ---------------------|        
       (RPM control or lockout)       |        
                                      |AND -| Increment STB_LOLD_TMR
      AM <= STAB_LOLD_AM -------------|     | SLL_UP_FLG = 1  
       (Low exhaust flow)                   | SLL_DWN_FLG = 0
                                            |
                                            | --- ELSE ---
      ISCFLG > 0 ---------------------|     |
       (RPM control or lockout)       |     |
                                      |AND -| Decrement STB_LOLD_TMR
      AM > STAB_LOLD_AM --------------|     | SLL_UP_FLG = 0
       (High exhaust flow)                  | SLL_DWN_FLG = 1 
                                            |
                                            | --- ELSE ---
                                            |
                                            | STB_LOLD_TMR = 0
                                            | SLL_UP_FLG = 0
                                            | SLL_DWN_FLG = 0






                                         8-19

         IGNITION TIMING STRATEGY, TORQUE TRUNCATION VIA SPARK RETARD - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           TORQUE TRUNCATION VIA SPARK RETARD


      OVERVIEW

      Torque truncation is the reduction of spark in order  to  reduce  the  torque
      delivered  by  the  engine.   This  approach is used here for three different
      problems:


           1.  Limit  vehicle   speed   because   of   tire   manufacturers   speed
               restrictions.

           2.  Limit  engine  torque  in  because  under  certain  conditions  some
               automatic transmissions are unable to handle maximum engine torque.

           3.  Limit the rate of rise of engine torque  during  tip-ins  to  reduce
               powertrain windup and impact caused by drive train lash.



      DEFINITIONS

      INPUTS

      Registers:

       -  BG_TMR = Background loop time, secs.

       -  DNDT_SPK = Rate of change of  engine  RPM  for  use  in  tip  in  retard,
          RPM/S*S.  This parameter is calculated at the start of the spark routine,
          which means a recent value of DNDT is used.

       -  DNDT_LST = Last pass value for DNDT_SPK, RPM/S*S.

       -  LOAD = Universal load variable.  Normalized CYLARC_BG divided by  SARCHG,
          unitless.

       -  N = Engine RPM.

       -  NOVS = Ratio of engine speed to vehicle speed used to infer  transmission
          gear, rpm/mph.

       -  SAF = Spark Advance Final, deg.

       -  SPK_M_B_T = Spark advance required to achieve Maximum Brake Torque.

       -  SPK_MBT_LAST = Last pass value of SPK_M_B_T, degrees.

       -  TIP_ALLOW_LD = Allowed load limit with spark assumed to be  at  MBT,  for
          tip in spark retard, unitless.

       -  TIP_LAST_LOAD = Last background loop load value, unitless.

       -  TR_TQ_LIMIT = Torque ratio required to achieve TQ_LIMIT.

       -  VSBAR = Filtered vehicle speed.



                                         8-20

         IGNITION TIMING STRATEGY, TORQUE TRUNCATION VIA SPARK RETARD - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Bit Flags:

       -  FLG_TQ_TRUN = Torque truncation flag; 1 -> torque truncation required.

       -  HSPFLG = High speed mode flag; 1 -> high speed alternate fuel/spark.

      Calibration Constants:

       -  SPK_DNDT_C = DNDT hysterysis to restore tip-in retard, RPM/S*S.

       -  SPK_TIP_NOVS = NOVS below which tip-in retard is disabled, RPM/MPH.

       -  SPK_LDRATE = Allowable rate of  increase  in  LOAD  to  determine  tip-in
          retard spark advance, LOAD/SEC.

       -  FN013(LOAD) = Normalized LOAD for half-sized spark tables.

       -  FN017(N) = Normalized RPM for half-sized spark tables.

       -  FN743(VSBAR) = Offset from SPK_M_B_T which determines  maximum  allowable
          spark  when  it  is  desired  to limit vehicle speed through spark.  This
          function contains negative numbers indicating retard from SPK_M_B_T.

       -  FN766 = Transfer function which calculates the torque ratio at  which  an
          engine is operating from the spark delta from MBT.

       -  FN799(TIP_TR or TR_TQ_LIMIT) = Transfer function which  returns  a  spark
          retard from MBT as a function of desired torque ratio, degrees.

       -  SPUCLP = Rotor registry upper clip, degrees BTDC.

       -  TIP_MIN_SPK = Spark calculated using the tip in spark retard strategy  is
          not allowed below this calibration parameter, degrees.

       -  TIP_TR_TRIG = Torque ratio above which tip in spark retard  is  disabled.
          This is a fraction just less than 1, unitless.
























                                         8-21

         IGNITION TIMING STRATEGY, TORQUE TRUNCATION VIA SPARK RETARD - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  LAST_LD_MBT = Load from the last pass corrected to the value  load  would
          have  to have if spark was at MBT in order for the engine to generate the
          same torque output.

       -  SPK_TRUNC = Highest allowed value of spark for torque truncation reasons.

       -  TIP_ALLOW_LD = Allowed load limit with spark assumed to be  at  MBT,  for
          tip in spark retard, unitless.

       -  TIP_DELTA = Incremental increase load  (corrected  to  MBT)  allowed  for
          current background loop, unitless.

       -  DNDT_LST = Last pass value of DNDT_SPK, RPM/S*S.

       -  TIP_LAST_LD = Last background loop load value, unitless.

       -  TIP_TR = Calculated torque ratio allowed  for  current  background  loop,
          unitless.






































                                         8-22

         IGNITION TIMING STRATEGY, TORQUE TRUNCATION VIA SPARK RETARD - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: SPARK_TRQ_TRNC_COM1


      Calculate the torque truncation spark, SPK_TRUNC, as the lowest value of  the
      sources  of torque truncation:  1) vehicle speed limiting, 2) low gear torque
      limiting and 3) tip in torque retard:


      spk_trunc_low > spk_trunc_tipret ------| SPK_TRUNC = spk_trunc_tipret
                                             | spk_source_trunc = 3
                                             |
                                             | --- ELSE ---
                                             |
                                             | SPK_TRUNC = spk_trunc_low
                                             | spk_source_trunc = spk_source_tlow


      spk_trunc_vss > spk_trunc_gear --------| spk_trunc_low = spk_trunc_gear
                                             | spk_source_tlow = 4
                                             |
                                             | --- ELSE ---
                                             |
                                             | spk_trunc_low = spk_trunc_vss
                                             | spk_source_tlow = 5



      Vehicle speed limiter.  The spark speed limiter strategy must be  coordinated
      with the fuel speed limiter strategy.


      HSPFLG = 1 ----------------------------| spk_trunc_vss = SPK_M_B_T +
       (vehicle speed too high)              |                   FN743(VSBAR)
                                             | --- ELSE ---
                                             |
                                             | spk_trunc_vss = SPUCLP


      Torque truncation for transmission.

      FLG_TQ_TRUN = 1 -----------------------| spk_trunc_gear = 
                                             |   SPK_M_B_T + FN799(TR_TQ_LIMIT)
                                             |
                                             | --- ELSE ---
                                             | 
                                             | spk_trunc_gear = SPUCLP













                                         8-23

         IGNITION TIMING STRATEGY, TORQUE TRUNCATION VIA SPARK RETARD - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      TIP-IN RETARD

      Tip-in retard limits the rise in engine torque by comparing the ratio of  the
      desired  torque  to  the  actual  torque  if  at  MBT.   Once  this  ratio is
      calculated, the spark is retarded to reach the desired torque.  Load is  used
      in  this strategy instead of torque because it is roughly proportional to the
      indicated torque and readily available and widely understood.

      Calculate LAST_LD_MBT which is defined  as  the  load  from  the  last  pass,
      corrected  to  the value load would have to have if spark was at MBT in order
      for the engine to generate the same torque output.  The calculation uses  the
      last pass values of TIP_LAST_LD and SAF.


                  LAST_LD_MBT = TIP_LAST_LD * FN766(SPK_MBT_LAST - SAF)



      Calculate the allowable increase in torque expressed as  load.   If  DNDT  is
      decreasing  rapidly  allow  spark back to the maximum value (indicates engine
      has moved through the lash region).  NOVS can disable Tip-in retard in higher
      gears.


      DNDT_SPK < DNDT_LST - SPK_DNDT_C -|
                                        |AND -| TIP_DELTA = 1
      NOVS < SPK_TIP_NOVS --------------|     | 
                                              | --- ELSE ---
                                              |
                                              | TIP_DELTA = SPK_LDRATE * BG_TMR



      Calculate the allowed MBT load from the allowed  load  calculated  last  pass
      using  the last pass value of TIP_ALLOW_LD and the actual delivered MBT load,
      LAST_LD_MBT.

      TIP_ALLOW_LD < LAST_LD_MBT ------------| TIP_ALLOW_LD = TIP_ALLOW_LD + 
                                             |                   TIP_DELTA
                                             |
                                             | --- ELSE ---
                                             |
                                             | TIP_ALLOW_LD = LAST_LD_MBT + 
                                             |                   TIP_DELTA
















                                         8-24

         IGNITION TIMING STRATEGY, TORQUE TRUNCATION VIA SPARK RETARD - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Prepare the uncompensated load, TIP_LAST_LD, and the current DNDT_SPK for the
      next pass:

                                   TIP_LAST_LD = LOAD
                                   DNDT_LST = DNDT_SPK



      Using new values calculate the allowed torque ratio:

                              TIP_TR = TIP_ALLOW_LD / LOAD



      Make sure this value of spark is  calculated  only  when  tip  in  retard  is
      desired.

      TIP_TR < TIP_TR_TRIG ------------------| spk_tip = SPK_M_B_T + 
                                             |             FN799(TIP_TR)
                                             |
                                             | --- ELSE ---
                                             |
                                             | spk_tip = SPUCLP



      Do not allow a spark value below a calibratable minimum, TIP_MIN_SPK:

      spk_tip < TIP_MIN_SPK -----------------| spk_trunc_tipret = TIP_MIN_SPK
                                             |
                                             | --- ELSE ---
                                             |
                                             | spk_trunc_tipret = spk_tip



























                                         8-25

             IGNITION TIMING STRATEGY, MAXIMUM BRAKE TORQUE SPARK - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               MAXIMUM BRAKE TORQUE SPARK


      OVERVIEW

      The MBT spark calculation is used for  real  time  torque  calculation.   The
      calibration   is  provided  by  engine  mapping.   The  use  of  a  different
      calibration will affect the torque accuracy.  This  module  also  supplies  a
      torque ratio value (TR_SPK_DELTA), to other parts of the strategy.


      DEFINITIONS

      INPUTS

      Registers:

       -  SAFTOT = The SAF spark value after modification by  foreground  strategy,
          deg.

       -  SPK_LAMBSE = The lambse value used in  spark  calculations.   It  is  set
          equal to 1 when fuel is in closed loop otherwise it is LAMBSE.

      Calibration Constants:

       -  FN013(LOAD) = Normalized LOAD for half sized spark tables, unitless.

       -  FN014(ECT) = Normalized ECT for spark calculation, unitless.

       -  FN034C(LOAD)  =  Load  normalizing  function  for   torque   calculation,
          unitless.

       -  FN070C(N) = RPM normalizing function for torque calculation, unitless.

       -  FN730(SPK_LAMBSE) = MBT spark adder for rich and lean A/F.

       -  FN731(LOAD) = Function of load  which  multiplies  percent  EGR  for  the
          purpose of adjusting MBT spark.

       -  FN766 = Transfer function which calculates the torque ratio at  which  an
          engine is operating from the spark delta from MBT.

       -  FN2300 = MBT spark at 14.6 A/F and 0% EGR.
                   X = FN070C(N)
                   Y = FN034A(LOAD)

       -  FN2320 = Compensates MBT for engine coolant temperature.
                   X = FN014(ECT)
                   Y = FN013(LOAD)











                                         8-26

             IGNITION TIMING STRATEGY, MAXIMUM BRAKE TORQUE SPARK - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  SPK_M_B_T = Spark advance required to achieve Maximum Brake Torque.

       -  SPK_MBT_LAST = Last pass value of SPK_M_B_T.

       -  TR_SPK_DELTA = Current torque ratio as  determined  from  spark  advance,
          which is being output by engine, unitless.



      PROCESS
                             STRATEGY MODULE: SPARK_MBT_COM1


      SPK_MBT_LAST = SPK_M_B_T


      Using the current value of SAFTOT, calculate engine torque ratio due to
      spark:

      TR_SPK_DELTA = FN766(SPK_M_B_T - SAFTOT)


      Calculate maximum Brake Torque spark:

      SPK_M_B_T = FN2300(N,LOAD) 
              + FN2320(ECT,LOAD)
              + FN731(LOAD) * EGRACT
              + FN730(SPK_LAMBSE)
              + [spk_mbt_iac]


      NOTE: [spk_mbt_iac] is available with Inlet Air Control strategies; 
            zero otherwise.























                                         8-27

        IGNITION TIMING STRATEGY, TORQUE BASED FEEDBACK SPARK AT IDLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           STRATEGY MODULE: SPARK_IDLE_FB_COM1


                           TORQUE BASED FEEDBACK SPARK AT IDLE


      OVERVIEW

      The feedback spark strategy is a closed loop control algorithm which operates
      at  idle  and  attempts  to  maintain  a desired engine rpm by increasing and
      decreasing engine torque through spark advance  adjustmnts.   The  controller
      reacts  to  the rpm error from the desired rpm with a proportional correction
      of spark.  RPM control is accomplished in conjunction  with  the  Idle  Speed
      Control  and Fuel strategies.  The reason that spark is used for this problem
      is that spark advance is the quickest responding EEC  output  which  directly
      affects  engine  output  torque.   This spark strategy supplies engine torque
      quickly  and  the  correction  disappears  as  the  fundamental  response  of
      increased air flow supplied by the ISC strategy phases in.

      The approach to control rpm through spark advance adjustments is  intuitively
      understandable  but  the  task  of  accomplishing  it  is  complicated by two
      nonlinearities.  First, the relationship between spark advance and torque  is
      non-linear,  and  second, the relationship between an rpm error and torque is
      non-linear.  This strategy takes advantage  of  a  torque  ratio  formulation
      which results in three benefits:
      1.  The strategy  linearizes  the  relationship  between  spark  advance  and
          torque.  In other words the requested torque is accurately delivered.
      2.  The desired torque compensation is correct regardless of engine operating
          conditions such as rpm and load.
      3.  The control algorithm is calibratable with one  parameter  (SPK_LOAD_RES)
          which  effectively  defines the amount of torque the strategy will supply
          on demand.  The operating spark which supplies this reserve of torque  is
          calculated in the strategy without additional calibration.

      The strategy is based on mapping data supplied by the Calibration Optimzation
      and Analysis section in PEDD.  The data is entered into FN766 as shown below:

      FN766
      =====

                              1.0     |*********
              Engine Torque           |         *******
              -------------           |                ****
              Torque @ MBT            |                    ***
                              0.7     |________________________
                                      0                       30
                                        Spark Retard from MBT (deg)

      The input is the amount (a positive number) spark is retarded from MBT  spark
      advance  in degrees.  The output is the ratio of delivered engine torque at a
      particular spark advance to the engine torque delivered when  the  engine  is
      operating  at  MBT.   In other words, when the engine is operating at MBT the
      torque ratio is 1, and when the operating point  is  retarded  from  MBT  the
      torque ratio will be a fractional dimensionless value such as .9 or .8.






                                         8-28

        IGNITION TIMING STRATEGY, TORQUE BASED FEEDBACK SPARK AT IDLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      The strategy also  requires  the  mirror  image  of  this  function.   It  is
      calibrated in FN799:

      FN799
      =====

                              30      |**********
              Spark Retard            |          *******
              from MBT (deg)          |                 *****
                                      |                      ***
                               0      |__________________________
                                     0.7                      1.0
                                              Engine Torque
                                              -------------
                                              Torque @ MBT


      The strategy is an implementation of the following calculation:

              TORQUE RATIO ENGINE   =     TORQUE RATIO AVAILABLE

                                        - TORQUE RATIO RESERVE

                                        + TORQUE RATIO CORRECTION


      The components are defined as follows:

          TORQUE RATIO ENGINE = Torque ratio to be supplied by the engine.
              This value is called tr_eng in the strategy and will be converted
              to a spark advance by evaluating:  SPK_M_B_T + FN799(tr_eng)

          TORQUE RATIO AVAILABLE = This is the ratio of torque available for use.
              It is the torque ratio supplied if the engine were to operate at
              the absolute spark limit.  It is typically calculated from the
              equation:  TR_ABS = FN766(SPK_M_B_T - SPK_ABS_LIM)

          TORQUE RATIO RESERVE = This is a reserve of torque expressed as a torque
              ratio which is created by retarding spark below MBT.  This torque is
              available to the controller to compensate for torque disturbances.
              This reserve is essentially the only calibratable part of the
              strategy. The desired torque to be held in reserve by operating 
              retarded from MBT is calibrated through the parameter SPK_LOAD_RES.

          TORQUE RATIO CORRECTION = This is the amount of torque expressed as a
              torque ratio which reflects a torque disturbance as measured by an 
              rpm error. This torque called TR_COR in the strategy, compensates
              for  the torque disturbance. It is supplied by the engine as a result
              of advancing spark.











                                         8-29

        IGNITION TIMING STRATEGY, TORQUE BASED FEEDBACK SPARK AT IDLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      These components are shown graphically below:


                                       Engine Torque
                        Torque Ratio = -------------
                                       Torque @ MBT



      Torque Ratio = 1.0     -|--- Torque Ratio at MBT (a value of 1.0 is
                              |    the maximum possible)
                              |
                              |       This is torque which is not available
                              |       because another calculation such as
                              |       borderline spark has limitted spark.
                              |
               ----  TR_ABS  -|--- TORQUE AVAILABLE
              {               |
              {               |       TORQUE RESERVE: Reserve of torque set
              {               |       aside for load rejection.
              {               |
      TR_RES  {       tr_eng -|--- Torque Ratio to be delivered by engine.
              {               |   } Defined: tr_eng = TR_ABS - TR_RES + TR_COR
              {               |   }
              {               |   }           TORQUE CORRECTION: Engine torque
              {               |   } TR_COR    adjustment via spark in
              {               |   }           response to a load disturbance
              {               |   }           to the engine as measured by
               ---------------|---            an rpm error.
                              |
                              .
                              .
                              .
                              |
      Torque Ratio = 0.0     -|

























                                         8-30

        IGNITION TIMING STRATEGY, TORQUE BASED FEEDBACK SPARK AT IDLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      The relationships of the calculations are shown  below  via  variable  usage.
      the entries in the boxes are headings of sections in the strategy.


      SPK_M_B_T    SPK_ABS_LIM     LAST_LD_MBT
         |         SPK_FLEX_LIM         |
         |              |               |
         |              |               |
         |              |               |
         |              |               |
         |              |               V
         |              |     +-----------------+       +-------+
         |              |     | DESIRED RESERVE |       | SPARK |
         |              |     |  TORQUE RATIO   |       | STATE |
         |              |     +-----------------+       +-------+
         |              |             |                     |
         |              |             |                SPK_STATE
         |              |         tr_res_des                |
         |              |             |                     |
         |              |             |     +---------------+---+---------------+
         |              |             |     |                   |               |
         |              |             |     |                   |               |
         |              |             |     |                   |               |
         |              |             |     |                   |               |
         |              |             V     V                   V               |
         |              |       +----------------+         +------------+       |
         |              +------>| RESERVE TORQUE |         |  TORQUE    |       |
         +--------------------->|    RATIO       |         | CORRECTION |       |
         |                      +----------------+         +------------+       |
         |                              |                         |             |
         |                              |                         |             |
         |                           TR_RES                    TR_COR           |
         |                           TR_ABS                       |             |
         |                              |                         |             |
         |                              |                         |             |
         |                              +--------+     +----------+             |
         |                                       |     |                        |
         |                                       |     |                        |
         |                                       V     V                        |
         |                                   +-------------+                    |
         +---------------------------------->| IDLE SPARK  |                    |
                                             +-------------+                    |
                                                    |                           |
                                                    |                           |
                                               SPK_IDLE_FB                      |
                                                    |                           |
                                                    V                           V













                                         8-31

        IGNITION TIMING STRATEGY, TORQUE BASED FEEDBACK SPARK AT IDLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                       IDLE SPARK


      DEFINITIONS

      INPUTS

      Registers:

       -  SPK_M_B_T = Spark advance required to achieve Maximum Brake Torque.

       -  TR_ABS = Torque ratio calculated from SPK_ABS_LIM, unitless.

       -  TR_COR = Torque ratio correction required to respond to an rpm dip.  This
          term is in direct proportion to an rpm error from DSDRPM, unitless.

       -  TR_RES = Torque ratio reserve which is created by retarding  spark  below
          MBT.   It is available to the system to be added to compensate for an rpm
          error by advancing spark up to a maximum limit, unitless.

      Bit Flags:

       -  ALT_CAL_FLG = Determines when alternate  anti  plug  fouling  calibration
          should be used; 1 -> use alternate calibration.

      Calibration Constants:

       -  FN799(tr_eng) = Transfer function which returns a spark retard  from  MBT
          as a function of desired torque ratio, degrees.

       -  SPK_FBS_MIN = Most retarded spark allowed when in Feedback Spark.

       -  SPK_ALT_MIN = Most retarded spark allowed  when  in  feedback  spark  and
          running alternate anti plug fouling calibration.



      OUTPUTS

      Registers:

       -  SPK_IDLE_FB = Spark by Feedback Spark logic.


















                                         8-32

        IGNITION TIMING STRATEGY, TORQUE BASED FEEDBACK SPARK AT IDLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS


      Calculate SPK_IDLE_FB:

      spk_feedback < SPK_ALT_MIN ------|
                                       |AND -| SPK_IDLE_FB = SPK_ALT_MIN
      ALT_CAL_FLG = 1 -----------------|     | spk_source_fb = 8
                                             |
                                             | --- ELSE ---
                                             |
      spk_feedback < SPK_FBS_MIN ------------| SPK_IDLE_FB = SPK_FBS_MIN
                                             | spk_source_fb = 8
                                             |
                                             | --- ELSE ---
                                             |
                                             | SPK_IDLE_FB = spk_feedback
                                             | spk_source_fb = 9


                        spk_feedback = SPK_M_B_T + FN799(tr_eng)

                            tr_eng = TR_ABS - TR_RES + TR_COR





































                                         8-33

        IGNITION TIMING STRATEGY, TORQUE BASED FEEDBACK SPARK AT IDLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  RESERVE TORQUE RATIO


      DEFINITIONS

      INPUTS

      Registers:

       -  BG_TMR = Background loop time, secs.

       -  SPK_ABS_LIM = Spark is never allowed to go above this  value  because  of
          detonation, torque limitation or base spark requirements.

       -  SPK_FLEX_LIM = This is a desirable spark  limit  which  may  be  exceeded
          briefly  when  torque is required by a strategy such as feedback spark or
          oscmod.

       -  SPK_M_B_T = Spark advance  required  to  achieve  Maximum  Brake  Torque,
          degrees.

       -  TP = Instantaneous throttle position, counts.

       -  TP_LAST = Previous A to D reading of TP (throttle position), counts.

       -  TR_RES = Torque ratio reserve which is created by retarding  spark  below
          MBT.   It is available to the system to be added to compensate for an rpm
          error by advancing spark up to a maximum limit, unitless.

       -  tr_res_des = SPK_LOAD_RES expressed as a torque ratio with respect to the
          current operating LOAD, unitless.

      Calibration Constants:

       -  FBS_ENTRY_TC = Time constant which paces the entry into  feedback  spark,
          sec.

       -  FKEXIT_MIN = Minimum clip on the exit spark filter constant.

       -  FN766 = Transfer function which calculates the torque ratio at  which  an
          engine is operating from the spark delta from MBT.

       -  TARMAX = Minimum value of TAR that will make "fkexit" =  1.0,  degrees  /
          sec.
















                                         8-34

        IGNITION TIMING STRATEGY, TORQUE BASED FEEDBACK SPARK AT IDLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  TP_LAST = See above.

       -  TR_ABS = Torque ratio calculated from SPK_ABS_LIM, unitless.

       -  TR_RES = Torque ratio reserve which is created by retarding  spark  below
          It  is available to the system to be added to compensate for an rpm error
          by advancing spark up to a maximum limit, unitless.

       -  TR_RES_LAST = Last pass value of TR_RES, unitless.















































                                         8-35

        IGNITION TIMING STRATEGY, TORQUE BASED FEEDBACK SPARK AT IDLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS

      Upon entry into SPK_STATE 1, TR_RES is ramped exponentially from a  value  of
      tr_flex  to a value of tr_res using a rolling average routine.  It remains at
      the latter value until the strategy exits via SPK_STATE  3  to  SPK_STATE  0,
      when  it decays to a value of tr_flex at a rate based on throttle angle rate:
      the greater the throttle rate, the faster the decay.


      Torque ratio reserve calculation:

      SPK_STATE = 1 -------------------------| TR_RES_LAST = TR_RES
                                             | TR_RES = ROLAV(tr_res,FBS_ENTRY_TC)
                                             |
                                             | --- ELSE ---
                                             |
      SPK_STATE = 2 -------------------------| TR_RES_LAST = TR_RES
                                             | TR_RES = tr_res
                                             |
                                             | --- ELSE ---
                                             |
      SPK_STATE = 3 -------------------------| TR_RES_LAST = TR_RES
                                             | TR_RES = (1 - fkexit) * TR_RES
                                             |          + fkexit * tr_res_base
                                             | fkexit = spk_tar / TARMAX
                                             | Clip fkexit between 
                                             |      FKEXIT_MIN and 1
                                             |
                                             | --- ELSE ---
                                             |
                                             | TR_RES_LAST = TR_RES
                                             | TR_RES = tr_res_base 


      Calculate the discrete derivative of throttle position.  The factor  of  9.57
      is  the  conversion from Analogue to Digital counts into degrees of rotation.
      As a result spk_tar has units of degress per second:

                                             |           TP - TP_LAST
      TP - TP_LAST > 0 ----------------------| spk_tar = ------------
                                             |           BG_TMR * 9.57
                                             | TP_LAST = TP
                                             |
                                             | --- ELSE ---
                                             |
                                             | spk_tar = 0
                                             | TP_LAST = TP













                                         8-36

        IGNITION TIMING STRATEGY, TORQUE BASED FEEDBACK SPARK AT IDLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Select the larger of the existing and desired reserve torque ratios:


      tr_res_des > tr_res_base --------------| tr_res = tr_res_des
                                             |
                                             | --- ELSE ---
                                             |
                                             | tr_res = tr_res_base


      Torque reserve which is already available due to the difference  between  the
      absolute and flexible spark clips:

                             tr_res_base = TR_ABS - tr_flex


      Torque ratio calculated from the absolute and flexible spark clips:

      SPK_M_B_T > SPK_ABS_LIM ---------------| TR_ABS = FN766(SPK_M_B_T - 
                                             |          SPK_ABS_LIM)
                                             | tr_flex = FN766(SPK_M_B_T - 
                                             |           SPK_FLEX_LIM)
                                             |
                                             | --- ELSE ---
                                             |
      SPK_M_B_T > SPK_FLEX_LIM --------------| TR_ABS = 1
                                             | tr_flex = FN766(SPK_M_B_T -
                                             |           SPK_FLEX_LIM)
                                             |
                                             | --- ELSE ---
                                             |
                                             | TR_ABS = 1
                                             | tr_flex = 1



























                                         8-37

        IGNITION TIMING STRATEGY, TORQUE BASED FEEDBACK SPARK AT IDLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              DESIRED RESERVE TORQUE RATIO


      OVERVIEW

      In order to have the ability  to  add  torque  to  compensate  for  a  torque
      disturbance,  it  is  necessary to design in a torque reserve which is always
      available.  It is desirable to define  this  reserve  as  a  fixed  value  of
      torque,  however, torque is not measurable in EEC-IV strategies.  Load can be
      used instead of torque because they are directly proportional to each  other.
      Torque  or  load can be expressed as equivalent dimensionless ratios referred
      to here as a torque ratio.  When a ratio is used many  simplifications  occur
      in  the  equations.  The formulation shown allows the calibration of a torque
      reserve which remains constant for all speed load combinations.  The  reserve
      is created by retarding spark.

      To determine the desired amount of torque reserve a procedure is  recommended
      where  the  calibrator  operates  the engine at a normal idle noting load and
      rpm.  He then applies an external load which is representative  of  the  load
      rejection  desired.   The  engine  is allowed to stabilize to the same rpm as
      before and the increase in load required to maintain this rpm is  calculated.
      This increase in load is calibrated in SPK_LOAD_RES.

      The amount of retard required  to  provide  appreciable  load  rejection  may
      require  an  unacceptably  large  spark retard at idle.  As a result feedback
      spark may be used primarily for stabilizing the idle.

      DEFINITIONS

      INPUTS

      Registers:

       -  LAST_LD_MBT = Load from the last pass corrected to the value  load  would
          have  to have if spark was at MBT in order for the engine to generate the
          same torque output.

      Calibration Constants:

       -  SPK_LOAD_RES = Desired torque (expressed  as  load)  which  the  feedback
          spark  calculation  can  supply to compensate for a torque disturbance to
          the engine, unitless.


      OUTPUTS

      Registers:

       -  tr_res_des = SPK_LOAD_RES expressed as a torque ratio with respect to the
          current operating LOAD, unitless.


      PROCESS

      Calculate the desired reserve  torque  ratio  using  load  corrected  to  its
      equivalent value at MBT.

                         tr_res_des = SPK_LOAD_RES / LAST_LD_MBT


                                         8-38

        IGNITION TIMING STRATEGY, TORQUE BASED FEEDBACK SPARK AT IDLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    TORQUE CORRECTION


      DEFINITIONS

      INPUTS

      Registers:

       -  DSDRPM = Idle speed control desired RPM.

       -  N = Engine RPM.

       -  SPK_STATE = Defines the use of feedback spark; 0 -> feedback spark is not
          being  used,  1  ->  transitioning  into  feedback  spark, 2 -> using the
          feedback spark calculation, 3 -> transitioning out of feedback spark.

      Bit Flags:

       -  V_MODE_SETUP = 1 -> Use normal spark for throttle mode VIP.

      Calibration Constants:

       -  FBS_ENTRY_TC = Time constant which paces the entry into  feedback  spark,
          sec.

       -  SPK_FBS_GAIN = Feedback spark control proportional gain  term.   Normally
          calibrated to one in order to exactly compensate for torque disturbances,
          unitless.

       -  V_MODE_SEL = Flag which determines whether to use  RPM  error  or  ISCDTY
          error during TP adjust mode.  Set equal to 1 if ISCDTY error desired.



      OUTPUTS

      Registers:

       -  TR_COR = Torque ratio correction required to respond to an rpm dip.  This
          term is in direct proportion to an rpm error from DSDRPM, unitless.



















                                         8-39

        IGNITION TIMING STRATEGY, TORQUE BASED FEEDBACK SPARK AT IDLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS

      SPK_STATE = 1 -------------------------| TR_COR = ROLAV(tr_cor,FBS_ENTRY_TC)
                                             |
                                             | --- ELSE ---
                                             |
      SPK_STATE = 2 -------------------------| TR_COR = tr_cor
                                             |
                                             | --- ELSE ---
                                             |
                                             | TR_COR = 0


      V_MODE_SETUP = 0 ----------------|     
                                       |OR --| tr_cor = [(DSDRPM - N)/DSDRPM] *
      V_MODE_SETUP = 1 ----------|     |     |   SPK_FBS_GAIN
                                 |AND -|     | 
      V_MODE_SEL = 1 ------------|           | --- ELSE ---
                                             |
                                             | tr_cor = 0








































                                         8-40

        IGNITION TIMING STRATEGY, TORQUE BASED FEEDBACK SPARK AT IDLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                       SPARK STATE

      DEFINITIONS

      INPUTS

      Registers:

       -  APT = At Part Throttle; -1 -> Closed throttle, 0 -> Part throttle,  1  ->
          Wide Open throttle.

       -  DSDRPM = Idle speed control desired RPM.

       -  ISCFLG = ISC mode indicator flag;  -1  ->  Dashpot  Mode,  0  ->  Dashpot
          Preposition Mode, 1 -> Closed Loop RPM Control Mode, 2 -> Closed Loop RPM
          Control (Lockout entry to RPM control).

       -  SPK_STATE = Defines the use of feedback spark; 0 -> feedback spark is not
          being  used,  1  ->  transitioning  into  feedback  spark, 2 -> using the
          feedback spark calculation, 3 -> transitioning out of feedback spark.

       -  TR_RES = Torque ratio reserve which is created by retarding  spark  below
          MBT.   It is available to the system to be added to compensate for an rpm
          error by advancing spark up to a maximum limit, unitless.

       -  TR_RES_LAST = Last pass value of TR_RES, unitless.

       -  VSBAR = Filtered vehicle speed.

      Calibration Constants:

       -  DRBASE = Base desired engine speed in drive.

       -  FBS_ENTRY_TC = Time constant which paces the entry into  feedback  spark,
          sec.

       -  MINMPH = Minimum speed to enter C/L  RPM  control.   Applies  to  systems
          having  VSS.   Should be set below the speed at which an automatic trans.
          vehicle rolls along in drive without the  brakes.   This  is  to  prevent
          going  into  RPM control during parking lot maneuvers.  Typical value - 3
          MPH.

       -  NUBASE = Base desired engine speed in neutral.

       -  SPKCTL = Threshold above base DSDRPM, below which spark feedback  can  be
          entered.

       -  TR_DELTA = Deviation from TR_RES which controls entry into feedback spark
          state 2, unitless.

      Bit Flags:

       -  DNDSUP = Delayed Neutral/Drive flag; 0 -> neutral, 1 -> drive.







                                         8-41

        IGNITION TIMING STRATEGY, TORQUE BASED FEEDBACK SPARK AT IDLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  SPKTMR = Timer used to pace the transition into feedback spark.

       -  SPK_STATE = Defines the use of feedback spark, 0 -> feedback spark is not
          being  used,  1  ->  transitioning  into  feedback  spark, 2 -> using the
          feedback spark calculation, 3 -> transitioning out of feedback spark.



      PROCESS

      Spark state transition logic:

      SPK_STATE = 0 -------------------|     
       (current state is 0)            |AND -| SPK_STATE = 1  
                                       |     |  (transition to idle spark)  
      fbs_entry_ok = 1 ----------------|     | SPKTMR = 0 
                                             |  
                                             | --- ELSE --- 
      SPK_STATE = 1 -------------------|     | 
       (current state is 1)            |AND -| SPK_STATE = 3 
                                       |     |  (exit from idle spark) 
      fbs_exit_ok = 1 -----------------|     | SPKTMR is running 
                                             | 
                                             | --- ELSE --- 
      SPK_STATE = 1 -------------------|     | 
         (current state is 1)          |AND -| SPK_STATE = 2    
                                       |     |  (start doing feedback spark) 
      fbs_entry_comp = 1 --------------|     | SPKTMR is running 
                                             |
                                             | --- ELSE --- 
      SPK_STATE = 2 -------------------|     | 
       (current state is 2)            |     | 
                                       |AND -| SPK_STATE = 3 
      fbs_exit_ok = 1 -----------------|     |  (transition to normal spark) 
                                       |     | SPKTMR is running   
      V_MODE_SETUP = 0 ----------------|     | 
                                             | --- ELSE --- 
      SPK_STATE = 3 -------------------|     | 
                                       |AND -| SPK_STATE = 1  
      fbs_entry_ok = 1 ----------------|     |  (transition back into state 1)
       (see entry logic)                     | SPKTMR = 0  
                                             |  
                                             | --- ELSE ---  
      SPK_STATE = 3 -------------------|     | 
                                       |AND -| SPK_STATE = 0
      fbs_exit_comp = 1 ---------------|     |  (transition into state 0) 
       (see exit complete logic)             | SPKTMR is running 
                                             | 
                                             | --- ELSE --- 
                                             | 
                                             | No change to SPK_STATE  
                                             | SPKTMR is running 




                                         8-42

        IGNITION TIMING STRATEGY, TORQUE BASED FEEDBACK SPARK AT IDLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Entry conditions to spark state 1.   Begin  transition  into  feedback  spark
      calculation.

      ISCFLG >= 1 ---------------------| 
       (rpm control or lockout)        | 
                                       | 
      DNDSUP = 1 ----------|           |AND -| fbs_entry_ok = 1 
                           |AND -|     |     | 
      DSDRPM - DRBASE      |     |     |     | 
              <= SPKCTL ---|     |     |     |
       (near idle rpm)           |OR --|     | 
                                 |           | 
      DNDSUP = 0 ----------|     |           | 
                           |AND -|           | 
      DSDRPM - NUBASE      |                 | 
              <= SPKCTL ---|                 |
                                             | --- ELSE --- 
                                             | 
                                             | fbs_entry_ok = 0  


      Entry conditions to spark state 3.  Begin transition out  of  feedback  spark
      calculations.

      APT >= 0 ------------------------|
       (tip in)                        |OR --| fbs_exit_ok = 1
                                       |     |
      VSBAR > MINMPH ------------------|     |
         (vehicle moving)                    |
                                             | --- ELSE ---
                                             |
                                             | fbs_exit_ok = 0 


      Entry conditions to spark state 2.  Entry transition  to  feedback  spark  is
      complete,  begin  normal feedback spark calculation.  Note:  This calculation
      uses last pass values for TR_RES and TR_RES_LAST.

      SPKTMR > FBS_ENTRY_TC * 2 -------| 
                                       |OR --| fbs_entry_comp = 1
      |TR_RES_LAST - TR_RES|           |     | 
                      < TR_DELTA ------|     |
                                             | --- ELSE ---
                                             |
                                             | fbs_entry_comp = 0


      Entry conditions to spark state 0.  Exit transition from  feedback  spark  is
      complete, do not use the feedback spark calculation.  Note:  This calculation
      uses last pass values for TR_RES and TR_RES_LAST.

      |TR_RES_LAST - TR_RES| < TR_DELTA -----| fbs_exit_comp = 1
                                             |   
                                             | --- ELSE ---
                                             |
                                             | fbs_exit_comp = 0




                                         8-43

               IGNITION TIMING STRATEGY, OSCILLATION MODULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 OSCILLATION MODULATION


      OVERVIEW

      OSCMOD stands for oscillation modulation.  Engine  torque  is  modulated  via
      spark  advance  as  a  function  of  the  rate  of  change of rpm in order to
      stabilize oscillations in rpm.  This  is  a  derivative  control  method  and
      functions as a dashpot.  This correction may be useful during closed throttle
      or negative crowd decelerations to control shuffle.   It  can  also  be  used
      without  interference  with  feedback  spark.   The  areas  and  magnitude of
      correction are controlled by non-zero values in FN2020.



      DEFINITIONS

      INPUTS

      Registers:

       -  DNDT_SPK = Filtered rate of change of  RPM  for  OSCMOD  spark,  RPM/S*S.
          This  parameter  is  calculated  at the start of the spark routine which,
          means a recent value of DNDT is used.

       -  LOAD = Universal load variable.  Normalized CYLARC_BG divided by  SARCHG,
          unitless.

       -  N = Engine speed in revolution per minute, RPM.

       -  NOVS = Ratio of engine speed to vehicle speed used to infer  transmission
          gear, rpm/mph.

       -  SPK_OSC_OFF = The amount by which the base spark calculation  is  reduced
          to make room for an increase as calculated by the OSCMOD strategy.

      Bit Flags:

       -  V_MODE_SETUP = 1 -> Use normal spark for throttle mode VIP.

      Calibration Constants:

       -  FN013(LOAD) = Normalized LOAD for half-sized spark tables.

       -  FN017(N) = Normalized RPM for half-sized spark tables.

       -  FN745(DNDT_SPK) = Adds spark in order to add torque when  engine  rpm  is
          dropping  and  takes  spark  away  when rpm is increasing.  A value of -1
          returns all the spark taken out with FN2020.

       -  FN746(NOVS) =  Engine  torque  transmission  is  lower  in  higher  gears
          (calibrate  to  a  value  less than one) reducing the need for the OSCMOD
          relative to first gear (calibrate to one), unitless.

       -  FN2020 = Reduces base spark in order to reduce torque so that there is  a
          reserve  of  torque  available  to  be added back in as determined by the
          SPK_OSCMOD calculation.
                   X = FN017(N)
                   Y = FN013(LOAD)

                                         8-44

               IGNITION TIMING STRATEGY, OSCILLATION MODULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  V_MODE_SEL = Flag which determines whether to use  RPM  error  or  ISCDTY
          error during TP adjust mode.  Set equal to 1 when using ISCDTY error.



      OUTPUTS

      Registers:

       -  SPK_OSC_OFF = See above.

       -  SPK_OSCMOD = OSCMOD correction to other spark calculations.




      PROCESS
                           STRATEGY MODULE: SPARK_OSCMOD_COM1


      V_MODE_SETUP = 0 ----------------|
                                       |OR --| SPK_OSCMOD = SPK_OSC_OFF * 
      V_MODE_SETUP = 1 ----------|     |     |   FN745(DNDT_SPK)
                                 |AND -|     |
      V_MODE_SEL = 1 ------------|           | --- ELSE --- 
                                             |
                                             | SPK_OSCMOD = 0


                       SPK_OSC_OFF = FN2020(N,LOAD) * FN746(NOVS)






























                                         8-45

             IGNITION TIMING STRATEGY, DISTRIBUTOR ROTOR REGISTRY - GUJ0
                    PEDD-PTOPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               DISTRIBUTOR ROTOR REGISTRY
                    (DOES NOT APPLY FOR HIGH DATA RATE SPARK SYSTEM)
      OVERVIEW

           Although the computer signals the ignition module and the ignition  coil
      when  to  fire  the  spark,  the  computer does not know which cylinder it is
      trying to ignite.  In order to get the spark from the ignition  coil  to  the
      correct  cylinder,  it  is necessary for the distributor rotor to be lined up
      with the correct terminals on the cap so that only a small air  gap  need  be
      jumped.  This condition is achieved by adjusting mechanically the orientation
      of the distributor rotor and cap with respect to the  crank  position  sensor
      which may be a part of distributor or remote from it.

      A slight error in registry may cause mis/crossfire at one end  of  the  spark
      range.

      The range of rotation in which the spark will go to the correct  cylinder  is
      given in the chart below

      ENGINE    TOTAL     PIP SENSOR     SPARK          LOS
      SIZE      REGISTRY  LOCATION       RANGE          SPARK
      4-CYL     60        10 BTDC        0-60           10
      6-CYL     50        10 BTDC        0-50           10
      8-CYL     42        10 BTDC        5-47           10

      All values are in Engine Degrees. LOS spark is BTDC.
      It is also necessary that the distributor adjustments be specified with these
      values.   For  this  reason,  the Ignition Department must be notified of any
      changes in these clip values or pip sensor location (initial timing), so that
      production  distributors will be correct.  It is important that the 543 chart
      affecting rotor alignment be updated by the engine design activity involved.

      ADJUSTMENT PROCEDURE:

      The Universal Distributor will be assembled with the correct rotor  registry,
      and  the  Hall  Effect Sensor (PIP Sensor) located at the correct position in
      relation to the rotor registry constants.  It  is  necessary  to  locate  the
      distributor correctly, in relation to the crankshaft position of the engine.

      When a Universal Distributor is installed in the engine, it is held in  place
      by  two screws.  To set the initial timing of 10 deg BTDC unplug the EEC from
      memory or disconnect the SPOUT wire and adjust distributor  angular  location
      by rotating the body till 10 deg BTDC is observed with a timing light.

















                                         8-46

              IGNITION TIMING STRATEGY, SIGNATURE PIP DISTRIBUTOR - GUJ0
                    PEDD-PTOPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                SIGNATURE PIP DISTRIBUTOR


      OVERVIEW

           The Signature Pip Distributor has a unique duty  cycle  on  the  shutter
      used to fire cylinder #1.  The purpose of this unique shutter is to allow the
      fuel injectors to be fired at some optimum  time  relative  to  intake  valve
      position.   This is accomplished by first identifying the cylinder #1 Pip and
      then synchronizing the fuel injectors to it as described in the fuel section.


      The engineer must indicate which type of distributor is used as follows:

      If a Signature Pip Distributor is used, then set  MHPFD  to  the  appropriate
      value as defined in the injector synchronization routine.

      If a Conventional Pip Distributor is used, then set MHPFD = .99.


      When MHPFD  <  0.50,  then  another  consideration  in  the  FALLING-EDGE  vs
      RISING-EDGE  decision  is  the  state  of  SYNFLG.   As described in the fuel
      section, when SYNFLG = 0, then the Signature Pip has not yet been identified.
      Only the RISING-EDGE calculation is allowed during this time.


      When SYNFLG =  1,  then  the  Signature  Pip  has  been  identified  and  its
      delta-time,  HFDLTA,  can be normalized.  Signature PIP may not be exactly 30
      or 35%; thus, any error from these values will introduce error in the  output
      spark.






























                                         8-47

              IGNITION TIMING STRATEGY, MKAY/SIGKAY CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 MKAY/SIGKAY CALCULATION


      DEFINITIONS

      INPUTS

      Registers:

       -  DT12S = Last PIP period.

       -  DT23S = Previous PIP period before DT12S.

       -  DTPCYC = PIP period ENGCYL * 2 + 1 cylinders previous.

       -  DTSIG = PIP period of last signature PIP.

       -  HFDLTA = Last period from PIP up-edge to down-edge.

       -  HFPCYC = Period from PIP up to down-edge ENGCYL * 2 cylinders previous.

       -  KAYCTR = A counter to indicate how often to update MKAY.

       -  MKAY = Half period multiplier to correct for average error caused by Hall
          effect sensor in distributor and armature.

       -  PSGDLT = Previous uncorrected signature PIP half period.

       -  SIGDLT = Uncorrected signature PIP half period.

       -  SIGKAL = Signature PIP half period multiplier - initial value  =  1.66666
          for  30%  duty cycle signature PIP = 1.42857 for 35% duty cycle signature
          PIP.

      Calibration Constants:

       -  ENGCYL = The number of cylinders in one engine revolution.

       -  FKMKAY = Filter constant of update rate to MKAY.

       -  FKSKAY = Filter constant of update rate to SIGKAL.

       -  KLLIM = Lowest value for MKAY multiplier - initial value = 0.9.

       -  KULMT = Highest value for MKAY multiplier - initial value = 1.1.

       -  SIGKLL = Lowest value for signature PIP multiplier
                    - initial value = 1.42857 for 30% duty cycle signature PIP
                                    = 1.25000 for 35% duty cycle signature PIP.

       -  SIGKLU = Highest value for signature PIP multiplier
                    - initial value = 1.99996 for 30% duty cycle signature PIP
                                    = 1.66666 for 35% duty cycle signature PIP.

       -  SSFCTR = Steady state factor for MKAY and signature KAY calculations.

       -  SKSSLC = Steady state factor for Signature Kay calculation.



                                         8-48

              IGNITION TIMING STRATEGY, MKAY/SIGKAY CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Bit Flags:

       -  SIGPIP = A flag that indicates that signature PIP half  period  has  been
          identified.

       -  SYNFLG = Flag when set indicates Signature PIP has been identified;  else
          Signature PIP not yet seen.  It is initialized to 0.



      OUTPUTS

      Registers:

       -  DTPCYC = PIP period ENGCYL * 2 + 1 cylinders previous.

       -  DTSIG = PIP period of last signature PIP.

       -  HFDLTA = Last period from PIP up-edge to down-edge.

       -  HFPCYC = Period from PIP up to down-edge ENGCYL * 2 cylinders previous.

       -  KAYCTR = A counter to indicate how often to update MKAY.

       -  MKAY = Half period multiplier to correct for average error caused by Hall
          effect sensor in distributor and armature.

       -  PSGDLT = Previous uncorrected signature PIP half period.

       -  SIGDLT = Uncorrected signature PIP half period.

       -  SIGKAL = Signature PIP half period multiplier - initial value  =  1.66666
          for  30%  duty cycle signature PIP = 1.42857 for 35% duty cycle signature
          PIP.


























                                         8-49

              IGNITION TIMING STRATEGY, MKAY/SIGKAY CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: SPARK_MKAY_COM2

                                     PIP_DATA MODULE


      always ------------------------------| Call EOS_KAY_CALCULATIONS module
                                           |  (perform MKAY/SIGKAY calculation)



                                MKAY/SIGKAY CALCULATIONS

                      Foreground module KAY (EOS_KAY_CALCULATIONS)
                      (called from PIP_DATA during PIP rising edge)


      SIGPIP = 1 --------------------|
                                     |AND -| Do: Signature Kay calculation
      SYNFLG = 1 --------------------|     | 
                                           | --- ELSE ---
                                           |
                                           | Skip Signature Kay calculation
                                           | Go on to MKAY calculation 
                                           |  entry point



                                SIGNATURE KAY CALCULATION


      |DT12S - DTSIG| < SKSSLC * DT12S -----|
                                            |
      |DT12S - DT23S| < SKSSLC * DT12S -----|AND -| DTSIG = DT12S
                                            |     | sigkal' = DT12S/(SIGDLT * 2)
      |SIGDLT - PSGDLT| < SKSSLC * SIGDLT --|     | SIGKAL = FKSKAY * sigkal' + 
                                                  |   (1 - FKSKAY) * SIGKAL 
                                                  | SIGKLL < SIGKAL < SIGKLU
                                                  | Go to MKAY calculation 
                                                  |     entry point
                                                  |
                                                  | --- ELSE ---
                                                  |
                                                  | DTSIG = DT12S
                                                  | Go to MKAY calculation
                                                  |     entry point    














                                         8-50

              IGNITION TIMING STRATEGY, MKAY/SIGKAY CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              MKAY CALCULATION ENTRY POINT


      KAYCTR > ENGCYL * 2 -----------------| KAYCTR = 1
                                           | DTPCYC = DT12S
                                           | HFPCYC = HFDLTA
                                           | Return
                                           |
                                           | --- ELSE ---
                                           |
                                           | Increment KAYCTR


      SIGPIP = 0 --------------------|
                                     |AND -| Do: MKAY Kay calculation 
      KAYCTR > ENGCYL * 2 -----------|     |    
                                           | --- ELSE ---
                                           |
                                           | Return



                                    MKAY CALCULATION


      |DT12S - DTPCYC| <= SSFCTR * DT12S ---|
                                            |
      |HFDLTA - HFPCYC| <= SSFCTR * HFDLTA -|AND -| mkay' = 0.5 * 
                                            |     |   (DT12S + DTPCYC) /
      mkay' < 1.2 --------------------------|     |   (HFDLTA + HFPCYC)
                                                  | MKAY = FKMKAY * MKAY' +
                                                  |   (1 - FKMKAY) * MKAY
                                                  | KLLIM < MKAY < KULMT
                                                  |
                                                  | --- ELSE ---
                                                  |
                                                  | Return


      NOTE: On every PIP down edge transition, in the PIP_DATA routine


      SIGPIP = 1---------------------|
                                     |AND -| PSGDLT = SIGDLT
      SYNFLG = 1 --------------------|     | SIGDLT = HFDLTA
                                           | HFDLTA = (HFDLTA*SIGKAL)/MKAY














                                         8-51

            IGNITION TIMING STRATEGY, TRANSIENT SPARK COMPENSATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              TRANSIENT SPARK COMPENSATION


      OVERVIEW


          :<---------DT23S----------->:<-----------DT12S---------->:

          :<- PHFDLT ->:              :<- HFDLTA ->:

          .------------.              .------------.               .---
          |            |              |            |               |
          |            |              |            |               |
          |            |              |            |               |
      ----.            .--------------.            .---------------.


                      Foreground module TRSPLD (EOS_TRANS_SPK_DET)
                      (called from PIP_DATA during PIP rising edge)









































                                         8-52

            IGNITION TIMING STRATEGY, TRANSIENT SPARK COMPENSATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  DIFCTR = Counter for TL0FLG state changes.

       -  DT12S = Last PIP period.

       -  DT23S = Previous PIP period before DT12S.

       -  HFDLTA = Last period from PIP up-edge to down-edge.

       -  MKAY = Half period multiplier to correct for average error caused by Hall
          effect sensor in distributor and armature. 

       -  PHFDLT = Previous time elapsed between up-edge to down-edge of PIP. 

       -  PIP_DOUBLE = Indicates double edge transition complete.

      Bit Flags:

       -  TL0FLG = Transient Spark calculation flag.

      Calibration Constants:

       -  DFMIN0 = Minimum number of TS0FLG 1 to 0 state changes.

       -  DFMIN1 = Minimum number of TS0FLG 0 to 1 state changes.



      OUTPUTS

      Registers:

       -  DIFCTR = See above.

      Bit Flags:

       -  TL0FLG = See above.


















                                         8-53

            IGNITION TIMING STRATEGY, TRANSIENT SPARK COMPENSATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                        STRATEGY MODULE: SPARK_TRANS_SPK_DET_COM1


                                        PIP_DATA


      PIP_DOUBLE = 1 -------------------------| Do: SPARK_TRANS_SPK_DET_COM1
                                              |  (perform Transient Spark 
                                              |   Compensation Detection Logic)
                                              | 
                                              | --- ELSE ---
                                              | 
                                              | Skip this module and continue
                                              |  with PIP_DATA processing


      Calculate time prediction error using steady state technique (diff0) and time
      prediction error using transient technique (diff1).


      always ---------------------------------| diff0 = |DT12S - 2 * HFDLTA * MKAY|
                                              | diff1 = |DT12S - HFDLTA - (HFDLTA 
                                              |   * (DT23S - PHFDLT))/PHFDLT|


      diff0 <= diff1 -------------|
       (steady state better)      |AND -|
                                  |     |
      TL0FLG = 1 -----------------|     |
       (but using transient)            |OR --| DIFCTR = DIFCTR + 1
                                        |     |
      diff0 > diff1 --------------|     |     | 
       (transient better)         |AND -|     |
                                  |           | 
      TL0FLG = 0 -----------------|           | 
       (but using steady state)               |
                                              | --- ELSE ---
                                              |
                                              | DIFCTR = 0


      diff0 <= diff1 -------------------|
       (steady state better)            |AND -| TL0FLG = 0
                                        |     |  (steady state, use no correction)
      DIFCTR >= DFMIN0 -----------------|     | DIFCTR = 0
       (correct enough times)                 | 
                                              | --- ELSE ---
      diff0 > diff1 --------------------|     |
       (transient better)               |AND -| TL0FLG = 1
                                        |     |  (use transient spark correction)
      DIFCTR >= DFMIN1 -----------------|     | DIFCTR = 0
       (correct enough times)                 | 
                                              | --- ELSE ---
                                              | 
                                              | No change


      always ---------------------------------| Return

                                         8-54

                IGNITION TIMING STRATEGY, PIP DATA CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  PIP DATA CALCULATION
                      (called from PIP_DATA during PIP Rising Edge)


      OVERVIEW

      The spark output routine (SPOUT_CALCULATION) is  called  from  the  PIP  edge
      processing  routine.   Depending  on  the  conditions  and  the hardware, the
      SPOUT_CALCULATION routine may be called from either the PIP  high  transition
      or the PIP low transition.



      DEFINITIONS

      INPUTS

      Bit Flags:

       -  CCD_HP = Flag indicating presence of computer controlled dwell hardware.

       -  DWLELD = Dwell edge leads spark edge; 1 -> falling edge dwell.

       -  ECHO_PIP = A flag that indicates when the spark output signal  is  output
          coincident with the PIP edges as they are received.

       -  ECHO_TRANS = A flag that indicates when the spark output signal is in the
          process  of  transitioning to or from normal spark output to the ECHO_PIP
          mode.

       -  PIP_DOUBLE = A flag indicating which edge is referenced for spark;  1  ->
          use PIP down edge, 0 -> use PIP up-edge.



      OUTPUTS

      Registers:

       -  OLD_BETA = The percentage of PIP period from the reference PIP edge  used
          on the last spark output.

      Bit Flags:

       -  DOUBLE_EDGE = A foreground (DOS) flag used to indicate the current  spark
          output calculation method.

       -  DWLELD = See above.

       -  ECHO_TRANS = See above.

       -  IMMEDIATE = Indicates immediate output request.








                                         8-55

                IGNITION TIMING STRATEGY, PIP DATA CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: SPARK_PIP_DAT_COM2


                                        PIP_HIGH
                                (during PIP rising edge)

      1.  Under all conditions except  when  computer  controlled  dwell  is  using
      falling  edge  dwell,  the  delta time from the SPOUT low-to-high (high edge)
      signal to the SPOUT high-to-low (low  edge)  signal  is  calculated  for  use
      following  the  output  of the nex SPOUT high edge.  This calculation is also
      used in non-CCD conditions because the sequence of scheduling the SPOUT edges
      is  the  same.   Determine  if  and  when  to  perform  the rising edge dwell
      calculation by the following logic:


      CCD_HP = 0 --------------------------|      
       (CCD hardware not present)          |OR --| Call DWELL_CALCULATION 
                                           |     | Continue with this module
      DWLELD = 0 --------------------------|     |
       (rising edge mode of CCD)                 |
                                                 | --- ELSE ---
                                                 |
                                                 | Continue with this module


      Always ------------------------------------| PIP_DOUBLE = DOUBLE_EDGE

































                                         8-56

                IGNITION TIMING STRATEGY, PIP DATA CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      2.  The spark output routine (SPOUT_CALCULATION) is called from the PIP  edge
      processing  routine.   Depending  on  the  conditions  and  the hardware, the
      SPOUT_CALCULATION routine may be called from either the PIP  high  transition
      or  the  PIP  low  transition.  Additionally, when the engine does not have a
      High Data Rate Spark System, the strategy will  cause  the  SPOUT  signal  to
      reflect the PIP signal input in crank mode, underspeed mode, or SA10FG mode.


      ECHO_PIP = 1 ------------------------|
       (not in echo mode)                  |AND -|  (reflect PIP in SPOUT)
                                           |     |  (echo the PIP edge transition
      ECHO_TRANS = 0 ----------------------|     |   as a SPOUT transition)
       (transition completed)                    | DOUBLE_EDGE = 0
                                                 | OLD_BETA = 1
                                                 |  (continue PIP processing)
                                                 | 
                                                 | --- ELSE ---
                                                 |
      ECHO_PIP = 1 ------------------------------|  (transistion from normal
                                                 |   spark to PIP echo mode)
                                                 | DOUBLE_EDGE = 0
                                                 | OLD_BETA = 1
                                                 |  (continue PIP processing)
                                                 |
                                                 | --- ELSE ---
      PIP_DOUBLE = 0 ----------------------|     |
       (double edge spark not requested)   |AND -|  (transition from PIP echo
                                           |     |   to normal spark mode)
      ECHO_TRANS = 1 ----------------------|     |  (echo the PIP edge transition
                                                 |   as a SPOUT transition)
                                                 | ECHO_TRANS = 0
                                                 | Call SPOUT_CALCULATION
                                                 |  (continue PIP processing)
                                                 |
                                                 | --- ELSE ---
                                                 |
      PIP_DOUBLE = 0 ----------------------------|  (normal Spark mode)
                                                 | Call SPOUT_CALCULATION
                                                 | Continue PIP processing
                                                 |
                                                 | --- ELSE ---
                                                 |
                                                 | Continue PIP processing

















                                         8-57

                IGNITION TIMING STRATEGY, PIP DATA CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                         PIP_LOW
                                (during PIP falling edge)


      The spark output routine (SPOUT_CALCULATION)  may  be  called  from  the  PIP
      falling edge processing routine depending on conditions and hardware.


      ECHO_PIP = 1 ------------------------|
       (in echo pip mode)                  |
                                           |
      ECHO_TRANS = 1 ----------------------|AND -| DWLELD = 0
       (in transition)                     |     | ECHO_TRANS = 0
                                           |     |  (echo the PIP transition as a 
      DWLELD = 1 --------------------------|     |   SPOUT transition)
       (falling edge dwell mode)                 | Continue with PIP processing
                                                 |  (transition from falling edge
                                                 |   dwell to PIP echo mode)
                                                 | 
                                                 | --- ELSE --- 
      ECHO_PIP = 1 ------------------------|     |
                                           |AND -|  (transition from normal spark 
      ECHO_TRANS = 1 ----------------------|     |   to PIP echo mode)
                                                 | ECHO_TRANS = 0
                                                 | Continue with PIP processing
                                                 |
                                                 | --- ELSE ---
      ECH0_PIP = 1-------------------------|     |
                                           |     |
      PIP_DOUBLE = 0 ----------------|     |OR --|  (reflect PIP in SPOUT)
       (double edge spark not        |     |     |  (echo the PIP transition as a
        requested)                   |AND -|     |   SPOUT transition)
                                     |           | Continue with PIP processing
      ECHO_TRANS = 1 ----------------|           |
                                                 | --- ELSE ---
                                                 | 
      PIP_DOUBLE = 1 ----------------------------|  (normal spark mode for low 
                                                 |   data rate)
                                                 | Call SPOUT_CALCULATION
                                                 | ECHO_TRANS = 0
                                                 | Continue with PIP processing
                                                 | 
                                                 | --- ELSE ---
                                                 | 
                                                 | Continue with PIP processing















                                         8-58

                 IGNITION TIMING STRATEGY, SPOUT CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    SPOUT CALCULATION


      OVERVIEW

      Two Spout calculation routines are used in the strategy:

      1.  RISING-EDGE SPARK

      2.  FALLING-EDGE SPARK



      RISING-EDGE SPARK

      This method calculates the Spout output time based upon the times of the last
      two  Pip rising edges and assumes that the next Pip rising edge will occur at
      the same delta-time.



                                                   SPOUT
                                                     :
                :                   :                :
                :.......DT12S.......:                :
                :                   :                :
                                                     :
                .---------.         .---------.      :  .----
                |         |         |         |      :  |
      PIP       |         |         |         |      :  |
      SIGNAL    |         |         |         |      :  |
                |         |         |         |      :  |
            ----.         .---------.         .---------.

                :                   :                :
                :                   :..WAITING TIME..:
                :                   :                :
               RE1                 RE2
           (10 deg B)          (10 deg B)





      SPOUT = RE2 + WAITING TIME
            = RE2 + {[(360/ENGCYL) + 10 - SAFTOT] / (360/ENGCYL)} * DT12S


      NOTE:  The current value of  SAFTOT  is  clipped  to  be  between  the  rotor
      registry clips SPLCLP and SPUCLP when it is used in the above calculation.










                                         8-59

                 IGNITION TIMING STRATEGY, SPOUT CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      2.  FALLING-EDGE SPARK

      This method calculates the  spout  output  time  based  upon  the  delta-time
      between  the rising edge and falling edge of the current Pip and assumes that
      the next Pip rising edge will occur at the same delta-time after the  falling
      edge.

      However, a problem exists with the Hall Effect sensor  which  results  in  an
      inaccurate  recognition  of  the  falling  edge.   The  accuracy  varies as a
      function of the sensor's temperature and voltage.   To  compensate  for  this
      inaccuracy,  an  adaptive correction factor, MKAY, is continuously calculated
      and applied to the observed falling edge time to create a  corrected  falling
      edge  time,  FEC, as shown in the sketch below.  The MKAY/SIGKAL calculations
      are described in a separate section.




                                                   SPOUT
                :                 :                  :
                :......HFDLTA.....:                  :
                :                 :                  :
                                                     :
                .-----------------...                :  .----
                |                 | :                :  |
      PIP       |                 | :                :  |
      SIGNAL    |                 | :                :  |
                |                 | :                :  |
            ----.                 .---------------------.

                :                 : :                :
                :                 : :.....WAITING....:
                :                 : :      TIME      :
               RE                FE FEC
              (10 deg B)



      where,
      RE = Rising Edge Time
      FE = Falling Edge Time
      FEC = Corrected Falling Edge Time



      SPOUT = FEC + WAITING TIME

            = FE + {{[(180/ENGCYL) + 10 - SAFTOT] / (180/ENGCYL)} * MKAY

              - (1-MKAY)} * HFDLTA


      NOTE:  The current value of  SAFTOT  is  clipped  to  be  between  the  rotor
      registry clips SPLCLP and SPUCLP when it is used in the above calculation.






                                         8-60

                 IGNITION TIMING STRATEGY, SPOUT CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                          RISING-EDGE vs FALLING-EDGE DECISION

      The decision of which method to use is based upon  the  real  time  which  is
      available  to  do the Spout calculation and scheduling after the falling edge
      of PIP is recognized.  If sufficient  time  is  available,  the  falling-edge
      calculation  will  be  used.   Otherwise, the rising-edge calculation will be
      used.

      The available time to send Spout after receiving the falling edge of  PIP  is
      equal  to  the  distance  in  degrees  between  the two events divided by the
      velocity in degrees/second, or;


                       DISTANCE   (180/ENGCYL) + 10 - SAF
      AVAILABLE TIME = -------- = -----------------------
                       VELOCITY      ENGINE RPM * 6


      SPKSWH and SPKSWL are provided to  allow  the  switch  to  Rising-Edge  spark
      calculation above some RPM when the error in detection of the Falling-Edge of
      PIP  or  other  factors  will  cause  excessive  spark  scatter   using   the
      Falling-Edge  spark  calculation.   Because  SPKWSH  and  SPKSWL  are used in
      foreground, the value entered in VECTOR for each must be in clock-ticks.   To
      convert  the  desired  values  of RPM into clock-ticks, perform the following
      conversions:


      SPKSWH = 60/(ENGCYL * "Clock_Frequency" * upper switch RPM)

      SPKSWL = 60/(ENGCYL * "Clock_Frequency" * lower switch RPM)


      Where Clock_Frequency is 3.0E-6 for 12 MHz and 2.4E-06 for 15 MHz.  The lower
      switch  RPM  should be a minimum of 25 RPM and and a maximum of 250 RPM below
      upper switch RPM, if used.  Both SPKSWL and SPKSWH are normally  set  to  the
      equivalent  of  6375  RPM,  which  will  disable this portion of the decision
      routine.


      NOTE:  SPKSWH and SPKSWL should not be changed without consultation with  the
      ESD Strategy Section.


      Falling edge computer controlled dwell can only be used in falling edge spark
      (PIP_DOUBLE  =  1) and when there is sufficient time to permit the dwell edge
      to be scheduled after the high-to-low transition of PIP.  The period of  time
      between  the  high-to-low transition of PIP and the desired position of spark
      in time is calculated as a temporary value and also saved as NEXT_SPOUT_BETA.


      DEFINITIONS

      INPUTS

      Registers:

       -  CYL_AIR_CHG = Current cylinder aircharge.



                                         8-61

                 IGNITION TIMING STRATEGY, SPOUT CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  DT12S = Last PIP period.

       -  DWELL = Value for system required dwell.

       -  HFDLTA = Last period from PIP up-edge to down-edge.

       -  LAST_HI_PIP = Time of most recent high PIP edge.

       -  MKAY = Half period multiplier to correct for average error caused by Hall
          effect sensor in distributor and armature.

       -  N = Engine RPM.

       -  OLD_BETA = The percentage of PIP period from the reference PIP edge  used
          on the last spark output.

       -  PHFDLT = Previous time elapsed between up-edge to down edge of PIP.

       -  SAF = Final spark advance in degrees.

       -  SAF_MOD = Maximum spark advance when torque modulation is required, deg.

       -  SPKAD = Spark adder for knock.  It is added to SAF and may be positive or
          negative degrees.

       -  SPK_BDL = Borderline detonation limit, deg.

       -  SPK_AIR_CHG = Cylinder air charge used to calculate load for use  in  the
          spark calculations.

       -  SPOUT_ICCD_DELTA = Delta time from PIP down edge to the dwell  edge  when
          in falling edge mode.

      Bit Flags:

       -  CCD_HP = Flag indicating presence of computer controlled dwell hardware.

       -  DOUBLE_EDGE = A foreground (DOS) flag used to indicate the current  spark
          output calculation method.

       -  FLG_SPK_TQM = Torque modulation required flag;  1  ->  torque  modulation
          required.

       -  PIP_DOUBLE = A flag indicating which edge is referenced for spark;  1  ->
          use PIP down-edge, 0 -> use PIP up-edge.

       -  TRSPRPML = Flag indicating use of transient spark; 1 -> Transient  Spark,
          0 -> Normal Spark.

       -  TLOFLG = Transient Spark calculation flag.

       -  TRSRPH = Minimum RPM to enable transient spark routine.

       -  TRSRPM = Hysteresis for TRSRPM.

      Calibration Constants:




                                         8-62

                 IGNITION TIMING STRATEGY, SPOUT CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  DGT3 = Number of degrees per PIP period.

       -  ENGCYL = Number of cylinders per engine revolution (NUMCYL/2); or  number
          of PIPs per engine revolution.

       -  REFC = Number of degrees from PIP high to TDC; nominal is 10 degrees.

       -  SPKLIM = Maximum allowable advance in spark timing between spout outputs,
          Beta.

       -  SPKSWH = Value (in clock ticks) equivalent to a minimum RPM threshold, at
          which  the  strategy  will  time  the  next  SPOUT  during  the  previous
          Rising-Edge of PIP without any adjustments during the Falling-Edge.

       -  SPKSWL = Value (in clock ticks) equivalent to maximum RPM  at  which  the
          strategy   will   correct  the  timing  of  the  next  SPOUT  during  the
          Falling-Edge of PIP.  The difference between SPKSWH and  SPKSWL  provides
          hysteresis.  (NOTE:  SPKSWL is longer than SPKSWH).

       -  SPK_TIP_BDL = Foreground tip-in retard multiplier to BDL clip.

       -  SPLCLP = Lower limit spark clip for rotor registry.

       -  SPUCLP = Upper limit spark clip for rotor registry.

       -  TICKS_DOUBLE = Value (in clock ticks) when there is insufficient time  to
          put  out  spark  from  Rising-Edge  Calculation  to  put  out  spark from
          Falling-Edge.  (Current value = 0.0012 seconds).

       -  TICKS_SINGLE = Value (in clock ticks) indicating  there  is  insufficient
          time  to  put  out spark from Falling-Edge of PIP (Current value = 0.0010
          seconds).



      OUTPUTS

      Registers:

       -  NEXT_SPOUT_ADVANCED = Delta time from PIP down edge to position of  spark
          with maximum spark advance on next cylinder.

       -  NEXT_SPOUT_BETA = The percentage of PIP period (betas) from the reference
          PIP  edge  to  the  signal  on  the  aprk  output (SPOUT) that causes the
          ignition module to discharge the coil across the spark plug.

       -  OLD_BETA = See above.

       -  SAFTOT = Total spark advance including knock and tip-in retard, deg BTDC.

       -  SPOUT = Time to fire spark.

       -  SPK_BDL_CLP = BDL clip to SAFTOT, updated in foreground, deg.

      Bit Flags:

       -  DOUBLE_EDGE = See above.



                                         8-63

                 IGNITION TIMING STRATEGY, SPOUT CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: SPARK_SPOUT_KNOCK_COM6

                                    SPOUT_CALCULATION


      If  torque  modulation  is  required  (FLG_SPK_TQM  =  1)  and  the  normally
      calculated  spark  advance  produces more torque than is required (t_saftot >
      SAF_MOD), SAFTOT is made equal to SAF_MOD.  SAF_MOD is  the  value  of  spark
      advance which produces the maximum allowable torque during a gear shift.

      always ------------------------------| Call "Knock Retard Logic"


      always ------------------------------| t_saftot = SAF + SPKAD 


      FLG_SPK_TQM = 1 ---------------|
                                     |AND -| t_saftot = SAF_MOD
      t_saftot > SAF_MOD ------------|


      The required  spark  advance  will  never  be  greater  than  the  borderline
      detonation  limit  (SPK_BDL).   Therefore,  the  final spark advance is upper
      clipped to that limit.  This value (SPK_BDL_CLP) is updated in foreground  in
      order  to prevent transient detonation.  When the current value of air charge
      is different from the value used  in  the  SAF  calculation,  SPK_BDL_CLP  is
      adjusted  by  an  amount  proportional  to  the difference in air charge.  To
      calibrate SPK_TIP_BDL, record the value of air charge  and  SPK_BDL  at  both
      high  and low loads on a hot engine.  SPK_TIP_BDL should be calibrated to the
      difference in spark advance divided by the difference in air charge.

      SPK_BDL_CLP = SPK_BDL - (CYL_AIR_CHG - SPK_AIR_CHG) * SPK_TIP_BDL


      t_saftot > SPK_BDL_CLP --------------| t_saftot = SPK_BDL_CLP
























                                         8-64

                 IGNITION TIMING STRATEGY, SPOUT CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      The final value of spark advance in  the  temporary  register,  t_saftot,  is
      limited to the range:

                              SPLCLP <= t_saftot <= SPUCLP


      SPLCLP is the lower spark clip.  SPUCLP is the upper spark clip.  SPLCLP  and
      SPUCLP are calibrated to match the rotor registry of the distributor.


      t_saftot < SPLCLP -------------------| t_saftot = SPLCLP
                                           |
                                           | --- ELSE ---
                                           |
      t_saftot > SPUCLP -------------------| t_saftot = SPUCLP


      RUNNING = 1 -------------------|
       (in koer self test)           |AND--| SAFTOT := SAF
      V_MODE_SETUP = 0 --------------|     |
       (not in throttle adjust mode)       | --- ELSE ---
                                           |
                                           | SAFTOT := t_saftot


      always ------------------------------| Call "Low Data Rate Spark"


































                                         8-65

                 IGNITION TIMING STRATEGY, SPOUT CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   LOW DATA RATE SPARK


      Compute the relative position of the  requested  spark  in  relation  to  PIP
      period assuming the current PIP period will be the same as the previous.


      always ------------------------------| new_beta = 
                                           |   (REFC + DGT3 - t_saftot)/DGT3


      Due to physical time constraints for arming the  coil  and  firing  the  next
      spark,  the  largest spark advance increase allowed between consecutive spark
      events is limited to SPKLIM * 360/ENGCYL  degrees.   SPKLIM  is  the  percent
      advance  permitted  per PIP period.  There is no limit on the amount of spark
      advance decrease allowed on consecutive spark events.  NOTE:  SPKLIM  is  set
      to  0.06 and should not be changed without the prior approval of the Ignition
      Department.


      (OLD_BETA - SPKLIM) <= new_beta -----| OLD_BETA = new_beta
                                           |
                                           | --- ELSE ---
                                           |
                                           | new_beta = OLD_BETA - SPKLIM
                                           | OLD_BETA = new_beta


      Determine the position of the spark based on whether there is sufficient time
      to schedule the spark from the PIP down-edge.


      PIP_DOUBLE = 1 ----------------------| Call "BETA_DOUBLE"
                                           |
                                           | --- ELSE ---
                                           |
                                           | temp = new_beta * DT12S
                                           | temp1 = LAST_HI_PIP
                                           | Call "CALCULATE_SPOUT"





















                                         8-66

                 IGNITION TIMING STRATEGY, SPOUT CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                       BETA_DOUBLE


      always ------------------------------| beta = 2 * (new_beta - 0.5)


      Determine if the transient spark correction meets the engine speed and change
      in  PIP  period  criteria.   If  so, correct the latest PIP edge position and
      predict the position of the next PIP edge.  Using this information, the spark
      position can be more accurately positioned.


      N > TRSRPM --------------------|S Q -| TRSPRPML
                                     |
      N < (TRSRPM - TRSRPH) ---|     |
                               |OR --|C 
      (TRSRPM - TRSRPH) < 0 ---|        


      TLOFLG = 1 --------------------|
                                     |AND -| temp1 = (DT12S - 
                                     |     |   (MKAY * PHFDLT))/PHFDLT
      TRSPRPML = 1 ------------------|     | TRSPRPML = 1
                                           |
                                           | --- ELSE ---
                                           |
                                           | temp1 = MKAY


      always ------------------------------| temp = (temp1 * beta) + 
                                           |   (MKAY - 1) * HFDLTA
                                           | Call "CALCULATE_SPOUT"




























                                         8-67

                 IGNITION TIMING STRATEGY, SPOUT CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                     CALCULATE_SPOUT


      Determine if there is sufficient time to permit the scheduling of  the  SPOUT
      transition  from  the  down-edge  of PIP.  TICKS_SINGLE is a non-calibratable
      time of 1.0 millisecond.  TICKS_DOUBLE is  a  non-calibratable  time  of  1.2
      msec.


      DOUBLE_EDGE = 1 ----------------|
                                      |AND -| DOUBLE_EDGE = 0
      temp < TICKS_SINGLE ------|     |     |
                                |OR --|     | 
      SPKSWH > DT12S -----------|           |
                                            | --- ELSE ---
      DOUBLE_EDGE = 0 ----------------|     |
                                      |     |
      (temp - HFDLTA) > TICKS_DOUBLE -|AND -| DOUBLE_EDGE = 1
                                      |
      SPKSWL < DT12S -----------------|


      Based on the current requested position of spark and the  maximum  amount  of
      change  allowed  in  the advance direction, calculate the amount of time from
      the next PIP down edge to the earliest possible spark position  on  the  next
      cylinder.  This term will be used to decide whether there is a need to switch
      modes for dwell.


      CCD_HP = 1 ---------------------| 
                                      |AND -|  NEXT_SPOUT_ADVANCED = 
      PIP_DOUBLE = 1 -----------------|     |   temp - (2 * SPKLIM * HFDLTA)


      Compute the time for turning  on  the  coil  (dwell  edge)  for  the  current
      cylinder  based  on  the spark time and the amount of dwell required to reach
      current limit.


      CCD_HP = 1 ---------------------| 
                                      |AND -| SPOUT_ICCD_DELTA = temp - DWELL
      PIP_DOUBLE = 1 -----------------|


      The value computed in "temp" is the time in ticks from the reference PIP edge
      to the position of the SPOUT low-to-high transition where the spark plug will
      fire.  In the case where spark is scheduled from the down-edge  of  PIP,  the
      value  "temp"  contains the corrections to remove the errors in the down-edge
      position of PIP.  This value "temp" is stored as NEXT_SPOUT_BETA.


      always ------------------------------| NEXT_SPOUT_BETA = temp
                                           | Call SPARK_OUTPUT_SCHEDULING







                                         8-68

             IGNITION TIMING STRATEGY, COMPUTER CONTROLLED DWELL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                COMPUTER CONTROLLED DWELL


      OVERVIEW

      Determine if there is hardware present that will support computer  controlled
      dwell, and if so, set the control flag.



      DEFINITIONS

      INPUTS

      Calibration Constants:

       -  IGN_TYPE = Indicator of ignition type; 0 -> TFI, 1 -> TFI_ICCD.



      OUTPUTS

      Bit Flags:

       -  CCD_HP = Flag indicating presence of computer controlled dwell hardware.



      PROCESS
                           STRATEGY MODULE: SPARK_CCD_HP_COM2


      Determine if there is hardware present that will support computer  controlled
      dwell.


      IGN_TYPE = 0 ---------------------------| CCD_HP = 0
                                              |
                                              | --- ELSE ---
                                              |
                                              | CCD_HP = 1



















                                         8-69

               IGNITION TIMING STRATEGY, BASE DWELL CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 BASE DWELL CALCULATION


      OVERVIEW

      This module is executed when computer controlled hardware  is  present.   The
      amount  of  base  dwell required to charge the coil is related to the battery
      voltage and the values used for DWELLM and DWELLA.  In addition, this  module
      calculates  various  values that are used in the output control of dwell from
      the foreground.  The final item determined within this module are the  values
      for DWLCOR, the correction from the base dwell to the DWELL value, and DWELL.


      DEFINITIONS

      INPUTS

      Registers:

       -  DWELL = Value for system required dwell.

       -  DWLCOR = Interactive correction to dwlbse.

       -  DWLIDM = Measured Coil Rise Time.

       -  VBAT = Battery voltage.

      Bit Flags:

       -  CCD_HP = Flag indicating presence of computer controlled dwell hardware.

       -  DWLELD = Dwell edge leads spark edge; 1 -> falling edge dwell.

       -  NEW_DWLIDM = Flag indicating when new excess dwell can be computed.

       -  UNDSP = Flag indicating Engine mode; 0 -> RUN mode, 1  ->  UNDERSPEED  or
          CRANK mode.

      Non-Calibratable Constants:

       -  FREQ18 = Seconds to clock ticks conversion factor.  1 clock tick  =  3  *
          10E-6 seconds.

      Calibration Constants:

       -  DWELLA = Base Dwell additive element.

       -  DWELLM = Base Dwell multiplicative element.

       -  DWLMAX = Maximum dwell allowed.

       -  DWLMIN = Minimum dwell allowed.

       -  DWL_XS_MIN = Minimum excess dwell in falling edge dwell.

       -  ENGCYL = Number of PIP up edges per revolution; (number of cylinders/2).




                                         8-70

               IGNITION TIMING STRATEGY, BASE DWELL CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  IGN_TYPE = Indicator of ignition type; 0 -> TFI, 1 -> TFI_ICCD.

       -  PACOFF = Offset in RPM-PIP accel bata function.

       -  PACPER = PIP period time switchpoint for change between pipacl equations.

       -  VBAT_DWELL = Minimum battery voltage to use IDM for dwell correction.

       -  VBAT_DWL_HYS = Battery voltage  to  enable  the  use  of  IDM  for  dwell
          correction.



      OUTPUTS

      Registers:

       -  DWELL = See above.

       -  DWLBSE_D = DISPLAY ONLY; base amount of DWELL as a function of  VBAT  and
          TEMDWL, sec.  Initial value = 0.005.

       -  DWLCOR = See above.

       -  DWLMAXT = Maximum time for coil charge.

       -  POFFENG = Foreground value of PACOFF divided by ENGCYL.

       -  PPERENG = Foreground value of PACPER divided by ENGCYL.

      Bit Flags:

       -  NEW_DWLIDM = Flag indicating when new excess dwell can be computed.



























                                         8-71

               IGNITION TIMING STRATEGY, BASE DWELL CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: SPARK_BASE_DWELL_COM1


      1. Calculate the value of base dwell.

      NOTE: Values for DWELLM and DWELLA are established by EPME Ignition
            Department for E-core coils. Changes to these two parameters
            must be approved by the Ignition Department.


      CCD_HP = 0 -----------------------------| Exit this module
                                              |
                                              | --- ELSE ---
                                              |
                                              | dwlbse(ticks) = (1 /(DWELLM *
                                              |   (VBAT - DWELLA))) * FREQ18
                                              |   (ticks/sec)
                                              |
                                              | DWLBSE_D = dwlbse



      2.  Calculate values for use in the maximum PIP acceleration calculation that
      is performed in the foreground:

      always ---------------------------------| PPERENG (seconds) = PACPER / ENGCYL
                                              | POFFENG (betas) = PACOFF / ENGCYL



      3.  Convert the minimum excess dwell value, the minimum dwell and the maximum
      dwell from seconds to ticks:

      always ---------------------------------| dwl_xs_mint = DWL_XS_MIN * 
                                              |      (seconds to ticks conversion) 
                                              | dwlmint = DWLMIN * 
                                              |      (seconds to ticks conversion)
                                              | DWL_MAXT = DWLMAX * 
                                              |      (seconds to ticks conversion)




















                                         8-72

               IGNITION TIMING STRATEGY, BASE DWELL CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      4.  The base dwell will be larger than the coil requires in most cases and in
      the TFI-ICCD system, can be reduced by a correction that uses the information
      supplied by the Ignition Diagnostic Monitor (IDM) signal.  If the IDM  signal
      is  not  present  to  allow  the  calculation of a new DWLIDM, the base dwell
      correction  is  not  altered.   The  calculation  of  dwell  and  base  dwell
      correction are determined by the logic below:


      UNDSP = 1 ------------------------|
       (Not in run mode)                |OR --| DWLCOR = 0
                                        |     | DWELL = dwlbse
      VBAT < VBAT_DWELL ----------|S Q -|     |  (initial dwell)
       (Low battery voltage)      |           | NEW_DWLIDM = 0
                                  |           | 
      VBAT > VBAT_DWL_HYS --------|C          |
       (Slightly higher voltage)              |
                                              | --- ELSE ---
      IGN_TYPE = 1 ---------------------|     |
       (TFI-ICCD hardware)              |     |
                                        |     |
      DWLELD = 1 -----------------------|     |
       (Falling edge dwell mode)        |     |
                                        |     |
      UNDSP = 0 ------------------------|AND -| DWLCOR = DWLCOR +
       (In run mode)                    |     |    [(DWELL - DWLIDM) / 2]
                                        |     | DWELL = dwlbse - DWLCOR
      DWLIDM < (DWELL - dwl_xs_mint) ---|     | NEW_DWLIDM = 0 
       (Too much excess dwell)          |     |
                                        |     | 
      NEW_DWLIDM = 1 -------------------|     |
       (New dwell error available)            |
                                              | --- ELSE ---
      IGN_TYPE = 1 ---------------------|     | 
                                        |     |  
      DWLELD = 1 -----------------------|     |  
                                        |     |  
      UNDSP = 0 ------------------------|AND -| DWLCOR = DWLCOR -
                                        |     |  dwl_xs_mint
      DWLIDM >= DWELL ------------------|     | (Clip DWLCOR to zero as
       (Insufficient charge time)       |     |  a minimum)
                                        |     | DWELL = dwlbse - DWLCOR
      NEW_DWLIDM = 1 -------------------|     | NEW_DWLIDM = 0
                                              |
                                              | --- ELSE ---
                                              |
      IGN_TYPE = 1 ---------------------------| DWELL = dwlbse - DWLCOR
                                              | NEW_DWLIDM = 0


      5.  Prevent the dwell value from being computed below  a  calibratable  value
      by:



      DWELL < dwlmint ------------------------| DWELL = dwlmint





                                         8-73

                 IGNITION TIMING STRATEGY, DWELL_CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    DWELL_CALCULATION
                        (called from various foreground routines)


      OVERVIEW

      This  module  calculates  the  time  from  the  spark  firing  signal  (SPOUT
      low-to-high)  to the SPOUT high-to-low signal.  For ignition systems that use
      the  SPOUT  high-to-low  signal  to  indicate  start  to  charge,   (computer
      controlled  dwell),  the  logic  and  calculations  attempt  to  minimize the
      charging time consistant with known and possible future engine conditions  at
      the time of the calculation.



      DEFINITIONS

      INPUTS

      Registers:

       -  DT12S = The value, in clock ticks, of the current pip period.

       -  DWELL = Value for system required dwell.

       -  DWLMAXT = Maximum time for coil charge.

       -  HFDLTA = Most recent PIP firs half period.

       -  POFFENG = Foreground value of PACOFF divided by ENGCYL.

       -  PPERENG = Foreground value of PACPER divided by ENGCYL.

      Bit Flags:

       -  CCD_HP = Flag indicating presence of computer controlled dwell hardware.

       -  DWLELD = Dwell edge leads spark edge 1 <- falling edge dwell.

      Calibration Constants:

       -  DWLTSW = Time switchpoint for maximum percentage dwell.

       -  IGN_TYPE = Indicator of ignition type; 0 -> TFI, 1 -> TFI_ICCD.

       -  MINDLA = Maximum percent of PIP period not charging coil for PIP  periods
          greater than DWLTSW.

       -  MINDLB = Maximum percent of PIP period not charging coil for PIP  periods
          less than DWLTSW.

       -  PACLIM = PIP period acceleration factor for dwell.

       -  PACSLO = Slope in RPM-PIP accel beta function.






                                         8-74

                 IGNITION TIMING STRATEGY, DWELL_CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  SPKLIM = Percent of "crank degrees between PIPs" used  to  determine  the
          maximum  spark advance increase allowed between consecutive spark events.
          Do NOT calibrate higher than 0.06 without Ignition  Department  approval.
          Maximum  spark  advance increase between events varies with the number of
          cylinders; Maximum increase = SPKLIM * 360/ENGCYL.

          For 4 cyl; 0.06 * 360/2 = 10.8 degrees
              6 cyl; 0.06 * 360/3 = 7.2 degrees
              8 cyl; 0.06 * 360/4 = 5.4 degrees



      OUTPUTS

      Registers:

       -  PIPACL_D = DISPLAY ONLY; percentage change in PIP under  acceleration  of
          8K RPM/sec.

       -  SPOUT_LOW_DELTA = Delta time from spark edge to dwell edge.




      PROCESS
                         STRATEGY MODULE: SPARK_DWELL_CALC_COM1


      1.  Calculate the percent change in PIP period under maximum acceleration for
      use  in  the calculation of the possible dwell requirement.  The acceleration
      factor is comprised of two linear functions  which  can  be  related  to  the
      current  PIP  period.   The decision on which function to use is based on the
      number of cylinders in the engine and the possible acceleration rate for that
      engine.   There  is a clip on the maximum amount of acceleration factor since
      as the engine speed goes down the amount of time required to protect for  any
      acceleration increases expontentially, and the amount of time desired for the
      coil to be in current limit has a finite limit.


      always ----------------------------| dt12s_sec = DT12S * (ticks to 
                                         |  seconds conversions)


      CCD_HP = 1 ------------------|        
       (ICCD hardware present)     |        
                                   |        
      DWLELD = 0 ------------------|AND -| pipacl = PACSLO * dt12s_sec - POFFENG
       (not in ICCD mode)          |     | Clip pipacl to 0 < pipacl <= PACLIM
                                   |     | dwell_extra = [(SKPLIM + pipacl)
      dt12s_sec >= PPERENG --------|     |  * DT12S] + DWELL 
       (RPM below accel bkpt)            |
                                         | --- ELSE ---
      CCD_HP = 1 ------------------|     |
                                   |AND -| pipacl = 2 * dt12s_sec
      DWLELD = 0 ------------------|     | dwell_extra = [(SPKLIM + pipacl)
                                         |  * DT12S] + DWELL 


      unconditionally -------------------| PIPACL_D = pipacl

                                         8-75

                 IGNITION TIMING STRATEGY, DWELL_CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      2.  Under the most adverse conditions, the ignition department has determined
      that there is a maximum amount of dwell.  This amount is the clip, DWLMAX.


      CCD_HP = 1 ------------------| 
                                   |AND -| dwell_extra = DWLMAXT
      dwell_extra > DWLMAXT -------|         
       (too much dwell)



      3.  In Rising edge computer controlled dwell, it is necessary to schedule the
      SPOUT  down  or  dwell edge from the SPOUT up or spark edge.  The logic below
      decides if the PIP period minus the dwell period (i.e.  time coil is off)  is
      greater  than  some  value,  typically 50% at low speeds and 20% at all other
      speeds, and extends the amount of time the coil is off until  the  percentage
      is within these limits.


      CCD_HP = 1 ------------------|
                                   |
      DWLELD = 0 ------------------|
       (rising edge mode)          |
                                   |AND -| SPOUT_LOW_DELTA = MINDLA * DT12S
      dt12s_sec > DWLTSW ----------|     | (extend coil off time for low speeds)
       (RPM below switchpoint)     |     |
                                   |     |
      [(DT12S - dwell_extra)/      |     |
         DT12S] <= MINDLA ---------|     |
       (coil off percentage too short)   |
                                         | --- ELSE ---
      CCD_HP = 1 ------------------|     |
                                   |     |
      DWLELD = 0 ------------------|AND -| SPOUT_LOW_DELTA = MINDLB * DT12S
                                   |     |  (extend coil off time)
      [(DT12S - dwell_extra)/      |     |
         DT12S] <= MINDLB ---------|     |
                                         | --- ELSE ---
      CCD_HP = 1 ------------------|     |
                                   |AND -| SPOUT_LOW_DELTA = DT12S - dwell_extra
      DWLELD = 0 ------------------|     |
                                         | --- ELSE ---
                                         |
      IGN_TYPE = 0 ----------------------| SPOUT_LOW_DELTA = HFDLTA
       (TFI hardware present)            |
                                         | --- ELSE ---
                                         |
                                         | Do not calculate value for 
                                         |  SPOUT_LOW_DELTA











                                         8-76

               IGNITION TIMING STRATEGY, KNOCK CONTROL STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 KNOCK CONTROL STRATEGY


      OVERVIEW

      The knock control strategy consists of many  different  sub-strategy  pieces.
      Some  are  executed in background, but most are executed in foreground, since
      knock is a PIP period related event.  The sub-strategies are:


      1.  RETARD AND WINDOW CALCULATIONS (background)  This  logic  determines  the
          knock  window  position  and  window  width  as  well as potential retard
          increment in background.  This is done to ease foreground load.

      2.  SPARK ADVANCE LOGIC (background) This logic advances the  SPKAD  term  to
          the advance limit (knk_advlim) at a calibratable rate.

      3.  KNOCK STRATEGY ENABLE LOGIC (background) This  logic  determines  whether
          engine conditions are correct for using the knock strategy.

      4.  KNOCK WINDOW OUTPUT (PIP  rising  edge)  This  logic  outputs  the  knock
          window,  KTS  output,  at  the background determined location relative to
          PIP.

      5.  KNOCK DETECTION LOGIC (PIP  rising  edge)  This  logic  determines  if  a
          cylinder is knocking by processing the knock indicated input.

      6.  KNOCK RETARD LOGIC (PIP rising edge) This logic retards  the  SPKAD  term
          based on knock sensed by the knock detection logic.



      The logic segments that follow match the order of  software  execution.   The
      numbers point to the above descriptions.


























                                         8-77

               IGNITION TIMING STRATEGY, KNOCK CONTROL STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  DT12S = Last PIP period.

       -  ECT = Engine coolant temperature, deg F.

       -  KI = Knock indicated, knock level is  higher  than  noise  level;  called
          KNK_HIGH in code.

       -  KNK_ADVLIM_D = DISPLAY ONLY; knock advance limiter from FN1135.

       -  KNK_HIGH = Knock level input flag.

       -  KWCTR = Cancel window counter incorporated each PIP period.

       -  LOAD = Universal normalized load parameter.

       -  N = Engine speed, RPM.

       -  PIP_HIGH = PIP input level.

       -  RETINC = Calculated as a function of RPM and is  subtracted  from  SPKAD.
          (positive degrees)

       -  SAF = Final spark advance in degrees.

       -  SAPW_HI_FLG = A flag indicating which PIP  edge  to  calculate  the  main
          spark angle pulsewidth; 1 -> PIP up edge, 0 -> PIP dpown edge.

       -  SPKAD = Spark adder term.  It  is  added  to  SAF,  may  be  positive  or
          negative degrees.

       -  TP = Instantaneous throttle position, counts.

       -  TP_REL = Relative throttle position, counts.

       -  TSLADV = Free-running millisecond timer which counts the time  since  the
          spark was last advanced by the KNOCK Strategy.

      Bit Flags:

       -  KNOCK_DETECTED = 1 -> Knock occurred in current PIP half period.

       -  KNOCK_ENABLED = Knock Strategy enabled.

       -  KNOCK_OCCURRED = 1 -> (in  the  knock  routine)  knock  occurred  in  the
          current or last PIP period.

       -  NEW_PIP = New PIP rising edge occurred this background loop.

       -  RUNNING = Flag which indicates that idle speed  is  being  controlled  by
          Engine  Running  VIP;  1  ->  in  Engine  Running VIP, 0 -> not in Engine
          Running VIP.



                                         8-78

               IGNITION TIMING STRATEGY, KNOCK CONTROL STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  ECTNOK = Disable Knock control below this value of ECT.

       -  FN071 = Load Normalizing function; used for table lookup.
                  Input = LOAD
                  Output = Normalized load

       -  FN070 = Engine speed Normalizing function; used for table lookup.
                  Input = N
                  Output = Normalized N

       -  FN070F = Engine speed Normalizing function; used  for  table  lookup  for
          FN1144B.
                  Input = N
                  Output = Normalized N

       -  FN1135(N,LOAD) = Knock advance limit table as a function of RPM and LOAD.
          If  FN1135  is  calibrated  to  0, the knock strategy will not be able to
          advance spark past SAF.  FN1135 is an 8 X 10 table and shares normalizing
          functions  with  all  the  other  spark  tables.   FN1135  is  stored  as
          KNK_ADVLIM_D for ease of development.
                  X = FN070(N)
                  Y = FN071(LOAD)

       -  FN1144B = Variable knock threshold window open time, ticks.
                  X = FN070F(N)
                  Y = FN071(LOAD)

       -  FN143A = Retard increment versus RPM, deg.

       -  FN145A = Variable Knock threshold window position.  Input = Engine  Speed
          in RPM, output = fraction of PIP period.

       -  FN146B = Spark advance Rate versus RPM, sec/deg.

       -  KIHP = Knock Hardware Present Switch; 1 -> Knock Sensor present.

       -  LODNOK = Minimum load for knock control.

       -  RETLIM = Maximum degrees of retard control.

       -  RPMCNL = Threshold RPM below which the window is always open.

       -  RPMMIN = Disable Knock control below this RPM.

       -  WINCLD = Number of PIPs threshold window is to be closed.

       -  WINLEN = Minimum amount of time threshold window is open, msec.

       -  WOPEN = Position of window opening, Beta.

       -  Y = Normal Part throttle spark multiplier.







                                         8-79

               IGNITION TIMING STRATEGY, KNOCK CONTROL STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  KWCTR = See above.

       -  RETINC = Calculated as a function of RPM and is  subtracted  from  SPKAD.
          (positive degree)

       -  SPKAD = Spark adder term.  It  is  added  to  SAF,  may  be  positive  or
          negative degrees.

       -  TSLADV = Free-running millisecond timer which counts the time  since  the
          spark was last advanced by the KNOCK Strategy.

       -  WINDOW_BETA = Percent of PIP period to issued knock window, percent.

       -  WINDOW_DELTA = Knock window width, clock ticks.

      Bit Flags:

       -  KNOCK_DETECTED = See above.

       -  KNOCK_OCCURRED = See above.




































                                         8-80

               IGNITION TIMING STRATEGY, KNOCK CONTROL STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: SPARK_CYL_KNOCK_COM4


                        Background module KNK_WINDOW_CALCULATION
                            (called from background manager)


      RUNNING = 1 -----------------------------| Exit KNK_WINDOW_CALCULATION MODULE
                                               |  (note that WINDOW_DELTA is
                                               |   modified during Engine Running 
                                               |   VIP at the start of the Goose 
                                               |   Test to V_KTS)



                             RETARD AND WINDOW CALCULATIONS


      NEW_PIP = 1 -----------------------------| WINDOW_BETA = WOPEN + FN145A(N)
       (new PIP came in this background loop)  |  (calculate window opening as a
                                               |   of PIP for foreground)
                                               | WINDOW_DELTA = WINLEN + 
                                               |                  FN1144B(N,LOAD)
                                               |  (calculate window width in
                                               |   clock ticks for foreground)
                                               | RETINC = FN143A(N)
                                               |  (determine retard amount in case
                                               |   of knock)































                                         8-81

               IGNITION TIMING STRATEGY, KNOCK CONTROL STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   SPARK ADVANCE LOGIC


      NEW_PIP = 1 -----------------------|
                                         |
      KNOCK_ENABLED = 1 -----------------|AND -| SPKAD = SPKAD + 0.25 deg
                                         |     | Clip SPKAD to FN1135(N,LOAD) 
      TSLADV >= FN146B/4 ----------------|     |   as a maximum
                                               | TSLADV = TSLADV - FN146B/4


      NOTE:  FN1135 is stored as KNK_ADVLIM_D for ease of development.


      If the Knock Strategy is enabled, the spark adder SPKAD is  incremented  0.25
      degrees  every  FN146B/4  seconds.   SPKAD  is clipped to FN1135(N,LOAD) as a
      maximum.  If FN1135 = 0, the KNOCK STRATEGY will not advance the spark beyond
      SAF.

      NOTE:  If the Knock Strategy is enabled and no cylinders  are  knocking,  the
      spark  to each cylinder will advance to SAF + FN1135 If a particular cylinder
      is knocking,  the  Retard  Strategy  will  tend  to  dominate  the  advancing
      mechanism.   To  insure that the spark to knocking cylinders is retarded more
      than the strategy can advance it, FN146B should be greater than or  equal  to
      1/FN143A.   FN146B  is  in  degrees  of  advance per second while FN143 is in
      degrees of retard per PIP, therefore, FN143 must be converted to degrees  per
      second  at  a  given  RPM  for a valid comparison to be made.  When FN146B is
      large, then the spark advance rate is small.  For example, FN146B  =  0.5  is
      equivalent  to  a  spark  advance  rate  of  2 degrees/sec.  FN146B = 0.25 is
      equivalent to spark advance rate of 4 degrees/sec.






























                                         8-82

               IGNITION TIMING STRATEGY, KNOCK CONTROL STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               KNOCK STRATEGY ENABLE LOGIC


      KIHP = 1 --------------------------|
                                         |
      LOAD > LODNOK ---------------------|
                                         |AND -| KNOCK_ENABLED = 1
      ECT > ECTNOK ----------------------|     |
                                         |     |
      N > RPMMIN ------------------------|     | 
                                               | --- ELSE ---
                                               |
      KNOCK_ENABLED = 1 -----------------------| KNOCK_ENABLED = 0
                                               | SPKAD  = 0
                                               | TSLADV = 0


      LODNOK, ECTNOK, and RPMMIN define the minimum engine operating conditions  to
      enable the Knock Control Strategy.









































                                         8-83

               IGNITION TIMING STRATEGY, KNOCK CONTROL STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                KNOCK WINDOW OUTPUT (KTS)


      The software periodically opens a  window  which  allows  a  Noise  threshold
      charging  pulse called KTS to raise the Knock Threshold level of the Hardware
      circuit.  The window always opens once per PIP period unless the RPM  exceeds
      RPMCNL.   The  engine  developer defines the window during which the charging
      pulse is on by means of two fox functions and two calibration constants.  The
      pulsewidth  of  KTS  defines  the period of time that the capacitor in the RC
      circuit will be charged.  Wide KTS pulses cause the  threshold  to  increase.
      The  timing  of  the  KTS  pulse  must coincide with the optimum non-knocking
      portion of the PIP period over all engine  RPM.   Since  Knock  tends  to  to
      extend  longer  through  the  PIP  period  with increasing RPM, the KTS pulse
      should be timed late in the current PIP period or early in the following  PIP
      period (95-110% PIP period).

      Noise threshold elevation  will  result  when  the  capacitor  charging  rate
      greatly  exceeds  the  discharge  rate or when the KTS pulse is output during
      conditions of Knock.  When knock occurs  at  high  RPM,  the  charging  pulse
      window  is  kept closed for WINCLD PIP periods to prevent elevating the NOISE
      threshold to the level of KNOCK, thereby preventing the EEC hardware  circuit
      from sensing additional spark knock.

      The calculations shown below are checked every rising edge of PIP:

      The pulsewidth of KTS is equal to:


                WINDOW_DELTA = WINLEN + [FN1144B(N,LOAD)] in clock ticks


      Where, WINLEN is minimum KTS pulsewidth, clock ticks.


                           FN1144B(N,LOAD) is in clock ticks.

                          DT12S is last PIP period, clock ticks


      The timing of KTS is equal to:


                  WINDOW_BETA = WOPEN + FN145(N), percent of PIP period


      Where, WOPEN is the minimum delay after the rising edge of PIP before the KTS
      pulse will be output.

      FN145(N) is a fraction of PIP period, BETA Units.


      Note:  The KTS pulse is output even if the  knock  strategy  is  disabled  to
      refresh  the  threshold  level  in  the event that the Knock strategy becomes
      enabled.  The absence of the KTS pulse for more than a few PIP periods  would
      result in full retard upon entering Knock strategy.





                                         8-84

               IGNITION TIMING STRATEGY, KNOCK CONTROL STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  KNOCK DETECTION LOGIC
                   Foreground module SINGLE_KNOCK (EOS_WINDOW_OUTPUT)


      KIHP = 0 --------------------------------| No knock sensor
                                               | Do not output KTS
                                               |
                                               | --- ELSE ---
      N <= RPMCNL -----------------------|     |
                                         |     |
      KWCTR >= WINCLD -------------------|     |
                                         |OR --| KWCTR = 0
      KNOCK_DETECTED = 0 ----------|     |     | Open window at calculated time  
       (no KNOCK in current        |     |     | 
        PIP half period)           |     |     |
                                   |AND -|     |
      NOT SIGNATURE PIP -----------|           |
                                   |           |
      KWCTR = 0 -------------------|           |
                                               | --- ELSE ---
                                               |
                                               | Increment KWCTR
                                               | Do not open window


      RPMCNL is the threshold RPM below which  the  WINDOW  is  always  open.   The
      WINDOW  is  not  opened  during  a  signature  PIP  period  (if Signature PIP
      distributor is present), or if KNOCK has been detected during the current PIP
      first half period.


                        (foreground segment located in PIP_DATA)

      KNOCK_DETECTED = 1 ----------------|
                                         |AND -| KNOCK_OCCURRED = 1
      KNK_HIGH = 1 ----------------------|     |
                                               | --- ELSE ---
      KNOCK_DETECTED = 1 ----------------|     |
                                         |AND -| KNOCK_OCCURRED = 1
      KNK_HIGH = 0 ----------------------|     | KNOCK_DETECTED = 0
       (KI currently indicates NO KNOCK)       |
                                               | --- ELSE ---
                                               |
                                               | KNOCK_OCCURRED = 0


                       Foreground module SINGLE_KNOCK (EOS_INPUT)

      KIHP = 0 --------------------------------| Prevent knock interrupts
                                               | from being recognised
                                               |
                                               | --- ELSE ---
                                               |
      KNK_INT = 1 -----------------------------| Service knock input handler
      (Knock input transition occurred)        | KNOCK_DETECTED = 1
                                               | VIP_KNOCK = 1
                                               | KNK_INT = 0



                                         8-85

               IGNITION TIMING STRATEGY, KNOCK CONTROL STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 KNOCK SIGNAL DETECTION


              :                                       :
              :............. PIP PERIOD ..............:
              :                                       :

              ---------------------                   ----------
              |                   |                   |
      PIP     |                   |                   |
              |                   |                   |
         ------                   ---------------------

              :                                        :
              :<-- WINDOW_BETA = WOPEN + FN145A(N) --> :
              :                                        :

               ------                                  ------
               |    |                                  |    |
      KTS  --->|    |<--- WINDOW_DELTA =               |    |
               |    |     WINLEN + [FN1144B(N,LOAD)]   |    |
      ----------    ------------------------------------    ----

               :    :                                  :    :
               :    :                                  :    :
               :    :                                  :    :
               :    :                **                :    :
               :    :               *  *               :    :
               :    :              *    *              :    :
               :    :             *      *             :    :
               :    :-------     *        *            :    :---
      NOISE    :   /:       ----*--        *           :   /:
      -        :  / :          *   -------  *          :  / :
       ----    : /  :         * :         ---*---      : /  :
         -------/   :        *  :             *  -------/   :
               :    :       *   :            : *       :    :
               :    :      *    :            :  *      :    :
               :    :     *     :            :   *     :    :
      KNOCK    :    :    *      :            :    *    :    :
      SENSOR   :    :   *       :            :     *   :    :
           *************        :            :      ************
                                :            :
                                :            :
                                :            :
                                :            :

                                --------------
                                |            |
      KI                        |            |
                                |            |
          -----------------------            -------------------

                        (IF KNOCK > NOISE, KI=1; OTHERWISE, KI=0)







                                         8-86

               IGNITION TIMING STRATEGY, KNOCK CONTROL STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


              |<--"LAST PIP PERIOD"-->|
              _____________           _____________           ____
              |           |           |           |           |
              |           |           |           |           |
              |           |           |           |           |
      PIP  ___|           |___________|           |___________|

              |<-----------A------->|

             _____                   _____
             |   |                   |   |
             |<B>|         |         | | |         |           |
             |   |                   |   |
       KTS  _|   |___________________|   |__________________________



                     ___________ 
                     |         | 
               |     |     |   |       |           |           |
                     |         |
       KI   ---------|         |------------------------------------


                     ___________________
                     |                 |
                     |                 |
               |     |     |           |           |
       KNOCK ________|                 |_______________________|____
       DETECTED

                                       _________________________
                                       |                       |
               |           |           |           |           |
                                       |                       |
       KNOCK __________________________|                       |_____
       OCCURRED


                     Where A = (WOPEN + FN145) * ("LAST PIP PERIOD")
                               B = WINLEN + FN1144B = KTS


      Note:  Range of A is typically 90 - 110 % of PIP period.
















                                         8-87

               IGNITION TIMING STRATEGY, KNOCK CONTROL STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   KNOCK RETARD LOGIC


      Whenever the Knock strategy is enabled, the  software  calculates  RETINC  in
      background  as  a  function  of  RPM.   RETINC  is subtracted from SPKAD.  To
      prevent excessive retard (perhaps due to erroneous knock sense) each SPKAD is
      clipped to RETLIM.


                   (foreground segment in HDR_SPOUT_KNOCK_CALCULATION)


      KNOCK_ENABLED = 1 -----------------|
                                         |AND -| SPKAD = SPKAD - RETINC     
      KNOCK_OCCURRED = 1 ----------------|     | (Clip min. SPKAD to RETLIM)     
       (knock sensed during last PIP      
        Period)                           



                                   SUMMARY AND EXAMPLE


      The final value of spark advance is calculated by the EOS  immediately  prior
      to calculating the waiting time:


                        CALCULATED SPARK OUT (n+1) = SAF + SPKAD
































                                         8-88

      IGNITION TIMING STRATEGY, TORQUE MODULATION BACKGROUND CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                        TORQUE MODULATION BACKGROUND CALCULATION


      OVERVIEW

      The transmission strategy calculates the maximum  torque  required  during  a
      shift  (TQ_LEVEL).   The  ratio between TQ_LEVEL and TQ_MBT is calculated and
      used in FN799 to calculate the amount spark must  be  retarded  from  MBT  in
      order  to  achieve the required torque.  The actual spark advance required to
      give the required torque (SAF_MOD) is then  calculated  by  subtracting  that
      amount from the MBT spark advance.



      DEFINITIONS

      INPUTS Registers:

       -  SPK_M_B_T = Spark advance required to achieve maximum brake torque, deg.

       -  TQ_MBT = Maximum net torque that could be produced by the engine, ft-lbs.

       -  TQ_LEVEL = Maximum torque required by transmission for torque modulation,
          ft-lb.

      Bit Flags:

       -  FLG_TQM_ENA = Flag to signal transmission is sufficiently  warmed  up  to
          permit full control over spark retard via torque modulation.

      Calibration Constants:

       -  FN799 = Transfer function which returns a spark  retard  from  MBT  as  a
          function of desired torque ratio, deg.

       -  TQM_COLD_CLP = Maximum delta  spark  clip  for  torque  modulation;  cold
          powertrain, deg.

       -  TQM_MAX_CLP = Maximum delta spark clip for torque modulation, deg.



      OUTPUTS

      Registers:

       -  SAF_MOD = Maximum total spark advance during torque modulation, deg.













                                         8-89

      IGNITION TIMING STRATEGY, TORQUE MODULATION BACKGROUND CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: SPARK_TQM_BG_COM1


      always --------------------------| tr_mod = TQ_LEVEL / TQ_MBT
                                       | delta_mod = FN799(tr_mod)


      FLG_TQM_ENA = 0 -----------|  
                                 |AND -| SAF_MOD = SPK_M_B_T + delta_mod
      delta_mod > TQM_COLD_CLP --|     |
                                       | --- ELSE ---
                                       |
      FLG_TQM_ENA = 0 -----------------| SAF_MOD = SPK_M_B_T + TQM_COLD_CLP
                                       | (clip spark if powertrain is cold)
                                       |
                                       | --- ELSE ---
      FLG_TQM_ENA = 1 -----------|     |
                                 |AND -| SAF_MOD = SPK_M_B_T + delta_mod
      delta_mod > TQM_MAX_CLP ---|     |
                                       | --- ELSE ---
                                       |
      FLG_TQM_ENA = 1 -----------------| SAF_MOD = SPK_M_B_T + TQM_MAX_CLP





































                                         8-90












                                      CHAPTER 9

                                     EGR STRATEGY

















































                                         9-1

                           EGR STRATEGY, EGR SELECT - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                       EGR SELECT


      OVERVIEW

      This strategy provides the capability to  select  one  of  two  EGR  systems:
      Sonic EGR or PFE EGR.

      The EGR strategy is divided into:

                1) EGR SELECT                                 -       Common
                2) EGR ENABLE                                 -       Common
                3) DESIRED EGR MASS FLOW                      -       Common
                4) PRESSURE FEEDBACK EGR                      -       Unique
                      a) PFE - CONTROL ERROR                  -       Unique
                      b) PFE - CONTROL POINT DETERMINATION    -       Unique
                      c) PFE - CONTROL INPUT CALCULATION      -       Unique
                      d) PFE - DELIVERED EGR MASS FLOW        -       Unique
                5) SONIC EGR                                  -       Unique
                      a) SONIC - CONTROL ERROR                -       Unique
                      b) SONIC - CONTROL POINT DETERMINATION  -       Unique
                      c) SONIC - CONTROL INPUT CALCULATION    -       Unique
                      d) SONIC - DELIVERED EGR MASS FLOW      -       Unique
                6) ACTUAL PERCENT EGR                         -       Common
                7) EVR CONTROLLER (EGRDC CALCULATION)         -       Common
                8) DUTY CYCLE GENERATION                      -       Common


      DEFINITIONS

      Registers:

       -  AMPEM = Air mass flow plus EGR mass flow.

      Calibration Constants:

       -  PFEHP = The calibrator selects the desired EGR system  by  setting  PFEHP
          equal  to  1 (for Pressure Feedback EGR if the strategy contains it); or,
          to zero (for Sonic EGR if the strategy contains it); or to 2, to  disable
          both EGR strategies.




















                                         9-2

                           EGR STRATEGY, EGR SELECT - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  EGRACT = Actual EGR percent = 100 * EM / AMPEM.

       -  EGRDC = Desired EVR duty cycle, % / 100.

       -  EM = Actual EGR mass flow, lb/min.

      Bit Flags:

       -  EGRHP_FLG = Set when EGR strategy  is  being  used  and  clear  when  EGR
          strategy is not being used.

       -  PFEHP_FLG = Set when PFE EGR is used and clear when Sonic EGR is used.



      PROCESS 
                            STRATEGY MODULE: EGR_SELECT_COM3

      The desired EGR strategy is selected via the PFEHP calibration parameter.

      PFEHP = 0 -------------------------------| EGRHP_FLG = 1
       (Sonic EGR)                             | PFEHP_FLG = 0
                                               |
                                               | --- ELSE ---
                                               |
      PFEHP = 1 -------------------------------| EGRHP_FLG = 1
       (Pressure Feedback EGR)                 | PFEHP_FLG = 1
                                               |
                                               | --- ELSE ---
                                               |
                                               | (No EGR)
                                               | EGRHP_FLG = 0
                                               | No change to PFEHP_FLG



      EGRHP_FLG = 1 ---------------------|     | (Sonic EGR)
                                         |AND -| EGRDC = egrdc_sel
      PFEHP_FLG = 0 ---------------------|     |
                                               | --- ELSE ---         
                                               |
      EGRHP_FLG = 1 ---------------------|     | (Pressure Feedback EGR)
                                         |AND -| EGRDC = egrdc_sel
      PFEHP_FLG = 1 ---------------------|     |
                                               | --- ELSE ---
                                               |
                                               | (no EGR)
                                               | EGRDC = 0
                                               | EM = 0
                                               | EGRACT = 0






                                         9-3

                           EGR STRATEGY, EGR ENABLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                       EGR ENABLE


      OVERVIEW

      The following logic describes the operating conditions during  which  EGR  is
      enabled.   It  includes the PFEHP calibration switch.  When PFEHP = 2, no EGR
      is required and the EGR strategy is always disabled.  If PFEHP = 1,  the  PFE
      strategy is used.



      DEFINITIONS

      INPUTS

      Registers:

       -  APT = Throttle Mode Flag; -1 -> Closed Throttle, 1 -> Wide Open Throttle,
          0 -> Part Throttle.

       -  ATMR1 = Time since start (time since exiting Crank mode), sec.

       -  ATMR2 = Time since ECT became greater than TEMPFB, sec.

       -  TCSTRT = Temperature of ECT at cold start, deg F.

      Bit Flags:

       -  AFMFLG = Flag indicating that ACT sensor has failed.

       -  BFMFLG = Flag indicating that BP sensor has failed; 1 -> failure.

       -  CFMFLG = Flag indicating that ECT sensor is in/out of range.

       -  CRKFLG = Flag indicating engine status; 1 -> Crank mode.

       -  EFMFLG = Flag indicating that EVP EGR sensor has failed.

       -  MFMFLG = Flag indicating that MAF sensor has failed.

       -  TFMFLG = Flag indicating that TP sensor has failed.

      Calibration Constants:

       -  CTHIGH = Hot Start Minimm Engine Coolant Temperature, deg F.

       -  CTLOW = Cold Start maximum ECT, deg F.

       -  EGRTD1 = EGR time delay (TCSTRT <= CTLOW) versus ATMR1, sec.

       -  EGRTD2 = EGR time delay (CTLOW < TCSTRT < CTHIGH) versus ATMR1, sec.

       -  EGRTD3 = EGR time delay (TCSTRT >= CTHIGH) versus ATMR1, sec.

       -  EGRTD4 = EGR time delay (TCSTRT <= CTLOW) versus ATMR2, sec.




                                         9-4

                           EGR STRATEGY, EGR ENABLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  EGRTD5 = EGR time delay if CTLOW < TCSTRT < CTHIGH versus ATMR2, sec.

       -  PFEHP = Switch to select EGR strategy; 0 -> use Sonic strategy, 1 ->  use
          PFE strategy, 2 -> do not use any EGR.



      OUTPUTS

      Bit Flags:

       -  EGREN = Flag which indicates EGR enabled if set to 1.

       -  V_EGR_RDY = Continuous EGR test egr ready flag (latched)














































                                         9-5

                           EGR STRATEGY, EGR ENABLE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: EGR_ENABLE_COM3


      TCSTRT >= CTHIGH -----------|
                                  |AND -|
      ATMR1 >= EGRTD3 ------------|     |
                                        |
      CTLOW < TCSTRT < CTHIGH ----|     |
                                  |AND -|
      ATMR1 >= EGRTD2 ------|     |     |OR --|
                            |AND -|     |     |
      ATMR2 >= EGRTD5 ------|           |     |
                                        |     |
      TCSTRT <= CTLOW ------------|     |     |
                                  |     |     |
      ATMR1 >= EGRTD1 ------|     |AND -|     |
                            |AND -|           |
      ATMR2 >= EGRTD4 ------|                 |
                                              |
      PFEHP <> 2 -----------------------------|
       (EGR hardware present)                 |
                                              |AND -| egr_rdy = 1            
      CRKFLG = 0 -----------------------------|     | V_EGR_RDY = 1          
                                              |     |  (set flag to initiate 
      AFMFLG = 0 -----------------------|     |     |   EGR self test as     
                                        |     |     |   applicable)          
      CFMFLG = 0 -----------------------|     |     |                        
                                        |     |     |
      EFMFLG = 0 -----------------------|     |     |
                                        |AND -|     |
      MFMFLG = 0 -----------------------|           |
                                        |           |
      TFMFLG = 0 -----------------------|           |
                                        |           |
      BFMFLG = 0 -----------------------|           |
                                                    | --- ELSE ---
                                                    |
                                                    | egr_rdy = 0


      egr_rdy = 1 ----------------------------|
                                              |AND -| EGREN = 1 (egr enabled)
      APT = 0 --------------------------------|     |
       (part throttle)                              | --- ELSE ---
                                                    |
                                                    | EGREN = 0 (egr disabled)













                                         9-6

                     EGR STRATEGY, DESIRED EGR MASS FLOW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  DESIRED EGR MASS FLOW


      OVERVIEW

      If EGR is enabled, the base amount of EGR to be added is determined from  two
      8  X  10  tables  the  format of which is identical to that used for the PART
      THROTTLE spark timing determinations.

      The table values are a function of engine speed N and LOAD.

      The base amount of EGR can be adjusted by several EGR modulators  to  reflect
      special engine operating conditions.

      The amount of EGR to be added is determined as shown below.


      DEFINITIONS

      INPUTS

      Registers:

       -  AM = Air mass flow, lb/min.

       -  EGREN = Flag which indicates EGR enabled if set to 1.

       -  TCSTRT = Temperature of ECT at cold start, deg F.

       -  TSEGRE = Accumulated time EGR is enabled.

      Calibration Constants:

       -  CTLOW = Cold Start maximum ECT, deg F.

       -  EGRMPT = Calibration time delay to ramp EGR in, sec.  (EGRATE  ramp  time
          for TCSTRT <= CTLOW).

       -  FN071 = Load Normalizing function; used for table lookup.
                    Input = LOAD
                    Output = Normalized load

       -  FN211(ECT) = Multiplier as a function of Engine Coolant Temperature ECT.

       -  FN212A(BP) = Multiplier as a function of Barometric Pressure BP.

       -  FN217A(BP) =  Compensates  the  base  desired  egr  rate  for  barometric
          pressure.

       -  FN220(ACT) = Multiplier as a function of Air Charge Temperature.

       -  FN908A(N,LOAD) = Base desired EGR rate at sea level in percent;
                           X = FN070(N) - Normalized engine speed, RPM
                           Y = FN071(LOAD) - Normalized Load.

       -  FN908B(N,LOAD) = Base desired egr rate at altitude in percent;
                           X = FN070(N) - Normalized engine speed, RPM
                           Y = FN071(LOAD) - Normalized Load.


                                         9-7

                     EGR STRATEGY, DESIRED EGR MASS FLOW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  KPEI = Constant EGR adder.

       -  X = EGRATE multiplier for development.



      OUTPUTS

      Registers:

       -  DESEM = Desired EM, lb/min.

       -  EGRATE = Desired EGR rate, percent.

       -  TSEGRE = Accumulated time EGR is enabled, sec.













































                                         9-8

                     EGR STRATEGY, DESIRED EGR MASS FLOW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: EGR_DESIRED_COM1


      Calculate the base desired EGR rate:


      base_egrate = [ FN211(ECT) * FN220(ACT) *
                   ( FN908A(N,LOAD) * FN212A(BP)+ FN908B(N,LOAD) * FN217A(BP) ) ]
                    * (TSEGRE/EGRMPT)


      Calculate EGRATE:


      EGREN = 1 ------------------------------| EGRATE = ( X * base_egrate ) + KPEI
                                              |
                                              | --- ELSE ---
                                              |
                                              | EGRATE = 0



      Convert desired EGR rate to  desired  EGR  mass  DESEM  which  has  units  of
      lbm/min.   The  actual definition of DESEM is ( EGRATE * AMPEM / 100).  It is
      not formulated this way in the strategy because the addition of  EGR  changes
      AMPEM  which  affects DESEM.  In other words this implementation is iterative
      and causes a delay in achieving the final value of DESEM.   The  relationship
      is reformulated to give the correct value directly:


           DESEM = EGRATE * AM / ( 100 - EGRATE )

           Clip DESEM to 1.99 ppm as a maximum.



                                      TSEGRE LOGIC


      TCSTRT > CTLOW -------------------------| TSEGRE = EGRMPT
                                              |  (This makes TSEGRE/EGRMPT = 1.0)
                                              |
                                              | --- ELSE ---
                                              |
      EGREN = 1 ------------------------------| INCREMENT TSEGRE
       (EGR enabled)                          | Clip at EGRMPT as a maximum
                                              |  (This ramps multiplier to 1.0)
                                              |
                                              | --- ELSE ---
                                              |
                                              | FREEZE TSEGRE








                                         9-9

                     EGR STRATEGY, PRESSURE FEEDBACK EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  PRESSURE FEEDBACK EGR


      OVERVIEW

      The PFE EGR system was developed as a subsonic alternative to the  Sonic  EGR
      system.   The  PFE  EGR provides a projected reliability improvement over the
      Sonic system while still providing the  flexibility  and  spark  compensation
      characteristics of Sonic EGR.

      Like the Sonic EGR subsystem,  PFE  EGR  precisely  regulates  the  EGR  flow
      according  to  calibrated  Tables  and  fox  functions.  However, the PFE EGR
      strategy uses pressure (EPT)  as  the  feedback  signal  rather  than  pintle
      position (EVP).


      The PFE_EGR system consists of:

           1.  Tapered pintle ported EGR valve.

           2.  Downstream pressure sensor (EPT).

           3.  Control orifice.

           4.  Electronic Vacuum Regulator (EVR).



      Since PFE EGR is a subsonic flow system, the  EGR  flow  is  proportional  to
      square root of the pressure drop across a sharp-edged orifice (pe - dp):  pe,
      the upstream pressure, is calculated by  the  software;  dp,  the  downstream
      pressure, is measured by means of a ceramic capacitive transducer (EPT).  The
      EGR valve itself operates as the downstream  pressure  regulator.   When  the
      valve  is  closed,  the  downstream and upstream pressures are equal.  As the
      valve opens, the downstream pressure decreases due to the  influence  of  the
      intake manifold vacuum.


             |---------------------? 
             |            pe for delta PFE or BP for PFE
             | |-------------------?      ? ?
             | |                      |---| |---|     EPT
             | |                      |         |<-- Sensor
             | |      Control         |---------|           EGR
             | |      Orifice         |         |          Valve
             | |         |            |---| |---|            |
             | |         V                | |                V
          ---| |--------------------------| |----------------------
                         |                                 \    /
                         |                                  \  /      Intake 
                pe, "H20               dp, "H20              \/      Manifold
                         |                                   /\       Vacuum
                         |          Control chamber         /  \
                         |                                 /    \    
          ---------------------------------------------------------





                                         9-10

                     EGR STRATEGY, PRESSURE FEEDBACK EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  AM = Air mass flow, lb/min.

       -  APT = Throttle Mode Flag; -1 -> Closed Throttle, 1 -> Wide Open Throttle,
          0 -> Part Throttle.

       -  BP = Barometric pressure, " Hg.

       -  BP_WORD = Word resolution value of BP, " Hg.

       -  CONPR = Desired EPT sensor value, counts.

       -  DESDP = Filtered desired downstream pressure, " H2O.

       -  DESEM = Desired EM, lb/min.

       -  dp = Downstream pressure, " H2O, gauge.

       -  DSDRPM = Desired RPM as defined in ISC section.

       -  ECT = Engine coolant temperature.

       -  EGREN = Flag which indicates EGR enabled if set to 1.

       -  EPTBAR = Rolling average of the synchronously sampled  EPT  sensor  (time
          constant = TCEPT), counts.

       -  EPTZER = Rolling average of the synchronously sampled EPT sensor at  idle
          (time constant = TCEPTZER), stored in Keep Alive Memory, counts.

       -  IEGR = EPT sensor data for PFE EGR.

       -  N = Engine speed, rpm.

      Bit Flags:

       -  AFMFLG = Flag indicating that ACT sensor has failed.

       -  APT = Status of Part Throttle; -1 -> Closed  Throttle,  1  ->  Wide  Open
          Throttle, 0 -> Part Throttle.

       -  CFMFLG = Flag indicating that ECT sensor is in/out of range.

       -  CRKFLG = Flag indicating engine status; 1 -> Crank mode.

       -  DESEM_FLG = When set, DESEM is large enough to turn EGR on.   This  is  a
          flip flop flag.

       -  EFMFLG = Flag indicating that EVP EGR sensor has failed.

       -  EPT_OK_FLG = When set, the EPT sensor is not saturated.




                                         9-11

                     EGR STRATEGY, PRESSURE FEEDBACK EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  ISCFLG = Mode indicator flag; -1 -> Dashpot,  0  ->  Pre-pos,  1  ->  RPM
          control, 2 -> MAP RPM control.

       -  MFMFLG = Flag indicating that MAF sensor has failed.

      Calibration Constants:

       -  CTEHI = Calibration constant for minimum ECT to enable  EPTZER  at  idle,
          deg F.

       -  DP_MAX = Maximum clip for DESDP and dp.  Should be 50 inches of water for
          PFE EGR and 0 inches of water for Delta PFE EGR.

       -  DP_MIN = Minimum clip for DESDP and dp.  Should be -100 inches  of  water
          for PFE EGR and -120 inches of water for Delta PFE EGR.

       -  EPTBAR_CH = Above this value, the EPT sensor is saturated, counts.

       -  EPTBAR_SL = Below this value, the EPT sensor is not saturated, counts.

       -  EPTZER_IV = Initial or default value for EPTZER and EPTBAR.  It should be
          calibrated  to  650  counts  for  PFE  and  110  counts for Delta PFE EGR
          systems.

       -  FN074B(AM) = Upstream pressure as a function of AM; Used  in  calculating
          pe, " H2O.

       -  FN246A(DELPR) = EGR mass flow as a function of DELPR, lb/min.

       -  FN247A(DESEM) = Desired pressure drop, DESDP, across the PFE orifice.

       -  IERPMH = Idle RPM hysteresis term for EPTZER update.

       -  IXFRPR = Transfer function = 1/XFREPT, Counts/" H2O.

       -  MINDES_CL = The desired EGR mass, DESEM, below which the  EGR  is  turned
          off because the flow is too low to deliver accurately.

       -  MINDES_SH = The desired EGR mass, DESEM, above which the EGR is turned on
          because the flow is high enough to deliver accurately.

       -  TCDELPR = Time constant for filtering DELPR, sec.

       -  TCDP = dp filter time constant.

       -  TCEPT = Time constant for EPT, sec.

       -  TCEPTZER = Time constant for filtering EPTZER, sec.

       -  XFREPT = Transfer function of EPT sensor, " H20/counts.










                                         9-12

                     EGR STRATEGY, PRESSURE FEEDBACK EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  CONPR = See above.

       -  DELPR = Actual pressure drop across the control orifice, " H20 = pe - dp.

       -  desdel = Desired pressure drop across the orifice, " H2O.

       -  DESDP = Filtered desired downstream pressure, " H2O.

       -  DESEM = See above.

       -  dp = Downstream pressure, " H2O (gauge).

       -  EGRACT = Actual EGR percent = 100 * EM / AMPEM.

       -  EGRATE = Desired EGR rate in percent.

       -  EGR_ERROR = Error in control chamber pressure  in  PFE  systems  and  EGR
          valve position in sonic systems, counts.

       -  EM = Actual EGR mass flow, lb/min.

       -  EPTBAR = See above.

       -  EPTZER = See above.

      Bit Flags:

       -  DESEM_FLG = See above.

       -  EPT_OK_FLG = See above.

       -  EGR_ON_FLG = When set, the EVR is being controlled and when  clear  there
          is no duty cycle output to the EVR.



      CALIBRATION INFORMATION

      Calibration of back pressure corrected for barometric pressure:

           FN074B should be calibrated at sea level since the  altitude  correction
           is  made  by  29.875/FN004(BP)  term.  Note that the altitude correction
           used to be (29.875/BP) however actual data obtained  from  the  altitude
           chamber  disagreed  with the calculated correction.  Therefore FN004(BP)
           was added to  allow  an  empirical  correction.   If  no  correction  is
           desired,  calibrate FN004 on a diagonal, that is (0,0), (31.875,31.875).
           Actual data indicates that backpressure does not increase linearly  with
           BP,  but  at about half that rate, roughly (0,8), (31.875,31.875).  This
           will generate a corrected BP to be used in calculating a  more  accurate
           pe (PFE EGR only).






                                         9-13

                     EGR STRATEGY, PRESSURE FEEDBACK EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                              STRATEGY MODULE: EGR_PFE_COM1


      The Electronic Engine Control system  controls  the  EGR  valve  with  vacuum
      supplied  by  the Electronic Vacuum Regulator (EVR).  The strategy in the EEC
      accomplishes this by calculating a desired pressure in  the  control  chamber
      called CONPR.  The actual pressure is measured and is called EPTBAR.  The EVR
      CONTROLLER uses EGR_ERROR, which is the difference between CONPR and  EPTBAR,
      to  modulate  the EVR valve so that EPTBAR is as close as posssible to CONPR.
      The following strategy sections show how  EGR_ERROR,  CONPR  and  EPTBAR  are
      calculated.


      Calculate EPTZER:


      KAM_ERROR = 1 ----------------------|
                                          |OR --| EPTZER = EPTZER_IV
      EFMFLG = 1 -------------------------|     |
                                                | --- ELSE ---
      CRKFLG = 0 -------------------------|     |
                                          |     |
      APT = -1 ---------------------------|     |
                                          |AND -| Idle EPTZER Update
      N <= DSDRPM + IERPMH ---------------|     | EPTZER = ROLAV(IEGR,TCEPTZER) 
                                          |     |
      ECT >= CTEHI -----------------------|     |
                                                | --- ELSE --- 
                                                |
                                                | No Change To EPTZER



      Calculation of the control chamber pressure, EPTBAR:


      CRKFLG = 1 -------------------------------| EPTBAR = EPTZER
                                                |
                                                | --- ELSE ---
                                                |
                                                | EPTBAR = ROLAV(IEGR,TCEPT)


















                                         9-14

                     EGR STRATEGY, PRESSURE FEEDBACK EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Check the EPT Sensor:


      EPTBAR < EPTBAR_SL -----------------|S Q -| EPT_OK_FLG 
       (EPT sensor is not saturated)      |     
                                          |     
      EPTBAR > EPTBAR_CH -----------------|C    
       (EPT sensor is saturated)          


      Check for more than the minimum amount of EGR:


      DESEM >= MINDES_SH -----------------|S Q -| DESEM_FLG 
       (more than minimum requested)      |     
                                          |    
      DESEM < MINDES_CL ------------------|C   
                                                


      DESEM_FLG = 1 ----------------------|    
                                          |    
      EGREN = 1 --------------------------|AND -| EGR_ON_FLG = 1 
                                          |     |  (OK to turn on EGR, more than
      EPT_OK_FLG = 1 ---------------------|     |   minimum requested.)     
       (EPT sensor is not saturated)            |                
                                                | --- ELSE ---
                                                | 
                                                | EGR_ON_FLG = 0
                                                |  (Turn off EGR, less than
                                                |   minimum requested or EGR is
                                                |   disabled)




























                                         9-15

                     EGR STRATEGY, PRESSURE FEEDBACK EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Exhaust backpressure is not measured, but is  inferred  from  air  mass  flow
      through the engine.

      Downstream pressure, dp, is measured by converting the A/D reading  from  the
      EPT sensor (EPTBAR) to inches of water.


      always -----------------------------------| pe = FN074B(AM) * 29.875
                                                |       /FN004(BP)       (in H2O)
                                                |                                
                                                | dp = XFREPT * (EPTBAR - EPTZER)
                                                |


      dp < DP_MIN ------------------------------| dp = DP_MIN
                                                | 
                                                | --- ELSE ---
                                                |
      dp > DP_MAX ------------------------------| dp = DP_MAX
                                                |
                                                | --- ELSE ---
                                                |
                                                | do nothing


      always -----------------------------------| DELPR = Rolav ( pe - dp, TCDELPR)



      Now that delta pressure across the orifice is known, actual EGR mass flow can
      be computed.

      EGR_ON_FLG = 0 ---------------------|
                                          |
      EFMFLG = 1 -------------------------|
       (EGR sensor is not OK)             |
                                          |
      MFMFLG = 1 -------------------------|
       (LOAD sensor is not OK)            |
                                          |OR --| EGR is off
      AFMFLG = 1 -------------------------|     | EM = 0
       (ACT sensor is not OK)             |     |
                                          |     |
      CFMFLG = 1 -------------------------|     |
       (ECT sensor is not OK)             |     |
                                          |     |
      ISCFLG >= 1 ------------------------|     |
       (RPM control)                            |
                                                | --- ELSE ---
                                                |
                                                | EM = FN246A(DELPR) *
                                                |      SQRT(BP_WORD/29.875) 
                                                |           (lbm/min)
                                                | Clip EM to 1.99 ppm 
                                                |  as a maximum.





                                         9-16

                     EGR STRATEGY, PRESSURE FEEDBACK EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Knowing the desired EGR mass flow through the  valve,  the  desired  pressure
      drop across the orifice can be calculated.


      EGR_ON_FLG = 1 ---------------------------| desdel = FN247A(DESEM)
                                                |           * 29.875/BP
                                                |
                                                | --- ELSE ---
                                                |
                                                | desdel = 0


      Knowing the pressure drop, we can convert  this  into  a  desired  downstream
      pressure.


      always -----------------------------------| des_down_press = pe - desdel


      des_down_press < DP_MIN ------------------| des_down_press = DP_MIN
                                                |
                                                | --- ELSE ---
                                                |
      des_down_press > DP_MAX ------------------| des_down_press = DP_MAX
                                                |
                                                | --- ELSE ---
                                                |
                                                | do nothing


      The downstream pressure (des_down_press) is then converted from inches of 
      water into A/D counts because the EPT sensor value is in the units of counts.


      always -----------------------------------| DESDP = Rolav (des_down_press,
                                                |                           TCDP)
                                                | CONPR = IXFRPR * DESDP + EPTZER
                                                |



      Calculate EGR_ERROR:


      EGR_ON_FLG = 1 ---------------------------| EGR_ERROR = EPTBAR - CONPR
                                                |
                                                | --- ELSE ---
                                                |
                                                | EGR_ERROR = 0











                                         9-17

                           EGR STRATEGY, SONIC EGR - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                        SONIC EGR


      OVERVIEW

      The Sonic Exhaust Gas Recirculation (EGR) system  offers  a  high  degree  of
      flexibility.   The  chief  benefit  is  improved drive and fuel economy.  The
      abilities are:

           1.  EGR flow can be precisely varied  depending  upon  engine  operating
               conditions.

           2.  Spark advance can be precisely adjusted to compensate for the actual
               EGR flow.



      The Sonic EGR system consists of:

           1.  Sonic EGR valve

           2.  EGR valve position (EVP) sensor

           3.  Electronic Vacuum Regulator (EVR)



      The EGR valve controls the flow of exhaust gasses  to  the  intake  manifold.
      The  pintle  valve  and  seat  assembly  are  designed  such that EGR flow is
      proportional to pintle position.  Further, the output of the  EVP  sensor  is
      directly  proportional  to  the  pintle  position.  This design allows direct
      calculation of EGR flow.

      The EGR valve is operated by manifold vacuum.

           The EVR:

           1.  Applies more vacuum to the EGR valve (increases EGR flow).

           2.  Maintains existing EGR valve vacuum (maintains EGR flow).

           3.  Applies less vacuum (decreases EGR flow).



      The strategy enables EGR during various engine operating modes.  These  modes
      are  calibration  items.   Typical  calibrations  will  enable EGR when these
      conditions are met:

           1.  Time since start is greater than a calibration value.

           2.  Engine is in part throttle mode.

           3.  Current EGR valve  position  is  not  less  than  the  fully  closed
               position.





                                         9-18

                           EGR STRATEGY, SONIC EGR - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  EGRATE = Desired EGR rate in percent.

       -  EGRBAR = Rolling average of EVP sensor.  The time constant is TCEGR.

       -  EGREN = Flag which indicates EGR enabled if set to 1.

       -  EVPBAR = Filtered value of EVP using the time constant TCEVP, counts.

       -  IEGR = EPT or EVP raw input for EGR in counts.

      Bit Flags:

       -  AFMFLG = Flag indicating that ACT sensor has failed.

       -  APT = Register indicating throttle mode; -1 -> closed throttle, 0 -> part
          throttle, 1 -> wide open throttle.

       -  BP_WORD = Barometric pressure, " Hg.

       -  CFMFLG = Flag indicating that ECT sensor is in/out of range.

       -  CRKFLG = Flag indicating engine mode; 1 -> engine cranking, 0  ->  engine
          not cranking.

       -  EFMFLG = Flag indicating that EVP EGR sensor has failed.

       -  ISCFLG = Mode indicator flag; -1 -> Dashpot,  0  ->  Pre-pos,  1  ->  RPM
          control, 2 -> MAP RPM control.

       -  MFMFLG = Flag indicating that MAF sensor has failed.

      Calibration Constants:

       -  EVPMAX = Maximum EGR Valve position, counts.

       -  EVPMIN = Minimum EGR Valve position, counts.

       -  FN219B(EVPBAR-EOFF) = EGR mass flow as a function of relative  EGR  valve
          position, (EVPBAR-EOFF), lb/min.

       -  FN221B(DESEM*29.875/BP_WORD) =  Contributes  to  the  desired  EGR  valve
          position, counts.

       -  TCDLOP = Time constant for DELOPT, sec.

       -  TCEGR = Time constant for EGRBAR, seconds.

       -  TCEVP = Time constant for filtering EVP, seconds.






                                         9-19

                           EGR STRATEGY, SONIC EGR - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  DELOPT = Filtered desired EGR valve position.

       -  EGRATE = See above.

       -  EGRBAR = See above.

       -  EGR_ERROR = Error in control chamber pressure  in  PFE  systems  and  EGR
          valve position in sonic systems, counts.

       -  EM = Actual EGR mass flow, lb/min.

       -  EOFF = The EGR valve reading when  the  valve  is  fully  closed  in  A/D
          counts.

       -  EVP = EGR valve position reading in A/D counts.

       -  EVPBAR = See above.

      Bit Flags:

       -  EGR_ON_FLG = When set, the EVR is being controlled and when  clear  there
          is no duty cycle output to the EVR.


































                                         9-20

                           EGR STRATEGY, SONIC EGR - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: EGR_SONIC_COM1


                                  SONIC - CONTROL ERROR


      The error term (EGR_ERROR) used to control the EGR valve  is  the  difference
      between desired and actual EGR valve position.


      EGREN = 1 -------------------------| EGR_ERROR = DELOPT - EVPBAR
      (EGR is enabled)                   |
                                         | --- ELSE ---
                                         |
                                         | EGR_ERROR = 0


           NOTES:

           1.  When the desired  EGR  rate  EGRATE  equals  zero,  DELOPT  is  then
               cleared.   This  action  will  close  the EGR valve when zero EGR is
               requested.

           2.  When the desired EGR rate EGRATE is non-zero  and  DELOPT  is  zero,
               then  DELOPT  is  set to EOFF before the DELOPT filter is run.  This
               makes the DELOPT filter start at the closed EGR valve position  when
               EGR is desired.

           3.  DELOPT is clipped to 922 counts (90% of VREF).






























                                         9-21

                           EGR STRATEGY, SONIC EGR - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           SONIC - CONTROL POINT DETERMINATION


      The desired EGR mass (DESEM) is converted into a  desired  EGR  valve  pintle
      position (DELOPT):


      EGREN = 0 -------------------------| EGRATE = 0
                                         | DELOPT = 0
                                         | EGR_ON_FLG = 0
                                         |
                                         | --- ELSE ---
                                         |
      EGRATE = 0 ------------------------| DELOPT = 0
                                         | EGR_ON_FLG = 0
                                         |
                                         | --- ELSE ---
                                         |
                                         | delopt = FN221B(DESEM * 29.875/BP_WORD)
                                         |           + EOFF
                                         | DELOPT = ROLAV(delopt,TCDLOP)
                                         | EGR_ON_FLG = 1
                                         |
                                         | Clip DELOPT from EOFF to 922 counts




































                                         9-22

                           EGR STRATEGY, SONIC EGR - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            SONIC - CONTROL INPUT CALCULATION


      EVP means EGR Valve Position and is an analog input.  The EVP sensor provides
      a  signal  proportional  to  the  valve position.  As a rule of thumb, pintle
      position (percent of Full Travel) is equal to (IEGR - EOFF) * 0.14.

      Calculate a filtered EVP value (EVPBAR):


                                EVPBAR = ROLAV(EVP,TCEVP)


      EFMFLG = 0 ------------------|
                                   |
      IEGR <= EVPMAX --------------|AND -| EVP = IEGR
                                   |     |
      IEGR >= EVPMIN --------------|     | 
                                         | --- ELSE ---
                                         |
      EFMFLG = 1 ------------------------| EVP = EOFF
                                         |
                                         | --- ELSE ---
                                         |
                                         | Do NOT update EVP


      EOFF stands for EGR OFFset.  It  is  the  lowest  achievable  value  of  EVP.
      Physically, it occurs when the EGR valve is fully closed.  EOFF is calculated
      by the ratcheting strategy shown.


      EGRBAR < EOFF ---------------|
                                   |
      CRKFLG = 0 ------------------|AND -| EOFF = EGRBAR
       (RUN or UNDERSPEED mode)    |     |
                                   |     |
      APT = -1 --------------------|     |
       (closed throttle mode)            |
                                         | --- ELSE ---
                                         |
                                         | No change to EOFF



      EGRBAR is a filtered value of EVP.  It is used in  the  EOFF  calculation  so
      that  a  noise  spike is not interpreted as a true EVP position which is then
      incorporated in EOFF via the ratcheting  strategy.   Calculation  is  a  time
      dependent rolling average filter of:


                                EGRBAR = ROLAV(EVP,TCEGR)








                                         9-23

                           EGR STRATEGY, SONIC EGR - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             SONIC - DELIVERED EGR MASS FLOW


      Calculate the actual delivered EGR mass (EM):


      EGREN = 0 -------------------|
                                   |
      EFMFLG = 1 ------------------|
       (EGR sensor is not OK)      |
                                   |
      MFMFLG = 1 ------------------|
       (LOAD sensor is not OK)     |
                                   |
      AFMFLG = 1 ------------------|OR --| EGR IS OFF
       (ACT sensor is not OK)      |     | EM = 0
                                   |     | 
      CFMFLG = 1 ------------------|     |
       (ECT sensor is not OK)      |     |
                                   |     |
      ISCFLG = 1 OR 2 -------|     |     |
       (RPM CONTROL)         |AND -|     | 
                             |           |
      DELOPT = 0 ------------|           |
       (filtered desired EGR position)   |
                                         | --- ELSE ---
                                         |
                                         | EM = FN219B(EVPBAR - EOFF)
                                         |       * (BP_WORD / 29.875)
                                         | Clip EM to 1.99 ppm as a maximum


      EM is subtracted from AMPEM and used to calculate fuel  flow  in  the  FUELPW
      calculation for speed density systems.


























                                         9-24

                       EGR STRATEGY, ACTUAL PERCENT EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   ACTUAL PERCENT EGR


      OVERVIEW


      EGRACT is used to modify spark advance (see  SAF  calculation).   To  prevent
      large instantaneous changes in calculated spark, EGRACT is filtered using the
      rolling average filter routine.


      DEFINITIONS

      INPUTS

      Registers:

       -  AM = Air mass flow bin 10.

       -  AMPEM = Air mass flow plus EGR mass flow, lb/min.

       -  EM = Actual EGR mass flow, lb/min.

      Calibration Constants:

       -  TCEACT = Time constant for filtering EGRACT, sec.



      OUTPUTS

      Registers:

       -  EGRACT = Actual EGR percent = 100 * EM / AMPEM.



      PROCESS
                            STRATEGY MODULE: EGR_ACTUAL_COM1

      Calculate AMPEM:


                                     AMPEM = AM + EM



      Calculate the actual EGR rate as a percent of AMPEM:


                               egract = (EM / AMPEM) * 100



                              EGRACT = ROLAV(egract,TCEACT)





                                         9-25

                         EGR STRATEGY, EVR CONTROLLER - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                          EVR CONTROLLER - (EGRDC CALCULATION)


      OVERVIEW

      Determine new EGR duty cycle (EGRDC).



      DEFINITIONS

      INPUTS

      Registers:

       -  EGRDC = Desired EVR duty cycle, %/100.

       -  EGRDC1 = Last pass value of EGRDC.

       -  EGRDC2 = Last pass value of EGRDC1.

       -  EGREN = 1 -> EGR enabled.

       -  EGR_ERROR = Error in control chamber pressure  in  PFE  systems  and  EGR
          valve position in sonic systems, counts.

       -  EGR_ERROR0 = Current value of EGR_ERROR for use in the EGR controller.

       -  EGR_ERROR1 = Last pass value of EGR_ERROR0.

       -  EGR_ERROR2 = Last pass value of EGR_ERROR1.

       -  VIP_TIMER_EX = Self test universal timer, resolution 0.125 sec.

      Bit Flags:

       -  EGR_ON_FLG = 1 -> EVR is being controlled, 0 -> no duty cycle  output  to
          the EVR.

       -  EGRFLG = Flag that indicates whether DCOFF has been added to EGRDC.

       -  V_EGREN = Flag that indicates whether Self Test  engine  running  EGR  is
          requested.

      Calibration Constants:

       -  COEFDC = Coefficient used in EGR control algorithm, used  to  filter  the
          EGRDC calculation.

       -  COEFER1 = Coefficient used  in  EGR  control  algorithm.   Its  value  is
          determined through a control theory analysis.

       -  COEFER2 = Coefficient used  in  EGR  control  algorithm.   Its  value  is
          determined through a control theory analysis.

       -  DCOFF = Duty cycle required to start to open the valve.




                                         9-26

                         EGR STRATEGY, EVR CONTROLLER - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  EGRDC_MAX = Maximum clip for EGRDC, %/100.

       -  EGRGAIN = Coefficient used  to  set  overall  gain  of  the  EGR  control
          algorithm.

       -  VDCMIN = Self Test engine running EGR test minimum EGR duty cycle.

       -  VEGRAT = Self Test engine running EGR test EGR duty cycle ramp rate.

       -  VDCMAX = Self Test engine running EGR test maximum EGR duty cycle.



      OUTPUTS

      Registers:

       -  EGRDC = See above.

       -  EGRDC1 = See above.

       -  EGRDC2 = See above.

       -  EGR_ERROR0 = See above.

       -  EGR_ERROR1 = See above.

       -  EGR_ERROR2 = See above.

      Bit Flags:

       -  EGRFLG = See above.




























                                         9-27

                         EGR STRATEGY, EVR CONTROLLER - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: EGR_CONTROL_COM1


      EGREN = 0  --------------|
                               |OR --| egrdc_sel = 0
      EGR_ON_FLG = 0 ----------|     | EGRFLG = 0
                                     | EGRDC1 = 0
                                     | EGRDC2 = 0
                                     |
                                     | --- ELSE ---
      EGRFLG = 0 --------------|     | 
                               |AND -| EGR_ERROR0 = EGR_ERROR 
      V_EGREN = 0 -------------|     | EGR_ERROR1 = EGR_ERROR 
      (not self test engine          | EGR_ERROR2 = EGR_ERROR 
       running EGR test)             | EGRDC1 = DCOFF
                                     | EGRDC2 = DCOFF
                                     | EGRFLG = 1
                                     | egrdc_sel = egrdc
                                     | Clip egrdc_sel to EGRDC_MAX
                                     |  (EGR off -> on transition and not a 
                                     |   tip-out; initialize values of previous 
                                     |   EGR errors and duty cycles to include 
                                     |   DCOFF in first duty cycle calculation)
                                     |
                                     | --- ELSE ---
                                     |
      V_EGREN = 1 -------------------| egrdc_sel = VDCMIN + (VEGRAT * VIP_TIMER_EX)
                                     | Clip egrdc_sel to VDCMAX
                                     |  (self test engine running EGR test 
                                     |   in progress; ramp EGR duty cycle)
                                     |
                                     | --- ELSE ---
                                     |
                                     | EGR_ERROR2 = EGR_ERROR1
                                     | EGR_ERROR1 = EGR_ERROR0
                                     | EGR_ERROR0 = EGR_ERROR
                                     | EGRDC2 = EGRDC1
                                     | EGRDC1 = EGRDC
                                     | egrdc_sel = egrdc
                                     | Clip egrdc_sel to EGRDC_MAX
                                     |  (normal closed loop EGR control; update 
                                     |   values of previous pressure errors
                                     |   and duty cycles)


      EVR controller algorithm which calculates egrdc.


      egrdc = COEFDC * EGRDC1 + (1 - COEFDC) * EGRDC2 + EGRGAIN * 
              [EGR_ERROR0 - (COEFER1 * EGR_ERROR1) + (COEFER2 * EGR_ERROR2)]









                                         9-28

                     EGR STRATEGY, DUTY CYCLE GENERATION - CBAZA
                      PED-PTE FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  DUTY CYCLE GENERATION


      OVERVIEW

      This routine determines the Exhaust Gas Vacuum Reservoir (EVR) duty cycle  to
      be  output.   It does this by converting from EGRDC to a Pulse Width in terms
      of Duce Ticks.



      DEFINITIONS

      INPUTS

      Registers:

       -  EGRDC = EGR duty cycle.

       -  EVR_PW_DTKS = EVR pulsewidth in DUCE ticks (DC1).

      Calibration Constants:

       -  EVR_PRD_DT = DUCE EVR period in duce_ticks.



      OUTPUTS

      Registers:

       -  EVR_PW_DTKS = See above.



      PROCESS
                             STRATEGY MODULE: EGR_DCGEN_COM3


      always -----------------| EVR_PW_DTKS = EGRDC * EVR_PRD_DT
                              |  (clip to 65535 duce_ticks)
                              |
                              | EVR_PW_DUCE = EVR_PW_DTKS

















                                         9-29

                     EGR STRATEGY, DUTY CYCLE GENERATION - CBAZA
                      PED-PTE FoMoCo, PROPRIETARY & CONFIDENTIAL






























































                                         9-30












                                      CHAPTER 10

                                  IDLE SPEED CONTROL

















































                                         10-1

                       IDLE SPEED CONTROL, GENERIC ISC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               GENERIC IDLE SPEED CONTROL


      OVERVIEW

      This chapter describes the adaptive air bypass idle speed control system.  In
      general,  the  ISC  system  is  designed to regulate the duty cycle to an air
      bypass solenoid as necessary to obtain the desired engine speed for all  idle
      operating conditions (base idle; hi-cam; various accessory loads) and provide
      for a dashpot action.  Predicted airflows for the different  load  states  at
      idle are adaptively corrected to minimize the impact of hardware variability.
      Acceptable idling performance is achieved by a careful balance of bypass  air
      solenoid control and feedback spark control.

      Feedback Spark offers the fastest way to change engine torque.  As such,  its
      use is important in the control of load transitions like A/C, power steering,
      and  neutral/drive  changes.   Aggressive  use  of  Feedback  Spark  is  very
      effective  in  limiting  rpm  changes  during these conditions.  The Feedback
      Spark strategy is described in the spark chapter.

      The amount of airflow through the air bypass is controlled  by  the  solenoid
      position,  which  is  in  turn  determined  by  the solenoid duty cycle.  The
      objective of the idle speed control strategy  is  to  determine  ISCDTY.   As
      mentioned   above,  calibration  of  the  bypass  actuator  control  must  be
      coordiated with that of Feedback Spark.


           The overall bypass air ISC logic sets ISCDTY to one of the following:

      I.   CRANK:

              a) Engine Stopped:

                        ISCDTY = 0%          

              b) Engine Moving:

                        ISCDTY = FN884(TCSTRT)%

      II. FMEM (MAP and TP sensor out of range):

                        ISCDTY = FMMISC               

      III.  NORMAL RUNNING ISC:

                        ISCDTY = IDCMUL * FN8000(DEBYMA,PERLOAD_ISC) + IDCOFS 














                                         10-2

                       IDLE SPEED CONTROL, GENERIC ISC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                       NORMAL ISC


      OVERVIEW

      Under most operating conditions, ISCDTY  is  obtained  from  the  Normal  ISC
      logic.  During Normal ISC, the strategy can operate in any one of four modes:
      DASHPOT PREPOSITION, DASHPOT, RPM CONTROL, or LOCKOUT.   The  modes  will  be
      described in more detail shortly.

      Regardless of  which  of  the  four  modes  is  active,  the  strategy  first
      calculates a total desired idle airflow, DESMAF:

                     DESMAF = DESMAF_PRE + DASPOT + IPSIBR + ISCKAM

      DESMAF represents the total engine airflow  required  for  idle.   There  are
      slight  differences  in  the calculation of DESMAF depending on which mode is
      active.  These differences are summarized below and will be described in more
      detail in the discussion of each individual mode.


      DASHPOT PREPOSITION MODE (ISCFLG = 0)

         DESMAF_PRE = Initial prediction, based on rpm, load, & temperature
         DASPOT = DASPTK * (DSTPBR - (RATCH + DELHYS)) + FN830
         IPSIBR = Fixed at last calculated value (not updated in this mode)
         ISCKAMn = KAM cell n, where n is selected by ISFLAG   


      DASHPOT MODE (ISCFLG = -1)

         DESMAF_PRE = Initial prediction, based on rpm, load, & temperature
         DASPOT = old DASPOT - FN879(DASPOT)
         IPSIBR = Fixed at last calculated value (not updated in this mode)
         ISCKAMn = KAM cell n, where n is selected by ISFLAG   


      RPM CONTROL MODE (ISCFLG = 1)

         DESMAF_PRE = Initial prediction, based on rpm, load, & temperature
         DASPOT <= DASCTL (DASPOT must be below DASCTL to enter RPM control)
         IPSIBR = old IPSIBR + ISCPSI
         ISCKAMn = KAM cell n, where n is selected by ISFLAG   


      RPM CONTROL LOCKOUT MODE (ISCFLG = 2)

         DESMAF_PRE = Initial prediction, based on rpm, load, & temperature
         DASPOT <= DASCTL (DASPOT must be below DASCTL to enter lockout mode)
         IPSIBR = old IPSIBR + ISCPSI
         ISCKAMn = KAM cell n, where n is selected by ISFLAG   









                                         10-3

                       IDLE SPEED CONTROL, GENERIC ISC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 NORMAL ISC - continued

      During Normal ISC, the strategy executes a number  of  tasks  in  a  specific
      order.   These  tasks  perform the actual logic and calculations required for
      any of the four modes of operation.  The order of execution of the  tasks  is
      listed  below.   The  details of each task are described in separate sections
      which follow.


                                    NORMAL ISC TASKS

      1) DSDRPM_CALC   - calculation of DSDRPM & DESMAF_PRE & setting of ISFLAG
      2) RPMERR_CALC   - calculation of RPMERR_A & RPMERR_S
      3) DASPOT_CALC   - calculation of DASPOT
      4) MODE_SELECT   - selection of mode & setting of ISCFLG
      5) IPSIBR_CALC   - IPSIBR update & calculation of DESMAF
      6) ISCDTY_CALC   - calculation of DEBYMA & ISCDTY
      7) ISCKAM_UPDATE - adaptive update of ISCKAM










































                                         10-4

                       IDLE SPEED CONTROL, GENERIC ISC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  ISCDTY = Idle speed control duty cycle.

       -  N = Engine revolutions, RPM.

       -  N_RATCH = RPM value  which  only  ratchets  down.   When  not  at  closed
          throttle,  N = N_RATCH.  When at closed throttle, N_RATCH is only allowed
          to go down.  N_RATCH is an input to the  minimum  daspot  clip.   N_RATCH
          ratchets down to prevent rpm flares after a declutch.

       -  PERLOAD_ISC = Used by ISC logic as the Y input to FN8000.   0-1.0  scale,
          unitless.

       -  RATCH = Closed throttle position, counts.

       -  TCSTRT = Temperature of ECT at Cold Start-up, deg F.

       -  TSLPIP = Time since last PIP (msecs).

       -  VSBAR = Filtered vehicle speed for transmission.

      Bit Flags:

       -  APT = Throttle Mode flag.

       -  CRKFLG = Crank Mode flag; 1 -> Crank mode.

       -  DISABLE_ISC = Flag used by VIP to disable the  ISC  strategy  and  freeze
          ISCDTY at it's present value.

       -  MFMFLG = MAF Failure flag; 1 -> MAF out of range.

       -  NDSFLG = 0 -> transmission in Neutral, 1 -> transmission in gear.

       -  RUNUP_FLG = Flag indicating that initial runup is complete; 1 ->  initial
          runup complete.

       -  TFMFLG = TP Failure flag, 1 -> TP out of range.

      Calibration Constants:

       -  DASMHYST = Hysteresis for DASMPH, mph.

       -  DASMPH = Minimum VSBAR for declutch DASPOT clip, mph.

       -  FMMDSD = Failure Mode Management default desired RPM.

       -  FMMISC = Default Duty cycle to ISC, fraction.

       -  FN884(TCSTRT) = ISC Duty Cycle in Crank, deg.

       -  FN8000 = ISCDTY as a function of DEBMYA and PERLOAD_ISC.



                                         10-5

                       IDLE SPEED CONTROL, GENERIC ISC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  TRLOAD = Transmission Load;
                   0 -> Manual Transmission, no clutch or gear switches,
                       forced neutral state (NDSFLG = 0).
                   1 -> Manual Transmission, no clutch or gear switch.
                   2 -> Manual Transmission, one clutch or gear switch.
                   3 -> Manual Transmission, both clutch and gear switches.
                   4 -> Auto Transmission, non-electronic, neutral drive switch.
                   5 -> Auto Transmission, non-electronic, neutral pressure switch,
                       (AXOD).
                   6 -> Auto Transmission, electronic, PRNDL sensor - park,
                       reverse, neutral, overdrive, manual 1, manual 2.



      OUTPUTS

      Registers:

       -  DSDRPM = Desired engine speed.

       -  DSTPBR = Dashpot filtered throttle position.

       -  ISCDTY = See above.

       -  IPSIBR = The closed loop integration  component  of  total  DESMAF,  ppm.
          Designed to provide integral feedback, IPSIBR adjusts the value of DESMAF
          to correct for sustained changes in idle load.  An increase  or  decrease
          in IPSIBR results in a corresponding change to bypass valve duty cycle.

       -  N_RATCH = See above.

      Bit Flags:

       -  FLG_DASMNQ = VSBAR flip-flop flag for minimum DASPOT clip.

       -  HCAMFG = Flag indicating the completion of Hi-Cam; 0 -> no desired engine
          speed  adder  exists, 1 -> RPM adder above base idle is present.  Flag is
          used in the ISC adaptive update routine to disable updates when HCAMFG  =
          1.

       -  ISCFLG = ISC mode indicator flag;  -1  ->  Dashpot  Mode,  0  ->  Dashpot
          Preposition Mode, 1 -> closed Loop RPM Control Mode, 2 -> Closed Loop RPM
          Control (Lock_out entry to RPM control).

       -  RUNUP_FLG = See above.















                                         10-6

                       IDLE SPEED CONTROL, GENERIC ISC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: ISC_OVERVIEW_COM2

                              OVERALL BYPASS AIR ISC LOGIC


      The purpose  of  the  ISC  logic  is  to  determine  ISCDTY.   Under  certain
      conditions,   ISCDTY  is  set  to  specific  values.   Under  most  operating
      conditions, ISCDTY is determined from the Normal ISC logic which is described
      later.    The  logic  below  describes,  at  highest  level,  how  ISCDTY  is
      determined.

                                         | (ISC logic disabled)             
      DISABLE_ISC = 1 -------------------| freeze ISCDTY                    
       (flag set by VIP logic)           | EXIT ISC LOGIC                   
                                         |                                  
                                         | --- ELSE ---                     
      CRKFLG = 1 ------------------|     |                                  
       (in crank mode)             |AND -| (engine stopped)                 
                                   |     |                                  
      TSLPIP >= 2 sec. ------------|     | ISCDTY = 0                       
       (no PIPs yet or stall)            | (0% - actuator closed)           
                                         | IPSIBR = 0                       
                                         | DSTPBR = RATCH                   
                                         | EXIT ISC LOGIC                   
                                         |                                  
                                         | --- ELSE ---                     
                                         |                                  
                                         | (engine moving)                  
      CRKFLG = 1 ------------------|     |                                  
       (in crank mode)             |OR --| Do: DSDRPM_CALC                   
                                   |     | Do: RPMERR_CALC                   
      RUNUP_FLG = 0 ---------------|     |  (update RUNUP_FLG)              
       (runup not completed)             | ISCDTY = FN884(TCSTRT)%          
                                         | (duty cycle function of          
                                         |   temperature at start)          
                                         | IPSIBR = 0                       
                                         | DSTPBR = RATCH                   
                                         | EXIT ISC LOGIC                   
                                         |                                  
                                         | --- ELSE ---                     
                                         |                                  
                                         | (FMEM fault present)             
      MFMFLG = 1 ------------------|     |                  
                                   |AND -| ISCDTY = FMMISC  
      TFMFLG = 1 ------------------|     | DSDRPM = FMMDSD  
                                         | ISCFLG = 0       
                                         | RUNUP_FLG = 1    
                                         | HCAMFG = 1
                                         | EXIT ISC LOGIC
                                         |
                                         | --- ELSE ---                     
                                         |                                  
                                         | (normal ISC)                     
                                         |                                  
                                         | update FLG_DASMNQ                
                                         | update N_RATCH                   
                                         | ISCDTY is calculated from the    
                                         | Normal ISC logic described later 

                                         10-7

                       IDLE SPEED CONTROL, GENERIC ISC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              FLG_DASMNQ and N_RATCH LOGIC


      This logic is used by DASPOT.  It is shown here because it is executed as
      part of the OVERALL ISC LOGIC.  It is executed anytime the Normal Isc logic
      is done so it will be available, if required by DASPOT mode. 

                                       FLG_DASMNQ


      VSBAR >= DASMPH + DASMHYST --|S Q -| FLG_DASMNQ = 1             
                                   |     | (Prepare to add dashpot    
      VSBAR < DASMPH --------------|C    |  to prevent declutch stall)
                                         |                            
                                         | --- ELSE ---               
                                         |                            
                                         | FLG_DASMNQ = 0             



                                         N_RATCH


      APT = 0 OR 1 ----------------|                                           
                                   |OR --| N_RATCH = N                         
      NDSFLG = 1 ------------|     |     |                                     
                             |AND -|     |                                     
      TRLOAD = 3 ------------|           |                                     
                                         | --- ELSE ---                        
      APT = -1 --------------------|     |                                     
                                   |AND -| N_RATCH = N                         
      N <= N_RATCH ----------------|     | (let N_RATCH come down)             
                                         |                                     
                                         | --- ELSE ---                        
                                         |                                     
                                         | No change to N_RATCH                
                                         | (RPM flare, keep N_RATCH the same)  























                                         10-8

                 IDLE SPEED CONTROL, DESIRED RPM CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   DSDRPM CALCULATION


      OVERVIEW

      This section describes the calculation of desired idle rpm (DSDRPM).   DSDRPM
      is  used  as a control input for closed loop and adaptive idle speed control.
      It is also used to calculate DESMAF_PRE.

      The strategy calculates a desired value for engine speed and  DSDRPM.   While
      in idle speed control the strategy attempts to maintain the DSDRPM value with
      actual engine speed.  The previous value of DSDRPM is saved in  the  register
      DSDRPM_LST.  DSDRPM is composed of a Base portion, plus a Hicam portion, plus
      additional adders for A/C and High Speed Fan.

                       DSDRPM = Base + Hicam + [ac_rpm] + HEDFRPM



                                    GPAS Requirements


      Automatic transmission vehicles operating in drive are limited by  Ford  GPAS
      requirements  to a maximum desired idle rpm.  Under these conditions, DSDRPM,
      including all adders, is clipped to the value ISCLPD as a maximum.



                                 Base Portion of DSDRPM


      The Base portion of DSDRPM is the part that does not go away after the engine
      warms up.

                                 Base = NUBASE or DRBASE


      AC_RPM portion of DSDRPM:

      The ac_rpm is the desired RPM for AC during neutral or drive.

                              ac_rpm = DNAC_DR or DNAC_NEUT


















                                         10-9

                 IDLE SPEED CONTROL, DESIRED RPM CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 HICAM Portion of DSDRPM


      In normal (non VIP) strategy, the Hicam portion of DSDRPM is  composed  of  a
      variety of adders for special operating conditions (ECT, ACT, IDLTMR, etc.).


      non VIP:  Hicam = FN825A + FN825B [+ FN821A] [+ FN880] [+ BZZRPM] [+ FN826A]


      In VIP, Hicam is set to a special value that will cause DSDRPM to be equal to
      RVIPRPM.


      VIP:  Hicam = (RVIPRPM - NUBASE)


      Hicam is allowed to rise  instantaneously,  but  any  decrease  in  value  is
      filtered to prevent a sudden drop in DSDRPM.  This filtered value of Hicam is
      called DESNLO (time constant TCDESN for non VIP, VTCDSN for VIP).   If  Hicam
      is decreasing, it is set to the filtered value, DESNLO.  The flag, HCAMFG, is
      set if Hicam is non zero.  HCAMFG is used to prevent adaptive airflow updates
      (ISCKAM).





































                                        10-10

                 IDLE SPEED CONTROL, DESIRED RPM CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  ACIOTMR = A/C off delay timer for ISC, sec.

       -  ACT = Air charge temperature, deg.  F.

       -  APT = Throttle mode flag.

       -  ATMR1 = Timer which counts up in run/underspeed mode.

       -  ATMR3 = Timer which counts up in run mode.  (Reset to 0 only at powerup).

       -  Base = Symbol used to represent the base rpm portion of DSDRPM.  Base  is
          not displayable.

       -  DESNLO = Filtered value of the high cam portion of the  DSDRPM  register.
          Applied  only  when  Hicam  is  decreasing,  using  time constant TCDESN.
          Engine running VIP uses time constant VTCDSN.

       -  DSDRPM = Desired engine speed.  See Overview section  for  definition  of
          the various uses of this register.

       -  ECT = Engine coolant temperature, deg.  F.

       -  Hicam = Symbol used to represent the hi-cam adders to DSDRPM.   Hicam  is
          not displayable.

       -  NACTMR = Time at P.T.  or WOT.

       -  TCSTRT = Temperature of ECT at Cold Startup, deg F.

       -  VOLTMR = Timer which records  time  that  the  system  voltage  is  below
          battery charging level, sec.

      Bit Flags:

       -  ALT_CAL_FLG = Flag to indicate use of alternate calibration.

       -  ACRQST = A/C requested; 1 -> A/C request.

       -  AC_RPM_FLG = A/C request flag to add RPM to DSDRPM.

       -  CRKFLG = Crank flag.

       -  CTNFLG = 1 -> closed throttle neutral idle.

       -  DNDSUP = Delayed neutral/drive flag;.  0 -> in neutral, no load, 1 ->  in
          drive, loaded.

       -  HSF_FLG = Flag indicating the status of the high speed Fan.

       -  HEDFHP = Two speed fan output present; 0 -> No HEDF, 1 -> HEDF present.




                                        10-11

                 IDLE SPEED CONTROL, DESIRED RPM CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  LOWVOL_FLG = Flag used to indicate the flip-flop  state  of  Low  voltage
          timer.

       -  PTSCR = Part throttle since crank mode flag; 0 -> driver has  not  tipped
          in since start, 1 -> driver tipped in, kick down desired RPM.

       -  VRUN_ISCFLG = Flag set by VIP strategy to cause the VIP parameter RVIPRPM
          to be used in a DSDRPM.

       -  V_MODE_SETUP = Flag which indicates that the  Self-Test  throttle  adjust
          procedure is running VIP.

      Calibration Constants:

       -  AC_OFF_DLY  =  Time  to  maintain  A/C  rpm  adder  after  A/C  has  been
          disengaged.  Used to prevent RPM changes when A/C cycles rapidly.

       -  BZZRPM = RPM adder intended to provide a short increase in RPM for engine
          cleanout  on  start-up.  The buzz-up function is not affected by the part
          throttle kickdown until BZZTM expires.

       -  BZZRPM_ALT = BZZRPM used when ALT_CAL_FLG = 1.

       -  BZZTM = Time for which BZZRPM adder is in effect.

       -  BZZTM_ALT = BZZTM used when ALT_CAL_FLG = 1.

       -  CHGTM = Time delay after leaving Closed  Throttle  to  permit  VOLTMR  to
          decrement, sec.

       -  CRKTIM = Time after start to delay GPAS clip.

       -  DNAC_DR = Desired RPM increment requested with the A/C on in drive.

       -  DNAC_NEUT = Desired RPM increment requested with the A/C on in neutral.

       -  DRBASE = Base desired engine speed in drive.

       -  DRBASE_ALT = DRBASE used when ALT_CAL_FLG = 1.

       -  FN821A(VOLTMR) = RPM adder as a function of  VOLTMR  to  provide  battery
          charge control.

       -  FN825A(ECT) = RPM adder as a  function  of  ECT.   Provides  base  Hi-Cam
          function.

       -  FN825A_ALT(ECT) = FN825A used when ALT_CAL_FLG = 1.

       -  FN825B(ACT) = RPM adder as a function of ACT.  Provides  higher  idle  at
          very low ambients.

       -  FN826A(TCSTRT) = RPM adder as a function of ECT at start.  This adder  is
          not  used  when  either  the first part throttle transition since exiting
          crank is observed or the time since  start  exceeds  a  calibrated  value
          (TKDTM).

       -  FN880(CTNTMR) = DSDRPM adder vs.  time at idle and in neutral  (CTNTMR  -
          See   timer   chapter   for   exact  definition)  Used  as  part  of  the
          inspection/maintenance strategy.  Remember that any RPM above  base  idle

                                        10-12

                 IDLE SPEED CONTROL, DESIRED RPM CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


          disables ISCKAM adaptive learning via HCAMFG.

       -  HCDCLP = Maximum HICAM RPM clip for battery charging in drive.

       -  HCNCLP = Maximum HICAM RPM clip for battery charging in neutral.

       -  HEDFRPM = DSDRPM adder when high speed fan is on, rpm.

       -  ISCLPD = A clip on the maximum desired speed that can be  requested  with
          vehicle in drive.  Usually the GPAS defined speed allowed at 0.2 miles on
          a cold start.

       -  ISCLPD_ALT = ISCLPD used when ALT_CAL_FLG = 1.

       -  NUBASE = Base desired engine speed in neutral.

       -  NUBASE_ALT = NUBASE used when ALT_CAL_FLG = 1.

       -  LOWVOL_CH = Hysteresis term for LOWVOL_SL, volts.

       -  LOWVOL_SL = System voltage level, below which the battery is discharging,
          volts.

       -  RVIPRPM = Desired RPM controlled by Engine Running VIP strategy.

       -  TCDESN = Filter constant for the desired engine  speed  calculated  value
          (DSDRPM).   Used  to  slow  changes  in  desired  speed in the decreasing
          direction.

       -  TKDTM = Time since start after which FN826A is eliminated  as  a  desired
          RPM adder.

       -  TRLOAD = Transmission Load;
                   0 -> Manual Transmission, no clutch or gear switches,
                        forced neutral state (NDSFLG = 0),
                   1 -> Manual Transmission, no clutch or gear switch,
                   2 -> Manual Transmission, one clutch or gear switch,
                   3 -> Manual Transmission, both clutch and gear switches,
                   4 -> Auto Transmission, non-electronic, neutral drive switch,
                   5 -> Auto Transmission, non-electronic, neutral pressure switch
                       (AXOD),
                   6 -> Auto Transmission, electronic, PRNDL sensor - park,
                        reverse, neutral, overdrive, manual 1, manual 2.

       -  VBAT = Rolling average of IKYPWR.

       -  VOLTCLP = Maximum clip value to freeze VOLTMR at upper threshold.

       -  VTCDSN = Filter constant for ISC ramp down down, unitless.



      OUTPUTS

      Registers:

       -  DSDRPM = See above.



                                        10-13

                 IDLE SPEED CONTROL, DESIRED RPM CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  DESNLO = See above.

       -  IBGPSI = Background loop control for PSI calculation in ISC.

      Bit Flags:

       -  AC_RPM_FLG = See above.

       -  HCAMFG = Flag indicating the completion of Hi-Cam; 0 -> no desired engine
          speed  adder  exists, 1 -> an RPM adder above base idle is present.  Flag
          is used in the ISC adaptive update routine to disable updates when HCAMFG
          = 1.

       -  LOWVOL_FLG = See above.



      CALIBRATION INFORMATION


      Typical values are supplied for the following calibration constants:
       -  AC_OFF_DLY = 30 sec.
       -  BZZRPM = 300 RPM.
       -  BZZTM = 3 seconds.
       -  ISCLPD = 1100 RPM.
       -  TCDESN = 3.5 sec.
       -  TKDTM = 20 seconds.

































                                        10-14

                 IDLE SPEED CONTROL, DESIRED RPM CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: ISC_DSDRPM_COM3


                      DSDRPM = Base + Hicam [+ ac_rpm] [+ HEDFRPM]

      Where:

       -  The previous value of DSDRPM is always saved in DSDRPM_LST

       -  Base = NUBASE, NUBASE_ALT, DRBASE or DRBASE_ALT

       -  ac_rpm = DNAC_DR or DNAC_NEUT

       -  Hicam is filtered in the down direction only

       -  The filtered value is called DESNLO (time constant TCDESN)

       -  In drive, DSDRPM is clipped to ISCLPD or ISCLPD_ALT as a maximum



                                     NORMAL STRATEGY


      ALT_CAL_FLG = 1 -------------| Hicam = FN825A_ALT + FN825B  [+ FN821A]
                                   | [+ FN880] [+ BZZRPM_ALT] [+ FN826A]
                                   | pre_nubase = NUBASE_ALT
                                   | pre_drbase = DRBASE_ALT
                                   |
                                   | --- ELSE ---
                                   |
                                   | Hicam = FN825A + FN825B [+FN821A]
                                   | [+FN880] [+BZZRPM] [+FN826A]
                                   | pre_nubase = NUBASE
                                   | pre_drbase = DRBASE

      NOTE:  The square brackets above,"[ ]", indicate that  a  term  is  optional.
      Anytime  a  square bracket appears in this chapter, there will be logic which
      follows to indicate under what conditions the optional  term  is  used.   The
      logic DOES NOT necessarily indicate the order in which software is executed.



















                                        10-15

                 IDLE SPEED CONTROL, DESIRED RPM CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                      VIP STRATEGY


      VRUN_ISCFLG = 1 --------|
                              |AND -| Hicam = (RVIPRPM - pre_nubase)
      VTCDSN <> 0 ------------|     | Use VTCDSN for DESNLO
                                    |
                                    | --- ELSE ---
      V_MODE_SETUP = 1--------|     |
                              |OR --| Hicam = (RVIPRPM - pre-nubase)
      VRUN_ISCFLG = 1 --|     |     | Use TCDESN for DESNLO
                        |AND -|     |
      VTCDSN = 0 -------|           |
                                    | --- ELSE ---
                                    |
                                    | Use "normal strategy" Hicam
                                    | Use TCDESN for DESNLO











































                                        10-16

                 IDLE SPEED CONTROL, DESIRED RPM CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      ALT_CAL_FLG = 1 -------------------------| pre_bzzrpm = BZZRPM_ALT
                                               | pre_fn825a = FN825A_ALT
                                               | pre_bzztm =  BZZTM_ALT
                                               |
                                               | --- ELSE ---
                                               |
                                               | pre_bzzrpm = BZZRPM
                                               | pre_fn825a = FN825A
                                               | pre_bzztm = BZZTM


      FN880(CTNTMR) logic:
      (Inspection maintenance)


      CTNFLG = 1 ------------------------------| Hicam = pre_fn825a + FN825B +
                                               |          FN880
                                               |
                                               | --- ELSE ---
                                               |
                                               | Hicam = pre_fn825a + FN825B


      FN821A(VOLTMR) logic:
      (Battery charge)


      Hicam < FN821A --------------------|
                                         |AND -| Hicam = FN821A
      DNDSUP = 0 ------------------------|     | Clip Hicam to HCNCLP as
                                               |  a maximum
                                               |
                                               | --- ELSE ---
      Hicam < FN821A --------------------|     |
                                         |AND -| Hicam = FN821A
      DNDSUP = 1 ------------------------|     | Clip Hicam to HCDCLP as
                                               |  a maximum
                                               |
                                               | --- ELSE ---
                                               |
                                               | Hicam = pre_fn825a + FN825B +
                                               |          [FN880]



      BZZRPM logic:


      ATMR1 < BZZTM ---------------------------| Add pre_bzzrpm to Hicam
                                               |
                                               | --- ELSE ---
                                               |
                                               | Do not add pre_bzzrpm







                                        10-17

                 IDLE SPEED CONTROL, DESIRED RPM CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      FN826A(TCSTRT) logic:

      ATMR1 < TKDTM ---------------------|
                                         |AND -| Add FN826A to Hicam
      PTSCR = 0 -------------------|     |     |
                                   |OR --|     |
      ATMR1 < BZZTM ---------------|           |
                                               | --- ELSE ----
                                               |
                                               | Do not add FN826A



      DESNLO down filter for Hicam:

      Hicam < DESNLO --------------------------| DESNLO = UROLAV_TC(DESNLO,TCDESN)
                                               | Hicam = DESNLO
                                               |  (Hicam is decreasing - do filter)
                                               |
                                               | --- ELSE ---
                                               |
                                               | DESNLO = Hicam
                                               |  (not decreasing - no filter)

      NOTE:  For VIP, the time constant for DESNLO is VTCDSN.  If VTCDSN  is  zero,
      the strategy defaults to TCDESN.



      Base rpm select logic:

      TRLOAD <= 3 -----------------------|
       (manual transmission)             |OR --| Use pre_nubase in DSDRPM
                                         |     | ac_rpm = DNAC_NEUT
      DNDSUP = 0 ------------------------|     |
       (in neutral)                            |
                                               | --- ELSE ---
                                               |
                                               | Use pre_drbase in DSDRPM
                                               | ac_rpm = DNAC_DR




















                                        10-18

                 IDLE SPEED CONTROL, DESIRED RPM CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      AC_RPM logic:

      ACRQST = 1 ------------------------|S Q -| AC_RPM_FLG
       (A/C requested)                   |
                                         |
      ACIOTMR > AC_OFF_DLY --------------|C


      AC_RPM_FLG = 1 --------------------------| Add ac_rpm to DSDRPM
                                               |
                                               | --- ELSE ---
                                               |
                                               | Do not add ac_rpm



      HEDFRPM logic:

      HEDFHP = 1 ------------------------|
                                         |AND -| Add HEDFRPM to DSDRPM
      HSF_FLG = 1 -----------------------|     |
                                               | --- ELSE ---
                                               |
                                               | Do not add HEDFRPM




































                                        10-19

                 IDLE SPEED CONTROL, DESIRED RPM CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      GPAS clip:


      ALT_CAL_FLG = 1 ------------------------| pre_isclpd = ISCLPD_ALT
                                              |
                                              | --- ELSE ---
                                              |
                                              | pre_isclpd = ISCLPD


      TRLOAD > 3 ------------------------|
       (not manual trans)                |
                                         |
      DNDSUP = 1 ------------------------|
       (in drive)                        |AND -| Clip DSDRPM to pre_isclpd
                                         |     |  as a maximum
      ATMR3 > CRKTIM --------------------|     |
                                         |     |
      DSDRPM > ISCLPD -------------------|     |
                                               | --- ELSE ---
                                               |
                                               | Do not clip DSDRPM






































                                        10-20

                 IDLE SPEED CONTROL, DESIRED RPM CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      VOLTMR - LOW VOLTAGE TIMER


      Low voltage timer  (VOLTMR)  represents  the  amount  of  time  that  battery
      voltage,  as  indicated  by  the VBAT calculation, is lower than a calibrated
      threshold voltage LOWVOL_SL.  VOLTMR is referenced by FN821A to determine the
      increase in engine speed necessary to provide battery charge compensation.


      VBAT < LOWVOL_SL ------------------|S Q -| LOWVOL_FLG
                                         |
      VBAT >= LOWVOL_CH -----------------|C


      CRKFLG = 0 ------------------------|
       (RUN/UNDERSPEED mode)             |
                                         |
      LOWVOL_FLG = 1 --------------------|AND -| Count up VOLTMR
                                         |     | Clip VOLTMR to VOLTCLP
      APT = -1 --------------------------|     |
                                               | --- ELSE ---
      NACTMR >= CHGTM -------------------|     |
                                         |AND -| Count down VOLTMR
      VBAT >= LOWVOL_CH -----------------|     |
                                               | --- ELSE ---
                                               |
                                               | Freeze VOLTMR

































                                        10-21

            IDLE SPEED CONTROL, DESIRED MASS AIR FLOW CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            DESIRED MASS AIR FLOW CALCULATION


      OVERVIEW

      The predicted desired mass air flow (DESMAF_PRE)  is  the  airflow  which  is
      expected to be required to provide a particular engine speed.  The prediction
      is a function of DSDRPM, ECT, ATMR3 (time since entering run mode)  and  A/C.
      This  term  is  later  added  to an integration term (IPSIBR), a dashpot term
      (DASPOT), and an adaptive term (ISCKAM), to produce the total DESMAF.


                   DESMAF_PRE = (FN1862N * FN875N or FN1862D * FN875D)
                            [+ CDNMULT] [+ AC_PPM] + EDFTPPM



       -  DESMAF_PRE is a non-displayable parameter.

       -  FN875N and D are functions of DSDRPM.  This means that, if a DSDRPM adder
          is used, the airflow to give the rpm increase is already accounted for in
          DESMAF_PRE.  AC_PPM, PSPPM and EDFTPPM represent only the airflow  needed
          for the increased load, not the increased rpm.





































                                        10-22

            IDLE SPEED CONTROL, DESIRED MASS AIR FLOW CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  AC_PPM = AC delta air mass, calculated.

       -  ATMR3 = Timer which counts up in run mode.  (Reset to 0 only at powerup).

       -  DESMAF_PRE = Predicted desired idle air flow, ppm.  This is the open loop
          air  flow  prediction which is required to idle, calculated as a function
          of ECT and time since start and including A/C, power steering and  heated
          windshield   adders.   It  does  not  include  any  closed  loop  or  KAM
          corrections, and is NOT DISPLAYABLE.

       -  DSDRPM = Desired engine speed.  See Overview section  for  definition  of
          the various uses of this register.

       -  ECT = Engine coolant temperature, deg.  F.

       -  EDFTPPM = Airflow increment  required  adder  for  electrodrive  fan  and
          transient fan load.

       -  FANTMR = Time since EDF requested.

       -  VSBAR = Filtered vehicle speed for transmission.

      Bit Flags:

       -  AC_PPM_RQST = Flag to request an Air adder to compensate for A/C load;  1
          -> A/C air request.

       -  DNDSUP = Delayed neutral/drive flag;.  0 -> in neutral, no load, 1 ->  in
          drive, loaded.

       -  EDFHP = Fan hardware present switch; 0 -> No EDF, 1 -> EDF present.

       -  LSF_RQST = Flag indicating that the low speed fan is requested.

      Calibration Constants:

       -  CDNMULT = Coastdown airflow multiplier.

       -  EDFPPM = Airflow increment required when electrodrive fan is on.

       -  EDF_DELAY = Time delay before adding EDFPPM to DESMAF_PRE, sec.

       -  FN875D(DSDRPM) = Airflow required for closed throttle operation in drive.
          Input to this function is absolute DSDRPM.

       -  FN885 = A/C DESMAF adder.


      ** Airflow requirements must be measured as accurately  as  possible  over  a
      representative population of vehicles.  Data should be collected over a range
      of anticipated desired speeds on a stabilized engine  for  both  neutral  and
      drive (a temperature modulator (FN1862N or FN1862D) will automatically adjust
      calibrated airflow to account for increased requirements at low ambients).

                                        10-23

            IDLE SPEED CONTROL, DESIRED MASS AIR FLOW CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      A hot wire airmeter can be remotely mounted to measure airflow directly  over
      the  desired  speed  range.   Equipment  is available at APTL to perform this
      procedure.

       -  FN875N(DSDRPM) =  Airflow  required  for  closed  throttle  operation  in
          neutral.  Input to this function is absolute DSDRPM.

       -  FN887A(ACT) = A/C airflow correction based on ACT.

       -  FN1862D = Drive airflow multiplier.  Used to  compensate  for  additional
          friction at startup.
                   X = FN020C(ECT)
                   Y = FN018B(ATMR3)

       -  FN1862N = Neutral airflow multiplier.  Used to compensate for  additional
          friction at startup.
                   X = FN020C(ECT)
                   Y = FN018B(ATMR3)

       -  TRLOAD = Transmission Load Switch.



      OUTPUTS

      Registers:

       -  DESMAF_PRE = See above.
































                                        10-24

            IDLE SPEED CONTROL, DESIRED MASS AIR FLOW CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: ISC_DESMAF_COM1


                   DESMAF_PRE = (FN1862N * FN875N or FN1862D * FN875D)
                            [+ CDNMULT] [+ AC_PPM] + EDFTPPM


      FN1862 and FN875 select logic:


      TRLOAD <= 3 ------------|
       (manual transmission)  |OR --| Use FN1862N * FN875N in
                              |     |  DESMAF_PRE calculation
      DNDSUP = 0 -------------|     | Do not apply CDNMULT
       (in neutral)                 |
                                    | --- ELSE ---
                                    |
                                    | Use FN1862D * FN875D in
                                    |  DESMAF_PRE calculation
                                    | Do not apply CDNMULT


      AC_PPM logic:


      AC_PPM_RQST = 1 --------------| AC_PPM = FN885 * FN887A(ACT)
       (A/C load requested)         | Add AC_PPM to DESMAF_PRE
                                    |
                                    | --- ELSE ---
                                    |
                                    | AC_PPM = 0
                                    | Do not add AC_PPM 



























                                        10-25

            IDLE SPEED CONTROL, DESIRED MASS AIR FLOW CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      EDFPPM logic:


      EDFHP = 1 --------------------| EDFTPPM = EDFPPM + FN822B

      EDFHP = 1 --------------|
                              |
      LSF_RQST = 1 -----------|AND -| Add EDFTPPM to DESMAF_PRE
       (fan requested)        |     |
                              |     |
      FANTMR >= EDF_DELAY ----|     |
       (turn-on delay)              |
                                    | --- ELSE ---
                                    |
                                    | EDFTPPM = 0
                                    | Do not add EDFTPPM












































                                        10-26

             IDLE SPEED CONTROL, ISLAST, ISFLAG, AND HCAMFG LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            ISLAST, ISFLAG, AND HCAMFG LOGIC


      OVERVIEW

      This logic control the KAM update of ISC cells and  which  adaptive  cell  is
      active.



      DEFINITIONS

      INPUTS

      Registers:

       -  ISLAST = Register which indicates the engine load state from the previous
          background pass.


      Bit Flags:

       -  AC_PPM_RQST = Flag to request an air adder to compensate for A/C load;  1
          -> A/C air requested.

       -  DNDSUP = Delayed neutral/drive flag; 0 -> in neutral, no load,  1  ->  in
          drive, loaded.

       -  ISFLAG = Flag that indicates the degree of loading on the engine at Idle;
          0 -> Drive, 1 -> Drive + A/C (WAC Relay De-Energized), 2 -> Neutral, 3 ->
          Neutral + A/C (WAC Relay De-Energized).

       -  POWSFG = Flag used to indicate that power steering load  is  high;  1  ->
          power steering on.

       -  TRLOAD = Transmission Load Switch.



      OUTPUTS

      Bit Flags:

       -  HCAMFG = Flag indicating the completion of Hi-Cam; 0 -> no desired engine
          speed  adder  exists, 1 -> an RPM adder above base idle is present.  Flag
          is used in the ISC adaptive update routine to disable updates when HCAMFG
          = 1.













                                        10-27

             IDLE SPEED CONTROL, ISLAST, ISFLAG, AND HCAMFG LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: ISC_HCAMFG_COM1


   ISLAST:    

      Always ---------------------------| ISLAST = ISFLAG
                                          (represents the value of ISFLAG
                                           from the last program pass).


   ISFLAG:

      Indicates load state.  Used to determine which adaptive idle cell is active.

      AC_PPM_RQST = 0 ------------|
                                  |
      DNDSUP = 1 -----------------|AND -| ISFLAG = 0                       
                                  |     | (Auto in drive)               
      TRLOAD > 3 -----------------|     |
                                        | --- ELSE ---
      AC_PPM_RQST = 1 ------------|     |
                                  |     |
      DNDSUP = 1 -----------------|AND -| ISFLAG = 1                          
                                  |     | (Auto in drive A/C requested)          
      TRLOAD > 3 -----------------|     |
                                        |
                                        | --- ELSE ---
      AC_PPM_RQST = 0 ------------|     |
                                  |AND -| ISFLAG = 2
      DNDSUP = 0 -----------|     |     | (Manual or Auto in neutral)
                            |OR --|     |
      DNDSUP = 1 -----|     |           |
                      |AND -|           |
      TRLOAD <= 3 ----|                 |
                                        | --- ELSE ---
      AC_PPM_RQST = 1 ------------|     |
                                  |AND -| ISFLAG = 3
      DNDSUP = 0 -----------|     |     | (Manual or Auto in neutral A/C requested)
                            |OR --|     
      DNDSUP = 1 -----|     |     
                      |AND -|     
      TRLOAD <= 3 ----|           



   HCAMFG: Used to disable updates of adaptive idle cells (ISCKAM).

      Hicam <> 0 -----------------|
       (adders present)           |OR --| HCAMFG = 1
                                  |     | 
      POWSFG = 1 -----------------|     | 
       (power steering on)              | 
                                        | --- ELSE ---
                                        |
                                        | HCAMFG = 0




                                        10-28

                  IDLE SPEED CONTROL, RPM ERROR CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  RPM ERROR CALCULATION


      OVERVIEW

      Three separate RPM  error  calculations  are  executed  in  RPMERR_CALC.   An
      instantaneous  value  (RPMERR)  is  calculated  as the difference between the
      desired and actual RPM -- positive value of RPMERR is an engine  speed  below
      desired, a negative value indicates engine speed above desired.

      Three filtered values of the instantaneous  RPMERR  are  then  obtained  with
      three separate time constants:


       -  RPMERR_A:  For the bypass air IPSIBR calculation ...  tc = TCBPA

       -  RPMERR_DA:  For the bypass air derivative term ......  tc = TCCBPA_DER

       -  RPMERR_S:  For feedback spark calculation ..........  tc = TCFBS


      In addition, RPMERR_CALC contains the set logic for RUNUP_FLG, which is  used
      to disable IPSIBR updates, idle fuel modulation and feedback spark during the
      initial runup.  The flag is cleared in CRANK/UNDERSPEED/RUN mode selection.



      DEFINITIONS

      INPUTS

      Registers:

       -  DSDRPM = Desired engine speed.  See overview section  for  definition  of
          the various uses of this register.

       -  DSDRPM_LST = Previous value of DSDRPM (from last BG loop).

       -  ECTCNT = Number of times the ECT sensor input was read.

       -  ISCFLG = ISC mode indicator flag;  -1  ->  Dashpot  mode,  0  ->  Dashpot
          Preposition Mode, 1 -> Closed Loop RPM Control Mode, 2 -> Closed Loop RPM
          Control (Lock-out entry to RPM control).

       -  N = Engine RPM.

       -  RPMERR = Instantaneous rpm error (DSDRPM - N).

       -  RPMERR_A = Filtered rpm error for bypass air calculations.

       -  RPMERR_DA = Filtered rpm error for derivative air control term.

       -  RPMERR_S = Filtered rpm error for feedback spark.

      Bit Flags:

       -  RUNUP_FLG = Flag  indicating  initial  runup  is  complete;  1  ->  runup
          complete.


                                        10-29

                  IDLE SPEED CONTROL, RPM ERROR CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  DSDRPM_OFF = Offset from DSDRPM, below which the derivative  air  control
          is turned on.

       -  RUNUP_DIFF = RPM difference from DSDRPM to set RUNUP_FLG = 1.

       -  RUNUP_DIFF_ALT = Pre-delivery RPM difference from DSDRPM to set RUNUP_FLG
          = 1.

       -  TCBPA = Time constant for RPMERR_A.

       -  TCBPA_DER = Time constant for RPMERR_DA.

       -  TCFBS = Time constant for RPMERR_S.



      OUTPUTS

      Registers:

       -  RPMERR = See above.

       -  RPMERR_A = See above.

       -  RPMERR_DA = See above.

       -  RPMERR_DAO = Old value of RPMERR_DA, for input to FN851.

       -  RPMERR_S = See above.

      Bit Flags:

       -  RUNUP_FLG = See above.

























                                        10-30

                  IDLE SPEED CONTROL, RPM ERROR CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: ISC_RPMERR_COM2


      always ----------------------------| RPMERR = DSDRPM - N


      ALT_CAL_FLG = 1 -------------------| pre_runup = RUNUP_DIFF_ALT
                                         | 
                                         | --- ELSE ---
                                         |
                                         | pre_runup = RUNUP_DIFF


      DSDRPM = DSDRPM_LST ---------|
                                   |AND -| RPMERR_DAO = RPMERR_DA
      N < DSDRPM + DSDRPM_OFF -----|     | RPMERR_DA = ROLAV(RPMERR,TCBPA_DER)
                                         |
                                         | --- ELSE ---
                                         | 
                                         | RPMERR_DAO = RPMERR
                                         | RPMERR_DA = RPMERR


      ISCFLG > 0 ------------------------| RPMERR_A = ROLAV(RPMERR,TCBPA)
       (RPM control or lockout)          |  (calculate RPM error for airflow 
                                         |   control)
                                         | RPMERR_S = ROLAV(RPMERR,TCFBS)
                                         |  (calculate RPM error for spark control)
                                         | 
                                         | --- ELSE ---
                                         | 
                                         | RPMERR_A = RPMERR
                                         | RPMERR_S = RPMERR


      ECTCNT >= 8 -----------------|
       (TCSTRT OK to use)          |
                                   |
      N > DSDRPM + pre_runup ------|AND -| RUNUP_FLG = 1
       (runup RPM exceeded)        |     | (initial runup complete)
                                   |     |
      RUNUP_FLG = 0 ---------------|     | ---ELSE---
       (first time this start)           |
                                         | No change to RUNUP_FLG















                                        10-31

                   IDLE SPEED CONTROL, DASHPOT CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  DASHPOT CALCULATIONS


      OVERVIEW

                                  Dashpot Pre-position

      Logic controlling the dashpot pre-position airflow is  intended  to  increase
      the  ISC  duty cycle during part/WOT operation.  Strategy determines the rate
      at which ISC valve flow increases/decreases in part/WOT operation as well  as
      the  maximum  allowed  pre-position  airflow.   Adequate pre-position airflow
      (DASPOT) is essential prior to entering the dashpot control mode in order  to
      avoid  HC  spiking  and/or  deceleration stalls.  The calculated pre-position
      airflow increment is added to an adaptively corrected idle  flow  requirement
      (DESMAF)  prior  to  output  of  the  ISC  duty  cycle.  Pre-position airflow
      (DASPOT) is a function of the difference between a filtered throttle position
      (DSTPBR) and the lowest recorded throttle position (RATCH).

      DSTPBR is a time dependent rolling average filter of Throttle  position.   It
      is updated once per background loop while in RUN or Underspeed Mode.  The two
      time constants, TCDASU and TCDASD are  calibratable.   TCDASU  is  used  when
      DSTPBR is filtering UP to TP.  TCDASD is used to filter DSTPBR DOWN to TP.

      The DASPOT value is adjusted as TP changes to  provide  the  desired  dashpot
      action  to  decelerations  as  initiated  over  the  range of possible engine
      operating  conditions,  using  separate  time  constants  (TCDASU/TCDASD)  to
      control the response of DSTPBR.

                                      Dashpot Bleed

      During Closed Throttle Mode, the DASPOT airflow is "bled off" by decrementing
      it.   This  action  smooths  the  transition  into  RPM  control by gradually
      eliminating the DASHPOT contribution to the Idle airflow, DESMAF.  The  bleed
      rate is determined by FN879.


      DEFINITIONS

      INPUTS

      Registers:

       -  APT = Throttle Mode Flag; -1 -> Closed Throttle, 0 -> Part Throttle,
          1 -> Wide Open Throttle.

       -  DASPOT = Dashpot contribution to  idle  air  flow.   Used  to  provide  a
          preposition air flow in Part Throttle and Wide Open Throttle Modes, which
          is "bled off" after a transition to Closed Throttle.   This  gradual  air
          decrement allows a smooth transition to RPM control.

       -  DSDRPM = Desired engine speed.

       -  DSTPBR = Time dependent rolling  average  filter  of  throttle  position.
          Filtered  using TCDASU when filtering UP to TP, and TCDASD when filtering
          DOWN to TP.

       -  ISCFLG = ISC mode indicator flag;  -1  ->  Dashpot  Mode,  0  ->  Dashpot
          Preposition Mode, 1 -> Closed Loop RPM Control Mode, 2 -> Closed Loop RPM
          Control (Lock-out entry to RPM control).

                                        10-32

                   IDLE SPEED CONTROL, DASHPOT CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  N = Engine revolutions, RPM.

       -  N_RATCH = RPM value  which  only  ratchets  down.   When  not  at  closed
          throttle,  N = N_RATCH.  When at closed throttle, N_RATCH is only allowed
          to go down.  N_RATCH is an input to the  minimum  daspot  clip.   N_RATCH
          ratchets down to prevent rpm flares after a declutch.

       -  RATCH = Closed throttle position, counts

       -  TP = Throttle position sensor.

       -  VSBAR = Vehicle speed, MPH.

      Bit Flags:

       -  DNDSUP = Delay neutral/drive flag; 0 -> in neutral,  no  load,  1  ->  in
          drive, load.

       -  FLG_DASMNQ = VSBAR flip-flop flag for minimum DASPOT clip.

       -  VRUN_ISCFLG = Flag which indicates that idle speed is being controlled by
          Engine  Running  VIP;  1  ->  in  Engine  Running VIP, 0 -> not in Engine
          Running VIP.

      Calibration Constants:

       -  DASPTK = Gain associated with the desired DASPOT airflow.   To  calibrate
          this  value  first  determine  the throttle position above RATCH at which
          maximum DASPOT airflow is desired.  Subtract FN830 from DASMAX and divide
          the  result  by the throttle delta between RATCH and this maximum dashpot
          airflow to determine the DASPTK value.

       -  DELHYS = Closed to part throttle hysteresis in TP counts.  DELHYS  should
          be  set equal to DELTA + HYSTS (closed throttle breakpoint).  This starts
          the dashpot calculation relative to the C.T./P.T.  breakpoint to  prevent
          changes in dashpot when leaving closed throttle.

       -  DPNEU_MUL = Neutral DASPOT reduction multiplier.  Used to reduce  minimum
          DASPOT during shift of manual transmission.

       -  FN830 = Dashpot preposition offset.

       -  FN879 = A background driven decrement to the dashpot preposition  airflow
          register  (DASPOT)  as  a function of DASPOT.  FN879 can be calibrated to
          achieve an exponentially decaying dashpot which is useful in decaying the
          large DASPOT values used to control over-rich tip out conditions.

       -  FN882A(N - DSDRPM) = Maximum dashpot clip as a function of the RPM  delta
          above desired rpm.  (N - DSDRPM) is clipped to 0 as a minimum.

       -  FN891(VSBAR) = Dashpot maximum clip as a function of vehicle speed.  Used
          in  automatic  transmission  vehicles at higher vehicle speeds to prevent
          harsh backout shifts by limiting large values of dashpot.

       -  FN894(N_RATCH - DSDRPM) = Minimum DASPOT airflow clip when vehicle  speed
          is above DASMPH.  FN894 is used to prevent declutch stalls.  The input is
          N_RATCH which only ratchets down after the declutch.   This  is  done  to
          prevent  the  rpm  from  hanging  up  if  it  flares  after the declutch.
          (N_RATCH - DSDRPM) is clipped to 0 as a minimum.

                                        10-33

                   IDLE SPEED CONTROL, DASHPOT CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  TCDASD = Time constant used when TP is less than or equal to the filtered
          TP  value.   Should  be calibrated such that part throttle backouts where
          closed throttle is not entered do not exhibit a run-on feel.  Too fast  a
          filter  can  have the effect of greatly reducing dashpot airflow prior to
          entry into dashpot control.

       -  TCDASU = Filter constant used when TP is greater  than  the  filtered  TP
          value   (DSTPBR).    The   larger  the  time  constant  the  more  slowly
          pre-position airflow will be available  to  respond  to  tip  in/tip  out
          actions.   Fast  response can also be obtained by use of the offset value
          FN830 without the potential runaway feel that may come with  too  fast  a
          filter constant/airflow gain (DASPTK) combination.

       -  V_879_MULT = VIP multiplier for DASPOT function.



      OUTPUTS

      Registers:

       -  DASPOT = See above.

       -  DSTPBR = See above.



                                 CALIBRATION INFORMATION

      Typical values are supplied for the following calibration constants:

       -  DASPTK = 0.002 ppm/TP count
       -  FN879 = (0,0.001) (0.1,0.002) (0.3,0.006) (0.75,0.05) (2.00,0.10)
       -  TCDASD = 0.75 sec.
       -  TCDASU = 3.3 sec.

























                                        10-34

                   IDLE SPEED CONTROL, DASHPOT CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: ISC_DASPOT_COM5


                           DASHPOT-PREPOSITION MODE (APT >= 0)
                           ===================================
                        (Mode select logic will set ISCFLG to 0)



      While at PT or WOT, airflow is added to the DASPOT term to prepare 
      for a deceleration:
      ------------------------------------------------------------------


            DASPOT = DASPTK * (DSTPBR - (RATCH + DELHYS)) + FN830(N - DSDRPM)



      where:     DSTPBR = ROLAV(TP,time constant)

                 time constant = TCDASU for increasing TP (TP > old DSTPBR)
                               = TCDASD for decreasing TP (TP <= old DSTPBR)



      clips:

       -  DASPOT is clipped to the smaller of FN882A(N  -  DSDRPM)*FN891(VSBAR)  or
          1.99 as a maximum; clip (N - DSDRPM) to zero as a minimum.

       -  minimum clip may be in effect (see FN894 below)




                             FN894 minimum DASPOT clip logic
                             -------------------------------


      FLG_DASMNQ = 1 --------------------|       | clip DASPOT to 
       (speed above threshold)           |AND ---| FN894(N_RATCH - DSDRPM) 
                                         |       | as a minimum
      DASPOT < FN894(N_RATCH - DSDRPM) --|       |  
       (airflow too low)                 |       | --- ELSE ---
                                         |       |
      DNDSUP = 1 ------------------------|       | do not clip to FN894













                                        10-35

                   IDLE SPEED CONTROL, DASHPOT CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               DASHPOT MODE  ( APT = -1 )
                               ==========================
                        (mode select logic will set ISCFLG to -1)



      At closed throttle, the airflow which was previously added to the 
      DASPOT term is bled away.  DASPOT is calculated from the equation 
      below either during non-VIP vehicle operation, or in running VIP 
      when VRUN_ISCFLG = 0.
      -----------------------------------------------------------------


                             DASPOT = DASPOT - FN879(DASPOT)


      clips:

       -  no maximum clip

       -  DASPOT is clipped to either 0 or FN894(N_RATCH-DSDRPM) as a minimum  (see
          FN894 on the previous page)




      DASPOT is calculated from the equation below when in running
      VIP, and VRUN_ISCFLG = 1.
      ------------------------------------------------------------


                    DASPOT = DASPOT - [ FN879(DASPOT) * V_879_MULT ]


      clips:

       -  no maximum clip

       -  DASPOT is clipped to either 0 or FN894(N_RATCH-DSDRPM) as a minimum  (see
          FN894 on the previous page)




















                                        10-36

                       IDLE SPEED CONTROL, MODE SELECT - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                MODE SELECT (MODE_SELECT)


      OVERVIEW

      Bypass idle speed control has  four  modes  of  operation;  dashpot,  dashpot
      preposition,  RPM  control,  and  RPM  control  lockout.   A  flag is used to
      identify these modes for both calibrator convenience and required interaction
      with fuel modulation and spark feedback strategies.

      The mode select logic selects the mode of operation and sets a flag  (ISCFLG)
      which  is  used  to  adjust  the total desired airflow through the air bypass
      valve.



       *  ISCFLG = -1 DASHPOT CONTROL

       *  ISCFLG = 0 DASHPOT PRE-POSITION

       *  ISCFLG = 1 CLOSED LOOP RPM CONTROL

       *  ISCFLG = 2 CLOSED LOOP RPM CONTROL (Lock-out entry to RPM control)



      - DASHPOT PRE-POSITION MODE (ISCFLG = 0)

           In engine run/underspeed mode and when operating at part  or  wide  open
           throttle the ISC system is placed in dashpot pre-position mode.  In this
           mode the  ISC  duty  cycle  is  incremented  a  calibratable  amount  in
           anticipation  of a required dashpot action.  Proper dashpot operation is
           essential on systems having speed density  fuel  controls  in  order  to
           avoid tip in/tip out stalls and HC spiking on decels.


      - DASHPOT MODE (ISCFLG = -1)

           In engine run/underspeed mode and having just transitioned from part  to
           closed  throttle  the system is placed in ISC dashpot control mode.  The
           length of time the ISC system will remain in  dashpot  control  is  both
           hardware/strategy  dependent  (some  applications  have VSS; some manual
           transmission applications have gear and clutch switches).  Regardless of
           the  length  of  time  required  to enter RPM control, as long as closed
           throttle operation is maintained the amount of airflow specified by  the
           dashpot pre-position (see dashpot pre- position logic) is decremented at
           a constant rate until exhausted (until DASPOT = 0).


      - CLOSED LOOP RPM CONTROL (ISCFLG = 1 OR 2)

           For normal entry into C/L RPM control the following conditions  must  be
           satisfied:

            .  If VSS hardware is used it must indicate a speed less than MINMPH

            .  If a manual trans.  with gear/clutch switches; must indicate neutral



                                        10-37

                       IDLE SPEED CONTROL, MODE SELECT - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                *  Note:  Although  the  system  can  provide  acceptable  function
                   without  the  above mentioned hardware either item will increase
                   reliability  in  production.   The  vehicle  speed  sensor   has
                   calibration  benefits outside of ISC (lean cruise control, etc.)
                   and should be considered when specifying system assumptions  for
                   future applications utilizing ISC.


            .  Regardless whether the above hardware is used, normal entry into RPM
               control  requires  that actual engine speed be less than or equal to
               (DSDRPM + RPMCTL) and that closed throttle is indicated.



      The following discussion will attempt to describe entry into C/L RPM  control
      through  the  lock-out  logic  (ISCFLG  =  2).   In a normal deceleration the
      dashpot bleed time will be short relative to the vehicle coastdown time.   As
      soon  as  engine  speed  drops  low  enough  the  ISC system should enter RPM
      control.  However, due to hysteresis in the bypass  valve,  overspecification
      of  idle airflow requirements prior to adaptive ISC learning, ISC learning in
      an unusually high state of engine load (400 psi A/C head pressure), etc.  the
      ISC  actuator may flow too much air at the specified idle duty cycle to allow
      normal entry in RPM control.  When this  condition  occurs  the  system  will
      remain in dashpot control until it can recognize that it should in fact be in
      RPM control.

      Obviously this task is easy if you happen to have a  VSS  or  have  a  manual
      calibration  with gear/clutch switches.  The problem without this hardware is
      to differentiate between a deceleration condition (especially a constant rate
      of  speed  deceleration  --  as  in  a  coast  down  a  mountain)  and a true
      locked-out-of-idle condition.  Most  of  the  logic  in  the  above-mentioned
      attachment deals with this lock-out feature.

      To differentiate between deceleration and idle the rate of change in  RPM  is
      first  evaluated  over a calibrated period of time (ISCTM).  If the speed has
      remained within a specified deadband (NDIF) for this  time  period  a  second
      check  is  performed  to compare LOAD with a calibrated value (LOWLOD for A/C
      off; LOWLOD + ACLOD for A/C on).   The  assumption  is  that  all  idle  LOAD
      values,  including  green  engine/altitude effects etc., will be greater than
      this  value,  and  all  true  deceleration  conditions,  including  the  same
      variabilities, will yield lower LOAD.  It goes without saying that great care
      must be taken in selecting the correct calibration for LOWLOD.

      If the ISC system were locked in dashpot control and both the rate of  engine
      speed  change  and  LOAD criteria were satisfied the strategy would be forced
      into C/L RPM control with ISCFLG indicating 2.  This state would  be  present
      until  the  speed  fell below the normal entry point.  The adaptive ISC would
      learn  the  required  correction,  assuming  sufficient  time  at  idle,  and
      subsequent  dashpot  to  RPM control transitions should follow a normal entry
      path.










                                        10-38

                       IDLE SPEED CONTROL, MODE SELECT - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  APT = Throttle Mode flag.

       -  DASCTL = Value of DASPOT, below which RPM control  can  begin,  with  any
          remaining DASPOT airflow being rolled into IPSIBR.

       -  DASPOT = Dashpot contribution to  idle  air  flow.   Used  to  provide  a
          preposition air flow in Part Throttle and Wide Open Throttle Modes, which
          is "bled off" after a transition to Closed Throttle.   This  gradual  air
          decrement allows a smooth transition to RPM control.

       -  DSDRPM = Desired engine speed.

       -  ISCFLG = ISC mode indicator flag;  -1  ->  Dashpot  Mode,  0  ->  Dashpot
          Preposition Mode, 1 -> Closed Loop RPM Control Mode, 2 -> Closed Loop RPM
          Control (Lock-out entry to RPM control).

       -  ISCTMR = RPM sample timer for lockout logic, secs.  Timer is  cleared  on
          each RPM sample.

       -  LOAD = Universal LOAD as ratio of air charge over standard.

       -  N = Engine speed, RPM.

       -  NLAST = Last sampled RPM for lockout logic.  NLAST is re-calculated  when
          ISCTMR exceeds ISCTM.

       -  SETTMR = RPM control entry delay timer, secs.  Used to delay  entry  into
          RPM control until manifold stabilizes.

       -  VRUN_ISCFLG = RVIP idle speed control flag.

       -  VSBAR = Filtered vehicle speed, mph.

      Bit Flags:

       -  ACCFLG = A/C engaged flag; 1 -> A/C engaged, 0 -> A/C disengaged.

       -  DNDSUP = Delayed neutral/drive flag; 1 -> in drive, loaded.

      Calibration Constants:

       -  ACLOD = LOWLOD modulator - A/C on decel from idle.

       -  ISCTM = Time interval over which the rate of change in  engine  speed  is
          evaluated.   Value  should  be  small  enough  to  avoid  prolonged speed
          hang-ups if the ISC system were locked out of C/L speed control  but  not
          too  short  such that the rate of speed change check becomes meaningless.
          ..Typical value - 4 sec.

       -  LOWLOD = LOAD value to differentiate decel from idle.




                                        10-39

                       IDLE SPEED CONTROL, MODE SELECT - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  MINMPH = Minimum speed to enter C/L  RPM  control.   Applies  to  systems
          having  VSS.   Should be set below the speed at which an automatic trans.
          vehicle rolls along in drive without the  brakes.   This  is  to  prevent
          going into RPM control during parking lot maneuvers.  ..Typical value - 3
          MPH

       -  NDIF = The deviation in engine speed allowed  over  the  ISCTM  specified
          time  interval.   Values  too  small could lock the ISC system out of C/L
          speed control indefinitely.   Values  too  large  invalidate  the  check.
          ..Typical value - 32 RPM

       -  RPMCTL = Added to DSDRPM.  The total defines the engine  speed  threshold
          below  which entry into C/L RPM control is allowed.  This value should be
          reasonably small to avoid inadvertent  entry  into  C/L  ISC.   ..Typical
          value - 90 RPM

       -  SETLNG_TM = Manifold stabilization time.  Used to delay  entry  into  RPM
          control.

       -  TRLOAD = Transmission Load switch;
                   0 -> Manual transmission, no clutch or gear switch, NDSFLG = 0
                   1 -> Manual trans, no clutch or gear switch
                   2 -> Manual trans, one clutch or gear switch
                   3 -> Manual trans, both switches
                   4 -> Automatic trans, NDS
                   5 -> Automatic trans, NPS
                   6 -> Automatic trans, 7 position PRNDL
                   7 -> Automatic trans, PRNDL switches (4EAT)

       -  V_SETLNG_TM = VIP delay to enter ISC ROM control.



      OUTPUTS

      Registers:

       -  ISCFLG = See above.

       -  ISCTMR = See above.

       -  NLAST = See above.


















                                        10-40

                       IDLE SPEED CONTROL, MODE SELECT - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: ISC_MODE_SELECT_COM2


      APT >= 0 -----------------------------| ISCFLG = 0
       (not closed throttle)                | NLAST = N
                                            | ISCTMR = 0      
                                            |  (in dashpot preposition mode)
                                            |
                                            | --- ELSE --- 
      VSBAR <= MINMPH ----------------|     | 
       (vehicle stopped)              |     |
                                      |     |
      DASPOT <= DASCTL ---------------|     |
       (dashpot complete)             |     |
                                      |     |
      TRLOAD <> 3 --------------|     |     | 
       (not man trans           |     |     |
        w/both switches)        |     |     |
                                |OR --|AND -| ISCFLG = 1       
      DNDSUP = 0 ---------------|     |     |  (in RPM Control Mode)
       (neutral)                      |     |
                                      |     |
      SETTMR > SETLNG_TM -------------|     |
       (manifold stable)              |     | 
                                      |     |         
      N <= DSDRPM + RPMCTL -----------|     |
                                            | --- ELSE ---
      VSBAR <= MINMPH ----------------|     |  
       (vehicle stopped)              |     | 
                                      |     | 
      DASPOT <= DASCTL ---------------|     |   
       (dashpot complete)             |     |
                                      |     | 
      TRLOAD <> 3 --------------|     |     | 
       (not manual transmission |OR --|AND -| ISCFLG = 2
        w/ both switches)       |     |     |  (in RPM Control Lockout mode;
                                |     |     |   same action as RPM Control mode)
      DNDSUP = 0 ---------------|     |     |
       (neutral)                      |     |
                                      |     | 
      SETTMR > SETLNG_TM -------------|     |
       (manifold stable)              |     |
                                      |     |
      LOCKOUT LOGIC TRUE -------------|     |
       (locked out of RPM control)          | 
                                            |  --- ELSE --- 
                                            |
                                            | ISCFLG = -1
                                            |  (in Dashpot mode)


      NOTE:  SETTMR and ISCTMR are cleared in MODE_SELECT logic.







                                        10-41

                       IDLE SPEED CONTROL, MODE SELECT - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                      LOCKOUT LOGIC


      ISCFLG >= 1 --------------------|      
                                      |OR --| Lockout Logic True 
      VRUN_ISCFLG = 1 ----------|     |     |  (stay in lockout until RPM falls)
       (VIP modifying ISC)      |AND -|     | Exit Lockout Logic
                                |           |
      SETTMR > V_SETLNG_TM -----|           |
       (manifold stable)                    |
                                            | --- ELSE ---
                                            |
      ISCTMR < ISCTM -----------------------| Lockout Logic False
                                            |  (not time to sample RPM yet)
                                            | Exit Lockout Logic
                                            |
                                            | --- ELSE ---
                                            |
      |N - NLAST| > NDIF -------------------| Lockout Logic False
                                            |  (RPM changing quickly, 
                                            |   must be decel)
                                            | NLAST = N
                                            | ISCTMR = 0
                                            | Exit Lockout Logic
                                            |
                                            | --- ELSE ---
      TRLOAD >= 3 --------------------|     |
       (auto trans)                   |     |
                                      |AND -| Lockout Logic True 
                                      |     | (can't be decel when in neutral)
      DNDSUP = 0 ---------------------|     | Exit Lockout Logic
       (in neutral)                         |
                                            | --- ELSE ---
      ACCFLG = 1 ---------------|           | 
       (A/C on)                 |AND -|     |
                                |     |     |
      LOAD < LOWLOD + ACLOD ----|     |     |
       (decel LOAD)                   |OR --| Lockout Logic False
                                      |     |  (LOAD indicates decel)
      ACCFLG = 0 ---------------|     |     | Exit Lockout Logic
       (A/C off)                |AND -|     |
                                |           |
      LOAD < LOWLOD ------------|           |
       (decel LOAD)                         | 
                                            | --- ELSE ---
                                            |
                                            | Lockout Logic True
                                            | Exit Lockout Logic












                                        10-42

                        IDLE SPEED CONTROL, KAM UPDATE - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               KAM UPDATE (ISCKAM_UPDATE)


      OVERVIEW

      This section describes the adaptive ISC update routine.   In  general,  under
      steady  state  conditions  on  a  stabilized engine at idle, the adaptive ISC
      logic will evaluate whether the open  loop  prediction  of  airflow  requires
      correction.  If a correction factor was applied, IPSIBR has a non-zero value,
      the adaptive ISC strategy will roll this correction value into KAM and  drive
      the  IPSIBR term back to zero.  Control of the rate at which the IPSIBR value
      is driven to zero is calibration-dependent.

      There are six ISCKAM cells designated for idle corrections.  The  appropriate
      cell  is  pointed  to by the flag ISFLAG which tracks the load state at idle.
      The following logic must be satisfied to update KAM:

       *  In RPM control
       *  Within the RPM deadband for a calibrated time interval (UPDISC)
       *  No hi-cam adder present (HCAMFG = 0)
       *  IPSIBR non zero
       *  No kam errors
       *  IBGPSI >= UPDATM


      ISCKAM corrections are clipped to the same maximum and minimum limits as  the
      C/L  RPM  integrator  (PSIBRM/PSIBRN).   Each  time  the  update criteria are
      satisfied both IPSIBR and ISCKAM  are  adjusted  one  bit  (0.00024  ppm)  in
      opposite directions until IPSIBR = 0.



      DEFINITIONS

      INPUTS

      Registers:

       -  IBGPSI = Background loop counter, used to pace ISCKAMn update.

       -  ISCKAMn = Adaptive ISC correction for each load condition n, where  n  is
          the  value  of  ISFLAG.   The calculated value of ISCKAMn is added to the
          total desired idle air flow (DESMAF).

       -  ISCTMR = RPM sample timer for adaptive ISC, secs.  Timer  is  cleared  if
          |RPMERR_A| exceeds the rpm deadband, RPMDED.

       -  IPSIBR = The closed loop integration  component  of  total  DESMAF,  ppm.
          Designed to provide integral feedback, IPSIBR adjusts the value of DESMAF
          to correct for sustained changes in idle load.  An increase  or  decrease
          in IPSIBR results in a corresponding change to bypass valve duty cycle.

      Bit Flags:

       -  HCAMFG = Flag indicating the completion of Hi-Cam; 0 -> no desired engine
          speed  adder  exists, 1 -> an rpm adder above base idle is present.  Flag
          is used in the ISC adaptive update routine to disable updates when HCAMFG
          = 1.


                                        10-43

                        IDLE SPEED CONTROL, KAM UPDATE - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  ISCFLG = ISC mode indicator flag;  -1  ->  Dashpot  Mode;  0  ->  Dashpot
          Preposition Mode; 1 -> Closed Loop RPM Control Mode; 2 -> Closed Loop RPM
          Control (Lock-out entry to RPM control)

       -  ISFLAG = Idle load state indicator used to select the ISCKAM cell.

       -  KAM_ERROR = KAM error flag; 1 -> KAM data invalid.

      Calibration Constants:

       -  PSIBRM = Maximum allowed value for ISCKAMn.  ISCKAMn is clipped  to  this
          value.

       -  PSIBRN = Minimum allowed value for ISCKAMn.  ISCKAMn is clipped  to  this
          value.

       -  RPMDED =  Adaptive  ISC  learning  deadband.   Learning  is  disabled  if
          RPMERR_A exceeds this deadband.

       -  UPDATM = Pacing at which the IPSIBR correction factor is rolled into KAM.
          Value is in terms of background loop counts.

       -  UPDISC = Time that engine speed must be  within  the  specified  deadband
          (RPMDED) prior to KAM update.



      OUTPUTS

      Registers:

       -  IBGPSI = See above.

       -  ISC_ERR = Base strategy ISC error flag used in VIP.

       -  ISCKAMn = See above.

       -  ISCTMR = See above.

       -  ISKSUM = CHECKSUM  for  adaptive  idle  speed  KAM  cells,  used  in  KAM
          initialization strategy.

       -  IPSIBR = See above.



      CALIBRATION INFORMATION

      The following typical values are provided for calibration constants:

       -  RPMDED = 50 rpm.
       -  UPDATM = 5 background passes.
       -  UPDISC = 2 seconds.







                                        10-44

                        IDLE SPEED CONTROL, KAM UPDATE - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: ISC_ISCKAM_COM1


      always ---------------------------------| IBGPSI = IBGPSI + 1
                                              | Clip to Maximum


      ISCFLG <> 1 ----------------------------| IBGPSI = 0
                                              | Exit ISCKAM_UPDATE logic


      |RPMERR_A| > RPMDED --------------------| ISCTMR = 0


      ISCTMR < UPDISC ------------------|
                                        |
      HCAMFG = 1 -----------------------|
                                        |OR --| IBGPSI = 0
      IPSIBR = 0 -----------------------|     | Exit ISCKAM_UPDATE logic
                                        |
      KAM_ERROR = 1 --------------------|


      IBGPSI < UPDATM ------------------------| Exit ISCKAM_UPDATE logic
                                              |
                                              | --- ELSE ---
                                              |
                                              | IBGPSI = 0


      IPSIBR > 0 -----------------------|
                                        |AND -| Increment ISCKAMn
      ISCKAMn < PSIBRM -----------------|     | Increment ISKSUM
                                              | Decrement IPSIBR
                                              |
                                              | --- ELSE ---
      IPSIBR <= 0 ----------------------|     |
                                        |AND -| Decrement ISCKAMn
      ISCKAMn > PSIBRN -----------------|     | Decrement ISKSUM
                                              | Increment IPSIBR
                                              |
                                              | --- ELSE ---
      ISCKAMn <= PSIBRN ----------------|     |
                                        |OR --| ISC_ERR = 2
      ISCKAMn => PSIBRM ----------------|     |
                                              | --- ELSE ---
                                              |
                                              | No change to ISC_ERR











                                        10-45

                 IDLE SPEED CONTROL, PERLOAD_ISC CALCULATION - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 PERLOAD_ISC CALCULATION


      OVERVIEW

      PERLOAD_ISC is used by the ISC logic as the Y  input  to  the  ISCDTY  table,
      FN8000(DEBYMA,PERLOAD_ISC).



      DEFINITIONS

      INPUTS

      Registers:

       -  BP = Barometric pressure valve stored in KAM.

       -  DEBYMA = Desired mass air flow through the ISC valve, ppm.  This quantity
          is  calculated  as  the total desired idle air flow (DESMAF) less the air
          flow through the throttle plate, and  is  corrected  for  altitide  using
          FN890(BP).

       -  LOAD = Normalized air meter air mass  flow,  unitless.   Equal  to:   air
          mass/(N*ENGCYL*SARCHG).

      Calibration constants:

       -  FN035(N) = Peak load at sea level as a function of RPM.

       -  FN8000 = Characterization table for the ISC actuator;
                   X = FN061(DEBYMA)
                   Y = FN060(PERLOAD_ISC)



      OUTPUTS

      Registers:

       -  PERLOAD_ISC = Used by ISC logic as the Y input to FN8000.   0-1.0  scale,
          Unitless.




      PROCESS
                          STRATEGY MODULE: ISC_PERLOAD_ISC_COM1


                       LOAD       29.9
      PERLOAD_ISC =  --------  *  ----
                     FN035(N)      BP







                                        10-46

                IDLE SPEED CONTROL, ISC DUTY CYCLE CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                        ISC DUTY CYCLE CALCULATION (ISCDTY_CALC)


      OVERVIEW

      The ISC duty cycle is calculated in ISCDTY_CALC.  The mass air  flow  through
      the  ISC actuator (DEBYMA) is calculated as the desired mass air flow at idle
      (DESMAF) less  the  flow  through  the  throttle  plate  etc,  corrected  for
      altitude.

      The desired duty cycle is calculated as follows:

      Once the desired mass flow value is finalized, the appropriate duty cycle  is
      calculated and output.  The final DESMAF value is calculated in IPSIBR_CALC.

      The calibrated leakage term (ITHBMA) is subtracted from DESMAF, to obtain the
      actual  flow required from the ISC actuator (DEBYMA).  DEBYMA and PERLOAD_ISC
      are the inputs to the ISC duty cycle transfer function (FN8000).  Output from
      FN8000 is the specified ISC duty cycle.

      The final value of ISCDTY includes an offset and  a  multiplier  (IDCOFS  and
      IDCMUL) used primarily as calibration tools.



      DEFINITIONS

      INPUTS

      Registers:

       -  BP = Barometric pressure, " Hg.

       -  DEBYMA = Desired mass air flow through the ISC valve, ppm.  This quantity
          is  calculated  as  the total desired idle air flow (DESMAF) less the air
          flow through the throttle plate, and  is  corrected  for  altitide  using
          FN890(BP).

       -  DESMAF = Total desired idle air flow, ppm.   Calculated  as  the  sum  of
          predicted  air flow (DESMAF_PRE), dashpot air flow (DASPOT), integral air
          flow (IPSIBR) and KAM correction (ISCKAMn).

       -  ISCDTY = Idle speed control valve duty cycle,  fraction  of  fully  open.
          Calculated  as  a  transfer  function  (FN8000)  of the desired mass flow
          (DEBYMA) through the ISC valve, and the load (PERLOAD_ISC).

       -  PERLOAD_ISC = Used by ISC logic as the Y input to FN8000.   0-1.0  scale,
          unitless.












                                        10-47

                IDLE SPEED CONTROL, ISC DUTY CYCLE CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  IDCMUL = ISCDTY multiplier, no units.

       -  IDCOFS = ISCDTY adder, fraction of fully open.

       -  ITHBMA = Throttle body idle mass air flow with  throttle  plate  at  idle
          screw  stop and 0% ISC duty cycle.  This is any airflow which does not go
          through the bypass air solenoid, i.e.  throttle plate, PCV system, intake
          leakage, etc.

       -  DEBYCP = Minimum allowed airflow through the ISC  actuator.   This  is  a
          clip on DEBYMA.

       -  FN060(PERLOAD_ISC) = Row normalizing function for FN8000.

       -  FN061(DEBYMA) = Column normalizing function for FN8000.

       -  FN890(BP) = ISC duty cycle altitude compensation subtractor.  Required to
          offset the effect with altitude of a varying pressure drop across the ISC
          actuator, which affects its air flow.

       -  FN8000 = Characterization table for the ISC actuator;
                   X = FN061(DEBYMA)
                   Y = FN060(PERLOAD_ISC)



      OUTPUTS

      Registers:

       -  DEBYMA = See above.

       -  ISCDTY = See above.



      PROCESS
                            STRATEGY MODULE: ISC_ISCDTY_COM2


                  ISCDTY = IDCMUL * FN8000(DEBYMA,PERLOAD_ISC) + IDCOFS

      where
                   DEBYMA = [DESMAF - FN890(BP) - ITHBMA] * 29.92 / BP



       -  DEBYMA is clipped to DEBYCP as a minimum.

       -  ISCDTY is clipped to 1.0 as a maximum.








                                        10-48

            IDLE SPEED CONTROL, ISC DUTY CYCLE EXPANDER PULSEWIDTH - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           ISC DUTY CYCLE EXPANDER PULSEWIDTH


      OVERVIEW

      This routine computes the idle speed pulsewidth for the DUCE chip in units of
      duce_ticks.



      DEFINITIONS

      INPUTS

      Registers:

       -  ISCDTY = Idle speed control duty cycle.



      OUTPUTS

      Registers:

       -  ISC_PW_DTKS = Idle speed duty cycle pulsewidth in duce_ticks.

       -  ISC_PW_DUCE = DUCE hardware register.




      PROCESS
                            STRATEGY MODULE: ISC_DUCE_PW_COM1


      always -----------------| ISC_PW_DTKS = ISCDTY
                              |  (clip to 65535 duce_ticks)
                              | ISC_PW_DUCE = ISC_PW_DTKS






















                                        10-49

                    IDLE SPEED CONTROL, IPSIBR CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   IPSIBR CALCULATION


      OVERVIEW

      IPSIBR is the closed loop integration component of total DESMAF.  Designed to
      provide  integral feedback, IPSIBR adjusts the value of DESMAF to correct for
      sustained changes in idle load.  An increase or decrease in IPSIBR results in
      a corresponding change to bypass valve duty cycle.

      The IPSIBR calculation has the following characteristics:

       -  IPSIBR is only updated in rpm control or lockout mode.

       -  Different time constants are used depending on whether RPM is too high or
          too low.

       -  IPSIBR is not updated if the ISC valve  is  already  at  its  maximum  or
          minimum position (PSIBRM and PSIBRN, respectively).

       -  On load state transitions (A/C, N/DR and CT/PT), IPSIBR is always clipped
          to zero as a minimum.

       -  The IPSIBR update has no deadband.  Instead, it is driven by an RPM error
          term RPMERR_A (A for "air").  The time constant is TCBPA.

       -  Calibration of gain is not required.  The term (DESMAF_PRE /  DSDRPM)  in
          the   ISCPSI   calculation   automatically  adjusts  the  gain  for  RPM,
          temperature and accessory loads.

       -  The IPSIBR pacing calibration is controlled by the  two  scalars  TC_OVER
          and  TC_UNDER  for  speed  higher  and  lower than desired, respectively.
          These scalars represent time constants  for  the  engine  to  respond  to
          changes in duty cycle.


























                                        10-50

                    IDLE SPEED CONTROL, IPSIBR CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  BG_TMR = Background loop time, secs.

       -  DASPOT = Dashpot contribution to idle air flow, ppm.  Used to  provide  a
          preposition air flow in Part Throttle and Wide Open Throttle Modes, which
          is "bled off" after a transition to Closed Throttle.   This  gradual  air
          decrement allows a smooth transition to RPM control.

       -  DEBYMA = Desired airflow through the ISC actuator (ppm).

       -  DESMAF_PRE = Predicted desired idle air flow, ppm.  This is the open loop
          air  flow  prediction which is required to idle, calculated as a function
          of ECT and time since start and including A/C, power steering and  heated
          windshield   adders.   It  does  not  include  any  closed  loop  or  KAM
          corrections, and is NOT DISPLAYABLE.

       -  DSDRPM = Desired RPM.  Used as the control  speed  for  closed  loop  RPM
          control.

       -  IPSIBR = The closed loop integration  component  of  total  DESMAF,  ppm.
          Designed to provide integral feedback, IPSIBR adjusts the value of DESMAF
          to correct for sustained changes in idle load.  An increase  or  decrease
          in IPSIBR results in a corresponding change to bypass valve duty cycle.

       -  ISC_A_DER = Derivative control term used to modify DESMAF.  Contains  the
          output of FN851.

       -  ISC_A_PROP = Proportional control term used to modify  DESMAF.   Contains
          the output of FN852.

       -  ISCDTY = ISC actuator duty cycle, percent.

       -  ISCKAM = Adaptive correction for each load condition.

       -  ISCPSI = The quantity of air which is added  to  IPSIBR  each  background
          pass.

       -  ISFLAG = Idle load indicator, set according to the current state  of  the
          A/C (on or off) and of the transmission (neutral or drive).

       -  ISLAST = Register which tracks the state of engine load from the previous
          background  pass.   Used in determining when it is necessary to increment
          the filtered air mass (FAM) and clip the C/L idle speed integrator  to  a
          minimum value.

       -  KAM_ERROR = Indicates keep alive RAM invalid.

       -  RPMERR = RPMERR(DESIRED RPM - N) for spark feedback.

       -  RPMERR_A = Filtered value of RPMERR for airflow  control,  time  constant
          TCBPA.




                                        10-51

                    IDLE SPEED CONTROL, IPSIBR CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  RPMERR_DAO = Old value of RPMERR_DA, for input to FN851.

       -  RUNUPTMR = Time since runup rpm exceeded (0.125 secs).

      Bit Flags:

       -  CTPTFG = Closed throttle to Part/Wide Open Throttle transition flag; 1 ->
          Transition occurred.

       -  ISCFLG = ISC MODE Flag; -1 -> Dashpot  mode,  0  ->  Dashpot  Preposition
          mode, 1 -> RPM Control mode, 2 -> RPM Control Lockout mode.

       -  V_MODE_SETUP = VIP throttle Adjust Mode enable flag; 1 -> enable.

       -  VRUN_ISCFLG = Self test engine running flag; 1  ->  Engine  running  Self
          Test in progress.

      Calibration Constants:

       -  DEBYCP = Minimum value of ISC valve airflow, ppm.

       -  FN811(N) = Air adder to ISC_A_PROP to correct  for  dips  at  low  engine
          speed.   This function is similar to the proprotional control term except
          it should be used at low RPM.

       -  FN851(RPMERR_DAO - RPMERR) = Derivative control function used  to  modify
          DESMAF.

       -  FN852(RPMERR) = Proportional control function used to modify DESMAF.

       -  IPSIDLY = Time delay to disable IPSIBR update, secs.

       -  PSIBRM = Maximum allowed value for IPSIBR when in normal strategy.

       -  PSIBRN = Minimum allowed value for IPSIBR when in normal strategy.

       -  TC_OVER = Time constant used to control the integral gain (or pacing)  of
          the  term,  IPSIBR.  TC_OVER is used when RPMERR <= 0, ie when the actual
          speed is higher than desired.  A large value of TC_OVER corresponds to  a
          small integral gain, a small value corresponds to a high gain.

       -  TC_UNDER = Time constant used to control the integral gain (or pacing) of
          the  term, IPSIBR.  TC_UNDER is used when RPMERR > 0, ie, when the actual
          speed is lower than desired.  A large value of TC_UNDER corresponds to  a
          small integral gain, a small value corresponds to a high gain.

       -  V_MODE_SEL = Calibration flag which chooses whether to use RPM  error  or
          ISCDTY error during TP adjust mode.

       -  VSIBRM = Maximum allowed value for IPSIBR when in Running VIP.

       -  VSIBRN = Minimum allowed value for IPSIBR when in Running VIP.

       -  VTC_OVER = Time constant used to control the integral gain (or pacing) of
          the  term,  IPSIBR,  when  in  Engine Running VIP.  VTC_OVER is used when
          RPMERR  <=  0,  ie  when  the  actual  speed  is  higher  than   desired.
          Corresponds to TC_OVER in normal strategy.



                                        10-52

                    IDLE SPEED CONTROL, IPSIBR CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  VTC_UNDER = Time constant used to control the integral gain  (or  pacing)
          of  the term, IPSIBR, when in Engine Running VIP.  VTC_UNDER is used when
          RPMERR > 0, ie when the actual speed is lower than desired.   Corresponds
          to TC_UNDER in normal strategy.



      OUTPUTS

      Registers:

       -  DESMAF = Total desired idle air flow, ppm.   Calculated  as  the  sum  of
          predicted  air flow (DESMAF_PRE), dashpot air flow (DASPOT), integral air
          flow (IPSIBR) and KAM correction (ISCKAMn).

       -  IBGPSI = Background counter used to control pacing of ISC KAM learning.

       -  IPSIBR = See above.

       -  ISC_A_DER = See above.

       -  ISC_A_PROP = See above.

       -  ISC_ERR = Base strategy ISC error flag used in VIP.

       -  ISCPSI = See above.

       -  ISKSUM = Idle adaptive airflow check sum.
































                                        10-53

                    IDLE SPEED CONTROL, IPSIBR CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: ISC_IPSIBR_COM2


      ISCFLG <= 0 ------------------------|        
       (dashpot or dashpot preposition)   |OR --|  (do not update IPSIBR unless
                                          |     |   in RPM Control or RPM Control
      RUNUPTMR < IPSIDLY -----------------|     |   lockout) 
       (delay IPSIBR update after start)        | No change to IPSIBR
                                                |
                                                | --- ELSE ---
      RPMERR_A < 0 -----------------------|     | 
       (overspeed error)                  |     |
                                          |AND -| ISC_ERR = -1
      DEBYMA <= DEBYCP -------------------|     |  (flag used in VIP)
       (actuator airflow at minimum)            | ISCPSI = 0
                                                |  (actuator minimum airflow)
                                                | No change to IPSIBR
                                                |
                                                | --- ELSE ---
      RPMERR_A >= 0 ----------------------|     |
       (underspeed error)                 |     |
                                          |AND -| ISC_ERR = 1        
      ISCDTY >= 98% ----------------------|     |  (flag used in VIP)
                                                | ISCPSI =  0
                                                |  (actuator maximum duty cycle)
                                                | No change to IPSIBR
                                                |
                                                | --- ELSE ---
                                                |
                                                |  (OK to adjust IPSIBR)
                                                | IPSIBR = IPSIBR + ISCPSI
                                                | Clip IPSIBR to PSIBRN as a
                                                |  minimum and PSIBRM as a
                                                |  maximum


      NOTE:  In Engine Running VIP (VRUN_ISCFLG = 1), IPSIBR is clipped  to  VSIBRM
      as  a maximum and VSIBRN as a minimum.  The clearing of the flag ISC_ERR done
      in Continuous VIP.




















                                        10-54

                    IDLE SPEED CONTROL, IPSIBR CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Where ISCPSI is calculated as follows:


                                    NORMAL CONDITIONS


      ISCPSI = RPMERR_A * (DESMAF_PRE)/DSDRPM * BG_TMR/(TC_UNDER or TC_OVER)



      TC_OVER/TC_UNDER LOGIC


      RPMERR_A >= 0 ----------------------| Use TC_UNDER in ISCPSI calculation
                                          |
                                          | --- ELSE ---
                                          |
                                          | Use TC_OVER in ISCPSI calculation




                         IN ENGINE RUNNING VIP (VRUN_ISCFLG = 1)


      ISCPSI = RPMERR_A * (DESMAF_PRE)/DSDRPM * BG_TMR/(VTC_UNDER or VTC_OVER)



      VTC_OVER/VTC_UNDER LOGIC


      RPMERR_A >= 0 ----------------------| Use VTC_UNDER in ISCPSI calculation
                                          |
                                          | --- ELSE ---
                                          |
                                          | Use VTC_OVER in ISCPSI calculation


      ISFLAG <> ISLAST -------------------|
       (load state transition)            |OR --| Clip IPSIBR to 0 as a minimum
                                          |     | IBGPSI = 0
      CTPTFG = 1 -------------------------|     |
       (transition out of CT)                   | --- ELSE ---
                                                |
                                                | Do not clip IPSIBR














                                        10-55

                    IDLE SPEED CONTROL, IPSIBR CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                TOTAL DESMAF CALCULATION


      KAM_ERROR = 1 ----------------------|
       (kam qualify error)                |
                                          |
      ISCKAM(ISFLAG) > PSIBRM ------------|OR --|  (assume ISCKAM cells 
       (greater than maximum)             |     |   are invalid)
                                          |     |  (reinitialize all ISCKAM
      ISCKAM(ISFLAG) < PSIBRN ------------|     |   cells) 
       (less than minimum)                      | All ISCKAM cells = 0
                                                | ISKSUM = 0


      ISCFLG > 0 -------------------------------| ISC_A_PROP = FN852(RPMERR) 
       (RPM control or lockout)                 |              + FN811(N)
                                                | ISC_A_DER = 
                                                |  FN851(RPMERR_DAO - RPMERR)
                                                |
                                                | --- ELSE ---
                                                |
                                                | ISC_A_PROP = FN811(N)
                                                | ISC_A_DER = 0


      V_MODE_SETUP = 1 -------------------|
                                          |AND -| DESMAF = DESMAF_PRE + IPSIBR +
      V_MODE_SEL = 1 ---------------------|     |   ISC_A_PROP + ISC_A_DER
       (select ISCDTY error check)              |
                                                | --- ELSE 
                                                |
      V_MODE_SETUP = 1 -------------------------| DESMAF = DESMAF_PRE
       (VIP Throttle Adjust Mode)               |
                                                | --- ELSE ---
                                                |
                                                | DESMAF = DESMAF_PRE + IPSIBR + 
                                                |   DASPOT + ISCKAM(ISFLAG) +
                                                |   ISC_A_PROP + ISC_A_DER 






















                                        10-56












                                      CHAPTER 11

                                 A/C CLUTCH STRATEGY

















































                                         11-1

                    A/C CLUTCH STRATEGY, A/C CLUTCH INPUT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    A/C CLUTCH INPUT


      OVERVIEW

      This strategy module is for use in applications that have the A/C input going
      high  when  A/C  is  selected,  and  do  NOT have the Heated Front Windshield
      multiplexed on the same input as the A/C.



      DEFINITIONS

      INPUTS

      Bit Flags:

       -  ACCS = Flag indicating the state of the AC cpu input.



      OUTPUTS

      Bit Flags:

       -  ACSW = A/C switch input status; 1 -> A/C on.




      PROCESS
                             STRATEGY MODULE: ACC_INPUT_COM3


      ACCS = 1 --------------------------------| ACSW = 1
                                               |  (A/C input "on")
                                               | 
                                               | --- ELSE --- 
                                               | 
                                               | ACSW = 0
                                               |  (A/C input "off")



















                                         11-2

                   A/C CLUTCH STRATEGY, A/C CLUTCH CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   A/C CLUTCH CONTROL


      OVERVIEW

      The A/C clutch control strategy disengages the air conditioning  clutch  when
      compressor  operation is undesirable.  Control is achieved through the use of
      an EEC controlled, normally closed relay or solid state  switch  in  the  A/C
      compressor  clutch circuit.  The strategy (depending on calibration) requests
      that the A/C clutch be disengaged when any of the  following  conditions  are
      met.  CCD/PTPE calibration guideline constraints, where applicable, are shown
      in parentheses.


                   ***********************  NOTE  ************************
                   *                                                     *
                   *   CLIMATE CONTROL DIVISION MUST BE APPRISED OF ANY  *
                   *     DEVIATIONS FROM THE CALIBRATION GUIDELINES.     *
                   *                                                     *
                   ***********************  NOTE  ************************



      1.  Time since start is less than a calibration value (5 second maximum).

      2.  Throttle position is greater than a calibration value (at  least  90%  of
          the  "low  limit"  TP_REL  at  full  throttle  travel) and the time since
          disabling due to throttle position is less than a calibration  value  (25
          seconds maximum).

      3.  Engine coolant temperature is  greater  than  an  "overheat"  calibration
          value.  (248 deg F minimum, maximum 10 deg F hysterisis).

      4.  Engine RPM is less than a near stall value (at least 100 RPM  under  base
          idle; re-enabled no less than 50 RPM under base idle).

      5.  Engine RPM is above the RPM that could cause damage to the A/C compressor
          (value depends on compressor type and pulley ratio).



      The A/C clutch will be requested when all of  the  following  conditions  are
      met:


      1.  None of the above disabling conditions are true.

      2.  The A/C panel switch is closed indicating driver demand for A/C.

      3.  The cycling pressure switch in the A/C system is closed.

      4.  The A/C clutch has been disengaged for a minimum time.  Used  to  prevent
          rapid cycling (2.0 - 2.5 seconds).







                                         11-3

                   A/C CLUTCH STRATEGY, A/C CLUTCH CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  ACIOTMR = A/C OFF delay timer, for ISC.

       -  ACTPTMR2 = Not at high throttle angle timer for A/C clutch control,  sec.
          Used  to delay A/C re-enable after TP decreases below the high TP disable
          condition.

       -  ATMR1 = Time since Start up, sec.

       -  ECT = Engine Coolant Temperature, deg.  F.

       -  N = Engine speed, rpm.

       -  TP_REL = Relative Throttle Position (TP - RATCH), counts.

      Bit Flags:

       -  ACSW = Flag that indicates the state of the AC input.

       -  ACECT_FLG = A/C ECT flip flop.

       -  ACNLO_FLG = A/C RPM low flag.

       -  ACNHI_FLG = A/C RPM high flag.

       -  ACRQST = A/C requested flag; 1 -> request.

       -  ACTP_FLG = A/C throttle position flag.

       -  ACTPLOW_FLG = A/C throttle position low flag.

       -  RUNNING = RVIP enable flag.

      Calibration Constants:

       -  ACECT_CL = Minimum ECT to disable A/C clutch, deg.   F.   Guideline;  not
          lower than ACECT_SH minus 10 deg.  F.

       -  ACECT_SH = Maximum ECT to enable A/C clutch,  deg.   F.   Guideline;  not
          lower than 248 deg.  F.

       -  AC_MN_DT = Minimum disable time for A/C clutch.

       -  ACMNDT_N = Time delay to keep A/C disabled after leaving high rpm, sec.

       -  ACMNDT_TP = Time delay to keep A/C disabled after leaving  high  throttle
          angle, sec.

       -  ACNHI_SH = Maximum RPM to enable A/C clutch, rpm.  Guideline; depends  on
          compressor type and pulley ratio.

       -  ACNLO_CH = Maximum RPM to disable A/C clutch, rpm.  Guideline; not higher
          than "base idle rpm - 50".


                                         11-4

                   A/C CLUTCH STRATEGY, A/C CLUTCH CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  ACNLO_SL = Minimum RPM to enable A/C clutch, rpm.  Guideline; not  higher
          than "base idle rpm - 100".

       -  ACSTRD = Time  delay  after  start  up  before  enabling  the  A/C,  sec.
          Guideline:  not more than 5 secs.

       -  ACTP_CL = Maximum TP_REL to  increment  ACTPTMR2,  counts.   Provides  TP
          hystersis  for  high  throttle  angle  A/C  disable.  Should be less than
          ACTP_SH.

       -  ACTP_SH = Maximum TP_REL to enable A/C  clutch,  counts.   Guideline;  at
          least 90% of minimum TP_REL at full throttle travel.

       -  WOTCOT = Maximum time to disable A/C at high  TP,  sec.   Guideline;  not
          more than 25 seconds.



      OUTPUTS

      Registers:

       -  ACIOTMR = See above.

       -  ACITMR = A/C clutch idle turn on delay timer.

       -  ACTPTMR2 = See above.

      Bit Flags:

       -  ACECT_FLG = See above.

       -  ACNLO_FLG = See above.

       -  ACNHI_FLG = See above.

       -  ACRQST = See above.

       -  ACTP_FLG = See above.

       -  ACTPLOW_FLG = See above.



















                                         11-5

                   A/C CLUTCH STRATEGY, A/C CLUTCH CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: ACC_CONTROL_COM1


      ECT > ACECT_SH -------------------|S Q -| ACECT_FLG
       (overheated)                     |
                                        |
      ECT < ACECT_CL -------------------|C


      N < ACNLO_SL ---------------------|S Q -| ACNLO_FLG
       (near stall)                     |
                                        |
      N > ACNLO_CH ---------------------|C


      N > ACNHI_SH ---------------------|S Q -| ACNHI_FLG
       (high rpm)                       |
                                        |
      ACIOTMR > ACMNDT_N ---------------|C
       (not at high rpm re-enable delay)


      ACTPTMR2 > ACMNDT_TP -------------|S Q -| ACTPLOW_FLG
       (at low TP for a time)           |
                                        |
      ACTP_FLG = 1 ---------------------|C
       (WOT cutout invoked)


      TP_REL > ACTP_SH -----------|
       (high TP)                  |AND -|S Q -| ACTP_FLG
                                  |     |
      ACTPLOW_FLG = 1 ------------|     |
       (been at low TP)                 |
                                        |
      ACTPTMR2 > ACMNDT_TP -------|     |
       (at low TP for a time)     |OR --|C
                                  |
      ACIOTMR > WOTCOT -----------|
       (AC been off for a time)



















                                         11-6

                   A/C CLUTCH STRATEGY, A/C CLUTCH CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      RUNNING = 1 ----------------------|
       (KOER selftest)                  |
                                        |
      ACSW = 0 -------------------------|
       (A/C switch "off")               |
                                        |
      ACIOTMR < AC_MN_DT ---------|     |
       (minimum off time)         |AND -|
                                  |     |
      ACRQST = 0 -----------------|     |
       (A/C not requested)              |OR --| ACRQST = 0
                                        |     |  (A/C not requested)
      ATMR1 < ACSTRD -------------------|     |
       (start up delay)                 |     |
                                        |     |
      ACECT_FLG = 1 --------------------|     |
                                        |     |
      ACNLO_FLG = 1 --------------------|     |
                                        |     |
      ACNHI_FLG = 1 --------------------|     |
                                        |     |
      ACTP_FLG = 1 ---------------------|     |
                                              | --- ELSE ---
                                              |
                                              | ACRQST = 1
                                              |  (A/C requested)


































                                         11-7

                   A/C CLUTCH STRATEGY, A/C CLUTCH CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                A/C CLUTCH CONTROL TIMERS


      ACTPTMR2 - NOT AT HIGH THROTTLE ANGLE TIMER FOR  A/C  CLUTCH  CONTROL  (0.125
      sec)

      This timer is used in conjunction with the ACIOTMR timer to provide  a  means
      of  keeping  the  A/C  clutch  disabled  when  leaving  high  throttle angles
      momentarily to shift gears.  Note:  If WOTCOT is  calibrated  to  zero,  this
      timer has no effect on the A/C clutch.


      TP_REL < ACTP_CL -----------------------| Increment ACTPTMR2
       (throttle is not close to wide open)   |
                                              | --- ELSE ---
                                              |
                                              | ACTPTMR2 = 0


      ACITMR - CLOSED THROTTLE A/C CLUTCH ENABLE DELAY TIMER (SEC)

      This timer is used to sequence events that occur when AC is impending.


      ACRQST = 1 -----------------------------| Increment ACITMR
       (A/C requested)                        |
                                              | --- ELSE ---
                                              |
                                              | ACITMR = 0


      ACIOTMR - CLOSED THROTTLE A/C CLUTCH DISABLE DELAY TIMER (SEC)

      This timer is used to  sequence  events  that  occur  when  AC  turn  off  is
      impending.


      ACRQST = 0 -----------------------------| Increment ACIOTMR
       (A/C not requested)                    |
                                              | --- ELSE ---
                                              |
                                              | ACIOTMR = 0


















                                         11-8

                    A/C CLUTCH STRATEGY, A/C CLUTCH OUTPUT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    A/C CLUTCH OUTPUT


      OVERVIEW

      This strategy module controls the A/C output for the instances where the  CPU
      output  is  low  to enable A/C, and provides for a delay for ISC compensation
      when turning A/C on only.  The strategy incorporates a turn-on delay, IDLCOT.



      DEFINITIONS

      INPUTS

      Registers:

       -  ACITMR = Closed throttle A/C clutch enable delay  timer,  sec.   Used  to
          delay  A/C  clutch  engagement at closed throttle to allow the Idle Speed
          Control strategy to anticipate the compressor load application.

      Bit Flags:

       -  ACRQST = A/C requested; 1 -> request.

      Calibration Constants:

       -  ACC_DELAY = Time delay before adding A/C air to DESMAF_PRE.

       -  IDLCOT = Closed Throttle A/C enable delay time to allow ISC compensation.



      OUTPUTS

      Bit Flags:

       -  ACCFLG = Flag that controls the state of A/C CPU output; 1 -> high.

       -  AC_PPM_RQST = Flag to request that the ISC adds air to compensate for  AC
          loading.



















                                         11-9

                    A/C CLUTCH STRATEGY, A/C CLUTCH OUTPUT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: ACC_OUTPUT_COM1


      ACITMR > ACC_DELAY ---------------|S Q -| AC_PPM_RQST
                                        |       (add AC air)
      ACRQST = 0 -----------------------|C
        (A/C not requested)             



      ACRQST = 1 -----------------------|
        (A/C requested)                 |AND -| ACCFLG = 1
                                        |     | ACR = 0    
      ACITMR > IDLCOT ------------------|     |  (A/C "on")
       (delay expired)                        |
                                              | --- ELSE --- 
                                              |
      ACRQST = 0 -----------------------------| ACCFLG = 0
        (A/C not requested)                   | ACR = 1
                                              |  (A/C "off")
                                              |
                                              | --- ELSE --- 
                                              |
                                              | Make no change to ACR and ACCFLG



































                                        11-10












                                      CHAPTER 12

                               CANISTER PURGE STRATEGY

















































                                         12-1

                   CANISTER PURGE STRATEGY, CANISTER PURGE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                     CANISTER PURGE


      OVERVIEW

      Canister Purge refers to the solenoid and valve combination that  is  located
      in  the  line  between the intake manifold and the carbon canister.  When the
      solenoid is energized the valve opens, allowing the flow of vapors  from  the
      canister to the intake manifold.

      The strategy enables canister purge during various  engine  operating  modes.
      These  modes  are  calibration items.  Typical calibrations will enable purge
      when these conditions are met:


      1.  Fuel control is in the desired mode.  The calibrator can  choose  between
          purging during closed loop only or during both open loop and closed loop.

      2.  The engine has warmed up.

      3.  The engine has not overheated.

      4.  The 'Not at Closed Throttle' delay has been met.

      5.  The vehicle is above a minimum speed.


      The strategy includes a feature to prevent the rich surge that may  occur  on
      purge  turn on.  When the purge is enabled the output is cycled on and off at
      a 10Hz frequency with a variable duty cycle.  The  duty  cycle  ramps  up  to
      slowly introduce the canister vapors.  The duty cycle ramp is determined from
      FN600 * FN602 * FN605A * FN627.



      DEFINITIONS

      INPUTS

      Registers:

       -  ACT = Air charge temperature, deg.  F.

       -  AM = Air Mass flow, lb/min.

       -  APT = At Part Throttle; -1 -> Closed throttle, 0 -> Part throttle,  1  ->
          Wide open throttle.

       -  ATMR1 = Time since initial engine startup, sec.

       -  ATMR2 = Time since Engine Coolant Temp (ECT) reached TEMPFB, sec.

       -  CPRGTMR = Current Purge on time.

       -  ECT = Engine Coolant Temperature, deg F.

       -  KAMRF1 = HEGO11 adaptive fuel correction.



                                         12-2

                   CANISTER PURGE STRATEGY, CANISTER PURGE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  KAMRF2 = HEGO21 adaptive fuel correction.

       -  LAMBSE1 = Desired equivalence ratio for HEGO11 injectors.

       -  LAMBSE2 = Desired equivalence ratio for HEGO21 injectors.

       -  N = Engine RPM.

       -  NACTMR = Not at Closed Throttle Timer, sec.

       -  PRGIDLE_TMR = Time at idle for purge control, sec.

       -  PRGTMR = Total Purge on time.

       -  PURG_ADP_SF = Adaptive learning safety factor; delta from minadp at which
          time purge is disabled.

       -  TCSTRT = Temperature of Engine Coolant at Cold Startup, deg F.

       -  VSBAR = Filtered vehicle speed.

      Bit Flags:

       -  ADT1FMFLG = Adaptive table 1 failure mode.

       -  ADT2FMFLG = Adaptive table 2 failure mode.

       -  LEGOFG11 = Lack of HEGO11 switching.

       -  LEGOFG21 = Lack of HEGO21 switching.

       -  HVQ1 = Heat valve flip-flop #1.

       -  VSPRGFLG = Vehicle speed purge enable flag.

       -  OLFLG = Open loop flag; 1 -> open loop, 0 -> closed loop possible.

       -  PRG_FLG = Purge specification variable; 1 -> conditions required to purge
          are met, 0 -> conditions required to purge have not been met.

       -  OL_DESIRED = Open loop fuel desired flag;

       -  EGO1FMFLG = EGO1 FMEM flag; 1 -> EGO1 failure.

       -  EGO2FMFLG = EGO2 FMEM flag; 1 -> EGO2 failure.

      Calibration Constants:

       -  CTHIGH = Temperature of Engine Coolant (ECT) at Hot Startup, deg F.

       -  CTLOW = Temperature of Engine Coolant at Cold Startup, deg F.

       -  CTPRG = Overheat temperature to turn off purge, deg F.

       -  CTPRGH = Hysteresis term for CTPRG, deg F.

       -  EVTDOT = Purge time delay at Part throttle or WOT.



                                         12-3

                   CANISTER PURGE STRATEGY, CANISTER PURGE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FN600 = Canister Purge Duty Cycle Multiplier
                  X = PRGTMR
                  Y = Duty Cycle Multiplier.

       -  FN602 = Canister Purge Duty Cycle Multiplier
                  X = CPRGTMR
                  Y = Duty Cycle Multiplier.

       -  FN603 = Maximum LAMBSE allowed before purge duty cycle is decremented.

       -  FN605A = Canister Purge Duty Cycle vs. AM
                   X = AM
                   Y = Purge Duty Cycle.

       -  FN627(PRGIDLE_TMR)  =  Purge  duty  cycle  modifier  as  a  function   of
          PRGIDLE_TMR.

       -  MINADP = Minimum allowable correction.

       -  PRG_DEC = PURGDC decrement value.

       -  PRGTD1 = Canister purge cold startup delay time.

       -  PRGTD2 = Canister purge medium temp startup delay time.

       -  PRGTD3 = Canister purge hot startup delay time.

       -  PRGTD4 = Canister purge cold startup delay time, used with ATRM2.

       -  PRGTD5 = Canister purge delay timer, used with ATMR2.

       -  PURGSW = Switch to select Open Loop Purge; 1 -> Allow Open Loop Purge.

       -  TEMPFB = Minimum ECT required to start ATMR2 timer, deg F.

       -  PRGMPH_SH = Minimum vehicle speed to allow purge.

       -  PRGMPH_CL = PRGMPH_SH minus hysteresis.



      OUTPUTS

      Registers:

       -  CPRGTMR = Current Purge on time.

       -  PRGTMR = Total Purge on time.

       -  PURGDC = Canister Purge Duty Cycle.

       -  PGDC_LST = Value of PURGDC from the previous background pass.

      Bit Flags:

       -  HVQ1 = See above.




                                         12-4

                   CANISTER PURGE STRATEGY, CANISTER PURGE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  VSPRGFLG = See above.

       -  LIMIT_PURGE = Flag which indicates Purge Duty Cycle is being limited  due
          to LAMBSE being clipped; 1 -> limited Purge.

       -  prg_flg = See above.






















































                                         12-5

                   CANISTER PURGE STRATEGY, CANISTER PURGE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                               STRATEGY MODULE: CANP_COM3


      APT = -1 -------------------------------| INCREMENT PRGIDLE_TMR.
                                              | Clip to 255 seconds as a maximum.
                                              |
                                              | --- ELSE ---
                                              |
                                              | DECREMENT PRGIDLE_TMR.
                                              | Clip to zero as a minimum.


      ECT < CTPRG - CTPRGH -------------------|S Q -| HVQ1
                                              |
      ECT > CTPRG ----------------------------|C
       (Over temp. disable)

      VSBAR >= PRGMPH_SH ---------------------|S Q -| VSPRGFLG
                                              |    
      VSBAR < PRGMPH_CL ----------------------|C    
       (vehicle speed disable)


      unconditionally ------------------------------| PGDC_LST := PURGDC
                                                    |  (store last BG's value)


































                                         12-6

                   CANISTER PURGE STRATEGY, CANISTER PURGE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      TCSTRT >= CTHIGH -----------|
                                  |AND -|
      ATMR1 >= PRGTD3 ------------|     |
                                        |
      CTLOW < TCSTRT < CTHIGH ----|     |
                                  |AND -|OR --|
      ATMR1 >= PRGTD2 ------|     |     |     |
                            |AND -|     |     |
      ATMR2 >= PRGTD5 ------|           |     |
                                        |     |
      TCSTRT <= CTLOW ------------|     |     |
                                  |AND -|     |
      ATMR1 >= PRGTD1 ------|     |           |AND -| prg_flg = 1
                            |AND -|           |     |  (enable purge)
      ATMR2 >= PRGTD4 ------|                 |     | purgdc =
                                              |     | FN600(PRGTMR) *
      HVQ1 = 1 -------------------------------|     | FN602(CPRGTMR) *
                                              |     | FN605A(AM) *
      NACTMR >= EVTDOT -----------------------|     | FN627(PRGIDLE_TMR)
                                              |     |
      VSPRGFLG = 1 ---------------------------|     |
                                              |     |
      OLFLG = 0 ------------------------|     |     |
                                        |     |     | 
      PURGSW = 1 -----------------|     |OR --|     |
                                  |     |           | 
      OL_DESIRED = 1 -------|     |AND -|           |
                            |     |                 |
      EGO1FMFLG = 1 --------|OR --|                 | 
                            |                       |
      EGO2FMFLG = 1 --------|                       |
                                                    | --- ELSE ---
                                                    |
                                                    | prg_flg = 0
                                                    |  (disable purge)
                                                    | purgdc = 0 
                                                    | PURGDC = 0 
                             






















                                         12-7

                   CANISTER PURGE STRATEGY, CANISTER PURGE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       PURGE DUTY CYCLE DECREMENT/INCREMENT LOGIC

      LIMIT_PURGE = 0 ------------------------------| PURGDC = purgdc
                                                    |
                                                    | --- ELSE ---
                                                    |
                                                    | Continue to Increment/
                                                    |  Decrement with old value 
                                                    |  of PURGDC


      The following logic allows the reduction of the  purge  duty  cycle  (PURGDC)
      when  conditions  indicate that the fuel system may be failing.  The purge is
      backed out to prevent the continuous EGO TESTS and adaptive  fuel  test  from
      indicating  failure due to purge overload.  Once a failure has been indicated
      or control has been restored for one of the four areas indicated by the logic
      shown  below,  purging  is  resumed.   If  subsequently  another  area begins
      indicating failure, purging will again be backed out  until  the  appropriate
      failure is verified or until the system comes back into full control.


      LAMBSE1 => FN603(ACT) ---------------|
       (HEGO11 failure condition present)  |AND -|
                                           |     |
      LEGOFG11 = 0 ------------------------|     |
       (HEGO11 failure recognition not           |
        latched)                                 |
                                                 |
      LAMBSE2 => FN603(ACT) ---------------|     |
       (HEGO21 failure condition present)  |AND -|
                                           |     |
      LEGOFG21 = 0 ------------------------|     |
       (HEGO21 failure recognition not           | 
        latched)                                 |OR --| PURGDC = PURGDC -
                                                 |     |           PRG_DEC
      KAMRF1 <= MINADP + 0.5 +                   |     | Clip to zero as a minimum 
                         PURG_ADP_SF ------|     |     | Clip to purgdc as a 
       (bank #1 adaptive limit imminent)   |AND -|     |  maximum
                                           |     |     |
      ADT1FMFLG = 0 -----------------------|     |     |
       (adaptive failure not yet recognized)     |     |
                                                 |     |
      KAMRF2 <= MINADP + 0.5 +                   |     | 
                         PURG_ADP_SF ------|     |     |  
       (bank #2 adaptive limit imminent)   |AND -|     | 
                                           |           |
      ADT2FMFLG = 0 -----------------------|           |
       (adaptive failure not yet recognized)           |
                                                       | --- ELSE ---
                                                       |
                                                       | PURGDC = PURGDC +
                                                       |           PRG_DEC
                                                       | Clip to purgdc as a 
                                                       |  maximum






                                         12-8

                   CANISTER PURGE STRATEGY, CANISTER PURGE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      purgdc > PURGDC ------------------------------| LIMIT_PURGE = 1
                                                    |  (purge is being limited
                                                    |   due to LAMBSE being 
                                                    |   at its clip)
                                                    | 
                                                    | --- ELSE ---
                                                    | 
                                                    | LIMIT_PURGE = 0


      NOTES:

       -  When purge is enabled, the purge output is cycled at 10Hz +/- 30%

       -  Set EVTDOT to 0 to Purge at Closed Throttle.




                                       TIMER LOGIC


      prg_flg = 1 ----------------------------|            
                                              |AND -| PRGFLG = 1
      FN605A(AM) <> 0 ------------------------|     |  (count up PRGTMR)
                                                    |  (count up CPRGTMR)
                                                    |
                                                    | --- ELSE ---
                                                    |
                                                    | CPRGTMR = 0
                                                    | PRGFLG = 0
                                                    |  (clear PRGFLG)
                                                    |  (freeze PRGTMR)
                                                    |  (reset and freeze CPRGTMR)


























                                         12-9

           CANISTER PURGE STRATEGY, DUTY CYCLE EXPANDER PULSEWIDTH - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             DUTY CYCLE EXPANDER PULSEWIDTH


      OVERVIEW

      This routine computes the canister purge pulsewidth  for  the  DUCE  chip  in
      units of duce_ticks.



      DEFINITIONS

      INPUTS

      Registers:

       -  PURGDC = Canister purge duty cycle.



      OUTPUTS

      Registers:

       -  CANP_PW_DTKS = Canister purge duty cycle pulsewidth in duce_ticks.

       -  CANP_PW_DUCE = DUCE hardware register.




      PROCESS
                           STRATEGY MODULE: CANP_DUCE_PW_COM1


      always -----------------| CANP_PW_DTKS = PURGDC
                              |  (clip to 65535 duce_ticks)
                              |
                              | CANP_PW_DUCE = CANP_PW_DTKS





















                                        12-10












                                      CHAPTER 13

                               THERMACTOR AIR STRATEGY

















































                                         13-1

                 THERMACTOR AIR STRATEGY, THERMACTOR CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   THERMACTOR CONTROL


      OVERVIEW

      Thermactor air refers to air added to the exhaust gas mixture from an  engine
      belt  driven  air  pump.  The computer controls two solenoids to create three
      mutually exclusive air states:

      Thermactor Air State   AM1 Solenoid   AM2 Solenoid

      Upstream                on             on
      Downstream              on             off
      Bypass                  off            off


                           TAB - Thermactor Air Bypass (AM1)  
                           TAD - Thermactor Air Divert (AM2)  


      Upstream refers to air added at or near the exhaust ports.  This is  done  to
      provide better oxidation of the exhaust gas mixture when a richer exhaust gas
      mixture is anticipated.  It is not possible to operate in  closed  loop  fuel
      control  while air is introduced upstream (the EGO sensor may always indicate
      a lean condition).

      Downstream refers to air added to the catalyst mid-bed.   Downstream  air  is
      compatible  with  closed  loop  fuel  control  and  is  the normal two output
      thermactor air state.

      Bypass refers to the condition in which no thermactor air  is  added  to  the
      exhaust  gas mixture.  This feature is used primarily to protect the catalyst
      from over-temperature conditions.

      At extremely hot engine and ACT it may be necessary to force open  loop.   In
      addition,  upstream  air  will  force  open loop due to its effect on the EGO
      sensor.  The thermactor logic commands open loop during these conditions  via
      the CHKAIR flag.






















                                         13-2

                 THERMACTOR AIR STRATEGY, THERMACTOR CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  ACT = Air Charge Temperature, deg F.

       -  AM = Engine air mass flow, ppm.

       -  APT = Part throttle flag.

       -  ATMR1 = Time since Engine Startup, sec.

       -  AWOTMR_U_D = Up/Down timer, Time at wide open throttle, sec.

       -  BYPTMR1 = Moderate load, not Closed Throttle, WARM EGO bypass delay; sec.

       -  CTATMR = Closed Throttle upstream Air Timer, sec.

       -  ECT = Engine Coolant Temperature, deg F.

       -  HMTMR = High LOAD timer for upstream air, sec.

       -  LOAD = Universal Load parameters, unitless.

       -  N = Engine speed, RPM.

       -  NACTMR = Not at Closed throttle Timer, sec.

       -  TCSTRT = Temperature of ECT at startup, deg F.





























                                         13-3

                 THERMACTOR AIR STRATEGY, THERMACTOR CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Bit Flags:

       -  AFMFLG = Flag indicating that ACT sensor has failed.

       -  CFMFLG = Flag indicating that ECT sensor is in/out  of  range;  0  ->  in
          range.

       -  CTAFLG = Flag indicating state of CTATMR (Closed  Throttle  Upstream  Air
          timer).

       -  DALOD_FLG = Load limit for downstream air flag.

       -  DFSFLG = Decel.  shutoff fuel logic cutting fuel off flag.

       -  HMTMR_FLG = High LOAD upstream air flag.

       -  HSPFLG = High Speed Mode flag; 1 -> High speed alternate fuel/spark.

       -  MFMFLG = Flag indicating that MAF sensor has failed.

       -  OLFLG = Open loop fuel flag.  1 = open loop, 0 = closed loop.

       -  OVERTEMP_FLG = Overtemp flag to force open loop and bypass air.

       -  TFMFLG = Flag indicating that TP sensor has failed.

       -  WRMEGO = Flag indicating EGO(s) is(/are) warm.

      Calibration Constants:

       -  ATBYS = Minimum ACT to Bypass thermactor Air, deg F.

       -  BYPLODLO = Load above which to force bypass after BYP_TM seconds.

       -  BYPLODHI = Load below which to force bypass after BYP_TM seconds.

       -  BYP_TM = Time delay to bypass:  moderate  load,  not  C.T.   and  WRMEGO;
          seconds.

       -  BYPWOT = Wide Open Throttle Bypass Time delay.

       -  CTARTM = Upstream air time delay during Decel, sec.

       -  CTBYS = Minimum ECT to Bypass thermactor Air, deg F.

       -  CTBYSH = Hysteresis for ATBYS and CTBYS.

       -  DNLOD = Maximum LOAD for downstream air.

       -  DNLODH = Hysteresis for DNLOD.

       -  DNSTMI = Time delay for Downstream air when not at Closed Throttle, sec.

       -  EAM_HP = Electric air pump hardware present; 1 ->  electric  pump,  0  ->
          Two-output.

       -  FN606(TCSTRT) = Time to delay upstream air after startup, sec.



                                         13-4

                 THERMACTOR AIR STRATEGY, THERMACTOR CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FN607(TCSTRT) = Time to provide upstream air  before  catalyst  light-off
          sec.

       -  HMCTM = Upstream Air Time Delay, sec.

       -  HMSTM = Maximum time  that  Upstream  Air  occurs  during  crowds  (after
          startup).

       -  SW_DFSO = Control switch for Bypass in DFS mode; 1 -> Force Bypass.

       -  THRMHP = Thermactor Hardware present switch; 0 -> no thermactor.

       -  UPLOD = Minimum LOAD for upstream air.

       -  UPLODH = Hysteresis for UPLODH.

       -  UPRPM2 = Maximum RPM for Decel Upstream Air.

       -  UPRPMH = Hysteresis term for UPRPM.

       -  UPSWOT = WOT Upstream Air Time Delay.




      OUTPUTS

      Registers:

       -  AWOTMR_U_D = See above.

       -  BYPTMR1 = See above.

       -  CTATMR = See above.

       -  HMTMR = See above.

      Bit Flags:

       -  CHKAIR = Thermactor forced open loop flag.

       -  CTAFLG = See above.

       -  DALOD_FLG = See above.

       -  HMTMR_FLG = See above.

       -  OVERTEMP_FLG = See above.












                                         13-5

                 THERMACTOR AIR STRATEGY, THERMACTOR CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: THERM_2OUT_COM1


      The timer is used to force open bypass air if at  WOT  for  a  long  time  or
      direct upstream air if cold and at WOT for a short time.


      APT = 1 ---------------------------| AWOTMR_U_FLG = 1     
                                         | AWOTMR_D_FLG = 0     
                                         |  (upcount AWOTMR_U_D)
                                         | 
                                         | --- ELSE ---
                                         |
                                         | AWOTMR_U_FLG = 0     
                                         | AWOTMR_D_FLG = 1     
                                         |  (downcount AWOTMR_U_D)


      Clip AWOTMR_U_D if desired.

      AWOTMR_U_D > AWOTMR_MAX ----------| AWOTMR_U_D = AWOTMR_MAX
                                        |  (clip_
                                        | 
                                        | --- ELSE ---
                                        |
                                        | no action 
                                        |  (allow timer to run)



      The HMTMR (High MAP timer, 1 sec resolution) limits the length of  time  that
      the air is directed upstream during heavy crowds.


      LOAD > UPLOD + UPLODH -------|S Q -| HMTMR_FLG
                                   |
      LOAD < UPLOD ----------------|C


      HMTMR_FLG = 1 ---------------------| Count up HMTMR
                                         | Clip to 255
                                         |
                                         | --- ELSE ---
                                         |
                                         | HMTMR = 0


                                (continued on next page)











                                         13-6

                 THERMACTOR AIR STRATEGY, THERMACTOR CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)


      The CTATMR (Closed Throttle upstream Air Timer, .125 sec resolution) is  used
      to delay upstream air after closed throttle mode is entered during a decel.


      APT = -1 --------------|
                             |AND -|S Q -| CTAFLG 
      N > UPRPM2 + UPRPMH ---|     |     
                                   |     
      N < UPRPM2 ------------|     |     
                             |OR  -|C    
      APT <> -1 -------------|           


      CTAFLG = 1 ------------------------| Count Up CTATMR
                                         |
                                         | --- ELSE ---
                                         |
                                         | CTATMR = 0







































                                         13-7

                 THERMACTOR AIR STRATEGY, THERMACTOR CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


          MAXIMUM LOAD FOR DOWNSTREAM AIR FLAG USED TO BYPASS AIR AT HIGH LOAD


      LOAD < DNLOD - DNLODH -------|S Q -| DALOD_FLG
                                   |
      LOAD > DNLOD ----------------|C



                ECT, ACT OVERTEMP FLAG TO FORCE OPEN LOOP AND BYPASS AIR

      ECT > CTBYS -----------|
                             |AND -|S Q -| OVERTEMP_FLG
      ACT > ATBYS -----------|     | 
                                   | 
      ECT < CTBYS - CTBYSH --|     | 
                             |OR  -|C
      ACT < ATBYS - CTBYSH --|


      BYPTMR1 forces thermactor air to bypass after moderate load  conditions  have
      existed  with  a  warmed  up  EGO  for a time equal to the time since such an
      operating condition last existed (but limited to BYP_TM).

      APT >= 0 --------------------|
                                   |
      WRMEGO = 1 ------------------|
                                   |AND -| Count up BYPTMR1
      LOAD > BYPLODLO -------------|     | clip at BYP_TM 
                                   |     | 
      LOAD < BYPLODHI -------------|     |
                                         | --- ELSE ---
                                         |
                                         | Count down BYPTMR1
                                         | clip at 0 (zero)

























                                         13-8

                 THERMACTOR AIR STRATEGY, THERMACTOR CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           THERMACTOR AIR OUTPUT STATE CONTROL


      THRMHP = 0 ------------------------| No operation on AM1 or AM2
                                         | Exit thermactor output
                                         |   control logic
                                         |
                                         | --- ELSE ---
      HSPFLG = 1 ------------------|     |
                                   |     |
      AFMFLG = 1 ------------------|     |     
                                   |     |
      CFMFLG = 1 ------------------|     |
                                   |     | 
      TFMFLG = 1 ------------------|     |
                                   |     |
      MFMFLG = 1 ------------------|     |
                                   |     |
      FN606(TCSTRT) >= ATMR1 ------|     |
                                   |     |
      OVERTEMP_FLG = 1 ------------|OR  -| AM1 = 0
                                   |     | AM2 = 0
      AWOTMR_U_D >= BYPWOT --------|     |  (bypass air)
                                   |     | 
      BYPTMR1 >= BYP_TM -----------|     |
                                   |     |
      DFSFLG = 1 ------------|     |     |
                             |AND -|     |
      SW_DFSO = 1 -----------|           |
                                         |
                                         |
                                         |
                                         | --- ELSE ---

                                (continued on next page)

























                                         13-9

                 THERMACTOR AIR STRATEGY, THERMACTOR CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

      FN607(TCSTRT) > ATMR1 -------|     | 
                                   |     | 
      ATMR1 <= HMSTM --------|     |     | 
                             |     |     | 
      APT = 1 ---------------|AND -|     | 
       (wide open throttle)  |     |     | 
                             |     |     | 
      AWOTMR_U_D < UPSWOT ---|     |OR  -| AM1 = 1 
                                   |     | AM2 = 1
      CTATMR >= CTARTM ------|     |     |  (upstream air)  
                             |AND -|     | 
      CTAFLG = 1 ------------|     |     | 
                                   |     | 
      ATMR1 <= HMSTM --------|     |     |  
                             |     |     |  
      HMTMR <= HMCTM --------|AND -|     |
                             |           |
      HMTMR_FLG = 1 ---------|           | 
                                         | --- ELSE ---
                                         | 
      EAM_HP = 0 ------------------|     | 
                                   |AND -| AM1 = 1
      NACTMR <= DNSTMI ------|     |     | AM2 = 0
                             |OR  -|     |  (downstream air)
      DALOD_FLG = 1 ---------|     |     |                  
                                   |     | 
      OLFLG = 0 -------------------|     | 
       (closed loop)                     | 
                                         | --- ELSE ---
                                         |
                                         | AM1 = 0
                                         | AM2 = 0
                                         |  (bypass air)

























                                        13-10

                 THERMACTOR AIR STRATEGY, THERMACTOR CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


             CHKAIR FLAG TO FORCE OPEN LOOP FUEL IF OVERTEMP OR UPSTREAM AIR


      OVERTEMP_FLG = 1 ------------|
                                   |OR  -| CHKAIR = 0
      AM1 = 1 ---------------|     |     |  (force open loop)
                             |AND -|     |
      AM2 = 1 ---------------|           | 
       (upstream)                        | 
                                         | --- ELSE ---
                                         | 
                                         | CHKAIR = 1
















































                                        13-11

                    THERMACTOR, REPEAT DUTY CYCLE EXPANDER - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               REPEAT DUTY CYCLE EXPANDER


      OVERVIEW

      This module sets up the AM2 to be output on the DUCE.


      DEFINITIONS

      INPUTS

      Registers:

       -  AM2 = Thermactor air divert.

       -  AM2_PW_DTKS = AM2 pulsewidth in DUCE ticks.

      Calibration Constants:

       -  EAM_HP = Electric air pump hardware present switch (requires THRMHP = 1);
          1  ->  Electric  air  pump  present,  0  -> two-output engine driven pump
          present.



      OUTPUTS

      Registers:

       -  AM2_PW_DTKS = See above.

       -  AM2_PW_DUCE = DUCE hardware register.



      PROCESS
                         STRATEGY MODULE: THERM_AM2_DUCE_PW_COM1


      EAM_HP = 0 -----------------------|       (upstream air)
                                        |AND -| AM2_PW_DTKS = 65535 duce_ticks
      AM2 = 1 --------------------------|     | AM2_PW_DUCE = AM2_PW_DTKS
                                              |
                                              | --- ELSE ---
                                              | 
      EAM_HP = 0 -----------------------|     | (bypass or divert air)
                                        |AND -| AM2_PW_DTKS = 0 duce_ticks
      AM2 = 0 --------------------------|     | AM2_PW_DUCE = AM2_PW_DTKS











                                        13-12












                                      CHAPTER 14

                              ELECTRO-DRIVE FAN STRATEGY

















































                                         14-1

              ELECTRO-DRIVE FAN STRATEGY, LOW SPEED FAN STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 LOW SPEED FAN STRATEGY


      OVERVIEW

      Electro-drive fan refers to an electric motor  driven  fan  used  to  provide
      forced  air  circulation through the engine coolant radiator when natural air
      flow  is  inadequate;  i.e.,  low  vehicle  speed  or  high  engine   coolant
      temperature.   The fan is always turned off during CRANK mode to minimize the
      accessory load.

      Fan control is accomplished through the use of EEC controlled relays  in  the
      fan  power  supply  circuit.   This  strategy  may  be  used  with  either  a
      "one-speed", a "two-speed" or two single fans.  The "two-speed" fan motor may
      either  be  a dual-wound type or a single wound type with a dropping resistor
      to achieve low speed operation.

      This Strategy Module performs the function of requesting that the  Low  Speed
      Fan be switched on.



      DEFINITIONS

      INPUTS

      Registers:

       -  ACIOTMR = A/C clutch off timer, sec.  Used to prevent  rapid  cycling  of
          the A/C compressor and electro-drive fan.

       -  ECT = Engine Coolant Temperature, deg F.

       -  VSBAR = Filtered Vehicle Speed, MPH.

      Bit Flags:

       -  ACTP_FLG = Flag to disable EDF and A/C at high TP.

       -  ACRQST = Flag that is set to 1 when A/C clutch desired.

       -  CFMFLG = Flag indicating the ECT sensor has failed.

       -  CRKFLG = Flag that is set when in CRANK mode.

       -  HSF_RQST = Flag indicating the high speed fan is requested.

       -  LSFECT_FLG = LSF ECT F/F flag.

       -  RUNNING = Flag indicating that the KOER VIP test is in progress.










                                         14-2

              ELECTRO-DRIVE FAN STRATEGY, LOW SPEED FAN STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  AC_MN_FT = Minimum EDF on time after  A/C  clutch  off,  secs.   Prevents
          rapid fan cycling.  (Should be > 10 seconds)

       -  EDFHP = Electro drive fan hardware present switch.  Calibrate to "1"  for
          either one or two speed fan control; "0" for no fan control.

       -  LSFECT_CL = Maximum ECT to turn off Low Speed Fan, deg F.  (Should  be  4
          degrees less than LSFECT_SH, per Car Engineering Direction)

       -  LSFECT_SH = Minimum ECT to turn on Low Speed Fan, deg F.  (Should be  216
          deg F, per Car Engineering Direction)

       -  LSFVS_CH = Minimum vehicle speed to turn off  the  Low  Speed  Fan,  MPH.
          (Should be 5 MPH higher than LSFVS_SL, per Car Engineering Direction)

       -  LSFVS_SL = Maximum vehicle speed to turn on Low Speed Fan because the A/C
          is on, MPH.  (Should be 48 MPH, per Car Engineering Direction)



      OUTPUTS

      Bit Flags:

       -  LSF_RQST = Flag indicating Low Speed Fan is requested.

       -  LSFECT_FLG = See above.































                                         14-3

              ELECTRO-DRIVE FAN STRATEGY, LOW SPEED FAN STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: EDF_LSF_CONTROL_COM1


      EDFHP = 1 ------------------------------|
                                              |AND -|S Q -| LSFECT_FLG  
      ECT > LSFECT_SH ------------------------|     |     
       (hot engine)                                 |
                                                    |
      EDFHP = 1 ------------------------------|     |
                                              |AND -|C   
      ECT < LSFECT_CL ------------------------|



      EDFHP = 1 ------------------------------|
       (EDF hardware present)                 |
                                              |
      CRKFLG = 0 -----------------------------|
       (not in crank mode)                    |
                                              |AND -|S Q -| LSF_RQST
      CFMFLG = 1 -----------------------|     |     |
       (ECT sensor failed)              |     |     |
                                        |     |     |
      HSF_RQST = 1 ---------------------|     |     |
                                        |OR --|     |
      LSFECT_FLG = 1 -------------------|           |
                                        |           |
      ACRQST = 1 -----------------|     |           |
       (A/C on)                   |AND -|           |
                                  |     |           |
      VSBAR < LSFVS_SL -----------|     |           |
       (vehicle speed low)              |           |
                                        |           |
      RUNNING = 1 ----------------------|           |
       (KOER VIP)                                   |
                                                    |
      EDFHP = 0 ------------------------------|     |
       (EDF hardware not present)             |     |
                                              |     |
      CRKFLG = 1 -----------------------------|     |
       (in crank mode)                        |     |
                                              |     |
      VSBAR > LSFVS_CH -----------------------|OR --|C
       (vehicle speed high)                   |
                                              |
      ACIOTMR >= AC_MN_FT --------------------|
       (fan turn off delay)                   |
                                              |
      ACTP_FLG = 1 ---------------------------|
       (WOT A/C Cutout invoked)









                                         14-4

             ELECTRO-DRIVE FAN STRATEGY, HIGH SPEED FAN STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 HIGH SPEED FAN STRATEGY


      OVERVIEW

      This Strategy Module performs the function of requesting that the High  Speed
      Fan be switched on.

      In addition to the basic  functions,  it  supports  the  AC  Medium  Pressure
      Switch, ACPSW.



      DEFINITIONS

      INPUTS

      Registers:

       -  ECT = Engine Coolant Temperature, deg F.

       -  FANTMR = Time since electro-drive fan was requested, sec.

       -  HSF_ACP_OTMR = HSF AC Pressure Offtimer.

       -  LOAD = Normalized aircharge parameter (CYLARC_BG/SARCHG), unitless.

       -  N_BYTE = Byte RPM.

       -  VSBAR = Filtered Vehicle Speed, MPH.

      Bit Flags:

       -  ACPSW = AC Medium Pressure Switch Input; 1 -> AC Pressure high.

       -  CFMFLG = Flag indicating the ECT sensor has failed.

      Calibration Constants:

       -  FAN_DELAY = Time delay before energizing EDF output, sec.

       -  HEDFHP = Two speed fan hardware present switch.  Calibrate to "1" for two
          speed fan control; "0" for one speed or no fan control.

       -  HSF_ACP_ROTM = HSF AC Pressure Run On Time.

       -  HSFECT_CL = Maximum ECT to turn off High Speed Fan, deg F.

       -  HSFECT1_SH = Minimum ECT to turn on High Speed Fan for Grade Load, deg F.

       -  HSFECT2_SH = Minimum ECT to turn on High Speed Fan normally, deg F.

       -  HSFLOD = Minimum LOAD to turn on High Speed Fan for Grade Load.

       -  HSFRPM = Minimum RPM to turn on High Speed Fan for Grade Load, rpm.

       -  HSFVS = Maximum vehicle speed to turn on High Speed Fan for  Grade  Load,
          mph.


                                         14-5

             ELECTRO-DRIVE FAN STRATEGY, HIGH SPEED FAN STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  HSF_ACP_OTMR = See above.

      Bit Flags:

       -  HSF_RQST = See above.



















































                                         14-6

             ELECTRO-DRIVE FAN STRATEGY, HIGH SPEED FAN STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: EDF_HSF_CONTROL_COM2


      HEDFHP = 1 -----------------------------|
       (HSF hardware present)                 |
                                              |
      ACPSW = 1 ------------------------|     |
       (AC Med. Pres. Sw. tripped)      |     |AND -|S Q -| HSF_RQST
                                        |     |     |
      CFMFLG = 1 -----------------------|     |     |
       (ECT sensor failed)              |     |     |
                                        |     |     |
      ECT >= HSFECT2_SH ----------------|OR --|     |
       (higher temp. turn on)           |           |
                                        |           |
      N_BYTE >= HSFRPM -----------|     |           |
       (high RPM)                 |     |           |
                                  |     |           |
      LOAD >= HSFLOD -------------|     |           |
       (high load)                |AND -|           |
                                  |                 |
      VSBAR <= HSFVS -------------|                 |
       (low veh. speed)           |                 |
                                  |                 |
      ECT >= HSFECT1_SH ----------|                 |
       (lower temp. turn on)                        |
                                                    |
      HEDFHP = 0 -----------------------------|     |
       (HSF hardware not present)             |     |
                                              |OR --|C
      ECT < HSFECT_CL ------------------|     |
       (HSF turn off temp.)             |AND -|
                                        |
      HSF_ACP_OTMR > HSF_ACP_ROTM ------|     
       ;Low AC Pressure for a time.           


      ACPSW = 1 ------------------------------------| HSF_ACP_OTMR = 0
                                                    |
                                                    | --- ELSE ---
                                                    |
                                                    | Increment HSF_ACP_OTMR

















                                         14-7

        ELECTRO-DRIVE FAN STRATEGY, ELECTRO-DRIVE FAN CONTROL STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           ELECTRO-DRIVE FAN CONTROL STRATEGY


      OVERVIEW

      To control a "one-speed" fan, set EDFHP = 1 and HEDFHP = 0.

      To control a "two-speed" dual-wound fan, set both EDFHP and HEDFHP  =  1  and
      DWFHP = 1.

      To control either a "two-speed" fan with a series resistor, or  two  separate
      fans, set both EDFHP and HEDFHP = 1 and DWFHP = 0.

      If an electro-drive fan is not used, set both EDFHP and HEDFHP = 0.

      To prevent engine overheating if the  EEC  enters  HLOS  (when  the  EDF/HEDF
      outputs are "off"), the fan power supply circuit must energize the fan unless
      the EEC output is energized to turn the fan off.  That is, the EDF relay must
      be  a  "normally closed" relay, or a logic inverter is needed between the EEC
      and a "normally open" relay.  The Integrated Relay Controller  Module  (IRCM)
      uses a "normally open" relay with an inverter for the EDF circuit.

      This, however, creates another condition that may damage the relay  contacts.
      Everytime  the processor is powered-up or during a "reset", the EDF output is
      off (fan on) for approximately 100 milliseconds before the output  is  turned
      on  (fan  off).   This  will  cause relay contact arcing due to the very high
      current flowing at that time.  The relay must be rated for  opening  at  peak
      current,  or  a hardware delay may be used to delay closing a "normally open"
      relay immediately when the EDF output  is  de-energized.   The  IRCM  uses  a
      hardware delay of approximately 550 milliseconds to bridge the initialization
      time.  This delay occurs every time the EDF is energized.

      This  Strategy  Module  provides  several  time  delays  to  ensure   correct
      sequencing of the fans.  See FANTMR.

      In order to provide anticipatory Idle Speed compensation with any combination
      of  relays  and  hardware time delays, two software time delays are provided.
      The first, EDF_DELAY, delays Idle Speed action  (see  Desired  RPM  logic  in
      ISC),  and  the  second,  FAN_DELAY,  delays  EDF  activation.  If a hardware
      activation delay causes the fan to energize too long after  ISC  compensation
      (i.e.,  RPM  flare),  set  FAN_DELAY  = 0 and increase EDF_DELAY.  If the fan
      energizes too soon (i.e., RPM dip), set EDF_DELAY = 0 and increase FAN_DELAY.


















                                         14-8

        ELECTRO-DRIVE FAN STRATEGY, ELECTRO-DRIVE FAN CONTROL STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  FANTMR = Time since electro-drive fan was requested, sec.

      Bit Flags:

       -  HSF_RQST = Flag indicating that the high speed fan is requested.

       -  LSF_RQST = Flag indicating that the low speed fan is requested.

      Calibration Constants:

       -  DWFHP = Flag indicating that Dual-Wound Fan hardware is present.

       -  EDFHP = Electro drive fan hardware present switch; 1 -> either one or two
          speed fan control, 0 -> no fan control.

       -  FAN_DELAY = Time delay before energizing EDF output, sec.

       -  HEDFHP = Two speed fan hardware  present  switch;  1  ->  two  speed  fan
          control, 0 -> one speed or no fan control.



      OUTPUTS

      Registers:

       -  FANTMR = See above.

      Bit Flags:

       -  LSF_FLG = Flag indicating the status of the Low Speed Fan.

       -  HSF_FLG = Flag indicating the status of the High Speed Fan.





















                                         14-9

        ELECTRO-DRIVE FAN STRATEGY, ELECTRO-DRIVE FAN CONTROL STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: EDF_CONTROL_COM1


      EDFHP = 1 ------------------------------|
       (EDF hardware present)                 |
                                              |
      LSF_RQST = 1 ---------------------------|
                                              |AND -|S Q -| LSF_FLG
      FANTMR > FAN_DELAY ---------------------|     | 
                                              |     | 
      DWFHP = 0 ------------------------|     |     | 
                                        |OR --|     |
      HSF_FLG = 0 ----------------------|           |
                                                    |
      EDFHP = 1 ------------------------------|     |
                                              |     |
      FANTMR > LSF_RLY_PRCT ------------------|     |
       (Time delay for LSF Relay protection)  |     |
                                              |     |
      HSF_FLG = 1 ----------------|           |AND -|C
                                  |AND -|     |
      DWFHP = 1 ------------------|     |     |
                                        |OR --|
      LSF_RQST = 0 ---------------------|



      HEDFHP = 1 -----------------------------| 
       (HEDF hardware present)                |
                                              |AND -|S Q -| HSF_FLG
      HSF_RQST = 1 ---------------------------|     | 
                                              |     | 
      FANTMR > HSFAN_DELAY -------------------|     | 
                                                    |
      HSF_RQST = 0 ---------------------------|     |    
                                              |AND -|C    
      HEDFHP = 1 -----------------------------|       






















                                        14-10

        ELECTRO-DRIVE FAN STRATEGY, ELECTRO-DRIVE FAN CONTROL STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      FANTMR - TIME SINCE LSF REQUESTED

      Timer used to provide the proper time delay between ISC compensation and  EDF
      electrical  load application.  (See EDF OVERVIEW and DESIRED RPM CALCULATION)
      FANTMR increments when LSF is requested, and is only reset once LSF is turned
      off.  It is used for 3 purposes (In chronological order):


      1.  To provide a delay to enable ISC Compensation before turning on the
          Low Speed Fan. (FAN_DELAY)

      2.  To ensure that once the Low Speed Fan is turned on, it stays on for 
          a minimum period, (FANTMR > LSF_RLY_PRCT) to ensure that the relay is
          not required to open while passing the high surge currents that are
          associated with the first couple of seconds of EDF operation.

      3.  To delay the turn on of the High Speed Fan (FANTMR > HSFAN_DELAY) in
          order that the Engine may have stabilised and the LSF reached its
          minimum electrical loading. Note: In previous strategy levels this
          function was provided by a separate timer, EDFTMR, and a Cal. Const.
          EDFTM. As a starting point, set HSFAN_DELAY = FAN_DELAY + EDFTM.
          HSFAN_DELAY should be > LSF_RLY_PRCT.



      LSF_RQST = 0 ---------------------------------|
                                                    |AND -| FANTMR = 0
      LSF_FLG = 0 ----------------------------------|     |
                                                          | --- ELSE ---
                                                          |
                                                          | Increment FANTMR





























                                        14-11

        ELECTRO-DRIVE FAN STRATEGY, ELECTRO-DRIVE FAN OUTPUT STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            ELECTRO-DRIVE FAN OUTPUT STRATEGY


      OVERVIEW

      This module is responsible for writing to the output locations for EDF and
      HEDF.
      It contains an inversion for the Low Speed Fan output.

      The following table describes the state of the EEC outputs for the desired
      fan
      state.  HEDF and High Speed apply to two-speed fan systems only.

                           LOGIC             CPU OUTPUT          EEC OUTPUT
                                             (Software)          (Hardware)
        FAN STATE     LSF_FLG  HSF_FLG       edf   hedf          edf   hedf
        ---------        ----------          ----------          ----------
        Off               0     0             1     0            On     Off
        Low speed         1     0             0     0            Off    Off
        High speed        0     1             1     1            On     On
        Both Fans         1     1             0     1            Off    On

             Off = 12v referenced to ground
             On =< 1v referenced to ground


      DEFINITIONS

      INPUTS

      Bit Flags:

       -  HSF_FLG = Flag indicating the status of the High Speed Fan.

       -  LSF_FLG = Flag indicating the status of the Low Speed Fan.




      OUTPUTS

      Bit Flags:

       -  edf = Low Speed Electro-drive Fan Output.

       -  hedf = High Speed Electro-drive Fan Output.














                                        14-12

        ELECTRO-DRIVE FAN STRATEGY, ELECTRO-DRIVE FAN OUTPUT STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: EDF_OUTPUT_COM1


      LSF_FLG = 1 ---------------------------| edf = 0
                                             |        
                                             | --- ELSE ---
                                             |
                                             | edf = 1



      HSF_FLG = 1 ---------------------------| hedf = 1
                                             |
                                             | --- ELSE ---
                                             |
                                             | hedf = 0











































                                        14-13

        ELECTRO-DRIVE FAN STRATEGY, ELECTRO-DRIVE FAN OUTPUT STRATEGY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL






























































                                        14-14












                                      CHAPTER 15

                                   DATA OUTPUT LINK

















































                                         15-1

                     DATA OUTPUT LINK, PULSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    PULSE CALCULATION


      OVERVIEW

      The Data Output Link (DOL)  provides  fuel  consumption  information  to  the
      vehicle  dashboard  fuel  economy  display  products  (Tripminder  or Message
      Center).  The output, in the form of pulses, represents the  amount  of  fuel
      used  since  the  last  update.  This information is used in calculating fuel
      economy and distance-to-empty for display to the driver.

      The injector fuel  flow  (in  lbmf/(injector/port))  is  accumulated  in  the
      register  FUEL_SUM every time an injector port is energized.  Both normal and
      AE pulses are accumulated in FUEL_SUM.  Once a background loop,  FUEL_SUM  is
      converted  to  the appropriate integer number of DOL pulses, and DOL_COUNT is
      updated according to the equation shown below.  The amount of FUEL_SUM  which
      cannot  be  converted  to  an  integer count remains in FUEL_SUM for the next
      conversion.

      Approximately every two milliseconds, the value of DOL_COUNT is checked.   If
      DOL_COUNT  is  greater  than  1.0,  the DOL output is energized for about one
      msec, and DOL_COUNT is reduced by 1.0.


      DEFINITIONS

      INPUTS

      Registers:

       -  DOL_COUNT = Number of pulses to be output to  the  Fuel  Economy  display
          device.

       -  FUEL_SUM = Accumulated fuel mass for one injector per output  port  since
          the  last  DOL_COUNT  update,  including  the remainder from the previous
          conversion, units in lbmf/(injector/port).

      Calibration Constants:

       -  PUL_PER_GAL = Number of DOL pulses to be issued for each gallon  of  fuel
          used, pulse per gal.

          NOTE:  THE VALUE FOR PUL_PER_GAL MUST  BE  OBTAINED  FROM  EED/INSTRUMENT
          SYSTEMS FOR EACH APPLICATION.




      OUTPUTS

      Registers:

       -  DOL_COUNT = See above.

       -  FUEL_SUM = See above.





                                         15-2

                     DATA OUTPUT LINK, PULSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: DOL_PULSE_CALC_COM3


      Once per background loop execute the following:

      bit 0 of LINK_SW = 1 ----------| [pulses] =
                                     |              FUEL_SUM
                                     |   --------------------------------
                                     |   (6.15 lbmf/gallon) / PUL_PER_GAL
                                     |
                                     | DOL_COUNT = DOL_COUNT + integer([pulses])
                                     |
                                     | FUEL_SUM = remainder([pulses])



      Once per millisecond execute the following:

      bit 0 of LINK_SW = 1 ----|
                               |AND -| Toggle DOL output
      DOL_COUNT > 0.5 ---------|     |
                                     | DOL_COUNT = DOL_COUNT - 1
                                     |
                                     | --- ELSE ---
                                     |
      bit 0 of LINK_SW = 1 ----------| DOL_COUNT = 0.5

































                                         15-3

                     DATA OUTPUT LINK, PULSE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL






























































                                         15-4












                                      CHAPTER 16

                               DATA COMMUNICATIONS LINK

















































                                         16-1

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            GENERIC DATA COMMUNICATIONS LINK


      1.0 DCL Introduction

      2.0 LINK_SW
        2.1  Setting LINK_SW

      3.0 DEFAULT_LVF

      4.0 DCL State Diagrams
        4.1 UART mode enabled
        4.2 UART mode disabled

      5.0 DCL Operational Modes

        5.1 Diagnostic Mode Overview 
        5.2 Defined EEC-IV Diagnostic Modes

          5.2.1 Read parameter values from the EEC-IV module

            5.2.1.1 Parameter reference by name (PID)
              5.2.1.1.1 Command 41h  
              5.2.1.1.2 Command 23h  
              5.2.1.1.3 Command 21h  
              5.2.1.1.4 Command 27h  

            5.2.1.2 Parameter reference by address offset (DMR)
              5.2.1.2.1 Command 42h  
              5.2.1.2.2 Command 24h  
              5.2.1.2.3 Command 22h  
              5.2.1.2.4 Command 27h  

          5.2.2 Parameter Substitution
            5.2.2.1 Command 46h 

          5.2.3 Download programs/data
            5.2.3.1 Command 43h 
            5.2.3.2 Command 45h 

          5.2.4 Transmit Self-Test codes
            5.2.4.1 Command 25h 
            5.2.4.2 Command 26h 

          5.2.5 Housekeeping functions

            5.2.5.1 Clear DCL Error/Flag register
              5.2.5.1.1 Command 01h 

            5.2.5.2 Clear continuous self test codes
              5.2.5.2.1 Command 02h 

            5.2.5.3 Display DCL Status Information
              5.2.5.3.1 Command 03h 

          5.2.6 Common DCL Diagnostic Modes

            5.2.6.1 All DCL Devices Go Offline
              5.2.6.1.1 Command 80h 

                                         16-2

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


            5.2.6.2 Set DCL Baud Rate
              5.2.6.2.1 Command 81h 

        5.3 EEC-IV Normal Mode (FN-9 only)
          5.3.1 Summary of EEC-IV Normal Mode
          5.3.2 EEC-IV/CCA/MCCA Information Slot Allocation for 1988 FN9

      6.0 DCL Diagnostic Mode Change Protocol

        6.1 The Diagnostic Parameter Slots 
          6.1.1 The Module Select Bit Map 
          6.1.2 The Module Offline Bit Map
          6.1.3 The DIAGMODE Command Code 
          6.1.4 The Frame Length Specifier
          6.1.5 The DIAGMODE Command Qualifier

        6.2 Diagnostic Parameter Slots Error Processing

      7.0 Diagnostic Command Detailed Descriptions

        7.1 Clear DCL Error/Flag Register

        7.2 Clear Continuous VIP Codes

        7.3 Display status information

        7.4 Transmit PID values to SBDS

        7.5 Transmit DMR values to SBDS

        7.6 EEC-IV Transmission of Parameter Identification (PID) Map

        7.7 EEC-IV Transmission of Direct Memory Reference (DMR) Map

        7.8 Key On Engine Off Self-Test/Key On Engine Running Self-Test
          7.8.1 DCL/VIP handshaking for command 25h

        7.9 Transmit continuous self-test codes

        7.10 Parameter Reference by both PID Map and Address Offset

        7.11 Receive PID codes/DMR offsets from SBDS

        7.12 Receive downloaded program/data from SBDS

        7.13 Receive program execution vector from SBDS

        7.14 A/D Sensor Value Substitution

        7.15 Go permanently offline command from SBDS

        7.16 Change DCL baud rate command from SBDS








                                         16-3

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      8.0 Definitions

      9.0 PID Code Table

        9.1 BITMAP_0
        9.2 BITAMP_1






















































                                         16-4

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              DATA COMMUNICATION LINK (DCL)
                                 (LINK_SW = 2,3,6, or 7)


      1.0 DCL Introduction:


      The EEC communicates with other  vehicle  microcomputers  through  the  81C62
      RAM/CART  chip.   The RAM/CART is a special microchip which contains a serial
      I/O port.  This port performs serial communications on  the  data  communica-
      tion  link  (DCL).   The communication link consists of a twisted pair (DATA+
      and DATA-).  The EEC treats the RAM/CART as read/write memory.  The  RAM/CART
      is identical to the 81C61 RAM-I/O chip with the exception of the serial port.

      The RAM/CART chip is capable of operating as a UART  (universal  asynchronous
      receiver  transmitter), or a CART (custom asynchronous receiver transmitter).
      In UART mode, information is sent character by character,  which  requires  a
      large  software  overhead.   In CART mode, information is sent in frames, and
      minimal software intervention is required.

      The strategy initializes to UART mode.  Under most vehicle  operating  condi-
      tions,  there is no communication on the DCL and the strategy remains in UART
      mode.  Under these conditions, the EEC waits for a message from SBDS and does
      not transmit.  The SBDS can tell the EEC to either go permanently offline, or
      to wake up in CART mode in order to perform diagnostics.   Some  applications
      do  not have the EIC (Electronic Instrument Cluster) present on the link.  In
      these applications, the SBDS will still put the EEC in CART mode in order  to
      perform diagnostics.

      NOTE:  The FN-9 application initializes in CART mode and does not operate  in
      UART mode at all.  FN-9 uses two separate processors, (CCA and MCCA), instead
      of the EIC.  During normal vehicle operations, the EEC transmits  ECT,  FUEL,
      MIL  and  STO  information  to the CCA and MCCA.  There is also communication
      between the CCA and MCCA.  This is referred to as "Normal mode".  To  perform
      diagnostics,  the  SBDS  transmits  a  command  to the EEC in CART mode.  The
      strategy then goes into "Diagnostic Mode" in which it communicates  with  the
      SBDS.

                       -----------------------------
                      |  ________                   |     |      ------
                      | |        |      ______      |     |<--->| SBDS |
                      | |        |<--->|      |<----|---->|      ------
                      | |  EEC   |     | RAM/ |     |     |
                      | |  CPU   |     | CART |     |     |
                      | |        |     |      |     |     |      ------
                      | |        |     |______|     |     |<--->| EIC  |
                      | |        |                  |     |      ------
                      | |________|                  |
                      |                             |
                      |          EEC IV             |
                      |                             |
                       -----------------------------


      The Data Communication Link is designed to operate at  one  of  several  baud
      rates,  as  defined  by  the  Diagnostic  Mode.   The  Service Bay Diagnostic
      Computer (one of several possible DCL users) controls  the  Diagnostic  Mode.
      If  the  Service  Bay  Diagnostic  Computer  is not hooked up to the DCL, the
      Diagnostic Mode is normal.

                                         16-5

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      2.0 LINK_SW:


      LINK_SW is actually three bit flags which control the  configuration  of  the
      vehicle's communication links (DCL and DOL).  These flags are mapped into the
      lower 3 bits of the register LINK_SW as follows:


                        7   6   5   4   3   2   1   0 
                      ---------------------------------
            LINK_SW = | 0 | 0 | 0 | 0 | 0 | x | x | x |
                      ---------------------------------
                                            ^   ^   ^
                                            |   |   |        DOL:
                                            |   |   +-------  0 => no DOL
                                            |   |             1 => DOL present
                                            |   |
                                            |   |            DCL:
                                            |   +-----------  0 => no DCL
                                            |                 1 => DCL present
                                            |
                                            |                UART mode:
                                            +---------------  0 => UART mode 
                                                                   disabled
                                                              1 => UART mode 
                                                                   enabled
                                             note: bits 3 -> 7 are not used and 
                                                   should be all zeros.



      2.1 Setting LINK_SW:


      UART mode (bit 2):   This  bit  controls  whether  or  not  the  EEC-IV  will
      communicate  with  the dashboard computer via DCL.  The UART mode is a "sleep
      state" in which no communication takes place on DCL  unless  the  EEC-IV  has
      been  commanded to "wake up" by the SBDS.  Most packages will be in UART mode
      ("asleep") during normal vehicle operation.  These packages should have  UART
      mode  enabled  (bit  2  =  1).  The FN-9 is the only exception to this.  FN-9
      always communicates with either the dashboard computer or  SBDS,  and  should
      have UART mode disabled.

      DCL present (bit 1):  This  bit  enables  the  software  that  processes  and
      outputs  the  information  on  the  DCL.   ALL packages that communicate with
      either the dashboard or SBDS should have this bit set (bit 1 = 1).

      DOL present (bit 0):  This bit enables the software  that  outputs  fuel-used
      information  for  use  by  the  trip  computer.  DOL should be enabled if the
      package uses a trip computer (bit 0 = 1).  The FN-9 is the only exception  to
      this.   FN-9  sends  fuel-used information on the DCL, and therefore does not
      need DOL enabled.  FN-9 should have DOL disabled (bit 0 = 0).








                                         16-6

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      3.0 DEFAULT_LVF:


      This is an internal DCL parameter which affects  the  format  of  the  serial
      communication  protocol when DCL is present.  This parameter should be set to
      1 for all packages except FN-9.  FN-9 should be set to 7.



      4.0 DCL State Diagrams:


      4.1 UART mode enabled:  (LINK_SW = 4,5,6,7)


                                                       power up
                                                           |
                                                           |
                                                           V
                                                +----------------------+
                          wake up message       |       standby        |
                             from SBDS          |                      |
                         +----------------------| - configured as UART |
                         |                      | - no linkmaster      |
                         |                      | - EEC monitors link  |
                         |                      |   for SBDS message   |
                         |                      | - link not active    |
                         |                      |   except for SBDS    |
                         |                      +----------+-----------+
                         |                                 |
                         V                                 |
              +----------------------+                     |
              |      diagnostics     |                     |
              |                      |                     |
              | - configured as CART |                     | go offline
              | - EEC is linkmaster  |                     |  message
              | - EEC communicates   |                     | from SBDS
              |   with SBDS          |                     |
              |                      |                     |
              +----------+-----------+                     |
                         |                                 |
                         |                                 |
                         |                                 V
                         |                      +----------------------+
                         |                      |       offline        |
                         |                      |                      |
                         +--------------------->|  - no communication  |
                        go offline command      |  - no return to      |
                           from SBDS            |    other states      |
                                                |                      |
                                                +----------------------+









                                         16-7

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      4.2 UART mode disabled:
          (LINK_SW = 0,1,2,3)                           


                                     power up
                                        |
                                        |
                                        V
                       +------------------------------------+
                       |         normal operation           |
                       |                                    |
                       | - configured as CART               |
                       | - EEC is linkmaster                |
                       | - EEC receives commands from SBDS  |
                       | - EEC transmits normal MAP         |
                       |   information for dashboard display|
                       +---------------------------+--------+
                              ^                    |
                              |                    |
              diagnostic      |                    | DIAGMODE command
              parameter slots |                    | from SBDS
              idle            |                    V
                       +------+-----------------------------+
                       |           Diagnostics              |
                       |                                    |
                       | - configured as CART               |
                       | - EEC is linkmaster                |
                       | - EEC communicates with SBDS       |
                       +----------------+-------------------+
                                        |
                                        | go offline command
                                        | from SBDS
                                        V
                              +--------------------+
                              |     Offline        |
                              | - no communication |
                              | - no return to     |
                              |   other states     |
                              +--------------------+





















                                         16-8

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      5.0 DCL Operational Modes:


      5.1 Diagnostic Mode Overview:


      The intent of the Data Communications Link (DCL) usage for diagnostics is  to
      provide  on-board,  Electronic  Engine Control Module (EEC-IV), to off-board,
      Service Bay Diagnostic System (SBDS), communications for enhanced  diagnostic
      capabilities.   In  order  to  accomplish  this  task,  the SBDS will specify
      various tasks which will be dependent on the level of diagnostics required.

      If the strategy is in Standby (UART mode),  the  SBDS  will  send  a  message
      instructing  the EEC to enter Diagnostics (CART mode) and monitor the DPS for
      further commands.

      Once the EEC is in diagnostic mode, the  SBDS  will  designate  the  task  by
      sending  commands  in  the DPS at which time the vehicle subsystems will per-
      form the appropriate actions.  The diagnostic task specified by the  contents
      of  the  DPS  will take effect at the start of the next block.  All remaining
      link devices will continue to monitor the DPS unless they have been sent off-
      line  by  the SBDS.  Non-active devices must refrain from transmitting or re-
      ceiving non-pertinent information until the DPS specifies a new diagnos-  tic
      mode or returns to the idle value.


      5.2 Defined EEC-IV Diagnostic Modes:


      An eight (8) bit value is used to encode the  various  diagnostic  modes  for
      each device.  The following diagnostic modes are defined in this document:


              DIAGMODE    Value     Function
              ================================================================
              00000001      1H      clear DCL error/flag bits
              00000010      2H      clear Continuous Self-Test codes
              00000011      3H      display status information only
              00100001     21H      transmit PID values
              00100010     22H      transmit DMR values
              00100011     23H      transmit PID map
              00100100     24H      transmit DMR map
              00100101     25H      run self-test (K0E0 or K0ER)
              00100110     26H      transmit continuous self-test codes
              00100111     27H      transmit PID and DMR values
              01000001     41H      read PID/DMR map
              01000010     42H      read PID/DMR map
              01000011     43H      read program/data bytes
              01000101     45H      read program execution vector
              01000110     46H      read A/D substitution values










                                         16-9

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      5.2 Defined EEC-IV Diagnostic Modes (continued):


      In addition, one diagnostic code has been reserved for all link devices.


              DIAGMODE    Value     Function
              ================================================================
              10000000     80H      go permanently offline, disable DCL function
              10000001     81H      set DCL baud rate


      These functions are described in detail below.















































                                        16-10

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            DCL DIAGNOSTIC MODE DESCRIPTIONS


      The diagnostic modes used by the SBDS/EEC-IV interface may  be  divided  into
      the following categories:


      5.2.1 Read parameter values from the EEC-IV module:

      All diagnostic modes in this  category  are  used  by  the  SBDS  to  request
      information  from  the EEC-IV module.  Information may be requested in one of
      two ways depending on the mode selected:  by name, (PID index  code),  or  by
      address, (DMR offset).

      Certain key engine parameters will be referenced by a unique index code (ie.,
      name).  This mode is intended to provide a fast strategy independent means of
      requesting parameter  values  which  are  considered  to  be  vital  to  most
      diagnostic  procedures.   It  is  our  intent  to  keep this list as small as
      possible to minimize the index table storage requirements (see figure 1).  In
      order  to  allow the SBDS to access any strategy parameter, another method of
      requesting data will be provided by the EEC-IV module.   In  this  mode,  the
      SBDS  will  request  information  by  transmitting an 11 bit offset to a base
      address.  The sum of the  base  address  value  and  offsets  will  form  the
      absolute  addresses  used  to  reference the required engine parameters.  The
      base address will be  specified  in  the  command  qualifier  slot  when  the
      diagnostic mode command 22h is requested.

      To minimize the amount of RAM required to hold the requested  PID  codes  and
      DMR  offsets,  there  exists  only  one  96  word  table  that holds both the
      currently active PID codes  and  DMR  offsets.   One  bit  of  each  word  is
      dedicated  as  a flag bit to signal whether the specific table entry is a PID
      code or a DMR offset.


      5.2.1.1 Parameter reference by name (PID):

      5.2.1.1.1 Command 41h:  SBDS transmits to EEC a map of the PID codes for
                              the desired parameters.  Since the information
                              in the word transmitted by SBDS contains a PID/DMR
                              flag bit, this command is equivalent to command
                              42h shown below.       
      5.2.1.1.2 Command 23h:  EEC transmits to SBDS the PID code map to verify
                              the information previously received.
      5.2.1.1.3 Command 21h:  EEC transmits to SBDS the parameter values for the
                              requested PID codes.
      5.2.1.1.4 Command 27h:  EEC transmits to SBDS the parameter values for
                              both the PID and DMR maps.













                                        16-11

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                      DCL DIAGNOSTIC MODE DESCRIPTIONS (continued)


      5.2.1.2 Parameter reference by address offset (DMR):

      5.2.1.2.1 Command 42h:  SBDS transmits to EEC a map of address offsets for
                              the desired parameters.  Since the information
                              in the word transmitted by SBDS contains a PID/DMR
                              flag bit, this command is equivalent to command
                              41h shown above.       
      5.2.1.2.2 Command 24h:  EEC transmits to SBDS the address offset map to
                              verify the information previously received.
      5.2.1.2.3 Command 22h:  EEC transmits to SBDS the parameter values for the
                              requested addresses (relative to a base address).
      5.2.1.2.4 Command 27h:  EEC transmits to SBDS the parameter values for
                              both the PID and DMR maps.


      5.2.2 Parameter Substitution:

      The only diagnostic mode of this type defined thus far is the substitution of
      the A/D sensor values.  The SBDS will transmit the values to be used in place
      of the normal strategy values.

      5.2.2.1 Command 46h:  SBDS transmits to EEC a set of values to substitute
                            for the A/D inputs, see logic below.


      To be performed during the DCL external interrupt:



      Once per block execute the following:


      All DPS idle ---------------------------| IDLE_COUNT = IDLE_COUNT + 1
                                              |
                                              | --- ELSE ---
                                              |
                                              | IDLE_COUNT = 0


      IDLE_COUNT >= SBDS_OFFLINE -------------| ATOD_ACTIVE = 0
                                              |  (lock the A/D substitution)


      Once per frame execute the following:


      DPS DIAGMODE Command Code = 46h --|
       (IW:1 F:2 b:0-7)                 |     
                                        |AND -| ATOD_ACTIVE = B2h
      Parity in IW2 o.k.----------------|     |  (unlock A/D substitution)







                                        16-12

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                      DCL DIAGNOSTIC MODE DESCRIPTIONS (continued)


      5.2.2.1 Command 46h (continued):


      Logic controlling the A/D substitution of each channel:


      ATOD_ACTIVE = B2h ----------------|
       (A/D substitution unlocked)      |      
                                        |
      bits 15-10 of A/D substituion     |
      table entry = 101001 -------------|AND -| Perform A/D substitution on
       (mask bits enabled for this      |     |  this channel
         channel)                       |     |
                                        |     |
      DCL status register bit 4 = 0 ----|     |
       (A/D substitution enabled)             |
                                              | --- ELSE ---
                                              |
                                              | Use normal input for this
                                              |  channel


      5.2.3 Download programs/data:

      The next class of operations involves the transmission of data and diagnostic
      programs  from  the SBDS to the EEC-IV module.  Up to 10 bytes of data may be
      transmitted during each Frame.   An  Exclusive-Or  checksum  is  provided  to
      ensure data integrity.

      There is no real difference between the transmission of  data  and  programs.
      In  fact, the two may be transmitted at the same time.  To keep processing to
      a minimum, only 10 bytes may be transmitted in a given  Frame  in  Slots  IW2
      through IWE inclusive.

      After a program has been downloaded, the SBDS may enable  execution  of  this
      program  by  sending the start address of the desired program.  The requested
      routine is to be executed once per  background  loop  until  the  request  is
      revoked  by  the SBDS transmitting an execution address of 0000H, or when bit
      15 of the DCL Error/Flag register is set, or when the EEC-IV is reset.   When
      the request is revoked all RAM must be re-initialized.

      5.2.3.1 Command 43h:  SBDS transmits to EEC a block of bytes which can be
                            program, data, or both.

      5.2.3.2 Command 45h:  SBDS transmits to EEC the the execution vector for
                            the program previously loaded.











                                        16-13

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                      DCL DIAGNOSTIC MODE DESCRIPTIONS (continued)


      5.2.4 Transmit Self-Test codes:

      The next class of diagnostic operational modes are used to return either  the
      VIP  service  codes  or continuous codes.  A single DCL mode command (25h) is
      used to initiate both Key-On-Engine-Off and Key-On-Engine-Running self tests.
      The  PIP  signal  will be used to determine which test sequence is performed.
      Continuous Self-Test codes are transmitted with DCL mode command 26h.

      5.2.4.1 Command 25h:  SBDS requests EEC to run either KOEO or KOER self test
                            and transmit the resulting service codes.

      5.2.4.2 Command 26h:  SBDS requests EEC to transmit the continuous codes.


      5.2.5 Housekeeping functions:

      The following operational modes are  used  by  the  SBDS  System  to  provide
      housekeeping functions.  Currently, three of these diagnostic modes have been
      defined.

      5.2.5.1 Clear DCL Error/Flag register:

      The DCL Error/Flag register, (16 bit), is used to maintain status information
      regarding  the  actual  DCL  system.   The  SBDS will use this information to
      insure error free DCL communications and the determination of system status.

      The Error/Flag bits are assigned as follows:


              Bit    Function               Condition
              ================================================================
               0     Read Bytes/Program     Load Address (low byte) Parity
               1     Read Bytes/Program     Load Address (high byte) Bad Value
               2     Read Bytes/Program     Data or Checksum Parity
               3     Read Bytes/Program     Incorrect Checksum
               4     Read A/D Values        Parity Error
               5     Read PID Map           Parity Error
               6     Read DMR Offset Map    Parity Error
               7     *** not used ***
               8     *** not used ***
               9     *** not used ***
              10     Read Execute Vector    Parity Error
              11     Read Execute Vector    Incorrect Checksum
              12     DCL Mode Scheduler     Bad Diagnostic Parameter Slot
              13     EEC Reset              Set if EEC Resets
              14     Self-Test              Self-Test Complete
              15     Background             Set to Disable Program* Execution


         * Refers to execution of diagnostic programs downloaded into  the  EEC-IV
           by the SBDS.

      5.2.5.1.1 Command 01h:  SBDS requests EEC to clear the Error/Flag register.




                                        16-14

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                      DCL DIAGNOSTIC MODE DESCRIPTIONS (continued)


      5.2.5.2 Clear continuous self test codes:  

      Under certain conditions, the SBDS may wish to clear all continuous self test
      codes.

      5.2.5.2.1 Command 02h:  SBDS requests EEC to clear the continuous self test
                              codes.


      5.2.5.3 Display DCL Status Information:

      This diagnostic mode is used by the SBDS to read the DCL status  bytes  which
      are  transmitted  in  the  Diagnostic  Slot,  IW1,  without having the EEC-IV
      reading from or writing to any other Slots.  This mode may also  be  used  by
      the SBDS for certain critical mode timing change requirements.

      When the EEC-IV module has been selected with a DIAGMODE command in the range
      00H   through  7FH  inclusive,  the  EEC  will  write  the  following  status
      information in Slot IW1, Frames 04H through 0FH inclusive:


              Frame     Description
              =================================================================
                4       Display the current diagnostic mode
                5       Display the diagnostic mode for the next Block
                6       DCL Error/Flag bits - Low byte
                7       DCL Error/Flag bits - High byte
                8       Direct Memory Reference (DMR) Base register - Low byte
                9       Direct Memory Reference (DMR) Base register - High byte
                A       ROM Calibration ID - Low byte
                B       ROM Calibration ID - High byte
                C       Idle
                D       Idle
                E       Idle
                F       Idle


      5.2.5.3.1 Command 03h:  SBDS requests EEC to display only status information.



















                                        16-15

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                      DCL DIAGNOSTIC MODE DESCRIPTIONS (continued)


      5.2.6 Common DCL Diagnostic Modes:

      Two diagnostic modes have been defined which are common to all link  devices.
      These modes are defined below.

      5.2.6.1 All DCL Devices Go Offline:

      This mode is used by the SBDS to command all link devices to  go  permanently
      offline.  This mode may be used to diagnose the link itself, or when external
      diagnostic devices may be attached to the link.

      5.2.6.1.1 Command 80h:  Go permanently offline command from SBDS.

      5.2.6.2 Set DCL Baud Rate:

      This diagnostic mode is used by the diagnostic computer system to command all
      link devices to change baud rate.  If any module is not capable of supporting
      the new desired baud rate, it MUST be placed permanently offline.

      5.2.6.2.1 Command 81h:  Change DCL baud rate command from SBDS.





































                                        16-16

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      5.3 EEC-IV Normal Mode (FN-9 only):


      The normal mode of operation for the DCL is intended  to  provide  a  minimal
      level  of  information sharing among the EEC-IV module, Electronic Instrument
      Cluster (CCA) and the Trip Minder/Message Center (MCCA).

      DCL information flow is initiated by the Link Master.  The Link Master  sends
      out  a  Sync  Sequence at the start of each frame.  All devices will time the
      information flow of the frame from the first start bit of the sync message.

      When the system is powered up and  not  in  accessory  mode,  the  EEC-IV  is
      designated  as the Link Master and will transmit the Sync slot, ID slot (IW0)
      and IW2.  The EEC monitors IW1 (DPS slot) for commands from SBDS.


      5.3.1 Summary of EEC-IV Normal Mode:


         Sync Slot:                  EEC transmits 0000

         ID Slot: (IW0, frames 0-F)  Bit      Description
                                     ================================
                                      0-7      RPM
                                      8-11     Frame Number
                                     12-15     Vertical Parity Nibble

         Diagnostic Parameter Slot:  (IW1, frames 0-3)
               - IDLE in Normal Mode.
               - SBDS will transmit commands here for Diagnostic Mode.

         CCA and MCCA Information: (IW2, lframes 0-F)
               - EEC transmits ECT, Fuel used, MIL and STO information
                 for dashboard display.


























                                        16-17

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   TABLE [NORMAL MODE]


      5.3.2 EEC-IV/CCA/MCCA Information Slot Allocation for 1988 FN9:


       -------------------------------------------------------------------------
      |IW0     |  IW1   |  IW2   |  IW3   |  IW4    |  IW5   |  IW6    |  IW7   |
      |Word 00 | Word 01| Word 02| Word 03| Word 04 | Word 05| Word 06 | Word 07|
      |-------------------------------------------------------------------------|
      |  RPM   |DIAG MOD|  Fuel  |Distance|Odometer | Speed  |  CCA    |  MCCA  |
      |Frame 00|  CODE  |  Used  |  Data  |Display 1| Display|  Flags  |  Flags |
      |--------|--------|--------|--------|---------|--------|---------|--------|
      |  RPM   |NXT BLK | Coolant|  LCD   |Odometer | Speed  |  CCA    |  MCCA  |
      |Frame 01|OFFLINE | Temp   |  Temp  |Display 2| Display|  Flags  |  Flags |
      |--------|--------|--------|--------|---------|--------|---------|--------|
      |  RPM   |DIAG FR |  Fuel  |Distance|Odometer | Speed  |  CCA    |  MCCA  |
      |Frame 02|LEN/CMD |  Used  |  Data  |Display 3| Display|  Flags  |  Flags |
      |--------|--------|--------|--------|---------|--------|---------|--------|
      |  RPM   |DIAG CMD| EEC MIL|  LCD   | Fuel    | Speed  |  CCA    |  MCCA  |
      |Frame 03|  QUAL  |  STO   |  Temp  | Level   | Display|  Flags  |  Flags |
      |--------|--------|--------|--------|---------|--------|---------|--------|
      |  RPM   |--IDLE--|  Fuel  |Distance|Odometer | Speed  |  CCA    |  MCCA  |
      |Frame 04|        |  Used  |  Data  |Display 1| Display|  Flags  |  Flags |
      |--------|--------|--------|--------|---------|--------|---------|--------|
      |  RPM   |--IDLE--| Coolant|  LCD   |Odometer | Speed  |  CCA    |  MCCA  |
      |Frame 05|        |  Temp  |  Temp  |Display 2| Display|  Flags  |  Flags |
      |--------|--------|--------|--------|---------|--------|---------|--------|
      |  RPM   |--IDLE--|  Fuel  |Distance|Odometer | Speed  |  CCA    |  MCCA  |
      |Frame 06|        |  Used  |  Data  |Display 3| Display|  Flags  |  Flags |
      |--------|--------|--------|--------|---------|--------|---------|--------|
      |  RPM   |--IDLE--| EEC MIL|  LCD   | Fuel    | Speed  |  CCA    |  MCCA  |
      |Frame 07|        |  STO   |  Temp  | Level   | Display|  Flags  |  Flags |
      |--------|--------|--------|--------|---------|--------|---------|--------|
      |  RPM   |--IDLE--|  Fuel  |Distance|Odometer | Speed  |  CCA    |  MCCA  |
      |Frame 08|        |  Used  |  Data  |Display 1| Display|  Flags  |  Flags |
      |--------|--------|--------|--------|---------|--------|---------|--------|
      |  RPM   |--IDLE--| Coolant|  LCD   |Odometer | Speed  |  CCA    |  MCCA  |
      |Frame 09|        |  Temp  |  Temp  |Display 2| Display|  Flags  |  Flags |
      |--------|--------|--------|--------|---------|--------|---------|--------|
      |  RPM   |--IDLE--|  Fuel  |Distance|Odometer | Speed  |  CCA    |  MCCA  |
      |Frame 10|        |  Used  |  Data  |Display 3| Display|  Flags  |  Flags |
      |--------|--------|--------|--------|---------|--------|---------|--------|
      |  RPM   |--IDLE--| EEC MIL|  LCD   | Fuel    | Speed  |  CCA    |  MCCA  |
      |Frame 11|        |  STO   |  Temp  | Level   | Display|  Flags  |  Flags |
      |--------|--------|--------|--------|---------|--------|---------|--------|
      |  RPM   |--IDLE--|  Fuel  |Distance|Odometer | Speed  |  CCA    |  MCCA  |
      |Frame 12|        |  Used  |  Data  |Display 1| Display|  Flags  |  Flags |
      |--------|--------|--------|--------|---------|--------|---------|--------|
      |  RPM   |--IDLE--| Coolant|  LCD   |Odometer | Speed  |  CCA    |  MCCA  |
      |Frame 13|        |  Temp  |  Temp  |Display 2| Display|  Flags  |  Flags |
      |--------|--------|--------|--------|---------|--------|---------|--------|
      |  RPM   |--IDLE--|  Fuel  |Distance|Odometer | Speed  |  CCA    |  MCCA  |
      |Frame 14|        |  Used  |  Data  |Display 3| Display|  Flags  |  Flags |
      |--------|--------|--------|--------|---------|--------|---------|--------|
      |  RPM   |--IDLE--| EEC MIL|  LCD   | Fuel    | Speed  |  CCA    |  MCCA  |
      |Frame 15|        |  STO   |  Temp  | Level   | Display|  Flags  |  Flags |
      |--------|--------|--------|--------|---------|--------|---------|--------|


                                        16-18

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      6.0 DCL Diagnostic Mode Change Protocol:


      All devices connected to the DCL will change operational modes based  on  the
      contents  of  the  Diagnostic Parameter Slots, (DPS), which are defined to be
      Information Word 1, Frames 0 through 3 inclusive.  The SBDS will use the  DPS
      to  indicate  the  diagnostic  mode command which will take affect during the
      next block.


      6.1 The Diagnostic Parameter Slots:  [IW:1 F:0-3 b:0-11]


      The DPS may be divided into five (5) fields as follows:


                        IW:1
              Frame     Bits     Description
              ================================================================
                0       0-11     DCL Module Select Bit Map
                1       0-11     DCL Module Offline Bit Map
                2       0-7      DIAGMODE Command Code
                2       8-11     Frame Length Specifier
                3       0-11     DIAGMODE Command Qualifier


      6.1.1 The Module Select Bit Map:  [IW:1 F:0 b:0-11]

      The first field is the Module Select Bit Map.  This field is used, when there
      is  more  than  one module present on the DCL, to indicate which module is to
      respond to the diagnostic mode command.  This field is defined as follows:


              Bit      Selected Module
              ================================================================
               0       Electronic Engine Control Module (EEC-IV)
               1       (FN-9 application only)
               2       (FN-9 application only)
              3-11     reserved for future expansion


      If bit 0 is set  (1),  the  EEC-IV  should  execute  the  specified  DIAGMODE
      command.   If  bit  0  is  clear  (0),  the EEC-IV should ignore the DIAGMODE
      command.
















                                        16-19

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      6.1.2 The Module Offline Bit Map:  [IW:1 F:1 b:0-11]

      The second field (used only by FN-9) is the Module Select Bit  Map  which  is
      defined as follows:


             Bit      Selected Module
             ================================================================
              0       Electronic Engine Control Module (EEC-IV)
              1       Cluster Control Assembly (CCA
              2       Message Center Control Assembly (MCCA)
             3-11     reserved for future expansion


      If bit 0 is set (1), the EEC-IV should not transmit or receive any normal map
      information.   If bit 0 is clear (0), the EEC-IV MUST transmit its normal map
      information.


      6.1.3 The DIAGMODE Command Code:  [IW:1 F:2 b:0-7]

      The third field is the DIAGMODE Command Code.  This is  a  byte  value  which
      identifies  the  requested  diagnostic mode.  DIAGMODE codes in the range 00H
      through 7FH inclusive  are  to  be  considered  as  specific,  (or  private),
      diagnostic  modes.  DIAGMODE codes in the range 80H through FFH inclusive are
      used to designate common diagnostic modes.  Common diagnostic  command  codes
      MUST NOT be assigned without approval by all link devices.


      6.1.4 The Frame Length Specifier:  [IW:1 F:2 b:8-11]

      The fourth field is the Frame Length Specifier for the next Block.  This is a
      four  bit  value  in the range 1H through EH inclusive.  This value specifies
      the Frame Length as the last valid Slot number.  Therefore, this value is one
      (1) less than the value to be written to the CART Frame Length Register.


      6.1.5 The DIAGMODE Command Qualifier:  [IW:1 F:3 b:0-11]

      The fifth and last field is the DIAGMODE Command Qualifier.  This is a 12 bit
      value  which  may  contain  additional  information  required  to process the
      requested diagnostic procedure.  Currently, three defined  EEC-IV  diagnostic
      modes use this information, (see DIAGMODE CODES 22H, 80H, and 81H).


      6.2 Diagnostic Parameter Slots Error Processing:


      All DPS fields MUST contain valid information.  That is to say, all DPS  MUST
      not be idle and all slots MUST have the correct Vertical Parity value.

      If any of the above conditions are not met, then the  entire  DPS  is  to  be
      considered in error and disregarded.







                                        16-20

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.0 Diagnostic Command Detailed Descriptions:


      7.1 Clear DCL Error/Flag Register:


      This diagnostic mode is specified  by  the  SBDS  to  clear  the  EEC-IV  DCL
      Error/Flag Register.  The sequence of events proceeds as follows:

              I. The SBDS will specify this diagnostic mode by transmitting
                 the following DPS:


                 DPS Field          Value
                 ==========================
                 Module Select       001H
                 Module Offline      FFFH
                 DIAGMODE Code       01H
                 Frame Length        1H
                 DIAGMODE Qualifier  000H 


             II. The EEC-IV will change to this mode at the start of the next
                 Block. All other link devices will go offline.

            III. While this mode is in effect, the EEC-IV will clear the 16 bit
                 DCL Error/Flag Register.

             IV. During this mode, the EEC-IV will continue to transmit the
                 Synch and ID Slots and the status information in the Diagnostic
                 Slot, IW1. All other link devices will be offline.





























                                        16-21

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.2 Clear Continuous VIP Codes:


      This diagnostic mode is specified by the SBDS to clear the EEC-IV  Continuous
      Self-Test Codes.  The sequence of events proceeds as follows:

              I. The SBDS will specify this diagnostic mode by transmitting
                 the following DPS:


                 DPS Field          Value
                 ==========================
                 Module Select       001H
                 Module Offline      FFFH
                 DIAGMODE Code       02H
                 Frame Length        1H
                 DIAGMODE Qualifier  000H 


             II. The EEC-IV will change to this mode at the start of the next
                 Block. All other link devices will go offline.

            III. While this mode is in effect, the EEC-IV will clear all KAM
                 bytes which hold the Continuous Self-Test Codes.

             IV. During this mode, the EEC-IV will continue to transmit the
                 Synch and ID Slots and the status information in the Diagnostic
                 Slot, IW1. All other link devices will be offline.
































                                        16-22

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.3 Display status information:


              I. The SBDS will specify this diagnostic mode by transmitting
                 the following DPS:


                 DPS Field          Value
                 ==========================
                 Module Select       001H
                 Module Offline      FFFH
                 DIAGMODE Code       03H
                 Frame Length        1H
                 DIAGMODE Qualifier  000H 


             II. The EEC-IV will change to this mode at the start of the next
                 Block. All other link devices will go offline.

            III. During this mode, the EEC-IV will continue to transmit the
                 Synch and ID Slots and the status information in the Diagnostic
                 Slot, IW1. All other link devices will be offline.






































                                        16-23

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.4 Transmit PID values to SBDS:


      After the Parameter Identification (PID)/Direct Memory  Reference  (DMR)  RAM
      map  has  been  sent  to  the  EEC-IV, the SBDS can change modes to allow the
      EEC-IV to transmit only the requested PID parameters.

              I. The SBDS will specify this diagnostic mode by transmitting
                 the following DPS:


                 DPS Field          Value
                 ==========================
                 Module Select       001H
                 Module Offline      FFFH
                 DIAGMODE Code       21H
                 Frame Length        xH
                 DIAGMODE Qualifier  000H


             II. The EEC-IV will change to this mode at the start of the
                 next Block. All other link devices will go offline. Frame
                 length can vary from 2H to 8H slots, thus allowing access to
                 up to 96 parameter per block.

            III. Parameter Identification code requests are identified in the
                 EEC-IV PID/DMR RAM map by bit 11 (PID/DMR flag bit) of each word
                 entry in the table.  If this bit is set (1) then the lower byte
                 of that table entry represents a PID code.  See diagram below:


                  +-------------------------------------- VNP
                  |           +-------------------------- PID/DMR flag bit 
                  |           |                           (1: PID code in low byte)
                  |           |         +---------------- Not used
                  |           |         |            +--- PID code
                  |           |         |            |
          +-------+------+    |    +----+---+   +----+----------------------+
          |              |    |    |        |   |                           |
          v              v    v    v        v   v                           v
        +---------------------------------------------------------------------+
        | 15 | 14 | 13 | 12 | 11 | 10 | 9 | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |
        +---------------------------------------------------------------------+

                              PID/DMR RAM Map entry format


             IV. When mode 21H takes effect, the EEC-IV will transmit the
                 requested parameter values in the same Slots that their PID codes
                 were transmitted to the EEC-IV by the SBDS in mode 41H or  42H.
                 The parameter values may be up to 12 bits in length and are to be
                 scaled appropriately.








                                        16-24

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.5 Transmit DMR values to SBDS:


      After the DMR 11 bit offset values have been loaded into the  EEC-IV  PID/DMR
      RAM  map, the SBDS can then change modes to allow the EEC-IV to transmit only
      the DMR parameters only:

              I. The SBDS will specify this diagnostic mode by transmitting
                 the following DPS:


                 DPS Field          Value
                 ==========================
                 Module Select       001H
                 Module Offline      FFFH
                 DIAGMODE Code       22H
                 Frame Length        xH
                 DIAGMODE Qualifier  xxxH


             II. The EEC-IV will change to this mode at the start of the next
                 Block. All other link devices will go offline.  Frame length can
                 be set to values between 2H and 8H Slots, thus allowing up to 96
                 parameters to be accessed per block. The DIAGMODE Qualifier slot
                 contains a 12 bit address (xxx) which is shifted left to make a
                 16 bit base address aligned on a 16 byte boundary.

            III. DMRs are identified in the EEC-IV PID/DMR RAM map by bit 11
                 (PID/DMR flag bit) of the map entry value.  If this bit is clear
                 (0), the lower 11 bits of that map entry represent a DMR offset
                 for the requested parameter.


                              PID/DMR RAM Map entry format

        +---------------------------------------------------------------------+
        | 15 | 14 | 13 | 12 | 11 | 10 | 9 | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |
        +---------------------------------------------------------------------+
          ^              ^    ^    ^                                        ^
          |              |    |    |                                        |
          +-------+------+    |    +-----------------+----------------------+ 
                  |           |                      |
                  |           |                      +--- DMR base address offset
                  |           +-------------------------- PID/DMR flag bit 
                  |                                (0: DMR offset in low 11 bits)
                  +-------------------------------------- VNP


             IV. While mode 22H is in effect, the EEC-IV will transmit the
                 requested information in the specified Slots. Each parameter
                 to be returned is an unscaled byte value whose address is 
                 obtained by adding the 11 bit DMR offset which was previously
                 received from command 42H, to the 16 bit base address.







                                        16-25

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.6 EEC-IV Transmission of Parameter Identification (PID) Map:


      The SBDS May request that the EEC-IV module transmit the  current  PID  codes
      from  the  PID/DMR  RAM  map  to  verify the information which was previously
      requested.  The PID codes are requested as follows:

              I. The SBDS will specify this diagnostic mode by transmitting
                 the following DPS:


                 DPS Field          Value
                 ==========================
                 Module Select       001H
                 Module Offline      FFFH
                 DIAGMODE Code       23H
                 Frame Length        8H
                 DIAGMODE Qualifier  000H 


             II. The EEC-IV will change to this mode at the start of the
                 next Block. All other link devices will go offline.

            III. The EEC-IV will transmit a 12 bit value in all data Slots
                 (Slots IW2 through IW8). This value will be the PID code for that
                 Slot.  The PID code will only be transmitted if the entry in the
                 PID/DMR RAM map has bit 11 (PID/DMR flag bit) set (1).   A value
                 of 0 will indicate that no PID code request was made for that
                 information slot. Therefore, a 0 can mean that either that Slot
                 holds a DMR offset value or that neither a PID code or a DMR
                 offset has been requested in that Slot.

             IV. The EEC-IV will also transmit the Synch and ID Slots as well
                 as the status information in the Diagnostic Slot, IW1, as usual.


























                                        16-26

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.7 EEC-IV Transmission of Direct Memory Reference (DMR) Map:


      The SBDS may request that the EEC-IV module transmit the current base address
      offsets  from  the  PID/DMR  RAM  map  to  verify  the  information which was
      previously requested.  The base address offsets  from  the  PID/DMR  map  are
      requested as follows:

              I. The SBDS will specify this diagnostic mode by transmitting
                 the following DPS:


                 DPS Field          Value
                 ==========================
                 Module Select       001H
                 Module Offline      FFFH
                 DIAGMODE Code       24H
                 Frame Length        8H
                 DIAGMODE Qualifier  000H 


             II. The EEC-IV will change to this mode at the start of the
                 next Block. All other link devices will go offline.

            III. The EEC-IV will transmit a 12 bit value in all data Slots
                 (Slots IW2 through IW8). This value will be the address offset
                 and PID/DMR flag bit for that slot. The DMR base address offset
                 will only be transmitted if the entry in the PID/DMR table has
                 bit 11 (PID/DMR flag bit) clear (0).  A value of 0 will indicate
                 that no DMR request was made for that information slot. 
                 Therefore, a value of 0 can mean either the particular entry in
                 the PID/DMR RAM table is a PID code or neither a PID code or DMR
                 offset.

             IV. The EEC-IV will also transmit the Synch and ID Slots as well as
                 the status information in the Diagnostic Slot, IW1, as usual
























                                        16-27

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.8 Key On Engine Off Self-Test/Key On Engine Running Self-Test:


      This self-test will be performed  when  the  SBDS  has  requested  on  demand
      self-test.  PIP will be used to determine if KOER or KOEO is to be run.

              I. The SBDS will specify this diagnostic mode by transmitting
                 the following DPS:


                 DPS Field          Value
                 ==========================
                 Module Select       001H
                 Module Offline      FFFH
                 DIAGMODE Code       25H
                 Frame Length        EH
                 DIAGMODE Qualifier  000H 

             II. The EEC-IV will change to this mode at the start of the next
                 Block. All other link devices will go offline.

            III. The EEC-IV will transmit only the Synch and ID Slots and the
                 status information in the Diagnostic Slot, IW1, while self-test
                 is being run. All other link devices will be offline.

             IV. When the self-test has completed, the EEC-IV will transmit the
                 service/fault codes in the last two slots.  The codes will begin
                 in the last slot of frame 0, then the next to last slot of frame
                 0.  This pattern is repeated until all codes have been
                 transmitted.  These codes are to be transmitted every block until
                 the diagnostic mode has been changed by the SBDS.





























                                        16-28

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.8.1 DCL/VIP handshaking for command 25h:


      The DCL routine will set a flag DCLST_START after receiving  diagnostic  code
      25h from SBDS.  This flag is continuously read by VIP to initiate self-test.


                                   DCL ROUTINE ACTION


      DCLST_DONE = 0 ------------------| Set DCLST_START
       (RAM table not ready)           |  (request VIP to run self test and
                                       |   load service codes into a RAM table)
                                       |
                                       | --- ELSE ---
                                       |
                                       | Transmit service codes to SBDS


                                       VIP ACTION


      DCLST_START = 1 -----------------| Run self test
       (initiate self test)            | When self test is complete, load the
                                       |  service codes into a RAM table
                                       | When the table is loaded, set DCLST_DONE
                                       |
                                       | --- ELSE ---
                                       |
                                       | No action






























                                        16-29

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.9 Transmit continuous self-test codes:


              I. The SBDS will specify this diagnostic mode by transmitting
                 the following DPS:


                 DPS Field          Value
                 ==========================
                 Module Select       001H
                 Module Offline      FFFH
                 DIAGMODE Code       26H
                 Frame Length        xH
                 DIAGMODE Qualifier  000H 


             II. The EEC-IV will change to this mode at the start of the next
                 Block.

            III. The EEC-IV will transmit only the Synch and ID Slots and the
                 status information in the Diagnostic Slot, IW1.

             IV. The EEC-IV will transmit the service/fault codes in the last two
                 slots.  The codes will begin in the last slot of frame 0, then
                 will continue in the next to last slot of frame 0.  This pattern
                 is then repeated until all codes have been transmitted. The
                 maximum number of codes is presently 32 (2 slots in 16 frames). 
                 The latest codes will be transmitted every block until the
                 diagnostic mode has been changed by the SBDS.  The EEC-IV will
                 inform the SBDS that a given block contains codes by setting
                 Error/Flag register bit 14.





























                                        16-30

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.10 Parameter Reference by both PID Map and Address Offset:


      After both the PID code and the DMR 11 bit offset  values  have  been  loaded
      into  the  EEC-IV  PID/DMR  RAM  map, the SBDS can then command the requested
      information to be transmitted using  a  combination  of  PID  codes  and  DMR
      offsets as follows:

              I. The SBDS will specify this diagnostic mode by transmitting
                 the following DPS:


                 DPS Field          Value
                 ==========================
                 Module Select       001H
                 Module Offline      FFFH
                 DIAGMODE Code       27H
                 Frame Length        xH
                 DIAGMODE Qualifier  000H


             II. The EEC-IV will change to this mode at the start of the
                 next Block. All other link devices will go offline.  The Frame
                 Length can vary from 2H to 8H, thus allowing a total of 96
                 parameters transmitted per block

            III. While mode 27H is in effect, the EEC-IV will transmit the
                 requested information in the specified Slots.  The transmission
                 will be done via either PID or DMR, depending on whether bit 11
                 (PID/DMR flag bit) is set (1: PID code) or clear (0: DMR 11 bit
                 offset) in the specific entry in the PID/DMR RAM map. The
                 parameters will be returned according to the descriptions in
                 commands 21h and 22h, above.



























                                        16-31

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.11 Receive PID codes/DMR offsets from SBDS:


      The SBDS will specify these parameters in the following way:

              I. The SBDS will specify this diagnostic mode by transmitting
                 the following DPS:


                 DPS Field          Value
                 ==========================
                 Module Select       001H
                 Module Offline      FFFH
                 DIAGMODE Code       41H or 42H
                 Frame Length        xH
                 DIAGMODE Qualifier  000H


             II. The EEC-IV will change to this mode at the start of the
                 next Block. All other link devices will go offline. Frame
                 length can vary from 2H to 8H Slots, thus allowing up to 96
                 parameter requests per block.

            III. The SBDS will then transmit the PID codes/DMR offsets and
                 PID/DMR flag bits in the selected Slots when mode 41H or 42H has
                 taken effect. PID codes are single byte values in the range 1
                 through 255 inclusive. The DMR offsets are 11 bit offsets from a
                 base address (specified by DIAGMODE 22H).  The format for the
                 Slots containing PID codes/DMR offsets to be transmitted by the
                 SBDS and stored in the PID/DMR RAM map is shown below:


                                     PID CODE FORMAT


                  +-------------------------------------- VNP
                  |           +-------------------------- PID/DMR flag bit 
                  |           |                           (1: PID code in low byte)
                  |           |         +---------------- Not used
                  |           |         |            +--- PID code
                  |           |         |            |
          +-------+------+    |    +----+---+   +----+----------------------+
          |              |    |    |        |   |                           |
          v              v    v    v        v   v                           v
        +---------------------------------------------------------------------+
        | 15 | 14 | 13 | 12 | 11 | 10 | 9 | 8 | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |
        +---------------------------------------------------------------------+
          ^              ^    ^    ^                                        ^
          |              |    |    |                                        |
          +-------+------+    |    +-----------------+----------------------+ 
                  |           |                      |
                  |           |                      +--- DMR base address offset
                  |           +-------------------------- PID/DMR flag bit 
                  |                                  (0: DMR offset in low 11 bits)
                  +-------------------------------------- VNP
                                    DMR offset format




                                        16-32

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.11 Receive PID codes/DMR offsets from SBDS (continued):


            III. An IDLE Slot or a Slot containing the value 0 indicates that
                 the EEC-IV should not transmit in that Slot during the response
                 phase, (mode 21H, mode 22H or mode 27H).

             IV. The EEC-IV will read the incoming Slots and store them in the
                 combined PID/DMR RAM map for later use.  This table needs to be
                 192 bytes in length, (16 Frames by 6 Slots; Slots IW0 and IW1
                 are not represented in this table). With this table size a
                 maximum of 96 parameters can be accessed per block.  The access
                 method can be either by PID code or 11 bit DMR offset or a mix of
                 both methods.  This table will be located at PID_DMR_RAM.

              V. While in mode 41H or 42H, the EEC-IV will transmit only the
                 Synch and ID Slots along with status information in the
                 Diagnostic Parameter Slot, (IW1).










































                                        16-33

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.12 Receive downloaded program/data from SBDS:


              I. The SBDS will specify this diagnostic mode by transmitting
                 the following DPS:


                 DPS Field          Value
                 ==========================
                 Module Select       001H
                 Module Offline      FFFH
                 DIAGMODE Code       43H
                 Frame Length        EH
                 DIAGMODE Qualifier  000H 


             II. The EEC-IV will change to this mode at the start of the next
                 Block. All other link devices will go offline.

            III. The SBDS will then transmit the program/data using the following
                 format for each Frame in the Block:


                 Slot         Contents
                 =======================================
                 IW2          load address - low byte
                 IW3          load address - high byte
                 IW4          data byte 1
                 IW5          data byte 2
                 IW6          data byte 3
                 IW7          data byte 4
                 IW8          data byte 5
                 IW9          data byte 6
                 IWA          data byte 7
                 IWB          data byte 8
                 IWC          data byte 9
                 IWD          data byte 10
                 IWE          Exclusive-Or checksum


             IV. If Slot IW2 is IDLE, the EEC-IV should ignore the rest of the data
                 in that Frame. If Slot IW2 contains the low byte of the load 
                 address, then Slot IW3 MUST contain the load address high byte.  
                 The dataSlots may contain byte values or be IDLE.  An IDLE slot 
                 indicates that no data should be written into the address 
                 associated with that Slot. Data byte #1 will be loaded into the 
                 address specified in slots IW2 and IW3. Data byte #2 will be 
                 loaded into the next sequential address and so on. A new load 
                 address is provided in every frame. The load address MUST be 
                 between 'PID_DMR_MAP' and 'PID_DMR_MAP' + 192, or KAM_START and 
                 KAM_END. The only data written between KAM_START and KAM_END is 
                 previously saved KAM data.








                                        16-34

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.12 Receive downloaded program/data from SBDS (continued):


              V. Slot IWE will contain an 8 bit Exclusive-Or checksum of Slots
                 IW2, IW3 and all data Slots which are not IDLE. This checksum
                 must be used by the EEC-IV to validate the received data bytes.

             VI. The EEC-IV will transmit only the Synch and ID Slots as well
                 as the status information in the Diagnostic Slot, IW1.

            VII. This mode will remain in effect for as many Blocks as
                 necessary to transmit all of the required data/program bytes.

           VIII. Before downloading a program to execute all KAM must be read and
                 stored by the SBDS using Parameter Reference by Address Offset.
                 At the completion of running a downloaded program the KAM data
                 must be written back to the EEC using data down load.











































                                        16-35

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.13 Receive program execution vector from SBDS:


      The program execution vector will be specified as follows:

              I. The SBDS will specify this diagnostic mode by transmitting
                 the following DPS:


                 DPS Field          Value
                 ==========================
                 Module Select       001H
                 Module Offline      FFFH
                 DIAGMODE Code       45H
                 Frame Length        4H
                 DIAGMODE Qualifier  000H 


             II. The EEC-IV will change to this mode at the start of the next
                 Block. All other link devices will go offline.

            III. As soon as this mode takes effect, the SBDS will transmit the
                 16 bit start address by writing the low byte in Slot IW2 and
                 the high byte in Slot IW3. An 8 bit checksum of the address
                 will be transmitted in Slot IW4, all in Frame 0.

             IV. The program should begin execution within the next background
                 loop time and be repeated during each background loop.

              V. The program execution must be inhibited if any of the associated
                 error bits in the DCL Error/Flag register are set (bits 0-3 and
                 bits 10-11). In addition, the program may disable itself by
                 setting bit 15 of the DCL Error/Flag register.



























                                        16-36

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.14 A/D Sensor Value Substitution:


      The instantaneous A/D sensor values will be substituted in the following way:

              I. The SBDS will specify this diagnostic mode by transmitting
                 the following DPS:


                 DPS Field          Value
                 ==========================
                 Module Select       001H
                 Module Offline      xxxH
                 DIAGMODE Code       46H
                 Frame Length        2

                 DIAGMODE Qualifier  000H 


             II. The EEC-IV will change to this mode at the start of the next
                 Block. All other link devices will go offline.

            III. When mode 46H has taken effect, the SBDS will write up to 13
                 A/D substitution values in Slot IW2, Frames 0 through C
                 inclusive. These 10 bit binary point 0 values will be substituted
                 for their respective A/D sensor values according to the
                 following table:


                 A/D Channel        Frame  
                 ========================    
                  IACT                0
                  IECT                1
                  IEGO1               2
                  IEGO2               3
                  IEGR                4
                  IIVPWR              5
                  INDS                6
                  IOCC                7
                  ITAR                8
                  ITP                 9
                  IVCAL               A
                  IVSCCS              B         
                  **NOT USED**        C


      *NOTE:  If, for any given application, the A/D channel does not exist,
      attempting to substitute a value will have no effect.


             IV. The EEC-IV will transmit only the Synch and ID Slots and
                 the status information in the Diagnostic Slot, IW1, as usual.

              V. The values substitution should begin during the next
                 background loop and continue until changed later by the SBDS.

             VI. A/D parameter substitution is disabled for a particular A/D
                 channel when its associated Slot is left IDLE during mode 46H.


                                        16-37

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


            VII. When A/D parameter substitution is no longer requested all RAM
                 must be re-initialized.

           VIII. Before substituting A/D values all KAM must be read and stored
                 by the SBDS using parameter reference by address offset. At the
                 completion of the A/D substitutions the KAM data stored in the
                 SBDS must be read back to the EEC using data download.

             IX. The A/D substitution will only occur if the DCL communications
                 are actively in diagnostic mode.  When the command code 46H is
                 first issued, the A/D substitution wil be "unlocked" (assuming
                 some valid substitution value is also transmitted in IW2).  The
                 A/D substitution will remain unlocked until SBDS_OFFLINE number
                 of consecutive blocks with idle DPS are recieved.  This is to
                 prevent inadvertant A/D substitution when SBDS/EOL is not linked
                 up.












































                                        16-38

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.15 Go permanently offline command from SBDS:


      This mode will be specified by the SBDS as follows:

              I. The SBDS will specify this diagnostic mode by transmitting
                 the following DPS:


                 DPS Field          Value
                 ==========================
                 Module Select       001H
                 Module Offline      FFFH
                 DIAGMODE Code       80H
                 Frame Length        xH
                 DIAGMODE Qualifier  7FH 


             II. The EEC-IV will change to this mode at the start of the next
                 Block. All other link devices will go offline.

            III. The EEC-IV will completely disable all DCL functions. The 
                 CART circuit should be placed into PAUSE mode. The EEC-IV
                 must not generate Synch Words in this mode.

             IV. This mode will remain in effect until the EEC-IV has been
                 reset, (ignition key OFF-ON).

      Note that this mode makes use of the DIAGMODE Command Qualifier  Field.   The
      EEC-IV  MUST verify this command by taking the 1's complement of the DIAGMODE
      Command Qualifier and comparing it to the DIAGMODE Code.  If  the  comparison
      fails, the EEC-IV MUST NOT go offline.




























                                        16-39

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      7.16 Change DCL baud rate command from SBDS:


      This mode will be specified by the SBDS as follows:

              I. The SBDS will specify this diagnostic mode by transmitting
                 the following DPS:


                 DPS Field          Value
                 ==========================
                 Module Select       FFFH
                 Module Offline      xxxH
                 DIAGMODE Code       81H
                 Frame Length        2H
                 DIAGMODE Qualifier  xH 


             II. The EEC-IV will change to this mode at the start of the next
                 Block.

            III. The diagnostic computer will then transmit the baud rate specifier
                 in the command qualifier slot according to the following table:


                 Specifier            Requested Baud Rate
                 ----------------------------------------
                    00H                   2400 baud
                    01H                   4800 baud
                    02H                   9600 baud
                    03H                  19200 baud


             IV. The EEC-IV will set the new baud rate during the CART service
                 routine for receive frame F.  Therefore, the EEC-IV will use the
                 new baud rate beginning at the next block.

              V. The EEC-IV will transmit the Synch and ID Slots during mode 81H.
                 Status information should also be transmitted in the Diagnostic
                 Slot, IW1, as usual.




















                                        16-40

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      8.0 Definitions:

       -  ATOD_ACTIVE = Register used to unlock the A/D substitution  process.   As
          soon  as  the  DIAGMODE  command  code 46h is received, this parameter is
          loaded with a key  bit  pattern  used  to  enable  the  A/D  substitution
          process.

       -  Block = A group of sixteen sequential frames,  transmitted  in  ascending
          numerical order from 0 to 15.

       -  Byte = Eight bits of data.

       -  Cart_mode = Bit flag that indicates the current RAM/CART operating  mode.
          ( 0 => UART mode; 1 => CART mode )

       -  DCLST_DONE = Handshaking flag which indicates VIP  has  finished  loading
          the RAM table, commands 25H.

       -  DCLST_START = Handshaking flag which causes VIP to  load  the  continuous
          codes into a RAM table for subsequent transmission over DCL.  Used in DCL
          25H.

       -  DEFAULT_LVF = Default value for DCL last  valid  slot  number.   The  DCL
          frame  length  is  one  more than the last valid slot number (eg.  if the
          last valid slot is 1, the frame length is 2).  This value should  be  set
          to 1 for all applications except FN-9 (FN-9 should be 7).

       -  Diagnostic Parameter  Slots  =  The  diagnostic  parameter  slots  are  a
          sequence of four information words, contained in the first four frames of
          IS1, which define the diagnostic mode, beginning at the start of the next
          block.  The sequence is defined as IW1:F0, IW1:F1, IW1:F2, IW2:F3.

       -  Frame = A defined number of slots (1-16) preceded by an idle  time.   The
          first  slots  are  used  for  link  control  (sync  and  ID)  and  status
          information, and the remaining slots are used for information transfer.

       -  ID Slot = The slot immediately following the sync slot, also referred  to
          as IW0, which contains the 4 bit frame identification number.

       -  IDLE_COUNT = Running total of the number  of  IDLE  Diagnostic  Parameter
          Slots.

       -  Idle Slot = A slot  where  no  message  is  transmitted  (all  logic  l's
          expected) (i.e.  empty slot, blank slot)

       -  Information Slot = All slots except for sync slot and ID slot (IW1-IWE).

       -  Link Master = The control module which generates the sync sequence and ID
          slot.

       -  Link_sw = Hardware present switch for communication  link  configuration.
          See EEC OVERVIEW chapter.








                                        16-41

                      DATA COMMUNICATIONS LINK, GENERIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


          8.0 Definitions continued:

       -  Message = A serial information flow consisting of two bytes of data.  The
          two bytes of data are also referred to as a word.

       -  Nibble = The upper or lower four bits of data in a byte.

       -  SBDS_OFFLINE = A calibratable number of idle blocks that signals  to  the
          EEC that the SBDS is no longer active.

       -  Slot = A dedicated time period relative to the  sync  sequence  which  is
          used for transmission of a message.

       -  Sync Message = The message which contains the sync word 0000H (H  denotes
          hexadecimal).

       -  Uart_state = State counter for UART message check.

       -  Word = The 16 data bits of a message.









































                                        16-42

          DATA COMMUNICATIONS LINK, PID TABLES AND BIMAP DEFINITIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             STRATEGY MODULE: DCL_MAPS_COM7


      9.0 Parameter Identification (PID) Code Tables:


      Parameter        PID    Data    Output    Output
      Name             Code   Type    Scaling   Resolution
      ----------------------------------------------------
      N                 01    word      bin -2      4 RPM                   
      ***NOT USED***    02    
      BP                03    byte      bin 3       0.125 "Hg               
      SAFTOT            04    byte      bin 2       0.25 degrees S.A.       
      IACT              05    word      bin 0       1 A/D count             
      IECT              06    word      bin 0       1 A/D count             
      IEGR              07    word      bin 0       1 A/D count             
      IEGO11            08    word      bin 0       1 A/D count             
      ITP               09    word      bin 0       1 A/D count             
      ***NOT USED***    0A    
      IVCAL             0B    word      bin 0       1 A/D count             
      FUELPW1           0C    word      bin -5      32 clock ticks          
      LAMBSE1           0D    word      bin 11      1/2048 unitless         
      APT               0E    byte      bin 0       -1,0,1 unitless         
      ACT               0F    byte      bin -1      2 degrees F             
      ECT               10    byte      bin -1      2 degrees F             
      VBAT              11    byte      bin 4       0.0625 volts            
      ***NOT USED***    12    
      EGRDC             13    word      bin 11      1 EEC-IV count          
      ***NOT USED***    14    
      ISCDTY            15    word      bin 11      1 EEC-IV count          
      ***NOT USED***    16    
      VSBAR             17    byte      bin 1       0.5 MPH                 
      VS                18    word      bin 5       0.03125 MPH             
      ***NOT USED***    19    
      BITMAP_0          1A    word      N/A         N/A (see def. below)    
      BITMAP_1          1B    word      N/A         N/A (see def. below)    
      IEGO21            1C    word      bin 0       1 A/D count             
      FUELPW2           1D    word      bin -5      32 clock ticks          
      SBDS01            1E    byte      bin 0       N/A                     
      SBDS02            1F    byte      bin 0       N/A                     
      SBDS03            20    byte      bin 0       N/A                     
      SBDS04            21    byte      bin 0       N/A                     
      SBDS05            22    byte      bin 0       N/A                     
      SBDS06            23    byte      bin 0       N/A                     
















                                        16-43

          DATA COMMUNICATIONS LINK, PID TABLES AND BIMAP DEFINITIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      9.0 Parameter Identification (PID) Code Tables (continued):


      Parameter        PID    Data     Output        Output
      Name             Code   Type     Scaling      Resolution
      ---------------------------------------------------------------
      FMEM_FLAGS        24    byte      bin 0       N/A   
      FMEM_FLAG2        25    byte      bin 0       N/A
      VMAF              26    word      bin 8       0.00195  volts
      LOAD              27    word      bin 11      0.0488% of standard air charge
      KAMRF1            28    word      bin 4       0.0625 A/F
      KAMRF2            29    word      bin 4       0.0625 A/F
      DSDRPM            2A    byte      bin -4      16 r.p.m.
      RATCH             2B    word      bin 2       0.25 count
      LAMBSE2           2C    word      bin 11      1/2048 unitless
      ATMR1             2D    word      bin 0       1 second
      IOCC              2E    word      bin 0       1 A/D count
      INDS              2F    word      bin 0       1 A/D count
      BCSDC             30    word      bin 11      0.0488% duty cycle on time.
      ***NOT USED***    31    
      GR_CM             32    byte      bin 1       N/A
      SLIP_DES          33    word      bin 0       1 r.p.m.
      SLIP_ABS          34    word      bin -1      2 r.p.m.
      ETVOCM            35    word      bin 2       0.25 volts
      TV_PRES           36    byte      bin 1       0.5 p.s.i
      ITOT              37    word      bin 0       1 A/D count
      PDL               38    byte      bin 1       N/A
      ***NOT USED***    39 
































                                        16-44

          DATA COMMUNICATIONS LINK, PID TABLES AND BIMAP DEFINITIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               BITMAP REGISTER DEFINITIONS


      9.1 BITMAP_0:


                 +-------------------------------+
           HIGH: | v | v | v | v | 3 | 2 | 1 | 0 |
                 +-------------------------------+

           0:    *** not used ***, always 0.
           1:    *** not used ***, always 0.
           2:    *** not used ***, always 0.
           3:    1 if A/C clutch is disengaged.
           4-7:  Vertical Nibble Parity (VNP)


                 +-------------------------------+
           LOW:  | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |
                 +-------------------------------+

           0:    *** not used ***, always 0.
           1:    *** not used ***, always 0.
           2:    *** not used ***, always 0.
           3:    *** not used ***, always 0.
           4:    *** not used ***, always 0.
           5:    1 if brake is on.
           6:    1 if not in neutral or park.
           7:    1 if fuel pump is on.


      9.2 BITMAP_1:


                 +-------------------------------+
           HIGH: | v | v | v | v | 3 | 2 | 1 | 0 |
                 +-------------------------------+

           0:    1 if altenate shift mode/overdirve cancel is selected.
           1:    *** not used ***, always 0.
           2:    *** not used ***, always 0.
           3:    *** not used ***, always 0.
           4-7:  Vertical Nibble Parity (VNP)


                 +-------------------------------+
           LOW:  | 7 | 6 | 5 | 4 | 3 | 2 | 1 | 0 |
                 +-------------------------------+

           0:    1 if in closed loop fuel control.
           1:    *** not used ***, always 0.
           2:    1 if driver has selected A/C.
           3:    1 if hard acceleration signal is on.
           4:    1 if Ignition Diagnostic Monitor EEC module input is high.
           5:    1 if output AM1 is on.
           6:    1 if output AM2 is on.
           7:    *** not used ***, always 0.



                                        16-45

          DATA COMMUNICATIONS LINK, PID TABLES AND BIMAP DEFINITIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PLEASE NOTE:  If the hardware related to a certain BITMAP bit 
                    is not present on a specific application then   
                    that bit will always be zero for that application.

























































                                        16-46

                 DATA COMMUNCATIONS LINK, UART MESSAGE CHECK - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   UART MESSAGE CHECK


      OVERVIEW

      The message check logic first checks to see if the  UART  receive  buffer  is
      full  (bit  0 of CART_STATUS = 1).  If the buffer is not full, then reception
      of data did not cause the interrupt.  BYTE_NUM and EEC_CHKSUM are set  to  0,
      CART_STATUS is set to 1818H and the message check logic is exited.  If buffer
      is full, then the new byte is read from UART  receive  buffer  and  following
      logic is executed.



      DEFINITIONS

      INPUTS

      Registers:

       -  BYTE_NUM = Indicates which byte of UART message.

       -  CMD_CODE = Command from SBDS.

       -  EEC_CHKSUM = XOR checksum of bytes 6 thru 10 of UART message.

       -  SBDS_CHKSUM = CHECKSUM computed by SBDS.

      Bit Flags:

       -  MODULE_ID = 1 -> EEC selected.



      OUTPUTS Registers:

       -  BYTE_NUM = See above.

       -  CART_STATUS = CART status register.

       -  EEC_CHKSUM = See above.

       -  NO_OF_STARTS = Number of starts using alternative calibration.

       -  NO_START_CHK = Number of starts, check byte.

       -  XDCL_BAUD = Current DCL baud rate.

      Bit Flags:

       -  CART_MODE = 1 -> CART mode, 0 -> UART mode.

       -  XDCL_ERR0 = Error/flag register 0.







                                        16-47

                 DATA COMMUNCATIONS LINK, UART MESSAGE CHECK - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: DCL_UART_COM1


      RECEIVE OVERRUN ERROR ---------------|     
       (bit 5 of CART_STATUS = 1)          | 
                                           |OR --|  (bad sync sequence or ...
      BYTE_NUM < 5 ------------------|     |     |   byte lost in transmission)
       (5 zeros not received)        |AND -|     | CART_STATUS = 1818H
                                     |           | BYTE_NUM = 0
      new byte <> 0 -----------------|           | EEC_CHKSUM = 0
       (non-zero received)                       | Exit message check logic
                                                 |
                                                 | --- ELSE ---
      BYTE_NUM < 5 ------------------------|     |  
       (5 zeros not received)              |AND -|  (normal sync sequence)
                                           |     | CART_STATUS = 1818H
      new byte = 0 ------------------------|     | Increment BYTE_NUM
       (zero received)                           | EEC_CHKSUM = 0
                                                 | Exit message check logic
                                                 |
                                                 | --- ELSE ---
      BYTE_NUM = 5 ------------------------|     |  
       (5 zeros received)                  |AND -|  (sync sequence complete)
                                           |     | CART_STATUS = 1818H
      new byte = 0 ------------------------|     | EEC_CHKSUM = 0
       (zero received)                           | Exit message check logic
                                                 |
                                                 | --- ELSE ---
                                                 |
                                                 |  (first non-zero received)
                                                 | Increment BYTE_NUM
                                                 | Store new byte in uart_msg
                                                 | DO SBDS COMMAND LOGIC


      Byte numbers 6 through 11 of the message are stored in RAM as follows:


                            _____________
            uart_msg:    6 | MODULE_ID   |    (1 -> EEC-IV selected)
                            -------------
                         7 | CMD_CODE    |    (Command from SBDS)
                            -------------
                         8 |  BYTE_8     |    (Not presently used)
                            -------------
                         9 |  BYTE_9     |    (Not presently used)
                            -------------
                        10 |  BYTE_10    |    (Not presently used)
                            -------------
                        11 | SBDS_CHKSUM |    (Checksum sent by SBDS)
                            -------------








                                        16-48

                 DATA COMMUNCATIONS LINK, UART MESSAGE CHECK - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   SBDS COMMAND LOGIC


      BYTE_NUM < 11 -----------------------------| CART_STATUS = 1818H
                                                 |  (update the check sum)
                                                 | EEC_CHKSUM = EEC_CHKSUM
                                                 |  XOR new byte
                                                 | Exit message check logic
                                                 |
                                                 | --- ELSE ---
                                                 |
      EEC_CHKSUM <> SBDS_CHKSUM -----------|     |  (ignore message)
       (bad data in buffer)                |OR --| CART_STATUS = 1818H
                                           |     | BYTE_NUM = 0
      MODULE_ID <> 01 ---------------------|     | EEC_CHKSUM = 0
       (EEC not selected)                        | Exit message check logic
                                                 |
                                                 | --- ELSE ---
                                                 |
      CMD_CODE = 82H ----------------------------|  (echo MODULE_ID to SBDS)
       (valid command)                           | CART_STATUS = 1818H
                                                 | uart transmit buffer = MODULE_ID
                                                 | BYTE_NUM = 0
                                                 | EEC_CHKSUM = 0
                                                 | Exit message check logic
                                                 |
                                                 | --- ELSE ---
                                                 |
      CMD_CODE = 80H ----------------------------|  (go permanently off-line)
       (valid command)                           | CART_STATUS = 4040H
                                                 | BYTE_NUM = 0
                                                 | EEC_CHKSUM = 0
                                                 | Exit message check logic
                                                 |
                                                 | --- ELSE ---
                                                 |
      CMD_CODE = 04H ----------------------------|  (go to CART Mode)
       (valid command)                           | XDCL_BAUD = 03H
                                                 | CART_MODE = 1
                                                 | CART_STATUS = 9292H
                                                 | XFRAME = 0FH
                                                 | XDCL_ERRO = BC1FH
                                                 | BYTE_NUM = 0
                                                 | EEC_CHKSUM = 0
                                                 | Exit message check logic
                                                 |
                                                 | --- ELSE ---
                                                 |

                                (continued on next page)










                                        16-49

                 DATA COMMUNCATIONS LINK, UART MESSAGE CHECK - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

      CMD_CODE = 05H ----------------------------|  (load NO_OF_STARTS)
                                                 | NO_OF_STARTS = BYTE_8
                                                 | NO_START_CHK = BYTE_9
                                                 | CART_STATUS = 1818H
                                                 | BYTE_NUM = 0
                                                 | EEC_CHKSUM = 0
                                                 | Exit message check logic
                                                 |
                                                 | --- ELSE ---
                                                 |
                                                 |  (bad command)
                                                 | CART_STATUS = 1818H
                                                 | BYTE_NUM = 0
                                                 | EEC_CHKSUM = 0
                                                 | Exit message check logic











































                                        16-50












                                      CHAPTER 17

                                   EXPORT FEATURES

















































                                         17-1

                     EXPORT FEATURES, SPEED WARNING CHIME - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   SPEED WARNING CHIME


      OVERVIEW

      Saudi Arabia has a legal requirement for a warning chime to  sound  when  the
      vehicle speed exceeds 75 mph.  This piece of strategy operates a chime when a
      calibrateable vehicle speed has been exceeded.

      NOTE:  The EEC IV output for the chime is  the  same  as  that  used  by  the
      thermactor air strategy (ie AM1).  Therefore the thermactor air strategy must
      be disabled by setting THRMHP = 0

      In the event of a vehicle speed sensor fault, there will be no speed  warning
      chime.

      There is no self test output circuit check on SWC, however the chime  can  be
      switched on through the throttle operated Output Test Mode for test purposes.



      DEFINITIONS

      INPUTS

      Registers:

       -  VSBAR = Filtered Vehicle Speed.

      Calibration Constants:

       -  SWC_HP = Speed Warning Chime hardware present switch; 1 -> Speed  warning
          chime hardware present, 0 -> No speed warning chime hardware present.

       -  SWCVS_SH = Minimum vehicle speed to turn on Speed Warning Chime, mph

       -  SWCVS_CL = Maximum vehicle speed to turn off Speed Warning Chime, mph

       -  THRMHP = Thermactor Hardware present switch;  1  ->  Thermactor  hardware
          present, 0 -> No thermactor hardware present.



      OUTPUTS

      Bit Flags:

       -  SWC = Flag which determines the state of the speed warning  chime;  1  ->
          Chime is on, 0 -> Chime is off.

       -  SWCVS_FLG  =  Flag  indicating  warning  chime  vehicle  speed  has  been
          exceeded; 1 -> vehicle speed exceeded, 0 -> vehicle speed not exceeded.








                                         17-2

                     EXPORT FEATURES, SPEED WARNING CHIME - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: EXPORT_VS_CHIME_COM1


      VSBAR > SWCVS_SH ----------------|S Q -| SWCVS_FLG
                                       |
      VSBAR < SWCVS_CL ----------------|C



      SWC_HP = 1 ----------------------|
                                       |AND -| SWC = SWCVS_FLG
      THRMHP = 0 ----------------------|     |
                                             | --- ELSE ---
                                             |
                                             | No operation on SWC












































                                         17-3

                     EXPORT FEATURES, SPEED WARNING CHIME - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL






























































                                         17-4












                                      CHAPTER 18

                               ALTERNATIVE CALIBRATION

















































                                         18-1

            ALTERNATIVE CALIBRATION, CALIBRATION INITIALIZE LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              CALIBRATION INITIALIZE LOGIC


      OVERVIEW

      This module sets the flag which will invoke the alternate calibration.  To do
      this, it looks at the value of the parameter NO_OF_STARTS which may have been
      downloaded in DCL, and it also checks the  check  byte  which  is  the  one's
      complement  of  NO_OF_STARTS.   The  value  of  NO_OF_STARTS  is subsequently
      decremented.  These  checks  are  performed  during  the  RAM  initialization
      process only.



      DEFINITIONS

      INPUTS

      Registers:

       -  NO_OF_STARTS = Number of starts using alternative calibration.

       -  NO_START_CHK = Number of starts, check byte.

      Bit Flags:

       -  ALT_CAL_FLG = Flag to indicate use of alternate calibration.



      OUTPUTS

      Registers:

       -  NO_OF_STARTS = See above.

       -  NO_START_CHK = See above.

      Bit Flags:

       -  ALT_CAL_FLG = See above.



















                                         18-2

            ALTERNATIVE CALIBRATION, CALIBRATION INITIALIZE LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: ALTR_CAL_INIT_COM1


      Performed during RAM Initialization only.


      NO_OF_STARTS > 0 ------------------|
                                         |AND -| ALT_CAL_FLG = 1
      NO_START_CHK = 255 - NO_OF_STARTS -|     |
                                               | --- ELSE ---
                                               |
                                               | ALT_CAL_FLG = 0


      ALT_CAL_FLG = 1 -------------------------| Decrement NO_OF_STARTS
                                               | Increment NO_START_CHK
                                               |
                                               | --- ELSE ---
                                               |
                                               | Do nothing







































                                         18-3

               ALTERNATIVE CALIBRATION, CALIBRATION CLEAR LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 CALIBRATION CLEAR LOGIC


      OVERVIEW

      This module erases any remaining  alternate  calibration  starts  should  the
      vehicle  travel  further  than ALT_CAL_DIST in any one journey.  The value of
      ALT_CAL_FLG is also set each background loop to  reduce  the  effect  of  any
      possible corruption of the register that may occur.



      DEFINITIONS

      INPUTS

      Registers:

       -  BG_TMR = Background loop timer.

       -  DISTANCE = Distance traveled since start, miles.

       -  NO_OF_STARTS = Number of starts using alternative calibration.

       -  NO_START_CHK = Number of starts, check byte.

       -  VSBAR = Filtered vehicle speed.

      Calibration Constants:

       -  ALT_CAL_DIST = Distance traveled before alternate calibration is revoked,
          miles.



      OUTPUTS

      Registers:

       -  DISTANCE = See above.

       -  NO_OF_STARTS = See above.

       -  NO_START_CHK = See above.

      Bit Flags:

       -  ALT_CAL_FLG = Flag to indicate use of alternate calibration.












                                         18-4

               ALTERNATIVE CALIBRATION, CALIBRATION CLEAR LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: ALTR_CAL_CLR_COM1


                      DISTANCE = DISTANCE + (VSBAR * BG_TMR) / 3600


      DISTANCE > ALT_CAL_DIST -----------------| NO_OF_STARTS = 0
                                               | NO_START_CHK = 0
                                               | ALT_CAL_FLG = 0
                                               |
                                               | --- ELSE ---
      NO_OF_STARTS > 0 ------------------|     |
                                         |AND -| ALT_CAL_FLG = 1
      NO_START_CHK = 255 - NO_OF_STARTS -|     |                  
                                               | --- ELSE ---
                                               |
                                               | ALT_CAL_FLG = 0










































                                         18-5

               ALTERNATIVE CALIBRATION, CALIBRATION CLEAR LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL






























































                                         18-6












                                      CHAPTER 19

                                AIR CHARGE CALCULATION

















































                                         19-1

                  AIR CHARGE CALCULATION, AIRMETER OVERVIEW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    AIRMETER OVERVIEW


      OVERVIEW

      Shown  below  is  the  relationship  between  modules  used  in   calculating
      aircharge.

      The Air Charge Background Calculation module,  executed  in  the  background,
      calculates  variables which do not change rapidly such as those based on RPM,
      ECT, ACT, etc.  The Air Meter Background FMEM module is also executed in  the
      background  to set relevant flags in case of faulty air meter.  (In the OBDII
      strategy, self tests are also carried out in this module.)

      In the foreground, the SAMPLE AIR METER and the  Air  Meter  Foreground  FMEM
      modules  are  executed.  Depending on the setting of the switch AIR_DOWN_CAL,
      the  SAMPLE  AIRMETER  module  will  trigger  the  rest  of   the   aircharge
      calculations  on  either  the  up  or  down  edge  of PIP.  This includes the
      manifold filling, anticipation, and final aircharge modules.  The final value
      used  by  the  rest of the strategy is CYL_AIR_CHG.  AIR_CHG_ST is calculated
      separately for use by self test.  The MFMFLG flag is also exported for use in
      other modules.






































                                         19-2

                  AIR CHARGE CALCULATION, AIRMETER OVERVIEW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: AIR_OVERVIEW_COM1


                      Foreground                           Background
            |----------------------------|    |---------------------------------|
                     +---------------+   IMFMCTR      +---------------+
                     | AIRMETER FMEM |---IMFMFLG----->| AIRMETER FMEM |-->MFMFLG
                     |  Foreground   |-----+----------|  Background   |
                     +---------------+     |          +---------------+
                                        IMFMFLG                 |
                           |---------------|                V_MAF_ER_FLG
                           |                                    |
                           V                                    V
                    +----------------+                       +---------------+
                    | SAMPLE         |                       | AIRCHARGE     |
      AIR_CHG_ST<---| AIRMETER       |<--- AIR_CHG_LEAK -----| BACKGROUND    |
                    | CALCULATION    |     CYLARC_BG         | CALCULATIONS  |
                    +----------------+                       +---------------+
                        |        |                               |         |
             +- AIR_CHG_PRV      |                               |         |
             |   +--------- AIR_CHG_CUR                          |         |
             |   |               V                               |         |
             |   |    +----------------+     AIR_CHG_WOT         |         |
             |   |    | MANIFOLD       |     AIR_B3              |         |
             |   |    | FILLING        |<--- AIR_NUM_MULT  ------+         |
             |   |    |                |     MAP_AIR_0                     |
             |   |    +----------------+     ARCHFLG                       |
             |   |            |              AIR_BG_FIL                    |
        +----|---|-------- AIR_CHG           AIR_BF_FLG                    |
        |    |   |         AIR_K_OLD                                       |
        |    |   |            V                                            |
        |    |   |    +----------------+                                   |
        |    |   +--->| ANTICIPATION   |                                   |
        |    +------->|                |                                   |
        |    |        +----------------+                                   |
        |    |                |                                            |
        |    |             air_ant                                         |
        |    |                V                                            |
        |    |        +----------------+                                   |
        +----|------->| FINAL          |                                   |
             |        | AIRCHARGE      |<--- AIR_WOT_ANT  -----------------+
             +------->|                |     AIR_CHG_WOT
                      +----------------+
                              |
                          CYL_AIR_CHG
                              |
                              V












                                         19-3

             AIR CHARGE CALCULATION, SAMPLE AIRMETER CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               SAMPLE AIRMETER CALCULATION


      OVERVIEW

      This routine is called on each PIP edge and produces an integrated air  meter
      value  for  the  last half PIP period.  If the edge is the signature PIP down
      edge, the integration time is expanded from the actual  half  period  to  the
      theoretical  fifty  percent half period to provide increased stability in the
      calculations.

      The current and previous integrated values are saved  and  depending  on  the
      state  of  the  flag "AIR_DOWN_CAL", the state of SYNFLG, and the type of PIP
      edge, the routine CALCULATE CYLINDER AIR CHARGE may be called.



      DEFINITIONS

      INPUTS

      Registers:

       -  AIR_PIP_CNT = Counter incremented every pip edge to determine if the  MAF
          integration is valid.

       -  AM_INT_CUR_X = Integrated air charge computed at the last PIP edge, lbm.

       -  AM_INT_PRV_X = Previously integrated air charge computed at the last  PIP
          edge, lbm.

       -  IMAF = The Number of counts read in the A-to-D conversion of the airmeter
          signal, counts.

       -  MAF_TIME = The time of the previous PIP  edge  or  in  the  case  of  the
          signature  PIP  down edge, the projected time of the 50% of the signature
          PIP period, ticks.

       -  SIGKAL = Signature PIP half period  multiplier  to  achieve  a  50%  PIP,
          unitless.

       -  IVCAL = The number of counts read in the A-to-D  conversion  of  the  air
          reference voltage supplied to the air meter, counts.

       -  DATA_TIME = Time of the current PIP edge, ticks.

      Bit Flags:

       -  PIP_HIGH = State of PIP transition; 1 -> Low to high transition.

       -  SIGPIP = Indicates when the Signature PIP half period has been identified
          and the current PIP down edge is the signature edge.

       -  SYNFLG = A flag that indicates when the  number  one  cylinder  has  been
          identified and that SYNCTR is aligned with cylinder one.

       -  BGACFLG = Indicates background aircharge,  no  filter;  1  ->  background
          based.


                                         19-4

             AIR CHARGE CALCULATION, SAMPLE AIRMETER CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  AIR_DOWN_CAL = A switch that indicates when to perform the  cylinder  air
          charge calculation; 1 -> perform calculation on PIP down edge.

       -  FN036(vmaf) = Convert Air meter voltage to lbm/tick



      OUTPUTS

      Registers:

       -  AIR_CHG_ST = Aircharge for use in air meter self test, lbm.

       -  AIR_CHG_CUR = Aircharge from airmter calculation, lbm.

       -  AM_INT_CUR_X = Integrated air mass computed at the current PIP edge, lbm.

       -  AIR_CHG_COMP = Un-metered air charge past the throttle, lbm

       -  AIR_CHG_PRV = previous value of AIR_CHG_CUR

       -  AIR_PIP_CNT = See above.

       -  DATA_TIME = Time of the current PIP edge, ticks.

       -  IMAF = The number of counts read in the  A-to-D  conversion  of  the  air
          meter signal, counts.

       -  INTM = The time interval between the current air mass integration and the
          previous air mass integration.

       -  MAF = The air flow that is computed at each PIP edge, lbm/tick.

       -  MAF_TIME = See above.

       -  VMAF = Corrected air meter voltage, volts.






















                                         19-5

             AIR CHARGE CALCULATION, SAMPLE AIRMETER CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: AIR_SAMPLE_METER_COM3


      At each PIP edge perform an A-to-D conversion on the air meter and then:


      always --------------------------------------| VMAF = 
                                                   |   IMAF * 2.5 (volts) / IVCAL
                                                   | MAF =  FN036(VMAF)



      PIP_HIGH = 0 --------------------------|     
       (down edge of PIP)                    |             
                                             |       
      SIGPIP = 1 ----------------------------|AND -| INTM = (DATA_TIME - 
       (signature PIP down edge identified)  |     |   MAF_TIME(OLD)) * SIGKAL
                                             |     | MAF_TIME = (MAF_TIME(OLD) +  
      SYNFLG = 1 ----------------------------|     |   INTM) 
       (in sync)                                   |
                                                   | --- ELSE ---
                                                   |
                                                   | INTM = 
                                                   |   DATA_TIME - MAF_TIME(OLD)
                                                   | MAF_TIME = DATA_TIME


      always --------------------------------------| AM_INT_PRV_X = 
                                                   |   AM_INT_CUR_X(OLD)
                                                   |  (previous integrated air 
                                                   |   mass value)
                                                   | AM_INT_CUR_X = MAF * INTM
                                                   |  (current integrated air
                                                   |   mass value)

























                                         19-6

             AIR CHARGE CALCULATION, SAMPLE AIRMETER CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      always --------------------------------------| AIR_PIP_CNT = AIR_PIP_CNT + 1
                                                   | (clip at 255)


      AIR_PIP_CNT >= 3 ----------------------|
        (make sure integration is good)      |
                                             |
                                             |
      AIR_DOWN_CAL = 0 ----|                 |
       (calc on up-edge)   |                 |
                           |OR --|           |AND -| DO AIRCHARGE CALCULATION
      SYNFLG = 0 ----------|     |           |     |  
       (not in sync)             |AND -|     |     | 
                                 |     |     |     | 
      PIP_HIGH = 1 --------------|     |     |     | 
                                       |OR --|     |  
      AIR_DOWN_CAL = 1 ----------|     |           |     
       (calc on down-edge)       |     |           |  
                                 |AND -|           |  
      SYNFLG = 1 ----------------|                 |  
                                 |                 | 
      PIP_HIGH = 0 --------------|                 | 
                                                   | --- ELSE ---
                                                   |
                                                   | EXIT THIS ROUTINE



































                                         19-7

             AIR CHARGE CALCULATION, SAMPLE AIRMETER CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                   (This routine called every other pip edge based on

                             DO AIRCHARGE CALCULATION logic)


      always --------------------------------------| AIR_CHG_ST = AM_INT_PRV_X + 
                                                   |   AM_INT_CUR_X + AIR_CHG_COMP



      BGACFLG = 1 ---------------------------------| AIR_CHG_PRV = CYLARC_BG
       (use background aircharge)                  | AIR_CHG_CUR = CYLARC_BG
                                                   |
                                                   | --- ELSE ---
                                                   |
                                                   | AIR_CHG_PRV = AIR_CHG_CUR(old)
                                                   | AIR_CHG_CUR = AIR_CHG_ST











































                                         19-8

                AIR CHARGE CALCULATION, MANIFOLD FILLING MODEL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 MANIFOLD FILLING MODEL


      OVERVIEW

      Calculate the base coefficient value based on manifold volume and the  engine
      volumetric efficiency.  The corrections for ACT, ECT, BP, and RPM are done in
      the background and are contained in AIR_NUM_MULT  and  MAP_AIR_0.   The  only
      correction  of  Vol  Eff  done in the foreground is the correction due to the
      change in aircharge.  A foreground triggered multiplier is used on decels  to
      help air/fuel control..

      A larger  coefficient  at  idle  than  the  calculated  value  provides  fuel
      enrichment  while rpm is decreasing which enhances idle stability.  Filtering
      when exiting crank is desirable until the aircharge stabilizes.  The  ARCHFLG
      is  set  in  the background when the ISCFLG indicates Idle or no filtering is
      desired because of air meter  failure  or  disable  switch.   The  value  for
      fk_last  corrects  for  changes  in Vol Eff for one event to the next.  If no
      filter or the idle filter is used (ARCHFLG) this correction is disabled.



      DEFINITIONS

      INPUTS

      Registers:

       -  AIR_BG_FIL = Background derived filter constant, unitless.

       -  AIR_B3 = MAP vs aircharge, " Hg/lbm.

       -  AIR_CHG = Aircharge value after the filling model, lbm.

       -  AIR_CHG_CUR = Aircharge from air meter calculation, lbm.

       -  AIR_CHG_WOT = Maximum AIR_CHG, lbm.

       -  AIR_K_OLD = Last pass value of the filling coefficient, air_k_base.

       -  AIR_NUM_MULT = ECT, ACT, and volume background  correction  for  manifold
          filling.

       -  MAP_AIR_0 = Map at zero aircharge includes BP correction, "Hg.

      Bit Flags:

       -  ARCHFLG  =  Indicates  background  derived  filling  coefficient;  1   ->
          Background.

       -  AIR_BF_FLG  =  Indicates  backflow  region;  1  ->  clip   aircharge   to
          AIR_CHG_WOT.








                                         19-9

                AIR CHARGE CALCULATION, MANIFOLD FILLING MODEL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  FILFRC = Fraction of [current air charge / previous air charge] needed to
          trigger the decel multiplier (AIR_DEC_MUL).

       -  AIR_DEC_MUL = Decel coefficient multiplier.



      OUTPUTS

      Registers:

       -  AIR_CHG = Aircharge value after the filling model, lbm.

       -  AIR_K_OLD = Filling coefficient for use next pass.

       -  AIR_FK = Manifold filling coefficient constant.










































                                        19-10

                AIR CHARGE CALCULATION, MANIFOLD FILLING MODEL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: AIR_MANIFOLD_FILL_COM2


      Determine coefficient:


             air_k_base = AIR_NUM_MULT/ [AIR_B3 + (MAP_AIR_0/AIR_CHG(old))]


      Determine filling mode:


      ARCHFLG = 0 -----------------------------| AIR_FK = AIR_BG_FIL
                                               | fk_last = AIR_BG_FIL
                                               |  (idle or no filter)
                                               |
                                               | --- ELSE ---
                                               |
      (AIR_CHG_CUR / AIR_CHG) <= FILFRC -------| AIR_FK = air_k_base * AIR_DEC_MUL
                                               | fk_last = AIR_K_OLD * AIR_DEC_MUL
                                               |
                                               | (tip-out filter)
                                               |
                                               | --- ELSE ---
                                               |
                                               | AIR_FK = air_k_base
                                               | fk_last = AIR_K_OLD
                                               |  (normal filter)


      Calculation of AIR_CHG:  The value of air_k_base is stored for use next  pass
      so that the Vol Eff changes from one event to next are compensated for.


      AIR_FK <> 0 -----------------------------| air_chg = ((AIR_FK/fk_last) 
                                               |           * (1 - AIR_FK) 
                                               |           * AIR_CHG(old)) 
                                               |           + (AIR_FK * AIR_CHG_CUR)
                                               |
                                               | --- ELSE ---
                                               |
                                               | air_chg = AIR_CHG(old)


                                 AIR_K_OLD = air_k_base


      Clipping corrects for overestimates due to backflow past the meter.


      air_chg > AIR_CHG_WOT -------------| 
                                         |AND -| AIR_CHG = AIR_CHG_WOT
      AIR_BF_FLG = 1 --------------------|     | 
                                               | --- ELSE ---
                                               |
                                               | AIR_CHG = air_chg



                                        19-11

               AIR CHARGE CALCULATION, AIR CHARGE ANTICIPATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 AIR CHARGE ANTICIPATION


      OVERVIEW

      To make up for fuel scheduling delays,  aircharge  anticipation  is  used  to
      predict what the aircharge will be two events in the future.

      Assumptions and description of anticipation equation:


       -  Assumption #1

          Straight line increase in AIR_CHG_CUR for next event, i+1, then stays  at
          that level for the i+2 event.


              throttle |         |
              aircharge|         |     *     *
                       |         *
                       |   *     |
                       +---+-----+-----+-----+-------
                   time   i-1    i    i+1   i+2


              AIR_CHG_CUR(i+1) = AIR_CHG_CUR(i) + AIR_CHG_CUR(i) - AIR_CHG_CUR(i-1)

              AIR_CHG_CUR(i+2) = AIR_CHG_CUR(i+1)



       -  Assumption #2

          Filling coefficient remains the same for the next two events.


                                   AIR_FK(i+1) = AIR_FK(i)

                                   AIR_FK(i+2) = AIR_FK(i)



      Using the manifold filling model, the equations for the current intake  event
      and next two events can be written as follows:


          AIR_CHG(i)   = AIR_FK * AIR_CHG_CUR(i) 
                        + [(AIR_FK(i)/AIR_FK(i-1) * (1-AIR_FK(i)) AIR_CHG(i-1)]

          AIR_CHG(i+1) = AIR_FK(i+1) * AIR_CHG_CUR(i+1)
                        + [(AIR_FK(i+1)/AIR_FK(i) * (1-AIR_FK(i+1)) AIR_CHG(i)]

          AIR_CHG(i+2) = AIR_FK(i+2) * AIR_CHG_CUR(i+2)
                        + [(AIR_FK(i+2)/AIR_FK(i+1) * (1-AIR_FK(i+2)) AIR_CHG(i+1)]






                                        19-12

               AIR CHARGE CALCULATION, AIR CHARGE ANTICIPATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      The preceding equations are then simplified to reach the final  form  of  the
      equation shown in the strategy process.  The solution is shown below.


      EEC notation:
         air_thr_bod = AIR_CHG_CUR(i+1) = AIR_CHG_CUR(i+2) = AIR_CHG_CUR(i)
                                                             + AIR_CHG_CUR(i)
                                                             - AIR_CHG_CUR(i-1)

         AIR_FK = AIR_FK(i)= AIR_FK(i+1) = AIR_FK(i+2) 
         nxt_arch_2x = AIR_CHG(i+2)


      Solve the equations to obtain the aircharge two events in the future.


         The filling model output is AIR_CHG(i)
                                        |
                                        +--------------------+
                                                             |substitute
         AIR_CHG(i+1) = AIR_FK * air_thr_bod                 v 
             |          + [(AIR_FK/AIR_FK * (1-AIR_FK) * AIR_CHG(i)]
             |
             +-----------------------------------------------+
                                                             |substitute
         nxt_arch_2x = AIR_FK * air_thr_bod                  V
                       + [(AIR_FK/AIR_FK * (1-AIR_FK) * AIR_CHG(i+1)]


      Simplify to final form:


         nxt_arch_2x = [(2 - AIR_FK) * AIR_FK * air_thr_bod]
                       + [(1 - AIR_FK) * (1- AIR_FK) * AIR_CHG(new)]
      When AIR_K_OLD is used in the anticipation model it contains the latest value
      for air_k_base.  AIR_FK may contain the idle or no filter.


         nxt_arch_2x = [(2 - AIR_K_OLD) * AIR_K_OLD * air_thr_bod]
                       + [(1 - AIR_K_OLD) * (1- AIR_K_OLD) * AIR_CHG(new)]




















                                        19-13

               AIR CHARGE CALCULATION, AIR CHARGE ANTICIPATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  AIR_CHG_PRV = previous value of AIR_CHG_CUR

       -  AIR_CHG_CUR = Aircharge from air meter calculation, lbm.

       -  AIR_CHG = Aircharge value after the filling model, lbm.

       -  AIR_FK = Manifold filling filter constant.

       -  AIR_K_OLD = Manifold filling base coefficient derived in manifold filling
          module.

      Calibration Constants:

       -  ANTICIPATION = Calibration switch to use predicted ARCHG; 0 -> do not use
          predicted value, 1 -> use predicted value.



      OUTPUTS

      Registers:

       -  air_ant = Anticipated aircharge, lbm.




      PROCESS
                         STRATEGY MODULE: AIR_ANTICIPATION_COM2


                  air_thr_bod = AIR_CHG_CUR + AIR_CHG_CUR - AIR_CHG_PRV


      nxt_arch_2x = [(2 - AIR_K_OLD) * AIR_K_OLD * air_thr_bod] +
                    [(1 - AIR_K_OLD) * (1- AIR_K_OLD) * AIR_CHG(new)]


      ANTICIPATION = 0 ------------------------| air_ant = AIR_CHG
                                               |
                                               | --- ELSE ---
                                               |
                                               | air_ant = nxt_arch_2x











                                        19-14

               AIR CHARGE CALCULATION, FINAL CYLINDER AIRCHARGE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                FINAL CYLINDER AIRCHARGE


      OVERVIEW

      The of aircharge used by the rest of the strategy is CYL_AIR_CHG.  Because of
      anticipation,  the  value  may  be  greater than the maximum engine flow.  If
      air_ant is larger than the maximum engine flow because of  anticipation,  the
      flow is clipped at AIR_CHG.  Another condition which will set the CYL_AIR_CHG
      to cyl_max is if AIR_CHG_CUR is decreasing but still above AIR_CHG_WOT.  This
      occurs  on the downside of the manifold filling spike where is is undesirable
      to anticipate a decreasing aircharge.

      A different clip is used for anticipation than AIR_CHG  because  AIR_CHG,  if
      clipped  to  low, will cause steady state errors.  Anticipation is not needed
      as the AIR_CHG approaches its maximum so it is clipped at  a  value  that  is
      closer to the true engine peak capacity, AIR_WOT_ANT.



      DEFINITIONS

      INPUTS

      Registers:

       -  AIR_CHG_WOT = Maximum AIR_CHG, lbm.

       -  air_ant = Anticipated aircharge, lbm.

       -  AIR_WOT_ANT = Maximum anticipated aircharge, lbm.

       -  AIR_CHG = Aircharge value after the filling model, lbm.

       -  AIR_CHG_PRV = previous value of AIR_CHG_CUR



      OUTPUTS

      Registers:

       -  CYL_AIR_CHG = Cylinder aircharge used by the rest of the strategy

















                                        19-15

               AIR CHARGE CALCULATION, FINAL CYLINDER AIRCHARGE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                        STRATEGY MODULE: AIR_FINAL_AIRCHARGE_COM1


      AIR_CHG > AIR_WOT_ANT -------------------| cyl_max = AIR_CHG 
                                               | 
                                               | --- ELSE ---
                                               |    
                                               | cyl_max = AIR_WOT_ANT


      AIR_CHG_PRV > AIR_CHG_WOT ---------|
       (filling spike)                   |AND -| CYL_AIR_CHG = cyl_max
                                         |     |
      air_ant < CYL_AIR_CHG[old] --------|     | 
                                               | --- ELSE ---
                                               |    
      air_ant > cyl_max -----------------------| CYL_AIR_CHG = cyl_max
                                               |
                                               | --- ELSE ---
                                               |    
                                               | CYL_AIR_CHG = air_ant


      Call FOREGROUND FUEL CALCULATION (located in Chapter 6)



































                                        19-16

          AIR CHARGE CALCULATION, AIR CHARGE BACKGROUND CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           AIR CHARGE BACKGROUND CALCULATIONS


      OVERVIEW

      The background portion of the aircharge calculations handles calculations for
      manifold  filling,  background  filtering  values,  anticipation  and failure
      modes.  Each is described where it is calculated.



      DEFINITIONS

      INPUTS

      Registers:

       -  ACT = Air Charge Temperature, deg F.

       -  AIR_CHG = Air charge value after the filling model, lbm.

       -  ATMR1 = Time since engine start.

       -  BP = Barometric Pressure, " Hg.

       -  CYL_AIR_CHG = Cylinder aircharge used by the rest of the strategy

       -  ECT = Engine Coolant Temperature, deg F.

       -  EGRACT = Actual EGR rate.

       -  N = Engine Speed, rpm.

       -  TP_REL = Relative throttle position, counts.

       -  TOTLDST = Load calculated from throttle body model.

       -  VBAT = Battery Voltage, Volts.

      Bit Flags:

       -  ARCHGQ1_FLG = State of the VBAT flip flop; 1 -> low voltage.

       -  AIR_CRK_INT = Flag that indicates when to initialize  the  air  registers
          with a load based aircharge calculation; 0 -> initialize air registers, 1
          -> registers have already been initialized.

       -  CRKFLG = Indicates Crank mode; 1 -> Crank.

       -  IMFMFLG = Mass Air Flow sensor failure mode flag; 1 -> failed sensor.

       -  ISCFLG = ISC mode register; 1 -> RPM Control Mode.

       -  MAF_INTP_FLG = Flag indicating not to use MAF signal; 1 -> don't use  MAF
          signal.

       -  TFMFLG = Throttle Position failure mode flag; 1 -> failed TP.



                                        19-17

          AIR CHARGE CALCULATION, AIR CHARGE BACKGROUND CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  AIR_DOWN_CAL = A switch that indicates when to perform the  cylinder  air
          charge calculation; 1 -> perform calculation on PIP down edge.

       -  AIR_MAN_VOL = Manifold volume for use manifold filling model, liters.

       -  AIR_STRT = Time since start to use filling model rather than idle, sec.

       -  ARCANTCOR = Correction  factor  for  anticipation  (must  be  lower  than
          arcwotcor).

       -  ARCHIDLE_SW = Switch to enable special idle filter; 1 -> use idle filter.

       -  ARCHSW = Manifold filling model select switch; 1 -> use model.

       -  ARCWOTCOR = Correction factor for errors in throttle based LOAD (must  be
          greater than arcantcor).

       -  ENGCYL = Number on intake strokes per engine revolution.

       -  FKARCCRANK = Special cranking filter coefficient.

       -  FKARCIDLE = Special idle filter coefficient.

       -  FN022V(ACT or ECT) = Normalizing function of  ACT  and  ECT  for  use  in
          FN1052.

       -  FN040A(N) = Aircharge vs N for TP and Airmeter failure, lb/intake stroke.

       -  FN052B(N) = Slope of MAP vs aircharge, " Hg/(lb/stroke).

       -  FN052BP(BP) = Correction to MAP offset vs BP, Multiplier.

       -  FN052C(ECT) = Aircharge register initializer.

       -  FN052M(N) = Engine MAP at 0 aircharge, "Hg.

       -  FN059(ACT)     =     Volumetric     efficiency     correction     factor,
          SQRT(560/(act+460)).

       -  FN059T(ACT) = Density correction factor to cyl_air_chg.

       -  FN1036A(N,TP_REL) = Engine airflow in LOAD units at sea level, no EGR.
                      X = FN070E(N)
                      Y = FN044(TP_REL)

       -  FN1052(ACT,ECT) =  Volumetric  efficiency  correction  for  the  manifold
          filling model.
                      X = FN022V(ACT)
                      Y = FN022V(ECT)

       -  MAPPEREGR =  Correction  factor  to  INF_MAP  for  ACT  sensor  location;
          MAPPEREGR  =  1.00  for  ACT measured in the intake manifold, MAPPEREGR =
          1.25 for ACT measured in the air cleaner.

       -  NBKFLOW_H = Highest RPM where backflow occurs, rpm.



                                        19-18

          AIR CHARGE CALCULATION, AIR CHARGE BACKGROUND CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  NBKFLOW_L = Lowest RPM where backflow occurs, rpm.

       -  SARCHG = Standard Air Charge, lbm.
                 = 4.4256 * 10e-5 * (Engine size in cubic inches) / 
                                      (number of cylinder)

       -  TPBKFLOW = TP_REL above which backflow can occur, counts.

       -  VBMAFMIN = Minimum battery voltage for reliable air meter reading, Volts.

       -  VBMAF_CL = VBAT to re-enable airmeter reading, Volts.



      OUTPUTS

      Registers:

       -  AIR_BG_FIL = Background derived filling coefficient, unitless.

       -  AIR_B3 = MAP vs aircharge, " Hg/lbm.

       -  AIR_CHG_WOT = Maximum AIR_CHG, lbm.

       -  AIR_NUM_MULT = ECT, ACT, and volume background  correction  for  manifold
          filling.

       -  AIR_WOT_ANT = Maximum anticipated aircharge, lbm.

       -  CYLARC_BG = Background determined aircharge, lbm.

       -  INF_MAP = Inferred map, "Hg.

       -  INF_MVAC = Inferred manifold vacuum, "Hg.

       -  MAP_AIR_0 = Map at zero aircharge includes BP correction, "Hg.

      Bit Flags:

       -  AIR_BF_FLG  =  Indicates  backflow  region;  1  ->  clip   aircharge   to
          AIR_CHG_WOT.

       -  AIR_CRK_INT = See above.

       -  ARCHFLG  =  Indicates  background  derived  filling  coefficient;  1   ->
          Background.

       -  ARCHGQ1_FLG = State of the VBAT flip flop; 1 -> low voltage.

       -  BGACFLG = Indicates background aircharge, no  filling;  1  ->  background
          based.









                                        19-19

          AIR CHARGE CALCULATION, AIR CHARGE BACKGROUND CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: AIR_AIRMETER_BG_COM1


      These are the values required in  the  foreground  portion  of  the  manifold
      filling,  anticipation,  airmeter  aircharge  and  final  cylinder  aircharge
      strategies.


      The following must be performed in order to avoid an overshoot in
      CYL_AIR_CHG:
      1. perform A/D on TP
      2. update TP_REL = TP - RATCH
      3. update APT by calling THROT_COM module


      always -------| adj_fact = FN1052(ACT,ECT) * (BP/29.875) * FN059T(ACT)
                    |  (adj_fact range is: 0.0 to 2.0)
                    |
                    | air_wot = FN1036A(N,top,row) * SARCHG * adj_fact
                    |  ([FN1036A() * adj_fact] range is: 0.0 to 2.0)
                    |  (air_wot range is: 0.0 to 0.00781)
                    |
                    | AIR_WOT_ANT = air_wot * ARCANTCOR
                    | AIR_CHG_WOT = air_wot * ARCWOTCOR 
                    | AIR_NUM_MULT = (11781.34/AIR_MAN_VOL) * FN1052(ACT,ECT)  
                    | AIR_B3 = FN052B(N)
                    | MAP_AIR_0 = FN052M(N) * FN052BP(BP)
                    | INF_MAP = MAP_AIR_0 + AIR_B3 * AIR_CHG
                    |           * (1 + MAPPEREGR * EGRACT/100) / FN059(ACT)
                    | INF_MVAC = BP - INF_MAP


      During low speed operation on some four cylinder  applications  the  airmeter
      will over estimate the engine airflow due to backflow past the meter.  During
      these conditions the aircharge is clipped to prevent to high a value.


      TP_REL >= TPBKFLOW  -----------------|
                                           |      
      N <= NBKFLOW_H ----------------------|AND -| AIR_BF_FLG = 1
                                           |     |
      N >= NBKFLOW_L ----------------------|     |
                                                 | --- ELSE ---
                                                 |
                                                 | AIR_BF_FLG = 0














                                        19-20

          AIR CHARGE CALCULATION, AIR CHARGE BACKGROUND CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      During a meter failure, TOTLDST is used to estimate  the  cylinder  aircharge
      from  TP  and  RPM.   If  both  the  TP  and MAFS fail, aircharge is set to a
      function of RPM.  Filling is only done if the airmeter signal is good.   When
      the  background value of the aircharge is used, the ARCHFLG disables manifold
      filling by setting the filling coefficient to 1.

      During low system voltage the meter looses accuracy.  During  this  condition
      it  is  preferable  to  use the failure mode value.  However, at low air mass
      flows (such as crank) the meter can be used at lower  system  voltages  to  a
      certain degree.

      Initialization at startup is  of  special  interest.   A  calibratible  load,
      FN052C(ect),  is  converted  into cylinder air charge and loaded into the air
      register for a firsts time only starting value.  The calibrater now  has  the
      option  of  either  filtering AIR_CHG during crank using the air meter signal
      (FKARCCRANK <> 0) or keeping AIR_CHG constant (FKARCCRANK = 0) with the  load
      based  aircharge.   After AIR_STRT seconds the idle filter is used to enhance
      stability.


      VBAT < VBMAFMIN ---------------|
       (low battery voltage)         |
                                     |AND -|S Q -| ARCHGQ1_FLG = 1
                                     |     | 
      UNDSP = 0 ---------------------|     | 
       (not in crank or underspeed mode)   | 
                                           | 
      VBAT > VBMAF_CL ---------------------|C 
                                         



      IMFMFLG = 1 -------------------------| 
       (air meter failed)                  |OR --| MAF_INTP_FLG = 1
                                           |     |
      ARCHGQ1_FLG = 1 ---------------------|     |
       (low battery voltage)                     |
                                                 | --- ELSE ---
                                                 |
                                                 | MAF_INTP_FLG = 0




















                                        19-21

          AIR CHARGE CALCULATION, AIR CHARGE BACKGROUND CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      CRKFLG = 1 --------------------------|
                                           |AND -| CYLARC_BG = FN052C(ECT) * 
      AIR_CRK_INT = 0 ---------------------|     |   SARCHG * (BP/29.875)
                                                 | AIR_CHG = CYLARC_BG
                                                 | CYL_AIR_CHG = CYLARC_BG
                                                 | BGACFLG = 1
                                                 | AIR_CRK_INT = 1
                                                 |
                                                 | (crank mode initializer)
                                                 |
                                                 | --- ELSE ---
                                                 |
      MAF_INTP_FLG = 0 --------------------------| CYLARC_BG = CYL_AIR_CHG
       (airmeter OK)                             | BGACFLG = 0
                                                 |
                                                 | --- ELSE ---
                                                 |
      TFMFLG = 0 --------------------------------| CYLARC_BG = TOTLDST * SARCHG  
       (TP sensor okay)                          |             * adj_fact
                                                 | BGACFLG = 1
                                                 |
                                                 | --- ELSE ---
                                                 |
                                                 | CYLARC_BG = FN040A(N) 
                                                 |             * adj_fact
                                                 | BGACFLG = 1



      When the BGACFLG is set, the manifold filling model is disabled.  However,
      a special crank or idle filter is available.  The ARCHSW is provided to turn 
      the model off for testing purposes.


      CRKFLG = 1 --------------------------------| AIR_BG_FIL = FKARCCRANK
                                                 | ARCHFLG = 0 
                                                 |  (use special crank filter)
                                                 | 
                                                 | --- ELSE ---
      ARCHSW = 0 --------------------------|     |
                                           |OR --| AIR_BG_FIL = 1
      BGACFLG = 1 -------------------------|     | ARCHFLG = 0 
       (no filter)                               |  (use BG filter)
                                                 |
                                                 | --- ELSE ---
      APT = -1 ----------------------------|     |
                                           |     |
      ISCFLG >= 1 -------------------------|     |
                                           |AND -| AIR_BG_FIL = FKARCIDLE
      ARCHIDLE_SW = 1 ---------------------|     | ARCHFLG = 0 
                                           |     |  (use special idle filter)
      ATMR1 > AIR_STRT --------------------|     | 
                                                 | --- ELSE --- 
                                                 |
                                                 | AIR_BG_FIL = NO CHANGE
                                                 | ARCHFLG = 1


      CALL AIR LEAKAGE CALCULATION

                                        19-22

               AIR CHARGE CALCULATION, AIR LEAKAGE CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 AIR LEAKAGE CALCULATION


      OVERVIEW

      This module calculates the  un-metered  aircharge  calculation,  AIR_CHG_COMP
      (lbm/intake).   This  calculation accounts for all leakage and airmeter drift
      components.  Leakage  components  are  accounted  for  with  the  calibration
      constant  ARCHLK  (lbm/min).   ARCHLK  includes  all  leakage  components not
      measured by the air flow meter (such  as  PCV,  CANP,  EVR  solenoid,  etc.).
      Airmeter  drift  components  are accounted for with functions FN123A(act) and
      FN123E(ect).  FN123A includes drift components associated  with  ambient  air
      temperature.   FN123E  includes  drift  components  associated  with airmeter
      circuit tempertures.



      DEFINITIONS

      INPUTS

      Registers:

       -  AIR_CHG_CUR = Aircharge from the air meter calculation, lbm.

       -  N = Engine Speed, rpm.

      Bit Flags:

       -  CRKFLG = Engine mode flag; 1 -> Crank mode, 0 <> Crank mode.

      Calibration Constants:

       -  ARCHLK = Air flow leakage, ppm.

       -  ENGCYL = Number on intake strokes per engine revolution.

       -  FN123A(ACT) = ACT correction to air meter drift, ppm.

       -  FN123E(ECT) = ECT correction to air meter drift, ppm.



      OUTPUTS

      Registers:

       -  AIR_CHG_COMP = Un-metered air charge past the throttle, lbm.












                                        19-23

               AIR CHARGE CALCULATION, AIR LEAKAGE CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: AIR_AIRLEAK_COM3


      Determine the air leakage:


      CRKFLG = 0 -----------------| chg = AIR_CHG_CUR - AIR_CHG_COMP
                                  | AIR_CHG_COMP = ARCHLK
                                  |                / (N * ENGCYL)
                                  |                + (FN123A(ACT) + FN123E(ECT)) 
                                  |                * chg
                                  |
                                  | --- ELSE ---
                                  |
                                  | Do not calculate AIR_CHG_COMP












































                                        19-24












                                      CHAPTER 20

                            TRANSMISSION INPUT CONVERSIONS

















































                                         20-1

        INPUT CONVERSIONS AND FILTERS, AODE TRANSMISSION CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             AODE TRANSMISSION CALCULATIONS


      OVERVIEW

      These System Equations are used in the AODE Transmission Calculation Process.


      DEFINITIONS

      INPUTS

      Registers:

       -  AM = Air Mass flow through the throttle body, lb/min.

       -  BP = Barometric pressure as defined in the Inferred BP Section.

       -  ENGCYL = Number of injections per engine revolution = 2, 3, 4 for  4,  6,
          and 8-cylinder engines respectively.

       -  N = Engine RPM.

       -  NEBART = Filtered engine RPM for transmission.

       -  NOBART = Filtered transmission output shaft speed.

       -  NTBART = Filtered transmission turbine speed, rpm.

       -  RATCH = Closed throttle position, counts.

       -  RT_GR_CUR = Current transmission gear ratio.

       -  TP = Throttle Position, counts.

       -  TPBART = Filtered throttle position for transmission.


      Calibration Constants:

       -  SARCHG = Standard Aircharge = 4.4256E-05 * CID/# of cylinders.

       -  TCNE = Time constant for filtered RPM.

       -  TCTPTE = Time constant for filtered TP.

       -  TCTPTV = Time constant for filtered TP for TV pressure.













                                         20-2

        INPUT CONVERSIONS AND FILTERS, AODE TRANSMISSION CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  ARCHG = See above.

       -  BP_INTR = BP interpolation factor = FN615(BP).

       -  LOAD = Nondimensional, generic engine load.

       -  NEBART = See above.

       -  NTBART = See above.

       -  SLIP_ABS = Absolute value of SLIP = NEBART - NTBART, rpm.

       -  SPD_RATIO = Speed ratio across torque converter.

       -  TP_RATE = Throttle rate.

       -  TP_REL = Relative TP = TP - RATCH.

       -  TPBART = See above.




      PROCESS
                       STRATEGY MODULE: INTRN_AODE_INPUT_EQNS_COM1


                                     ***************
                                     * RELATIVE TP *
                                     ***************

                      TP_REL = TP - RATCH (clip to 0 as a minimum)


                     ***********************************************
                     * FILTERED ENGINE SPEED FOR TRANSMISSIONS USE *
                     ***********************************************

                                 NEBART = ROLAV(N,TCNE)


                   ***************************************************
                   * FILTERED THROTTLE POSITION FOR TRANSMISSION USE *
                   ***************************************************

                                TPBART = ROLAV(TP,TCTPTE)


                               **************************
                               * THROTTLE POSITION RATE *
                               **************************

              TP_RATE = TP - TPBART (TP_RATE is clipped to +/- 512 counts)



                                         20-3

        INPUT CONVERSIONS AND FILTERS, AODE TRANSMISSION CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                         ***************************************
                         * FILTERED TRANSMISSION TURBINE SPEED *
                         ***************************************

                               NTBART = NOBART * RT_GR_CUR


                               ***************************
                               * BP INTERPOLATION FACTOR *
                               ***************************

                                   BP_INTR = FN615(BP)


                         ***************************************
                         * SPEED RATIO ACROSS TORQUE CONVERTER *
                         ***************************************

                                               NTBART
                               SPD_RATIO =   --------
                                               NEBART


                     **********************************************
                     * FILTERED THROTTLE POSITION FOR TV PRESSURE *
                     **********************************************

                               TPBARTV = ROLAV(TP,TCTPTV)


                               **************************
                               * ABSOLUTE VALUE OF SLIP *
                               **************************

                              SLIP_ABS = |NEBART - NTBART|

























                                         20-4

     TRANSMISSION INPUT CONVERSIONS, TRANSMISSION CONTROL INDICATOR LIGHT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                          TRANSMISSION CONTROL INDICATOR LIGHT


      OVERVIEW

      The Transmission Control Indicator Light (TCIL), located  in  the  instrument
      panel, visually indicates the status of "Transmission Control" to the driver,
      or alerts the driver to certain transmission faults.   If  not  indicating  a
      fault,  the  light  is  on  when overdrive is canceled; off when overdrive is
      enabled.  A flashing light indicates a transmission fault.  The  transmission
      control  switch  and  inhibition  of  fourth  gear  will  continue to operate
      normally in the flashing mode, but there is no visual  indication  of  cancel
      mode.

      To disable flashing for any fault, set TCIL_TM_DLY = 31.875.

      To enable flashing for specific faults, set TCIL_TM_DLY < 31.875, and set the
      calibration  switch  for  that fault = 1.  For example, to flash the TCIL for
      converter clutch errors and shift errors, set CC_ERR_SW = 1 and SFT_ERR_SW  =
      1, and all remaining switches = 0.

      NOTE:   The  OFMFLG  does  not  have  a  switch  associated  with  it.   When
      TCIL_TM_DLY  < 31.875, the TCIL flash for an EPC short circuit, regardless of
      the state of any of the calibration switches.



      DEFINITIONS

      INPUTS

      Registers:

       -  TCILTMR = Time since transmission fault occurred, sec.

       -  TCIL_FLASH_TMR = Time since TCIL changed states in flashing mode, sec.

      Bit Flags:

       -  CC_FM_FLG = converter clutch failure mode flag; 0 -> normal action, 1  ->
          execute converter clutch failure mode action.

       -  CRKFLG = Flag indicating engine mode status; 0 -> not in CRANK mode, 1 ->
          in CRANK mode.

       -  FLG_TCS =  Transmission  Control  flag;  0  ->  overdrive  enable,  1  ->
          overdrive lockout mode.

       -  MFMFLG = MAP sensor FMEM flag; 1 -> MAP sensor failure, 0 ->  MAP  sensor
          okay.

       -  OFMFLG = Flag indicating that an EPC solenoid short circuit  failure  has
          been  detected;  0 -> EPC solenoid circuit not shorted, 1 -> EPC solenoid
          circuit shorted.

       -  OPNCKT_FLG = Indicates EPC open circuit; 1 -> EPC open circuit detected.




                                         20-5

     TRANSMISSION INPUT CONVERSIONS, TRANSMISSION CONTROL INDICATOR LIGHT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  OSFMFLG = Output Shaft Speed sensor FMEM flag; 1 -> OSS failure.

       -  OTEMP_FM_FLG = Transmission overtemperature FMEM flag; 1 ->  Transmission
          is overtemperature, 0 -> Transmission temperature okay.

       -  PDL_ERROR = PRNDL error flag; 1 -> PRNDL error, 0 -> PRNDL okay.

       -  SFT_FM_FLG = Flag indicating whether 1-2 or 2-3 or 3-4 shifts are failing
          to occur properly; 0 -> shifts OK, 1 -> Shifts not OK.

       -  STIFLG = Flag which, if set, indicates Self Test has been requested.

       -  TCIL_STATE = Flag indicating state of TCIL; 0 -> TCIL off, 1 -> TCIL on.

       -  TFMFLG = TP FMEM flag; 0 -> no TP failure, 1 -> TP failure, operating  in
          FMEM mode.

       -  VSFMFLG = Vehicle Speed FMEM flag; 1 -> Vehicle speed sensor  failure,  0
          -> Vehicle speed sensor okay.

      Calibration Constants:

       -  CC_ERR_SW = Calibration selection switch to enable/disable flashing  TCIL
          for converter clutch error; 0 -> disable, 1 -> enable.

       -  EPC_ERR_SW = Calibration selection switch to enable/disable flashing TCIL
          for EPC open circuit error; 0 -> disable, 1 -> enable.

       -  MAP_ERR_SW = Calibration selection switch to enable/disable flashing TCIL
          for MAP sensor failure; 0 -> disable, 1 -> enable.

       -  OS_ERR_SW = Calibration selection switch to enable/disable flashing  TCIL
          for OSS sensor error; 0 -> disable, 1 -> enable.

       -  OTEMP_ERR_SW = Calibration selection switch  to  enable/disable  flashing
          TCIL  for  Transmission  overtemperature  condition;  0  -> disable, 1 ->
          enable.

       -  PDL_ERR_SW = Calibration selection switch to enable/disable flashing TCIL
          for PRNDL error; 0 -> disable, 1 -> enable.

       -  SFT_ERR_SW = Calibration selection switch to enable/disable flashing TCIL
          for Shift Errors; 0 -> disable, 1 -> enable.

       -  TCILTM1 = Flashing TCIL "ON"/"OFF" time period, sec.

       -  TCIL_TM_DLY = Time after fault has occurred before  the  TCIL  begins  to
          flash, sec.  Set to 31.875 to disable flashing.

       -  TP_ERR_SW = Calibration selection switch to enable/disable flashing  TCIL
          for TP sensor failure; 0 -> disable, 1 -> enable.

       -  VS_ERR_SW = Calibration selection switch to enable/disable flashing  TCIL
          for VS Sensor failure; 0 -> disable, 1 -> enable.






                                         20-6

     TRANSMISSION INPUT CONVERSIONS, TRANSMISSION CONTROL INDICATOR LIGHT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  TCILTMR = See above.

       -  TCIL_FLASH_TMR = See above.

      Bit Flags:

       -  TCIL_STATE = See above.

















































                                         20-7

     TRANSMISSION INPUT CONVERSIONS, TRANSMISSION CONTROL INDICATOR LIGHT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: INTRN_TCIL_STATE_COM2


      FLG_TCS = 0 -----------------------|
       (overdrive enable)                |AND -|
                                         |     |
      STIFLG = 1 ------------------|     |     |
       (in Self Test)              |OR --|     |
                                   |           |OR --|  (turn TCIL off)  
      TCILTMR <= TCIL_TM_DLY ------|           |     | TCIL_STATE = 0    
       (flashing mode entry delay)             |     | TCIL_FLASH_TMR = 0
                                               |     |
      TCIL_FLASH_TMR >= TCILTM1 ---------|     |     | 
       (flashing period expired)         |AND -|     |
                                         |           |
      TCIL_STATE = 1 --------------------|           |
       (TCIL currently on)                           |
                                                     | --- ELSE ---
      FLG_TCS = 1 -----------------------|           |
       (overdrive lockout mode)          |AND -|     |
                                         |     |     |
      STIFLG = 1 ------------------|     |     |     |
                                   |OR --|     |OR --|  (turn TCIL on)   
      TCILTMR <= TCIL_TM_DLY ------|           |     | TCIL_STATE = 1    
                                               |     | TCIL_FLASH_TMR = 0
      TCIL_FLASH_TMR >= TCILTM1 ---------|     |     |
                                         |AND -|     |
      TCIL_STATE = 0 --------------------|           |
       (TCIL currently off)                          | 
                                                     | --- ELSE ---
                                                     |
                                                     | Do not change TCIL_STATE
                                                     | Increment TCIL_FLASH_TMR


























                                         20-8

     TRANSMISSION INPUT CONVERSIONS, TRANSMISSION CONTROL INDICATOR LIGHT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                      TCILTMR LOGIC


      STIFLG = 1 ------------------------------|
                                               |
      CRKFLG = 1 ------------------------------|
                                               |
      OFMFLG = 0 ------------------------|     | 
                                         |     | 
      SFT_ERR_SW = 0 --------------|     |     | 
                                   |OR --|     | 
      SFT_FM_FLG = 0 --------------|     |     | 
                                         |     |OR --| TCILTMR = 0 
      CC_ERR_SW = 0 ---------------|     |     |     |
                                   |OR --|     |     |
      CC_FM_FLG = 0 ---------------|     |     |     |
                                         |     |     |
      OPNCKT_FLG = 0 --------------|     |     |     |
                                   |OR --|     |     |
      EPC_ERR_SW = 0 --------------|     |     |     |
                                         |     |     |
      PDL_ERROR = 0 ---------------|     |     |     |
                                   |OR --|     |     |
      PDL_ERR_SW = 0 --------------|     |AND -|     |
                                         |           |
      OTEMP_FM_FLG = 0 ------------|     |           |
                                   |OR --|           |
      OTEMP_ERR_SW = 0 ------------|     |           |
                                         |           |
      TFMFLG = 0 ------------------|     |           |
                                   |OR --|           |
      TP_ERR_SW = 0 ---------------|     |           |
                                         |           |
      MFMFLG = 0 ------------------|     |           |
                                   |OR --|           |
      MAP_ERR_SW = 0 --------------|     |           |
                                         |           |
      VSFMFLG = 0 -----------------|     |           |
                                   |OR --|           |
      VS_ERR_SW = 0 ---------------|     |           |
                                         |           |
      OSFMFLG = 0 -----------------|     |           |
                                   |OR --|           |
      OS_ERR_SW = 0 ---------------|                 |
                                                     | --- ELSE ---        
                                                     |                     
                                                     | Increment TCILTMR   













                                         20-9

                 TRANSMISSION INPUT CONVERSIONS, TCIL OUTPUT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                       TCIL OUTPUT


      OVERVIEW

      This module drives the  TCIL  output.   It  accepts  as  input  a  quad-state
      hardware  present  switch  and the state of the TCIL.  If the TCIL is a bulb,
      LSO-3 is driven as the output.  If the TCIL is a LED then LSO-4 is driven  as
      the  output.  This output configuration is required because this TCIL control
      logic is being used to support a mix of Car and Truck applications and  LSO-4
      cannot  supply  sufficient  current  for  a  bulb and LSO-3 are used by other
      functions on some applications.  This module will only be executed if HPTCS >
      0, i.e., TCIL is under EEC control.

      NOTE:  For proper operation of the TCIL, IAC, which shares LSO-3  with  TCIL,
      must  be  disabled  (THRMHP  <>  3)  when HPTCS = 1 (TCIL output is a bulb on
      LSO-3).

                                           OR

      ACL, which shares LSO-4 with TCIL, must be disabled (HPACL = 0) when HPTCS  =
      2 (TCIL output is a LED).



      DEFINITIONS

      INPUTS

      Registers

       -  TCIL_STATE = Current state of TCIL output; 1 -> light is on, 0  ->  light
          is off.

      Calibration Constants:

       -  HPACL = Hardware present for adjustable shock control.

       -  HPTCS = -1 -> no TCS, 0 -> TCS switch (no TCIL logic), 1  ->  TCS  switch
          (TCIL bulb; LSO-3), 2 -> TCS switch (TCIL LED; LSO-4).

       -  THRMHP  =  Thermactor/super/inlet  air  control  switch;  0  ->   disable
          thermactor, supercharger, and IAC logic/output.

















                                        20-10

                 TRANSMISSION INPUT CONVERSIONS, TCIL OUTPUT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: INTRN_TCIL_REPEAT_COM2


      TCIL_STATE = 0 ------------------|   
       (normal OD and start-up mode)   |AND -|  (turn off the LSO-3 since the    
                                       |     |   "turned off" transistor provides
      HPTCS = 1 -----------------------|     |   no ground for the light)
       (TCIL bulb output LSO-3)              |
                                             | --- ELSE ---
      TCIL_STATE = 0 ------------------|     |
       (normal OD and start-up mode)   |AND -|  (turn off the LSO-4 since the 
                                       |     |   "turned off" transistor provides
      HPTCS = 2 -----------------------|     |   no ground for the light)
       (TCIL LED output LSO-4)               |
                                             | --- ELSE ---
      TCIL_STATE = 1 ------------------|     |
       (OD cancel mode)                |AND -|  (turn on the LSO-3 since the
                                       |     |   "turned on" transistor provides
      HPTCS = 1 -----------------------|     |   ground for the light)
       (TCIL bulb output LSO-3)              |
                                             | --- ELSE ---
      TCIL_STATE = 1 ------------------|     |
       (OD cancel mode)                |AND -|  (turn on the LSO-4 since the
                                       |     |   "turned on" transistor provides
      HPTCS = 2 -----------------------|     |   ground for the light)
       (TCIL LED output LSO-4)               

































                                        20-11

         TRANSMISSION INPUT CONVERSIONS, TRANSMISSION CONTROL SWITCH - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               TRANSMISSION CONTROL SWITCH


      OVERVIEW

      This module accepts input from the Transmission Control switch.  This  switch
      can   be  either  a  momentary  contact  switch  or  a  latched  relay.   The
      Transmission Control switch allow the driver to 1) select an alternate  shift
      pattern  or  2)  lockout  overdrive  (fourth  gear).   The  function  of  the
      Transmission Control switch is dependent on application.   Key-on  state  for
      the  momentary  contact  Transmission  Control  switch  is 1) alternate shift
      pattern disabled or 2) overdrive  permitted.   This  module  is  intended  to
      execute  ONLY  if  HPTCS  >= 0, i.e., only if there is a Transmission Control
      Switch present.



      DEFINITIONS

      INPUTS

      Registers:

       -  ITCS = Transmission Control Switch input register; 0 ->  LOW  voltage  on
          the TCS LSI Input Pin; 1 -> HIGH voltage on the TCS LSI Input Pin.

       -  TM_TCS_RES = Transmission Control switch input residence timer, sec.

      Bit Flags:

       -  FLG_FRST_TCS = Flag used to prevent multiple toggles  of  FLG_TCS  during
          single  activation of TCS button; 0 -> FLG_TCS has not been toggled, 1 ->
          FLG_TCS has been toggled.

      Calibration Constants:

       -  HPTCS = Transmission Control hardware present switch;
                  -1 -> no TCS (no TCIL), 
                   0 -> TCS is a latched relay (no TCIL logic), 
                   1 -> TCS is a momentary contact (TCIL output is a bulb(LSO-3)),
                   2 -> TCS is a momentary contact (TCIL output is a LED (LSO-4)).

       -  TCSILINV = Transmission Control Switch Input  Logic  INVerter;  0  ->  No
          Input Logic Inversion; 1 -> Invert Input Logic.

       -  TMTCS = Transmission Control switch residence time, sec.



      OUTPUTS

      Registers:

       -  TM_TCS_RES = See above.






                                        20-12

         TRANSMISSION INPUT CONVERSIONS, TRANSMISSION CONTROL SWITCH - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Bit Flags:

       -  FLG_FST_TCS = See above.

       -  FLG_TCS = Transmission Control flag; 0 -> Overdrive Permitted mode; 1  ->
          Overdrive Lockout mode.



      PROCESS
                             STRATEGY MODULE: INTRN_TCS_COM2


      HPTCS = 0 ---------------------|
       (External latch)              |AND -| FLG_TCS = ITCS
                                     |     |  (Let input value pass through)
      TCSILINV = 0 ------------------|     |
       (NO Input Logic Inversion)          |
                                           | --- ELSE ---
      HPTCS = 0 ---------------------|     |
       (External latch)              |     |
                                     |     |
      TCSILINV = 1 ------------------|AND -| FLG_TCS = 1
       (Input Logic Inversion)       |     |  (Overdrive Lockout)
                                     |     |
      ITCS = 0 ----------------------|     |
       (LOW voltage at LSI input)          |
                                           | --- ELSE ---
      HPTCS = 0 ---------------------|     |
       (External latch)              |     |
                                     |     |
      TCSILINV = 1 ------------------|AND -| FLG_TCS = 0
       (Input Logic Inversion)       |     |  (Overdrive Permit mode)
                                     |     |
      ITCS = 1 ----------------------|     |
       (HIGH voltage at LSI input)         |
                                           | --- ELSE ---
      HPTCS <> 0 --------------------|     |
       (internal latch)              |AND -| Allow TM_TCS_RES to count up.
                                     |     |
      ITCS = 1 ----------------------|     |
       (TCS button depressed, 12 Volts)    |
                                           | --- ELSE ---
      HPTCS <> 0 --------------------|     |
       (internal latch)              |AND -| TM_TCS_RES = 0
                                     |     |  (zero residence timer)
      ITCS = 0 ----------------------|     | FLG_FRST_TCS = 0
       (normal state, 0 Volts)             |  (clear first pass flag)  



      HPTCS <> 0 --------------------|
       (internal latch)              |
                                     |
      TM_TCS_RES >= TMTCS -----------|AND -| Toggle FLG_TCS            
       (button depressed long enough)|     |  (change TCS state)      
                                     |     | FLG_FRST_TCS = 1        
      FLG_FRST_TCS = 0 --------------|     |  (set first pass flag)  
       (first time to toggle TCS)     

                                        20-13

            TRANSMISSION INPUT CONVERSIONS, TCIL HARDWARE PRESENT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


              TRANSMISSION CONTROL INDICATOR LIGHT (TCIL) HARDWARE PRESENT


      OVERVIEW

      This module sets up the calls to input the state of the TCS if one is
      present,
      processes information and outputs it to the Transmission Control Indicator
      Light, if 
      one is present.



      DEFINITIONS

      INPUTS

      Calibration Constants:

       -  HPTCS = Transmission Control hardware present switch; 
                 -1 -> no TCS (no TCIL), 
                  0 -> TCS is a latched relay (no TCIL logic), 
                  1 -> TCS is a momentary contact (TCIL output is a bulb (LSO-3)), 
                  2 -> TCS is a momentary contact (TCIL output is a LED (LSO-4).




      PROCESS
                           STRATEGY MODULE: INTRN_TCIL_HP_COM1


      HPTCS >= 0 ----------------------------| Do INTRN_TCS_COM2
       (TCS is present)



      HPTCS > 0 -----------------------------| Do INTRN_TCIL_STATE_COM1
       (TCIL is present)                     | Do INTRN_TCIL_REPEAT_COM2





















                                        20-14

           TRANSMISSION EQUATIONS, ETV OVERCURRENT MONITOR VOLTAGE - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             ETV OVERCURRENT MONITOR VOLTAGE


      OVERVIEW

                          (Performed during A to D conversion)

      The A to D conversion of the ETV overcurrent monitor  voltage  (ETVOCM)  will
      vary  depending  on  the  actual  value  of  VREF  (+/- 5%).  To increase the
      capability to detect a partial failure in the  solenoid  circuit,  ETVOCM  is
      adjusted by a calibration voltage input.



      DEFINITIONS

      INPUTS

      Registers:

       -  IETVOCM = A to D conversion  of  the  ETV  overcurrent  monitor  voltage,
          counts.

       -  IVCAL = A to D conversion of the calibration input voltage, counts.



      OUTPUTS

      Registers:

       -  ETVOCM = Corrected ETV overcurrent monitor voltage, counts.




      PROCESS
                           STRATEGY MODULE: INPUT_ETVOCM_COM1


                              ETVOCM = IETVOCM * 512/IVCAL


      Where:  (512/IVCAL) is clipped between 0.95 and 1.05.
















                                        20-15

               TRANSMISSION INPUT CONVERSIONS, 4 x 4 LOW SWITCH - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    4 x 4 LOW SWITCH


      OVERVIEW

      The 4 x 4 switch indicates  that  the  driver  has  attempted  to  shift  the
      transfer  case  to  low  range.  In the "shift on the fly" package, the 4 x 4
      light will flash if the transfer case has not been allowed to shift into 4  x
      4  low.   If the transfer case has been allowed to shift into 4 x 4 low or in
      the non-electronic system, the light will remain steadily on if in 4 x 4  low
      mode.   If  in this mode, the shift schedule will be adjusted by the transfer
      case ratio to get shifts at the correct output shift speed.  This is done  by
      modifying  RT_NOVS.  Since 12 volts at the module pin means normal mode and 0
      volts means 4 x 4 mode, the input to the CPU is read as an inverted input.


      DEFINITIONS

      INPUTS

      Registers:

       -  I4X4L = 4x4 input.

       -  I4X4L_LST = 4x4 input, last pass.

       -  TM_4X4L_RES = 4x4 low switch input residence timer.

      Calibration Contants:

       -  HP_4X4L = 4X4L hardware present switch, 1 = 4X4L input present.

       -  TM4X4L = 4x4 low switch residence time.



      OUTPUTS

      Registers:

       -  I4X4L_LST = See above.

       -  TM_4X4L_RES = See above.

      Bit Flags:

       -  FLG_4X4L = 4x4 low flag.



      PROCESS
                        STRATEGY MODULE: INTRN_CALC_FLG_4X4L_COM1


      I4X4L_LST <> I4X4L ----------|                                        
                                   |AND -| I4X4L_LST = I4X4L                
      HP_4X4L = 1 -----------------|     |  (update state change register)  
                                         | TM_4X4L_RES = TM4X4L             
                                         |  (load residence timer)          

                                        20-16

               TRANSMISSION INPUT CONVERSIONS, 4 x 4 LOW SWITCH - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      TM_4X4L_RES = 0 -------------|                                    
                                   |AND -| FLG_4X4L = I4X4L             
      HP_4X4L = 1 -----------------|     |  (pass along current state,  
                                         |   FLG_4X4L = 1 is 4 x 4 mode)
























































                                        20-17

           TRANSMISSION INPUT CONVERSIONS, RT_NOVS_KAM CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 RT_NOVS_KAM CALCULATION


      OVERVIEW

      This module calculates RT_NOVS_KAM, based on filtered output shaft speed  and
      vehicle  speed.   The  calculation  occurs  once  after each power up and KAM
      initialization.  The calculation occurs when vehicle speed is in  a  reliable
      area,  and  no  related  sensors  have failed.  The N / V ratio is calculated
      NOVCNT times and as long as the  samples  calculated  are  approximately  the
      same, the average is taken and stored in KAM.

      NOTE:  The calibration constant NVBASE_X_NVC = Base N / V * NVCNT.   Choosing
      the  constant  this  way  prevents  the  processor from having to perform the
      multiplication during execution.


      DEFINITIONS

      INPUTS

      Registers:

       -  N = Engine speed, RPM.

       -  NOBART = Filtered Output Shaft Speed in RPM.

       -  NOV_ACT = Actual computed N / V.

       -  NOV_ACT_LST = Last pass value of NOV_ACT.

       -  NOVCTR = Number of N / V calculations counter.

       -  NOVSUM = Running total of valid N / V samples.

       -  RT_NOVS_KAM = Ratio of actual N / V to base N / V.

       -  TM_NOV_CALC = Time since last NOV_ACT calculation.

       -  VSBARV = Filtered Vehicle Speed, MPH.

       -  VSCTR = Count of MPH sensor errors.

      Bit Flags:

       -  FLG_4X4L = 4x4 low flag.

       -  FLG_FRST_NOV = 0 -> A new RT_NOVS KAM value is needed for KAM.

       -  FLG_NEW_NOV = New NOV_ACT calculation flag.

       -  OSFMFLG = Output shaft speed sensor FMEM flag.

       -  VSFMFLG = Vehicle speed sensor FMEM flag.






                                        20-18

           TRANSMISSION INPUT CONVERSIONS, RT_NOVS_KAM CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  NOVCNT = Minimum number of consecutive, good N / V  samples  required  to
          update KAM.

       -  NOVDIF = Maximum difference between N / V samples, RPM / MPH.

       -  NVBASE_X_NVC = Base N / V * NOVCNT.

       -  RT4X4L = 4 x 4 low transfer case ratio units.

       -  RTNVMN = Minimum valid RT_NOVS_KAM value.

       -  RTNVMX = Maximum valid RT_NOVS_KAM value.

       -  TMRTVSCAL = Time between consecutive NOV calculations.

       -  VSRTVSMN = Minimum vehicle speed to calculate N / V.



      OUTPUTS

      Registers:

       -  NOV_ACT = See above.

       -  NOV_ACT_LST = See above.

       -  NOVCTR = See above.

       -  NOVSUM = See above.

       -  RT_NOVS = Ratio of actual N / V to base N / V stored.

       -  RT_NOVS_KAM = See above.

       -  TM_NOV_CALC = See above.

      Bit Flags:

       -  FLG_FRST_NOV = See above.

       -  FLG_NEW_NOV = See above.

       -  FLG_NOV_KAM = Flag indicating at least  one  update  of  RT_NOVS_KAM  has
          occurred since KAM initialization.













                                        20-19

           TRANSMISSION INPUT CONVERSIONS, RT_NOVS_KAM CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                      STRATEGY MODULE: INTRN_RT_NOVS_KAM_CALC_COM2


      FLG_FRST_NOV = 0 ----------------------|
       (need to calculate N / V)             |
                                             |
      VSBARV >= VSRTVSMN --------------------|
       (vehicle speed signal is reliable)    |
                                             |
      TM_NOV_CALC >= TMRTVSCAL --------------|AND -| NOV_ACT_LST = NOV_ACT
       (enough time since last calculation)  |     |  (update last pass NOV
                                             |     |   calculation)
      VSFMFLG = 0 ---------------------------|     | NOV_ACT = NOBART / VSBARV
                                             |     |  (compute actual NOV) 
      OSFMFLG = 0 ---------------------------|     | TM_NOV_CALC = 0
                                             |     |  (reset interval pacer)
      VSCTR = 0 -----------------------------|     | NOVCTR = NOVCTR + 1
                                                   |  (increment sample counter)
                                                   | FLG_NEW_NOV = 1
                                                   |  (New NOV_ACT occurred)
                                                   |
                                                   |  --- ELSE ---
                                                   |
                                                   | FLG_NEW_NOV = 0
                                                   |  (No new NOV_ACT)



      FLG_NEW_NOV = 1 -----------------------|
       (new N / V actual this pass)          |AND -| NOVCTR = 0
                                             |     | (reset sample counter)
      ABS(NOV_ACT_LST - NOV_ACT) > NOVDIF ---|     | NOVSUM = 0
       (too much variation in NOV calculations)    | (reset running total)
                                                   |
                                                   | --- ELSE ---
                                                   | 
      FLG_NEW_NOV = 1 -----------------------------| NOVSUM = NOVSUM + NOV_ACT



      NOVCTR = NOVCNT -----------------------|
       (enough consecutive matches)          |
                                             |
      FLG_FRST_NOV = 0 ----------------------|AND -| RT_NOVS_KAM = NOVSUM /
       (new value for KAM)                   |     |               NVBASE_X_NVC
                                             |     |  (store new NOV ratio in KAM)
      RTNVMN <= (NOVSUM/(NVBASE_X_NVC))      |     | RT_NOVS = RT_NOVS_KAM
                        <= RTNVMX -----------|     | FLG_FRST_NOV = 1
       (reasonable value for N / V has been        |  (do not store another)
        calculated)                                | FLG_NOV_KAM = 1
                                                   |  (indicate a new update since
                                                   |   KAM initialization)







                                        20-20

           TRANSMISSION INPUT CONVERSIONS, RT_NOVS_KAM CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      FLG_4X4L = 1 --------------------------------| RT_NOVS = RT_NOVS_KAM *
                                                   |            RT4X4L
                                                   |  (modify shift schedule by
                                                   |   transfer case ratio)
                                                   | 
                                                   | --- ELSE ---
                                                   | 
                                                   | RT_NOVS = RT_NOVS_KAM




















































                                        20-21

               TRANSMISSION INPUT CONVERSIONS, OSS CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             OUTPUT SHAFT SPEED CALCULATION


      OVERVIEW

      Once a background loop, the ouput shaft speed is calculated if at  least  one
      new  rising  edge occurred since the last calculation.  If the time since the
      last edge becomes large, the shaft speed is set to zero, indicating the shaft
      is stopped, or the sensor has failed.



      DEFINITIONS

      INPUTS

      Registers:

       -  NO = Transmission output shaft speed, rpm.

       -  TSCF = Ticks to seconds conversion factor, ticks.

       -  TSLOSS = Time since last OSS interrupt, sec.

       -  OSSCNT = Number of OSS rising edges since last sample.

       -  OSSPUL = Number of OSS pulses per revolution.

       -  OSSTIM1 = Time of last OSS rising edge.

       -  OSSTIM2 = Time of previous sample OSS rising edge.

      Bit Flags:

       -  NEW_OSS = Flag indicating new OSS rising edge occurred.



      OUTPUTS

      Registers:

       -  NO = See above.

       -  NOBART = Filtered transmission output shaft speed, rpm.

       -  TSLOSS = See above.

       -  OSSCNT = See above.

       -  OSSTIM2 = See above.

      Bit Flags:

       -  FIRST_OSS = First OSS edge flag.

       -  NEW_OSS = See above.



                                        20-22

               TRANSMISSION INPUT CONVERSIONS, OSS CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: INTRN_OSS_CALC_COM1

      Once per background loop, the following logic is performed:


      NEW_OSS = 1 ------------------------| TSLOSS = 0
                                          | NEW_OSS = 0
                                          |
                                          | --- ELSE ---
                                          |
                                          | Increment TSLOSS



      TSLOSS >= 255 msec -----------------| FIRST_OSS = 0
       (less than 59 rpm if 4 pulses/rev) | NO = 0
                                          | NOBART = 0
                                          |
                                          | --- ELSE ---
                                          |      
      OSSCNT > 0 -------------------------| NO = 60 * OSSCNT / OSSPUL * 
       (OSS edge came in)                 |   (OSSTIM1 - OSSTIM2) * TSCF
                                          | OSSCNT = 0
                                          | OSSTIM2 = OSSTIM1
                                          |
                                          | --- ELSE ---
                                          |
                                          | No action
                                          | Do not calculate a new NO
                                          | Exit OSS logic



      Where, TSCF = Clock ticks to seconds conversion factor.

























                                        20-23

        TRANSMISSION INPUT CONVERSIONS, OUTPUT SHAFT SPEED SENSOR TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             OUTPUT SHAFT SPEED SENSOR TEST


      OVERVIEW

      The Output shaft Speed Sensor Test determines if the  OSS  is  not  producing
      output  when  the  vehicle  is moving.This test relies on the inferred motion
      detector flag VMOVING.

      The Output shaft speed sensor FMEM flag is set based on the  Code  639  fault
      filter.


      DEFINITIONS

      INPUTS

      Registers:

       -  C639CNT = Code 639 warm up counter.

       -  C639FIL = Code 639 fault filter.

       -  NOBART = Calculated transmission output shaft speed.

       -  OSSTMR = Duration of OSS failure.

      Bit Flags:

       -  VMOVING = Flag indicating inferred vehicle motion; 1 -> vehicle moving.

      Calibration Constants:

       -  C639LVL = Code 639 fault filter threshold.

       -  C639UP = Code 639 fault filter increment.

       -  FILHYS = Hysteresis  term  to  prevent  spurious  exit  of  Fialure  Mode
          strategy.

       -  OSSMIN = Minimum calculated transmission output  shaftspeed  to  indicate
          OSS  output.   NOTE:   OSSMIN  must  be  calibrated  to a value less than
          OSSMIN2 and VSSMN2 (Converted to RPM) to avoid false codes.

       -  OSSTIM = Minimum time with no sensor output for failure.



      OUTPUTS

      Registers:

       -  OSSTMR = See above.

      Bit Flags:

       -  OSFMFLG = Output shaft speed sensor FMEM flag.



                                        20-24

        TRANSMISSION INPUT CONVERSIONS, OUTPUT SHAFT SPEED SENSOR TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: INTRN_OSS_TEST_COM1


      VMOVING = 1 --------------|
      vehicle moving)           |AND -| Increment OSSTMR
                                |     |
      NOBART < OSSMIN ----------|     |
      (insufficient sensor output)    |
                                      | --- ELSE --- 
                                      |               
                                      | OSSTMR = 0    



      OSSTMR >= OSSTIM ---------------| error_detected = 1
      (duration of insufficient       | (for fault filter routine)
       sensor output considered       |
       a failure                      | --- ELSE ---
                                      |
                                      | error_detected = 0
                                      | (OSS sensor ok)



      always -------------------------| FAULT FILTER CODE 639



      C639FIL > C639LVL --------------| OSFMFLG = 1
                                      |
                                      | --- ELSE ---
                                      |
      C639FIL <= C639LVL - FILHYS ----| OSFMFLG = 0


























                                        20-25

       TRANSMISSION INPUT CONVERSIONS, OSS INPUT PROCESSING, FOREGROUND - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                 OUTPUT SHAFT SPEED SENSOR INPUT PROCESSING, FOREGROUND


      OVERVIEW

      This logic describes the foreground processing  of  the  output  shaft  speed
      input.   Basically,  this  logic counts the number of falling edges since the
      last output shaft speed calculation was performed in background, and  records
      the time of the most recent falling edge.


      DEFINITIONS

      INPUTS

      Registers:

       -  DATA_TIME = Interrupt time, clock ticks.

       -  OSSCNT = Number of OSS falling edges since last sample.

       -  OSSTIM1 = Time of last OSS falling edge, ticks.

      Bit Flags:

       -  FIRST_OSS = First OSS edge flag.

      Calibration Constant:

       -  MNOSSPER = Minimum time between OSS falling edges  for  the  edge  to  be
          valid,  ticks.   Value depends on maximum engine rpm, number of edges per
          revolution and clock frequency.



      OUTPUTS

      Registers:

       -  OSSCNT = See above.

       -  OSSTIM1 = See above.

       -  OSSTIM2 = Time of previous sample OSS falling edge, ticks.

      Bit Flags:

       -  FIRST_OSS = See above.

       -  NEW_OSS = Flag indicating new OSS falling edge occurred.










                                        20-26

       TRANSMISSION INPUT CONVERSIONS, OSS INPUT PROCESSING, FOREGROUND - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: INTRN_OSS_COM1


      During OSS interupt, Falling edge only

      FIRST_OSS = 0 --------------------------| OSSTIM1 = DATA_TIME
       (OSS stopped, prepare for first edge)  | OSSTIM2 = OSSTIM1
                                              | OSSCNT = 0
                                              | FIRST_OSS = 1
                                              | NEW_OSS = 1
                                              |
                                              | --- ELSE ---
                                              |
      DATA_TIME - OSSTIM1 < MNOSSPER ---------| OSS period too short,
       (OSS noise filter)                     | must be noise, ignore edge
                                              | Exit OSS routine
                                              |
                                              | --- ELSE ---
                                              |
                                              | OSSTIM1 = DATA_TIME
                                              | OSSCNT = OSSCNT + 1
                                              | NEW_OSS = 1





































                                        20-27

        TRANSMISSION INPUT CONVERSIONS, MODULATED LOCKUP SOLENOID TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             MODULATED LOCK-UP SOLENOID TEST


      OVERVIEW

      The MLUS is a duty cycled solenoid that controls the converter clutch and  is
      controlled  by the EEC MLUS strategy.  The MLUS is either hardlocked, running
      continuous slip, or in the unlocked state.  When the system is attempting  to
      control  slip  to  a  desired  value  (hardlock or continuous slip), the test
      delays testing of the system via MLUS_DLY_TMR until  any  initial  transients
      have  settled.  Once the transient delay time is over, the test monitors slip
      to determine if the converter clutch is operating correctly.

      High slip when hardlock or continuous slip is commanded  can  result  in  two
      types of errors:

      a)  Error due to a converter clutch  problem  -  unconditionally  unlock  the
          converter clutch and fault filter code 628.

      b)  Error due to  transmission  overtemperature  (loss  of  capacity  due  to
          increased  leakage) - unconditionally unlock the converter clutch without
          fault filtering code 628.


      For either type of detected error the flag causing the  unconditional  unlock
      (MLUS_FM_FLG)  is  cleared  the  next time the converter clutch lock schedule
      changes from unlock desired to lock desired (only if the transmission  is  no
      longer overtemperature).

      Note: Once the mlus error  code (628) is set,  the converter clutch failure 
            mode action  (unconditional unlock of the converter clutch, clippping
            EPC to TVFMMN as a minimum, flashing the TCIL - if present and cal'ed
            in)  will be  executed for  a calibratable  number of warm up cycles.

            Also, the only way that the fault fiter for code 628 can be downcounted
            is  if  from  the time the converter clutch is commanded on until it is
            unlocked no error is detected (downcount once for  a  "good"  converter
            clutch lockup event)

            Once the KAM bit is set, a failure mode flag is set (CC_FM_FLG)  for  a
            calibratible  number  of  warm-up  cycles.   This flag is used by other
            modules which take failure mode action (i.e., flashing the TCIL).


















                                        20-28

        TRANSMISSION INPUT CONVERSIONS, MODULATED LOCKUP SOLENOID TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  BCSDC = Modulated bypass clutch duty cycle.

       -  CRKFLG = Crank flag.

       -  C211FIL = PIP failure fault filter.

       -  C628CNT = Converter clutch  slipping  during  hard  lock  command  warmup
          counter.

       -  C628_KAM_BIT = Converter clutch error KAM bit.

       -  ERR_T0 = Current slip error (SLIP_ABS - SLIP_DES)

       -  MLUS_DLY_TMR = MLUS test delay and  verification  timer,  delays  testing
          during  initial  MLUS controller transients, and determines the durtation
          of high slip for error verification.

       -  PUTMR = Time since CPU powerup.

       -  SLIP_DES = Desired value of slip.

       -  SLIP_DES_LST = previous value of SLIP_DES.

       -  TM_SFT_IN = Shift in progress timer.

       -  TOT = Transmission operating temperature.

      Bit Flags:

       -  FLG_CRV_DS = Desired state of converter clutch based on schedule curves.

       -  FLG_CRV_LST = Last pass value of FLG_CRV_DES.

       -  FLG_HIGH_SLP = MLUS test high slip flag; 0 -> slip is ok, 1 ->  excessive
          slip deteced during hardlock.

       -  FLG_OPEN = MLUS is in open mode, no capacity when set.

       -  FLG_OPEN_LST = Last pass value of FLG_OPEN

       -  MLUS_FM_FLG = Flag used to allow FMEM action without storage of a service
          code.

       -  NO_START = NST VIP enable flag.

       -  RUNNING = RVIP enable flag.

       -  WIGFLG = Indicates VIP wiggle test.






                                        20-29

        TRANSMISSION INPUT CONVERSIONS, MODULATED LOCKUP SOLENOID TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  BCSDC_HRD = BCSDC when converter is hardlocked.

       -  CC_FM_LVL = Number of warm up cycles that converter clutch  failure  mode
          action will be executed after error detection.

       -  MAX_SLIP_DIF = maximum desired slip change (SLIP_DES) allowed before test
          transient delay takes effect.

       -  MAX_SLIP_ERR  =  maximum  ERR_T0  (MLUS  PID  controller   input   error)
          indicating effective control.

       -  MLUS_MX_TOT = TOT high temp limit to test MLUS,  max  value  of  TOT  for
          which  a  detected  converter clutch error will be defined as a fault and
          not due to transmission overtemperature.

       -  MLUS_TDLY_TM = MLUS test initial transient delay time.

       -  MLUS_TST_ENA = continuous MLUS test enable switch, 1 = enable.

       -  MX_HISLP_TM = Maximum time slip can be high without being defined  as  an
          error.

       -  MX_OTSLP_TM = Maximum time slip can be high during transmission  overtemp
          mode without being defined as an error.



      OUTPUTS

      Registers:

       -  MLUS_DLY_TMR = See above.

      Bit Flags:

       -  CC_FM_FLG = Converter clutch failure mode flag; 0 -> normal operation,  1
          -> execute converter clutch failure mode.

       -  FLG_HIGH_SLP = See above.

       -  MLUS_FM_FLG = See above.

















                                        20-30

        TRANSMISSION INPUT CONVERSIONS, MODULATED LOCKUP SOLENOID TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: INTRN_MLUS_TEST_COM1


      Test Entry Conditions:

      MLUS_TST_ENA = 0 --------------------|                                  
       (test cal'd out)                    |                                  
                                           |                                  
      RUNNING  = 1 ------------------------|OR --| exit INTRN_MLUS_TEST_COM1  
       (KOER)                              |     | 
                                           |     | 
      NO_START = 1 ------------------------|     | 
       (KOEO)                                    | 
                                                 | --- ELSE ---
      MLUS_FM_FLG = 1 ---------------------|     | 
                                           |     | 
      FLG_CRV_DS = 1 ----------------------|     | 
                                           |AND -| MLUS_FM_FLG = 0
      FLG_CRV_LST = 0 ---------------------|     | (Converter clutch error has been
                                           |     |  detected, allow the converter
      TOT <= MLUS_MX_TOT ------------------|     |  clutch to attempt to lock up
                                                 |  again if trans is not overtemp)
                                                 | MLUS_DLY_TMR := 0
                                                 | FLG_HIGH_SLP = 0
                                                 | EXIT
                                                 |
                                                 | --- ELSE ---
      TM_SFT_IN <> 0 ----------------------|     | 
       (shift in progress)                 |     | 
                                           |     | 
      CRKFLG = 1 --------------------------|     | 
       (in crank mode)                     |     | 
                                           |OR --| MLUS_DLY_TMR := 0
      PUTMR < 4 ---------------------------|     | FLG_HIGH_SLP = 0
       (less than 4 sec since:             |     | EXIT
        powerup, exiting KOEO              |     | 
        or KOER VIP, or a reset)           |     | 
                                           |     | 
      C211FIL > 0 -------------------------|     | 
       (pip failure)                             | 
                                                 | --- ELSE ---
                                                 |
      WIGFLG = 1 --------------------------------| DO: MLUS_TIMER process
                                                 |
                                                 | --- ELSE ---
                                                 |
                                                 | DO: MLUS_TIMER process
                                                 | DO: MLUS_TEST process











                                        20-31

        TRANSMISSION INPUT CONVERSIONS, MODULATED LOCKUP SOLENOID TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      MLUS feedback controller test execution logic:  When from one background loop
      to  the  next  a  large  change  in  desired  slip  is  commanded, testing of
      controller capability is delayed via MLUS_DLY_TMR.


      BEGIN:  MLUS_TIMER process

      |SLIP_DES_LST - SLIP_DES| > MAX_SLIP_DIF --| MLUS_DLY_TMR := 0
       (large change in desired slip)            | FLG_HIGH_SLP = 0

      END:  MLUS_TIMER process

















































                                        20-32

        TRANSMISSION INPUT CONVERSIONS, MODULATED LOCKUP SOLENOID TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN:  MLUS_TEST process

      ERR_T0 <= MAX_SLIP_ERR --------------|
                                           |AND -| FLG_HIGH_SLP = 0
      FLG_OPEN = 0 ------------------------|     | (Slip is within limits,
      (Converter clutch is commanded on)         |  clear the high slip flag)
                                                 |
                                                 | --- ELSE ---
      FLG_HIGH_SLP = 1 --------------------|     | 
                                           |     | 
      MLUS_DLY_TMR > MX_HISLP_TM ----------|AND -| MLUS_FM_FLG = 1  
                                           |     | FLG_HIGH_SLP = 0 
      TOT <= MLUS_MX_TOT ------------------|     | error_detected = 1
                                                 | CALL FAULT FILTER for
                                                 | code 628
                                                 | (high slip has lasted long
                                                 |  enough to be defined as an 
                                                 |  error, call the fault filter, 
                                                 |  unconditionally unlock the 
                                                 |  converter clutch)
                                                 |
                                                 | --- ELSE ---
      FLG_HIGH_SLP = 1 --------------------|     | 
                                           |     | 
      MLUS_DLY_TMR > MX_OTSLP_TM ----------|AND -| MLUS_FM_FLG = 1  
                                           |     | FLG_HIGH_SLP = 0 
      TOT > MLUS_MX_TOT -------------------|     | (high slip due to
                                                 |  overtemperature unconditionally
                                                 |  unlock the converter clutch)
                                                 |
                                                 | --- ELSE ---
      FLG_HIGH_SLP = 0 --------------------|     | 
                                           |     | 
      BCSDC >= BCSDC_HRD ------------------|     | 
                                           |AND -| FLG_HIGH_SLP = 1 
      MLUS_DLY_TMR > MLUS_TDLY_TM ---------|     | MLUS_DLY_TMR = 0 
                                           |     | (high slip detected, reset mlus 
      ERR_T0 > MAX_SLIP_ERR ---------------|     |  timer to allow verification of 
                                                 |  the error)
                                                 |
                                                 | --- ELSE ---
      MLUS_FM_FLG = 0 ---------------------|     | 
                                           |     | 
      FLG_OPEN = 1 ------------------------|AND -| CALL FAULT FILTER
                                           |     | for code 628
      FLG_OPEN_LST = 0 --------------------|     | (Transition from locked to
                                                 |  unlocked commanded and no error
                                                 |  detected, call the fault
                                                 |  fiter once for a good event)











                                        20-33

        TRANSMISSION INPUT CONVERSIONS, MODULATED LOCKUP SOLENOID TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      C628_KAM_BIT = 1 --------------------|                                 
                                           |AND -| CC_FM_FLG = 1
      C628CNT < CC_FM_LVL -----------------|     | (Execute converter clutch
      (Execute failure mode action               |  failure mode action)
       for a calibratible number                 |
       of warm-up cycles)                        | --- ELSE ---
                                                 |
                                                 | CC_FM_FLG = 0

      END:  MLUS_TEST process


















































                                        20-34

             TRANSMISSION INPUT CONVERSIONS, VS_RATE CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  VS_RATE CALCULATIONS


      OVERVIEW

      Vehicle acceleration rate VS_RATE is  calculated  by  differentiating  NOBART
      with  respect  to  time.   This  is  to  be  used  in calibrating the prevent
      powertrain hunting strategy.

      The calculation is performed as follows:  Every time NOBART  is  updated  the
      time at which this occurs is stored in NO_SMPL_TM.  Every background loop the
      acceleration is computed using the current and previous values of NOBARTL and
      NO_SMPL_TM   (backwards   difference  approximation).   The  result  is  then
      converted to MPH/seconds, filtered and the  current  values  of  NOBARTL  and
      NO_SMPL_TM   become   the   previous  values  in  preperation  for  the  next
      calculation.

      If the OSS fails, VS_RATE is calculated using VSBART.



      DEFINITIONS

      INPUTS

      Registers:

       -  NOBART = Filtered Output shaft speed, RPM.

       -  NOBARTL = Word value of Output Shaft Speed for VS_RATE calculation.

       -  NO_SMPL_TM = Clock value stored at the time NOBART is calculated.

       -  OSFMFLG = Output shaft failure flag; 1 ->  sensor  failed,  0  ->  sensor
          okay.

       -  RT_NOVS = RAtio of actual N/V to base N/V in KAM.

       -  SMPL_TM = Time used to compute sample period for VS_RATE calculation.

       -  VSBARTL = Word value of vehicle speed for transmission use, MPH.

       -  VSBARTL_PREV = Previous value of VSBARTL.

       -  VS_SMPL_TM = Value in the MS_CLOCK at the time VSBART is calculated.

      Calibration Constants:

       -  NVBASE = Base N/V.

       -  TCVSR = Time constant for vehicle acceleration.

       -  TCVSRPH = Time constant for vehicle acceleration.







                                        20-35

             TRANSMISSION INPUT CONVERSIONS, VS_RATE CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  VSBARTL_PREV = See above.

       -  VS_RATE = Filtered vehicle acceleration rate.

       -  VS_RATEPH = Filtered vehicle acceleration rate.

       -  VSSMPLTM_PREV = See above.

















































                                        20-36

             TRANSMISSION INPUT CONVERSIONS, VS_RATE CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                        STRATEGY MODULE: INTRN_CALC_VS_RATE_COM2


      OSFMFLG = 0 ---------| NOBARTL = NOBART/(NVBASE * RT_NOVS)
       (Output Shaft Speed | SMPL_TM = NO_SMPL_TM
        Sensor OK)         |
                           | --- ELSE ---
                           |
                           | NOBARTL = VSBARTL
                           | SMPL_TM = VS_SMPL_TM


      unconditionally -----| vs_smpl_prd = (SMPL_TM - VSSMPLTM_PREV) / 1024
                           |  (time since last calculation in seconds)
                           | vsr = [(NOBARTL - VSBARTL_PREV) / vs_smpl_prd]
                           |  (instantaneous vehicle acceleration in MPH/sec)
                           | VS_RATE = ROLAV(vsr,TCVSR,vs_smpl_prd)     
                           | VS_RATEPH = ROLAV(vsr,TCVSRPH,vs_smpl_prd)     
                           | VSSMPLTM_PREV = SMPL_TM
                           | VSBARTL_PREV = NOBARTL







































                                        20-37

            INPUT CONVERSIONS AND FILTERS, THROTTLE BASED AIRFLOWS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


          CALCULATION OF THROTTLE BASED AIRFLOWS: TOTLDST, BYLDST, AND PCT_LOAD


      OVERVIEW

      NOTE:  EEC Standard Temperature and Pressure.  (ESTP).  ESTP  is  defined  as
      the  values of 100 Deg.F.  inlet air (ACT), 29.92 In.Hg.  Barometric Pressure
      and 200 Deg.F.  Engine coolant temperature (ECT).

      There is a need in EEC strategy for airflow calculations  made  independently
      of  the  air  meter and BP sensor.  Engine speed (N), throttle position (TP),
      and egr percent (EGRACT) provide sufficient information to define air  volume
      flow through the throttle body (or mass flow at ESTP).  Air bypass valve duty
      cycle (ISCDTY) and pressure ratio across the orifice (PCT_LOAD) approximately
      define  the flow across a forced balanced air bypass valve (the lack of force
      balancing at high manifold vacuums is not yet modeled so represents error  in
      predictions).

      From these inputs the following variables are calculated for use elsewhere in
      the strategy:

      1) TOTLDST is calculated as the total load  (throttle  plus  air  bypass)  at
      ESTP.   It  is  used  for inferred BP, failure detection, and FMEM for failed
      airmeters.

      2) PCT_LOAD is calculated for use in the air bypass model and for an optional
      PERLOAD  calculation.   It  has  the  characteristic  of  going to 1.0 at any
      altitude and any RPM  when  the  engine  maximum  airflow  is  reached,  thus
      indicating  that the driver is demanding maximum torque as opposed to maximum
      fuel economy.  Unlike the previous PERLOAD calculation:

           PERLOAD = LOAD_from_airmeter / ( FN035(N)*BP/29.92 )

      PCT_LOAD does not use BP in its calculation.  This  facilitates  the  use  of
      inferred BP which is less accurate than sensor BP.

      3) BYMAST is calculated as the air  bypass  air  mass  flow  at  ESTP.   This
      variable  has  the potential to improve on current estimates of this value in
      EEC strategy, but its only use so far is in the calculation of TOTLDST.

      4) DELTOTLD is the change in TOTLDST between successive background loops.  It
      is used in the inferred BP strategy to detect rapid transients.


















                                        20-38

            INPUT CONVERSIONS AND FILTERS, THROTTLE BASED AIRFLOWS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  BYLDST = Bypass air component of inferred LOAD.

       -  BYMAST = Air bypass valve airflow  at  ESTP.   Output  of  FN1039(ISCDTY,
          PCT_LOAD).  Units are Lbs/Min.

       -  EGRACT =  Actual  percent  EGR,  defined  as:   EGR_mass  /  (air_mass  +
          EGR_mass)

       -  ISCDTY = Air bypass valve commanded duty cycle.

       -  N = Engine speed.  RPM.

       -  PCT_LOAD = new percent load = TOTLDST/FN1036A(N,TOP_ROW)

       -  TOTLDST = Total inferred LOAD.

       -  TP_REL = TP-RATCH = throttle position.  Counts.

       -  TPLDST = Inferred LOAD.

      Calibration constants:

       -  ENGCYL = Number of PIP'S per engine revolution.

       -  FN044 = Normalized TP_REL for FN1036A and FN1037, counts.

       -  FN070E = Normalized N for FN1036A and FN1037.  RPM.

       -  FN1036A = TPLDST as a function of N and TP_REL at sea level with no  EGR;
          FN1036A is a table of absolute loads;
                    X = FN070E(N)
                    Y = FN044(TP_REL)

       -  FN1037 = TPLDST subtractor as a function of N and TP_REL at sea level for
          10% EGR;
                   X = FN070E(N)
                   Y = FN044(TP_REL)

       -  FN1039 = Air bypass airflow at sea level.

       -  SARCHG = Standard air charge, lb.  = 4.4256 (density of air  in  standard
          pressure)  *  10e-5  *  (engine  size  in  cubic  inches)  /  (number  of
          cylinders).

       -  TCBYLD = Filter constant for BYLDST, sec.









                                        20-39

            INPUT CONVERSIONS AND FILTERS, THROTTLE BASED AIRFLOWS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  BYLDST = See above.

       -  BYMAST = See above.

       -  DELTOTLD = change in TOTLDST between two calculations, unitless.

       -  PCT_LOAD = See above.

       -  TOTLDST = See above.

       -  TPLDST = See above.




      PROCESS
                             STRATEGY MODULE: INPUT_TBA_COM1


      Always ------------| TPLDST = FN1036A(N,TP_REL) -
                         |      EGRACT/10. * FN1037(N,TP_REL)
                         |  (air mass through throttle at ESTP)
                         | BYMAST = FN1039(ISCDTY,PCT_LOAD)
                         |  (air mass through air bypass at ESTP)
                         | byldst_inst = BYMAST/(N * ENGCYL * SARCHG)
                         |  (convert to load units)
                         | BYLDST = ROLAV(byldst_inst,TCBYLD)
                         |  (filter BYLDST)
                         | [totldst_old] = TOTLDST
                         |  (save old value for use in inferred BP
                         |   transient gate)
                         | TOTLDST = BYLDST + TPLDST
                         |  (add the load from the air bypass to that
                         |   from the throttle body)
                         | Clip TOTLDST to FN1036A(N,TOP_ROW)
                         |  (top row is peak load and can never be
                         |   exceeded).
                         | DELTOTLD = absolute value (TOTLDST-[totldst_old])
                         | PCT_LOAD = TOTLDST / FN1036A(N,TOPROW)

















                                        20-40

               TRANSMISSION INPUT CONVERSIONS, MLPS CONVERSION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                     MLPS CONVERSION


      OVERVIEW

      This strategy is a fully calibratable control strategy to allow the use of  a
      six   position   Manual  Lever  Position  Sensor  (MLPS)  combined  with  the
      Transmission Control Switch (TCS-if  present).   As  defined  by  TAPME,  all
      transmissions  have  three forward positions, neutral, reverse and park.  The
      three forward positions are overdrive, second (if TCS present) or  drive  (if
      no TCS present) and first.  The second to last PRNDL position is calibratable
      to second or drive using the MLPS_2 parameter discussed later.

      The analog MLPS input is decoded into IPDL to give one of six positions.   In
      this  decoding, deadbands can be calibrated between each position range.  The
      calibration constants PARKHI, PARKLO, REVHI, REVLO, NEUHI, NEULO, ODHI, ODLO,
      MLPS_2HI,   MLPS_2LO,   MAN1HI,  and  MAN1LO  are  the  parameters  for  each
      corresponding PRNDL position band.  Anytime a MLPS  fault  is  detected  IPDL
      will be set to zero.

      A residence timer exists to delay passing the  MLPS  signal  through  to  the
      control.   Anytime  a  change  in IPDL occurs the residence timer is reset to
      PDL_TIM.  PDL and PDL_ERROR may only change states after the residence  timer
      has timed out.

      If the residence timer reaches zero with a valid region present, IPDL will be
      passed  into  PDL  and  PDL_ERROR  will  be  cleared.  If the residence timer
      reaches zero in a failed  condition  FMMMLP  will  be  passed  into  PDL  and
      PDL_ERROR will be set.  The setting of PDL_ERROR informs the control to enter
      FMEM.

      MLPS diagnostic testing distinguishes four separate  types  of  failure:   in
      range  failure, (error code - 675), short to ground, (error code - 667), open
      circuit, (error code - 668), and high vehicle speed observed in park,  (error
      code - 659).


      NOTE:  During EPC VFS short circuit FMEM (OFMFLG = 1), OD will  be  cancelled
      to  prevent  failure  of  the  direct  clutch  .  The direct clutch carries a
      greater percentage of input torque in 4th (compared to 3rd), and half fuel is
      not enough to prevent the direct clutch from slipping in 4th gear.



















                                        20-41

               TRANSMISSION INPUT CONVERSIONS, MLPS CONVERSION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Below is a diagram showing how the MLPS test parameters are related.

      The logic starts  by  checking  for  the  presence  of  three  of  the  fault
      conditions,  high  vehicle  speed in park, then mlps open circuit and finally
      mlps short to ground.  If any of these faults are present it is flagged, IPDL
      set to zero and this logic exited.

      Next the logic compares the current MLPS output (INDS) to the Park range,  if
      INDS  is  between  PARKHI  and  PARKLO,  IPDL is set to PARK.  If INDS is not
      within the PARK range, the strategy compares INDS to the REVERSE range  (then
      NEUTRAL,  OD,...,MAN1).   As  soon  as a valid range is found, IPDL is set to
      that position and this logic is exited.  If no valid range is found  IPDL  is
      set to zero.

      If calibrating out one of the error  bands  is  desired,  the  parameters  on
      either  side of the band should be set equal.  Example - to calibrate out the
      band between Park and Reverse, PAEKLO - 826 = REVHI would work

        PRNDL POSITION    CALIBRATION PARAMETER  APPROXIMATE VALUE

                     OUT OF RANGE HI
           _________ ------------ PARKHI              968
          |         |
          |  PARK   |
          |_________|
                     ------------ PARKLO              879
                     ERROR BAND
           _________ ------------ REVHI               773
          |         |
          | REVERSE |
          |_________|
                     ------------ REVLO               701
                     ERROR BAND
           _________ ------------ NEUHI               621
          |         |
          | NEUTRAL |
          |_________|
                     ------------ NEULO               537
                     ERROR BAND
           _________ ------------ ODHI                468
          |         |
          |   OD    |
          |_________|
                     ------------ ODLO                385
                     ERROR BAND
           _________ ------------ MLPS_2HI            314
          |         |
          | MLPS_2  |
          |_________|
                     ------------ MLPS_2LO            245
                     ERROR BAND
           _________ ------------ MAN1HI              160
          |         |
          | MANUAL1 |
          |_________|
                     ------------ MAN1LO               60
                     OUT OF RANGE LO



                                        20-42

               TRANSMISSION INPUT CONVERSIONS, MLPS CONVERSION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  INDS = Input from manual lever position sensor (MLPS) in counts.

       -  INDS_LST = Last input from MLPS in counts.

       -  IPDL = Unverified PRNDL position.

       -  IPDL_LST = Last unverified PRNDL position.

       -  PDL = Verified PRNDL position.

       -  TM_PDL_RES = Input residence timer.

       -  VS = Vehicle speed.

      Bit Flags:

       -  FLG_TCS = Transmission control switch flag.

       -  OFMFLG = EPC VFS short circuit failure mode flag;  1  ->  EPC  VFS  short
          circuti failure detected.

       -  PARK_ERR = High vehicle speed in park error flag; 1 -> High vehicle speed
          in park band error, 0 -> Vehicle speed in park range.

       -  PDL_GND = MLPS short to ground fault  detected;  1  ->  MLPS  shorted  to
          ground, 0 -> MLPS not shorted to ground.

       -  PDL_HGH = MLPS open circuit detected; 1 -> MLPS open circuit, 0  ->  MLPS
          circuit not open.

      Calibration Constants:

       -  DLT_INDS = Change in INDS above which an MLPS shift must have occurred.

       -  FMMMLP = IPDL value when PDL_ERROR is present.

       -  MAN1HI = MLPS manual 1 position band high limit.

       -  MAN1LO = MLPS manual 1 position band low limit.

       -  MLPS_2 = IPDL value when MLPS is in the second to  last  position;  2  ->
          Manual  2  has  been  selected  (TCS  present), 3 -> Drive mode/Overdrive
          cancel has been selected (no TCS present).

       -  MLPS_2HI = MLPS second to last position band high limit.

       -  MLPS_2LO = MLPS second to last position band low limit.

       -  NEUHI = MLPS neutral position band high limit.

       -  NEULO = MLPS neutral position band low limit.



                                        20-43

               TRANSMISSION INPUT CONVERSIONS, MLPS CONVERSION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  ODHI = MLPS overdrive position band high limit.

       -  ODLO = MLPS overdrive position band low limit.

       -  PARKHI = MLPS park position band high limit.

       -  PARKLO = MLPS park position band low limit.

       -  PDLTIM = PRNDL load residence time.

       -  REVHI = MLPS reverse postion band high limit.

       -  REVLO = MLPS reverse position band low limit.

       -  TSTRAT = Transmission Strategy Switch; The TSTRAT software switch selects
          which transmission control strategy to be executed:
              0 -> No transmission control (Manual trans., AOD,ATX,C6,C3, etc)
              1 -> SIL (Shift Indicator Light)
              2 -> A4LD with 3-4 shift control and converter clutch control.
              3 -> AXOD
              4 -> C64E(E40D)
              5 -> A4lDE
              6 -> FAX-4
              7 -> AOD-E (AOD-I)
              8 -> 4EAT
              9 -> CD4E

       -  VSPMIN = Indicate PRNDL error if PRNDL = park and vehicle  speed  is  GE,
          this value (MPH).



      OUTPUTS

      Registers:

       -  INDS_LST = Last MLPS voltage reading in counts.

       -  IPDL = Unverified PRNDL value.

       -  IPDL_LST = Last unverified PRNDL value.

       -  PDL = Verified PRNDL value.

       -  PDL_LST = Last verified PRNDL value.

       -  TM_PDL_RES = See above.

      Bit Flags:

       -  PARK_ERR = See above.

       -  PDL_ERROR = PRNDL error flag; 1 -> PRNDL error, 0 -> PRNDL valid.

       -  PDL_GND = See above.

       -  PDL_HGH = See above.



                                        20-44

               TRANSMISSION INPUT CONVERSIONS, MLPS CONVERSION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: INTRN_MLPS_CONV_COM8


      As the PRNDL switch moves from position to position, the next contact is made
      before  the  current  contact  is  broken.   However, during transitions MLPS
      voltage may momentarily be in invalid ranges.


      TSTRAT < 4 -----------------------------| Exit Module
      (transmission without MLPS)



      To record the last PDL and IPDL before processing a new one.


      always ---------------------------------| PDL_LST = PDL
                                              | IPDL_LST = IPDL









































                                        20-45

               TRANSMISSION INPUT CONVERSIONS, MLPS CONVERSION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      To verify the INDS signal is in an allowable range and convert the counts
      into a PRNDL position.


      always ---------------------------------| PARK_ERR = 0
                                              | PDL_HGH = 0
                                              | PDL_GND = 0


      PARKLO =< INDS < PARKHI ----------|
                                        |AND -| IPDL = 0
      VS > VSPMIN ----------------------|     | PARK_ERR = 1
                                              |
                                              | --- ELSE ---
                                              |
      PARKHI =< INDS -------------------------| IPDL = 0
                                              | PDL_HGH = 1
                                              |
                                              | --- ELSE ---
                                              |
      INDS < MAN1LO --------------------------| IPDL = 0
                                              | PDL_GND = 1
                                              |
                                              | --- ELSE ---
                                              |
      PARKLO =< INDS < PARKHI ----------------| (PARK position)
                                              | IPDL = 7
                                              |
                                              | --- ELSE ---
                                              |
      REVLO =< INDS < REVHI ------------------| (REVERSE position)
                                              | IPDL = 6
                                              |
                                              | --- ELSE ---
                                              |
      NEULO =< INDS < NEUHI ------------------| (NEUTRAL position)
                                              | IPDL = 5
                                              |
                                              | --- ELSE ---
                                              |
      ODLO =< INDS < ODHI --------------------| (OVERDRIVE position)
                                              | IPDL = 4
                                              |
                                              | --- ELSE ---
                                              |
      MLPS_2LO =< INDS < MLPS_2HI ------------| (MLPS_2 postion)
                                              | IPDL = MLPS_2
                                              |
                                              | --- ELSE ---
                                              |
      MAN1LO =< INDS < MAN1HI ----------------| (MANUAL 1 postion)
                                              | IPDL = 1
                                              |
                                              | --- ELSE ---
                                              |
                                              | (in range fault detected)
                                              | IPDL = 0



                                        20-46

               TRANSMISSION INPUT CONVERSIONS, MLPS CONVERSION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      To perform fault filtering and set SELF TEST code:


      PDL_HGH = 1 ----------------------------| error_detected = 1
                                              | CALL FAULT FILTER 668
                                              |
                                              | --- ELSE ---
                                              |
      PDL_GND = 1 ----------------------------| error_detected = 1
                                              | CALL FAULT FILTER 667
                                              |
                                              | --- ELSE ---
                                              |
      PARK_ERR = 1 ---------------------------| error_detected = 1
                                              | CALL FAULT FILTER 659
                                              | (HIGH VEHICLE SPEED IN PARK
                                              | FAULT FILTERING)
                                              |
                                              | --- ELSE ---
                                              |
      PDL_ERROR = 1 --------------------|     | error_detected = 1
                                        |AND -| CALL FAULT FILTER 675
      IPDL = 0 -------------------------|     | (MLPS FAULT FILTERING)
                                              |
                                              | --- ELSE ---
                                              |
                                              | error_detected = 0
                                              | CALL FAULT FILTER 675
                                              | CALL FAULT FILTER 659
                                              | CALL FAULT FILTER 667
                                              | CALL FAULT FILTER 668



      To verify that a MLPS shift has occurred:


      IPDL <> IPDL_LST --------------------|
                                           |OR --| TM_PDL_RES = PDLTIM
      IPDL = 0 ----------------------|     |     | (load residence timer)
                                     |AND -|
      |INDS - INDS_LST| > DLT_INDS --|


      always ------------------------------------| INDS_LST = INDS















                                        20-47

               TRANSMISSION INPUT CONVERSIONS, MLPS CONVERSION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      After residence timer expires recognize new PRNDL position.  Enter FMEM
      action if needed:


      TM_PDL_RES <> 0 ------------------------| No action taken
                                              |
                                              | --- ELSE ---
                                              |
      IPDL = 0 -------------------------------| PDL_ERROR = 1
       (MLPS reading is invalid)              | (set error flag)
                                              | Do: PDL FMEM LOGIC
                                              |
                                              | --- ELSE ---
      IPDL = 4 -------------------------|     |
       (overdrive position)             |     |
                                        |     |
      FLG_TCS = 1 ----------|           |AND -| PDL_ERROR = 0
       (overdrive cancel)   |AND -|     |     | (clear error flag)
                            |     |     |     | PDL = 3
      MLPS_2 = 2 -----------|     |OR --|     | (overdrive lockout mode)
       (TCS input present)        |           |
                                  |           |
      OFMFLG = 1 -----------------|           |
       (EPC VFS short circuit                 |
        fault present)                        |
                                              | --- ELSE ---
                                              |
                                              | PDL = IPDL
                                              | PDL_ERROR = 0
                                              | (clear error flag)



      BEGIN: PDL FMEM LOGIC

      FMMMLP = 4 -----------------------|
       (overdrive is PDL FMEM value)    |
                                        |
      FLG_TCS = 1 ----------|           |AND -| PDL = 3
       (overdrive cancel)   |AND -|     |     |
                            |     |     |     |
      MLPS_2 = 2 -----------|     |OR --|     |
       (TCS input present)        |           |
                                  |           |
      OFMFLG = 1 -----------------|           |
       (EPC VFS short circuit                 |
        fault present)                        |
                                              | --- ELSE ---
                                              |
                                              | PDL = FMMMLP

      END: PDL FMEM LOGIC








                                        20-48

                TRANSMISSION INPUT CONVERSIONS, AODE OVERVIEW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               AODE SHIFT CONTROL OVERVIEW


      The  AODE  strategy  and  software  are  comprised  of  a  set  of  distinct,
      independent modules, each with a specific function.  The modules are designed
      to minimize the software impact of different transmission  hardware  and  can
      thus  be  re-used  in other future transmission strategies.  The main modules
      and subroutines are show on the following page.  They  are  executed  in  the
      order  shown  except for INTRN_OSS_* and INTRN_AODE_INPUT_EQNS_COM1 which are
      done immediately after input conversion.  Also  shown  are  the  main  output
      parameters of the modules.

      These module are NOT executed unless TSTRAT = 7 (AODE transmission present).


           *******************************************************************
           *******************************************************************
           ***                                                             ***
           ***                                                             ***
           ***     All references to "PDL", "PRNDL", or variations thereof ***
           *** with respect to electronic transmission controls are        ***
           *** synonymous with "Manual Level Indicated Position" as deter- ***
           *** mined from the manual lever position sensor.                ***
           ***                                                             ***
           ***     All references to "TV", "ETV", or terms containing "TV" ***
           *** with respect to electronic transmission controls are synon- ***
           *** ymous with "Electronic Pressure Control", and are not       ***
           *** associated with any control function of the engine throttle.***
           ***                                                             ***
           ***                                                             ***
           *******************************************************************
           *******************************************************************




























                                        20-49

                TRANSMISSION INPUT CONVERSIONS, AODE OVERVIEW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                        STRATEGY MODULE: INTRN_AODE_OVERVIEW_COM1


      STRUCTURE

      If TSTRAT = 7, execute the following modules. Otherwise bypass transmission
      control logic.

      MAIN ROUTINE 
               SUBROUTINES                                      OUTPUT PARAMETERS
      ---------------------------------------------------------------------------

      SC_DESRD_GR_DETR_COM4                                     GR_DS
               SC_GR_DS_AUTO_COM2                               FLG_FRST_DS
               SC_VER_AUTO_SHFT_COM2                            FLG_SFT_UP
               SC_GR_SEQ_PNTR_COM5                              GR_DS_TV
                                                                FLG_SFT_DN

      CM_GR_DETR_COM4                                           GR_CM
               SC_CM_GR_MAN1_COM5                               GR_OLD
               SC_CM_GR_MAN2_COM5                               RT_GR_OLD
               SC_CM_GR_AUTO_UP_COM7                            FLG_FRST_CM
               SC_CM_GR_AUTO_DWN_COM7

      SC_TIMER_COM4                                             TM_SFT_IN
                                                                FLG_SFT_IN
                                                                FLG_SFT_MDN

      SC_SOL_CTL_COM5                                           FLG_SS_1
                                                                FLG_SS_2
                                                                RT_GR_CUR
                                                                GEAR_CUR

      SC_VALID_COM7

      SC_TQMOD_COM1

      EPC_GUIDE_COMx                                            TV_PRES
               EPC_STARTUP_COM5                                 TV_STAT
               EPC_ENGMT_STALL_COM6                             TV_COUNTS
               EPC_NORM_COMx                                    TV_DYN
                   EPC_TQ_IALPHA_COM4
                   EPC_DYNAMIC_COM5

      EPC_CM_COM1

      EPC_VFS_OUT_COM1













                                        20-50

                TRANSMISSION INPUT CONVERSIONS, AODE OVERVIEW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      MAIN ROUTINE
               SUBROUTINES                                      OUTPUT PARAMETERS
      ---------------------------------------------------------------------------

      CCC_BYP_CLTCH_CTL_COM2                                    FLG_OT_LK
               CCC_HOT_LCK_COM1                                 FLG_HDR_LK
               CCC_FMEM_COM3                                    FLG_FMM_LK
               CCC_SCHLD_BYP_SLIP_COM2                          FLG_ENG_LK
               CCC_UNCOND_UNLK_COM10                            FLG_STRK_UNLK
               CCC_MOD_COM2                                     FLG_UNC_UNLK
               CCC_BCSDC_CALC_COM5                              BCSDC     
                   CCC_BYP_PID_CTL_COM4
               CCC_BYP_SLIP_CALC_COM5

      CCC_SCHLD_LCK_UNLCK_COM8

      INTRN_CALC_4X4L_COM1 (CB only)

      INTRN_TCIL_HP_COM1
               INTRN_TCS_COM2                                   FLG_TCS
               INTRN_TCIL_STATE_COM2                            TCIL_STATE
               INTRN_TCIL_REPEAT_COM2

      INTRN_RT_NOVS_KAM_CALC_COMx                               RT_NOVS

      INTRN_OSS_COM1
               INTRN_OSS_CALC_COM1                              NO
               INTRN_OSS_TEST_COM1

      INTRN_CALC_VS_RATE_COM1

      INTRN_AODE_INPUT_EQNS_COM1                                NEBART
                                                                TPBART
                                                                TPVARTV
                                                                TPBARTC
                                                                TP_RATE
                                                                NTBART
                                                                BP_INTR
                                                                SPD_RATIO
                                                                SLIP_ABS




















                                        20-51

             INPUT CONVERSIONS AND FILTERS, COLD SHIFT MULTIPLIER - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  COLD SHIFT MULTIPLIER


      OVERVIEW

      During cold weather starts/drives, the initial  shifts  of  the  transmission
      seem  delayed.   This  impression  results from the decrease in engine torque
      during the early part of the cold start.  Therefore, strategy which  computes
      shift  schedules  as  a function of the initial Transmission Oil Temperature,
      TOT, (temperature at the time of the start), to the current TOT is required.

      The  cold  weather  strategy  output  CS_SFT_MULT,  is  also  used   in   the
      unconditional  converter  clutch  unlock  strategy.   When CS_SFT_MULT is not
      equal to one, the converter clutch is unconditionally  unlocked;  i.e.,  when
      cold  transmission  conditions  exist, the converter clutch is kept unlocked.
      Once CS_SFT_MULT gets set to 1.0 (transmission is warm),  the  check  on  TOT
      will be disabled.

      A time limit is placed upon the time allowed for the actual TOT to rise above
      the initial TOT.

      FLG_TQM_ENA is set based on a function of Initial TOT or ECT.  FLG_TQM_ENA is
      used  to  limit the spark retard due to toarue modulation when the powertrain
      is cold.


      DEFINITIONS

      INPUTS

      Registers:

       -  ECT = Engine coolant temperature, degrees F.

       -  INIT_TOT = TOT at  start-up;  arithmetic  average  of  the  first  8  TOT
          reading.

       -  TOT = Transmission Oil Temperature, degrees F.

       -  RUN_TMR = Time since entering RUN mode, sec.

      Bit Flags:

       -  FLG_TOT_WRM =  Flag  to  signal  transmission  is  sufficiently  warm  to
          lock-up.

       -  FLG_TQM_ENA = Flag to signal transmission is sufficiently warm to  permit
          full spark retard due to torque modulation.

      Calibration Constants:

       -  CS_MAX_TIME = Maximum time allowed in cold start shift schedules.

       -  CS_MULT = Cold Start Multiplier for all shifts.

       -  ECT_TQM  =  Engine  coolant  temperature  required   to   permit   toruqe
          modulation.



                                        20-52

             INPUT CONVERSIONS AND FILTERS, COLD SHIFT MULTIPLIER - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FN690(INIT_TOT)  =  Temperature  required  to  leave  cold  start   shift
          schedules.

       -  FN690TQM(INIT_TOT) = Transmission  oil  temperature  required  to  permit
          torque modulation.



      OUTPUTS

      Registers:

       -  CS_SFT_MULT = Cold Start Shift Multiplier.

      Bit Flags:

       -  FLG_TQM_ENA = See above.











































                                        20-53

             INPUT CONVERSIONS AND FILTERS, COLD SHIFT MULTIPLIER - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: INTRN_CSM_COM3


      TOT < FN690(INIT_TOT) ------------|
                                        |
      RUN_TMR < CS_MAX_TIME ------------|AND -| CS_SFT_MULT = CS_MULT 
                                        |     |
      FLG_TOT_WRM = 0 ------------------|     | 
       (once TOT reaches temperature,         |
        do not check again)                   |
                                              | --- ELSE --- 
                                              |
                                              | CS_SFT_MULT = 1.0
                                              | FLG_TOT_WRM = 1


      TOT < FN690TQM(INIT_TOT) ---|
                                  |OR --|
      ECT < ECT_TQM --------------|     |
       (Clip spark retard due to        |
        torque modulation until the     |AND -| FLG_TQM_ENA = 0
        powertrain warms up)            |     |
                                        |     |
      FLG_TQM_ENA = 0 ------------------|     |
                                              | --- ELSE --- 
                                              |
                                              | FLG_TQM_ENA = 1
































                                        20-54












                                      CHAPTER 21

                                    SHIFT CONTROL

















































                                         21-1

            SHIFT CONTROL, PRNDL BASED DESIRED GEAR DETERMINATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                         PRNDL BASED DESIRED GEAR DETERMINATION


      OVERVIEW

      The  desired  transmission  gear  is  calculated  based  on  PRNDL  position.
      Possible gears are:

      GR_CM   Transmission State      GEAR_CUR   RT_GR_CUR
      ------  ------------------      --------   ---------
        1      1ST                        1        GRRAT1
        2      2ND                        2        GRRAT2
        3      3RD                        3        GRRAT3
        4      4TH                        4        GRRAT4

      In the normal Drive/Overdrive position, the desired gear is calculated  based
      on a maximum WOT RPM shift point or as a function of throttle position versus
      vehicle speed.  All shift points are adjusted for  altitude.   There  are  no
      excluded  shifts  in automatic mode, that is 1 - 4 shifts or 3 - 1 shifts are
      permitted if the calibration calls for it.  In addition,  the  gear  sequence
      for a multi-step shift is completely calibratable.

      In manual 2 or 1, desired gear is set to the ultimate  desired  gear:   2  in
      manual 2 and 1 in manual 1.  Sequencing through the downshift routine is left
      to the commanded gear routine.

      The main outputs of the desired gear routine are:

       -  GR_DS, the desired gear;

       -  FLG_FRST_DS, global flag to indicate a shift is desired  this  background
          pass.




























                                         21-2

            SHIFT CONTROL, PRNDL BASED DESIRED GEAR DETERMINATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  GEAR_CUR = Global gear indicator, reflects only.

       -  GEAR_OLD = Global gear indicator for last commanded.

       -  GR_DS = Desired transmission gear.

       -  GR_DS_LST = Desired gear in the last background pass.

       -  GR_DS_TV = Commanded gear for TV.

       -  PDL = Current PRNDL position.

       -  PDL_LST = Last PRNDL position.

      Bit Flags:

       -  FLG_SFT_IN = Shift in progress flag.

       -  FLG_UP_NE = RPM based upshift flag.

      Calibration Constants:

       -  SW_SFTIN = Desired gear shift in progress switch; 0 -> FLG_SFT_IN = 0 for
          new desired gear, 1 -> always determine new desired gear.


      OUTPUTS

      Registers:

       -  GR_DS = See above.

       -  GR_DS_LST = See above.

       -  GR_DS_TV = See above.

       -  IGR_DS = Unverified desired transmission gear.

       -  TM_SFT_IN = Shift in progress timer.

      Bit Flags:

       -  FLG_FRST_DS = First time a shift is desired flag; 0 -> no shift  desired,
          1 -> shift desired this background pass.

       -  FLG_SFT_DN = Downshift flag.

       -  FLG_SFT_IN = Shift in progress flag.

       -  FLG_SFT_UP = Upshift flag.




                                         21-3

            SHIFT CONTROL, PRNDL BASED DESIRED GEAR DETERMINATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: DESRD_GR_DETR_COM4


      PDL = 3 OR 4 ---------------------|
                                        |AND -| TM_SFT_IN = 0
      PDL_LST <> 3 OR 4 ----------------|     | FLG_SFT_IN = 0


      always ---------------------------------| GR_DS_LST = GR_DS


      PDL = 1 --------------------------------| IGR_DS = 1
       (PRNDL in manual 1)                    | GR_DS = 1
                                              |
                                              | --- ELSE --- 
                                              |
      PDL = 2 --------------------------------| IGR_DS = 2
       (PRNDL in manual 2)                    | GR_DS = 2
                                              |
      FLG_UP_NE = 0 -------------------|      |
                                       |      | --- ELSE --- 
      SW_SFTIN = 1 ---------------|    |      |
                                  |OR -|      |
      FLG_SFT_IN = 0 -------------|    |      |
       (no shift in progress)          |      |
                                       |AND --| Do "GR_DS, PRNDL = 3 OR 4" Logic
      PDL = 3 --------------------|    |      | Do "DELAY/VERIFY SHIFT" Logic      
       (PRNDL in overdrive cancel)|OR -|      | Do "GR_SEQ_PNTR CALCULATION"
                                  |           |
      PDL = 4 --------------------|           |
       (PRNDL in overdrive)                   |
                                              | --- ELSE --- 
      PDL = 6 --------------------|           |
       (PRNDL in reverse)         |           |
                                  |           |
      PDL = 7 --------------------|OR --------| IGR_DS = 1
       (PRNDL in park)            |           | GR_DS = 1
                                  |           | GR_DS_TV = 1
      PDL = 5 --------------------|




















                                         21-4

            SHIFT CONTROL, PRNDL BASED DESIRED GEAR DETERMINATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      GR_DS_TV > GEAR_CUR --------------|
       (upshift is being verified or    |
        will be commanded this pass)    |
                                        |OR --| FLG_SFT_UP = 1
      GR_DS_TV = GEAR_CUR --------|     |     | FLG_SFT_DN = 0
       (no shift pending)         |     |     |  (indicate upshift)
                                  |AND -|     |
      GEAR_CUR >= GEAR_OLD -------|           | --- ELSE ---
       (last shift was an upshift)            |
                                              | FLG_SFT_UP = 0
                                              | FLG_SFT_DN = 1
                                              |  (indicate downshift)


      GR_DS <> GR_DS_LST ---------------------| FLG_FRST_DS = 1
       (desired gear has changed)             |  (new desired gear for
                                              |   this program pass only)
                                              |
                                              | --- ELSE ---
                                              |
                                              | FLG_FRST_DS = 0







































                                         21-5

                  SHIFT CONTROL, GR_DS, PRNDL = 3 OR 4 LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               GR_DS, PRNDL = 3 OR 4 LOGIC


      OVERVIEW

      This module handles the Desired Gear computation when PRNDL = 3 or 4.


      DEFINITIONS

      INPUTS

      Registers:

       -  BP_INTR = BP interpolation factor.

       -  CS_SFT_MULT = Cold start shift multiplier.

       -  GR_CM = Commanded gear for shift solenoids.

       -  IGR_DS = Unverified desired transmission gear.

       -  NEBART = Filtered engine RPM for transmission.

       -  PDL = Current PRNDL position.

       -  PDL_LST = PRNDL position last background pass.

       -  RT_NOVS = Ratio of actual N/V to base N/V in KAM.

       -  TOT = Transmission oil temperature (degrees F).

       -  TP_REL = Relative throttle position, counts.

       -  TP_REL_H = Relative TP (TP - RATCH); high byte only.

       -  VS = Instantaneous vehicle speed (unverified).

       -  VSBART_RT = Filtered vehicle speed adjusted for RT_NOVS for transmission,
          mph.

       -  VS_RATEPH = Vehicle acceleration rate for Powertrain Hunting.

      Bit Flags:

       -  FLG_4X4L = 4X4L Flag.

       -  FLG_HOT_21 = 1  ->  use  hot  2-1  shift  schedules;  0  ->  transmission
          temperature is okay, use normal shift schedules.

      Calibration Constants:

       -  FN12A(TP_REL_H) = Vehicle speed adjustment for 1 - 2 upshift at altitude.

       -  FN12S(TP_REL_H) = Vehicle speed for 1 - 2 upshift at sea level.

       -  FN12S_4X4L(TP_REL_H) = Vehicle speed for 1 - 2 upshift at  sea  level  in
          4X4L.


                                         21-6

                  SHIFT CONTROL, GR_DS, PRNDL = 3 OR 4 LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FN21A(TP_REL_H) = Vehicle  speed  adjustment  for  2  -  1  downshift  at
          altitude.

       -  FN21S(TP_REL_H) = Vehicle speed for 2 - 1 downshift at sea level.

       -  FN21S_4X4L(TP_REL_H) = Vehicle speed for 2 - 1 downshift at sea level  in
          4X4L.

       -  FN21_HOT(TP_REL_H)  =  2-1   downshift   adder   when   transmission   is
          overtemperature.

       -  FN23A(TP_REL_H) = Vehicle speed adjustment for 2 - 3 upshift at altitude.

       -  FN23PPH(TP_REL) = Min VS_RATEPH to allow 2 - 3 upshift.

       -  FN23S(TP_REL_H) = Vehicle speed for 2 - 3 upshift at sea level.

       -  FN32A(TP_REL_H) = Vehicle  speed  adjustment  for  3  -  2  downshift  at
          altitude.

       -  FN32S(TP_REL_H) = Vehicle speed for 3 - 2 downshift at sea level.

       -  FN34A(TP_REL_H) = Vehicle speed adjustment for 3 - 4 upshift at altitude.

       -  FN34PPH(TP_REL) = Minimum VS_RATEPH to allow 3 - 4 upshift.

       -  FN34S(TP_REL_H) = Vehicle speed for 3 - 4 upshift at sea level.

       -  FN43A(TP_REL_H) = Vehicle  speed  adjustment  for  4  -  3  downshift  at
          altitude.

       -  FN43S(TP_REL_H) = Vehicle speed for 4 - 3 downshift at sea level.

       -  HOT21_C = Temperature at which the hot 2-1 shift schedule  is  no  longer
          used.

       -  HOT21_S = Temperature at which the hot 2-1 shift schedule is used.

       -  NE12A = WOT RPM 1 - 2 shift point, altitude.

       -  NE12S = WOT RPM 1 - 2 shift point, sea level.

       -  NE23A = WOT RPM 2 - 3 shift point, altitude.

       -  NE23S = WOT RPM 2 - 3 shift point, sea level.

       -  NE34A = WOT RPM 3 - 4 shift point, altitude.

       -  NE34S = WOT RPM 3 - 4 shift point, sea level.











                                         21-7

                  SHIFT CONTROL, GR_DS, PRNDL = 3 OR 4 LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  IGR_DS = See above.

      Bit Flags:

       -  FLG_HOT_21 = See above.

       -  FLG_UP_NE = WOT engine RPM upshift flag; 1 -> upshift due to WOT  RPM,  0
          -> upshift due to shift curves.
















































                                         21-8

                  SHIFT CONTROL, GR_DS, PRNDL = 3 OR 4 LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: SC_GR_DS_AUTO_COM2


                        OUTPUT SHAFT SPEED SENSOR OK SHIFT LOGIC

      TOT > HOT21_S -----------------------| FLG_HOT_21 = 1
       (Transmission is hot; alter 2-1     |
        shift schedule)                    |
                                           | --- ELSE ---
                                           |
      TOT < HOT21_C -----------------------| FLG_HOT_21 = 0
                                           |
                                           | --- ELSE ---
                                           |
                                           | NO Action


      GR_CM = 1 ---------------------------|
                                           |AND -| IGR_DS = 2
      NEBART > NE12S +                     |     | FLG_UP_NE = 1
         [BP_INTR * NE12A] ----------------|     |
       (1-2 WOT RPM upshift)                     |
                                                 | --- ELSE ---
      GR_CM = 2 ---------------------------|     |
                                           |AND -| IGR_DS = 3
      NEBART > NE23S +                     |     | FLG_UP_NE = 1
         [BP_INTR * NE23A] ----------------|     |
       (2-3 WOT RPM upshift)                     |
                                                 | --- ELSE ---
      GR_CM >= 3 --------------------------|     |
                                           |     |
      NEBART > NE34S +                     |AND -| IGR_DS = 4
         [BP_INTR * NE34A] ----------------|     | FLG_UP_NE = 1
                                           |     |
      PDL = 4 -----------------------------|     |
       (3-4 WOT RPM upshift,                     |
        if PRNDL = 4)                            |
                                                 | --- ELSE ---
      GR_CM < 4 ---------------------------|     |
                                           |     |
      VSBART_RT > [FN34S + (BP_INTR *      |     |
         FN34A)] * CS_SFT_MULT ------------|     |
                                           |     |
      PDL = 4 -----------------------------|AND -| IGR_DS = 4
       (VS vs. TP_REL upshift to           |     |
        4th gear, if PRNDL = 4)            |     |
                                           |     |
      PDL <> PDL_LST ----------------|     |     |
                                     |OR --|     |
      VS_RATEPH > FN34PPH *          |           |
                    RT_NOVS ---------|           |
       (VS_RATEPH vs. TP_REL                     |
        upshift to 4th gear,                     |
        if minimum accel rate                    |
        is satisfied)                            |
                                                 | --- ELSE ---

                                (continued on next page)

                                         21-9

                  SHIFT CONTROL, GR_DS, PRNDL = 3 OR 4 LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

      GR_CM < 3 ---------------------------|     |
                                           |     |
      VSBART_RT >                          |     |
        [FN23S + (BP_INTR *                |     |
         FN23A)] * CS_SFT_MULT ------------|AND -| IGR_DS = 3
       (VS vs. TP_REL upshift to 3rd gear) |     |
                                           |     |
      PDL <> PDL_LST ----------------|     |     |
                                     |OR --|     |
      VS_RATEPH > FN23PPH *          |           |
                    RT_NOVS ---------|           |
       (VS_RATEPH vs. TP_REL                     |
        upshift to 3rd gear,                     |
        if minimum accel rate                    |
        is satisfied)                            |
                                                 | --- ELSE ---
      GR_CM < 2 ---------------------------|     |
                                           |     |
      FLG_4X4L = 1 ------------------------|     |
       (vehicle operating in 4X4L)         |AND -| IGR_DS = 2
                                           |     |
      VSBART_RT >                          |     |
        [FN12S_4X4L + (BP_INTR *           |     |
         FN12A)] * CS_SFT_MULT ------------|     |
       (VS vs. TP_REL upshift to 2nd gear)       |
                                                 | --- ELSE ---
      GR_CM < 2 ---------------------------|     |
                                           |     |
      FLG_4X4L = 0 ------------------------|     |
       (vehicle not in 4X4L)               |AND -| IGR_DS = 2
                                           |     |
      VSBART_RT >                          |     |
        [FN12S + (BP_INTR *                |     |
         FN12A)] * CS_SFT_MULT ------------|     |
       (VS vs. TP_REL upshift to 2nd gear)       |
                                                 | --- ELSE ---
      GR_CM > 1 ---------------------------|     |
                                           |     |
      FLG_4X4L = 1 ------------------------|     |
       (vehicle operating in 4X4L)         |AND -| IGR_DS = 1
                                           |     |
      VSBART_RT < [FN21S_4X4L + (BP_INTR * |     |
         FN21A)] * CS_SFT_MULT ------------|     |
       (VS vs. TP_REL downshift to 1st gear)     |
                                                 | --- ELSE ---

                                (continued on next page)











                                        21-10

                  SHIFT CONTROL, GR_DS, PRNDL = 3 OR 4 LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

      GR_CM > 1 ---------------------------|     |
                                           |     |
      FLG_4X4L = 0 ------------------------|     |
       (vehicle not in 4X4L)               |     |
                                           |     |
      FLG_HOT_21 = 1 ----------------------|     |
       (Transmission is hot; alter 2-1     |AND -| IGR_DS = 1
        shift schedule)                    |     |
                                           |     |
      VSBART_RT < [FN21S  + FN21_HOT +     |     |
        (BP_INTR * FN21A)] * CS_SFT_MULT --|     |
       (VS vs. TP_REL downshift to 1st gear)     |
                                                 | --- ELSE ---
      GR_CM > 1 ---------------------------|     |
                                           |     |
      FLG_4X4L = 0 ------------------------|     |
       (vehicle not in 4X4L)               |     |
                                           |     |
      FLG_HOT_21 = 0 ----------------------|AND -| IGR_DS = 1
                                           |     |
      VSBART_RT < [FN21S + (BP_INTR *      |     |
         FN21A)] * CS_SFT_MULT ------------|     |
       (VS vs. TP_REL downshift to 1st gear)     |
                                                 | --- ELSE ---
      GR_CM > 2 ---------------------------|     |
                                           |     |
      VSBART_RT <                          |AND -| IGR_DS = 2
         [FN32S + (BP_INTR * FN32A)] *     |     |
          CS_SFT_MULT ---------------------|     |
       (VS vs. TP_REL downshift to 2nd gear)     |
                                                 | --- ELSE ---
      GR_CM > 3 ---------------------|           |
                                     |           |
      VSBART_RT <                    |AND -|     |
         [FN43S + (BP_INTR *         |     |     |
         FN43A)] * CS_SFT_MULT ------|     |     |
       (VS vs. TP_REL downshift to         |OR --| IGR_DS = 3
        3rd gear)                          |     |
                                           |     |
      GR_CM > 3 ---------------------|     |     |
                                     |AND -|     |
      PDL = 3 -----------------------|           |
        (Manual 4-3 downshift)                   |
                                                 | --- ELSE ---
                                                 |
                                                 | IGR_DS = GR_CM












                                        21-11

                   SHIFT CONTROL, DELAY/VERIFY SHIFT LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                DELAY/VERIFY SHIFT LOGIC


      OVERVIEW

      This logic delays the commanding of the desired gears a  calibratable  amount
      of time to:

       -  Allow for the TV pressure to ramp-up prior to commanding the  shift.   TV
          is  increased  tremendously  during  a  shift.   It is necessary to start
          commanding the extra TV  prior  to  the  shift  to  overcome  the  delays
          associated with the time constant of the TV solenoid.

       -  Allow  the  RPM  to  decrease  before  commanding  a   tip-out   upshift.
          Commanding  an upshift immediately after a tip-out feels harsh, since the
          clutches will be used to slow the engine down.  Waiting a period of  time
          before commanding this shift, smoothes the shift significantly.

       -  Verify a shift.  Noise perturbations may result in incorrect gears  being
          desired  for  one  or two background loops.  Delaying the shift, verifies
          that a gear is truly desired, and that it is not just noise.


      Entering into this logic is the parameter, GR_DS, the desired gear.

      The delay logic then proceeds to delay the shift by setting the GR_DS to  its
      previous  value  until the delay timer runs out.  When the timer expires, the
      GR_DS is no longer set to its previous value, but is allowed to pass  through
      to  the  Commanded  Gear  Determination  logic and Shift Solenoid logic which
      actually processes the GR_DS into shift solenoid commands; i.e., the shift is
      commanded.

      By the time the shift is commanded, the necessary TV required for  the  shift
      will  have  been  commanded, the engine RPM will have slowed some to make the
      tip-out upshifts feel smooth, and the shift will have been verified.

      If the GR_DS changes prior to the timer  expiring,  the  timer  continues  to
      count  down.   The timer does not affect the amount of TV which is commanded,
      because GR_DS_TV will always be set to the gear in sequence, and the TV  will
      be  commanded  based  on  that  value.   Worst  case, the TV pressure will be
      unnecessarily increased for a short period  of  time  if  the  GR_DS/GR_DS_TV
      fluctuates  due  to  a  noise spike.  When the timer becomes zero, the latest
      GR_DS is passed through.

      NOTES:

      The delay timer is set to one of four values.  These are:

       -  delay to allow TV to ramp up for an upshift, and/or the delay to verify a
          gear; TMVEUP

       -  delay to allow TV to ramp up for an upshift, and/or the delay to verify a
          gear in 4X4L; TMVEUP_4X4L

       -  delay to allow TV to ramp up for a downshift, and/or the delay to  verify
          a gear; TMVEDN




                                        21-12

                   SHIFT CONTROL, DELAY/VERIFY SHIFT LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  delay for a tip-out upshift to allow the RPM decrease, TMVETOUP



























































                                        21-13

                   SHIFT CONTROL, DELAY/VERIFY SHIFT LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  GR_DS_LST = Desired gear in last background pass.

       -  IGR_DS = Unverified desired transmission gear.

       -  PDL = Current PRNDL position.

       -  PDL_LST = Last PRNDL position.

       -  TM_VER_SFT = Time to delay/verify automatic desired shift.

       -  TP_RATE = Throttle rate = TP - TPBART.

      Bit Flags:

       -  FLG_4X4L = 4X4L Flag.

       -  FLG_VE_DSGR = Delay desired gear first pass flag; 0 -> First pass through
          DELAY DESIRED GEAR, 1 -> Delay desired gear in process.

      Calibration Constants:

       -  TMVEDN = Time to delay/verify a downshift.

       -  TMVETOUP = Time to delay a tip-out upshift.

       -  TMVEUP = Time to delay/verify an upshift.

       -  TMVEUP_4X4L = Time to delay/verify an upshift in 4X4L.

       -  TO_TP_RATE = TP_RATE required to recognize a tip-out.



      OUTPUTS

      Registers:

       -  GR_DS = Desired transmission gear.

       -  TM_VER_SFT = See above.

      Bit Flags:

       -  FLG_NV_SHFT = Flag indicating if shift verification failed; 0 -> did  not
          fail verification, 1 -> failed verification.

       -  FLG_VE_DSGR = See above.

       -  FLG_TIP_OUT = Flag which indicates a tip-out upshift in progress; 0 -> no
          tip-out upshift in progress, 1 -> a tip-out upshift in progress.




                                        21-14

                   SHIFT CONTROL, DELAY/VERIFY SHIFT LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: SC_VER_AUTO_SHFT_COM2


      PDL = 3 OR 4 -----------------|
                                    |AND -| GR_DS = IGR_DS
      PDL_LST <> 3 OR 4 ------------|     |  (PDL moved to 3 or 4; allow first
                                          |   desired gear to pass through
                                          |   with no delay)
                                          | FLG_VE_DSGR = 0
                                          |
                                          | --- ELSE ---
      IGR_DS <> GR_DS_LST ----------|     |
       (shift is desired)           |     |
                                    |     |
      FLG_VE_DSGR = 1 --------------|AND -| GR_DS = GR_DS_LST
       (delay in process)           |     |  (hold original desired gear until new
                                    |     |   desired gear is verified)
      TM_VER_SFT > 0 ---------------|     |
       (timer not expired)                |
                                          | --- ELSE ---
      IGR_DS <> GR_DS_LST ----------|     |
       (shift is desired)           |     |
                                    |     |
      FLG_VE_DSGR = 1 --------------|AND -| GR_DS = IGR_DS
       (delay in process)           |     |  (new desired gear is delayed, allow it
                                    |     |   to pass through to commanded gear
      TM_VER_SFT = 0 ---------------|     |   module)
       (timer expired)                    | FLG_VE_DSGR = 0
                                          |
                                          | --- ELSE ---
      IGR_DS > GR_DS_LST -----------|     |
       (upshift is desired)         |AND -| GR_DS = GR_DS_LST
                                    |     |  (hold original desired gear until new
      FLG_VE_DSGR = 0 --------------|     |   desired gear is delayed)
       (first pass through)               | FLG_VE_DSGR = 1
                                          |  (set first pass flag)
                                          | FLG_NV_SHFT = 0
                                          |  (clear "failed verify" flag)
                                          | DO "LOAD TM_VER_SFT FOR UPSHIFTS"
                                          |  (load timer)
                                          |
                                          | --- ELSE ---

                                (continued on next page)















                                        21-15

                   SHIFT CONTROL, DELAY/VERIFY SHIFT LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

      IGR_DS < GR_DS_LST -----------|     |
       (downshift is desired)       |AND -| GR_DS = GR_DS_LST
                                    |     |  (hold original desired gear until
      FLG_VE_DSGR = 0 --------------|     |   new desired gear is delayed)
       (first pass through)               | FLG_VE_DSGR = 1
                                          |  (set first pass flag)
                                          | TM_VER_SFT = TMVEDN
                                          |  (load timer)
                                          | FLG_TIP_OUT = 0
                                          |
                                          | --- ELSE ---
      IGR_DS = GR_DS_LST -----------|     |
                                    |AND -| GR_DS = IGR_DS
      FLG_VE_DSGR = 1 --------------|     |  (pass through current desired gear)
                                          | FLG_VE_DSGR = 0
                                          | FLG_NV_SHFT = 1
                                          |  (set no shift verify, first pass flag)
                                          |
                                          | --- ELSE ---
                                          |
                                          | GR_DS = IGR_DS
                                          |  (pass through current desired gear)
                                          | FLG_VE_DSGR = 0
                                          |  (clear first pass flag)
                                          | FLG_NV_SHFT = 0



                           LOAD TM_VER_SFT FOR UPSHIFTS LOGIC

      FLG_4X4L = 1 -----------------------| TM_VER_SFT = TMVEUP_4X4L
                                          | FLG_TIP_OUT = 0
                                          |
                                          | --- ELSE ---
                                          |
      TP_RATE < TO_TP_RATE ---------------| TM_VER_SFT = TMVETOUP
                                          | FLG_TIP_OUT = 1
                                          |
                                          | --- ELSE ---
                                          |
                                          | TM_VER_SFT = TMVEUP
                                          | FLG_TIP_OUT = 0
















                                        21-16

                    SHIFT CONTROL, GR_SEQ_PNTR CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 GR_SEQ_PNTR CALCULATION


      OVERVIEW

      The GR_SEQ_PNTR calculation allows for the sequencing of  multi-step  shifts.
      For example, if GR_DS = 4 and GEAR_CUR = 1, the 1-4 shift can be accomplished
      in four different ways:  a direct 1-4 shift, a 1-2-4 shift, a 1-3-4 shift  or
      a  1-2-3-4 shift.  The particular shift sequence desired can be calibrated in
      a series of calibration parameters.  This sequence is used by the TV strategy
      to  allow  TV  pressure  to  build  up  prior  to the shift as well as by the
      commanded gear routine.

      The GR_SEQ_PNTR register contains an address, not the next gear.  The address
      pointed  to by GR_SEQ_PNTR is one of the cal parameters GR_SEQ_131, etc.,etc.
      Thus, the contents of the address pointed to by GR_SEQ_PNTR contains the next
      gear to be used in the shift sequence.











































                                        21-17

                    SHIFT CONTROL, GR_SEQ_PNTR CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Desired Shift       | Possible choices   GR_SEQ_XXX
      --------------------|----------------------------------------
         1-3              |  2-3     3-3
                          |
         1-4              |  2-3-4   3-4-4   2-4-4   4-4-4
                          |
         2-4              |  3-4     4-4
                          |
         3-1              |  2-1     1-1
                          |
         4-1              |  3-2-1   3-1-1   2-1-1   1-1-1
                          |
         4-2              |  3-2     2-2



      GR_SEQ_PNTR        | Cal Parameter            | Possible
      (pointer address)  | Description              | Choices (contents)
      -------------------|--------------------------|--------------------
       GR_SEQ_131        | first step of 1-3 shift  |  2 or 3
       GR_SEQ_132        | second step of 1-3 shift |  3
      -------------------|--------------------------|--------------------
       GR_SEQ_141        | first step of 1-4 shift  |  2 or 3 or 4
       GR_SEQ_142        | second step of 1-4 shift |  3 or 4
       GR_SEQ_143        | third step of 1-4 shift  |  4
      -------------------|--------------------------|--------------------
       GR_SEQ_241        | first step of 2-4 shift  |  3 or 4
       GR_SEQ_242        | second step of 2-4 shift |  4
      -------------------|--------------------------|--------------------
       GR_SEQ_311        | first step of 3-1 shift  |  2 or 1
       GR_SEQ_312        | second step of 3-1 shift |  1
      -------------------|--------------------------|--------------------
       GR_SEQ_411        | first step of 4-1 shift  |  3 or 2 or 1
       GR_SEQ_412        | second step of 4-1 shift |  2 or 1
       GR_SEQ_413        | third step of 4-1 shift  |  1
      -------------------|--------------------------|--------------------
       GR_SEQ_421        | first step of 4-2 shift  |  3 or 2
       GR_SEQ_422        | second step of 4-2 shift |  2
      -------------------|--------------------------|--------------------





















                                        21-18

                    SHIFT CONTROL, GR_SEQ_PNTR CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  GEAR_CUR = Current transmission gear.

       -  GR_CM = Commanded gear for shift solenoids.

       -  GR_DS = Desired transmission gear.

       -  GR_DS_LST = Desired gear in last background pass.

       -  IGR_DS = Unverified desired transmission gear.

       -  PDL = Current PRNDL position.

       -  PDL_LST = Last PRNDL position.

      Bit Flags:

       -  FLG_SFT_IN = Shift in progress flag.

      Calibration Constants:

       -  GR_SEQ_XXX = See Overview section for descriptions.



      OUTPUTS

      Registers:

       -  GR_SEQ_PNTR = Commanded gear sequence pointer.

       -  GR_DS_TV = Gear to be used for dynamic TV calculation.























                                        21-19

                    SHIFT CONTROL, GR_SEQ_PNTR CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: SC_GR_SEQ_PNTR_COM4


      FLG_SFT_IN = 0 --------------------| gr_ds_temp = IGR_DS
       (no shift in progress)            |  (use unverified desired gear)
                                         |
                                         | --- ELSE ---
                                         |
                                         | gr_ds_temp = GR_DS
                                         |  (use verified desired gear)


      TM_SEQ_SFT > 0 --------------------| Exit GR_SEQ_PNTR module
                                         |
                                         | --- ELSE ---
                                         |
      gr_ds_temp = GEAR_CUR -------------| GR_DS_TV = GEAR_CUR
                                         | GR_SEQ_PNTR = address of GR_DS_TV
                                         |
                                         | --- ELSE ---
                                         |
      gr_ds_temp - GEAR_CUR > 1 ---------| GR_SEQ_PNTR = address of cal
       (upshift, multi step shift)       |  parameter  GR_SEQ_131 if 1-3 shift
                                         |             GR_SEQ-141 if 1-4 shift
                                         |             GR_SEQ_241 if 2-4 shift
                                         |  (first step of a multi step shift)
                                         | GR_DS_TV = contents of GR_SEQ_PNTR
                                         |  (pass next gear on to TV routine)
                                         |
                                         | --- ELSE ---
                                         |
      gr_ds_temp - GEAR_CUR = 1 ---------| GR_DS_TV = GR_CM + 1
       (upshift, single step shift)      | GR_SEQ_PNTR = address of GR_DS_TV
                                         |
                                         | --- ELSE ---
                                         |
      gr_ds_temp - GEAR_CUR < -1 --------| GR_SEQ_PNTR = address of cal
       (downshift, multi step shift)     |  parameter  GR_SEQ_311 if 3-1 shift
                                         |             GR_SEQ_411 if 4-1 shift
                                         |             GR_SEQ_421 if 4-2 shift
                                         |  (first step of a multi step shift)
                                         | GR_DS_TV = contents of GR_SEQ_PNTR
                                         |  (pass next gear on to TV routine)
                                         |
                                         | --- ELSE ---
                                         |
      gr_ds_temp - GEAR_CUR = -1 --------| GR_DS_TV = GR_CM - 1
       (downshift, single step shift)    | GR_SEQ_PNTR = address of GR_DS_TV











                                        21-20

           SHIFT CONTROL, PRNDL BASED COMMANDED GEAR DETERMINATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                        PRNDL BASED COMMANDED GEAR DETERMINATION


      OVERVIEW

      The commanded transmission gear is calculated based on PRNDL  position.   The
      logic  looks  at  the  current  gear  and the desired gear to determine if an
      upshift or a downshift is required and then  commands  the  next  appropriate
      gear in the sequence.

      In the drive or overdrive position, the shift sequence is controlled  by  the
      calibration  pointed to by the GR_SEQ_PNTR register.  The only restriction is
      that downshifts are done only after the converter clutch has unlocked.

      In the manual 2 or 1 position, the downshift sequence is controlled solely by
      the  commanded  gear  routine.   The  GR_SEQ_PNTR  is  not  used  for  manual
      downshifts.



      The main outputs of the commanded gear routine are:

       -  GR_CM, commanded gear which reflects the actual shift solenoid states

       -  GR_OLD, GEAR_OLD, RT_GR_OLD, last gear the transmission was in

       -  FLG_FRST_CM, global flag to indicate a shift is commanded this background
          pass
































                                        21-21

           SHIFT CONTROL, PRNDL BASED COMMANDED GEAR DETERMINATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  GEAR_CUR = Current transmission gear (global register).

       -  GR_CM = Commanded gear for shift solenoids.

       -  GR_CM_LST = Commanded gear in last background pass.

       -  GR_DS = Desired transmission gear.

       -  GR_OLD = Last commanded gear.

       -  PDL = Current PRNDL position.

       -  RT_GR_CUR = Current transmission gear ratio.

       -  SLIP_ABS = Absolute value of slip.

       -  TM_UNLK_WDOG = Watch dog time to  force  downshift  if  SLIP_ABS  is  not
          greater than SLIP_A_UNLK.

      Bit Flags:

       -  FLG_FRST_CM = First time a shift is commanded flag; 1 -> shift  commanded
          this background pass, 0 -> no shift commanded this background pass.

       -  FLG_FRST_DS = First time a shift is desired flag; 0 -> no  shift  desired
          this BG pass, 1 -> shift desired this BG pass.

       -  FLG_SFT_IN = Shift in progress flag.

      Calibration Constants:

       -  GRMSFT = Gear commanded for manual shifting.

       -  SLIP_A_UNLK = Slip value above which converter is  sufficiently  unlocked
          to allow downshift.

       -  SW_MSF = Switch to select GR_CM manually; 1 -> manual gear selection, NOT
          1 -> automatic gear selection.

       -  TMDNUN = Time for converter  clutch  to  unlock  prior  to  commanding  a
          downshift.













                                        21-22

           SHIFT CONTROL, PRNDL BASED COMMANDED GEAR DETERMINATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  GEAR_OLD = Last commanded transmission gear (global register).

       -  GR_CM = See above.

       -  GR_CM_KAM = KAM value equivalent of GR_CM for reinit protection.

       -  GR_CM_LST = See above.

       -  GR_OLD = See above.

       -  RT_GR_OLD = Last gear transmission gear ratio.

       -  TM_UNLK_WDOG = See above.

      Bit Flags:

       -  FLG_FRST_CM = See above.

       -  FLG_MAN42 = Identifies a Manual 4-2 pull-in.

       -  FLG_UNLK_DS = Converter unlock in progress flag; 1 -> unlock in progress.

       -  FLG_SF_AUTO = Automatic upshift/downshift  flag;  1  ->  automatic  shift
          (PRNDL = 3 or 4), 0 -> manual shift (PRNDL = 2 or 1).
































                                        21-23

           SHIFT CONTROL, PRNDL BASED COMMANDED GEAR DETERMINATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: SC_CM_GR_DETR_COM8


      FLG_FRST_DS = 1 ------------------|
                                        |
      GR_DS < GR_CM --------------------|AND -| TM_UNLK_WDOG = TMDNUN
                                        |     |  (maximum time to delay downshift
      PDL = 3 OR 4 ---------------------|     |   due to low converter slip)



      TM_UNLK_WDOG <> 0 ----------------|
                                        |
      SLIP_ABS < SLIP_A_UNLK -----------|AND -| FLG_UNLK_DS = 1
                                        |     | (delay downshift; low converter
      GR_DS < GR_CM --------------------|     |  slip)
                                              |
                                              | --- ELSE ---
                                              |
                                              | FLG_UNLK_DS = 0
                                              | TM_UNLK_WDOG = 0



      always ---------------------------------| GR_CM_LST = GR_CM
                                              |  (update last pass current gear)


      SW_MSF = 1 -----------------------------| GR_CM = GRMSFT
       (manual shift selection)               |
                                              | --- ELSE ---
                                              |
      PDL = 1 --------------------------------| Do: "GR_CM, PRNDL = 1" LOGIC
                                              |
                                              | --- ELSE ---  
                                              |
      PDL = 2 --------------------------------| Do: "GR_CM, PRNDL = 2" LOGIC
                                              |
                                              | --- ELSE ---  
      PDL = 3 OR 4 ---------------------|     |
                                        |AND -| Do: "GR_CM, PRNDL = 3 OR 4 
      GR_DS > GR_CM --------------------|     |      UPSHIFT" LOGIC
                                              |
                                              | --- ELSE ---  
      PDL = 3 OR 4 ---------------------|     |
                                        |AND -| Do: "GR_CM, PRNDL = 3 OR 4
      GR_DS < GR_CM --------------------|     |      DOWNSHIFT" LOGIC
                                              |
                                              | --- ELSE ---  
      PDL = 5 --------------------------|     |
       (neutral)                        |     |
                                        |     |
      PDL = 6 --------------------------|OR --| GR_CM = 1
       (reverse)                        |      
                                        |
      PDL = 7 --------------------------|
       (park)


                                        21-24

           SHIFT CONTROL, PRNDL BASED COMMANDED GEAR DETERMINATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      always ---------------------------------| GR_CM_KAM = GR_CM


      GR_CM_LST <> GR_CM ---------------------| FLG_FRST_CM = 1
       (a shift has been commanded)           |  (new commanded gear for
                                              |   this program pass only)
                                              | GR_OLD = GR_CM_LST
                                              |  (update old gear)
                                              | GEAR_OLD = GEAR_CUR
                                              | RT_GR_OLD = RT_GR_CUR
                                              |
                                              |  --- ELSE --- 
                                              | 
                                              | FLG_FRST_CM = 0
                                              |  (no shift this program pass)


      FLG_FRST_CM = 1 ------------------|
                                        |
      PDL <> 3 OR 4 --------------|     |AND -| FLG_SF_AUTO = 0
                                  |     |     |  (manual shift)
      PDL = 3 --------------|     |OR --|     | 
                            |     |           |
      GR_OLD = 4 -----------|AND -|           |
                            |                 |  
      GR_CM = 3 ------------|                 |
                                              | --- ELSE ---
                                              |
      FLG_FRST_CM = 1 ------------------------| FLG_SF_AUTO = 1 
                                              |  (automatic shift)


      FLG_FRST_CM = 1 -------------|
                                   |
      PDL = 2 ---------------------|AND -| 
                                   |     | 
      GR_CM_LST = 4 ---------------|     |OR -| FLG_MAN42 = 1
                                         |    | (Manual 4-2 pull-in flag)
      FLG_MAN42 = 1 ---------------|     |    |
                                   |AND -|    |
      FLG_SFT_IN = 1 --------------|          |
                                              | --- ELSE ---
                                              |
                                              | FLG_MAN42 = 0
















                                        21-25

                    SHIFT CONTROL, GR_CM, PRNDL = 1 LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 GR_CM, PRNDL = 1 LOGIC


      OVERVIEW

      This logic determines the commanded gear when PRNDL = 1.


      DEFINITIONS

      INPUTS

      Registers:

       -  GR_CM = Current transmission gear.

       -  PDL_LST = Manual lever position previous background pass.

       -  RT_NOVS = Ratio of actual N/V to base N/V in KAM.

       -  TM_SEQ_SFT = Shift sequencing timer.

       -  VSBART_RT = Filtered vehicle speed adjusted for RT_NOVS for transmission.

      Bit Flags:

       -  OSFMFLG = Output shaft speed sensor FMEM flag.

      Calibration Constants:

       -  TMSQ21P1 = Minimum time in 2nd gear prior to 3 - 1 shift, PRNDL = 1.

       -  VS21PI = Maximum vehicle speed for 2 - 1 pull in.



      OUTPUTS

      Registers:

       -  GR_CM = See above.

       -  GR_DS_TV = Gear to be used for dynamic TV calculation.

       -  TM_SEQ_SFT = See above.















                                        21-26

                    SHIFT CONTROL, GR_CM, PRNDL = 1 LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: SC_CM_GR_MAN1_COM5


      GR_CM >= 3 ------------------------| GR_CM = 2
                                         | TM_SEQ_SFT = TMSQ21P1
                                         | GR_DS_TV = 2
                                         |
                                         | --- ELSE --- 
      GR_CM = 2 -------------|           |
                             |OR --|     |
      PDL_LST = 5 -----------|     |     |
                                   |AND -| GR_CM = 2
      TM_SEQ_SFT > 0 --------|     |     | GR_DS_TV = 2
                             |     |     |
      OSFMFLG = 1 -----------|     |     |
       (failed output shaft  |OR --|     |
        speed sensor)        |           |
                             |           |
      VSBART_RT > VS21PI ----|           |
       (above 1st gear pull-in)          |
                                         | --- ELSE ---
                                         |
                                         | GR_CM = 1
                                         | GR_DS_TV = 1



































                                        21-27

                    SHIFT CONTROL, GR_CM, PRNDL = 2 LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 GR_CM, PRNDL = 2 LOGIC


      OVERVIEW

      This module determines the commanded gear when PRNDL = 2.



      DEFINITIONS

      INPUTS

      Registers:

       -  GR_CM = Current transmission gear.

       -  VSBART_RT = Filtered vehicle speed adjusted for RT_NOVS for transmission.

       -  PDL_LST = PRNDL Position Last Background Pass.

      Calibration Constants:

       -  SW_SEQ_MAN2 = Switch used to  allow  or  disallow  a  direct  4-2  manual
          pull-in;  1  ->  sequence  through 3rd gear on a manaul 4-2 pull-in, 0 ->
          direct 4-2 pull-in.

       -  TMSQ32P2 = Minimum time in third gear prior to 3-2, PRNDL = 2, seconds.

       -  VS32P2 = 3-2 VS pull-in when PDL = 2.



      OUTPUTS

      Registers:

       -  GR_CM = See above.

       -  GR_DS_TV = Gear to be used for dynamic TV calculation.




















                                        21-28

                    SHIFT CONTROL, GR_CM, PRNDL = 2 LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: SC_CM_GR_MAN2_COM5


      GR_CM = 4 ------------------------|     
                                        |AND -| GR_CM = 3
      SW_SEQ_MAN2 = 1 ------------------|     | GR_DS_TV = 3
      (sequence through 3rd gear)             | TM_SEQ_SFT = TMSQ32P2
                                              | (trans in 2nd, no engine
                                              |  braking, set timer)
                                              |
                                              | --- ELSE ---
      GR_CM = 3 ------------------|           |
                                  |           |
      PDL_LST = 5 ----------------|OR --|     |
                                  |     |     |
      SW_SEQ_MAN2 = 0 ------------|     |     |
      (direct 4-2; use vehicle          |AND -| GR_CM = 3              
       speed threshold only)            |     | GR_DS_TV = 3
                                        |     |
      TM_SEQ_SFT > 0 -------------|     |     |
                                  |OR --|     |     
      VSBART_RT > VS32P2 ---------|           |
                                              | --- ELSE ---
                                              |
                                              | GR_CM = 2
                                              | GR_DS_TV = 2

































                                        21-29

              SHIFT CONTROL, COMMANDED GEAR, AUTO UPSHIFT LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           COMMANDED GEAR, AUTO UPSHIFT LOGIC


      OVERVIEW

      This module determines the commanded gear on an upshift when PRNDL = 3 or  4.
      The   sequence   for  multi-step  shifts  is  calibratable  (see  GR_SEQ_PNTR
      calculation).  The time spent in intermediate gears on a multi-step shift  is
      calibrated in this module.



      DEFINITIONS

      INPUTS

      Registers:

       -  DELTA_RATIO = Delta Shift Ratio change since command of shift.

       -  GR_CM = Commanded gear for shift solenoids.

       -  GR_DS_TV = Gear to be used for dynamic TV calculation.

       -  GR_SEQ_PNTR = Address of next gear in the shift sequence.

       -  TM_DEL_SFT = Time to delay a shift to allow TV pressure to build,

       -  TM_SEQ_SFT = Shift sequencing timer.

      Bit Flags:

       -  FLG_4X4L = 4X4L Flag.

       -  FLG_DE_CMGR = First pass through shift delay timer.

       -  FLG_FRST_DS = First time a shift is desired flag; 0 -> no  shift  desired
          this BG pass, 1 -> shift desired this BG pass.

      Calibration Constants:

       -  DRC23 = DELTA_RATIO when 2-3 is judged complete.

       -  DRC34 = DELTA_RATIO when 3-4 is judged complete.

       -  TMDELUP = Time to delay upshift for TV buildup, sec.

       -  TMSQ23P4 = Minimum time in second gear prior to 2-3 PRNDL = 3 or 4, sec.

       -  TMSQ34P4 = Minimum time in third gear prior to 3-4 PRNDL = 3 or 4, sec.










                                        21-30

              SHIFT CONTROL, COMMANDED GEAR, AUTO UPSHIFT LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  GR_CM = See above.

       -  GR_DS_TV = See above.

       -  TM_DEL_SFT = See above.

       -  TM_SEQ_SFT = See above.

      Bit Flags:

       -  FLG_DE_CMGR = See above.













































                                        21-31

              SHIFT CONTROL, COMMANDED GEAR, AUTO UPSHIFT LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: SC_CM_GR_AUTO_UP_COM7


      always ------------------------------| If GR_SEQ_PNTR is not pointing at a
                                           |  GR_SEQ_xxx term, then it is set to
                                           |  the address of GR_DS_TV.


      TM_SEQ_SFT > 0 ----------|           
                               |AND -|
      GR_CM < GR_OLD ----------|     |
      (downshift)                    |
                                     |
      TM_SEQ_SFT > 0 ----------|     |
                               |     |
      GR_CM = 2 ---------------|AND -|OR --| TM_SEQ_SFT = 0
                               |     |     |  (Override gear sequence
      DELTA_RATIO > DRC23 -----|     |     |   timer. Ratio change has
                                     |     |   been completed.)
      TM_SEQ_SFT > 0 ----------|     |     |
                               |     |     |
      GR_CM = 3 ---------------|AND -|     |
                               |           |
      DELTA_RATIO > DRC34 -----|           |
                                           | --- ELSE ---
      FLG_DE_CMGR = 1 ---------|           |
                               |AND -|     |
      TM_DEL_SFT > 0 ----------|     |OR --| no action
                                     |     |
      TM_SEQ_SFT > 0 ----------------|     |
                                           | --- ELSE ---
      FLG_DE_CMGR = 1 ---------|           |  
                               |AND -|     |
      TM_DEL_SFT = 0 ----------|     |     |  
                                     |     |
      FLG_FRST_DS = 1 ---------------|OR --| FLG_DE_CMGR = 0 
                                     |     | GR_DS_TV = contents of address
      TMDELUP = 0 -------------------|     |  pointed to by GR_SEQ_PNTR    
       (no delay desired)                  | GR_CM = GR_DS_TV              
                                           | Increment GR_SEQ_PNTR         
                                           | Do: "UPSHIFT DELAY" logic     
                                           |
                                           | --- ELSE ---
                                           |
      FLG_DE_CMGR = 0 ---------------------| FLG_DE_CMGR = 1
                                           | TM_DEL_SFT = TMDELUP
                                           | GR_DS_TV = contents of address
                                           |  pointed to by GR_SEQ_PNTR
                                           |  (first pass through shift sequence;
                                           |   don't command new gear yet, allow
                                           |   TV pressure to ramp up)








                                        21-32

              SHIFT CONTROL, COMMANDED GEAR, AUTO UPSHIFT LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  "UPSHIFT DELAY" LOGIC


      FLG_4X4L = 1 ------------------------| TM_SEQ_SFT = 0
                                           | (no sequence time required in
                                           |  4X4L)
                                           |
                                           | --- ELSE ---
                                           |
      GR_CM = 2 ---------------------------| TM_SEQ_SFT = TMSQ23P4
       (upshift to 2nd gear)               |
                                           | --- ELSE ---
                                           |
      GR_CM = 3 ---------------------------| TM_SEQ_SFT = TMSQ34P4
       (upshift to 3rd gear)               |
                                           | --- ELSE ---
                                           |
                                           | TM_SEQ_SFT = 0 
                                           |  (no sequence time required)









































                                        21-33

            SHIFT CONTROL, GR_CM, PRNDL = 3 OR 4, DOWNSHIFT LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                         GR_CM, PRNDL = 3 OR 4, DOWNSHIFT LOGIC


      OVERVIEW

      This module determines the commanded gear on an downshift when PRNDL =  3  or
      4.   The  sequence  for  multi-step  shifts  is calibratable (see GR_SEQ_PNTR
      calculation).  The time spent in intermediate gears on a multi-step shift  is
      calibrated in this module.



      DEFINITIONS

      INPUTS

      Registers:

       -  DELTA_RATIO = Delta Shift Ratio change since command of shift.

       -  GR_CM = Commanded gear for shift solenoids.

       -  GR_DS_TV = Gear to be used for dynamic TV calculation.

       -  GR_SEQ_PNTR = Address of next gear in the shift sequence.

       -  TM_DEL_SFT = Time to delay a shift to allow TV pressure to build.

       -  TM_SEQ_SFT = Shift sequencing timer.

       -  VSBART_RT = Filtered vehicle speed, adjusted for N/V (mph).

      Bit Flags:

       -  FLG_DE_CMGR = First pass through shift delay timer.

       -  FLG_FRST_DS = First time a shift is desired flag; 0 -> no  shift  desired
          this BG pass, 1 -> shift desired this BG pass.

       -  FLG_UNLK_DS = Converter unlock in progress flag.

      Calibration Constants:

       -  DRC21 = DELTA_RATIO when 2-1 is judged complete.

       -  FNDRC32(VSBART_RT) = DELTA_RATIO when 3-2 is judged complete.

       -  TMDELDN = Time to delay downshift to allow TV pressure to build.

       -  TMSQ21P4 = Minimum time in 2nd gear prior to a 2-1 shift, PRNDL = 3 or 4.

       -  TMSQ32P4 = Minimum time in 3rd gear prior to a 3-2 shift, PRNDL = 3 or 4.








                                        21-34

            SHIFT CONTROL, GR_CM, PRNDL = 3 OR 4, DOWNSHIFT LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  GR_CM = See above.

       -  GR_DS_TV = See above.

       -  TM_DEL_SFT = See above.

       -  TM_SEQ_SFT = See above.

      Bit Flags:

       -  FLG_DE_CMGR = See above.













































                                        21-35

            SHIFT CONTROL, GR_CM, PRNDL = 3 OR 4, DOWNSHIFT LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: SC_CM_GR_AUTO_DWN_COM7


      always ------------------------------| If GR_SEQ_PNTR is not pointing at a
                                           |  GR_SEQ_xxx term, then it is set to
                                           |  the address of GR_DS_TV.


      TM_SEQ_SFT > 0 ----------|      
                               |AND -|
      GR_CM > GR_OLD ----------|     |
      (upshift)                      |
                                     |
      TM_SEQ_SFT > 0 ----------|     |
                               |     |
      GR_CM = 3 ---------------|AND -|OR --| TM_SEQ_SFT = 0
                               |     |     |  (Override gear sequence
      DELTA_RATIO >            |     |     |   timer. Ratio change has
           FNDRC32(VSBART_RT) -|     |     |   been completed.)
                                     |     |
      TM_SEQ_SFT > 0 ----------|     |     |
                               |     |     |
      GR_CM = 2 ---------------|AND -|     |
                               |           |
      DELTA_RATIO > DRC21 -----|           |
                                           | --- ELSE ---
      FLG_DE_CMGR = 1 ---------|           |
                               |AND -|     |
      TM_DEL_SFT > 0 ----------|     |     |
                                     |     |
      TM_SEQ_SFT > 0 ----------------|OR --| no action
                                     |     |
      FLG_UNLK_DS = 1 ---------------|     |
                                           | --- ELSE ---
      FLG_DE_CMGR = 1 ---------|           | 
                               |AND -|     |
      TM_DEL_SFT = 0 ----------|     |     | 
                                     |OR --| FLG_DE_CMGR = 0 
      FLG_FRST_DS = 1 ---------------|     | GR_DS_TV = contents of address   
                                     |     |  pointed to by GR_SEQ_PNTR
      TMDELDN = 0 -------------------|     | GR_CM = GR_DS_TV                 
       (no delay desired)                  | Increment GR_SEQ_PNTR            
                                           | Do: "DOWNSHIFT DELAY" logic      
                                           |
                                           | --- ELSE ---
                                           |
      FLG_DE_CMGR = 0 ---------------------| FLG_DE_CMGR = 1
                                           | TM_DEL_SFT = TMDELDN
                                           | GR_DS_TV = contents of address
                                           |  pointed to by GR_SEQ_PNTR
                                           |  (first pass through shift sequence;
                                           |   don't command new gear yet, allow
                                           |   TV pressure to ramp up)






                                        21-36

            SHIFT CONTROL, GR_CM, PRNDL = 3 OR 4, DOWNSHIFT LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 "DOWNSHIFT DELAY" LOGIC


      GR_CM = 3 ---------------------------| TM_SEQ_SFT = TMSQ32P4
       (downshift to 3rd gear)             |
                                           | --- ELSE ---
                                           |
      GR_CM = 2 ---------------------------| TM_SEQ_SFT = TMSQ21P4
       (downshift to 2nd gear)             |
                                           | --- ELSE ---
                                           |
                                           | TM_SEQ_SFT = 0
                                           |  (no sequence time required)















































                                        21-37

                 SHIFT CONTROL, LOAD SHIFT IN PROGRESS TIMER - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              LOAD SHIFT IN PROGRESS TIMER


      OVERVIEW

      The shift in progress timer (TM_SFT_IN) is a  down-counting  timer  which  is
      used  in  many  places in the strategy to determine that a shift is currently
      taking place.  When the timer has a value of 0, no shift is taking place.   A
      worst  case  time is loaded into the timer at the start of a shift.  The only
      exception is a power-off manual  downshift.   Different  default  values  are
      provided for upshifts, downshifts, power on, and power off.


      DEFINITIONS

      INPUTS

      Registers:

       -  GR_CM = Commanded gear for shift solenoids.

       -  GR_OLD = Last commanded gear.

       -  TM_SFT_IN = Time during which shift is in progress.

       -  TM_VER_SFT = Time to delay/verify automatic desired shift.

      Bit Flags:

       -  FLG_FRST_CM = First time a shift is commanded flag:  1 -> shift commanded
          this background pass; 0 -> no shift commanded this background pass.

       -  FLG_PWR = Power mode flag:  1 -> power on mode; 0 -> power off mode.

       -  FLG_SF_AUTO = Automatic upshift/downshift flag:   1  ->  automatic  shift
          (PRNDL = 3 or 4); 0 -> manual shift (PRNDL = 2 or 1).

       -  FLG_SFT_MDN = Power off manual downshift flag:  1  ->  power  off  manual
          downshift in progress; 0 -> power off manual downshift not in progress.

       -  FLG_4X4L = 4X4L input flag.  1 -> 4X4L activated.



















                                        21-38

                 SHIFT CONTROL, LOAD SHIFT IN PROGRESS TIMER - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  TCD43AOF = Time to complete 4/3 downshift, automatic, power off.

       -  TCD43ON = Time to complete 4/3 downshift, power on.

       -  TCDNAF = Time to complete auto downshift, power off (all except 4/3).

       -  TCDNMF = Time to complete manual downshift, power off.

       -  TCDNON = Time to complete downshift, power on (all except 4/3).

       -  TCUPOF = Time to complete upshift, power off.

       -  TCUPOF_4X4L = Timer to complete power off upshift in 4X4L.

       -  TCUPON = Time to complete upshift, power on.

       -  TCUPON_4X4L = Timer to complete power on upshift in 4X4L.



      OUTPUTS

      Registers:

       -  TM_SFT_IN = See above.

      Bit Flags:

       -  FLG_SF_AUTO = See above.

       -  FLG_SFT_IN = Shift in progress flag; 0 -> no  shift  in  progress,  1  ->
          shift in progress.

       -  FLG_SFT_MDN = See above.

       -  FLG_TIP_OUT = 0 -> no tip-out upshift in progress; 1 -> a tip-out upshift
          in progress.

       -  FLG_UP_NE = RPM based upshift flag.



















                                        21-39

                 SHIFT CONTROL, LOAD SHIFT IN PROGRESS TIMER - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: SC_TIMER_COM2


      FLG_FRST_CM = 1 ------------------|     
       (shift has been commanded)       |     
                                        |     
      GR_CM > GR_OLD -------------------|
       (upshift)                        |AND -| TM_SFT_IN = TCUPON_4X4L
                                        |     |  (time to complete upshift,
      FLG_PWR = 1 ----------------------|     |   power on, 4X4L)
       (power on)                       |     | FLG_SFT_MDN = 0
                                        |     |  (not power off manual downshift)
      FLG_4X4L = 1 ---------------------|     |
                                              | 
                                              | --- ELSE ---
      FLG_FRST_CM = 1 ------------------|     |
       (shift has been commanded)       |     |
                                        |     |
      GR_CM > GR_OLD -------------------|AND -| TM_SFT_IN = TCUPON
       (upshift)                        |     |  (time to complete upshift,
                                        |     |   power on)
      FLG_PWR = 1 ----------------------|     | FLG_SFT_MDN = 0
       (power on)                             |  (not power off manual downshift)
                                              | 
                                              | --- ELSE ---
      FLG_FRST_CM = 1 ------------------|     |
       (shift has been commanded)       |     |
                                        |     | 
      GR_CM > GR_OLD -------------------|     |
       (upshift)                        |AND -| TM_SFT_IN = TCUPOF_4X4L
                                        |     |  (time to complete
      FLG_PWR = 0 ----------------------|     |   upshift, power off, 4X4L)
       (power off)                      |     | FLG_SFT_MDN = 0
                                        |     |
      FLG_4X4L = 1 ---------------------|     |
                                              |
                                              | --- ELSE ---
      FLG_FRST_CM = 1 ------------------|     |
       (shift has been commanded)       |     |
                                        |     | 
      GR_CM > GR_OLD -------------------|AND -| TM_SFT_IN = TCUPOF
       (upshift)                        |     |  (time to complete
                                        |     |   upshift, power off)
      FLG_PWR = 0 ----------------------|     | FLG_SFT_MDN = 0
       (power off)                            |
                                              | --- ELSE ---

                                (continued on next page)











                                        21-40

                 SHIFT CONTROL, LOAD SHIFT IN PROGRESS TIMER - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

      FLG_FRST_CM = 1 ------------------|     |
       (shift has been commanded)       |     |
                                        |     |
      GR_OLD = 4 -----------------------|AND -| TM_SFT_IN = TCD43ON
                                        |     |  (time to complete 4/3 downshift,
      GR_CM = 3 ------------------------|     |   power on)
                                        |     | FLG_SFT_MDN = 0
      FLG_PWR = 1 ----------------------|     |
       (power on)                             |
                                              | --- ELSE ---
      FLG_FRST_CM = 1 ------------------|     |
       (shift has been commanded)       |     | 
                                        |     |
      GR_OLD = 4 -----------------------|     |
                                        |     |
      GR_CM = 3 ------------------------|AND -| TM_SFT_IN = TCD43AOF
                                        |     |  (time to complete 4/3 downshift,
      FLG_PWR = 0 ----------------------|     |   auto, power off)
       (power off)                      |     | FLG_SFT_MDN = 0
                                        |     |
      FLG_SF_AUTO = 1 ------------------|     |
       (automatic shift)                      |
                                              | --- ELSE --- 
      FLG_FRST_CM = 1 ------------------|     | 
       (shift has been commanded)       |     |
                                        |     | 
      GR_CM < GR_OLD -------------------|AND -| TM_SFT_IN = TCDNON
       (downshift)                      |     |  (time to complete downshift,
                                        |     |   power on)
      FLG_PWR = 1 ----------------------|     | FLG_SFT_MDN = 0
       (power on)                             | 
                                              | --- ELSE ---
      FLG_FRST_CM = 1 ------------------|     |
       (shift has been commanded)       |     | 
                                        |     | 
      GR_CM < GR_OLD -------------------|     | 
       (downshift)                      |     | 
                                        |AND -| TM_SFT_IN = TCDNAF
      FLG_PWR = 0 ----------------------|     |  (time to complete downshift,
       (power off)                      |     |   auto, power off)
                                        |     | FLG_SFT_MDN = 0
      FLG_SF_AUTO = 1 ------------------|     | 
       (automatic shift)                      | 
                                              | --- ELSE ---

                                (continued on next page)












                                        21-41

                 SHIFT CONTROL, LOAD SHIFT IN PROGRESS TIMER - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

      FLG_FRST_CM = 1 ------------------|     |
       (shift has been commanded)       |     | 
                                        |     | 
      GR_CM < GR_OLD -------------------|     | 
       (downshift)                      |     | TM_SFT_IN = TCDNMF
                                        |AND -|  (time to complete downshift, 
      FLG_PWR = 0 ----------------------|     |   manual, power off)
       (power off)                      |     | FLG_SFT_MDN = 1
                                        |     |  (manual power off downshift
      FLG_SF_AUTO = 0 ------------------|     |   in progress)
       (manual shift)                         | 
                                              | 
                                              | --- ELSE ---
      FLG_SFT_MDN = 1 ------------------|     |
       (manual power off downshift      |     |
        in progress)                    |AND -| TM_SFT_IN = TCDNON
                                        |     |  (reset timer to power on value
      FLG_PWR = 1 ----------------------|     |   if power mode changes in the
       (suddenly becomes power on)            |   middle of a downshift)
                                              | FLG_SFT_MDN = 0
                                              |  (clear manual downshift flag)


      TM_SFT_IN = 0 --------------------------| FLG_SFT_MDN = 0
       (timer expired)                        |  (manual downshift is complete)
                                              | FLG_SF_AUTO = 0
                                              |  (clear auto shift flag)
                                              | FLG_SFT_IN = 0
                                              |  (no shift in progress) 
                                              | FLG_UP_NE = 0
                                              |
                                              | --- ELSE --- 
                                              |
                                              | FLG_SFT_IN = 1
                                              |  (shift in progress)


      TM_SFT_IN = 0 --------------------|
       (no shift in progress)           |AND -| FLG_TIP_OUT = 0
                                        |     |  (reset tip-out flag)
      TM_VER_SFT = 0 -------------------|
       (no delay shift in progress)
















                                        21-42

                SHIFT CONTROL, DETERMINE SHIFT SOLENOID STATES - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             DETERMINE SHIFT SOLENOID STATES


      OVERVIEW

           The shift solenoid state logic  configures  the  shift  solenoid  output
      states based on the commanded gear (GR_CM).

           The main outputs of  the  shift  solenoid  routine,  besides  the  shift
      solenoid states are:

       -  GEAR_CUR, global gear indicator which reflects only the transmission gear
          ratio,  not any transmission specific combination of engine braking bands
          or clutches;

       -  RT_GR_CUR, current transmission gear ratio.



      DEFINITIONS

      INPUTS

      Registers:

       -  CYCCTR = Cold shift solenoid cycling counter.

       -  GR_CM = Commanded gear for shift solenoids.

       -  PDL = Current PRNDL position.

      Bit Flags:

       -  FLG_FRST_TV = Start-up TV pressure flag; 0 -> do start-up TV logic, 1  ->
          do not do start-up TV logic.

       -  FLG_TVENG_CD = Flag which indicates cold temperature for engagement TV; 0
          -> don't use TVEMAX in engagement TV; 1 -> use TVEMAX in engagement TV.

       -  FLG_TVENG_MD = Flag which indicates moderate temperature  for  engagement
          TV; 0 -> don't use TVEMOD in engagement TV; 1 -> use TVEMOD in engagement
          TV.

       -  UNDSP = Run/Underspeed flag; 1 -> Underspeed or Crank, 0 = Run.

      Calibration Constants:

       -  CLDCTM = Cold shift solenoid cycle time in background loops.

       -  GRRAT1 = First gear ratio.

       -  GRRAT2 = Second gear ratio.

       -  GRRAT3 = Third gear ratio.

       -  GRRAT4 = Fourth gear ratio.




                                        21-43

                SHIFT CONTROL, DETERMINE SHIFT SOLENOID STATES - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  CYCCTR = See above.

       -  GEAR_CUR = Current transmission gear (global register).

       -  RT_GR_CUR = Current transmission gear ratio.

      Bit Flags:

       -  FLG_HS_32DS = 1 -> high speed 3-2 downshift control repeater enabled.

       -  FLG_SS_1 = Shift solenoid 1 output state; 1 -> SS1 energized,  0  ->  SS1
          de-energized.

       -  FLG_SS_2 = Shift solenoid 2 output state; 1 -> SS2 energized,  0  ->  SS2
          de-energized.









































                                        21-44

                SHIFT CONTROL, DETERMINE SHIFT SOLENOID STATES - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: SC_SHFT_SOL_CTL_COM5

      always -----------------------| Increment CYCCTR

      CYCCTR >OR= CLDCTM -----------| Set CYCCTR = 0


      FLG_FRST_TV = 0 --------|
       (no engagement         |
        yet)                  |
                              |
      CYCCTR > CLDCTM/2 ------|
       (cycle shift           |
        solenoids)            |
                              |
      FLG_TVENG_MD = 1 -|     |
                        |OR --|
      FLG_TVENG_CD = 1 -|     |AND -| Set FLG_SS_1 = 0
       (moderately cold)      |     | Set FLG_SS_2 = 1
                              |     | Set RT_GR_CUR = GRRAT1
      UNDSP = 0 --------------|     | Set GEAR_CUR = 1
       (RUN mode)             |     |  (do cold shift solenoid
                              |     |   cycling strategy)
      GR_CM = 1 --------------|     |
                                    | --- ELSE ---
                                    |
      GR_CM = 1 --------------------| Set FLG_SS_1 = 1
       (1st gear)                   | Set FLG_SS_2 = 0
                                    | Set RT_GR_CUR = GRRAT1
                                    | Set GEAR_CUR = 1
                                    |
                                    | --- ELSE ---
                                    | 
      GR_CM = 2 --------------------| Set FLG_SS_1 = 0
                                    | Set FLG_SS_2 = 0
                                    | Set RT_GR_CUR = GRRAT2
                                    | Set GEAR_CUR = 2
                                    |
                                    | --- ELSE ---
      GR_CM = 3 --------------------| Set FLG_SS_1 = 0
       (3rd gear, provide coast     | Set FLG_SS_2 = 1
        braking when PDL <OR= 3)    | Set RT_GR_CUR = GRRAT3
                                    | Set GEAR_CUR = 3
                                    |
                                    | --- ELSE ---
                                    |
      GR_CM = 4 --------------------| Set FLG_SS_1 = 1
       (4th gear)                   | Set FLG_SS_2 = 1
                                    | Set RT_GR_CUR = GRRAT4
                                    | Set GEAR_CUR = 4









                                        21-45

                    SHIFT CONTROL, SHIFT VALIDATION LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 SHIFT VALIDATION LOGIC


      OVERVIEW

      The Shift Validation logic verifies that a shift has taken place after it  is
      commanded.   This  logic is only capable of verifying shifts which take place
      under steady operating conditions.  The shifts must  be  automatic  upshifts,
      with  the  vehicle off idle and the vehicle speed over a calibratable minimum
      speed for each gear (designed to ensure that the vehicle is power on and  the
      torque converter is operating above the coupling point).

      The logic works as follows:  if a power on  upshift  is  commanded,  and  the
      vehicle speed entry condition is met, then TP, VS, and NE are recorded at the
      start of the shift.  The engine rpm drop that can be expected as a result  of
      the  upshift  is  then determined based on the current state of the converter
      clutch - a larger drop can be expected if the  converter  is  locked  at  the
      start  (and  end)  of the shift.  The shift is considered to be a shift which
      can be validated as long as  the  TP  and  VS  are  steady.   Engine  rpm  is
      monitored  until  it  peaks.   Engine rpm must then drop from the peak by the
      expected amount within the time allowed to complete the shift.  If the engine
      rpm  drop lasts for a specified amount of time (verification the drop was due
      to a shift and not due to noise), it is considered to represent a shift.   If
      engine rpm did not drop within the allowed time, it is noted that there was a
      shift error (missed shift).

      If one of the missed shift error codes is set, failure mode  action  will  be
      executed  for  a  calibratable  number of warm up cycles (failure mode action
      includes clipping EPC to TVFMMN as a minimum, and flashing the TCIL).



      DEFINITIONS

      INPUTS

      Registers:

       -  C617CNT = 1-2 shift error warm up counter.

       -  C617_KAM_BIT = 1-2 shift error detected.

       -  C618CNT = 2-3 shift error warm up counter.

       -  C618_KAM_BIT = 2-3 shift error detected.

       -  C619CNT = 3-4 shift error warm up counter.

       -  C619_KAM_BIT = 3-4 shift error detected.

       -  GR_CM = Current commanded gear.

       -  GEAR_OLD = Last commanded gear.

       -  IPDL = Unfiltered PRNDL position, 0 -> MLPS value uncertain.

       -  NE_DROP_EX = Expected engine rpm drop for the shift being validated.



                                        21-46

                    SHIFT CONTROL, SHIFT VALIDATION LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  NE_DROP_TM = Current time (in milliseconds) when the  engine  speed  drop
          occurred during a verifiable shift.

       -  NEBART = Filtered engine speed.

       -  NEV_PEAK_SFT = Peak engine speed during a verifiable shift.

       -  TP_REL = Relative throttle position; TP - RATCH.

       -  TPV_STRT_SFT = Throttle position at start of the shift.

       -  VSBART_RT = Filtered vehicle speed adjusted for RT_NOVS for transmission,
          mph.

       -  VSV_STRT_SFT = Vehicle speed at start of the shift.



      Bit Flags:

       -  FLG_FRST_CM = New commanded gear this pass flag.

       -  FLG_NOV_KAM = Flag indicating at least one update of RT_NOVS_KAM.

       -  FLG_OPEN = Convertor clutch state flag; 1 -> CC open, 0 -> CC locked.

       -  FLG_PWR = Power mode flag ; 1 -> power on mode, 0 -> power off mode.

       -  FLG_SF_AUTO = Automatic shift flag.

       -  FLG_SFT_IN = Shift in progress flag; 1 -> shift in progress.

       -  FLG_SFT_VAL = Shift validity flag; 0 -> Shift cannot be  verified,  1  ->
          Shift may be verified.

       -  FLG_SFT_VER = Shift verify flag; 0 -> Shift is not being verified,  1  ->
          Shift is being verified.

       -  OSFMFLG = Output Shaft speed sensor FMEM flag; 1 ->  output  shaft  speed
          sensor failure detected.

       -  TFMFLG = Throttle position FMEM flag;  1  ->  throttle  position  failure
          detected.



      Calibration Constants:

       -  NE_DROP_OPEN = Epected engine rpm drop for a  power  on  upshift  started
          with an open converter.

       -  NE_DROP_LCK = Epected engine rpm drop for a power on upshift started with
          a locked converter.

       -  S_VAL_TPADD = Tolerance on TP to verify steady  TP  (positive  direction)
          during the shift validation.




                                        21-47

                    SHIFT CONTROL, SHIFT VALIDATION LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  S_VAL_TPSUB = Tolerance on TP to verify steady  TP  (negative  direction)
          during the shift validation.

       -  S_VAL_VSADD = Tolerance on VS to verify steady  vehicle  speed  (positive
          direction) during the shift validation.

       -  S_VAL_VSSUB = Tolerance on VS to verify steady  vehicle  speed  (negative
          direction) during the shift validation.

       -  SFT_FM_LVL = Total number of warm up cycles that failure mode action will
          be executed after a shift error is detected.

       -  SFT_VAL_TM = Length of time to verify a shift (in milliseconds).

       -  TP_SH_VAL2 = Minimum TP to validate an upshift to second gear.

       -  TP_SH_VAL3 = Minimum TP to validate an upshift to third gear.

       -  TP_SH_VAL4 = Minimum TP to validate an upshift to fourth gear.

       -  TVIP_TOT_MIN = Minimum Transmission Oil Temperature to allow transmission
          self  test entry, used here because shift times tend to get longer cold -
          could result in false codes if shift validation is attempted.

       -  VS_SH_VAL2 = Minimum vehicle speed to validate an upshift to 2nd gear.

       -  VS_SH_VAL3 = Minimum vehicle speed to validate an upshift to 3rd gear.

       -  VS_SH_VAL4 = Minimum vehicle speed to validate an upshift to 4th gear.































                                        21-48

                    SHIFT CONTROL, SHIFT VALIDATION LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  NE_DROP_EX = See above.

       -  NE_DROP_TM = Current time (in milliseconds) when the  engine  speed  drop
          occurred during a verifiable shift.

       -  NEV_PEAK_SFT = Peak engine speed during a verifiable shift.

       -  TPV_STRT_SFT = Throttle position at the start of the shift.

       -  VSV_STRT_SFT = Vehicle speed at start of the shift.



      Bit Flags:

       -  FLG_SFT_VAL = See above.

       -  FLG_SFT_VER = See above.

       -  SFT_FM_FLG = Shift error failure mode flag; 0 -> no failure mode  action,
          1 -> shift error failure mode action will be executed.



































                                        21-49

                    SHIFT CONTROL, SHIFT VALIDATION LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: SC_VALID_COM7


      FLG_FRST_CM = 1 ----------------------|
                                            |
      FLG_SF_AUTO = 1 ----------------------|
                                            |
      IPDL <> 0 ----------------------------|
                                            |
      GR_CM > GEAR_OLD ---------------------|
                                            |
      TOT > TVIP_TOT_MIN -------------------|
                                            |
      GR_CM = 2 ----------------|           |
                                |           |
      VSBART_RT > VS_SH_VAL2 ---|AND -|     |
                                |     |     |
      TP_REL > TP_SH_VAL2 ------|     |     |
                                      |     |AND -| Do: expected_ne_drop
      GR_CM = 3 ----------------|     |     |     |  (set expected engine rpm
                                |     |     |     |   drop based on CC state)
      VSBART_RT > VS_SH_VAL3 ---|AND -|OR --|     | TPV_STRT_SFT = TP_REL
                                |     |     |     |  (record TP at start of 
      TP_REL > TP_SH_VAL3 ------|     |     |     |   shift)
                                      |     |     | NEV_PEAK_SFT = NEBART
      GR_CM = 4 ----------------|     |     |     |  (record filtered engine
                                |AND -|     |     |   speed at start of shift)
      VSBART_RT > VS_SH_VAL4 ---|           |     | VSV_STRT_SFT = VSBART_RT
                                |           |     |  (record filtered vehicle 
      TP_REL > TP_SH_VAL4 ------|           |     |   speed at start of shift)
                                            |     | FLG_SFT_VAL = 1
      FLG_NOV_KAM = 1 ----------------------|     |  (shift may be checked 
                                            |     |   for validity)
      FLG_PWR = 1 --------------------------|     | FLG_SFT_VER = 0
       (power on mode)                      |     |  (clear shift verify flag)
                                            |     | EXIT
      TFMFLG = 0 ---------------------------|     |
                                            |     |
      OSFMFLG = 0 --------------------------|     |
                                                  | --- ELSE --- 
                                                  |

                                (continued on next page)
















                                        21-50

                    SHIFT CONTROL, SHIFT VALIDATION LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

      FLG_SFT_VAL = 0 ----------------|           |
                                      |AND -|     |
      FLG_SFT_VER = 0 ----------------|     |     |
                                            |     |
      VSBART_RT < VSV_STRT_SFT -            |     |
                      S_VAL_VSSUB ----------|     |
                                            |     |
      VSBART_RT > VSV_STRT_SFT +            |     |
                      S_VAL_VSADD ----------|OR --| FLG_SFT_VAL = 0
       (unsteady vehicle speed)             |     | FLG_SFT_VER = 0
                                            |     | EXIT MODULE
      TP_REL < TPV_STRT_SFT - S_VAL_TPSUB --|     |
                                            |     |
      TP_REL > TPV_STRT_SFT + S_VAL_TPADD --|     |
       (unsteady throttle)                        |
                                                  | --- ELSE ---
                                                  |
                                                  | Do: shift_validation




      BEGIN: expected_ne_drop

      Determine the engine rpm drop that can be expected for  the  current  upshift
      based  on  the  state  of  the  converter clutch at the start of the shift (a
      larger drop can be expected for a locked to locked shift).


      FLG_OPEN = 1 -------------------------------| NE_DROP_EX = NE_DROP_OPEN
       (Conv. Cl. open at start of shift)         | (Set expected engine rpm drop
                                                  |  to the open to open/locked
                                                  |  upshift value)
                                                  | 
                                                  | --- ELSE ---
                                                  | 
                                                  | NE_DROP_EX = NE_DROP_LCK
                                                  | (Set expected engine rpm 
                                                  |  drop to the locked to locked
                                                  |  upshift value)

      END: expected_ne_drop
















                                        21-51

                    SHIFT CONTROL, SHIFT VALIDATION LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: shift_validation

      FLG_SFT_IN = 0 -----------------------------| error_detected = 1
        (shift completed)                         | FLG_SFT_VAL = 0
                                                  | FLG_SFT_VER = 0
                                                  | Do: shift_fault_filter_logic
                                                  | Do: shift_fmem_logic
                                                  |
                                                  | --- ELSE ---
      NEBART > NEV_PEAK_SFT ----------------|     |
       (check for peak engine speed)        |AND -| NEV_PEAK_SFT = NEBART
                                            |     | (store new peak rpm)
      FLG_SFT_VAL = 1 ----------------------|     |
                                                  | --- ELSE ---
      FLG_SFT_VAL = 1 ----------------------|     |
       (shift can be checked for validity)  |AND -| FLG_SFT_VER = 1
                                            |     |  (set shift verify flag)
      NEBART <= NEV_PEAK_SFT - NE_DROP_EX --|     | FLG_SFT_VAL = 0
       (engine speed drop from peak               |  (clear shift validate
        has occurred)                             |   enable flag)
                                                  | NE_DROP_TM = store current
                                                  |               time in 
                                                  |               milliseconds
                                                  |
                                                  | --- ELSE ---
      FLG_SFT_VER = 1 ----------------------|     |  
                                            |     | 
      NEBART <= NEV_PEAK_SFT - NE_DROP_EX --|AND -| error_detected = 0
                                            |     | (shift verified as having 
      current time - NE_DROP_TM >=          |     |  occurred, downcount the 
                             SFT_VAL_TM ----|     |  fault filter for that shift)
       (shift validation timer                    |  FLG_SFT_VER = 0
         has run out)                             | (clear shift verify flag)
                                                  | Do: shift_fault_filter_logic
                                                  | Do: shift_fmem_logic
                                                  |
                                                  | --- ELSE ---
      FLG_SFT_VER = 1 ----------------------|     |  
                                            |AND -| FLG_SFT_VER = 0
      NEBART > NEV_PEAK_SFT - NE_DROP_EX ---|     | FLG_SFT_VAL = 1
                                                  | (drop in rpm did not last
                                                  |  long enough, re-enter
                                                  |  validation)

      END: shift_validation















                                        21-52

                    SHIFT CONTROL, SHIFT VALIDATION LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: shift_fault_filter_logic

      After a shift has been validated, this logic is used to call the  appropriate
      fault filter.

      NOTE: The error_detected flag used in the fault filtering is set/cleared in
            the shift_validation routine that calls this routine.

      GR_CM = 2 ------------------------------| (1-2 shift commanded)
                                              | Do: FAULT FILTER for code
                                              |     617 procedure
                                              |
                                              | --- ELSE ---
                                              |
      GR_CM = 3 ------------------------------| (2-3 shift commanded)
                                              | Do: FAULT FILTER for code
                                              |     618 procedure
                                              |
                                              | --- ELSE ---
                                              |
      GR_CM = 4 ------------------------------| (3-4 shift commanded)
                                              | Do: FAULT FILTER for code
                                              |     619 procedure

      END: shift_gear_command_logic




      BEGIN: shift_fmem_logic

      This logic sets the failure mode flag so the appropriate failure mode  action
      can be taken.

      C617_KAM_BIT = 1 ---------------|
       (1-2 shift error detected)     |     
                                      |AND -|
      C617CNT < SFT_FM_LVL -----------|     |
       (not enough warm up cycles have      |
        passed since failure detection)     |
                                            |
      C618_KAM_BIT = 1 ---------------|     |
       (2-3 shift error detected)     |     |
                                      |AND -|OR --| SFT_FM_FLG = 1
      C618CNT < SFT_FM_LVL -----------|     |     |  (a shift error has been
       (not enough warm up cycles have      |     |   detected, perform failure
        passed since failure detection)     |     |   mode action for SFT_FM_LVL
                                            |     |   warm up cycles since the
      C619_KAM_BIT = 1 ---------------|     |     |   last failure detection)
       (3-4 shift error detected)     |     |     |
                                      |AND -|     |
      C619CNT < SFT_FM_LVL -----------|           |
       (not enough warm up cycles have            | --- ELSE ---
        passed since failure detection)           |
                                                  | SFT_FM_FLG = 0

      END: shift_fmem_logic



                                        21-53

                   SHIFT CONTROL, TORQUE MODULATION CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                    TORQUE MODULATION CONTROL (WITHOUT TURBINE SPEED)


      OVERVIEW

      Torque Modulation is performed by retarding spark  during  the  shift  event.
      Starting and ending points for spark retard are determined from a delta input
      speed to the transmission, based off of DT12S_AVG.   When  torque  modulation
      begins,  TQ_NET  and  TV_PRES are calculated as the next background task.  If
      the end of the shift is  not  detected,  a  default  timer  will  end  torque
      modulation.  Minimum TP_REL and and steady throttle conditions must be met in
      order to do toruqe modulation.



      DEFINITIONS

      INPUTS

      Registers:

       -  DT12S_AVG = Filtered PIP delta for transmission, clock ticks.

       -  GR_CM = Commanded gear for shift solenoids.

       -  GR_OLD = Last commanded gear.

       -  NEBART = Filtered engine RPM for transmission.

       -  NICT_TRIG_EN = Delta input speed to end torque modualtion.

       -  NICT_TRIG_ST = Delta input speed to trigger torque modulation.

       -  NOBART = Filtered output shaft speed, RPM.

       -  RT_GR_CUR = Current transmission gear ratio, dimensionless.

       -  SPD_RATIO = Speed ratio across torque converter.

       -  SPD_RT_STRT = Speed ratio across torque converter at start of shift.

       -  TP_REL_H = Relative TP, high byte.

       -  TP_STRT_SFT = TP_REL_H at the start of the shift, counts.

       -  TQMOD_TMR = Torque Modulation default timer (msec)

       -  TQ_LEVEL = Torque level required by transmission for  torque  modulation,
          ft-lbs.

      Bit Flags:

       -  FLG_FRST_CM = First time a shift is commanded flag; 0 -> no.

       -  FLG_PWR = Power mode flag; 0 -> power-off, 1 -> power-on.

       -  FLG_SPK_TQM = Torque modulation spark retard flag.



                                        21-54

                   SHIFT CONTROL, TORQUE MODULATION CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FLG_TQM_BGS = Torque modulation TV pressure flag.

       -  FLG_UPS_CTL = Upshift shift modulation flag.

       -  FLG_UP_TQM = Upshift torque modulation flag.

      Calibration Constants:

       -  FNTQ12(TP_REL_H) = Torque level above which torque modulation takes place
          during a 1-2 upshift.

       -  FNTQ2SRE(TP_REL_H) = Delta Shift Ratio to end  torque  modulation  on  an
          upshift to 2nd.

       -  FNTQ2SRS(TP_REL_H) = Delta Shift Ratio to start torque modulation  on  an
          upshift to 2nd.

       -  FNTQ23(TP_REL_H) = Torque level above which torque modulation takes place
          during a 2-3 upshift.

       -  FNTQ3SRE(TP_REL_H) = Delta Shift Ratio to end  torque  modulation  on  an
          upshift to 3rd.

       -  FNTQ3SRS(TP_REL_H) = Delta Shift Ratio to start torque modulation  on  an
          upshift to 3rd.

       -  FNTQ34(TP_REL_H) = Torque level above which torque modulation takes place
          during a 3-4 upshift.

       -  FNTQ4SRE(TP_REL_H) = Delta Shift Ratio to end  torque  modulation  on  an
          upshift to 4th.

       -  FNTQ4SRS(TP_REL_H) = Delta Shift Ratio to start torque modulation  on  an
          upshift to 4th.

       -  PUL_PER_REV = Pulses per revolution number of PIPs per engine  revolution
          for E4OD_GAS 1/2 the number of fuel pump.

       -  TP_DELTU = Upper limit on the delta counts that TP_REL can move in  order
          to continue to do torque modulation, counts.

       -  TP_DELTL = Lower limit on the delta counts that TP_REL can move in  order
          to continue to do torque modulation, counts.

       -  TP_MIN_TQM = Minimum TP_REL to do torque modulation, counts.

       -  TQMODTM = Maximum duration for torque modulation (seconds).

       -  TQ_TIMEOUT = Maximum time  to  look  for  starting  triggers  for  torque
          modulation (seconds).










                                        21-55

                   SHIFT CONTROL, TORQUE MODULATION CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  NICT_TRIG_EN = See above.

       -  NICT_TRIG_ST = See above.

      Bit Flags:

       -  FLG_SPK_TQM = See above.

       -  FLG_UP_TQM = See above.

       -  FLG_TQM_BGS = See above.













































                                        21-56

                   SHIFT CONTROL, TORQUE MODULATION CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: SC_TQMOD_COM1

                            (Performed every background loop)


      FLG_FRST_CM = 1 ----------------|
                                      |
      GR_CM > GR_OLD -----------------|AND -| FLG_SPK_TQM = 0
                                      |     | FLG_UP_TQM = 1
      TP_REL_H > TP_MIN_TQM ----------|     | TQMOD_TMR = 0
                                            | (reset torque modulation
                                            |  timer)
                                            |
                                            | --- ELSE ---
      FLG_UP_TQM = 1 -----|                 |
                          |AND -|           |
      FLG_SPK_TQM = 0 ----|     |           |
       (torque modulation has   |           | 
        not started)            |           |
                                |           | 
      TQMOD_TMR >               |AND -|     |
            TQ_TIMEOUT ---|     |     |     |
                          |     |     |     |
      TP_REL_H >          |     |     |     |
         TP_STRT_SFT +    |     |     |     |
              TP_DELTU ---|OR --|     |OR --| FLG_SPK_TQM = 0
                          |           |     | FLG_UP_TQM = 0     
      TP_REL_H <          |           |     | (Reset torque modulation
         TP_STRT_SFT -    |           |     |  flags) 
              TP_DELTL ---|           |     |
                                      |     |
      FLG_FRST_CM = 1 ----------------|     |
                                            | --- ELSE ---
                                            |
                                            | NO Action


      FLG_UP_TQM = 1 -----------------|     
                                      |AND -| NICT_TRIG_ST = (SPD_RT_STRT +
      FLG_SPK_TQM = 0 ----------------|     |   FNTQ[GR_CM]SRS(TP_REL_H)) * 60 * 
                                            |   STCF / (NOBART * RT_GR_CUR * 
                                            |   PUL_PER_REV)
                                            |
                                            | Do: "UPSHIFT TORQUE MODULATION
                                            |      SET-UP"
                                            |
                                            | --- ELSE ---
                                            |
                                            | NICT_TRIG_ST = 65535
                                            | (reset NICT_TRIG_ST to its max
                                            |  value when not in torque
                                            |  modulation)
                                            






                                        21-57

                   SHIFT CONTROL, TORQUE MODULATION CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      FLG_UP_TQM = 1 -----------------------| NICT_TRIG_EN = (SPD_RT_STRT +
                                            |   FNTQ[GR_CM]SRE(TP_REL_H)) * 60 * 
                                            |   STCF / (NOBART * RT_GR_CUR * 
                                            |   PUL_PER_REV)


                                  (Performed every PIP)


      FLG_UP_TQM = 1 -----------------|
                                      |
      FLG_SPK_TQM = 0 ----------------|AND -| FLG_SPK_TQM = 1
                                      |     | FLG_TQM_BGS = 1
      DT12S_AVG > NICT_TRIG_ST -------|     | TQMOD_TMR = 0
                                            | (Reset Default Timer)



      FLG_UP_TQM = 1 -----------------|
                                      |
      FLG_SPK_TQM = 1 ----------------|AND -| FLG_SPK_TQM = 0
                                      |     | FLG_UP_TQM = 0
      DT12S_AVG > NICT_TRIG_EN -|     |
                                |OR --|
      TQMOD_TMR > TQMODTM ------|
      (Default timer expires)



             (Performed in Background Manager BEFORE every Background TASK)


      FLG_TQM_BGS = 1 ----------------------| Do: Calculate TQ_NET as 
                                            |     the next background task
                                            | Do: Calculate TV_GUIDE as
                                            |     the next background task
                                            | FLG_TQM_BGS = 0























                                        21-58

                   SHIFT CONTROL, TORQUE MODULATION CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            UPSHIFT TORQUE MODULATION SET-UP


      GR_CM = 2 ----------------------------| TQ_LEVEL = FNTQ12(TP_REL_H)
                                            |
                                            | --- ELSE ---
                                            |
      GR_CM = 3 ----------------------------| TQ_LEVEL = FNTQ23(TP_REL_H)
                                            |
                                            | --- ELSE ---
                                            |
                                            | TQ_LEVEL = FNTQ34(TP_REL_H)
















































                                        21-59

                   SHIFT CONTROL, TORQUE MODULATION CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL






























































                                        21-60












                                      CHAPTER 22

                             ELECTRONIC PRESSURE CONTROL

















































                                         22-1

        ELECTRONIC PRESSURE CONTROL, ELECTRONIC PRESSURE CONTROL GUIDE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            ELECTRONIC PRESSURE CONTROL GUIDE


      OVERVIEW

      EPC pressure is regulated by a variable force solenoid which is under  EEC-IV
      control.   The  purpose of EPC pressure is to modulate the hydraulic pressure
      used to apply, release, and hold  the  various  clutches  and  bands  in  the
      transmission.   The higher the pressure, the more torque the transmission can
      transmit.   This  input  torque  in  a  conventional  transmission  has  been
      approximated by either a mechanical linkage connected to the throttle plates,
      or a vacuum  diaphragm  which  sees  manifold  vacuum.   The  electronic  EPC
      strategy  looks  up engine torque from a table and varies the EPC pressure to
      contain the static capacity requirement of the transmission.

      In general, EPC pressure is calculated as follows:

       -  Static Capacity - This is the EPC required to hold the  weakest  friction
          element  due to combustion torque (TQ_NET) and inertia torque (TQ_IALPHA)
          during a shift.  Inertia torque is 0 when a shift is  not  taking  place.
          The  sum of the combustion torque and inertia torque values is multiplied
          by the torque converter torque ratio to determine the  total  torque  the
          transmission  must  transmit  (tq_stat_cp).   This in turn determines the
          static TV capacity requirement (TV_STAT).

       -  Dynamic TV - This is TV required to obtain acceptable shift feel  and  is
          the  powertrain  developers  main calibration tool.  A switch is provided
          (SW_DYN) to allow the developer to either freeze RPM at a the start of  a
          shift,  or  to  allow  dynamic TV pressure to follow RPM during the shift
          (TV_DYN).  The combustion torque always updates, even during the shift.

       -  Total TV - (TV_PRES) is simply  the  sum  of  static,  dynamic  and  AETV
          requirements.

       -  Additional features -
           -  Cold Starts - additional  TV  can  be  requested  to  counteract  the
              viscous effect of cold transmission oil on engagements
           -  Rock cycling and high  speed  engagements  -  additional  TV  can  be
              requested   to   protect  the  transmission  capacity  during  severe
              engagement conditions
           -  Tip-out from stall capacity hold - delay  the  release  of  stall  TV
              pressure during a quick tip-out to contain powertrain wind-up
           -  Stall TV - at low speed ratio and vehicle speed stall TV is  computed
              as a function of throttle position
           -  Coast boost - coast boost on a manual  downshift  is  computed  as  a
              function of output shaft speed.
           -  Start-up - additional TV  can  be  requested  once  per  start-up  to
              "charge" the TV system in extremely cold ambients.
           -  Engagement TV - A function of engine speed is provided to  model  the
              engagement accumulator.










                                         22-2

        ELECTRONIC PRESSURE CONTROL, ELECTRONIC PRESSURE CONTROL GUIDE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  EPC_ENG_TMR = Engagement EPC ramp timer, sec.

       -  GR_CM = Current transmission gear.

       -  GR_DS_TV = Desired gear used to compute TV pressure.

       -  N = Engine speed, rpm.

       -  NEBART = Filtered engine RPM for transmission, rpm.

       -  NEU_RES_TMR = Neutral residency timer, sec.

       -  N_RUN = Minimum engine speed to exit Crank mode.

       -  PDL = Current PRNDL position.

       -  PDL_LST = PRNDL position last background pass.

       -  RT_NOVS = Ratio of actual N/V to base N/V in KAM.

       -  SPD_RATIO = Speed ratio across torque converter.

       -  TOT = Transmission oil temperature (degrees F).

       -  TV_COUNTS = FN620(tv_comp) + FN622(TOT) = Requested TV  counts  based  on
          transfer function and temperature compensation, counts.

       -  TV_PRES = TV pressure, psi.

       -  TV_PRES_BAR = Filtered EPC pressure, psi.

       -  VSBART_RT = Filtered vehicle speed adjusted for RT_NOVS for transmission,
          mph.

      Bit Flags:

       -  CC_FM_FLG = Converter clutch failure mode flag; 0 -> normal operation,  1
          -> execute converter clutch failure mode.

       -  DRV2NEU_FLG = Forward prior to neutral flag.

       -  ETV_TEST = ETV open/short test in progress.

       -  FLG_DE_CMGR = Indicates  first  pass  through  the  delay  shift  for  TV
          routine.

       -  FLG_DRV_REV = Forward to reverse engagement flag.

       -  FLG_ENG_IN = Engagement in progress flag.

       -  FLG_ENG_TV = Engagement TV pressure flag; 0 -> do engagement logic, 1  ->
          do not do engagement logic.


                                         22-3

        ELECTRONIC PRESSURE CONTROL, ELECTRONIC PRESSURE CONTROL GUIDE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FLG_FRST_DS = First time a shift is desired flag; 0 -> no  shift  desired
          this BG pass, 1 -> shift desired this BG pass.

       -  FLG_FWD_REV = Rock cycling engagement in progress flag.

       -  FLG_NEU_DRV = Neutral to drive engagement flag.

       -  FLG_NEU_REV = Neutral to reverse engagement flag.

       -  FLG_PWR = Power mode flag; 1 -> power on mode, 0 -> power off mode.

       -  FLG_REV_DRV = Reverse to drive engagement flag.

       -  FLG_SFT_IN = Shift in progress flag; 1 -> shift in progress.

       -  FLG_SFT_UP = Upshift flag; 1 -> current or last shift was an upshift.

       -  FLG_TVENG_MD = Moderate temperature for TV engagement flag.

       -  FLG_VE_DSGR = Verify desired gear first pass flag.

       -  MFMFLG = MAP/MAF FMEM flag.

       -  OTEMP_FM_FLG = Transmission overtemperature FMEM flag; 1 ->  transmission
          is overtemperature.

       -  PDL_ERROR = Flag indicating a MLIP sensor failure; 1 -> failure.

       -  REV2NEU_FLG = Reverse prior to neutral flag.

       -  SFT_FM_FLG = Shift error failure mode flag; 0 -> no failure mode  action,
          1 -> failure mode action will be executed.

       -  TFMFLG = TP FMEM flag.

       -  OSFMFLG = Output shaft speed sensor FMEM flag.

       -  VFS_OUT_FLG = 1 -> VFS output requested.

      Calibration Constants:

       -  EPCFMRV = Failure mode EPC pressure in Reverse, psi.

       -  FN12T(TOT) = TV_PRES multiplier versus TOT for upshift to 2nd gear.

       -  FN23T(TOT) = TV_PRES multiplier versus TOT for upshift to 3rd gear.

       -  FN34T(TOT) = TV_PRES multiplier versus TOT for upshift to 4th gear.

       -  FN620(tv_comp) = TV VFS transfer function.

       -  FN622(TOT)  =  TV  VFS  transfer  function  modifier  as  a  function  of
          transmission oil temperature, counts.

       -  FN622A(TOT) = TV_PRES multiplier for TOT.

       -  NEUTIM = Minimum time in neutral to use neutral to in gear engagement EPC
          functions, sec.


                                         22-4

        ELECTRONIC PRESSURE CONTROL, ELECTRONIC PRESSURE CONTROL GUIDE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  RTSTAL = Maximum SPD_RATIO to do stall TV.

       -  SW_STALTV = Software switch to do stall TV; 0  ->  do  normal  TV,  1  ->
          always use stall TV.

       -  TMDRVREV = Time to complete a forward to reverse engagement, sec.

       -  TMENGACT = Time to complete an engagement.

       -  TMNEUDRV = Time to complete a neutral to forward engagement, sec.

       -  TMNEUREV = Time to complete a neutral to reverse engagement, sec.

       -  TMREVDRV = Time to complete a revolution to forward engagement, sec.

       -  TCEPC = Time constant for TV_PRES_BAR, sec.

       -  TVFMMN = Minimum TV clip when VS or PRNDL sensor has failed, psi.

       -  TVPMIN_1 = Minimum TV pressure clip when GR_DS_TV = 1, psi.

       -  TVPMIN_2 = Minimum TV pressure clip when GR_DS_TV = 2, psi.

       -  TVPMIN_3 = Minimum TV pressure clip when GR_DS_TV = 3, psi.

       -  TVPMIN_4 = Minimum TV pressure clip when GR_DS_TV = 4, psi.

       -  TVPMIN_ENG = Minimum TV pressure clip during engagment, psi.

       -  TVPMINPT_1 = Minimum TV pressure clip when PT and GR_DS_TV = 1, psi.

       -  TVPMINPT_2 = Minimum TV pressure clip when PT and GR_DS_TV = 2, psi.

       -  TVPMINPT_3 = Minimum TV pressure clip when PT and GR_DS_TV = 3, psi.

       -  TVPMINPT_4 = Minimum TV pressure clip when PT and GR_DS_TV = 4, psi.

       -  TVPMINPT_ENG = Minimum TV pressure clip when PT during engagment, psi.

       -  TVPMINST_1 = Minimum non-shifting TV_PRES, GR_DS_TV -> 1.

       -  TVPMINST_2 = Minimum non-shifting TV_PRES, GR_DS_TV -> 2.

       -  TVPMINST_3 = Minimum non-shifting TV_PRES, GR_DS_TV -> 3.

       -  TVPMINST_4 = Minimum non-shifting TV_PRES, GR_DS_TV -> 4.

       -  VSSTAL = Maximum vehicle speed to do stall TV, mph.












                                         22-5

        ELECTRONIC PRESSURE CONTROL, ELECTRONIC PRESSURE CONTROL GUIDE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  EIP_TMR = Engagement in progress timer.

       -  EPC_ENG_TMR = See above.

       -  NEU_RES_TMR = See above.

       -  TV_COUNT_LST = TV pressure counts last update.

       -  TV_PRES = See above.

       -  TV_PRES_BAR = See above.

       -  TV_COUNTS = See above.

      Bit Flags:

       -  DRV2NEU_FLG = See above.

       -  FLG_DRV_REV = See above.

       -  FLG_ENG_IN = See above.

       -  FLG_ENG_TV = See above.

       -  FLG_FRST_TV = Start-up TV pressure flag; 0 -> do start-up TV logic, 1  ->
          do not do start-up TV logic.

       -  FLG_FWD_REV = See above.

       -  FLG_NEU_DRV = See above.

       -  FLG_NEU_REV = See above.

       -  FLG_REV_DRV = Reverse to drive engagement flag.

       -  REV2NEU_FLG = See above.




















                                         22-6

        ELECTRONIC PRESSURE CONTROL, ELECTRONIC PRESSURE CONTROL GUIDE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: EPC_GUIDE_COM3


      N > N_RUN -------------------|
                                   |AND -|
      PDL <= 4 --------------------|     |
       (in fwd)                          |OR --| FLG_FRST_TV = 1
                                         |     |  (Stop charging TV circuit
      N > N_RUN -------------------|     |     |   after the 1st engagement)
                                   |AND -|
      PDL = 6 ---------------------|
       (in rev)



                                 ENGAGEMENT FLAGS/TIMERS

      PDL = 5 ---------------------|
       (in neutral)                |OR --|
                                   |     |
      PDL = 7 ---------------------|     |AND -| NEU_RES_TMR = NEUTIM
       (in park)                         |     |  (load neutral timer)
                                         |     | DRV2NEU_FLG = 1
      PDL_LST <= 4 ----------------------|     | REV2NEU_FLG = 0
       (fwd last pass)                         |  (indicate fwd prior to neu)
                                               |
                                               | --- ELSE ---
      PDL = 5 ---------------------|           |
       (in neutral)                |OR --|     |
                                   |     |     |
      PDL = 7 ---------------------|     |AND -| NEU_RES_TMR = NEUTIM
       (in park)                         |     |  (load neutral timer)
                                         |     | DRV2NEU_FLG = 0
      PDL_LST = 6 -----------------------|     | REV2NEU_FLG = 1
       (rev last pass)                         |  (indicate rev prior to neu)
                                               |
                                               | --- ELSE ---
                                               |
                                               | NO ACTION




















                                         22-7

        ELECTRONIC PRESSURE CONTROL, ELECTRONIC PRESSURE CONTROL GUIDE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PDL = 6 ---------------------------|
       (in rev)                          |
                                         |
      PDL_LST = 5 -----------------|     |
       (neu last pass)             |OR --|     |  (neutral to reverse)
                                   |     |AND -| EPC_ENG_TMR = TMNEUREV 
      PDL_LST = 7 -----------------|     |     | EIP_TMR = TMENGACT 
       (park last pass)                  |     | FLG_DRV_REV = 0 
                                         |     | FLG_NEU_DRV = 0 
                                         |     | FLG_NEU_REV = 1
      NEU_RES_TMR = 0 -------------|     |     | FLG_REV_DRV = 0
       (in neu long enough)        |OR --|     |
                                   |           |
      DRV2NEU_FLG = 0 -------------|           |
       (not fwd prior to neu)                  |
                                               | --- ELSE ---
                                               |
      PDL = 6 ---------------------------|     |  (drive to reverse)
       (in rev)                          |AND -|
                                         |     | EPC_ENG_TMR = TMDRVREV 
      PDL_LST <> 6 ----------------------|     | EIP_TMR = TMENGACT
       (fwd to rev or                          | FLG_DRV_REV = 1
        fwd to neu to rev with                 | FLG_NEU_DRV = 0
        short time in neu)                     | FLG_NEU_REV = 0
                                               | FLG_REV_DRV = 0
                                               |
                                               | --- ELSE ---
      PDL <= 4 --------------------------|     |
       (in fwd)                          |     |
                                         |     |
      PDL_LST = 5 -----------------|     |     |
       (neu last pass)             |OR --|     |  (neutral to drive)
                                   |     |AND -| EPC_ENG_TMR = TMNEUDRV 
      PDL_LST = 7 -----------------|     |     | EIP_TMR = TMENGACT 
       (park last pass)                  |     | FLG_DRV_REV = 0 
                                         |     | FLG_NEU_DRV = 1 
                                         |     | FLG_NEU_REV = 0
      NEU_RES_TMR = 0 -------------|     |     | FLG_REV_DRV = 0
       (in neu long enough)        |OR --|     |
                                   |           |
      REV2NEU_FLG = 0 -------------|           |
       (not rev prior to neu)                  |
                                               | --- ELSE ---
                                               |
      PDL <= 4 --------------------------|     |  (reverse to drive)
       (in fwd)                          |AND -| EPC_ENG_TMR = TMREVDRV 
                                         |     | EIP_TMR = TMENGACT
      PDL_LST > 4 -----------------------|     | FLG_DRV_REV = 0
       (rev to fwd or                          | FLG_NEU_DRV = 0
        rev to neu to fwd                      | FLG_NEU_REV = 0 
        with short time in neu)                | FLG_REV_DRV = 1









                                         22-8

        ELECTRONIC PRESSURE CONTROL, ELECTRONIC PRESSURE CONTROL GUIDE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      EPC_ENG_TMR > 0 -------------------------| FLG_ENG_IN = 1
                                               |  (engagement in progress)
                                               |
                                               | --- ELSE ---
                                               |
                                               | FLG_ENG_IN = 0
                                               |  (no engagement in progress)



      FLG_ENG_IN = 1 --------------------|
       (engagement in progress)          |
                                         |
      FLG_DRV_REV = 1 -------------|     |
       (fwd to rev)                |     |
                                   |     |AND -| FLG_FWD_REV = 1
      FLG_REV_DRV = 1 -------------|     |     | DRV2NEU_FLG = 0
       (rev to fwd)                |     |     | REV2NEU_FLG = 0
                                   |     |     |  (set direction change flag
      FLG_NEU_REV = 1 -------|     |OR --|     |   and clear "prior to neutral"
       (neu to rev)          |AND -|           |   flags)
                             |     |           |
      DRV2NEU_FLG = 1 -------|     |           |
       (fwd prior to neu)          |           |
                                   |           |
      FLG_NEU_DRV = 1 -------|     |           |
       (neu to fwd)          |AND -|           |
                             |                 |
      REV2NEU_FLG = 1 -------|                 |
       (rev prior to neu)                      |
                                               | --- ELSE ---
                                               |
      FLG_ENG_IN = 0 --------------------------| FLG_FWD_REV = 0
       (no engagement in progress)             |  (clear direction change flag)
                                               |
                                               | --- ELSE ---
                                               |
                                               | NO ACTION






















                                         22-9

        ELECTRONIC PRESSURE CONTROL, ELECTRONIC PRESSURE CONTROL GUIDE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      FLG_FWD_REV = 1 -------------------|
       (direction change)                |
                                         |
      PDL >= 5  -------------------------|OR --| FLG_ENG_TV = 1
       (not in forward gear)             |     |  (perform engagement/stall TV)
                                         |     |
      GR_DS_TV = GR_CM ------------|     |     |
       (no verify in progress)     |AND -|     |
                                   |           |
      FLG_ENG_IN = 1 --------------|           |
       (engagement in progress)                |
                                               | --- ELSE ---
      GR_DS_TV <> GR_CM -----------------|     |
       (desired shift being verified)    |     |
                                         |     |
      FLG_FRST_DS = 1 -------------------|OR --| FLG_ENG_TV = 0
       (shift is desired)                |     |  (Stop doing engagement/stall
                                         |     |   TV; forward engagement is over
      PDL <= 4 --------------------|     |     |   and trans is warm or a shift
       (forward gear)              |AND -|     |   is pending)
                                   |           |
      FLG_TVENG_MD = 0 ------------|           |
       (transmission warm)                     |
                                               | --- ELSE ---
                                               |
                                               | NO ACTION


































                                        22-10

        ELECTRONIC PRESSURE CONTROL, ELECTRONIC PRESSURE CONTROL GUIDE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PDL = 5 ---------------------------|
       (neutral)                         |OR --| Do: "START-UP TV" LOGIC
                                         |     |
      PDL = 7 ---------------------------|     | flg_eng_stall = 1
       (park)                                  |
                                               | --- ELSE ---
      SW_STALTV = 1 ---------------------|     |
       (forced stall TV)                 |     |
                                         |     |
      FLG_ENG_TV = 1 --------------------|     |
       (1st engagement)                  |     |
                                         |OR --| Do: "ENGAGEMENT/STALL TV"
      SPD_RATIO <= RTSTAL ---------|     |     |  LOGIC
       (low speed ratio)           |     |     |
                                   |     |     | flg_eng_stall = 1
      VSBART_RT <= VSSTAL ---------|AND -|     |
       (low vehicle speed)         |           |
                                   |           |
      FLG_SFT_IN = 0 --------------|           |
       (no shift in progress)                  |
                                               | --- ELSE ---
                                               |
                                               | Do: "NORMAL TV CALCULATION"
                                               |
                                               | flg_eng_stall = 0



































                                        22-11

        ELECTRONIC PRESSURE CONTROL, ELECTRONIC PRESSURE CONTROL GUIDE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      FLG_SFT_IN = 0 --------------------|
                                         |
      FLG_PWR = 0 -----------------|     |
                                   |AND -|OR --| NO ACTION          
      flg_eng_stall = 0 -----------|     |     |  (do not adjust TV_PRES for
                                         |     |   transmission oil temperature
      FLG_SFT_UP = 0 --------------------|     |   unless shifting)
       (adjust pressure on upshifts only)      |
                                               |
                                               | --- ELSE ---
                                               |
      GR_DS_TV = 2 ----------------------------| TV_PRES = TV_PRES * FN12T(TOT)
                                               |
                                               | --- ELSE --
                                               |
      GR_DS_TV = 3 ----------------------------| TV_PRES = TV_PRES * FN23T(TOT)
                                               |
                                               | --- ELSE ---
                                               |
      GR_DS_TV = 4 ----------------------------| TV_PRES = TV_PRES * FN34T(TOT)








































                                        22-12

        ELECTRONIC PRESSURE CONTROL, ELECTRONIC PRESSURE CONTROL GUIDE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      flg_eng_stall = 1 -----------------------| temp_tvpminpt = TVPMINPT_ENG
                                               | temp_tvpmin = TVPMIN_ENG
                                               |
                                               | --- ELSE ---
                                               |
      GR_DS_TV = 1 ----------------------------| temp_tvpminpt = TVPMINPT_1
                                               | temp_tvpmin = TVPMIN_1
                                               | temp_tvpminst = TVPMINST_1
                                               |
                                               | --- ELSE ---
                                               |
      GR_DS_TV = 2 ----------------------------| temp_tvpminpt = TVPMINPT_2
                                               | temp_tvpmin = TVPMIN_2
                                               | temp_tvpminst = TVPMINST_2
                                               |
                                               | --- ELSE ---
                                               |
      GR_DS_TV = 3 ----------------------------| temp_tvpminpt = TVPMINPT_3
                                               | temp_tvpmin = TVPMIN_3
                                               | temp_tvpminst = TVPMINST_3
                                               |
                                               | --- ELSE ---
                                               |
                                               | temp_tvpminpt = TVPMINPT_4
                                               | temp_tvpmin = TVPMIN_4
                                               | temp_tvpminst = TVPMINST_4



      FLG_SFT_IN = 1 --------------|
                                   |
      FLG_VE_DSGR = 1 -------------|
                                   |OR --|
      FLG_DE_CMGR = 1 -------------|     |
                                   |     |AND -| TV_PRES =
      flg_eng_stall = 1 -----------|     |     |   max(TV_PRES,temp_tvpminpt)
                                         |     |
      FLG_PWR = 1 -----------------------|     |
                                               | --- ELSE ---
      FLG_SFT_IN = 1 --------------|           |
                                   |           |
      FLG_VE_DSGR = 1 -------------|OR --|     |
                                   |     |     |
      FLG_DE_CMGR = 1 -------------|     |AND -| TV_PRES = temp_tvpmin
                                         |     |
      FLG_PWR = 0 -----------------------|     |
                                               | --- ELSE ---
      flg_eng_stall = 1 -----------------|     |
                                         |AND -| TV_PRES =
      FLG_PWR = 0 -----------------------|     |   max(TV_PRES, temp_tvpmin)
                                               |
                                               | --- ELSE ---
                                               |
                                               | TV_PRES =
                                               |   max(TV_PRES, temp_tvpminst)





                                        22-13

        ELECTRONIC PRESSURE CONTROL, ELECTRONIC PRESSURE CONTROL GUIDE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      TFMFLG = 1 ------------------------|
       (TP failed)                       |
                                         |
      MFMFLG = 1 ------------------------|AND -| TV_PRES = EPCFMRV
       (MAP failed)                      |     |
                                         |     |
      PDL = 6 ---------------------------|     |
       (PRNDL in Reverse)                      |
                                               | --- ELSE ---
      TFMFLG = 1 ------------------|           |
       (TP failed)                 |AND -|     |
                                   |     |     |
      MFMFLG = 1 ------------------|     |OR --| TV_PRES = 127.5 (Maximum)
       (MAP failed)                      |     |
                                         |     |
      ETV_TEST = 1 ----------------------|     |
                                               | --- ELSE ---
      OSFMFLG = 1 -----------------------|     |
       (output shaft speed sensor        |     |
        failed)                          |     |
                                         |     |
      SFT_FM_FLG = 1 --------------------|     |
       (shift error detected)            |     |
                                         |OR --| TV_PRES = max(TV_PRES,TVFMMN)
      PDL_ERROR = 1 ---------------------|
       (MLPS failed)                     |
                                         |
      CC_FM_FLG = 1 ---------------------|
       (Converter Clutch error detected) |
                                         |
      OTEMP_FM_FLG = 1 ------------------|
       (Transmission overtemperature)



      always --------------------| TV_PRES_BAR = ROLAV( TV_PRES, TCEPC )



      always --------------------| TV_COUNT_LST = TV_COUNTS



      ETV_TEST = 0 --------------| tv_comp = TV_PRES_BAR * FN622A(TOT)
                                 | TV_COUNTS =
                                 |   max(FN620(tv_comp) + FN622(TOT),0)
                                 |
                                 | --- ELSE ---
                                 |
                                 | TV_COUNTS = 0



      always --------------------| Do: "TV VFS OUTPUT ROUTINE"
                                 |  (set VFS_OUT_FLG = 1 for repeater)





                                        22-14

                ELECTRONIC PRESSURE CONTROL, START-UP TV LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    START-UP TV LOGIC


      OVERVIEW

      Start up TV is used to charge the TV system during cold ambient conditions.



      DEFINITIONS

      INPUTS

      Registers:

       -  RATCH = Closed throttle position, counts.

       -  TP = Throttle position sensor.

       -  TP_REL_H = Relative TP = TP - RATCH, counts.

      Bit Flags:

       -  FLG_FRST_TV = Start-up TV pressure flag:  0 -> do start-up TV logic; 1 ->
          do not do start-up TV logic.

       -  FLG_TVSTR_CD = Flag which indicates cold temperature for start-up TV:   0
          -> Don't use TVCHRG in start-up TV; 1 -> Use TVCHRG in start-up TV.

      Calibration Constants:

       -  TVCHRG = TV charge pressure for first start-up.



      OUTPUTS

      Registers:

       -  FN616F(TP_REL_H) = Stall TV pressure for forward.

       -  TV_PRES = TV pressure.


















                                        22-15

                ELECTRONIC PRESSURE CONTROL, START-UP TV LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: EPC_STARTUP_COM5


      FLG_TVSTR_CD = 1 -|
       (cold engine)    |AND -| TV_PRES = TVCHRG
                        |     |  (charge TV circuit, first start-up only)
      FLG_FRST_TV = 0 --|     |
       (first start-up)       | --- ELSE --- 
                              |
                              | TV_PRES = FN616F(TP_REL_H)

















































                                        22-16

            ELECTRONIC PRESSURE CONTROL, ENGAGEMENT/STALL TV LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                ENGAGEMENT/STALL TV LOGIC


      OVERVIEW

      Engagement/stall TV provides the greater of engagement TV or stall TV  unless
      a  drive/reverse  engagement is taking place.  The engagement logic takes the
      place of an engagement accumulator.  Note that  engagement  TV  is  generally
      lower than stall TV at closed throttle.



      DEFINITIONS

      INPUTS

      Registers:

       -  NEBART = Filtered engine RPM for transmission, rpm.

       -  PDL = Current PRNDL position.

       -  TP = Instantaneous throttle position, counts.

       -  TP_REL = Relative throttle position, counts.

       -  TPBARTV = Filtered TP for TV strategy.  This filtered  throttle  position
          is  calculated  using  the  ROLAV  subroutine,  but with a different time
          constant then the values used in the TPBART and TPBARTC calculation.

          TPBARTV is used in the  TV  routine  to  determine  a  tip-in  condition.
          During a tip-in condition in the TV routine, extra TV is added.

       -  TV_PRES = TV pressure.

       -  VSBART_RT = Filtered vehicle speed adjusted for RT_NOVS for transmission,
          mph.

      Bit Flags:

       -  FLG_ENG_IN = Engagement in progress flag.

       -  FLG_ENG_TV = Engagement TV pressure flag; 0 -> do engagement logic, 1  ->
          do not do engagement logic.

       -  FLG_FWD_REV = Rock cycling engagment in progress flag.

       -  FLG_TVENG_CD = Flag which indicates cold temperature for engagement TV; 0
          -> Don't use TVEMAX in engagement TV, 1 -> Use TVEMAX in engagement TV.

       -  FLG_TVENG_MD = Flag which indicates moderate temperature  for  engagement
          TV; 0 -> Don't use TVEMOD in engagement TV, 1 -> Use TVEMAX in engagement
          TV.

      Calibration Constants:

       -  FN616_SW = Switch to select FN616 usage during engagements.



                                        22-17

            ELECTRONIC PRESSURE CONTROL, ENGAGEMENT/STALL TV LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FN616F(TP_REL) = Stall EPC for forward.

       -  FN616R = Stall EPC for reverse.

       -  NETVMN = Minimum RPM to use TVEMOD engagement TV.

       -  NETVMX = Minimum RPM to use TVEMAX engagement TV.

       -  REV_ENG_ADD = Reverse Engagement Adder.

       -  SW_STALTV = Software switch to do stall TV; 0  ->  do  normal  TV,  1  ->
          always use stall TV.

       -  TOTVTP = Tip-out TP change to hold stall TV.

       -  TPTVMN = Minimum TP_REL to use TVEMOD engagement TV.

       -  TPTVMX = Minimum TP_REL to use TVEMAX engagement TV.

       -  TVEMAX = TV for worst case engagement.

       -  TVEMOD = TV for moderate engagement.

       -  VSTVMN = Minimum vehicle speed to use TVEMOD engagement TV.

       -  VSTVMX = Minimum vehicle speed to use TVEMAX engagement TV.



      OUTPUTS

      Registers:

       -  TV_PRES = TV pressure.


























                                        22-18

            ELECTRONIC PRESSURE CONTROL, ENGAGEMENT/STALL TV LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: EPC_ENGMT_STALL_COM6

                                ENGAGEMENT/STALL TV LOGIC


      SW_STALTV = 0 -------------------------|
       (not forcing Stall EPC)               |
                                             |
      FN616_SW = 1 --------------------------|AND -| tempreg1 = 0
       (FN616 selection switch)              |     |  (do not consider FN616
                                             |     |   during engagement)
      FLG_ENG_IN = 1 ------------------------|     |
       (engagement in progress)                    | --- ELSE ---
                                                   |
      PDL = 6 -------------------------------------| tempreg1 = FN616R(TP_REL)
                                                   |  (determine reverse stall
                                                   |   TV)
                                                   |
                                                   | --- ELSE ---
                                                   |
                                                   | tempreg1 = FN616F(TP_REL)
                                                   |  (determine forward stall 
                                                   |   TV)




































                                        22-19

            ELECTRONIC PRESSURE CONTROL, ENGAGEMENT/STALL TV LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                          ENGAGEMENT/STALL TV LOGIC (continued)


      VSBART_RT >= VSTVMX -------------|
       (high vehicle speed)            |AND -|
                                       |     |
      FLG_FWD_REV = 1 -----------------|     |
       (fwd/rev or rev/fwd)                  |
                                             |OR --| tempreg2 = TVEMAX 
      FLG_ENG_TV = 1 ------------------|     |     |      [ + REV_ENG_ADD]
       (engagement situation)          |     |     |  (set maximum TV 
                                       |     |     |   engagement pressure)
      TP_REL >= TPTVMX ----------|     |AND -|     |
       (high TP)                 |     |           |
                                 |     |           |
      NEBART >= NETVMX ----------|OR --|           |
       (high engine speed)       |                 |
                                 |                 |
      FLG_TVENG_CD = 1 ----------|                 |
       (cold temperature)                          |
                                                   | --- ELSE ---
      VSTVMN < VSBART_RT < VSTVMX -----|           |
       (moderate vehicle speed)        |AND -|     |
                                       |     |     |
      FLG_FWD_REV = 1 -----------------|     |     |
       (fwd/rev or rev/fwd)                  |     |
                                             |OR --| tempreg2 = TVEMOD
      FLG_ENG_TV = 1 ------------------|     |     |      [ + REV_ENG_ADD]
       (engagement situation)          |     |     |  (set moderate TV 
                                       |     |     |   engagement pressure)
      TPTVMN < TP_REL < TPTVMX --|     |AND -|     |
       (moderate TP)             |     |           |
                                 |     |           |
      NETVMN < NEBART < NETVMX --|OR --|           |
       (moderate engine speed)   |                 |
                                 |                 |
      FLG_TVENG_MD = 1 ----------|                 | 
       (moderate temperature)                      | 
                                                   | --- ELSE ---
                                                   |
                                                   | tempreg2 = 0


      Note:  "[ ]" indicates optional term in tempreg2 value when TVEMAX or  TVEMIN
      are selected.















                                        22-20

            ELECTRONIC PRESSURE CONTROL, ENGAGEMENT/STALL TV LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                          ENGAGEMENT/STALL TV LOGIC (continued)


      The following logic controls REV_ENG_ADD usage:

      PDL = 6 -------------------------------------| include REV_ENG_ADD in
                                                   |  tempreg2 if using
                                                   |  TVEMAX or TVEMOD
                                                   |
                                                   | --- ELSE ---
                                                   |
                                                   | do not include 
                                                   |  REV_ENG_ADD


      tempreg2 > tempreg1 -------------------------| tempreg1 = tempreg2
                                                   | (choose the larger of the 
                                                   |  stall TV pressure or 
                                                   |  engagement TV pressure, 
                                                   |  put in tempreg1)


      (TPBARTV - TP) >= TOTVTP --------------|
       (high tip-out rate)                   |AND -| No change to TV_PRES
                                             |     |  (use last pass value to 
      TV_PRES > tempreg1 --------------------|     |   hold TV pressure on tip-out)
       (last pass value has enough capacity)       | 
                                                   | --- ELSE --- 
                                                   |
                                                   | TV_PRES = tempreg1
                                                   |  (use the higher of stall 
                                                   |   TV or engagement TV)




























                                        22-21

              ELECTRONIC PRESSURE CONTROL, NORMAL TV CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  NORMAL TV CALCULATION


      OVERVIEW

      Normal TV computes the TV pressure required to maintain static capacity, that
      is, the capacity required when no shift is in progress.


      DEFINITIONS

      INPUTS

      Registers:

       -  GR_CM = Current transmission gear.

       -  GR_DS_TV = Desired gear used to compute EPC pressure.

       -  NEBART = Filtered engine RPM for transmission.

       -  RATCH = Closed throttle position, counts.

       -  SPD_RATIO = Speed ratio across the torque converter.

       -  TP = Throttle Position, counts.

       -  TPBARTV = Filtered TP for TV strategy.  TPBARTV is used in the TV routine
          to  determine  a  tip-in  condition.  During a tip-in condition in the TV
          routine, extra TV is added.

       -  TP_REL = Relative Throttle Position, TP - RATCH.

       -  TP_STRT_SFT = TP_REL at the start of a shift, counts.

       -  TQ_IALPHA = I-ALPHA torque due to ratio change.

       -  TQ_NET = Net torque into torque converter.

       -  TQ_NET_S = Torque Net from Engine (Signed).

       -  TQ_STAT_CP = Static Capacity Torque of transmission.

       -  TQ_STAT_CP_S = Static Capacity Torque (Signed) of transmission.

       -  TR_STRT_SFT = Torque ratio at the start of a shift.

       -  TV_DYN = TV pressure required for dynamic shift control.

       -  TV_PRES = TV pressure.

       -  TV_STAT = TV pressure required for static capacity.

       -  TV_ST_SFT = Static TV pressure while shifting.






                                        22-22

              ELECTRONIC PRESSURE CONTROL, NORMAL TV CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Bit Flags:

       -  FLG_4X4L = 4X4L flag:  0 -> not in 4X4 L; 1 -> in 4X4 L.

       -  FLG_DYN_CD = Flag which indicates that it is necessary to add dynamic  TV
          due to cold transmission conditions.

       -  FLG_FRST_CM = Flag indicating a shift was commanded this background loop.

       -  FLG_SFT_IN = Shift in progress flag.

      Calibration Constants:

       -  FN617(SPD_RATIO) = Torque converter torque ratio.

       -  SCINT1 = Static capacity TV intercept, first gear.

       -  SCINT2 = Static capacity TV intercept, second gear.

       -  SCINT3 = Static capacity TV intercept, third gear.

       -  SCINT4 = Static capacity TV intercept, fourth gear.

       -  SCSLP1 = Static capacity TV slope, first gear.

       -  SCSLP1SD = Static capacity TV slope, downshift to first gear.

       -  SCSLP2 = Static capacity TV slope, second gear.

       -  SCSLP2SD = Static capacity TV slope, downshift to second gear.

       -  SCSLP2SU = Static capacity TV slope, upshift to second gear.

       -  SCSLP3 = Static capacity TV slope, third gear.

       -  SCSLP3SD = Static capacity TV slope, downshift to third gear.

       -  SCSLP3SU = Static capacity TV slope, upshift to third gear.

       -  SCSLP4 = Static capacity TV slope, fourth gear.

       -  SCSLP4SU = Static capacity TV slope, upshift to fourth gear.


















                                        22-23

              ELECTRONIC PRESSURE CONTROL, NORMAL TV CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  NE_STRT_SFT = Engine RPM at start of a shift.

       -  TQ_STAT_CP = See above.

       -  TP_STRT_SFT = See above.

       -  TV_DYN = See above.

       -  TV_PRES = See above.



      PROCESS
                             STRATEGY MODULE: EPC_NORM_COM10


      FLG_FRST_CM = 1 ---------------------| NE_STRT_SFT = NEBART
       (start of shift)                    | TR_STRT_SFT = FN617(SPD_RATIO)
                                           | TP_STRT_SFT = TP_REL
                                           |  (capture engine speed, torque 
                                           |   ratio and throttle position at 
                                           |   start of shift)
                                           | Do: "TQ_IALPHA CALCULATION"



      Now calculate the minimum static capacity.

      FLG_SFT_IN = 1 ----------------------| TQ_STAT_CP = (TQ_NET + TQ_IALPHA) * 
       (shift in progress,                 |               TR_STRT_SFT
        use IALPHA term)                   |  (calculate static torque capacity 
                                           |   required)
                                           | TQ_STAT_CP_S = (TQ_NET_S + TQ_IALPHA)
                                           |                 * TR_STRT_SFT
                                           |
                                           | --- ELSE --- 
                                           |
      FLG_SFT_IN = 0 ----------------------| TQ_IALPHA = 0
       (shift done, use steady torque      | TQ_STAT_CP = TQ_NET * FN617(SPD_RATIO)
        requirement)                       |  (calculate steady state input torque
                                           |   through torque converter ratio)
                                           | TQ_STAT_CP_S = TQ_NET_S * 
                                           |                 FN617(SPD_RATIO)



      Calculate steady state pressure for current gear.

      FLG_SFT_IN = 0 ----------------------| Do: "NON-SHIFTING STATIC TV 
                                           |     CALCULATION"






                                        22-24

              ELECTRONIC PRESSURE CONTROL, NORMAL TV CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calculate pressure for shift using shifting slopes and Dynamic TV.

      FLG_SFT_IN = 1 ----------------|
                                     |
      GR_DS_TV <> GR_CM -------------|OR --| Do: "SHIFTING STATIC TV CALCULATION"
                                     |     | Do: "DYNAMIC TV CALCULATION"
      FLG_DYN_CD = 1 ----------------|
                                     |
      FLG_4X4L = 1 ------------------|



      Select proper value for TV_PRES.

      FLG_SFT_IN = 0 ----------------|                                    
                                     |                                    
      GR_DS_TV = GR_CM --|           |AND -| TV_PRES = TV_STAT            
                         |           |     |                              
      FLG_4X4L = 0 ------|AND -|     |     |                              
                         |     |     |     |                              
      FLG_DYN_CD = 0 ----|     |OR --|     | 
                               |           |                              
      TV_STAT > TV_ST_SFT      |           | 
                 + TV_DYN -----|           | 
                                           | --- ELSE --- 
                                           | 
                                           | TV_PRES = TV_ST_SFT + TV_DYN 
                                           |  (Clip TV_PRES to zero minimum)
































                                        22-25

              ELECTRONIC PRESSURE CONTROL, NORMAL TV CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           NON-SHIFTING STATIC TV CALCULATION

      GR_CM = 1 ---------------------------| TV_STAT = (TQ_STAT_CP * SCSLP1) +
                                           |            SCINT1
                                           |
                                           | --- ELSE ---
                                           |
      GR_CM = 2 ---------------------------| TV_STAT = (TQ_STAT_CP * SCSLP2) +
                                           |            SCINT2
                                           |
                                           | --- ELSE ---
                                           |
      GR_CM = 3 ---------------------------| TV_STAT = (TQ_STAT_CP * SCSLP3) +
                                           |            SCINT3
                                           |
                                           | --- ELSE ---
                                           |
                                           | TV_STAT = (TQ_STAT_CP * SCSLP4) +
                                           |            SCINT4



                             SHIFTING STATIC TV CALCULATION

      GR_DS_TV = 1 ------------------------| TV_ST_SFT = (TQ_STAT_CP * SCSLP1SD) +
                                           |              SCINT1
                                           |
                                           | --- ELSE ---
      GR_DS_TV = 2 ------------------|     |
                                     |AND -| TV_ST_SFT = (TQ_STAT_CP * SCSLP2SU) +
      FLG_SFT_UP = 1 ----------------|     |              SCINT2
                                           |
                                           | --- ELSE ---
                                           |
      GR_DS_TV = 2 ------------------------| TV_ST_SFT = (TQ_STAT_CP * SCSLP2SD) +
                                           |              SCINT2
                                           |
                                           | --- ELSE ---
      GR_DS_TV = 3 ------------------|     |
                                     |AND -| TV_ST_SFT = (TQ_STAT_CP * SCSLP3SU) +
      FLG_SFT_UP = 1 ----------------|     |              SCINT3
                                           |
                                           | --- ELSE ---
                                           |
      GR_DS_TV = 3 ------------------------| TV_ST_SFT = (TQ_STAT_CP * SCSLP3SD) +
                                           |              SCINT3
                                           |
                                           | --- ELSE ---
                                           |
                                           | TV_ST_SFT = (TQ_STAT_CP * SCSLP4SU) +
                                           |              SCINT4









                                        22-26

              ELECTRONIC PRESSURE CONTROL, TQ_IALPHA CALCULATION - GAA0
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  TQ_IALPHA CALCULATION

      OVERVIEW

      The I-ALPHA torque calculation determines the  torque  that  results  from  a
      transmission upshift or downshift.


      DEFINITIONS

      INPUTS

      Registers:

       -  GEAR_CUR = Current transmission gear.

       -  GEAR_OLD = Last commanded gear.

       -  NE_STRT_SFT = Engine RPM at start of a shift.

       -  RT_GR_CUR = Current transmission gear ratio.

       -  RT_GR_OLD = Last gear transmission gear ratio.

      Calibration Constants:

       -  TQIA12 = I-ALPHA torque constant for 1 - 2.

       -  TQIA21 = I-ALPHA torque constant for 2 - 1.

       -  TQIA23 = I-ALPHA torque constant for 2 - 3.

       -  TQIA32 = I-ALPHA torque constant for 3 - 2.

       -  TQIA34 = I-ALPHA torque constant for 3 - 4.

       -  TQIA43 = I-ALPHA torque constant for 4 - 3.



      OUTPUTS

      Registers:

       -  TQ_IALPHA = I-ALPHA torque due to ratio change.















                                        22-27

              ELECTRONIC PRESSURE CONTROL, TQ_IALPHA CALCULATION - GAA0
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: TV_TQ_IALPHA_COM4


      GEAR_CUR = 2 --|
                     |AND --| TQ_IALPHA = NE_STRT_SFT * TQIA12 *
      GEAR_OLD = 1 --|      |                  [1 - (RT_GR_CUR/RT_GR_OLD)]
                            |
                            | --- ELSE --- 
      GEAR_CUR = 1 --|      | 
                     |AND --| TQ_IALPHA = NE_STRT_SFT * TQIA21 * 
      GEAR_OLD > 1 --|      |                  [1 - (RT_GR_CUR/RT_GR_OLD)]
                            |
                            | --- ELSE --- 
      GEAR_CUR = 3 --|      | 
                     |AND --| TQ_IALPHA = NE_STRT_SFT * TQIA23 * 
      GEAR_OLD < 3 --|      |                  [1 - (RT_GR_CUR/RT_GR_OLD)]
                            |
                            | --- ELSE --- 
      GEAR_CUR = 2 --|      | 
                     |AND --| TQ_IALPHA = NE_STRT_SFT * TQIA32 *
      GEAR_OLD > 2 --|      |                  [1 - (RT_GR_CUR/RT_GR_OLD)]
                            |
                            | --- ELSE --- 
      GEAR_CUR = 4 --|      | 
                     |AND --| TQ_IALPHA = NE_STRT_SFT * TQIA34 *
      GEAR_OLD < 4 --|      |                 [1 - (RT_GR_CUR/RT_GR_OLD)]
                            |
                            | --- ELSE --- 
      GEAR_CUR = 3 --|      | 
                     |AND --| TQ_IALPHA = NE_STRT_SFT * TQIA43 * 
      GEAR_OLD = 4 --|      |                  [1 - (RT_GR_CUR/RT_GR_OLD)]




























                                        22-28

             ELECTRONIC PRESSURE CONTROL, DYNAMIC EPC CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 DYNAMIC EPC CALCULATION


      OVERVIEW

      Dynamic EPC calculates the EPC pressure required to obtain good shift feel.

      Dynamic EPC is based on TP_REL for all shifts except 4-3 and 3-4 shifts.   In
      those  cases,  it  is  based  on  a table of TP_REL and NEBART.  Two software
      switches are provided to allow or prevent the shift  dynamics  to  vary  with
      TP_REL/NEBART.  If SW_DYN is set to 0, the shift dynamics are allowed to vary
      with TP_REL.  If SW_DYN_RPM is set to 0, the shift dynamics on  the  4-3  and
      shifts are allowed to vary with NEBART.



      DEFINITIONS

      INPUTS

      Registers:

       -  GR_DS_TV = Gear to be used for dynamic TV calculation.

       -  NEBART = Filtered engine speed, RPM.

       -  NE_STRT_SFT = NEBART at the start of a shift, RPM.

       -  TP_REL = Relative throttle position, counts.

       -  TP_STRT_SFT = Throttle position at start of a shift, counts.

       -  TV_DYN = TV pressure required for dynamic shift control.

       -  TV_RAMP = Stores added TV value during upshifts.

       -  TV_RAMP_TMR = TV ramp timer during upshifts.

       -  TVRMPTM = Stores TV ramp timer for upshifts.

       -  VSBART_RT = Filtered vehicle speed adjusted for RT_NOVS for transmission,
          mph.

      Bit Flags:

       -  FLG_MAN42 = Identifies a Manual 4-2 pull-in.

       -  FLG_FRST_CM = First time a shift is commanded flag; 0 -> no.

       -  FLG_PWR = 1 -> power on; 0 -> power off.

       -  FLG_SFT_DN = Downshift flag.

       -  FLG_SFT_IN = Shift in progress flag; 0 -> no  shift  in  progress,  1  ->
          shift in progress.

       -  FLG_SFT_UP = Upshift flag; 1 -> last/current shift is upshift.



                                        22-29

             ELECTRONIC PRESSURE CONTROL, DYNAMIC EPC CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FLG_TIP_OUT = Flag which indicates a tip-out upshift in progress; 0 -> no
          tip-out upshift in progress, 1 -> a tip-out upshift in progress.

       -  FLG_4X4L = 4X4L Flag.

      Calibration Constants:

       -  EPC_MAN42 = Dynamic EPC adder for a Manual 4-2 pull-in, psi.

       -  FN12DC = Dynamic TV pressure for 1 - 2 shift.

       -  FN12DC_4X4L = Dynamic TV pressure for 1 - 2 shift in 4X4L.

       -  FN21DC = Dynamic TV pressure for 2 - 1 shift.

       -  FN23DC = Dynamic TV pressure for 2 - 3 shift.

       -  FN23DC_4X4L = Dynamic TV pressure for 2 - 3 shift in 4X4L.

       -  FN32DC = Dynamic TV pressure for 3 - 2 shift.

       -  FN34DC_4X4L = Dynamic TV pressure for 3 - 4 shift in 4X4L.

       -  FN34DT = Dynamic EPC pressure for 3  -  4  shift,  table  of  TP_REL  and
          NEBART.
                   X = FN067A(tempreg) = Normalizing function for TP_REL.
                   Y = FN070N(tempreg_rpm) = Normalizing function for NEBART.

       -  FN43DT = Dynamic EPC pressure for 4  -  3  shift,  table  of  TP_REL  and
          NEBART.
                   X = FN067A(tempreg) = Normalizing function for TP_REL.
                   Y = FN070N(tempreg_rpm) = Normalizing function for NEBART.

       -  SW_DYN = Software switch for dynamic TV; 0 ->  allow  shift  dynamics  to
          vary with TP, 1 -> use TP at start of shift for dynamic TV.

       -  SW_DYN_RPM = Software switch for dynamic TV for 4-3 and 3-2 shifts; 0  ->
          allow shift dynamics for vary with RPM, 1 -> use NEBART at start of shift
          for dynamic TV.

       -  TVRMP_12 = Added TV during 1-2 shift.

       -  TVRMP_23 = Added TV during 2-3 shift.

       -  TVRMP_34 = Added TV during 3-4 shift.

       -  TMTVRMP_12 = TV ramp timer for 1-2 shift, sec.

       -  TMTVRMP_23 = TV ramp timer for 2-3 shift, sec.

       -  TMTVRMP_34 = TV ramp timer for 3-4 shift, sec.









                                        22-30

             ELECTRONIC PRESSURE CONTROL, DYNAMIC EPC CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  TV_DYN = See above.

       -  TV_RAMP = See above.

       -  TV_RAMP_TMR = See above.

       -  TVRMPTM = See above.

















































                                        22-31

             ELECTRONIC PRESSURE CONTROL, DYNAMIC EPC CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: EPC_DYNAMIC_COM11


      SW_DYN = 1 -------|
                        |AND -| tempreg = TP_STRT_SFT
      FLG_SFT_IN = 1 ---|     |  (do not allow shift dynamics to vary)
                              |
                              | --- ELSE --- 
                              |
                              | tempreg = TP_REL
                              |  (allow shift dynamics to vary)


      SW_DYN_RPM = 1 ---|
                        |AND -| tempreg_rpm = NE_STRT_SFT
      FLG_SFT_IN = 1 ---|     |  (do not allow shift dynamics to vary)
                              |
                              | --- ELSE --- 
                              |
                              | tempreg_rpm = NEBART
                              |  (allow shift dynamics to vary)






































                                        22-32

             ELECTRONIC PRESSURE CONTROL, DYNAMIC EPC CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      FLG_TIP_OUT = 1 --------| TV_DYN = 0 
       (tip-out upshift)      | 
                              | --- ELSE --- 
                              | 
      GR_DS_TV = 1 -----------| TV_DYN = FN21DC(tempreg)
                              |
                              | --- ELSE ---
      GR_DS_TV = 2 -----|     |
                        |     |
      FLG_MAN42 = 1 ----|AND -| TV_DYN = FN32DC(tempreg)
                        |     |           + EPC_MAN42
      FLG_PWR = 1 ------|     |
                              | --- ELSE ---
      GR_DS_TV = 2 -----|     |
                        |     |
      FLG_SFT_UP = 1 ---|AND -| TV_DYN = FN12DC_4X4L(tempreg)
                        |     |
      FLG_4X4L = 1 -----|     |
                              | --- ELSE ---
      GR_DS_TV = 2 -----|     |
                        |AND -| TV_DYN = FN12DC(tempreg)
      FLG_SFT_UP = 1 ---|     |
                              | --- ELSE ---
                              |
      GR_DS_TV = 2 -----------| TV_DYN = FN32DC(tempreg)
                              |
                              | --- ELSE ---
      GR_DS_TV = 3 -----|     |
                        |     |
      FLG_MAN42 = 1 ----|AND -| TV_DYN = FN43DT(tempreg, tempreg_rpm)
                        |     |           + EPC_MAN42
      FLG_PWR = 1 ------|     |
                              | --- ELSE ---
      GR_DS_TV = 3 -----|     |
                        |     |
      FLG_SFT_UP = 1 ---|AND -| TV_DYN = FN23DC_4X4L(tempreg)
                        |     |
      FLG_4X4L = 1 -----|     |
                              | --- ELSE ---
      GR_DS_TV = 3 -----|     |
                        |AND -| TV_DYN = FN23DC(tempreg)
      FLG_SFT_UP = 1 ---|     |
                              | --- ELSE ---
                              |
      GR_DS_TV = 3 -----------| TV_DYN = FN43DT(tempreg, tempreg_rpm)
                              |
                              | --- ELSE ---
      GR_DS_TV = 4 -----|     |
                        |AND -| TV_DYN = FN34DC_4X4L(tempreg)
      FLG_4X4L = 1 -----|     |
                              | --- ELSE ---

                                (continued on next page)







                                        22-33

             ELECTRONIC PRESSURE CONTROL, DYNAMIC EPC CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

                              |
      GR_DS_TV = 4 -----------| TV_DYN = FN34DT(tempreg, tempreg_rpm)
                              |
                              | --- ELSE ---
                              |
                              | TV_DYN = 0




















































                                        22-34

             ELECTRONIC PRESSURE CONTROL, DYNAMIC EPC CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      FLG_FRST_CM = 1 --|
                        |
      FLG_SFT_UP = 1 ---|AND -| TVRMPTM = TMTVRMP_12
                        |     | TV_RAMP_TMR = TMTVRMP_12
      GR_DS_TV = 2 -----|     | TV_RAMP = TVRMP_12
                              |
                              | --- ELSE ---
      FLG_FRST_CM = 1 --|     |
                        |     |
      FLG_SFT_UP = 1 ---|AND -| TVRMPTM = TMTVRMP_23
                        |     | TV_RAMP_TMR = TMTVRMP_23
      GR_DS_TV = 3 -----|     | TV_RAMP = TVRMP_23
                              |
                              | --- ELSE ---
      FLG_FRST_CM = 1 --|     |
                        |     |
      FLG_SFT_UP = 1 ---|AND -| TVRMPTM = TMTVRMP_34
                        |     | TV_RAMP_TMR = TMTVRMP_34
      GR_DS_TV = 4 -----|     | TV_RAMP = TVRMP_34
                              |
                              | --- ELSE ---
      FLG_FRST_CM = 1 --|     |
                        |AND -| TVRMPTM = 1
      FLG_SFT_DN = 1 ---|     | TV_RAMP_TMR = 1
                              | TV_RAMP = 0


      FLG_SFT_IN = 1 ---------| TV_DYN = TV_DYN + TV_RAMP * 
                              |          [(TVRMPTM - TV_RAMP_TMR) / TVRMPTM]
                              | 
                              | --- ELSE ---
                              | 
                              | NO ACTION
                              |  (shift is being verified; do not apply the
                              |   upshift TV_RAMP to TV_DYN)

























                                        22-35

              ELECTRONIC PRESSURE CONTROL, TV VFS OUTPUT ROUTINE - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  TV VFS OUTPUT ROUTINE


      OVERVIEW

      TV pressure is controlled by a variable force solenoid in  the  transmission.
      Current  to  the  VFS  ranges from 0 to 1 amp.  and is controlled by a custom
      integrated circuit which converts an 8 bit binary  value  to  a  proportional
      current using the following relationship:

                              I ave. = requested counts/255

      This 8 bit word is clocked into the IC via two low speed  output  lines  from
      the DUCE chip called data and clock.



      DEFINITIONS

      INPUTS

      Registers:

       -  TV_COUNTS = TV pressure counts to VFS.



      OUTPUTS

      Registers:

       -  DUCE_VFS_1 = Requested Throttle Valve value to produce  desired  Throttle
          Valve pressure, same as TV_COUNTS.

      Bit Flags:

       -  VFS_1_WRITE = VFS Channel 1 write enable flag, same as VFS_OUT_FLG.




      PROCESS
                            STRATEGY MODULE: EPC_VFS_OUT_COM1


      always --------------------| DUCE_VFS_1 = TV_COUNTS
                                 | VFS_1_WRITE = 1













                                        22-36

                ELECTRONIC PRESSURE CONTROL, VFS DUCE REPEATER - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    VFS DUCE REPEATER


      OVERVIEW

      This module determines at the millisecond interrupt when there has  been  new
      VFS  information  generated  from  the TV_VFS_OUTPUT routine and outputs that
      information on the DUCE chip.


      DEFINITIONS

      INPUTS

      Registers:

       -  DUCE_VFS_1 = Required valve  value  to  produce  desired  throttle  valve
          pressure; same as TV_COUNTS.

       -  TV_COUNTS = Same as DUCE_VFS_1.

      Bit Flags:

       -  VFS_1_WRITE = VFS Channel 1 write enable flag; same as VFS_OUT_FLG.



      OUTPUTS

      Registers:

       -  VFS_OUT_6 = DUCE hardware register.

      Bit Flags:

       -  VFS_1_WRITE = See above.

       -  VFS_OUT_FLG = Flag that indicates when a new value of TV_COUNTS has  been
          computed  and  can  be  output to the DUCE chip for the output to the VFS
          chip; 1 -> new value computed, 0 -> foreground has output last value.




      PROCESS
                       STRATEGY MODULE: EPC_VFS_DUCE_REPEATER_COM1


      VFS_1_WRITE = 1 -----------------------| VFS_OUT_6 = DUCE_VFS_1
                                             | 
                                             | VFS_1_WRITE = 0
                                             | VFS_OUT_FLG = 0








                                        22-37

               ELECTRONIC PRESSURE CONTROL, EPC CURRENT MONITOR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   EPC CURRENT MONITOR


      OVERVIEW

      Electronic Pressure Control, EPC is a current control device with a  0  to  1
      amp  control  range.  One amp produces the lowest line pressure (handles idle
      torque capacity).  The EPC Overcurrent Circuit Monitor, ETVOCM, is a  voltage
      representative  of  the current in the EPC solenoid.  This voltage is read by
      the EEC-IV through the A/D.

      The monitor is checked once per background loop after  EPC  current  has  had
      time   to   stabilize  to  verify  that  the  solenoid  is  operating  within
      specification.  The expected monitor voltage is a function of battery voltage
      and  solenoid current.  Measured voltage decreases with increasing current or
      decreasing battery voltage.

      If the measured voltage is less than the allowable minimum (etv_ocm_min), the
      EPC  solenoid  test  flag,  ETV_TEST,  is  set  and an "EPC Test" sequence is
      initiated.  This sequence commands  zero  TV_COUNTS  and  then  rechecks  the
      voltage  to  differentiate  an  open  from  a  short.   Through  the use of a
      "pull-up" circuit connected to the EPC output, at  zero  TV_COUNTS,  a  short
      will  result  in low voltage on ETVOCM, while an open will show a near-normal
      voltage.  If an error is detected, the appropriate error code (error code 624
      - EPC solenoid/driver short to ground or EPC solenoid/driver open circuit) is
      set.  In the event a short is detected, the  torque  truncation/failure  mode
      routine is enabled by setting the OFMFLG to 1.

      Finally, this module will set the flag OFM_FMEM, with hysteresis, if the  EPC
      overcurrent  has  occurred (OFMFLG = 1) and the torque exceeds a calibratable
      limit.  This flag is then passed to the vehicle speed/rev limiting module  to
      request  alternate  fire  to  protect the transmission from excessive torques
      with low EPC pressure.

      If an open circuit is detected, the OPNCKT_FLG is set to 1.   If  either  the
      OFMFLG or the OPNCKT_FLG and the EPC_ERR_SW is set, the TCIL will flash.
























                                        22-38

               ELECTRONIC PRESSURE CONTROL, EPC CURRENT MONITOR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  C624FIL = Electronic Pressure Control (EPC) circuit failure fault filter.

       -  ETVOCM = ETV overcurrent circuit monitor, current.

       -  ETV_OCM_MN_D = *DISPLAY ONLY* expected ETV current.

       -  ETV_TEST = ETV open/short test in progress.

       -  NO_START = NST VIP enable flag.

       -  PUTMR = Time after CPU power up.

       -  TM_TV_SS = ETV current settling timer.

       -  TQ_NET = Net torque into torque converter.

       -  TV_COUNTS = TV pressure counts to VFS.

       -  TV_COUNT_LST = TV pressure counts last update.

       -  VBAT = Battery voltage.

       -  WIGFLG = Indicates VIP wiggle test.

      Bit Flags:

       -  RUNNING = RVIP enable flag.

       -  UNDSP = Underspeed flag.

      Calibration Constants:

       -  C624LVL = Electronic Pressure Control(EPC) circuit failure threshold.

       -  EPC_CM_ENA = Calibration switch to enable EPC current monitor test.

       -  ETV_BIAS = ETVOCM voltage at 10V VBAT and 0 TV_COUNTS.

       -  ETV_GAIN = ETVOCM voltage gain/one count TV_COUNTS.

       -  ETV_GAIN_BAT = ETVOCM count gain/one volt VBAT.

       -  FN617 = Torque converter torque ratio.

       -  OFMTQMAX_CL = Torque below which normal  fire  is  requested  during  ETV
          overcurrent.

       -  OFMTQMAX_SH = Torque above which alternate fire is requested  during  ETV
          overcurrent.

       -  TVCDLT = Maximum change in TV counts to consider ETV as steady state.



                                        22-39

               ELECTRONIC PRESSURE CONTROL, EPC CURRENT MONITOR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  TV_SLT_TM = Minimum ETV  steady  state  time  before  performing  current
          monitor test.

       -  VBAT_MIN = Minimum battery voltage to allow EPC test entry.



      OUTPUTS

      Registers:

       -  C624FIL = See above.

       -  VBAT_MIN = See above.

       -  TM_TV_SS = See above.

      Bit Flags:

       -  OPNCKT_FLG = Indicates EPC open circuit; 1 -> EPC open circuit detected.

       -  OFMFLG = ETV solenoid failure flag.

       -  OFM_FMEM = ETV overcurrent  based  alternate  fire  request  flag;  1  ->
          alternate fire requested, 0 -> normal fire.



































                                        22-40

               ELECTRONIC PRESSURE CONTROL, EPC CURRENT MONITOR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                              STRATEGY MODULE: EPC_CM_COM1

      EPC test entry logic:


      EPC_CM_ENA = 1 ---------------------|
      (test cal'd in)                     |
                                          |
      RUNNING = 0 ------------------------|
       (not in KOER)                      |
                                          |
      NO_START = 0 -----------------------|AND -| TM_TV_SS = 0 
       (not in KOEO)                      |     |  (transient delay)
                                          |     | DO: "VETVFIL_ZERO process"
      UNDSP = 1 --------------------|     |     |
       (in underspeed mode)         |     |     |
                                    |     |     |
      PUTMR < 4 --------------------|     |     |
       (less than 4 seconds since:  |     |     |
        powerup, exiting KOEO or    |     |     |
        KOER VIP, or a reset)       |     |     |
                                    |OR --|     |
      ABS(TV_COUNT_LST -            |           |   
             TV_COUNTS) > TVCDLT ---|           |
                                    |           |
      WIGFLG = 1 -------------------|           |
       (in Wiggle test)             |           |
                                    |           |
      VBAT < VBAT_MIN --------------|           |
       (battery voltage too low                 |
        to enter EPC test)                      |
                                                | --- ELSE --- 
      EPC_CM_ENA = 1 ---------------------|     |
       (test cal'd in)                    |     |
                                          |     |
      RUNNING = 0 ------------------------|     |
       (not in KOER)                      |AND -| etv_ocm_min = [ETV_BIAS - 
                                          |     |   (ETV_GAIN * TV_COUNTS)] +
      NO_START = 0 -----------------------|     |  (clip to zero)
       (not in KOEO)                      |     |   [(VBAT - 10.0) * ETV_GAIN_BAT]
                                          |     |  (clip to zero)
      TM_TV_SS >= TV_SLT_TM --------------|     | ETV_OCM_MN_D = etv_ocm_min
                                                |  (save for display)
                                                | DO: "EPC CURRENT MONITOR TEST"
                                                |
                                                | --- ELSE ---
                                                |
                                                | EXIT











                                        22-41

               ELECTRONIC PRESSURE CONTROL, EPC CURRENT MONITOR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: EPC CURRENT MONITOR TEST

      ETVOCM < etv_ocm_min ---------------|
                                          |AND -|  (initiate open/short test)
      ETV_TEST = 0 -----------------------|     | OFMFLG = 0 
                                                | ETV_TEST = 1 
                                                | tq_ofm = 0
                                                |
                                                | --- ELSE ---
      ETVOCM < etv_ocm_min ---------------|     |
                                          |AND -|  (over current/short 
      ETV_TEST = 1 -----------------------|     |   circuit)
                                                | error_detected = 1 
                                                | DO: fault filtering 
                                                |  process (code 624)
                                                | OFMFLG = 1  
                                                | OPNCKT_FLG = 0
                                                | tq_ofm = TQ_NET * 
                                                |   FN617(SPD_RATIO)
                                                |  (torque into the gearset) 
                                                |
                                                | --- ELSE ---
      ETVOCM >= etv_ocm_min --------------|     |
                                          |AND -|  (under current/open 
      ETV_TEST = 1 -----------------------|     |   circuit)
                                                | error_detected = 1 
                                                | DO: fault filtering 
                                                |  process (code 624)
                                                | OFMFLG = 0
                                                | OPNCKT_FLG = 1
                                                | ETV_TEST = 0
                                                | tq_ofm = 0
                                                | 
                                                | --- ELSE ---
                                                |
                                                |  (no error)
                                                | DO: fault filtering 
                                                |  process (code 624)
                                                | OFMFLG = 0
                                                | OPNCKT_FLG = 0
                                                | ETV_TEST = 0
                                                | tq_ofm = 0


      tq_ofm >= OFMTQMAX_SH --------------|S Q -| OFM_FMEM
                                          |
      tq_ofm < OFMTQMAX_CL ---------------|C

      END: EPC_CURRENT_MONITOR TEST











                                        22-42

               ELECTRONIC PRESSURE CONTROL, EPC CURRENT MONITOR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: VETVFIL_ZERO process

      C624FIL <= C624LVL -----------------|
                                          |AND -| C624FIL = 0
      OPNCKT_FLG = 0 ---------------------|



      END: VETVFIL_ZERO process



















































                                        22-43

        ELECTRONIC PRESSURE CONTROL, TRANSMISSION OVERTEMPERATURE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            TRANSMISSION OVERTEMPERATURE TEST


      OVERVIEW

      At very high  temperatures,  the  torque  capacity  of  the  transmission  is
      decreased,  which  can  impact  its  durabilty.  When a high transmission oil
      temperature is reached, the fault filter for the Transmission overtemperature
      code  will  count up.  Once the KAM bit is set, the OTEMP_FM_FLG is set.  The
      OTEMP_FM_FLG  is  used  throughout  the  strategy  for  FMEM   action.    The
      OTEMP_FM_FLG   will  remain  set  until  the  transmission  drops  below  the
      overtemperature threshold minus the hysteresis.



      DEFINITIONS

      INPUTS

      Registers:

       -  TOT = Transmission oil temperature, deg F.

      Calibration Constants:

       -  C657LVL = Threshold for Transmission overtemperature fault.

       -  C657UP = Transmission overtemperature fault up-count.

       -  TOT_OTEMP = Temperature  above  which  the  Transmission  overtemperature
          fault filter is called.

       -  HYS_OTEMP = Delta Temperature below which the Transmission is  considered
          no the be overtemperature.



      OUTPUTS

      Bit Flags:

       -  OTEMP_FM_FLG = Transmission overtemperature FMEM flag; 1 ->  Transmission
          is overtemperature.

















                                        22-44

        ELECTRONIC PRESSURE CONTROL, TRANSMISSION OVERTEMPERATURE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: EPC_OTEMP_TEST_COM2


      TOT > TOT_OTEMP ---------------------------| error_detected = 1
      (Transmission oil temperature above        | Call fault filter for
       overtemperature threshold)                | Code 657
                                                 | OTEMP_FM_FLG = 1
                                                 | (Execute Transmission
                                                 |  overtemperature failure
                                                 |  mode action)
                                                 |
                                                 | --- ELSE ---
                                                 |
      TOT <= TOT_OTEMP - HYS_OTEMP --------------| error_detected = 0
                                                 | Call fault filter for
                                                 | Code 657
                                                 | OTEMP_FM_FLG = 0










































                                        22-45

            TRANSMISSION INPUT CONVERSIONS, TORQUE NET CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 TORQUE NET CALCULATION


      OVERVIEW

      This module calculates the brake torque available at the engine  output.   It
      is  based  on a base torque value, modified for spark deviation from MBT, for
      fuel deviation from stoichiometry, for engine friction, for  accessory  loads
      and for A/C.  It also calculates the torque at the input to the transmission.
      If that torque TQ_INP_NET exceeds the limit TQ_LIMIT, then a torque reduction
      ratio is calculated.  This value is used by spark to clip spark.



      DEFINITIONS

      INPUTS

      Registers:

       -  GR_CM = Commanded gear for shift solenoids.

       -  LOAD = Universal load as ratio of air charge over standard.

       -  N = RPM.

       -  N_BYTE = Byte RPM.

       -  SPD_RATIO = Speed Ratio Across Torque Converter (Output / Input).

       -  SPK_LAMBSE = Value of LAMBSE to be used in spark calculations, unitless.

       -  TQ_LIMIT = Gear specific transmission input torque limit.

       -  TQ_MBT = Maximum gross torque that could be produced by engine.

       -  TQ_NET_S = Torque net from engine (signed).

       -  TR_SPK_DELTA = Current torque ratio as  determined  from  spark  advance,
          which is being output by engine.

      Bit flags:

       -  ACCFLG = A/C engaged flag; 1 -> A/C engaged, 0 -> A/C disengaged.

       -  REVFLG = AXOD reverse flag; 1 -> reverse.

      Calibration Constants:

       -  FN617 = Torque converter torque ratio.

       -  FN618 = Engine accessory torque without A/C.

       -  FN619 = A/C accessory torque.

       -  FN623 = Fuel multiplier used in torque calculation.




                                        22-46

            TRANSMISSION INPUT CONVERSIONS, TORQUE NET CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FN1615A = Indicated engine torque for TQ_NET calculation.

       -  FN1616 = Engine friction torque for TQ_NET calculation;  X  =  normalized
          engine speed in rpm.

       -  FNTQMULT = Temperature compensation function  for  engine  output  torque
          truncation.

       -  FNTQ_MAX = Gear specific transmission input torque limit.

       -  TCTQ_BAR = Time constanty for TQ_BAR.



      OUTPUTS

      Registers:

       -  TQ_BAR = Filtered TQ_NET.

       -  TQ_INP_NET = Transmission input shaft torque.

       -  TQ_LIMIT = See above.

       -  TQ_NET = Net torque into torque converter.

       -  TQ_NET_S = See above.

       -  TR_TQ_LIMIT = Torque ratio required to achieve TQ_LIMIT.

      Bit flags:

       -  FLG_TQ_TRUN = Apply Torque limit when set.



























                                        22-47

            TRANSMISSION INPUT CONVERSIONS, TORQUE NET CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                      STRATEGY MODULE: INTRN_TRANS_TQ_NET_CALC_COM1


      ACCFLG = 1 ------------| ac_torque = FN619(N_BYTE)
       (A/C on)              | 
                             | --- ELSE ---
                             |
                             | ac_torque = 0


      always ----------------| tq_mbt = FN1615A(N,LOAD) * FN623(SPK_LAMBSE)
                             | tq_loss = FN1616(N,LOAD) + FN618(N_BYTE) + ac_torque
                             | TQ_MBT = tq_mbt - tq_loss
                             | tq_inp_mbt = max(TQ_MBT * FN617(SPD_RATIO), 0.0)
                             | TQ_NET_S = tq_mbt * TR_SPK_DELTA - tq_loss
                             | TQ_NET = max(TQ_NET_S, 0)
                             | TQ_INP_NET = TQ_NET * FN617(SPD_RATIO)
                             | TQ_BAR = ROLAV(TQ_NET,TCTQ_BAR)


      REVFLG = 1 ------------| fn_index = 0
                             |
                             | --- ELSE ---
                             |
                             | fn_index = GR_CM


      always ----------------| TQ_LIMIT = FNTQ_MAX[fn_index] *
                             |     FNTQMULT(TOT)


      TQ_LIMIT < tq_inp_mbt -| tq_eng = TQ_LIMIT / FN617(SPD_RATIO) + tq_loss
                             | TR_TQ_LIMIT = min(tq_eng / tq_mbt, 1.0)
                             | FLG_TQ_TRUN = 1
                             |
                             | --- ELSE ---
                             |
                             | TR_TQ_LIMIT = 1.0
                             | FLG_TQ_TRUN = 0




















                                        22-48












                                      CHAPTER 23

                               CONVERTER CLUTCH CONTROL

















































                                         23-1

               CONVERTER CLUTCH CONTROL, BYPASS CLUTCH CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  BYPASS CLUTCH CONTROL


      OVERVIEW

      The modulated bypass clutch control module is the main  calling  routine  for
      modulated  bypass  clutch  strategy.  This module provides the order in which
      all other modules are called.



      PROCESS
                         STRATEGY MODULE: CCC_BYP_CLTCH_CTL_COM2


      always ----------------| Do: Hot Lockup Logic
                             | Do: Failure Mode Management Lock-Up
                             | Do: Scheduled Lock/Unlock Logic
                             | Do: Scheduled Bypass Clutch Slip
                             | Do: Unconditional Unlock Logic
                             | Do: Shift Modulation Logic
                             | Do: Bypass Clutch Duty Cycle Calculation
                             | Do: Slip Calculation
                              




































                                         23-2

                  CONVERTER CLUTCH CONTROL, HOT LOCKUP LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    HOT LOCKUP LOGIC


      OVERVIEW

      The hot lockup logic uses ECT or TOT to set an  overtemperature  lockup  mode
      flag.   The intent of the overtemperature lockup mode is to reduce the amount
      of transmission generated heat by hardlocking the torque converter,  thereby,
      increasing  its  efficiency.   Since  driveability decreases substantially in
      this mode, it is used only when absolutely required, typically  when  TOT  is
      greater than 275 deg.  F.


      DEFINITIONS

      INPUTS

      Registers:

       -  ECT = Engine Coolant Temperature, deg.  F.

       -  TOT = Transmission Oil Temperature, deg.  F.

      Calibration Constants:

       -  LUHECT_CL = ECT below which overtemp lockup mode can be disabled.

       -  LUHECT_SH = ECT above which overtemp lockup mode always enabled.

       -  LUHTOT_CL = TOT below which overtemp lockup mode can be disabled.

       -  LUHTOT_SH = TOT above which overtemp lockup mode always enabled.



      OUTPUTS

      Bit Flags:

       -  FLG_OT_LK = Transmission overtemp lockup mode flag; 1 ->  overtemperature
          mode.




      PROCESS
                            STRATEGY MODULE: CCC_HOT_LCK_COM1


      ECT >= LUHECT_SH ------------|
                                   |OR --| FLG_OT_LK = 1          
      TOT >= LUHTOT_SH ------------|     |  (overtemp lockup mode)
                                         |               
                                         | --- ELSE ---  
      ECT < LUHECT_CL -------------|     |               
                                   |AND -| FLG_OT_LK = 0 
      TOT < LUHTOT_CL -------------|                     



                                         23-3

            CONVERTER CLUTCH CONTROL, SCHEDULED BYPASS CLUTCH SLIP - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              SCHEDULED BYPASS CLUTCH SLIP


      OVERVIEW

      The Scheduled Bypass  Clutch  Slip  module  determines  the  amount  of  slip
      (SLIP_TARGET)  requested  by  the calibrator based on tables of vehicle speed
      and throttle position.  Unique tables are provided for  2nd  and  3rd  gears.
      There  are  three unique altitude adjustment tables as well.  In addition, an
      overtemp lockup mode table provides  the  ability  to  hardlock  to  increase
      converter  efficiency  in  cases  of  extreme  heat.   No 1st gear tables are
      provided since it was felt that no one would schedule slip in 1st gear.

      The slip tables  can  have  values  between  0  and  1,020  rpm  with  4  rpm
      resolution.   Slip greater than 1,020 rpm can be commanded by setting MAXSLIP
      greater than 1,020.  The final value  of  target  slip  also  determines  the
      control mode.

      A slip target between 0 and 4 rpm is normally considered hardlock mode,  that
      is,  essentially no slip is allowed.  The controller will increase duty cycle
      to achieve no slip.  Hardlock  mode  is  not  recommended  for  transmissions
      without  a  damper.  Hardlock mode can be calibrated out by setting SLPHRD to
      0.

      When the PRNDL is in the D position ( overdrive lock-out mode),  hardlock  is
      commaned  above  a throttle position break-point (TP3LCK).  This is to insure
      transmission durability when towing trailers.

      A slip target between 4 and 500 rpm is normally considered engage mode,  that
      is,  the  controller  controls  slip  in  a closed loop manner to the desired
      value.



      DEFINITIONS

      INPUTS

      Registers:

       -  GR_CM = Current transmission gear.

       -  GR_DS_TV = Commanded gear for TV.

       -  PDL = PRNDL position - from A to D conversion.

       -  SLIP_TARGET = Target slip value from tables, rpm.

       -  TM_VER_SFT = Time to verify automatic desired shift.

       -  TP_REL = Relative Throttle Position, counts.

      Bit Flags:

       -  FLG_CLUP = Flag indicating closed loop/bcsdc freeze region for upshifts.

       -  FLG_CRV_LK = Scheduled curve lockup flag.



                                         23-4

            CONVERTER CLUTCH CONTROL, SCHEDULED BYPASS CLUTCH SLIP - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FLG_DIS_CSM = Disable continuous slip mode flag;  0  ->  continuous  slip
          enabled, 1 -> continuous slip disabled.

       -  FLG_DNS_CTL = Downshift slip modulation flag.

       -  FLG_FMM_LK = Failure Mode Management lock-up flag; 1  ->  lock  converter
          due to FMEM action.

       -  FLG_HRD_EN = Base table slip_target value indicates HARDLOCK mode.

       -  FLG_HRD_LK = Modulated bypass clutch hardlock mode flag; 1 -> in hardlock
          mode.

       -  FLG_HT_MOD = Flag indicating high temperature slip modulation allowed;  1
          -> modulation allowed, 0 -> not allowed.

       -  FLG_OPEN = MLUS is in open mode; no capacity when set.

       -  FLG_OT_LK = Transmission overtemperature lockup mode flag.

       -  FLG_TP3_LCK = Flag indicating TP_REL is in hardlock zone  for  3rd  gear,
          PDL = 3.

       -  FLG_UNC_UNLK = Converter clutch unconditional unlock flag.

       -  FLG_UNLK_DS = Converter unlock in progress flag.

      Calibration Constants:

       -  FNDN2SSLP_0 = Slip adder prior to commanding a downshift to  1st  or  2nd
          gear.

       -  FNDN3SSLP_0 = Slip adder prior to commanding a downshift to 3rd gear.

       -  MAXSLIP = Maximum attainable slip target value, rpm.

       -  N = SLIP_TARGET while verifying shift.

       -  SLIP_HRD_SL = SLIP_TARGET to set hardlock.

       -  SLIP_HRD_CH = SLIP_TARGET to clear hardlock.

       -  TP3LCK = TP_REL above which hardlock is commanded in 3rd gear, PDL = 3.

       -  TP3LCK_HYS = Hysteresis term for PDL = 3, 3rd gear hardlock condition.















                                         23-5

            CONVERTER CLUTCH CONTROL, SCHEDULED BYPASS CLUTCH SLIP - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  SLIP_TARGET = See above.

      Bit Flags:

       -  FLG_ENG_LK = Modulated bypass clutch engage mode flag;  1  ->  in  engage
          mode.

       -  FLG_HRD_EN = See above.

       -  FLG_HRD_LK = See above.

       -  FLG_HRD_LST = Last pass value of FLG_HRD_LK used to detect transitions.

       -  FLG_HT_MOD = See above.

       -  FLG_OPEN = See above.

       -  FLG_OPEN_LST = Last pass value of FLG_OPEN used to detect transitions.

       -  FLG_TP3_LCK = See above.




































                                         23-6

            CONVERTER CLUTCH CONTROL, SCHEDULED BYPASS CLUTCH SLIP - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                        STRATEGY MODULE: CCC_SCHLD_BYP_SLIP_COM2


      FLG_DIS_CSM = 1 ---------------|
       (continous slip mode disabled)|OR --| FLG_HT_MOD = 0
                                     |     |  (exit modulation region)
      FLG_UNC_UNLK = 1 --------------|     |
                                           | --- ELSE ---
                                           |
                                           | FLG_HT_MOD = 1
                                           |  (enter modulation region)



      TP_REL >= TP3LCK --------------|S Q -| FLG_TP3_LCK
                                     |     | (Allow hardlock in 3rd gear
      TP_REL < TP3LCK - TP3LCK_HYS --|     |  when PDL = 3)



      FLG_CRV_LK = 1 ----------------|
                                     |
      FLG_FMM_LK = 1 ----------|     |
       (lock requested due to  |     |
        FMEM)                  |     |AND -| slip_target1 = 0
                               |     |     |
      GR_CM = 4 ---------------|     |     |
                               |     |     |
      FLG_OT_LK = 1 -----------|     |     |
                               |OR --|     |
      FLG_HT_MOD = 0 ----------|           |
       (no high temperature    |           |
        modulation)            |           |
                               |           |
      PDL = 3 -----------|     |           |
                         |     |           |
      GR_CM = 3 ---------|AND -|           |
                         |                 |
      FLG_TP3_LCK = 1 ---|                 |
      (command hardlock when TP_REL        |
       is above TP3LCK and PDL = 3)        |
                                           | --- ELSE ---
      FLG_CRV_LK = 1 ----------------|     |
                                     |AND -| slip_target1 = FN[GR_CM]SSLP
      GR_CM <> 1 --------------------|     |
                                           | --- ELSE ---
                                           |
                                           | slip_target1 = MAXSLIP











                                         23-7

            CONVERTER CLUTCH CONTROL, SCHEDULED BYPASS CLUTCH SLIP - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      slip_target1 <= SLIP_HRD_SL ---------| FLG_HRD_EN = 1
                                           |
                                           | --- ELSE ---
                                           |
      slip_target1 >= SLIP_HRD_CH ---------| FLG_HRD_EN = 0



      always ------------------------------| FLG_OPEN_LST = FLG_OPEN
                                           | FLG_HRD_LST = FLG_HRD_LK



      FLG_CRV_LK = 0 ----------------------| FLG_OPEN = 1
                                           | FLG_ENG_LK = 0
                                           | FLG_HRD_LK = 0
                                           | slip_target2 = MAXSLIP
                                           |
                                           | --- ELSE ---
      FLG_HRD_EN = 1 ----------------|     |
                                     |     |
      TM_VER_SFT = 0 ----------------|     |
                                     |     |
      FLG_UNLK_DS = 0 ---------------|AND -| FLG_OPEN = 0
                                     |     | FLG_ENG_LK = 0
      FLG_CLUP = 0 ------------------|     | FLG_HRD_LK = 1
                                     |     | slip_target2 = 0
      FLG_DNS_CTL = 0 ---------------|     |
                                           | --- ELSE ---
      TM_VER_SFT > 0 ----------------|     |
                                     |     |
      FLG_UNLK_DS = 1 ---------------|OR --| FLG_OPEN = 0
                                     |     | FLG_ENG_LK = 1
      FLG_CLUP = 1 ------------------|     | FLG_HRD_LK = 0
                                           | slip_target2 =
                                           |   max(slip_target1,SLIP_DES_MIN)
                                           |
                                           | --- ELSE ---
                                           |
                                           | FLG_OPEN = 0
                                           | FLG_ENG_LK = 1
                                           | FLG_HRD_LK = 0
                                           | slip_target2 = slip_target1

















                                         23-8

            CONVERTER CLUTCH CONTROL, SCHEDULED BYPASS CLUTCH SLIP - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      FLG_UNLK_DS = 1 ---------------|
                                     |AND -| slip_target3 = slip_target2 +
      GR_DS_TV <= 2 -----------------|     |                 FNDN2SSLP_0
                                           |  (4-3 downshift slip control)
                                           |
                                           | --- ELSE ---
                                           |
      FLG_UNLK_DS = 1 ---------------------| slip_target3 = slip_target2 +
                                           |                 FNDN3SSLP_0
                                           | (downshift slip control)
                                           |
                                           | --- ELSE ---
                                           |
                                           | slip_target3 = slip_target2



      always ------------------------------| SLIP_TARGET = min(slip_target3,
                                           |                   MAXSLIP)









































                                         23-9

             CONVERTER CLUTCH CONTROL, UNCONDITIONAL UNLOCK LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               UNCONDITIONAL UNLOCK LOGIC


      OVERVIEW

      The Unconditional Unlock Logic module is designed  to  unlock  the  converter
      clutch  without  regard  to  the schedule or any other shift control function
      taking place, hence the name, unconditional.  Typical  unconditional  unlocks
      are:  closed throttle, high tip in or tip out rates, brake, cold engine, high
      altitude or time since start of an unlocked  shift.   If  any  of  the  above
      conditions  are  present,  the  timer TM_LK_DLY is loaded with a unique value
      that must expire before normal converter  clutch  is  allowed.   If  multiple
      conditions  are  present,  the longest delay time is used.  All unconditional
      unlocks result in 0% duty cycle to the bypass clutch.

      Overtemp lock up mode eliminates some unconditional unlocks in an attempt  to
      keep  the  converter  hardlocked  as  much  as possible.  This does, however,
      degrade driveability.


      DEFINITIONS

      INPUTS

      Registers:

       -  BP = Barometric pressure.

       -  CS_SFT_MULT = Cold start shift multiplier.

       -  ECT = Engine coolant temperature.

       -  GR_CM = Current transmission gear.

       -  GR_OLD = Last commanded gear.

       -  NEBART = Filtered engine speed, RPM.

       -  PDL = Current PRNDL position.

       -  TM_LK_DLY = Timer for converter clutch unconditional unlock.

       -  TM_UN_CT = Timer for closed throttle converter clutch relock.

       -  TP_RATE = Throttle position rate.

       -  TP_REL = Relative throttle position; TP - RATCH.

       -  UNLKDLY_TMR = Timer used to delay closed  throttle  unconditional  unlock
          (msec)

       -  VSBART_RT = Filtered vehicle speed adjusted for RT_NOVS, MPH.








                                        23-10

             CONVERTER CLUTCH CONTROL, UNCONDITIONAL UNLOCK LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Bit Flags:

       -  BIFLG = Brake applied flag; 0 -> brake not applied, 1 -> brake applied.

       -  CC_FM_FLG = Converter clutch failure mode flag;  0  ->  normal  converter
          clutch operation, 1 -> converter clutch fmem action in progress.

       -  FLG_CT_LST = Last pass value of FLG_TP_CT.

       -  FLG_FRST_CM = First time a  shift  is  commanded  flag;  0  ->  no  shift
          commanded  this  background  pass,  1  -> shift commanded this background
          pass.

       -  FLG_HIGH_ALT = Flag indicating vehicle is at high altitude.

       -  FLG_LK_CM = Converter clutch lock-up commanded  flag;  0  ->  de-energize
          solenoid, unlock converter clutch, 1 -> energize solenoid, lock converter
          clutch.

       -  FLG_MLUS_FM = Excessive converter clutch slip error unconditional  unlock
          flag;  0  ->  no excessive clutch slip unlock, 1 -> excessive clutch slip
          unlock.

       -  FLG_OT_LK = Transmission overtemp lockup mode flag; 1 ->  overtemperature
          mode.

       -  FLG_SFT_IN = Shift in progress flag; 1 -> shift in progress.

       -  FLG_TP_CT = Flag indicating closed  throttle  break  point;  0  ->  above
          closed throttle break point, 1 -> below closed throttle break point.

       -  FLG_UN_ALT = High altitude unconditional unlock flag; 0 ->  not  at  high
          altitude, 1 -> high altitude.

       -  FLG_UN_BRK = Brake applied unconditional unlock  flag;  0  ->  brake  not
          applied, 1 -> brake applied.

       -  FLG_UN_CT = Closed throttle unconditional unlock flag; 0  ->  not  closed
          throttle, 1 -> closed throttle.

       -  FLG_UN_MDN = Manual downshift sequence unconditional unlock flag; 0 -> no
          manual downshift unlock, 1 -> manual downshift unlock.

       -  FLG_UN_PRN = PRNDL position unconditional unlock  flag;  0  ->  no  PRNDL
          position  unconditional  unlock, 1 -> PRNDL in park, reverse, neutral, or
          manual one.

       -  FLG_UN_SPD = Low engine/vehicle speed or low  speed  ratio  unconditional
          unlock flag; 0 -> no low speed related unlock, 1 -> low speed unlock.

       -  FLG_UN_TEMP = Cold temperature unconditional unlock flag; 0 -> no cold

       -  FLG_UN_TRA = Throttle rate accel unconditional unlock flag; 0 -> not high
          positive throttle rate, 1 -> high positive throttle rate.

       -  FLG_UN_TRD = Throttle rate decel unconditional unlock flag; 0 -> not high
          negative throttle rate, 1 -> high negative throttle rate.



                                        23-11

             CONVERTER CLUTCH CONTROL, UNCONDITIONAL UNLOCK LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FLG_UN_ULSF = Unlocked shift unconditional unlock flag; 0  ->  locked  up
          prior to start of shift, 1 -> unlocked prior to start of shift.

       -  FLG_UNC_UNLK = Converter clutch unconditional unlock flag; 0 ->  normally
          scheduled MLUS modulation, 1 -> unconditional unlock.

       -  OFMFLG = ETV overcurrent monitor failure flag; 0 -> ETV O.K.,  1  ->  ETV
          failure mode.

       -  TRAC_ULFLG = Flag forcing transmission unlock; 1 -> unlock.

       -  MLUS_FM_FLG = Flag used to allow FMEM action without storage of a service
          code.

      Calibration Constants:

       -  BPUNMH = Hysteresis for BPUNMN.

       -  BPUNMN = Minimum BP to unlock converter clutch.

       -  BRKDLY = Brake relock delay.

       -  CTDLY = Closed throttle relock delay.

       -  D21DLY = Unlocked 2 -> 1 shift relock delay.

       -  D32DLY = Unlocked 3 -> 2 shift relock delay.

       -  D43DLY = Unlocked 4 -> 3 shift relock delay.

       -  ETLUMX = Minimum ECT to enable converter clutch lock-up, deg F.

       -  LUDLY = High altitude/cold engine relock delay.

       -  MLPS_2 = IPDL value the MLPS is in the  second  to  last  position;  2  =
          Manual 2 mode has been selected, TCS is present, 3 = Drive mode/Overdrive
          cancel mode has been selected, no TCS present.

       -  NELUMN = Minimum NEBART to unconditionally unlock converter, RPM.

       -  OTBRKDLY = Overtemp brake delay, sec.

       -  OTCTDLY = Overtemp closed throttle relock delay, sec.

       -  PDL_UNLK = PDLs which force Unconditional  Unlock;  bit  (PDL  -  1)  set
          forces Unlock.

       -  PRNDLY = PRNDL relock delay.

       -  SRLUMN = Maximum SPD_RATIO to unconditionally unlock converter, unitless.

       -  TMCTDY = Minimum time before relock at closed throttle.

       -  TPUNBRK = Maximum relative TP for brake applied unlock.

       -  TPUNCH = Hysteresis for TPUNCT.




                                        23-12

             CONVERTER CLUTCH CONTROL, UNCONDITIONAL UNLOCK LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  TPUNCT = Maximum relative TP for closed throttle unlock.

       -  TPUNTR = Relative TP breakpoint for high and low unlock throttle rate.

       -  TRADLY = High throttle rate, accel, relock delay.

       -  TRDDLY = High throttle rate, decel, relock delay.

       -  TRUHAC = Throttle rate unlock, high TP, accel.

       -  TRUHDC = Throttle rate unlock, high TP, decel.

       -  TRULAC = Throttle rate unlock, low TP, accel.

       -  TRULDC = Throttle rate unlock, low TP, decel.

       -  UNLKDLYTM = Time to remain locked upon  reaching  closed  throttle  break
          point.

       -  U12DLY = Unlocked 1 -> 2 shift relock delay.

       -  U23DLY = Unlocked 2 -> 3 shift relock delay.

       -  U34DLY = Unlocked 3 -> 4 shift relock delay.

       -  VSCTDY = Minimum vehicle speed for closed throttle relock.

       -  VSLUMN = Maximum VSBRT_RT to unconditionally unlock converter, mph.
































                                        23-13

             CONVERTER CLUTCH CONTROL, UNCONDITIONAL UNLOCK LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  TM_LK_DLY = See above.

       -  TM_UN_CT = See above.

       -  UNLKDLY_TMR = See above.

      Bit Flags:

       -  FLG_CT_LST = See above.

       -  FLG_HIGH_ALT = See above.

       -  FLG_TP_CT = See above.

       -  FLG_UN_ALT = See above.

       -  FLG_UN_BRK = See above.

       -  FLG_UN_CT = See above.

       -  FLG_UN_MDN = See above.

       -  FLG_UN_NE = See above.

       -  FLG_UN_PRN = See above.

       -  FLG_UN_TEMP = See above.

       -  FLG_UN_TRA = See above.

       -  FLG_UN_TRD = See above.

       -  FLG_UN_ULSF = See above.

       -  FLG_UNC_UNLK = See above.





















                                        23-14

             CONVERTER CLUTCH CONTROL, UNCONDITIONAL UNLOCK LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: CCC_UNCOND_UNLK_COM10


      always ----------------------------------| FLG_CT_LST = FLG_TP_CT


      TP_REL < TPUNCT -------------------|S Q -| FLG_TP_CT 
                                         | 
      TP_REL >= TPUNCT + TPUNCH ---------|C


      FLG_CT_LST = 0 --------------------|
                                         |AND -| UNLKDLY_TMR = UNLKDLYTM
      FLG_TP_CT = 1 ---------------------|     | (load unlock delay timer)
       (transition to closed throttle)


      FLG_TP_CT = 1 ---------------------|
                                         |AND -| FLG_UN_CT = 1
      UNLKDLY_TMR = 0 -------------------|     | (command closed throttle
       (at closed throttle for a               |  unlock)
        calibratible time)                     |
                                               | --- ELSE ---
      FLG_TP_CT = 0 ---------------------|     |
       (not at closed throttle)          |AND -| FLG_UN_CT = 0
                                         |     | (reset closed throttle
      FLG_UN_CT = 1 ---------------------|     |  unlock flag)
                                               |
                                               | --- ELSE ---
                                               |
                                               | NO ACTION


      TP_RATE >= TRUHAC -----|
                             |AND -|                 
      TP_REL >= TPUNTR ------|     |
                                   |OR --| 
      TP_RATE >= TRULAC -----|     |     |  
                             |AND -|     |AND -| FLG_UN_TRA = 1
      TP_REL < TPUNTR -------|           |     | (high tip-in rate)
                                         |     |
      FLG_OT_LK = 0 ---------------------|     | 
                                               | --- ELSE ---
                                               |
                                               | FLG_UN_TRA = 0














                                        23-15

             CONVERTER CLUTCH CONTROL, UNCONDITIONAL UNLOCK LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      TP_RATE <= TRUHDC -----|
                             |AND -|
      TP_REL >= TPUNTR ------|     |
                                   |OR --| 
      TP_RATE <= TRULDC -----|     |     |  
                             |AND -|     |AND -| FLG_UN_TRD = 1
      TP_REL < TPUNTR -------|           |     | (high tip-in rate)
                                         |     |
      FLG_OT_LK = 0 ---------------------|     | 
                                               | --- ELSE ---
                                               |
                                               | FLG_UN_TRD = 0



      BIFLG = 1 -------------------------|    
                                         |AND -| FLG_UN_BRK = 1
      TP_REL <= TPUNBRK -----------------|     |  (brake applied)
       (vehicle speed maintained -             |
        4-way flasher not on)                  |
                                               | --- ELSE --- 
                                               |
                                               | FLG_UN_BRK = 0





































                                        23-16

             CONVERTER CLUTCH CONTROL, UNCONDITIONAL UNLOCK LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      bit (PDL - 1) of PDL_UNLK = 1 -----------| FLG_UN_PRN = 1
                                               |
                                               | --- ELSE ---
                                               |
                                               | FLG_UN_PRN = 0



      ECT <= ETLUMX ---------------------|             
                                         |OR --| FLG_UN_TEMP = 1
      CS_SFT_MULT <> 1.0 ----------------|     |  (cold engine)
                                               |
                                               | --- ELSE --- 
                                               |
                                               | FLG_UN_TEMP = 0



      PDL = 3 ---------------------------|
                                         |
      GR_CM = 4 -------------------------|AND -| FLG_UN_MDN = 1
                                         |     |  (hydraulic 4-3 downshift)
      MLPS_2 <> 2 -----------------------|     |
       (TCS input NOT present)                 |
                                               | --- ELSE --- 
                                               |
                                               | FLG_UN_MDN = 0



      BP <= BPUNMN ----------------------|S Q -| FLG_HIGH_ALT 
                                         |     | (vehicle at high altitude)
      BP > BPUNMN + BPUNMH --------------|C    



      FLG_HIGH_ALT = 1 ------------------|                                
                                         |AND -| FLG_UN_ALT = 1
      FLG_OT_LK = 0 ---------------------|     |  (high altitude)
                                               |
                                               | --- ELSE --- 
                                               | 
                                               | FLG_UN_ALT = 0



      FLG_FRST_CM = 1 -------------------|
       (shift commanded)                 |AND -| FLG_UN_ULSF = 1
                                         |     |  (minimum unlock time after
      FLG_UNC_UNLK = 1 ------------------|     |   start of unlocked shift)
       (unconditional unlock)                  |
                                               | --- ELSE ---
                                               |
                                               | FLG_UN_ULSF = 0






                                        23-17

             CONVERTER CLUTCH CONTROL, UNCONDITIONAL UNLOCK LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      NEBART < NELUMN -------------------|
                                         |
      VSBART_RT < VSLUMN ----------------|OR --| FLG_UN_SPD = 1
                                         |     |  (low engine/vehicle speed
      SPD_RATIO < SRLUMN ----------|     |     |   or low speed ratio
                                   |AND -|     |
      FLG_SFT_IN = 0 --------------|           | 
                                               | --- ELSE ---
                                               |
                                               | FLG_UN_SPD = 0



      FLG_UN_CT = 1 ---------------------------| Allow TM_UN_CT to count up
       (closed throttle)                       |
                                               | --- ELSE --- 
                                               |
                                               | TM_UN_CT = 0



      MLUS_FM_FLG = 1 -------------------|
       (exessive slip due to             |
        overtemp)                        |OR --| FLG_MLUS_FM = 1
                                         |     |  (excessive converter
      CC_FM_FLG = 1 ---------------------|     |   clutch slip)
       (converter clutch FMEM in progress)     |
                                               |
                                               | --- ELSE ---
                                               |
                                               | FLG_MLUS_FM = 0 
                                               |  (no excessive converter
                                               |   clutch slip)



























                                        23-18

             CONVERTER CLUTCH CONTROL, UNCONDITIONAL UNLOCK LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      FLG_UN_CT = 1 ---------------------|
       (closed throttle)                 |
                                         |AND -| TM_LK_DLY = OTCTDLY
      TM_LK_DLY < OTCTDLY ---------------|     |
                                         |     |
      FLG_OT_LK = 1 ---------------------|     |
                                               | --- ELSE ---
      FLG_UN_CT = 1 ---------------------|     |
       (closed throttle)                 |AND -| TM_LK_DLY = CTDLY
                                         |
      TM_LK_DLY < CTDLY -----------------|



      FLG_UN_TRA = 1 --------------------|
       (high tip-in rate)                |AND -| TM_LK_DLY = TRADLY
                                         |
      TM_LK_DLY < TRADLY ----------------|



      FLG_UN_TRD = 1 --------------------|
       (high tip-out rate)               |AND -| TM_LK_DLY = TRDDLY
                                         |
      TM_LK_DLY < TRDDLY ----------------|



      FLG_UN_BRK = 1 --------------------|
       (brake applied)                   |
                                         |AND -| TM_LK_DLY = OTBRKDLY
      TM_LK_DLY < OTBRKDLY --------------|     |
                                         |     |
      FLG_OT_LK = 1 ---------------------|     |
                                               | --- ELSE ---
      FLG_UN_BRK = 1 --------------------|     |
       (brake applied)                   |AND -| TM_LK_DLY = BRKDLY 
                                         |
      TM_LK_DLY < BRKDLY ----------------|



      FLG_UN_PRN = 1 --------------------|
       (park, rev, neut)                 |AND -| TM_LK_DLY = PRNDLY
                                         |
      TM_LK_DLY < PRNDLY ----------------|














                                        23-19

             CONVERTER CLUTCH CONTROL, UNCONDITIONAL UNLOCK LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OFMFLG = 1 ------------------|
       (ETV sol. shorted)          |
                                   |
      FLG_UN_SPD = 1 --------------|
       (low engine/vehicle speed   |
        or low speed ratio)        |
                                   |
      FLG_UN_TEMP = 1 -------------|
       (cold temperature)          |
                                   |
      FLG_UN_MDN = 1 --------------|
       (manual downshift)          |OR --|
                                   |     |
      FLG_UN_ALT = 1 --------------|     |
       (high altitude)             |     |
                                   |     |AND -| TM_LK_DLY = LUDLY
      TRAC_ULFLG = 1 --------------|     |
       (traction control request)  |     |
                                   |     |
      FLG_MLUS_FM = 1 -------------|     |
       (slip)                            |
                                         |
      TM_LK_DLY < LUDLY -----------------|





































                                        23-20

             CONVERTER CLUTCH CONTROL, UNCONDITIONAL UNLOCK LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      FLG_UN_ULSF = 1 -------------------|
                                         |
      GR_CM = 2 -------------------------|AND -| TM_LK_DLY = U12DLY
                                         |     | 
      GR_OLD = 1 ------------------------|     | 
                                               | --- ELSE --- 
      FLG_UN_ULSF = 1 -------------------|     | 
                                         |     | 
      GR_CM = 1 -------------------------|AND -| TM_LK_DLY = D21DLY
                                         |     | 
      GR_OLD > 1 ------------------------|     |
                                               | --- ELSE ---  
      FLG_UN_ULSF = 1 -------------------|     | 
                                         |     | 
      GR_CM = 3 -------------------------|AND -| TM_LK_DLY = U23DLY
                                         |     | 
      GR_OLD < 3 ------------------------|     |
                                               | --- ELSE ---  
      FLG_UN_ULSF = 1 -------------------|     | 
                                         |     | 
      GR_CM = 2 -------------------------|AND -| TM_LK_DLY = D32DLY
                                         |     | 
      GR_OLD > 2 ------------------------|     |
                                               | --- ELSE ---  
      FLG_UN_ULSF = 1 -------------------|     | 
                                         |     | 
      GR_CM = 4 -------------------------|AND -| TM_LK_DLY = U34DLY
                                         |     | 
      GR_OLD < 4 ------------------------|     |
                                               | --- ELSE ---  
      FLG_UN_ULSF = 1 -------------------|     | 
                                         |     | 
      GR_CM = 3 -------------------------|AND -| TM_LK_DLY = D43DLY
                                         |     
      GR_OLD = 4 ------------------------|

























                                        23-21

             CONVERTER CLUTCH CONTROL, UNCONDITIONAL UNLOCK LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      FLG_UN_CT = 1 ---------------|
                                   |AND -|
      TM_UN_CT <= TMCTDY ----------|     |
       (closed throttle short time)      |
                                         |
      TM_UN_CT > TMCTDY -----------|     |
       (closed throt. long enough) |     |
                                   |AND -|
      VSBART_RT < VSCTDY ----------|     |
       (low speed)                       |
                                         |
      FLG_UN_TRA = 1 --------------------|
       (high tip-in)                     |
                                         |
      FLG_UN_TRD = 1 --------------------|
       (high tip-out)                    |
                                         |
      FLG_UN_ULSF = 1 -------------------|
       (unlocked shift)                  |
                                         |OR --| FLG_UNC_UNLK = 1
      FLG_UN_BRK = 1 --------------------|     |  (unconditionally unlock
       (brake applied)                   |     |   converter clutch)
                                         |     |
      FLG_UN_PRN = 1 --------------------|     | 
       (park, rev, neut)                 |     |
                                         |     | 
      FLG_UN_TEMP = 1 -------------------|     |
       (cold temperature)                |     | 
                                         |     |
      FLG_UN_MDN = 1 --------------------|     |
       (manual downshift)                |     |
                                         |     |
      FLG_UN_ALT = 1 --------------------|     |
       (high altitude)                   |     |
                                         |     |
      TRAC_ULFLG = 1 --------------------|     |
       (traction control request)        |     |
                                         |     |
      FLG_UN_SPD = 1 --------------------|     |
       (low engine/vehicle speed         |     |
        or low speed ratio)              |     |
                                         |     |
      OFMFLG = 1 ------------------------|     |
       (ETV solenoid shorted)            |     |
                                         |     |
      FLG_MLUS_FM = 1 -------------------|     |
       (slip)                                  |
                                               | --- ELSE ---
                                               |
      TM_LK_DLY = 0 ---------------------------| FLG_UNC_UNLK = 0
                                               |  (allow modulation 
                                               |   if scheduled)
                                               |
                                               | --- ELSE ---
                                               |
                                               | no change to FLG_UNC_UNLK




                                        23-22

               CONVERTER CLUTCH CONTROL, SHIFT MODULATION LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 SHIFT MODULATION LOGIC


      OVERVIEW

      The Shift Modulation logic controls the length  of  time  after  a  shift  is
      commanded  that  additional  bypass  clutch modulation takes place to control
      converter slip on shifts.



      DEFINITIONS

      INPUTS

      Registers:

       -  DELTA_RATIO = Delta Shift Ratio change since command of shift.

       -  IGR_DS = Unverified desired gear.

       -  GR_CM = Commanded gear for shift solenoids.

       -  TM_SFT_CTL = Timer for closed/open loop PID control - for upshifts.

       -  TM_SFT_EXIT = Time remaining to complete shift exit.

       -  TM_SFT_SLP = Timer to control SLIP_TARGET during shift, sec.

       -  TM_VER_SFT = Time to verify automatic desired shift.

      Bit Flags:

       -  FLG_CLUP = Flag indicating closed loop/BCSDC freeze region for upshifts.

       -  FLG_CLUP_LST = Last pass value of FLG_CLUP.

       -  FLG_DNS_CTL = Downshift slip modulation flag; 1 -> Modifying  SLIP_TARGET
          during downshift.

       -  FLG_DNS_EXIT = In downshift exit mode.

       -  FLG_FRST_CM = First time a shift is commanded flag; 1 -> shift  commanded
          this background pass; 0 -> no shift commanded this background pass.

       -  FLG_OLUP = Flag indicating open loop control region for upshifts.

       -  FLG_NV_SHFT  =  First  pass  flag   indicating   desired   shift   failed
          verification.

       -  FLG_SFT_DN = Downshift flag; 1 -> Last/current shift is downshift.

       -  FLG_SFT_STRT = Set when waiting to detect start of shift  once  its  been
          commanded.

       -  FLG_SFT_UP = Upshift flag; 1 -> Last/current shift is upshift.




                                        23-23

               CONVERTER CLUTCH CONTROL, SHIFT MODULATION LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FLG_UNC_UNLK = Converter clutch unconditional unlock flag.

       -  FLG_OPEN = MLUS is in open mode, no capacity when set.

       -  FLG_UPS_CTL = Upshift slip modulation flag; 1  ->  Modifying  SLIP_TARGET
          during upshift.

       -  FLG_UPS_EXIT = In upshift exit mode.

      Calibration Constants:

       -  DSRDE1 = Delta  Shift  Ratio  on  Downshift  to  1st  to  indicate  shift
          complete.

       -  DSRDE2 = Delta  Shift  Ratio  on  Downshift  to  2nd  to  indicate  shift
          complete.

       -  DSRDE3 = Delta  Shift  Ratio  on  Downshift  to  3rd  to  indicate  shift
          complete.

       -  DSRUE2 = Delta Shift Ratio on Upshift to 2nd to indicate shift complete.

       -  DSRUE3 = Delta Shift Ratio on Upshift to 3rd to indicate shift complete.

       -  DSRUE4 = Delta Shift Ratio on Upshift to 4th to indicate shift complete.

       -  PCUPSCMPT = Fraction of upshift at which it is considered complete.

       -  TMCLUP2 = Closed loop pid period during upshift to 2nd.

       -  TMCLUP3 = Closed loop pid period during upshift to 3rd.

       -  TMCLUP4 = Closed loop pid period during upshift to 4th.

       -  TMDNSEXIT = Exit downshift duration.

       -  TMOLUP2 = Open loop pid period during an upshift to 2nd.

       -  TMOLUP3 = Open loop pid period during an upshift to 3rd.

       -  TMOLUP4 = Open loop pid period during an upshift to 4th.

       -  TMSFTSLPMAX = Watchdog time for TM_SFT_SLP.

       -  TMUPSEXIT = Exit upshift duration.















                                        23-24

               CONVERTER CLUTCH CONTROL, SHIFT MODULATION LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  TM_SFT_EXIT = See above.

       -  TM_SFT_SLP = See above.

      Bit Flags:

       -  FLG_DLY_SOSC = Flag used to delay  millisecond  "start  of  shift"  check
          until SR_PP_LIM is calculated once; 1 -> allow millisecond check.

       -  FLG_DNS_CTL = See above.

       -  FLG_DNS_EXIT = See above.

       -  FLG_OLUP_LST = Value of FLG_OLUP from previous background loop.

       -  FLG_OPN_BS = Flag indicating converter open when upshift  started;  1  ->
          open before upshift.

       -  FLG_UCTL_LST = Last pass value of FLG_UPS_CTL.

       -  FLG_UPS_CTL = See above.

       -  FLG_UPS_EXIT = See above.

































                                        23-25

               CONVERTER CLUTCH CONTROL, SHIFT MODULATION LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                              STRATEGY MODULE: CCC_MOD_COM2


      FLG_FRST_CM = 1 -------------------|
                                         |AND -| FLG_SFT_STRT = 1
      FLG_SFT_UP = 1 --------------------|     |
                                               | --- ELSE
                                               |
      FLG_FRST_CM = 1 -------------------------| FLG_SFT_STRT = 0


      FLG_FRST_CM = 1 -------------------------| TM_SFT_SLP = TMSFTSLPMAX
                                               |  (set slip control timer)


      FLG_UNC_UNLK = 1 ------------------|      
                                         |OR --| TM_SFT_CTL = 0
      FLG_NV_SHFT = 1 -------------------|     | FLG_CLUP = 0
                                               | FLG_OLUP = 0 


      always ----------------------------------| FLG_OLUP_LST = FLG_OLUP
                                               | FLG_CLUP_LST = FLG_CLUP
                                               | FLG_UCTL_LST = FLG_UPS_CTL


      IGR_DS > GR_CM --------------------|       
                                         |
      FLG_CLUP = 0 ----------------------|AND -| TM_SFT_CTL = TMCLUP[GR_CM]
                                         |     | FLG_CLUP = 1
      FLG_OPEN = 1 ----------------------|     | FLG_OLUP = 0
                                               | FLG_UPS_CTL = 0
                                               | FLG_UPS_EXIT = 0
                                               | FLG_OPN_BS = 1
                                               |
                                               | --- ELSE ---
      IGR_DS > GR_CM --------------------|     | 
                                         |AND -| TM_SFT_CTL = TMCLUP[GR_CM]
      FLG_CLUP = 0 ----------------------|     | FLG_CLUP = 1
                                               | FLG_OLUP = 0
                                               | FLG_UPS_CTL = 0
                                               | FLG_UPS_EXIT = 0
                                               | FLG_OPN_BS = 0
                                               |
                                               | --- ELSE ---
      FLG_CLUP = 1 ----------------------|     |
                                         |     | 
      FLG_SFT_STRT = 0 ------------------|AND -| TM_SFT_CTL = TMOLUP[GR_CM]
                                         |     | FLG_CLUP = 0
      TM_VER_SFT = 0 --------------------|     | FLG_OLUP = 1
                                               | FLG_UPS_CTL = 1
                                               | FLG_UPS_EXIT = 0
                                               | FLG_DLY_SOSC = 0
                                               |
                                               | --- ELSE ---

                                (continued on next page)


                                        23-26

               CONVERTER CLUTCH CONTROL, SHIFT MODULATION LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

      TM_SFT_CTL = 0 --------------------|     |
                                         |     | 
      FLG_CLUP = 1 ----------------------|AND -| FLG_UPS_CTL = 1
                                         |     | FLG_UPS_EXIT = 0
      TM_VER_SFT = 0 --------------------|     |
                                               | --- ELSE ---
      DELTA_RATIO > DSRUE[GR_CM] --------|     | 
                                         |     |
      TM_SFT_CTL = 0 --------------|     |     | 
                                   |AND -|     |
      FLG_OLUP = 1 ----------------|     |OR --| TM_SFT_CTL = 0
                                         |     | FLG_CLUP = 0
      TM_SFT_SLP = 0 --------------|     |     | FLG_OLUP = 0
                                   |     |     | FLG_UPS_CTL = 0
      TM_VER_SFT = 0 --------------|AND -|     | FLG_UPS_EXIT = 1
                                   |           | TM_SFT_EXIT = TMUPSEXIT
      FLG_UPS_CTL = 1 -------|     |           | FLG_SFT_STRT = 0
                             |OR --|           | FLG_OPN_BS = 0
      FLG_CLUP = 1 ----------|                 | FLG_DLY_SOSC = 0
                                               |
                                               | --- ELSE ---
      FLG_SFT_UP = 1 --------------------|     |
                                         |AND -| FLG_UPS_EXIT = 1
      TM_SFT_EXIT > 0 -------------------|     |
                                               | --- ELSE ---
                                               |
                                               | FLG_UPS_EXIT = 0


      FLG_SFT_DN = 1 --------------------|
                                         |      
      DELTA_RATIO > DSRDE[GR_CM] --------|AND -| TM_SFT_SLP = TMD[GR_CM]SLP
                                         |     
      TM_SFT_SLP > TMD[GR_CM]SLP --------|     


      FLG_SFT_DN = 1 --------------------|     
                                         |AND -| FLG_DNS_CTL = 1
      TM_SFT_SLP > 0 --------------------|     | FLG_DNS_EXIT = 0
                                               |
                                               | --- ELSE ---
      FLG_SFT_DN = 1 --------------------|     | 
                                         |     | 
      FLG_DNS_CTL = 1 -------------------|AND -| FLG_DNS_CTL = 0
                                         |     | FLG_DNS_EXIT = 1
      FLG_DNS_EXIT = 0 ------------------|     | TM_SFT_EXIT = TMDNSEXIT
                                               |
                                               | --- ELSE ---
      FLG_SFT_DN = 1 --------------------|     | 
                                         |AND -| FLG_DNS_CTL = 0
      TM_SFT_EXIT > 0 -------------------|     | FLG_DNS_EXIT = 1
                                               |
                                               | --- ELSE ---
                                               |
                                               | FLG_DNS_CTL = 0
                                               | FLG_DNS_EXIT = 0


                                        23-27

        CONVERTER CLUTCH CONTROL, BYPASS CLUTCH DUTY CYCLE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                          BYPASS CLUTCH DUTY CYCLE CALCULATION


      OVERVIEW

      The Bypass Clutch Duty Cycle  Calculation  calculates  the  appropriate  duty
      cycle BCSDC, based on the particular bypass clutch mode.

       -  Unconditional unlock mode - BCSDC is set to BCSDC_OPN %.

       -  Engage mode - BCSDC is determined by running  the  PID  controller.   The
          controller  seeks  to  maintain  the  desired  slip  rpm by increasing or
          decreasing duty cycle within the limits of the duty cycle clips.

       -  Hardlock mode - BCSDC is determined by running the PID controller  up  to
          the  limit  of  the  maximum clip FNENGDC(TQ_NET) The PID controller then
          increases the dutycycle to BCSDC_HRD to prevent any slip.




      DEFINITIONS

      INPUTS

      Registers:

       -  BCSDC_SFT_ST = Modulated bypass clutch duty cycle at start of shift.

       -  DELTA_RATIO = Delta shift ratio change since command of shift.

       -  DT12S_AVG = Filtered pip delta for transmission, clock ticks.

       -  GR_CM = Commanded gear for shift solenoids.

       -  NEBART = Filtered engine RPM for transmission.

       -  NOBART = Filtered output shaft speed in RPM.

       -  RT_GR_CUR = Current transmission gear ratio, dimensionless.

       -  SPD_RATIO = Speed ratio across torque converter (output / input).

       -  SPD_RT_STRT = Speed ratio across torque converter at start of shift.

       -  SR_PP_LIM = Power on upshift speed ratio, pip-to-pip limit.

       -  STCF = Seconds-to-ticks coinversion factor.

      Bit Flags:

       -  FLG_BCSDCNXT = Set when start of shift detected  -  causes  execution  of
          BCSDC as next background task.

       -  FLG_DLY_SOSC = Flag used to delay  millisecond  "start  of  shift"  check
          until SR_PP_LIM is calculated once; 1 -> allow millisecond check.




                                        23-28

        CONVERTER CLUTCH CONTROL, BYPASS CLUTCH DUTY CYCLE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FLG_CLUP = Flag indicating closed loop/BCSDC freeze region for upshifts.

       -  FLG_CRV_LK = Scheduled curve lock-up flag; 0 -> no scheduled lock-up.

       -  FLG_DNS_CTL = Downshift slip modulation flag.

       -  FLG_OPN_BS = Flag indicating converter open at start  of  upshift;  1  ->
          open.

       -  FLG_UCTL_LST = Last pass value of FLG_UPS_CTL.

       -  FLG_UPS_CTL = Upshift modulation flag.

       -  FLG_FRST_CM = First time a  shift  is  commanded  flag;  0  ->  no  shift
          commanded.

       -  FLG_SFT_STRT = Set when waiting to detect start of shift  once  its  been
          commanded.

       -  FLG_SFT_DN = Downshift flag.

       -  FLG_SFT_UP = Upshift flag.

       -  FLG_UNC_UNLK = Converter  clutch  unconditional  unlock  flag;  0  ->  no
          unconditional unlock; 1 -> unconditional unlock.

      Calibration Constants:

       -  BCSDC_HRD = BCSDC when converter is hardlock.

       -  BCSDC_OPN = BCSDC when converter is open.

       -  DCSTROKE = FNDCNOCAP adder during stroke mode.

       -  DSRU2 = Delta Shift Ratio on Upshift to 2nd to indicate shift started.

       -  DSRU3 = Delta Shift Ratio on Upshift to 3rd to indicate shift started.

       -  DSRU4 = Delta Shift Ratio on Upshift to 4th to indicate start of shift.

       -  FNDCNOCAP = BCSDC value at which the converter has NO capacity.

       -  FNDNSSFT32 = BCSDC modulation on 3-2 shifts.

       -  FNDNSSFT43 = BCSDC modulation on 4-3 shifts.

       -  FNENGDC = BCSDC initialization point for entering engage mode.

       -  FNUPSSFT23 = BCSDC modulation on 2-3 shifts.

       -  FNUPSSFT34 = BCSDC modulation on 3-4 shifts.

       -  PUL_PER_REV = Pulses per revolution number of pips per engine  revolution
          for E4OD_GAS 1/2 the number of fuel pump.

       -  SW_MLK = Switch for manual converter clutch control; 0 -> automatic  c.c.
          control; 1 -> unconditional c.c.  lockup.



                                        23-29

        CONVERTER CLUTCH CONTROL, BYPASS CLUTCH DUTY CYCLE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  SW_SUPD = Switch to activate 2nd update of information for c.c.   upshift
          control; 1 -> update at end of closed loop control.



      OUTPUTS

      Registers:

       -  BCSDC = Modulated Bypass Clutch Duty Cycle.

       -  BCSDC_SFT_ST = See above.

       -  DELTA_RATIO = See above.

       -  FLG_TIP = Modulated Bypass Clutch tip in/tip out flag; 1  ->  tip  in/tip
          out in progress.

       -  SPD_RATIO = See above.

       -  SPD_RT_STRT = See above.

       -  SR_PP_LIM = See above.

       -  STROKE_TMR = Timer defining BCSDC stroke mode.

      Bit Flags:

       -  FLG_BCSDCNXT = See above.

       -  FLG_DLY_SOSC = See above.

       -  FLG_PID_CTL = Modulated Bypass Clutch PID control flag;  1  ->  Modulated
          Bypass Clutch in PID control.

       -  FLG_SFT_STRT = See above.

       -  FLG_STROKE = Flag indicating Stroke mode active; 1 -> stroke mode active.

       -  FLG_UPS_CTL = See above.




















                                        23-30

        CONVERTER CLUTCH CONTROL, BYPASS CLUTCH DUTY CYCLE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: CCC_BCSDC_CALC_COM5


      (Performed every background loop)


      FLG_FRST_CM = 1 -------------|
                                   |OR --| SPD_RATIO = NOBART * RT_GR_CUR / NEBART 
      FLG_UPS_CTL = 1 -------|     |     | SPD_RT_STRT = SPD_RATIO                 
                             |     |     | BCSDC_SFT_ST = BCSDC                    
      FLG_UCTL_LST = 0 ------|AND -|
                             |
      SW_SUPD = 1 -----------|                                               


      FLG_SFT_STRT = 1 ------------------| SR_PP_LIM = (SPD_RT_STRT + DSRU[GR_CM])
                                         |   * 60 * STCF / (NOBART * RT_GR_CUR *
                                         |   PUL_PER_REV)
                                         | FLG_DLY_SOSC = 1
                                         |  (NOTE to software:  Insure update of
                                         |   FLG_DLY_SOSC follows update of
                                         |   SR_PP_LIM)



      (Performed every 1 mS)


      FLG_SFT_STRT = 1 ------------|
                                   |
      DT12S_AVG > SR_PP_LIM -------|AND -| FLG_SFT_STRT = 0   
                                   |     | FLG_BCSDCNXT = 1 
      FLG_DLY_SOSC = 1 ------------|     | FLG_UPS_CTL = 1
                                         | FLG_DLY_SOSC = 0
                                         | BCSDC_SFT_ST = BCSDC
























                                        23-31

        CONVERTER CLUTCH CONTROL, BYPASS CLUTCH DUTY CYCLE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      (Performed in Background Manager BEFORE every Background TASK)


      FLG_BCSDCNXT = 1 ------------------| DO: Calculate TQ_net as the
                                         |     next background task
                                         | DO: Calculate_BCSDC as
                                         |     the next background task
                                         | FLG_BCSDCNXT = 0



      (Performed once per background loop OR when called as next TASK from
       background manager)


      Calculate_BCSDC:


      FLG_UPS_CTL = 1 -------------------| DELTA_RATIO = max( SPD_RATIO - 
                                         |                    SPD_RT_STRT, 0)
                                         |
                                         | --- ELSE ---
                                         |
      FLG_DNS_CTL = 1 -------------------| DELTA_RATIO = max( SPD_RT_STRT - 
                                         |                    SPD_RATIO, 0)
                                         |
                                         | --- ELSE ---
                                         |
                                         | DELTA_RATIO = 0































                                        23-32

        CONVERTER CLUTCH CONTROL, BYPASS CLUTCH DUTY CYCLE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      SW_MLK = 1 ------------------------| BCSDC = BCSDC_HRD
       (forced hardlock)                 | FLG_PID_CTL = 0
                                         | FLG_TIP = 0
                                         |
                                         | --- ELSE ---
      FLG_BCSDCNXT = 1 ------------|     |
                                   |     | 
      FLG_OPN_BS = 1 --------------|AND -| BCSDC_SFT_ST = FNDCNOCAP(TQ_NET) + 
                                   |     |                 DCSTROKE
      FLG_CRV_LK = 1 --------------|     | FLG_PID_CTL = 0
                                         | FLG_TIP = 0
                                         |
                                         | --- ELSE ---
      FLG_UNC_UNLK = 1 ------------|     | 
       (unconditional unlock)      |     |
                                   |     |
      SW_MLK = 2 ------------------|OR --| BCSDC = BCSDC_OPN
       (forced unlock)             |     | FLG_PID_CTL = 0
                                   |     | FLG_TIP = 0
      FLG_OPN_BS = 1 --------|     |     | FLG_STROKE = 0
                             |AND -|     | STROKE_TMR = 0
      FLG_CLUP = 1 ----------|           |
                                         | --- ELSE ---
      FLG_UPS_CTL = 1 -------------|     |
                                   |AND -| No Change to BCSDC
      FLG_SFT_STRT = 1 ------------|     | FLG_PID_CTL = 0
                                         | FLG_TIP = 0
                                         |
                                         | --- ELSE ---
      FLG_UPS_CTL = 1 -------------|     |
                                   |AND -| BCSDC = BCSDC_SFT_ST *
      GR_CM <= 3 ------------------|     |          FNUPSSFT23(DELTA_RATIO)
                                         | FLG_PID_CTL = 0  
                                         | FLG_TIP = 0
                                         |
                                         | --- ELSE ---
      FLG_UPS_CTL = 1 -------------|     |   
                                   |AND -| BCSDC = BCSDC_SFT_ST *         
      GR_CM = 4 -------------------|     |          FNUPSSFT34(DELTA_RATIO) 
                                         | FLG_PID_CTL = 0  
                                         | FLG_TIP = 0
                                         |
                                         | --- ELSE --- 
      FLG_DNS_CTL = 1 -------------|     |      
                                   |AND -| BCSDC = BCSDC_SFT_ST *         
      GR_CM = 3 -------------------|     |          FNDNSSFT43(DELTA_RATIO) 
                                         | FLG_PID_CTL = 0  
                                         | FLG_TIP = 0
                                         |
                                         | --- ELSE --- 
      FLG_DNS_CTL = 1 -------------|     | 
                                   |AND -| BCSDC = BCSDC_SFT_ST *     
      GR_CM <= 2 ------------------|     |          FNDNSSFT32(DELTA_RATIO)  
                                         | FLG_PID_CTL = 0  
                                         | FLG_TIP = 0
                                         |
                                         | --- ELSE ---
                                         |
                                         | Do: PID Control Logic

                                        23-33

        CONVERTER CLUTCH CONTROL, BYPASS CLUTCH DUTY CYCLE CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      always ----------------| BCSDC = min( BCSDC_HRD, max( BCSDC_OPN, BCSDC) )



























































                                        23-34

                 CONVERTER CLUTCH CONTROL, PID CONTROL LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    PID CONTROL LOGIC


      OVERVIEW

      The PID Control Logic module controls the duty cycle  to  the  bypass  clutch
      based  on  the  difference  between  desired slip and actual slip.  Integral,
      derivative, and proportional terms are used.  When PID  control  is  entered,
      the  error terms are zeroed and the integral term is initialized to reproduce
      the current duty cycle.  The range of duty cycle is clipped to BCSDC_HRD as a
      maximum and BCSDC_OPN as a minimum.

      When a transition occurs from hardlock to engage or open mode, the duty cycle
      is  initialized  to  FNDCNOSLIP(TQ_NET)  to  bring  it closer to the probable
      operating point.

      When a transition occurs from open to engage or hardlock mode, the duty cycle
      is  initialized  to  FNDCNOCAP(TQ_NET)  +  DCSTROKE and held for STROKE_TM to
      allow the actuator to move closer to the probable operating point.



      DEFINITIONS

      INPUTS

      Registers:

       -  BCSDC = Modulated bypass clutch Duty Cycle.

       -  BCSDC_D = BCSDC D term.

       -  BCSDC_I = BCSDC I term.

       -  BCSDC_P = BCSDC P term.

       -  BG_TMR = Background loop timer.

       -  ERR_T0 = Current slip error = SLIP_ABS - SLIP_DES, rpm.

       -  ERR_T1 = Last pass slip error, rpm.

       -  KGAIN_D = D-term gain = FNKGAIN_D(TQ_BAR).

       -  KGAIN_I = I-term gain = FNKGAIN_I(TQ_BAR).

       -  KGAIN_D = P-term gain = FNKGAIN_P(TQ_BAR).

       -  SLIP_ABS = Absolute value of slip.

       -  SLP_ABS_CNT = Count of background loops where SLIP_ABS < SLP_ABS_HRD.

       -  SPD_RATIO = Speed ratio across torque converter (Output / Input).

       -  STROKE_SLP = SLIP_ABS at start of STROKE mode.

       -  STROKE_TMR = STROKE mode timer.



                                        23-35

                 CONVERTER CLUTCH CONTROL, PID CONTROL LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  TP_REL = Relative TP (TP - RATCH).

       -  TQ_NET = Net torque into torque converter.

       -  TQ_BAR = Filtered TQ_NET.

      Bit Flags:

       -  FLG_CLUP = Flag indicating closed loop/BCSDC freeze region for upshifts.

       -  FLG_HRD_JMP = Flag indicating a jump to hardlock based on high TP and  SR
          is requested.

       -  FLG_HRD_LK = Modulated bypass clutch hardlock mode flag; 1 -> In hardlock
          mode.

       -  FLG_HRD_LST = Last pass state of FLG_HRD_LK used to detect transitions.

       -  FLG_OLUP = Flag indicating open loop control region for upshifts.

       -  FLG_OLUP_LST = Value of FLG_OLUP from previous background loop.

       -  FLG_OT_LK = Transmission overtemperature lockup mode flag.

       -  FLG_STROKE = STROKE mode enabled, BCSDC is held at FNEMGDC1.

       -  FLG_OPEN = MULS is in open mode; no capacity when set.

       -  FLG_OPEN_LST = Last pass value of FLG_OPEN used to detect transitions.

       -  FLG_PID_CTL = Modulated bypass clutch control flag; 1 -> Modulated bypass
          clutch in PID control.

       -  FLG_TIP = Modulated bypass clutch tip in/tip out flag; 1  ->  Tip  in/tip
          out in progress.

      Calibration Constants:

       -  BCSDC_HR = BCSDC hardlock ramp rate; rate at which BCSDC  increases  when
          hardlock is requested.

       -  BCSDC_HR1 = BCSDC hardlock ramp rate - rate at which BCSDC increases when
          hardlock mode requested due to high TP

       -  BCSDC_HR2 = BCSDC hardlock ramp rate - rate at which BCSDC increases when
          hard lock mode reqested after upshift.

       -  BCSDC_HRD = BCSDC when converter is hardlock.

       -  BCSDC_OPN = BCSDC when converter is open.

       -  FNKGAIN_D = D-term gain = Fn(TQ_BAR).

       -  FNKGAIN_DU = D-term gain for upshifts = FN(TQ_BAR).

       -  FNKGAIN_I = I-term gain = Fn(TQ_BAR).




                                        23-36

                 CONVERTER CLUTCH CONTROL, PID CONTROL LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FNKGAIN_IU = I-term gain for upshifts = FN(TQ_BAR).

       -  FNKGAIN_P = P- term gain = Fn(TQ_BAR).

       -  FNKGAIN_PU = P-term gain during upshifts = FN(TQ_BAR).

       -  SLP_ABS_HRD = SLIP_ABS at which BCSDC jumps to BCSDC_HRD is allowed.

       -  SLP_ABS_LVL = Value of SLP_ABS_CNT at and above which BCSDC is allowed to
          jump to BCSDC_HRD.

       -  SR_HL = Speed ratio across torque converter at which a jump  to  hardlock
          mode is initiated.

       -  SR_HL_OT = Speed ratio  across  torque  converter  at  which  a  jump  to
          hardlock mode is initiated in overtemp mode.

       -  STROKE_DRP = STROKE mode SLIP_ABS drop to exit mode.

       -  STROKE_TM = STROKE mode default duration.

       -  TP_HL = Relative TP at which a jump to hardlock mode is initiated.



      OUTPUTS

      Registers:

       -  BCSDC = See above.

       -  BCSDC_D = See above.

       -  BCSDC_I = See above.

       -  BCSDC_P = See above.

       -  ERR_T0 = See above.

       -  ERR_T1 = See above.

       -  KGAIN_D = See above.

       -  KGAIN_I = See above.

       -  KGAIN_D = See above.

       -  KGAIN_P = P-term gain = FNKGAIN_P(TQ_BAR).

       -  SLIP_DES = Desired value of slip.

       -  SLP_ABS_CNT = See above.

       -  STROKE_SLP = See above.

       -  STROKE_TMR = See above.




                                        23-37

                 CONVERTER CLUTCH CONTROL, PID CONTROL LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Bit Flags:

       -  FLG_HRD_JMP = See above.

       -  FLG_HRD_MODE = Flag indicating converter clutch is physically hardlocked.

       -  FLG_PID_CTL = See above.

       -  FLG_STROKE = See above.

       -  FLG_UPS_JMP = Flag indicating jump  to  hardlock  mode  request  -  after
          upshift.
















































                                        23-38

                 CONVERTER CLUTCH CONTROL, PID CONTROL LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: CCC_BYP_PID_CTL_COM4


      FLG_TIP = 1 ------------------------| FLG_PID_CTL = 0
       (tip in, tip out in progress)      | Exit PID control logic


      SLIP_ABS < SLP_ABS_HRD -------|
                                    |AND -| SLP_ABS_CNT = 
      FLG_PID_CTL = 1 --------------|     |    min(SLP_ABS_CNT+1,255)
                                          |
                                          | --- ELSE ---
                                          |
                                          | SLP_ABS_CNT = 0


      SLP_ABS_CNT >= SLP_ABS_LVL ---------| slp_abs_enb = 1
                                          |
                                          | --- ELSE ---
                                          |
                                          | slp_abs_enb = 0






































                                        23-39

                 CONVERTER CLUTCH CONTROL, PID CONTROL LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      FLG_OPEN = 0 -----------------|
                                    |
      FLG_OPEN_LST = 1 -------------|
                                    |      
      BCSDC = BCSDC_OPN ------------|AND -| STROKE_TMR = STROKE_TM 
                                    |     | STROKE_SLP = SLIP_ABS
      FLG_CLUP = 0 -----------------|     |  (transition from OPEN mode with
                                    |     |   BCSDC at OPN value - Load STROKE
      FLG_OLUP = 0 -----------------|     |   timer and grab value of SLIP_ABS
                                          |
                                          | --- ELSE ---
                                          |
      FLG_OPEN = 1 -----------------|     | 
                                    |OR --| STROKE_TMR = 0
      STROKE_SLP - SLIP_ABS         |     |  (either STROKE canceled because
                   > STROKE_DRP ----|     |   OPEN requested, or SLIP_ABS drop 
                                          |   seen - clear delay timer)


      STROKE_TMR > 0 ---------------------| FLG_STROKE = 1
                                          |  (STROKE mode enabled)
                                          |
                                          | --- ELSE ---
                                          |
                                          | FLG_STROKE = 0
                                          |  (STROKE mode disabled)


      TP_REL > TP_HL ---------|
                              |AND -|
      SPD_RATIO > SR_HL ------|     |     
                                    |OR --| hrd_jmp_enb = 1
      TP_REL > TP_HL ---------|     |     | 
                              |     |     |
      FLG_OT_LK = 1 ----------|AND--|     |
                              |           | 
      SPD_RATIO > SR_HL_OT ---|           | 
                                          | --- else ---
                                          |
                                          | hrd_jmp_enb = 0




















                                        23-40

                 CONVERTER CLUTCH CONTROL, PID CONTROL LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      FLG_STROKE = 1 ---------------------| BCSDC = FNDCNOCAP(TQ_NET) + DCSTROKE
                                          | FLG_PID_CTL = 0
                                          | flg_pid_rset = 0
                                          | FLG_HRD_MODE = 0
                                          | FLG_HRD_JMP = 0 
                                          | FLG_UPS_JMP = 0
                                          | 
                                          | --- ELSE ---
      FLG_OPEN = 0 -----------------|     |
                                    |     |
      FLG_PID_CTL = 0 --------------|AND -| BCSDC = FNDCNOCAP(TQ_NET)
                                    |     | FLG_PID_CTL = 1     
      BCSDC < FNDCNOCAP(TQ_NET) ----|     | flg_pid_rset = 1    
                                          | FLG_HRD_MODE = 0    
                                          | FLG_HRD_JMP = 0
                                          | FLG_UPS_JMP = 0
                                          |
                                          | --- ELSE ---
      FLG_OPEN = 1 -----------------|     |
                                    |AND -| BCSDC = BCSDC_OPN           
      BCSDC < FNDCNOCAP(TQ_NET) ----|     | FLG_PID_CTL = 0              
                                          | flg_pid_rset = 0 
                                          | FLG_HRD_MODE = 0            
                                          | FLG_HRD_JMP = 0             
                                          | FLG_UPS_JMP = 0
                                          |                           
                                          | --- ELSE ---                 
      FLG_HRD_LK = 0 ---------------|     |
                                    |     |
      FLG_HRD_LST = 1 --------|     |     |
                              |OR --|AND -| BCSDC = FNDCNOSLIP(TQ_NET)  
      FLG_PID_CTL = 0 --------|     |     | FLG_PID_CTL = 1             
                                    |     | flg_pid_rset = 1            
      BCSDC > FNDCNOSLIP(TQ_NET) ---|     | FLG_HRD_MODE = 0 
                                          | FLG_HRD_JMP = 0  
                                          | FLG_UPS_JMP = 0
                                          |                              
                                          | --- ELSE ---                 
      FLG_HRD_LK = 1 ---------------|     | 
                                    |AND -| bcsdc = BCSDC + BCSDC_HR * BG_TMR
      slp_abs_enb = 1 --------|     |     | BCSDC = min(bcsdc, BCSDC_HRD)    
                              |OR --|     | FLG_PID_CTL = 0                  
      FLG_HRD_MODE = 1 -------|           | flg_pid_rset = 0                 
                                          | FLG_HRD_MODE = 1                 
                                          | FLG_HRD_JMP = 0                  
                                          | FLG_UPS_JMP = 0
                                          |  (NOTE: BCSDC_HR * BG_TMR is clipped
                                          |   to a minimum of the lsb set.)
                                          |
                                          | --- ELSE ---

                                (continued on next page)








                                        23-41

                 CONVERTER CLUTCH CONTROL, PID CONTROL LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

      FLG_HRD_LK = 1 ---------------|     | 
                                    |AND -| bcsdc = BCSDC + BCSDC_HR1 * BG_TMR
      hrd_jmp_enb = 1 --------|     |     | BCSDC = min(bcsdc, BCSDC_HRD)         
                              |OR --|     | FLG_PID_CTL = 0                
      FLG_HRD_JMP = 1 --------|           | flg_pid_rset = 0                  
                                          | FLG_HRD_MODE = 0              
                                          | FLG_HRD_JMP = 1               
                                          | FLG_UPS_JMP = 0
                                          |  (NOTE: BCSDC_HR1 * BG_TMR is clipped
                                          |   to a minimum of the lsb set.)
                                          |
                                          | --- ELSE ---
      FLG_HRD_LK = 1 ---------|           |
                              |           |
      FLG_OLUP = 0 -----------|AND -|     |
                              |     |     |
      FLG_OLUP_LST = 1 -------|     |     |
                                    |OR --| bcsdc = BCSDC + BCSDC_HR2 * BG_TMR
      FLG_HRD_LK -------------|     |     | BCSDC = min(bcsdc, BCSDC_HRD)
                              |AND -|     | FLG_PID_CTL = 0
      FLG_UPS_JMP = 1 --------|           | flg_pid_rset = 0
                                          | FLG_HRD_MODE = 0
                                          | FLG_UPS_JMP = 1
                                          |  (NOTE: BCSDC_HR2 * BG_TMR is clipped
                                          |   to a minimum of the lsb set.)
                                          |
                                          | --- ELSE ---
                                          |
      FLG_PID_CTL = 0 --------------------| FLG_PID_CTL = 1
                                          | flg_pid_rset = 1   
                                          | FLG_HRD_MODE = 0
                                          | FLG_HRD_JMP = 0
                                          | FLG_UPS_JMP = 0
                                          |
                                          | --- ELSE ---
                                          |
                                          | FLG_PID_CTL = 1
                                          | flg_pid_rset = 0   
                                          | FLG_HRD_MODE = 0
                                          | FLG_HRD_JMP = 0       
                                          | FLG_UPS_JMP = 0

















                                        23-42

                 CONVERTER CLUTCH CONTROL, PID CONTROL LOGIC - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      flg_pid_rset = 1 -------------------| flg_pid_rset = 0
                                          | SLIP_DES = SLIP_ABS
                                          | ERR_T0 = 0
                                          | ERR_T1 = 0
                                          | BCSDC_I = BCSDC
                                          |  (initialize entry duty cycle)
                                          |
                                          | --- ELSE ---
      FLG_PID_CTL = 1 --------------|     |
                                    |AND -| KGAIN_P = FNKGAIN_PU(TQ_BAR)
      FLG_CLUP = 1 -----------------|     | KGAIN_I = FNKGAIN_IU(TQ_BAR)
                                          | KGAIN_D = FNKGAIN_DU(TQ_BAR)
                                          |
                                          | --- ELSE ---
                                          |
      FLG_PID_CTL = 1 --------------------| KGAIN_P = FNKGAIN_P(TQ_BAR)
                                          | KGAIN_I = FNKGAIN_I(TQ_BAR)
                                          | KGAIN_D = FNKGAIN_D(TQ_BAR)


      FLG_PID_CTL = 1 --------------------| BCSDC_P = KGAIN_P * ERR_T0
                                          | inc(BCSDC_I, KGAIN_I * ERR_T0 * BG_TMR)
                                          | BCSDC_D = KGAIN_D * 
                                          |   (ERR_T0 - ERR_T1) / BG_TMR )
                                          | BCSDC = BCSDC_P + BCSDC_I + BCSDC_D
                                          |
                                          | --- ELSE ---
                                          |
                                          | no action































                                        23-43

                  CONVERTER CLUTCH CONTROL, SLIP CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    SLIP CALCULATION


      OVERVIEW

      The Slip Calculation module calculates slip error  based  on  the  difference
      between  the  desired  slip  SLIP_DES  and  the absolute value of actual slip
      SLIP_ABS.  The result is stored in ERR_T0.

      Different desired slip filter rates are provided  for  each  gear,  when  the
      bypass  clutch is being applied or released, as well as after a tip in or tip
      out is complete.



      DEFINITIONS

      INPUTS

      Registers:

       -  BG_TMR = Background loop timer.

       -  ERR_T0 = Current slip error (SLIP_ABS - SLIP_DES).

       -  GR_CM = Commanded gear for shift solenoids.

       -  NEBART = Filtered engine RPM for transmission

       -  NOBART = Filtered Output Shaft Speed, RPM.

       -  NTBART = Filtered transmission turbine speed.

       -  PDL = PRNDL position, from A/D conversion.

       -  RT_GR_OLD = Last Transmission Gear Ratio, dimensionless.

       -  SLIP_ABS = Absolute value of SLIP = NEBART - NTBART, rpm.

       -  SLIP_DES = Desired value of slip, rpm.

       -  SLIP_TARGET = Target slip value from tables, rpm.

       -  TM_VER_SFT = Time to verify automatic desired shift.

      Bit Flags:

       -  FLG_CLUP = Flag indicating closed loop/bcsdc freeze region for upshifts.

       -  FLG_CRV_LK = Scheduled curve lockup flag.

       -  FLG_DNS_CTL = Downshift slip modulation flag; 1 -> Modifying  SLIP_TARGET
          during downshift.

       -  FLG_DNS_EXIT = In downshift exit mode.

       -  FLG_UNLK_DS = Converter unlock in progress flag.



                                        23-44

                  CONVERTER CLUTCH CONTROL, SLIP CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FLG_UPS_EXIT = In upshift exit mode.

      Calibration Constants:

       -  GRRAT2 = Gear ratio for second.

       -  SLIP_RMAX = SLIP_RATE above which SLIP_TARGET = SLIP_DES.

       -  SRDNSFT = Downshift - Maximum rate of change of SLIP_DES.

       -  SRDNSEXSFT = Downshift Exit - Maximum rate of change of SLIP_DES.

       -  SRUPSFT = Upshift - Maximum rate of change of SLIP_DES.

       -  SRUPSEXSFT = Upshift Exit - Maximum rate of change of SLIP_DES.



      OUTPUTS

      Registers:

       -  ERR_T0 = See above.

       -  ERR_T1 = Last pass slip error.

       -  SLIP_ABS = See above.

       -  SLIP_DES = See above.

       -  SLIP_DES_LST = Previous value of SLIP_DES.





























                                        23-45

                  CONVERTER CLUTCH CONTROL, SLIP CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: CCC_BYP_SLIP_CALC_COM5


      FLG_CLUP = 1 ---------------------------| slip_rate = SRUPSFT
                                              |                
                                              | --- ELSE ---   
      FLG_DNS_CTL = 1 ------------------|     |                
                                        |OR --| slip_rate = SRDNSFT
      FLG_UNLK_DS = 1 ------------------|     |                
                                              | --- ELSE ---   
                                              |                
      FLG_UPS_EXIT = 1 -----------------------| slip_rate = SRUPSEXSFT
                                              |                
                                              | --- ELSE ---   
                                              |                
      FLG_DNS_EXIT = 1 -----------------------| slip_rate = SRDNSEXSFT
                                              |                
                                              | --- ELSE ---   
                                              |                
      FLG_CRV_LK = 0 -------------------------| slip_rate = SR[GR_CM]UNL
                                              |                
                                              | --- ELSE ---   
                                              |                
                                              | slip_rate = SR[GR_CM]


      FLG_CLUP = 1 ---------------------|
                                        |AND -| SLIP_ABS = 
      TM_VER_SFT = 0 -------------------|     |   abs(NEBART - NOBART * RT_GR_OLD)
                                              |
                                              | --- ELSE ---
      GR_CM = 3 ------------------------|     |
                                        |AND -| SLIP_ABS = 
      PDL = 2 --------------------------|     |   abs(NEBART - NOBART * GRRAT2)
                                              |
                                              | --- ELSE ---
                                              |
                                              | SLIP_ABS = abs(NEBART - NTBART)


      always ---------------------------------| slip_step = slip_rate * BG_TMR
                                              | SLIP_DES_LST = SLIP_DES

















                                        23-46

                  CONVERTER CLUTCH CONTROL, SLIP CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      slip_rate > SLIP_RMAX ------------------| SLIP_DES = SLIP_TARGET
                                              |
                                              | --- ELSE ---
                                              |
      SLIP_TARGET - SLIP_DES > slip_step -----| inc(SLIP_DES, slip_step)
                                              |
                                              | --- ELSE ---
                                              |
      SLIP_DES - SLIP_TARGET > slip_step -----| dec(SLIP_DES, slip_step)
                                              |
                                              | --- ELSE ---    
                                              |
                                              | SLIP_DES = SLIP_TARGET


      always ---------------------------------| ERR_T1 = ERR_T0
                                              | ERR_T0 = SLIP_ABS - SLIP_DES











































                                        23-47

            CONVERTER CLUTCH CONTROL, SCHEDULED LOCK/UNLOCK LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               SCHEDULED LOCK/UNLOCK LOGIC


      OVERVIEW

      This logic schedules converter clutch applies and releases on  the  basis  of
      sea level and altitude lock and unlock curves.


      DEFINITIONS

      INPUTS

      Registers:

       -  BP_INTR = output of FN615(BP).  This is used to  modify  shift  schedules
          and converter lockup as a function of barometric pressure.

       -  GR_CM = Commanded gear for shift solenoids.

       -  RATCH = Closed throttle position, counts.

       -  RT_NOVS = Ratio of actual N/V to base N/V in KAM.

       -  SPD_RATIO = Speed ratio across the torque converter.

       -  TP = Throttle position.

       -  TP_REL_H = Relative TP (TP - RATCH); high byte only.

       -  TQ_NET = Calculated engine torque, ft-lb.

       -  VSBART_RT = Filtered vehicle speed adjusted for RT_NOVS for transmission,
          mph.

      Bit Flags:

       -  FLG_CRV_DS = Scheduled lockup desired from curve flag.

       -  FLG_FMM_LK = Failure Mode Management lock-up flag; 1  ->  lock  converter
          due to FMEM action.

       -  FLG_OT_LK = Transmission overtemp lock  up  mode;  1  ->  overtemperature
          mode.

       -  FLG_SFT_IN = Shift in progress flag.

       -  FLG_UNC_UNLK = Converter  clutch  unconditional  unlock  flag;  0  ->  no
          unconditional unlock, 1 -> unconditional unlock.











                                        23-48

            CONVERTER CLUTCH CONTROL, SCHEDULED LOCK/UNLOCK LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  FN615(BP) = Interpolation factor vs.   barometric  pressure.   Output  is
          saved as BP_INTR.

       -  FNHOTL(TP_REL_H) = Vehicle speed for overtemp lockup.

       -  FNHOTU(TP_REL_H) = Vehicle speed for overtemp unlock.

       -  FN_SRLK(TQ_NET) = Function to  determine  minimum  speed  ratio  to  lock
          converter based on TQ_NET.

       -  GR_HOT = Minimum gear to use overtemp lock up schedules.



      OUTPUTS

      Bit Flags:

       -  FLG_CRV_DS = See above.

       -  FLG_CRV_LK = See above.

       -  FLG_CRV_LST = Last pass value of FLG_CRV_DS.



































                                        23-49

            CONVERTER CLUTCH CONTROL, SCHEDULED LOCK/UNLOCK LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                       STRATEGY MODULE: CCC_SCHLD_LCK_UNLCK_COM11


      always ---------------------------------| FLG_CRV_LST = FLG_CRV_DS



      GR_CM >= GR_HOT ------------------|
                                        |AND -| vs_lk = FNHOTL
      FLG_OT_LK = 1 --------------------|     |
                                              | vs_unlk = FNHOTU
                                              |
                                              | --- ELSE ---
                                              |
      GR_CM <> 1 -----------------------------| vs_lk = FN[GR_CM]LS +
                                              |          BP_INTR * FN[GR_CM]LA
                                              |
                                              | vs_unlk = FN[GR_CM]US +
                                              |            BP_INTR * FN[GR_CM]UA



      GR_CM <> 1 -------------------|
                                    |AND -|
      SPD_RATIO >= FN_SRLK(TQ_NET) -|     |OR --| ratio_ok = 1
                                          |     |
      FLG_SFT_IN = 1 ---------------------|     |
       (shifting disregard speed ratio)         |
                                                | --- ELSE ---
                                                |
                                                | ratio_ok = 0




























                                        23-50

            CONVERTER CLUTCH CONTROL, SCHEDULED LOCK/UNLOCK LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      GR_CM = 1 ------------------------------| FLG_CRV_DS = 0
                                              | (no scheduled lock
                                              |  in 1st gear)
                                              |
                                              | --- ELSE ---
      ratio_ok = 1 ---------------|           |
                                  |AND -|     |
      VSBART_RT > vs_lk ----------|     |OR --| FLG_CRV_DS = 1
                                        |     |
      FLG_FMM_LK = 1 -------------------|     |
                                              | --- ELSE ---
                                              |
      VSBART_RT < vs_unlk --------------------| FLG_CRV_DS = 0
                                              |
                                              | --- ELSE ---
                                              |
                                              | No change to
                                              | FLG_CRV_DS



      FLG_UNC_UNLK = 1 -----------------------| FLG_CRV_LK = 0
       (unconditional unlock)                 |  (unconditional unlock,
                                              |   ignore desired state)
                                              |
                                              | --- ELSE ---
                                              |
                                              | FLG_CRV_LK = FLG_CRV_DS
                                              |  (allow desired state to
                                              |   pass through)






























                                        23-51

      CONVERTER CLUTCH CONTROL, MODULATED BYPASS CLUTCH SLIP BREAK AWAY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                  MODULATED BYPASS CLUTCH (CONTINUOUS) SLIP BREAK AWAY


      OVERVIEW

      This test is designed to dertermine if the converter clutch is going  out  of
      control  (breaks away) during continuous slip operation.  In the event that a
      break away is detected, a counter is incremented.  If a  calibratable  number
      of  break aways have been detected continuous slip mode will be disabled (for
      a calibratable number of warm up cycles),  and  hardlock  will  be  commanded
      whenever continuous slip is asked for by the strategy.

      The modulated bypass clutch continuous slip  test  has  three  modes  (ENTRY,
      TEST, and VERIFY).


      1.  ENTRY MODE (FLG_TST_BRK = 0, FLG_VER_BRK = 0):

          during this mode the test looks  for  slip  to  enter  a  control  region
          (SLIP_ABS  - SLIP_DES < ERR_TST_BRK) to determine if the test mode can be
          entered.  Upon entering continuous slip mode, after a transient, or after
          a  break  away,  slip  must enter the control region before the test mode
          will be entered.

      2.  TEST MODE (FLG_TST_BRK = 1, FLG_VER_BRK = 0):

          Once slip is within the control region, this mode checks that slip  stays
          within the expected operating region (SLIP_ABS - SLIP_DES < ERR_BRK_AWAY)
          as long as there has been no transient to account for the change in  slip
          (the  test  will  return  to  entry  mode if a transient occurs).  If the
          converter clutch does break away (SLIP_ABS -  SLIP_DES  >  ERR_BRK_AWAY),
          the verify mode is entered.

      3.  VERIFY MODE (FLG_TST_BRK = 0, FLG_VER_BRK = 1):

          In this mode the time slip enters the break away zone is stored, and  the
          test  then  looks  for  slip  to  remain  in  the break away region for a
          calibratable amount of time to verify that  a  break  away  has  occurred
          (prevent noise from being counted as a break away).  If the break away is
          verified this mode looks at the time between break aways to determine  if
          the  frequency  of break aways is within the expected range.  if the time
          between  break  aways  is  within  range,  the  break  away  counter   is
          incremented;  otherwise  the  counter is reset to zero.  The test records
          when the break away occurred (saves the time the break away  occurred  at
          for the frequency check the next time a break away is verified), and then
          returns to entry mode, waiting slip to enter the  control  region  before
          testing it again (only count a break away once).


      Once a calibratable nunber of break aways have occurred, continuous slip mode
      will be disabled until a calibratable number of warm up cycles have occurred.

      If too much time has pas since the last break away, the  break  away  counter
      will be set to zero.






                                        23-52

      CONVERTER CLUTCH CONTROL, MODULATED BYPASS CLUTCH SLIP BREAK AWAY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  AC_STATE_ENT  =  AC  clutch  state  at  the  entry  of  converter  clutch
          continuous slip test mode.

       -  BRK_AWAY_CNT = The number of converter clutch break aways detected.

       -  DCSM_WU_CNT = Number of warm up cycles that continuous slip mode has been
          disabled.

       -  ERR_T0 = Current slip error (SLIP_ABS - SLIP_DES).

       -  SLIP_DES = Desired value of slip.

       -  SLIP_DES_LST = Previous value of SLIP_DES.

       -  SLP_TDLY_TMR = Converter clutch  continuous  slip  test  transient  delay
          timer.

       -  TMSLBRK = Time since last converter clutch break away.

       -  TIME_BRK_AWY = Time at which the current break away occurred.

       -  TIME_BRK_PRV = Time at which the previous break away occurred.

       -  TM_BRK_ZONE = Total time ERR_T0 has been in the break away zone.

       -  TP_REL = Relative TP (TP - RATCH).

       -  TP_REL_ENT = Value of TP_REL at the entry of continuous slip test mode.

       -  TQ_NET = Net torque into torque converter.

       -  TQ_NET_ENT = Value of TQ_NET at the entry of continuous slip test mode.

       -  WARM_UP = Indicates engine warm up occurred.

      Bit Flags:

       -  ACCFLG = A/C clutch status; 0 -> disengaged, 1 -> engaged.

       -  C656_KAM_BIT = Converter clutch continuous slip error.

       -  FLG_DCSM_UP = Disable continuous slip warm up counter update flag;  0  ->
          warm up counter has not been updated.

       -  FLG_DIS_CSM = Disable continuous slip mode flag;  0  ->  continuous  slip
          enabled, 1 -> continuous slip disabled.

       -  FLG_HT_MOD = Flag indicating high temperature slip modulation allowed;  1
          -> modulation allowed, 0 -> not allowed.

       -  FLG_OT_LK = Trans.  overtemperature lockup mode flag.



                                        23-53

      CONVERTER CLUTCH CONTROL, MODULATED BYPASS CLUTCH SLIP BREAK AWAY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  FLG_PID_CTL = Mod.  byp.  clutch pid control flag.

       -  FLG_SFT_IN = Shift in progress flag.

       -  FLG_TST_BRK = continuous slip test entry flag; 0 -> do  not  test,  1  ->
          test for break away.

       -  FLG_VER_BRK  =  Verify  converter  clutch  break  away  flag;  0  ->   no
          verification in progress, 1 -> verification in progress.

      Calibration Constants:

       -  BRK_AWAY_LVL = Number of break aways at which  continuous  slip  will  be
          disabled.

       -  CNET_TP_MIN = Minimum throttle position to allow catchnet test entry.

       -  ECSM_LVL = Number of warm up cycles continuous slip mode will be disabled
          before allowing continuous slip mode again.

       -  ENA_CSLP_TST =  Continuous  slip  test  calibration  switch;  0  ->  test
          disabled, 1 -> test enabled.

       -  ERR_BRK_AWAY = Value of  ERR_T0  (with  no  transients)  that  means  the
          converter clutch has broken away.

       -  ERR_TST_BRK = Max value of ERR_T0 to allow continuous slip test  mode  to
          be initiated.

       -  MX_TMSLBRK = Max time between break aways for which the break away  count
          will be updated.

       -  SLIP_DIF_MX = Max change in slip desired under which a break away will be
          recognized.

       -  SLP_TDLY_TIM = Slip transient delay time.

       -  TQ_DIF_MX = Max change in  TQ_NET  under  which  a  break  away  will  be
          recognized.

       -  VER_BRK_TIM = Min time ERR_T0 must  remain  in  break  away  zone  to  be
          counted as a break away.



      OUTPUTS

      Registers:

       -  AC_STATE_ENT = See above.

       -  BRK_AWAY_CNT = See above.

       -  DCSM_WU_CNT = See above.

       -  SLP_TDLY_TMR = See above.




                                        23-54

      CONVERTER CLUTCH CONTROL, MODULATED BYPASS CLUTCH SLIP BREAK AWAY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  TMSLBRK = See above.

       -  TIME_BRK_AWY = See above.

       -  TIME_BRK_PRV = See above.

       -  TM_BRK_ZONE = See above.

       -  TP_REL_ENT = See above.

       -  TQ_NET_ENT = See above.

      Bit Flags:

       -  FLG_DCSM_UP = See above.

       -  FLG_DIS_CSM = See above.

       -  FLG_TST_BRK = See above.

       -  FLG_VER_BRK = See above.







































                                        23-55

      CONVERTER CLUTCH CONTROL, MODULATED BYPASS CLUTCH SLIP BREAK AWAY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: CCC_CSLP_TST_COM2

      Disabled continuous slip mode exit logic:


      DCSM_WU_CNT >= ECSM_LVL -----------|
                                         |OR --| FLG_DIS_CSM = 0
      C656_KAM_BIT = 0 ------------------|     | DCSM_WU_CNT = 0
                                               |  (enough warm up cycles have 
                                               |   passed to re-enable continous 
                                               |   slip mode)
                                               |
                                               | --- ELSE ---
      FLG_DIS_CSM = 1 -------------------|     |
       (continuous slip mode disabled)   |     |
                                         |     |
      FLG_DCSM_UP = 0 -------------------|AND -| DCSM_WU_CNT = DCSM_WU_CNT + 1
       (disabled continuous slip warm up |     | FLG_DCSM_UP = 1
        counter has not been updated)    |     |  (increment disabled continuous 
                                         |     |   slip warm up cycle counter)
      WARM_UP = 1 -----------------------|
       (a warm up cycle has occurred)



      Test logic:


      Update transient determination conditions  if  slip  is  within  the  control
      region:


      |ERR_T0| < ERR_TST_BRK -----------|
       (Slip within the control region) |AND -| TP_REL_ENT = TP_REL
                                        |     | (TP has decreased, save
      TP_REL < TP_REL_ENT --------------|     |  the min. value observed
                                              |  in the control region used
                                              |  to detect transients)



      |ERR_T0| < ERR_TST_BRK -----------|
       (Slip within the control region) |AND -| TQ_NET_ENT = TQ_NET
                                        |     | (TQ has decreased, save
      TQ_NET < TQ_NET_ENT --------------|     |  the min. value observed
                                              |  in the control region, used
                                              |  to detect transients)












                                        23-56

      CONVERTER CLUTCH CONTROL, MODULATED BYPASS CLUTCH SLIP BREAK AWAY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      FLG_HT_MOD = 0 --------------------|
       (not in continuous slip mode)     |     
                                         |     
      FLG_OT_LK = 1 ---------------------|     
       (in hot lockup mode)              |      
                                         |
      ENA_CSLP_TST = 0 ------------------|
       (test disabled)                   |
                                         |
      FLG_PID_CTL = 0 -------------------|
       (not in PID control)              |
                                         |
      |SLIP_DES - SLIP_DES_LST| >        |
                          SLIP_DIF_MX ---|OR --| SLP_TDLY_TMR = SLP_TDLY_TIM
       (Change in desired slip)          |     | BRK_AWAY_CNT = 0
                                         |     | TP_REL_ENT = TP_REL
      FLG_SFT_IN = 1 --------------------|     | TQ_NET_ENT = TQ_NET
       (Shift in progress)               |     | AC_STATE_ENT = ACCFLG
                                         |     | FLG_TST_BRK = 0
      TQ_NET - TQ_NET_ENT > TQ_DIF_MX ---|     | FLG_VER_BRK = 0
       (Torque has increased enough      |     | (Test entry conditions have not
        to cause an increase in slip)    |     |  been met, or a transient has
                                         |     |  occurred, set delay timer and
      TP_REL - TP_REL_ENT > TP_DIF_MX ---|     |  place the test in entry mode)
       (TP has increased enough to       |     | 
        cause an increase in slip)       |     | EXIT this module
                                         |
      TP_REL < CNET_TP_MIN --------------|
       (TP below min value to allow      |
        test entry)                      |
                                         |
      ACCFLG <> AC_STATE_ENT ------------|
       (AC has changed states)     



























                                        23-57

      CONVERTER CLUTCH CONTROL, MODULATED BYPASS CLUTCH SLIP BREAK AWAY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      SLP_TDLY_TMR = 0 ------------------|
       (transient delay over)            |
                                         |
      FLG_TST_BRK = 0 -------------------|AND -| FLG_TST_BRK = 1
       (not in test mode)                |     | FLG_VER_BRK = 0
                                         |     |  (slip has entered the
      |ERR_T0| < ERR_TST_BRK ------------|     |   control region, initiate
       (slip is within the test entry region)  |   test mode)
                                               |
                                               | --- ELSE ---
      FLG_TST_BRK = 1 -------------------|     |
       (in test mode)                    |AND -| FLG_TST_BRK = 0
                                         |     | FLG_VER_BRK = 1
      |ERR_T0| > ERR_BRK_AWAY -----------|     | TIME_BRK_AWY = CLOCK
       (slip is in the break away zone)        | TM_BRK_ZONE = 0
                                               |  (possible break away detected,
                                               |   initiate verify mode and store 
                                               |   the time at which the break 
                                               |   away occurred)
                                               |
                                               | --- ELSE ---
      FLG_VER_BRK = 1 -------------------|     |   
       (in verify mode)                  |AND -| TM_BRK_ZONE =
                                         |     |   CLOCK - TIME_BRK_AWY
      |ERR_T0| > ERR_BRK_AWAY -----------|     |  (slip is still in the break away
       (slip is in the break away zone)        |   zone, calculate total time in
                                               |   the zone)
                                               |
                                               | --- ELSE ---
                                               |
      FLG_VER_BRK = 1 -------------------------| FLG_TST_BRK = 1
       (in verify mode)                        | FLG_VER_BRK = 0
                                               |  (slip is no longer in the break 
                                               |   away zone return to test mode)


























                                        23-58

      CONVERTER CLUTCH CONTROL, MODULATED BYPASS CLUTCH SLIP BREAK AWAY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BRK_AWAY_CNT > 0 ------------------------| TMSLBRK = 
                                               |   CLOCK - TIME_BRK_PRV
                                               |  (calculate time since 
                                               |   last break away)
                                               |
                                               | --- ELSE ---
                                               |
                                               | TMSLBRK = 0
                                               |  (break away count is zero, 
                                               |   set time since last break 
                                               |   away to zero)



      NOTE TO SOFTWARE: Please protect of clock rollovers in the calculation
                        of TMSLBRK.



      FLG_VER_BRK = 1 -------------------|
       (in verify mode)                  |     
                                         |      
      TM_BRK_ZONE > VER_BRK_TIM ---------|AND -| FLG_VER_BRK = 0
       (enough time to verify break away |     | BRK_AWAY_CNT =
        has passed)                      |     |   BRK_AWAY_CNT + 1
                                         |     | TIME_BRK_PRV = TIME_BRK_AWY
      TMSLBRK <= MX_TMSLBRK -------------|     | TM_BRK_ZONE = 0
       (time since last break away is          |  (break away detected,
        within limit)                          |   frequency of break away
                                               |   is within expected range)
                                               |
                                               | --- ELSE ---
                                               |
      TMSLBRK > MX_TMSLBRK --------------------| BRK_AWAY_CNT = 0



      BRK_AWAY_CNT > BRK_AWAY_LVL -------------| FLG_DIS_CSM = 1
                                               |  (disable continuous slip 
                                               |   mode, allow only hardlock
                                               |   mode)
                                               | error detected = 1
                                               | DO: FAULT FILTER for
                                               |  code 656 procedure
















                                        23-59

               MODULATED BYPASS CLUTCH CONTROL, DUCE PULSEWIDTH - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                     DUCE PULSEWIDTH


      OVERVIEW

      This routine computes the modulated bypass clutch solenoid pulsewidth for the
      DUCE chip in units of duce_ticks.


      DEFINITIONS

      INPUTS

      Registers:

       -  BCSDC = Modulated bypass clutch duty cycle.



      OUTPUTS

      Registers:

       -  LUS_PW_DTKS  =  Modulated  bypass  clutch  lockup  solenoid  duty   cycle
          pulsewidth in duce_ticks.

       -  LUS_PW_DUCE = DUCE hardware register.




      PROCESS

                         STRATEGY MODULE: ET_BCSDC_DUCE_PW_COM1


      always -----------------| LUS_PW_DTKS = BCSDC
                              |  (clip to 65535 duce_ticks)
                              |
                              | LUS_PW_DUCE = LUS_PW_DTKS




















                                        23-60

               MODULATED BYPASS CLUTCH CONTROL, DUCE PULSEWIDTH - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL






























































                                        23-61

          CONVERTER CLUTCH CONTROL, FAILURE MODE MANAGEMENT LOCK-UP - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             FAILURE MODE MANAGEMENT LOCK-UP


      OVERVIEW

      This module determines converter clutch lock-ups during  a  TP  Sensor  or  a
      Output  Shaft  Speed Sensor failure.  If the Output Shaft speed sensor fails,
      locks are based on a function of NEBART and TP_REL.  If the TP Sensor  fails,
      locks are based on SPD_RATIO.

      Once an FMEM lock-up is requested, locks continue to be based on this module,
      until the next power-up.

      Unlocks occur as a result of Unconditional unlocks only.



      DEFINITIONS

      INPUTS

      Registers:

       -  GR_CM = Commanded gear.

       -  NEBART = Filter engine speed, RPM.

       -  SPD_RATIO = Speed Ratio across the torque converter.

      Bit Flags:

       -  FLG_FMM_LK = Failure Mode Management lock-up flag; 1  ->  lock  converter
          due to FMEM action.

       -  FLG_FMM_CC = Flag used to insure once FMEM lock-up is  activated,  it  is
          not de-activated until next power-up; 0 -> Failure mode lock-up is not in
          use this power-up, 1 -> Failure mode lock-up is in use this power-up.

       -  FLG_UNC_UNLK = Converter  clutch  unconditional  unlock  flag;  0  ->  no
          unconditional unlock, 1 -> unconditional unlock.

       -  OSFMFLG = Ouput shaft speed sensor FMEM flag; 0 -> no OSS failure,  1  ->
          OSS failure, operating in FMEM mode.

       -  TFMFLG = TP FMEM flag; 0 -> no TP failure, 1 -> TP failure, operating  in
          FMEM mode.














                                        23-62

          CONVERTER CLUTCH CONTROL, FAILURE MODE MANAGEMENT LOCK-UP - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  FN689L(TP_REL) = Engine Speed to lock converter when TP sensor  is  still
          available, for Failure Mode Management, RPM.

       -  NELK_FM = Engine Speed to lock converter when TP sensor has  failed,  for
          Failure Mode Management, RPM.

       -  SRLK_FM = Speed Ratio to lock converter for Failure Mode Management.



      OUTPUTS

      Bit Flags:

       -  FLG_FMM_LK = Failure Mode Management lock-up flag; 1  ->  lock  converter
          due to FMEM action.

       -  FLG_FMM_CC = Flag used to insure once FMEM lock-up is  activated,  it  is
          not de-activated until next power-up; 0 -> Failure mode lock-up is not in
          use this power-up, 1 -> Failure mode lock-up is in use this power-up.






































                                        23-63

          CONVERTER CLUTCH CONTROL, FAILURE MODE MANAGEMENT LOCK-UP - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: CCC_FMEM_COM3


      FLG_FMM_LK = 1 -----------------------------------|     
      (Failure Mode Lock Requested)                     |AND -| FLG_FMM_LK = 0
                                                        |     | (Reset FMEM
      FLG_UNC_UNLK = 1 ---------------------------------|     |  lock-up flag)
      (Unconditional Unlock Requested)



      GR_CM <= 2 ---------------------------------------------| EXIT module
                                                              |
                                                              | --- ELSE ---
                                                              |
      OSFMFLG = 1 --------------------------------|           |
      (OSS failure)                               |           |
                                                  |           |
      TFMFLG = 0 ---------------------|           |AND -|     |
      (TP Sensor OK)                  |AND -|     |     |     |
                                      |     |     |     |     |
      NEBART > FN689L(TP_REL) --------|     |     |     |     |
      (Engine Speed above failure           |OR --|     |     |
       mode minimum)                        |           |OR --| FLG_FMM_LK = 1
                                            |           |     | FLG_FMM_CC = 1
      TFMFLG = 1 ---------------------|     |           |     | (Continue with
      (TP Sensor failure)             |AND -|           |     |  FMEM Lock-up
                                      |                 |     |  until next
      NEBART > NELK_FM ---------------|                 |     |  power-up)
      (Engine Speed above failure                       |     | 
       mode minimum)                                    |     |
                                                        |     |
      TFMFLG = 1 ---------------------------|           |     |
      (TP Sensor Failure)                   |OR --|     |     |
                                            |     |     |     |
      FLG_FMM_CC = 1 -----------------------|     |AND -|     |
      (FMEM lock-up activated this power-up)      |           |
                                                  |           |
      SPD_RATIO > SRLK_FM ------------------------|           |
      (Speed Ratio above failure mode minimum)                |
                                                              | --- ELSE ---
                                                              |
                                                              | No Action
















                                        23-64












                                      CHAPTER 24

                            INPUT CONVERSIONS AND FILTERS

















































                                         24-1

                        INPUT CONVERSIONS AND FILTERS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              INPUT CONVERSIONS AND FILTERS

      DEFINITIONS

      INPUTS

      Registers:

       -  AAT = Ambient Air Temperature, deg F.

       -  ACT = Air charge temperature.

       -  ACSTRT_ACCUM = ACSTRT accumulator, deg F.

       -  APT = Throttle Mode Flag.

       -  ATMR1 = Time since initial engine startup, secs.

       -  BG_TMR = Background loop time, secs.

       -  BPKFLG = Update enable flag for key on updates, unitless.

       -  CLOCK_SEC = DAC able clock in seconds,

       -  DSDRPM = Desired RPM (from ISC logic).

       -  DT12S = The period of time between two  adjacent  rising  edges  of  PIP,
          ticks/pip.

       -  DT12S_AVG = Filtered PIP delta for transmission, clock ticks.

       -  ECT = Coolant temperature, deg F.

       -  ECTCNT = Number of times ECT sensor input was read.

       -  EGRBAR = Rolling average of EVP sensor.

       -  EM = EGR mass flow, lbm/min.

       -  EOFF = The EGR valve position reading when the valve is fully  closed  in
          A/D counts.

       -  EPTZER = EPT sensor value at idle.

       -  EVP = EGR valve position, counts.

       -  IAAT = Raw A/D for ambient air temperature.

       -  IACT = Voltage output by the ACT sensor converted to counts, A/D.

       -  IECT = Voltage output by the ECT sensor converted to counts, A/D.

       -  IEGR = EPT or EVP raw input for EGR.

       -  IIVPWR = Ignition key-on power (A/D counts).

       -  INDS = Instantaneous value of the Neutral Drive switch input, counts.



                                         24-2

                        INPUT CONVERSIONS AND FILTERS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  IVCAL = Calibration input voltage used  to  correct  MAF  and  VBAT  (A/D
          counts).

       -  KNK_HIGH = Knock level input flag.

       -  LOAD = Normalized load parameter, unitless.

       -  N = RPM - engine speed in revolutions per minute.

       -  N_PREV = Previous value of N.

       -  N_RUN = Engine RPM to exit Crank mode.

       -  OLDTP = The last value of TP.

       -  PIPCNT = Number of PIPs which have occurred.

       -  PIP Period = Amount of time between consecutive PIP signals.

       -  PUTMR = Counts up after hardware reset.

       -  RATCH = Kicker off lowest filtered TP.

       -  TCSTRT_ACCUM = TCSTRT accumulator, deg F.

       -  TP = A/D conversion of  the  voltage  output  of  the  Throttle  position
          sensor, counts.

       -  TP_REL = Relative Throttle position; TP - RATCH.

       -  TPBAR = Rolling average Throttle Angle.

       -  VBAT = Battery Voltage.

      Bit Flags:

       -  BOO_LVL = A bit flag indicating the state of the brake switch; 1 -> brake
          is on.

       -  BPUFLG = Keyon update flag in RAM, unitless.

       -  CRKFLG = Crank Flag.

       -  KAM_ERROR = Indicates Keep Alive RAM invalid.

       -  KNOCK_DETECTED = 1 -> knock occurred in current PIP half-period.

       -  PTPFLG = PIP occurred after 50 msec.

       -  REFFLG = 1 -> in idle fuel modulation.

       -  UNDSP = Underspeed Flag.

       -  V_MODE_SETUP = VIP Throttle Adjust Mode enabled flag; 1 -> enabled.

      Calibration Constants:




                                         24-3

                        INPUT CONVERSIONS AND FILTERS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  BIHP = Indicates whether there is a brake input to the EEC;  1  ->  input
          present.

       -  CTEHI = Calibration constant for minimum ECT (engine coolant temperature)
          to enable EPTZER at idle, degrees F.

       -  DEBTIM = Debounce time delay, secs.

       -  ENGCYL = Number of PIPs  per  Engine  Revolution;  or  Number  of  Intake
          Strokes Per Engine Revolution.  (Number of cylinders/2)

       -  EPTSW = Calibration switch to enable or disable rolling average EPTZER at
          idle.

       -  FN703A = ECT/ACT Transfer function.  Input =  A/D  converter  counts  and
          Output = temperature, deg F.

       -  IDLDEL = A/D count equivalent to  Idle  back  pressure,  "H2O  *  IXFRPR,
          counts.

       -  IERPMH = Idle RPM hysteresis term for EPTZER update.

       -  KSF  =  Keypower  Scaling  Factor;  a  calibration  constant  which   has
          historically  been  3.731; this value can be changed on VECTOR to satisfy
          the requirements of different  processors;  a  newer  value  for  KSF  is
          5.5991;  the  user  should  check  with the EEC Design Group to determine
          which value for KSF is applicable to a specific processor level.

       -  MNPIP4 = Minimum PIP period for 4-cylinder engine, clock ticks.

       -  MNPIP6 = Minimum PIP period for 6-cylinder engine, clock ticks.

       -  MNPIP8 = Minimum PIP period for 8-cylinder engine, clock ticks.

       -  PFEHP = Switch to select EGR strategy; 1 -> PFE, 0 -> Sonic.

       -  PIPFIL = Filter constant factor for DT12S_AVG.

       -  TC_TPDL = Time constant for TPDLBR.

       -  TCECT = Time constant for ECT, sec.

       -  TCEGR = Time constant for EGRBAR, sec.

       -  TCEPT = Time constant for EPT, sec.

       -  TCN = Time constant for N, sec.

       -  TCNDBR = Time constant for NDBAR, sec.

       -  TCTP = Time constant for TPBAR, sec.

       -  TCTPT = Time constant for TBART, sec.

       -  TCTRTP = Time constant for TTPBAR, sec.

       -  TCVBAT = Time constant for VBAT, sec.



                                         24-4

                        INPUT CONVERSIONS AND FILTERS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  TKYON1 = Minimum time delay before PIPs are recognized, sec.

       -  TKYON2 = Time delay before Keyon Updates are permitted, sec.

       -  TKYON3 = Maximum time keyon updates are allowed, sec.

       -  TKYON4 = Time delay before resetting BPKFLG, sec.

       -  TPDLTA = Minimum TP change for Tip-Out.  Range 0 to 1023.

       -  TSTALL = Elapsed time necessary to indicate a stall, msec.

       -  VCAL = Calibration constant; the value is normally 2.5 volts; this  value
          can  be  changed  on  VECTOR  to  satisfy  the  requirements  of  certain
          processors.

       -  VEPTHL = Self-test upper idle  limit  (defined  in  Self  Test  Strategy)
          (Upper limit for KEYON EPTZER).

       -  VEPTLL = Self-test upper idle  limit  (defined  in  Self  Test  Strategy)
          (Lower limit for KEYON EPTZER).







































                                         24-5

                        INPUT CONVERSIONS AND FILTERS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  ACSTRT = Temperature of ACT at startup, deg F.

       -  ACSTRT_ACCUM = See above.

       -  BPKFLG = See above.

       -  DT12S_AVG = See above.

       -  ECT = See above.

       -  EOFF = See above.

       -  EPTBAR = Rolling average EPT Transducer.

       -  EPTZER = See above.

       -  N_BYTE = Single precision (BYTE)  engine  speed,  Rev/Min.   It  is  used
          whenever possible to save memory.

       -  NBAR = Rolling average RPM.

       -  NDBAR = Filtered Engine Speed.

       -  NOVS = N/VSBAR to infer transmission gear, rpm/mph.

       -  RATCH = See above.

       -  TBART = Rolling average of TP for Knock Strategy.

       -  TCSTRT_ACCUM = See above.

       -  TCSTRT = Temperature of ECT at startup, deg.  F.

       -  TP_REL = Relative throttle position, counts.

       -  TPBAR = See above.

       -  TPDLBR = Rolling  average  filter  of  the  change  in  TP  on  sucessive
          background loops.

       -  TTPBAR = Transmission Filtered Throttle position.

       -  VBAT = See above.

       -  VSBAR = Filtered Vehicle Speed.











                                         24-6

                        INPUT CONVERSIONS AND FILTERS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Bit Flags:

       -  BIFLG = A flag indicating that the brake has been applied.

       -  BPUFLG = See above.

       -  KNOCK_DETECTED = See above.

       -  KNOCK_OCCURRED = 1 -> (in the Knock Interrupt routine) knock occurred  in
          current or last PIP period.

       -  NDSFLG = Neutral/Drive Flag; 1 -> Drive.

       -  PTPFLG = See above.




      PROCESS
                                STRATEGY MODULE: EQUA_CB


   AIR CHARGE TEMPERATURE SENSOR (ACT)


      FN703A (IACT) is the transfer function for the air charge temperature sensor.
      It  converts  from  raw  A/D counts to degrees F.  IACT is the raw A/D counts
      from the ACT sensor.



   AMBIENT AIR TEMPERATURE SENSOR (AAT)


      FN703A(IAAT) is the transfer function for the ambient air temperature sensor.
      It  converts  from  raw  A/D counts to degrees F.  IAAT is the raw A/D counts
      from VRCM over DCL which measures ambient temperature.























                                         24-7

                        INPUT CONVERSIONS AND FILTERS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   BATTERY VOLTAGE FILTER (VBAT)


      The  VBAT  calculation  is  a  time-dependent  rolling  average   filter   of
      instantaneous  battery  voltage.   The  VBAT  time  constant  TCVBAT is not a
      calibration constant and is set to produce a 0.1  second  VBAT  average  time
      constant.


                               VBAT = ROLAV (VBAT',TCVBAT)

      Instantaneous Battery Voltage is calculated from:

                            VBAT' = IIVPWR * VCAL * KSF/IVCAL



   BOO - BRAKE ON/OFF (Digital input)


      When the brake switch is depressed, the low speed digital input,  BOO_LVL  is
      set  to  one  (1).  To prevent noise falsely triggering this input, the input
      must be set to high (set to 1) for at least two reads of the data image.  The
      brake  input  flag,  BIFLG,  is  set and cleared in background to reflect the
      state of the BOO_LVL if there is a brake input to the module.


      always --------------------------| BIFLG = 0

      BIHP = 1 ------------------|
                                 |AND -| BIFLG = 1
      BOO_LVL = 1 ---------------|




























                                         24-8

                        INPUT CONVERSIONS AND FILTERS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   CLOCK_SEC

      CLOCK_SEC is a register which contains a clock  in  engineering  units.   The
      clock  rolls  over  every  60  seconds  and displays seconds with millisecond
      accuracy.  As with any other background calculation,  the  clock  is  updated
      every background loop.

      always --------------------------| CLOCK_SEC = CLOCK_SEC + BG_TMR
                                       |
                                       |  (add current background loop time 
                                       |   to the clock)


      CLOCK_SEC >= 60.000 -------------| CLOCK_SEC = CLOCK_SEC + 60.000
                                       |
                                       |  (allows clock to roll over)



   FILTERED PIP DELTA FOR TRANSMISSION CALCULATION (DT12S_AVG)

      DT12S_AVG calculation is performed on PIP rising edge.

      CRKFLG = 1 ----------------------| DT12S_AVG = DT12S
                                       | 
                                       | --- ELSE ---
                                       | 
                                       | DT12S_AVG = (1 - FK) * DT12S_AVG +
                                       |              FK * DT12S

                   -PIPFIL
      Where: FK = 2



   ENGINE COOLANT TEMPERATURE SENSOR (ECT)


      FN703A (IECT) is the transfer function for the ECT sensor. It converts from
      raw
      A/D counts to degrees F. IECT is the raw A/D counts from the ECT sensor.



   ENGINE COOLANT TEMPERATURE FILTER (ECT)


      The ECT calculation is a  time-dependent  rolling  average  of  instantaneous
      engine coolant temperature.  The ECT time constant TCECT is calibratable.


                            ECT = ROLAV (FN703A(IECT),TCECT)








                                         24-9

                        INPUT CONVERSIONS AND FILTERS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   TCSTRT - ECT AT START


      PUTMR < TKYON1 ------------------| Ignore any PIPs; probably
                                       |   due to noise transients
                                       | PTPFLG = 0


      PUTMR < TKYON1 ------------|
                                 |AND -| Allow Key On updates
      KAM_ERROR = 1 -------|     |     | BPUFLG = 1
                           |OR --|
      BPKFLG = 0 ----------|
       (Not a reset)


      PUTMR > TKYON2 ------------|
                                 |AND -| TCSTRT_ACCUM = TCSTRT_ACCUM+(ECT/8)
      ECTCNT < 8 ----------------|     | (Compute arithmetic average of the
                                       |  first 8 consecutive unfiltered
                                       |  ECT readings)
                                       | ACSTRT_ACCUM = ACSTRT_ACCUM+(ACT/8)
                                       | (compute arithmetic average of the
                                       |  first 8 consecutive unfiltered
                                       |  ACT readings)
                                       | Increment ECTCNT
                                       | (increment counter)
                                       | TCSTRT = ECT
                                       |
                                       | --- ELSE ---
                                       |
      ECTCNT < 8 ----------------------| TCSTRT = ECT
                                       | (load TCSTRT with ECT until TCSTRT
                                       |  has been computed)
                                       | ACSTRT = ACT
                                       | (load ACSTRT with ACT until ACSTRT
                                       |  has been computed)
                                       |
                                       | --- ELSE ---
                                       |
                                       | TCSTRT = TCSTRT_ACCUM
                                       | (load TCSTRT with arithmetic average)
                                       | ACSTRT = ACSTRT_ACCUM
                                       | (load ACSTRT with arithmetic average)


      UNDSP = 0 -----------------|
        (RUN Mode)               |AND -| Enable Key On updates
                                 |     | for next startup
      ATMR1 > TKYON4 ------------|     |  
                                       | BPKFLG = 0









                                        24-10

                        INPUT CONVERSIONS AND FILTERS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   EVP - EGR VALVE POSITION SENSOR (PFEHP = 0)
            (Analog Sensor)


      The EVP sensor provides a signal proportional to the valve  position.   As  a
      rule  of  thumb, pintle position (percent of Full Travel) is equal to (IEGR -
      EOFF)*0.14.

      The strategy converts pintle position (counts) into EGR mass  flow  (EM),  in
      the EGR strategy.



   EGR POSITION FILTER (EGRBAR) (PFEHP = 0)

      The EGRBAR  calculation  is  a  time  dependent  rolling  average  filter  of
      instantaneous  EGR  valve  position  EVP.  It is updated each background pass
      while in RUN or UNDERSPEED  mode.   The  EGRBAR  time  constant  TCEGR  is  a
      calibration parameter.

                              EGRBAR = ROLAV (EVP,TCEGR)



   EGR POSITION RATCHET (E0FF)  (PFEHP = 0)

      The lowest filtered EGR position EOFF is controlled by the following logic:

      EGRBAR < EOFF -------------|
                                 |
      CRKFLG = 0 ----------------|AND -| EOFF = EGRBAR
       (RUN or UNDERSPEED mode)  |
                                 |
      APT = -1 ------------------|
       (closed throttle mode)

























                                        24-11

                        INPUT CONVERSIONS AND FILTERS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   IDLE DOWNSTREAM PRESSURE (EPTZER) LOGIC (PFEHP = 1)


      CRKFLG = 1 ----------------------| EPTBAR = EPTZER
                                       |
                                       | --- ELSE ---
      APT = -1 ------------------|     |
                                 |     | Idle EPTZER Update 
      N <= DSDRPM + IERPMH ------|     | 
                                 |AND -| EPTZER = 
      EPTSW = 1 -----------------|     |        ROLAV (IEGR,TCEPT)
                                 |     | EPTBAR = ROLAV(IEGR,TCEPT)
      ECT >= CTEHI --------------|     | 
                                       | --- ELSE ---
                                       | 
                                       | EPTBAR = 
                                       |        ROLAV (IEGR,TCEPT)
                                       |
                                       | No Update to EPTZER


                            KEY ON EPTZER UPDATE (PFEHP = 1)


      EPTZER is a KAM register.  Conditions for EPTZER update are similar to  those
      for  Inferred  BP.   The  same  enabling logic may be used.  BPUFLG is the BP
      update enable flag.


      BPUFLG = 0 ----------------|
        (Power reset may         |
         have occurred)          |
                                 |
      PTPFLG = 1 ----------------|OR --| Do NOT Update
        (PIP Occurred)           |     |  EPTZER
                                 |     |
      PUTMR < TKYON2 ------------|     |
        (Too soon to update)     |     |
                                 |     |
      PUTMR > TKYON3 ------------|     |
        (Too late to update)           | 
                                       | --- ELSE ---  
                                       |  
                                       | Conditions are 
                                       |  appropriate for update
      IEGR > VEPTLL -------------|     | 
                                 |AND -| EPTZER = 
      IEGR < VEPTHL -------------|     |        ROLAV (IEGR+IDLDEL,TCEPT)
                                       |
                                       | --- ELSE ---
                                       |
                                       | Sensor out of range
                                       | Initialize EPTZER
                                       | EPTZER = 650






                                        24-12

                        INPUT CONVERSIONS AND FILTERS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   KS - KNOCK SENSOR (Digital Input)


      KS is an accelerometer tuned to measure engine vibration over a range within
      which knock typically occurs.  KS is mounted on a strategic location of the
      engine structure. The following logic is checked every PIP up-edge BEFORE
      calculating the SPOUT.



                                  KNOCK DETECTION LOGIC


      KNOCK_DETECTED = 1 --------|
                                 |AND -| KNOCK_OCCURRED = 1
      KNK_HIGH = 1 --------------|     |
        (KI currently indicating       |
         knock)                        | 
                                       | --- ELSE --- 
                                       |
      KNOCK_DETECTED = 1 --------|     | KNOCK_OCCURRED = 1
                                 |AND -| KNOCK_DETECTED = 0
      KNK_HIGH = 0 --------------|     |
        (KI currently indicating       | 
         NO knock)                     |
                                       | --- ELSE --- 
                                       |  
                                       | KNOCK_OCCURRED = 0
































                                        24-13

                        INPUT CONVERSIONS AND FILTERS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   PIP - PROFILE IGNITION PICKUP
         (Digital Input)


      The PIP Sensor is the Hall Effect Sensor.  The Hall Effect Sensor  outputs  a
      square wave pulse producing one profile pulse of the narrow band of the cycle
      being sampled.  A discrepancy exists between the Hall Effect Sensor  and  PIP
      since  PIP  is  not precisely a 50 percent duty cycle.  The software has been
      designed to accommodate this difference providing greater accuracy by use  of
      the  KAY  factor.   The  timer  which  keeps track of the time since last PIP
      (TSLPIP) functions with 0.001 second resolution.  An example of PIP's use  in
      Knock control is shown below.

                           N(RPM) = 60/(ENGCYL * "PIP PERIOD")

      "PIP PERIOD" has units of secs. If the PIP period (time elapsed since the
      last
      PIP signal) becomes greater  than or equal to TSTALL (800 msec), the engine
      speed RPM is set to zero.  This insures that if the PIP signal  goes away
      because of a stall, RPM will become zero to trigger CRANK mode.


                                PIP COUNTER CONTROL LOGIC


      CRKFLG = 1 ----------------|
       (CRANK mode)              |AND -| Count PIP signals as they occur.
                                 |     |  (PIPCNT is the counter)
      N > N_RUN -----------------|     | 
                                       | 
                                       | --- ELSE ---
                                       |
                                       | Stop counting PIP signals
                                       | PIPCNT = 0


























                                        24-14

                        INPUT CONVERSIONS AND FILTERS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    PIP NOISE FILTER


               ************            *************
               *          *            *           *
               *          *            *           *
               *          *            *           *
               *          *            *           *
               *          **************           ************

               | <-------------------> |

               PIP up edge to PIP up edge
                       filter

               | <-----> |

               PIP up edge to PIP down edge
                       filter


      In the EEC-IV system, there is a method of noise blanking to  eliminate  some
      of  the noise that occurs on the PIP input.  There is a PIP up edge to PIP up
      edge filter.  An interval value is usually picked out of a table  and  is  in
      the  units  of  clock  ticks.   The equivalent millisecond value of this time
      corresponds to some high value of engine rpm.  If a PIP  up  edge  follows  a
      previous  PIP  up  edge  at an interval less than this time, then that PIP up
      edge is ignored, and treated as noise.

      The table value (TABVAL) is divided by four and is used to filter the PIP  up
      edge  to PIP down edge interval.  If the computed time from the PIP down edge
      to the previous PIP up edge is less than (TABVAL/4), then that PIP down  edge
      is ignored.

      A typical value for the table value would be the equivalent time interval for
      the  PIP  input  at  maximum engine rpm.  For an 8 cylinder engine, the value
      would be:  2.5 milliseconds (833  clock  ticks  for  12  mhz).   In  GU,  the
      calibration values are MNPIPn.  They are defined in this chapter where MNPIPn
      is described.





















                                        24-15

                        INPUT CONVERSIONS AND FILTERS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   MNPIPn - PIP FILTER

      The PIP filter ignores PIP transitions which occur at a higher rate than  the
      maximum  possible  engine RPM.  (The maximum possible engine RPM is generally
      assumed to be the RPM at which the valves begin to "float".)


      MNPIPn = 60/(ENGCYL*"MAXRPM") * "Clock Freq"/36


          n = 4 for a 4-cylinder engine  MNPIP4 = 1923 at 15 MHz
          n = 6 for a 6-cylinder engine  MNPIP6 = 1282 at 15 MHz
          n = 8 for a 8-cylinder engine  MNPIP8 =  961 at 15 MHz

      NOTE:  MNPIP should correspond to an RPM which is greater than the  speed  at
      which  the  strategy turns off the Fuel (Speed Limiter).  The base values are
      equivalent to 6500 RPM.



   ENGINE SPEED FILTER (NBAR)

      The  NBAR  calculation  is  a  time-dependent  rolling  average   filter   of
      instantaneous  engine  speed  N.  It is updated each background pass while in
      RUN or UNDERSPEED mode.  The NBAR time constant TCN is calibratable.


                                  NBAR = ROLAV (N,TCN)



   ENGINE SPEED FILTER (NDBAR)

      The  NDBAR  calculation  is  a  time  dependent  rolling  average  filter  of
      instantaneous  engine  speed  N.  It is updated each background pass while in
      RUN or UNDERSPEED mode.  The NDBAR time  constant  TCNDBR  is  a  calibration
      parameter.


                                NDBAR = ROLAV (N,TCNDBR)



   ENGINE SPEED OVER VEHICLE SPEED (NOVS)

      NOVS is the ratio of engine speed over vehicle speed.  It is  used  to  infer
      the  transmission  gear  ratio  selected  -  both  in  automatic  and  manual
      transmissions.

      always --------------------------| NOVS = N/VSBAR
                                       | (Clip NOVS between 0 and 255)









                                        24-16

                        INPUT CONVERSIONS AND FILTERS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   TP - THROTTLE POSITION SENSOR
           (Analog Input)

      TP sensor is a rotary ratiometric device responding  to  the  throttle  shaft
      position  outputting  a  voltage  which  is high if the TP angle is great and
      small when the TP angle is small.  TP sensor measures a range of 0-50 degrees
      of   throttle   movement.    One  degree  of  throttle  travel  is  equal  to
      approximately 9.6 counts.


   THROTTLE POSITION FILTER (TPBAR)

      The  TPBAR  calculation  is  a  time-dependent  rolling  average  filter   of
      instantaneous  throttle  position  (TP).   It is updated each background pass
      while in  RUN  or  UNDERSPEED  mode.   The  TPBAR  time  constant,  TCTP,  is
      calibratable parameter.

                                 TPBAR = ROLAV (TP,TCTP)


   THROTTLE POSITION FILTER (TBART)

      The TBART calculation, used  in  the  Knock  Strategy,  is  a  time-dependent
      rolling  average  filter  of  instantaneous  throttle  position  (TP).  It is
      updated each background pass while in RUN or UNDERSPEED mode.  The TBART time
      constant, TCTPT, is calibratable parameter.


                                TBART = ROLAV (TP,TCTPT)
   TRANSMISSION THROTTLE POSITION FILTER (TTPBAR)


      The TTPBAR  calculation  is  a  time  dependent  rolling  average  filter  of
      instantaneous  throttle  position  (TP).   It  is  used  only in transmission
      control logic.  It is updated each background pass while in RUN or UNDERSPEED
      mode.  The TTPBAR time constant, TCTRTP, is a calibration parameter.

                                TTPBAR = ROLAV(TP,TCTRTP)






















                                        24-17

                        INPUT CONVERSIONS AND FILTERS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   CHANGE OF THROTTLE POSITION FILTER (TPDLBR)

      TPDLBR is a time dependent rolling average filter of the change (or delta) in
      TP  on successive background loops.  It is updated each background pass while
      in Run or Underspeed mode.  TPDLBR is used in the light load RPM  oscillation
      spark adder logic.  The time constant, TCTPDL, is a calibration parameter.

                       TPDLBR = ROLAV(TP_REL - tp_rel_lst, TCTPDL)

      where;

           TP_REL = TP - RATCH (clip to 0 as a minimum)

           tp_rel_lst = Previous value of TP_REL


   THROTTLE POSITION RATCHET (RATCH)


      The throttle position ratchet (RATCH) continuously seeks a  lower  value  for
      both  throttle  angle  breakpoints,  CLOSED  THROTTLE/PART  THROTTLE and PART
      THROTTLE/WOT, by seeking the lowest filtered  throttle  angle  (TPBAR).   The
      algorithm is not used during CRANK mode.


      During the VIP Throttle Adjust Mode the value of RATCH is always  updated  to
      TPBAR.  RATCH is clipped to RATIV as maximum.

      During RUNNING VIP RATCH is not updated.

      CRKFLG = 1 ----------------------| NO CHANGE TO RATCH
                                       |
                                       | --- ELSE ---
                                       |
      V_MODE_SETUP = 1 ----------------| RATCH = TPBAR
                                       | (Clip RATCH to RATIV
                                       |  as maximum)
                                       |
                                       | --- ELSE ---
      TPBAR <= RATCH ------------|     | 
                                 |     |
      N > 450 RPM ---------------|AND -| RATCH = TPBAR
                                 |     |
      RUNNING = 0 ---------------|     | --- ELSE ---
                                       |
                                       | No change to RATCH 


   THROTTLE POSITION - RELATIVE TO RATCH (TP_REL)


      The parameter TP_REL is an indication of the amount of throttle movement, TP,
      beyond  the idle setting, RATCH.  TP_REL is calculated every background pass,
      in all engine modes.

                                   TP_REL = TP - RATCH
                               (Clip to zero as a minimum)



                                        24-18

       INPUT CONVERSIONS AND FILTERS, CALIBRATION FOR FREQUENCY CHANGES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                          STRATEGY MODULE: INPUT_CAL_FREQ_COM5

      OVERVIEW

      The following parameters must be calibrated depending on the clock  frequency
      used in the EEC-IV Module.  Shown below are the values which must be used for
      15MHz and 18MHz.

      Parameter                15MHz                18MHz
      =================================================== 
      CANP_PRD_DT              27777                33332.4
      CLK_FRQH                 393216               458752
      CLK_FRQL                 23451                41248
      DC5_PRD_DT               2777                 3332.4
      DC6_PRD_DT               2777                 3332.4
      DC7_PRD_DT               2777                 3332.4
      OL_PRD_DT                0                    0
      EARLY_LIMIT              2500                 3000
      EVR_PRD_DT               1388                 1665.6
      FQCAL                    6.511                7.8125
      FREQ16_C                 0.0000024            0.000002
      FREQ18                   1.58944702           1.90734863
      FRQ4CH                   15392                8640
      FRQ4CL                   12484608             14991360
      FRQ6CH                   10261.25             5760
      FRQ6CL                   8323072              9994240
      FRQ8CH                   7696                 12512
      FRQ8CL                   6242304              7487488
      HLS_COUNT_DT             5555                 6666
      HLS_INJPW_DT             805                  966
      HLS_ISCPD_DT             1666                 1999.2
      HLS_ISCPW_DT             1041                 1249.2
      INJ_OFF_DLY              42                   50
      ISC_PRD_DT               1666                 1999.2
      LUS_PRD_DT               4166                 4999.2
      MS2                      833                  1000
      MS400_HIGH               2                    3
      MS400_LW                 35595                3392 
      MS5                      2083                 2500
      MSECS_50                 20833                25000
      MTICKS                   406.90104            488.28125
      NEXT_SLICE               417                  500
      SIMLIM4                  6400                 7680
      SIMLIM6                  4267                 5120
      SIMLIM8                  3200                 3840
      S_TO_T                   416666.66            500000
      TICKS_DOUBLE             500                  600
      TICKS_SINGLE             417                  500
      TICKS_TO_SEC             416768               499712
      TSB18_C                  0.0000024            0.000002
      TSS_CLK_FRQH             413696               499712
      TSS_CLK_FRQL             2971                 288
      TWO_HND_MKS              83                   100
      TWO_PT_5_MS              1042                 1250
      VMULTH                   187392               224896
      VMULTL                   108                  104




                                        24-19

       INPUT CONVERSIONS AND FILTERS, CALIBRATION FOR FREQUENCY CHANGES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      The following engine control parameters will need  to  be  recalibrated  when
      changing  from  15MHz  to  18MHz  (this  can be done by multiplying the 15MHz
      values by 1.2):

      MINPWT
      MNPIP4
      MNPIP6
      MNPIP8
      MNOSSPER
      PIPLIMHYT
      SPKSWH
      SPKSWL
      VBPDL1
      WINLEN



      The following are self test parameters which need  to  be  recalibrated  when
      changing from 15MHz to 18MHz:

      CODE1_PW
      CODE2_PW
      CODE3_PW
      CODE4_PW
      CODE5_PW
      CODE6_PW
      CPUOK_PW
      OKIDM_PW
      PIPERR
      PW_EPSILON2
      VPMAX


      The Mass Air Sensor Transfer Function (FN036) will need  to  be  recalibrated
      when  changing  from  15MHz to 18MHz.  The Y-axis values of the function will
      need to be divided by 1.2.
























                                        24-20

               INPUT CONVERSIONS AND FILTERS, LOAD CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OVERVIEW


                                    LOAD CALCULATION


      LOAD is a unitless value  showing  the  ratio  of  the  Cylinder  Air  Charge
      (CYLARC_BG)  to  the  theoretical  air charge at EEC Standard Temperature and
      Pressure  (SARCHG).   Using  LOAD  makes  all  engine  sizes  more   directly
      comparable, and allows a similar scaling for all table look-ups.



                                 AIR MASS DETERMINATION


      Air mass is computed for use in background in units of lbs/min.



                                   PERLOAD CALCULATION


      PERLOAD is a variable used to control air/fuel ratio and upstream  air.   The
      air/fuel  ratio control includes:  1) stabilized open loop enrichment, 2) MPG
      mode cruise enable and desired  air/fuel,  3)  cold  start  enrichment.   Its
      original definition was corrupted when the option was included to set PERLOAD
      = LOAD.  Thus a true percent load (PCT_LOAD) had to be introduced to  predict
      flow across orifices like the air bypass valve.































                                        24-21

               INPUT CONVERSIONS AND FILTERS, LOAD CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  BP = Barometric Pressure, value stored in KAM.

       -  CYLARC_BG = Air Charge Mass inducted per Intake Stroke, lbm/Intake.

       -  LOAD = normalized air meter air mass flow, unitless.
          Equal to: air mass / (N * ENGCYL * SARCHG).

       -  N = RPM - engine speed in revolutions per minute.

       -  PCT_LOAD = New percent load = TOTLDST / FN1036A(N,TOP_ROW).

       -  SARCHG = Standard air charge, lb.  = 4.4256 (density of air  in  standard
          pressure)  *  10e-5  *  (engine  size  in  cubic  inches)  /  (number  of
          cylinders).

       -  TOTLDST = Total inferred LOAD.

       -  TP_REL = Relative throttle position, counts.

      Calibration constants:

       -  ENGCYL = Number of PIPs  per  Engine  Revolution;  or  Number  of  Intake
          Strokes Per Engine Revolution.  (Number of cylinders/2)

       -  FN035(N) = Peak load at sea level as a function of RPM.

       -  FN044 = Normalized TP_REL for FN1036A, counts.

       -  FN070E = Normalized N for FN1036A, RPM.

       -  FN1036A = A table that provides load at sea level with no EGR.
                  X = FN070E(N) 
                  Y = FN044(TP_REL)

       -  PRLDSW = switch to control calculation of PERLOAD.



      OUTPUTS

      Registers:

       -  AM = Air Mass Flow, lbm/min.

       -  LOAD = Normalized load parameter, unitless.

       -  PERLOAD = variable for  control  of  air/fuel  schedules.   0-1.0  scale,
          Unitless.






                                        24-22

               INPUT CONVERSIONS AND FILTERS, LOAD CALCULATION - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: SYSEQ_LOAD_COM3


                                LOAD = CYLARC_BG / SARCHG


                               AM = N * ENGCYL * CYLARC_BG


      PRLDSW = 0 --------| PERLOAD = LOAD * 29.9
                         |           -------------
                         |           FN035(N) * BP
                         |
                         | --- ELSE ---
                         |
      PRLDSW = 1 --------| PERLOAD = LOAD
                         |
                         | --- ELSE ---
                         |
      PRLDSW = 2 --------| PERLOAD = PCT_LOAD







































                                        24-23

         INPUT CONVERSIONS AND FILTERS, INFERRED BAROMETRIC PRESSURE - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             BAROMETRIC PRESSURE - INFERRED


      OVERVIEW

      The barometric pressure will be inferred from other sensor inputs.

      With air meter equipped  engines  there  is  redundant  sensor  and  actuator
      information which allows for the inference of barometric pressure.  The basic
      equation is:

                                29.92 * air mass from airmeter
      Inferred BP = --------------------------------------------------------
                    sqrt(560/(ACT+460) * inferred air mass (29.92,100 ACT))

      The model implied by the inferred BP equation is that the inferred  air  mass
      is  really  an  air  volume  flow calculation, converted to mass units at the
      standard temperature and  pressure.   The  air  meter  is  a  true  air  mass
      measurement  device.   Thus  deviations in mass from the inferred calculation
      are attributed first to inlet temperature, which is measured, and then  to  a
      drop in inlet pressure, which is the inferred BP.

      In the EEC the air mass flows are converted to LOAD by the formula:
                        load = air mass / (N * ENGCYL * SARCHG).

      The inferred BP formula in EEC terms is thus:

                              29.92 * LOAD from airmeter
                       IBAP = --------------------------
                                 FN059(ACT) * TOTLDST

      TOTLDST is the inferred air mass RAM value.  It the sum of the  flow  through
      the throttle body, TPLDST, and the flow through the air bypass valve, BYLDST.
      TPLDST is a table lookup versus N and TP_REL, BYLDST is the  load  equivalent
      of  BYMAST,  the  air  mass  flow  through  the  air bypass valve.  BYMAST is
      calculated from a table lookup of  air  bypass  duty  cycle,  ISCDTY,  and  a
      calculation of percent load, PCT_LOAD.



      FMEM

      When the TP sensor or the MAF sensor are inoperative BP can not be  computed.
      Instead, a default value, BAPFMM is used.
















                                        24-24

         INPUT CONVERSIONS AND FILTERS, INFERRED BAROMETRIC PRESSURE - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      To set BP to a desired value bp_desired, use the following method.  Calibrate
      the following constants as shown and in the order as shown.

            Enable Inferred BP.

            BAPFMM = bp_desired }
            BPMIN  = bp_desired  }  This is the desired value of BP.
            BPMAX  = bp_desired  }

            NBPLO  = 7000        }  This prevents Inferred BP from updating.
            NBPHI  = 1000        }

      At processor initialization, BP is checked to be in the range of BPMIN <=  BP
      <=  BPMAX.  With the above calibration, either BP will already be bp_desired,
      or BP will be loaded with BAPFMM, ie:  bp_desired.

      Setting NBPLO and NBPHI will prevent the strategy from changing BP.











































                                        24-25

         INPUT CONVERSIONS AND FILTERS, INFERRED BAROMETRIC PRESSURE - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  ACT = Air Charge temperature, deg F.

       -  BP = Barometric Pressure, value stored in KAM.

       -  BPUPDTTMR = Timer for warm engine for BP udpate, sec.

       -  DELTOTLD = Change in TOTLDST.

       -  ECT = Engine coolant temperature, deg F.

       -  IBAP = Unfiltered Barometric Pressure.

       -  LOAD = Universal Load parameter, unitless.

       -  N = Engine speed, RPM.

       -  TOTLDST = Total inferred load.

       -  TP_REL = TP-RATCH = Throttle position, counts.

      Bit Flags:

       -  MAF_INTP_FLG = Flag indicating that MAF reading is inferred from TP.

       -  MFMFLG = Flag indicating that MAF sensor has failed.

       -  TFMFLG = Flag indicating that TP sensor has failed.

      Calibration Constants:

       -  BAPFMM = Default value for BP failure.

       -  BP_DISOFF = Offset to BP in BP_DISPLAY, " Hg.

       -  BPMAX = Maximum allowable IBAP value.

       -  BPMIN = Minimum allowed BP value, in Hg.

       -  BPUPDENTM = Time to enable BP updates once ECT has reached the threshold,
          sec.

       -  DELTOTHI = Maximum change in successive TOTLDST to calculate Inferred BP.

       -  ECTBPLO = Minimum ECT to allow IBAP updates.

       -  FN059 = Temperature compensation for inferred BP, square root of 560/(ACT
          + 460).

       -  LDBPLO = Minimum LOAD to allow IBAP updates.

       -  NBPHI = Maximum allowable N to compute inferred BP, RPM.



                                        24-26

         INPUT CONVERSIONS AND FILTERS, INFERRED BAROMETRIC PRESSURE - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  NBPLO = Minimum allowable N to compute inferred BP, RPM.

       -  TCBBAR = Time constant for BP, sec.

       -  TPBPLO = Minimum TP_REL to calculate inferred BP, counts.

       -  TPBPHI = Maximum TP_REL to calculate inferred BP, counts.



      OUTPUTS

      Registers:

       -  BP = Barometric Pressure, value stored in KAM.

       -  BP_DISPLAY = BP - BP_DISOFF for display purposes.

       -  BPUPDTTMR = See above.

       -  IBAP = See above.







































                                        24-27

         INPUT CONVERSIONS AND FILTERS, INFERRED BAROMETRIC PRESSURE - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: INPUT_BP_INFERRED_COM1

      ECT > ECTBPLO -----------------| Increment BPUPDTTMR
       (high enough ECT)             | 
                                     | --- ELSE ---
                                     | 
                                     | BPUPDTTMR = 0


      MAF_INTP_FLG = 0 --------|
       (MAF reading is O.K.)   |     
                               |     
      TFMFLG = 0 --------------|     
       (TP sensor is O.K.)     |     
                               |     
      DELTOTLD < DELTOTHI -----|     
       (not too transient)     |     
                               |     
      N > NBPLO ---------------|     
       (high enough RPM)       |     
                               |     
      N < NBPHI  --------------|AND -| Inferred BP - update conditions met
       (low enough RPM)        |     | IBAP = 29.92 * LOAD /
                               |     |        (FN059(ACT) * TOTLDST)
      TP_REL > TPBPLO ---------|     | 
       (high enough TP)        |     | Call INPUT_BP_FILTER_COMx
                               |     | 
      TP_REL < TPBPHI ---------|     |
       (calibration devel only)|     |
                               |     |
      BPUPDTTMR > BPUPDENTM ---|     |
       (high enough ECT for    |     |
        long enough)           |     |
                               |     |
      LOAD > LDBPLO -----------|     |
       (high enough LOAD)            |
                                     | --- ELSE ---
      MFMFLG = 1 --------------|     |
       (MAF sensor failed)     |     |  
                               |OR --| EITHER  
      TFMFLG = 1 --------------|     |  a) MAF sensor failed, or
       (TP sensor failed)            |  b) TP sensor failed
                                     | THEN do BP FAILURE MANAGEMENT
                                     | IBAP = BAPFMM 
                                     |
                                     | Call INPUT_BP_FILTER_COMx
                                     |
                                     | --- ELSE ---
                                     |
                                     | Do nothing


      always ------------------------| BP_DISPLAY = BP - BP_DISOFF
                                     |  (this is used for display only)





                                        24-28

          INPUT CONVERSIONS AND FILTERS, BAROMETRIC PRESSURE FILTER - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               BAROMETRIC PRESSURE FILTER


      OVERVIEW

      This module filters the IBAP values, determined by the Sensor or Inferred  BP
      module.   The  result  is  stored  as  BP,  which is clipped to be within the
      allowable range.

      The module is only executed as a result of a call from the Sensor or Inferred
      modules and not in the general background pass.  This is so as to prevent the
      value of BP from becoming equal to the last instantaneous  value,  which  may
      not be accurate.



      DEFINITIONS

      INPUTS

      Registers:

       -  IBAP = Unfiltered barometric pressure.

      Calibration Constants:

       -  BPMAX = Maximum allowable IBAP value.

       -  BPMIN = Minimum allowed BP value.

       -  TCBBAR = Time constant for BAPBAR.



      OUTPUTS

      Registers:

       -  BP = Barometric Pressure.




      PROCESS
                          STRATEGY MODULE: INPUT_BP_FILTER_COM1


      always --------------------------------| BP = ROLAV(IBAP,TCBBAR)
                                             | Clip BP such that 
                                             |  BPMIN <= BP <= BPMAX










                                        24-29

        INPUT AND FAILURE MODE AND SELF TEST, BP INITIALIZATION MODULE - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       BAROMETRIC PRESSURE INITIALIZATION ROUTINE


      OVERVIEW

      This module is run continuously during the normal background sequence and  is
      used to reset the value of BP if the KAM has been corrupted.



      DEFINITIONS

      INPUTS

      Registers:

       -  KAM_ERROR = Indicates KAM Invalid.


      Calibration Constants:

       -  BAPFMM = Default value for BP failure.

       -  BPMAX = Maximum allowable IBAP value.

       -  BPMIN = Minimum allowable IBAP value.



      OUTPUTS

      Registers:

       -  BP = Barometric Pressure.




      PROCESS
                           STRATEGY MODULE: INPUT_BP_INIT_COM1


      KAM_ERROR = 1 -------------------|
                                       |
      BP > BPMAX ----------------------|OR --| BP = BAPFMM
                                       |     |
      BP < BPMIN ----------------------|     |
                                             | --- ELSE ---
                                             |
                                             | Do nothing










                                        24-30

       INPUTS CONVERSIONS AND FILTERS, NEUTRAL/DRIVE TRANSITION LOGIC -  CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             NEUTRAL/DRIVE TRANSITION LOGIC


      OVERVIEW

      The software flags NDSFLG and DNDSUP are the flags used by the engine control
      strategy  when  engine  loading  information  is  required.   With manual and
      non-EEC controlled automatics, NDSFLG is set and cleared based on  the  state
      of the gear/clutch or starter safety switches.  For EEC controlled automatics
      with a transmission shaft speed sensor, NDSFLG is set and  cleared  based  on
      the manual lever postion and transmission shaft speed.

      DNDSUP  represents  the  best  approximation  of  the  actual  time  of   the
      application or removal of transmission load (N -> Dr or Dr -> N transitions).
      With manual transmissions, DNDSUP always reflects the state of  NDSFLG.   For
      automatic transmissions, DNDSUP will be inferred from either turbine speed or
      time delay functions (FN394F & FN394R), or will directly reflect NDSFLG.   If
      a  turbine  speed  sensor  is  present,  the strategy will attempt to use the
      turbine speed algorythm.  If the turbine speed algorythm cannot be used, then
      the  strategy will use the time delay functions to determine DNDSUP.  If this
      cannot be done either, due to a failed ECT sensor, then DNDSUP  will  reflect
      the  state  of  NDSFLG.   NDSFLG  or  DNDSUP are typically used in idle speed
      control mode select and  air  flow  computations,  fuel  enrichment  on  auto
      transmission neutral/drive transitions, adaptive fuel, decel fuel shutoff and
      vehicle speed control (as well as VIP).

                            Raw switch input state (NDSFLG):

       -  Manual transmissons can be configurated with a clutch and gear switch,  a
          clutch  switch  only,  a  gear switch only, or neither switch.  The input
          therefore can be used to determine a neutral state (trans in  neutral  or
          clutch depressed) versus in gear state.  If neither clutch or gear switch
          is used, the module pull up voltage  provides  an  "in  gear"  indication
          which  can  be  overridden  by  proper  selection  of the TRLOAD software
          switch.  (Set TRLOAD = 0).

       -  Non-EEC controlled automatic  transmissions  typically  use  the  starter
          safety  switch  to  indicate neutral or drive.  When the switch is in the
          Park or Neutral position, it provides a ground for  the  module  pull  up
          voltage  through  the starter relay coil, indicating "neutral".  When not
          in Park or Neutral, the switch is open and the pull  up  voltage  is  not
          bled off, indicating "drive".

       -  Electronic automatic transmissions typically  use  either  a  6  position
          Manual  Lever  Position  sensor  (MLPS)  or multiple discrete switches to
          determine the operator selected gear.  The MLPS is a  ratiometric  sensor
          with  six discrete resistors in series.  The sensor is decoded by looking
          at the differing voltages produced in each of the  lever  positions.   If
          discrete  switches  are  used,  the  lever  position is determined by the
          combination of open and closed switches.










                                        24-31

       INPUTS CONVERSIONS AND FILTERS, NEUTRAL/DRIVE TRANSITION LOGIC -  CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  DSDRPM = Desired engine idle speed, rpm.

       -  INDS = Instantaneous value of the Neutral Drive switch input, counts.

       -  NDDTIM = Timer since NDSFLG changed states, sec.

       -  REVFLG = Reverse engagement flag; 1 -> reverse, 0 -> drive.

      Bit Flags:

       -  CFMFLG = Flag indicating that ECT sensor is in/out of range.

       -  NDFFLG = Neutral/drive  state  flag,  as  indicated  by  the  time  delay
          functions (FN394F & FN394R); 1 -> drive.

       -  NDSFLG = For automatic transmissions:  1 -> MLPS indicates in gear, 0  ->
          MLPS  indicates neutral/park.  For manual transmissions:  1 -> clutch out
          and/or transmission in gear,  0  ->  clutch  in  and/or  transmission  in
          neutral.

       -  PDL = Manual lever position.

      Calibration Constants:

       -  FN394F(ECT) = Time delay before  a  neutral/park  to  in-gear  change  is
          reflected in DNDSUP, sec.

       -  FN394R = Time delay before recognition  of  neutral-drive  transistion  -
          reverse gear.

       -  NDDELT = Time delay before an in-gear to neutral/park change is reflected
          in DNDSUP, sec.

       -  TSSHP = Turbine speed sensor hardware present switch; 1 -> present.

       -  TRLOAD = Transmission Load switch;
                   0 -> Manual Transmission, no clutch or gear switches,
                        forced neutral state (NDSFLG = 0).
                   1 -> Manual Transmission, no clutch or gear switch.
                   2 -> Manual Transmission, one clutch or gear switch.
                   3 -> Manual Transmission, both clutch and gear switches.
                   4 -> Auto Transmission, non-electronic, neutral drive switch.
                   5 -> Auto Transmission, non-electronic, neutral pressure
                        switch, (AXOD).
                   6 -> Auto Transmission, electronic, PRNDL sensor - park,
                        reverse, neutral, overdrive, manual 1, manual 2.
                   7 -> Auto Transmission, electronic, multiple discrete switches
                        for manual lever position. (F4E)






                                        24-32

       INPUTS CONVERSIONS AND FILTERS, NEUTRAL/DRIVE TRANSITION LOGIC -  CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  NDDTIM = See above.

      Bit Flags:

       -  DNDSUP = Delayed neutral drive indication.  For automatic  transmissions:
          1  ->  transmission  is  in  gear,  0 -> transmission is in neutral.  For
          manual transmissions:  DNDSUP = 0.

       -  NDFFLG = See above.

       -  NDSFLG = See above.

       -  REVFLG = See above.




      PROCESS
                             STRATEGY MODULE: INPUT_NDS_COM3

      NDSFLG LOGIC - Determine Neutral/Drive state from raw switch input


      INDS < 512 -----------------------|
       (N/D switch)                     |AND -|
                                        |     |
      TRLOAD <= 4 ----------------------|     |
                                              |
      PDL = 5 OR 7 ---------------------|     |
       (MSP indicates                   |     |
        neutral or park)                |AND -|OR --| NDSFLG = 0 
                                        |     |     |  (zero NDDTIM timer on
      TRLOAD >= 6 ----------------------|     |     |   the transition)
       (MLSP sensor present or                |     |
        automatic switches present (GC))      |     |
                                              |     |
      TRLOAD = 0 -----------------------------|     |
       (forced neutral)                             |
                                                    | --- ELSE ---
                                                    | 
                                                    | NDSFLG = 1
                                                    |  (drive/loaded state)
                                                    |  (zero NDDTIM timer on
                                                    |   the transition)












                                        24-33

       INPUTS CONVERSIONS AND FILTERS, NEUTRAL/DRIVE TRANSITION LOGIC -  CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      REVFLG - FORWARD/REVERSE LOGIC (applies to NDS or NPS)


      PDL = 6 --------------------------------------|  REVFLG = 1
       (manual lever indicates reverse)             |  (transmission in reverse)
                                                    | 
                                                    | --- ELSE ---
                                                    |
                                                    | REVFLG = 0 
                                                    |  (transmission in forward)


      NDFFLG LOGIC - Determine Neutral/Drive state from time delay functions.

      NDSFLG = 0 -----------------------|
       (switch indicates neutral)       |AND -|
                                        |     |
      NDDTIM >= NDDELT -----------------|     |
       (loaded to unloaded delay)             |
                                              |         
      NDSFLG = 1 -----------------------|     |     
       (switch indicates drive)         |     |      
                                        |     |    
      REVFLG = 1 -----------------------|AND -|OR --| NDFFLG = NDSFLG
       (in reverse)                     |     |     |  (Update delayed
                                        |     |     |   Neutral/Drive flag)
      NDDTIM >= FN394R -----------------|     |     |
       (neutral to reverse delay)             |     |
                                              |     |
      NDSFLG = 1 -----------------------|     |     |
       (switch indicates drive)         |     |     |
                                        |     |     |
      REVFLG = 0 -----------------------|AND -|     |
       (forward gear)                   |           |
                                        |           |
      NDDTIM >= FN394F -----------------|           |
       (neutral to drive delay)                     |
                                                    |
                                                    | --- ELSE ---
                                                    |
                                                    | no change to NDFFLG



















                                        24-34

       INPUTS CONVERSIONS AND FILTERS, NEUTRAL/DRIVE TRANSITION LOGIC -  CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      There are two ways to determine  neutral/drive  transitions.   The  following
      logic selects which method is used to set DNDSUP.

      Automatic Transmissions without turbine speed sensor will use the time  delay
      functions.   If  the  time delay functions cannot be used because of a failed
      ECT sensor, then the raw N/D switch input is used.

      Manual Transmissions will always  default  to  the  raw  N/D  (clutch)  input
      because TSSHP will be calibrated to 0, and TRLOAD will be calibrated <= 3.


                         Select N/D Transition Detection Method

      TRLOAD > 3 -----------------------------|     
       (automatic transmission)               |AND -| DNDSUP = NDFFLG
                                              |     | (infer neutral/drive
      CFMFLG = 0 -----------------------------|     |  transitions from
       (ECT sensor OK)                              |  time delay functions)
                                                    |
                                                    | --- ELSE ---
                                                    |
                                                    | DNDSUP = NDSFLG
                                                    | (use the raw input from
                                                    |  the neutral/drive switch)




































                                        24-35

           INPUT CONVERSIONS AND FILTERS, ENGINE SPEED CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           ENGINE SPEED CALCULATION (EQNCALC)


      OVERVIEW

      The RPM calculation is performed in background if the foreground has signaled
      that  a  new PIP period is available for calculation - (NEW_RPM = 1).  If the
      time since last PIP up-edge is large, RPM is set to zero.

      NOTE:

      1) If the PIP period becomes >= TSTALL, N and N_BYTE are set to  zero.   This
      insures  that  if  the  PIP signal goes away because of a stall, N and N_BYTE
      will become zero to trigger CRANK mode.

      2) A comparison of N and N_BYTE is shown below:


                                    N              N_BYTE
      ---------------------------------------------------------------
      Precision:             double (word)        single (byte)
      Range:                 0 to 7000+           0 to 4080
      Resolution:            .25                  16
      Units:                 RPM                  RPM
      Initial Value:         0                    0


      DEFINITIONS

      INPUTS

      Registers:

       -  DT_DNDT = Time delta between PIP up-edges used to calculate  current  and
          previous values of N.

       -  FIRST_PIP_LO = Indicates when first PIP low edge has been received.

       -  LAST_HI_PIP = Time of most recent high PIP edge.

       -  N = Engine RPM.

       -  N_PREV = Previous value of N.

       -  TSLPIP = A timer that indicates  the  time  since  last  PIP  low-to-high
          transition.

       -  UNDSP = Underspeed flag.

      Bit Flags:

       -  NEW_RPM  =  Flag  indicating  new  PIP  information  is   available   for
          calculation of RPM.







                                        24-36

           INPUT CONVERSIONS AND FILTERS, ENGINE SPEED CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  ENGCYL = Number of PIPs (or injections) per revolution.

       -  TCN = Time constant for N, sec.

       -  TCNDBR = Time constant for NDBAR, sec.

       -  TCNDT_SPK = Time constant for DNDT_SPK.

       -  TSTALL = Time since last PIP before a stall is assumed.



      OUTPUTS

      Registers:

       -  DNDT_SPK = Filtered rate of change of RPM for OSCMOD.

       -  N = See above.

       -  N_BYTE = Byte value of N.

       -  N_PREV = See above.

       -  NBAR = Filtered engine RPM.

       -  NDBAR = Filtered engine speed.

       -  PREV_N_PIP = Time of previous high PIP used for RPM calculation.

      Bit Flags:

       -  FIRST_PIP = Flag indicating first PIP has been received.

       -  NEW_RPM = See above.























                                        24-37

           INPUT CONVERSIONS AND FILTERS, ENGINE SPEED CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: SYSEQ_N_CALC_COM5

      TSLPIP >= TSTALL ---------------| FIRST_PIP = 0
       (engine is stopped)            | FIRST_PIP_LO = 0
                                      | INJ_PIP_CNT1 = 1
                                      | INJ_PIP_CNT2 = 1
                                      | SYNFLG = 0
                                      | FUEL_IN_SYNC = 0
                                      | SYNC_UP_FUEL = 0
                                      | N = 0
                                      | N_BYTE = 0
                                      | N_PREV = 0
                                      | dndti = 0
                                      | DNDT_SPK = 0
                                      | NBAR = 0
                                      | NDBAR = 0
                                      | Look up normalized N
                                      | Get MIN_PIP_DLY & SIM_MIN
                                      | MHPFD_NEG logic
                                      | PIPLIM = 1
                                      | 
                                      | --- ELSE ---
                                      | 
      NEW_RPM = 1 --------------------| NEW_RPM = 0
       (new PIP information           | N_PREV = N
        is available for              | N = 60/(pips/rev * PIP period)
        calculation of RPM)           | N_BYTE = byte value of N
                                      | dndti = (N - N_PREV) / DT_DNDT
                                      | DNDT_SPK = ROLAV(dndti,TCNDT_SPK,DT_DNDT)
                                      | PREV_N_PIP = LAST_HI_PIP
                                      | Look up normalized N
                                      | NBAR = ROLAV(N, TCN)
                                      | NDBAR = ROLAV(N, TCNDBR) 
                                      | Get MIN_PIP_DLY & SIM_MIN
                                      | MHPFD_NEG logic
                                      | PIPLIM = 1
                                      | 
                                      | --- ELSE ---
                                      |
                                      | Get MIN_PIP_DLY & SIM_MIN
                                      | MHPFD_NEG logic
                                      | PIPLIM = 1


      WHERE:  DT_DNDT = Time of current PIP up edge (LAST_HI_PIP) minus the time of
      the PIP up edge last used to calculate N (PREV_N_PIP).

      NOTE:  PREV_N_PIP is  initialized  to  the  time  of  the  first  HI  PIP  in
      foreground.










                                        24-38

           INPUT CONVERSIONS AND FILTERS, ENGINE SPEED CALCULATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      FIRST_PIP = 0 ---------------------| SPOUT low



      old FIRST_PIP = 0 -----|
                             |AND -|
      new FIRST_PIP = 1 -----|     |
                                   |OR --| TSLPIP = 0
      old FIRST_PIP_LO = 0 --|     |
                             |AND -|
      new FIRST_PIP_LO = 1 --|

















































                                        24-39

            INPUT CONVERSIONS AND FILTERS, ROLLING AVERAGE ROUTINE - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 ROLLING AVERAGE ROUTINE


      OVERVIEW

      The EEC-IV filters inputs  using  a  rolling  average  routine.   This  is  a
      difference  equation  implementation  of  a first order low pass filter.  The
      filter behaviour is defined by the discrete time solution to the first  order
      differential equation and takes the form:

                                                 - (FK_TMR/TC)
                                   f  =  1  -  e

      Where "f" is called the filter constant in the difference equation:

                   new_average = f * new_value + (1 - f) * old_average

      Using the first two terms of the series expansion:

                                x                 x
                               e   =  1  +  x  +  --  +    
                                                  2!

      Simplifying, the exponential "f" becomes:

                       - (FK_TMR/TC)                  1
         f  =  1  -  e                  =  1  -  -------------  =   
                                                   (FK_TMR/TC) 
                                                  e

                             1                      1              
         f  =  1  -  -----------------  =   ------------------- 
                     1 + (FK_TMR / TC)       1 + (TC / FK_TMR)     


      The time constant (TC) is a function of the  input  being  filtered.   It  is
      calibratable.   Generally,  a  longer time constant filters more heavily, but
      also introduces more time lag into the signal.

      For most filters, the sampling period (FK_TMR) will equal the background loop
      time  (BG_TMR).   In  those  case where the sample period is not equal to the
      background loop time, the true sample period is to be passed to  the  rolling
      average routine.  See the calling convention in the symbology chapter.

      As an implementation detail, when (f * (new_value  -  old_average))  is  less
      than  the  bit  resolution  of new_average, the old_average is incremented or
      decremented by 1  bit  per  calculation  until  the  new_average  equals  the
      old_average.












                                        24-40

            INPUT CONVERSIONS AND FILTERS, ROLLING AVERAGE ROUTINE - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  TC = Time constant, sec.

       -  FK_TMR = sampling period, sec.

       -  old_average = Last output from filter routine.

       -  new_value = Most recent value of input to be filtered.



      OUTPUTS

      Registers:

       -  new_average = Latest filtered value.



      PROCESS
                       STRATEGY MODULE: INPUT_ROLLING_AVERAGE_COM1


      unconditionally -------------| f = 1 / (1 + (TC/FK_TMR))    
                                   |  (compute filter constant)
                                   |
                                   | new_average = old_average + (f * (new_value -
                                   |               old_average))
                                   |  (compute filtered output value)


























                                        24-41

           INPUT CONVERSIONS AND FILTERS, VEHICLE SPEED PROCESSING - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                VEHICLE SPEED PROCESSING


      OVERVIEW

      The variable reluctance type Vehicle Speed Sensor produces an AC signal  with
      frequency  proportional  to  vehicle speed.  Through appropriate gearing, the
      sensor generates 8000 cycles/mile, for a frequency range of 0 HZ at O MPH  to
      283.3  HZ at 127.5 MPH.  Interface hardware in the EEC converts the AC signal
      to a digital signal for input to the CPU.  The strategy updates VS  once  per
      background  loop  if  at  least one new rising edge was received (MPHCNT > 0)
      during the previous loop.  If, after 255 milliseconds,  no  new  signals  are
      received  (< 1.75 MPH), VS is set to 0.  This ensures a zero vehicle speed if
      the vehicle is stopped, or if the sensor fails.



      DEFINITIONS

      INPUTS

      Registers:

       -  DATA_TIME = The time of the current vehicle speed sensor edge.

       -  MPHCNT =  Counter  that  accumulates  the  number  of  edges  since  last
          background update to vehicle speed.

       -  NOBART = Filtered Ouput shaft Speed.

       -  RT_NOVS = Ratio of actual N/V to base N/V stored.

       -  VS = Vehicle Speed.

       -  VSBAR = Filtered vehicle speed.

       -  VSBARV = Filtered vehicle speed for Self-Test.

       -  VSCTR = Counter for unrealistic changes in vehicle speed.

       -  VS_LIM_BAR = Filtered Vehicle speed, extended range (0-255 MPH).

       -  VS_PREV = Previous value of vs, MPH.

      Bit Flags:

       -  FIRST_MPH = Counter that indicates when the first edge is seen.

       -  VSFMFLG = VSS failure mode flag.

      Calbration Constants:

       -  NVBASE = Base N/V.

       -  TCVS_LIM_BAR = Time constant for VS_LIM_BAR, sec.

       -  VSCNT = Increment to VSCTR when VS changes unrealistically.



                                        24-42

           INPUT CONVERSIONS AND FILTERS, VEHICLE SPEED PROCESSING - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  VSDELT = Maximum realistic change in  vehicle  speed  in  one  background
          loop.



      OUTPUTS

      Registers:

       -  MPHCNT = See above.

       -  MPHTIM1 = Time of the latest vehicle speed sensor rising edge.

       -  MPHTIM2 = Time of the last vehicle  speed  sensor  rising  edge  for  the
          previous background loop, or the first edge when vehicle speed is zero.

       -  TSLMPH = Time since last rising vehicle speed edge was  seen.   Reset  to
          zero when edge is seen, counts up in background when no edge is seen.

       -  VS = See above.

       -  VSBAR = See above.

       -  VSBARV = See above.

       -  VSCTR = See above.

       -  VS_LIM_BAR = See above.

       -  VS_PREV = See above.

      Bit Flags:

       -  FIRST_MPH = See above.


























                                        24-43

           INPUT CONVERSIONS AND FILTERS, VEHICLE SPEED PROCESSING - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                        STRATEGY MODULE: INPUT_VS_PROCESSING_COM3


      On the rising edge of the vehicle speed sensor interrupt:

      FIRST_MPH = 0 ---------------------| FIRST_MPH = 1
                                         | MPHTIM2 = DATA_TIME
                                         | TSLMPH = 0
                                         |
                                         | --- ELSE ---
                                         |
                                         | MPHTIM1 = DATA_TIME 
                                         | MPHCNT = MPHCNT + 1
                                         | TSLMPH = 0


      Once per background; the following logic is executed:

      TSLMPH >= 255 ms ------------------| vs = 0
                                         | MPHCNT = 0 
                                         | FIRST_MPH = 0
                                         | 
                                         | --- ELSE ---
                                         | 
                                         |          0.45 * MPHCNT
      MPHCNT > 0 ------------------------| vs = ---------------------
                                         |       (MPHTIM1 - MPHTIM2)
                                         | MPHCNT = 0
                                         | MPHTIM2 = MPHTIM1
                                         | 
                                         | --- ELSE ---
                                         |
                                         | vs = min(VS,450/TSLMPH)


      NOTE:

       -  450/TSLMPH = [(1 mile/800 pulses)*(3600 sec/1 hour)*(1000 msec/1  sec)*(1
          pulse)]/(TSLMPH  msec)  ->  max  mph  possible if a pulse came in at this
          instant.

       -  (MPHTIM1 - MPHTIM2) must be converted from clock ticks to seconds.

       -  The software will handle the units conversion from clock ticks to seconds
          (1 tick = 3.0 * 10E-6 sec., 12 MHz EEC, = 2.4 * 10E-6 sec., 15 MHz EEC).














                                        24-44

           INPUT CONVERSIONS AND FILTERS, VEHICLE SPEED PROCESSING - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      VS_PREV = 0 -----------------|
                                   |AND -| No action
      TSLMPH >= 255 msec ----------|     |  (Don't update counter
                                         |    if no new data)
                                         |
                                         | --- ELSE ---
                                         |
      |VS_PREV - vs| > VSDELT -----------| VSCTR = VSCTR + VSCNT 
                                         |                       
                                         | --- ELSE ---
                                         |
                                         | Decrement VSCTR


      always ----------------------------| VS_PREV = vs


      vs > 255 --------------------------| vs = 255
                                         |  (clip vs to 255 mph)
                                         | 
                                         | --- ELSE ---
                                         | 
                                         | NO ACTION
       


      vs > 127.5 ------------------------| VS = 127.5
                                         |  (clip vehicle speed to 127.5 mph)
                                         |
                                         | --- ELSE ---
                                         |
                                         | VS = vs


      VSFMFLG = 0 -----------------------| VS_LIM_BAR = ROLAV(vs,TCVS_LIM_BAR)
                                         | VSBAR = VSBARV
                                         |
                                         | --- ELSE ---
                                         |
                                         | VS_LIM_BAR = NOBART/(NVBASE * RT_NOVS)
                                         | VSBAR = NOBART/(NVBASE * RT_NOVS)
                                      


















                                        24-45

                CONTINUOUS SELF TEST, VEHICLE MOVING DETECTOR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 VEHICLE MOVING DETECTOR



      OVERVIEW


      This module performs the inferred vehicle motion  check  used  in  all  speed
      sensor  tests.  The logic is based on the principle that if the vehicle is in
      drive and the torque converter is full, it is then possible to infer  whether
      or not the vehicle is moving based on the vehicle operating conditions.

      Inferred vehcile speed for an AODE transmission is based  on  the  following;
      vehicle speed (OK to test for OSS output), output shaft speed (OK to test for
      VSS output), and WOT stall speed of the converter (used only  to  allow  test
      entry in the event that both VSS and OSS have failed).


      DEFINITIONS

      Registers:

       -  ATMR1 = Time since engine start.

       -  EIP_TMR = Engagement in progress timer.

       -  IPDL = Unfiltered MLPS position.

       -  ITP = Instantaneous throttle angle, A/D counts.

       -  LOAD = Universal LOAD as ratio of air charge over standard.

       -  N = Engine speed, RPM.

       -  NEBART = Filtered engine RPM for transmission.

       -  NOBART = Filtered Output Shaft Speed in RPM.

       -  TOT = Transmission oil temperature, Degrees F.

       -  VSBARV = Filtered vehicle speed for self test.

      Bit Flags:

       -  MFMFLG = MAP/MAF FMEM flag.

       -  NDSFLG = NEUTRAL/DRIVE flag; 1 -> drive.

       -  TFMFLG = TP FMEM flag.

      Calibration Constants:

       -  OS_MOV = Output shaft speed above which test will be executed.







                                        24-46

                CONTINUOUS SELF TEST, VEHICLE MOVING DETECTOR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  TRLOAD = Transmission Load;
                   0 -> Manual Transmission, no clutch or gear switches,
                        forced neutral state (NDSFLG = 0),
                   1 -> Manual Transmission, no clutch or gear switch,
                   2 -> Manual Transmission, one clutch or gear switch,
                   3 -> Manual Transmission, both clutch and gear switches,
                   4 -> Auto Transmission, non-electronic, neutral drive switch,
                   5 -> Auto Transmission, non-electronic, neutral pressure switch
                       (AXOD),
                   6 -> Auto Transmission, electronic, PRNDL sensor - park, 
                        reverse, neutral, overdrive, manual 1, manual 2.

       -  V_MOV_DLY = Start up delay before allowing VMOVING flag to set  to  avoid
          codes from partially filled converter.

       -  VMOV_TOT_MIN = Minimum TOT to allow vehicle motion to be inferred.

       -  VSAMIN  =  Minimum  engine  speed  to  do   VSS   test   with   automatic
          transmissions, RPM.

       -  VS_MOV = Vehicle speed above which test will be executed.

       -  VSSTP = Minimum TP to enter VSS test.

       -  V_VSS_LOAD = Minimum air charge ratio to do CVIP VSS test.

       -  V_VSS_MULT = Multiplier for FN689V when in 4X4.

       -  V_VSS_NRLO = Low engine speed for load range to infer vehicle movement.



      OUTPUTS

      Registers:

       -  VMOVING = 1 -> Vehicle is moving.























                                        24-47

                CONTINUOUS SELF TEST, VEHICLE MOVING DETECTOR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: INPUT_VMOVING_COM4


      TRLOAD => 4 -------------------------|
       (auto trans)                        |
                                           |
      ATMR1 >= V_MOV_DLY ------------------|        
       (long enough since startup          |
        to fill torque converter)          |
                                           |
      EIP_TMR = 0 -------------------------|
      (ENGAGEMENT COMPLETED)               |
                                           |
      IPDL <> 0 ---------------------------|
      (PRNDL in range)                     |
                                           |
      TOT >= VMOV_TOT_MIN -----------------|
                                           |
      TFMFLG = 0 --------------------------|
       (TP sensor OK)                      |
                                           |AND -|  
      NDSFLG = 1 --------------------------|     |
       (in drive)                          |     |  
                                           |     |
      I4X4L = 0 ---------------|           |     |
      (not in 4X4 mode)        |           |     |
                               |AND -|     |     |
      NEBART => VSAMIN --------|     |     |     |
       (high RPM)                    |OR --|     |
                                     |     |     |
      NEBART >= VSAMIN * V_VSS_MULT--|     |     |
       (min. rpm in 4X4 mode)              |     |
                                           |     |
      ITP => VSSTP ------------------------|     |  
                                                 |OR --| VMOVING = 1  
      TRLOAD <= 3 -------------------------|     |     | (Conditions satisfied
       (manual trans)                      |     |     |  to infer vehicle
                                           |     |     |  motion)
      MFMFLG = 0 --------------------------|     |     |
       (map sensor OK)                     |     |     | 
                                           |AND -|     |   
      N <= V_VSS_NRH1 ---------------------|     |     | 
                                           |     |     | 
      LOAD => V_VSS_LOAD ------------------|     |     | 
                                           |     |     | 
      N => V_VSS_NRLO ---------------------|     |     | 
                                                 |     |
      VSBARV >= VS_MOV --------------------------|     | 
                                                 |     | 
      NOBART >= OS_MOV --------------------------|     | 
                                                       | --- ELSE ---
                                                       |
                                                       | VMOVING = 0






                                        24-48

       INPUT CONVERSIONS AND FILTERS, ACSTRT, TCSTRT, INIT_TOT ROUTINE - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            ACSTRT, TCSTRT, INIT_TOT ROUTINE


      OVERVIEW

      This routine computes ACSTRT (air charge temperature), TCSTRT (engine coolant
      temperature), and INIT_TOT (transmission oil temperature), at start-up.


      DEFINITIONS

      INPUTS

      Registers:

       -  ECT = Engine Coolant Temperature, deg F.

       -  ECTCNT = Number of times that ECT sensor input was read.

       -  INIT_TOT = TOT at  start-up;  arithmetic  average  of  the  first  8  TOT
          readings.

       -  PUTMR = Power-up timer.

       -  TCSTRT_ACCUM = TCSTRT accumulator, deg F.

       -  TOT = Transmission Oil Temperature.

      Calibration Constants:

       -  TKYON2 = Time delay before Keyon updates are permitted, secs.



      OUTPUTS

      Registers:

       -  ACSTRT = ACT at start-up; arithmetic average of the first 8 ACT readings.

       -  ACSTRT_ACCUM = ACSTRT accumulator, deg F.

       -  ACT = Air charge temperature, deg F.

       -  INIT_TOT = See above.

       -  TCSTRT_ACCUM = See above.

       -  TCSTRT = ECT at start-up; arithmetic average of the first 8 ECT readings.











                                        24-49

       INPUT CONVERSIONS AND FILTERS, ACSTRT, TCSTRT, INIT_TOT ROUTINE - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                              STRATEGY MODULE: EQTCSTRT_GA

                TEMPERATURE READINGS AT START - ACSTRT, TCSTRT, INIT_TOT


      PUTMR > TKYON2 ------------|                               
                                 |AND -| INIT_TOT = INIT_TOT + TOT / 8
      ECTCNT < 8 ----------------|     | (compute arithmetic average of the
                                       |  first 8 consecutive TOT readings)
                                       | TCSTRT_ACCUM = TCSTRT_ACCUM+(ECT/8)
                                       | (compute arithmetic average of the
                                       |  first 8 consecutive unfiltered ECT
                                       |  readings)
                                       | ACSTRT_ACCUM = ACSTRT_ACCUM+(ACT/8)
                                       | (compute arithmetic average of the
                                       |  first 8 consecutive unfiltered ACT
                                       |  readings)
                                       | Increment ECTCNT
                                       | (increment counter)



      ECTCNT < 8 ----------------------| TCSTRT = ECT
                                       | (load TCSTRT with ECT until TCSTRT
                                       |  has been computed)
                                       | ACSTRT = ACT
                                       | (load ACSTRT with ACT until ACSTRT
                                       |  has been computed)
                                       |
                                       | --- ELSE ---
                                       |
                                       | TCSTRT = TCSTRT_ACCUM
                                       | (load TCSTRT with arithmetic average)
                                       | ACSTRT = ACSTRT_ACCUM
                                       | (load ACSTRT with arithmetic average)
























                                        24-50

                   INPUT CONVERSIONS AND FILTERS, POWER MODE - GAA0
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                       POWER MODE


      OVERVIEW

           This module determines Power-On or Power-Off mode  and  sets  the  flag,
      FLG_PWR accordingly.  If the throttle position is greater than the sum of the
      minimum throttle position, RATCH, and some calibratable delta,  DELTAT,  then
      the engine/transmission is considered to be in the Power-On mode.  Otherwise,
      the  engine/transmission  is  considered  to  be  in  the   Power-Off   mode.
      Hysteresis is provided for mode stability.

           During a throttle position sensor failure, the power mode is  determined
      by  the  actual  speed ratio (SPD_RATIO).  If the speed ratio is greater than
      some calibratable  minimum,  SPD_PM,  then  the  mode  is  considered  to  be
      Power-Off.  Again, hysteresis is provided for mode stability.


      DEFINITIONS

      INPUTS

      Registers:

       -  SPD_RATIO = Speed Ratio.

       -  RATCH = Kicker off lowest filtered throttle position.

       -  TP = Throttle position, counts.

       -  TP_REL = Relative Throttle Position, TP - RATCH.

      Bit Flags:

       -  TFMFLG = Flag indicating TP sensor is in/out of range.

      Calibration Constants:

       -  DELTAT = Part throttle to closed throttle breakpoint for Power mode.

       -  HYSTSPD = Hysteresis for SPD_PM for FMEM Power mode.

       -  HYSTST = Hysteresis for DELTAT for Power Mode.

       -  SPD_PM = Minimum Speed Ratio for Power-Off mode.



      OUTPUTS

      Bit Flags:

       -  FLG_PWR = Power Mode flag:  1 -> Power-On mode; 0 -> Power-Off mode.







                                        24-51

                   INPUT CONVERSIONS AND FILTERS, POWER MODE - GAA0
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                              STRATEGY MODULE: EQPWRMODE_GA


      TFMFLG = 0 --------------------------|
       (normal power mode determination)   |
                                           |AND -|
      TP_REL <OR= DELTAT ------------|S Q--|     |
                                     |           |
      TP_REL > DELTAT + HYSTST ------|C          |
                                                 |OR --| Set FLG_PWR = 0
      TFMFLG = 1 --------------------------|     |     |  (power off mode)
       (FMEM power mode determination)     |     |     |
                                           |AND -|     | --- ELSE --- 
      SPD_RATIO >OR= SPD_PM ---------|S Q--|           | 
                                     |                 | Set FLG_PWR = 1
      SPD_RATIO < SPD_PM - HYSTSPD --|C                   (power on mode)











































                                        24-52

     INPUT CONVERSIONS AND FILTERS, COLD TEMPERATURE TV SOLENOID OPERATION - GAA0
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                COLD TEMPERATURE DETERMINATION FOR TV SOLENOID OPERATION


      OVERVIEW

           The amount of Engagement TV pressure is a function of  the  Transmission
      Oil  Temperature,  TOT.   This  logic sets the flag, FLG_TVENG_CD, if the TOT
      sensor  indicates  cold  and  the  flag,  FLGTVENG_CD  if  moderately   cold.
      FLG_TVENG_CD will be cleared when the time since the first engagement exceeds
      a calibratable value, even if TOT does not increase.

           The amount of start-up TV is a function of TOT also.   This  logic  sets
      the flag, FLG_TVSTR_CD if the TOT sensor indicates cold temperature.


      DEFINITIONS

      INPUTS

      Registers:

       -  TOT = Transmission Oil Temperature, deg.  F.

      Calibration Constants:

       -  TOTTV1 = Maximum ECT to use TVCHRG for start-up, deg F.

       -  TOTTV2 = Minimum ECT to use TVEMAX engagement TV, deg F.

       -  TOTTV3 = Minimum ECT to use TVEMOD engagement TV, deg F.



      OUTPUTS

      Bit Flags:

       -  FLG_TVENG_CD = Flag which indicates cold temperature for  engagement  TV:
          0 -> Don't use TVEMAX in engagement TV; 1 -> Use TVEMAX in engagement TV.

       -  FLG_TVENG_MD = Flag which indicates moderate temperature  for  engagement
          TV:   0  ->  Don't  use  TVEMOD  in  engagement  TV;  1  -> Use TVEMOD in
          engagement TV.

       -  FLG_TVSTR_CD = Flag which indicates cold temperature for start-up TV:   0
          -> Don't use TVCHRG in start-up TV; 1 -> Use TVCHRG in start-up TV.














                                        24-53

     INPUT CONVERSIONS AND FILTERS, COLD TEMPERATURE TV SOLENOID OPERATION - GAA0
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS

      TOT <OR= TOTTV1 --------------------| Set FLG_TVSTR_CD = 1
                                          | 
                                          | --- ELSE ---
                                          | 
                                          | Set FLG_TVSTR_CD = 0


      TOT <OR= TOTTV2 --------------------| Set FLG_TVENG_CD = 1
                                          |
                                          | --- ELSE ---
                                          | 
                                          | Set FLG_TVENG_CD = 0


      TOT <OR= TOTTV3 --------------------| Set FLG_TVENG_MD = 1
                                          |
                                          | --- ELSE ---
                                          |
                                          | Set FLG_TVENG_MD = 0







































                                        24-54

      INPUT CONVERSIONS AND FILTERS, DYNAMIC TV DUE TO COLD TRANSMISSION - GAA0
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           DYNAMIC TV DUE TO COLD TRANSMISSION


      OVERVIEW

           The accumulator pressure  is  the  hydraulic  pressure  used  to  apply,
      release,  and  hold the various clutches and bands in the transmission during
      shifts.  When the transmission is not shifting,  the  hydraulic  pressure  is
      determined  by  the line pressure.  The accumulator pressure is less than the
      line pressure.  Therefore,  it  is  necessary  to  add  additional  hydraulic
      pressure  via  the  TV  solenoid  during shifts.  This additional pressure is
      called "dynamic TV."

           The accumulator in the E4OD transmission may stick when the transmission
      is  cold.  When the accumulator sticks, the transmission always operates with
      accumulator pressure; during shifts and during steady-state gear  conditions.
      Of  course,  the  pressure  is inadequate during the steady-state conditions,
      since the EEC-IV is not adding the additional TV which is  added  during  the
      shifts.   With  inadequate  pressure,  the transmission is unable to transmit
      large amounts of torque.

           Therefore, logic is needed to also add dynamic TV when conditions exist,
      such that the accumulator may stick.


      DEFINITIONS

      INPUTS

      Registers:

       -  TOT = Transmission Oil Temperature.

      Calibration Constants:

       -  TOTTV4 = The maximum temperature where it is no longer necessary  to  add
          dynamic TV due to the accumulator sticking.



      OUTPUTS

      Registers:

       -  FLG_DYN_CD = Flag which indicates that it is necessary to add dynamic  TV
          due to cold transmission conditions.



      PROCESS

      TOT < TOTTV4 ----------------------------| Set FLG_DYN_CD = 1
                                               |
                                               | --- ELSE ---
                                               |
                                               | Set FLG_DYN_CD = 0




                                        24-55

      INPUT CONVERSIONS AND FILTERS, DYNAMIC TV DUE TO COLD TRANSMISSION - GAA0
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL






























































                                        24-56












                                      CHAPTER 25

                                  OUTPUT CONVERSIONS

















































                                         25-1

         OUTPUT CONVERSIONS, EEC OVERVIEW, DUCE OUTPUT CONFIGURATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              DUCE OUTPUT CONFIGURATION


   OVERVIEW

   This module is used to map  hardware  specific  duce  output  configurations  to
   specific  duce channels.  Please refer to the pinout for each specific module to
   determine what the map should be.

   The formula for calculating the number of duce cycles (also known as duce_ticks)
   to calibrate the xxx_PRD_DT parameters to is:

        +-----------------------------------+
        |                  feosc            |
        |  xxx_PRD_DT = ---------- - 1      |
        |                 54 * fddc         |
        +-----------------------------------+

   Where:  feosc = CPU clock frequency in Hertz.
           fddc  = Desired DUCE channel frequency in Hertz.
           54 is derived from:  1 DUCE state = 3/feosc.
                                1 DUCE cycle (duce_tick) = 18 DUCE states.
   Hence, 18 * 3/feosc is the DUCE cycle-to-seconds conversion factor. 
   (3.6 microseconds per DUCE cycle @ 15MHz)



   DEFINITIONS

   Calibration Constants:

         -  CANP_PRD_DT = DUCE CANP period in duce_ticks.

         -  DC3_PRD_DT = DUCE channel 3 (unused) period in duce_ticks.

         -  DC5_PRD_DT = DUCE channel 5 (unused) period in duce_ticks.

         -  DC6_PRD_DT = DUCE channel 6 (unused) period in duce_ticks.

         -  DC7_PRD_DT = DUCE channel 7 (unused) period in duce_ticks.

         -  EVR_PRD_DT = DUCE EVR period in duce_ticks.

         -  ISC_PRD_DT = DUCE Normal ISC period in duce_ticks.

         -  LUS_PRD_DT = DUCE LUS period in duce_ticks.














                                         25-2

         OUTPUT CONVERSIONS, EEC OVERVIEW, DUCE OUTPUT CONFIGURATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   PROCESS
                        STRATEGY MODULE: DUCE_OUT_CONFIG_COM10


                          dc0_prd_dtks = ISC_PRD_DT         
                          dc1_prd_dtks = EVR_PRD_DT         
                          dc2_prd_dtks = CANP_PRD_DT        
                          dc3_prd_dtks = DC3_PRD_DT (unused)
                          dc4_prd_dtks = LUS_PRD_DT         
                          dc5_prd_dtks = DC5_PRD_DT (unused)
                          dc6_prd_dtks = DC6_PRD_DT (unused)
                          dc7_prd_dtks = DC7_PRD_DT (unused)
















































                                         25-3

         OUTPUT CONVERSIONS, EEC OVERVIEW, DUCE OUTPUT CONFIGURATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL






























































                                         25-4












                                      CHAPTER 26

                                        TIMERS

















































                                         26-1

                                    TIMERS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    TIMER SUMMARY


   TIMER             DESCRIPTION
   -----             -----------

   ADPTMR            Adaptive fuel timer (sec)

   ATMR1             Time since start (time since exiting crank mode) (sec)

   ATMR2             Time since engine coolant temperature became
                     greater than TEMPFB (sec)

   ATMR3             Time since Entering RUN Mode (sec)

   CTNTMR            Closed Throttle mode neutral timer (sec)

   CTTMR             Time at closed throttle timer (sec)

   IDLTMR            Time at Idle in Drive

   ISCTMR            RPM sample/KAM update timer (sec)

   LESTMR1           EGO-1 lack of switching timer (sec)

   LESTMR2           EGO-2 lack of switching timer (sec)

   LUGTMR            LOM load transition timer (sec)

   MULTMR            Time since incrementing LAMMUL (msec)

   NACTMR            Time not at closed throttle (sec)

   NDDTIM            Time since neutral/drive switch state change (sec)

   NWOTMR            Not at Wide Open Throttle Timer. (sec)

   PRGTMR            Canister purge accumulation timer (sec)

   PUTMR             Time since CPU power-up (msec)

   RUN_TMR           Time since entering run mode (sec)

   RUNUPTMR          Time since runup (.125 sec)

   SETTMR            RPM control entry delay timer (.125 sec)

   TSEGRE            Accumulated time EGR is enabled (sec)

   TSLPIP            Time since last PIP (msec)










                                         26-2

                                    TIMERS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   DEFINITIONS


      INPUTS

      Registers:

       -  APT = Throttle mode flag; -1 -> closed throttle, 0 -> part throttle, 1 ->
          wide open throttle.

       -  ATMR1_LST = Last calculated value of ATMR1.

       -  CRKPIP_CTR = Foreground register to count PIPs for crank fuel.

       -  CRKPIP_CTR_BG = Background register equivalent of CRKPIP_CTR.

       -  DASPOT = Dashpot contribution to  idle  air  flow.   Used  to  provide  a
          preposition air flow in Part Throttle and Wide Open Throttle modes, which
          is "bled off" after a transition to Closed Throttle.   This  gradual  air
          decrement allows a smooth transition to RPM control.

       -  ECT = Engine coolant temperature, deg.  F.

       -  ISCFLG = ISC mode indicator flag;  -1  ->  Dashpot  Mode,  0  ->  Dashpot
          Preposition Mode, 1 -> Closed Loop RPM Control Mode, 2 -> Closed Loop RPM
          Control (Lock-out entry to RPM control).

       -  LOAD = Universal normalized load parameter.

       -  N = Engine speed, RPM.

       -  NDBAR = Filtered engine speed.

       -  RATCH = Lowest filtered throttle position, counts.

       -  RPMERR_A = Filtered RPMERR for airflow, time constant TCBPA.

       -  TCSTRT = Temperature of ECT at cold start-up, deg F.






















                                         26-3

                                    TIMERS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Bit Flags:

       -  AFMFLG = Flag indicating that ACT sensor has failed.

       -  CFMFLG = Flag indicating that ECT sensor is in/out of range.

       -  CRKFLG = Crank flag; 1 -> engine in Crank mode.

       -  CTNFLG = 1 -> closed throttle neutral idle.

       -  DNDSUP = Drive/Neutral select.

       -  EGO_CNT1 = Number of EGO1 switches since EGO-1 sensor failed.

       -  EGO_CNT2 = Number of EGO2 switches since EGO-2 sensor failed.

       -  FLG_STALL  =  Flag  indicating  a  stall  has  occured;  transition  from
          underspeed/run to crank

       -  IDLFLG = Flag indicating transmission in drive and at idle.

       -  MFMFLG = Flag indicating that MAF sensor has failed.

       -  NDSFLG = Neutral/Drive flag; 1 -> Drive.

       -  NEW_PIP = New PIP rising edge occurred this background loop.

       -  PRGFLG = PRGTMR and CPRGTMR Control flag.

       -  RUNUP_FLG = Flag indicating that initial runup is complete;  1  ->  Runup
          rpm exceeded.

       -  UNDSP = Underspeed flag; 1 -> Underspeed mode or Crank.



























                                         26-4

                                    TIMERS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  AFECT1 = Minimum ECT for starting the Adaptive Fuel timer, deg F.

       -  AFECT2 = Overtemp ECT to zero the adaptive fuel timer.

       -  BYHTMR = Bankline timer time delay for Thermactor bypass.

       -  BYPLES = Time delay before bypass after last Ego switch.

       -  CRKCTR_RESET = CRKPIP_CTR reset switch; 1 -> reset CRKPIP_CTR upon stall.

       -  CRKPIPCNT2 = CRKPIP_CTR reset value for underspeed to crank  transitions,
          sec.

       -  CRKTM1 = Time in run or underspeed below which  CRKPIP_CTR  is  reset  to
          CRKPIPCNT2, sec.

       -  CRKTMR_INC = Calibration switch which determines whether CRKPIP_CTR  runs
          when the engine state is out of crank.

       -  CTHIGH = Hot start minimum engine coolant temperature, deg F.

       -  CTLOW = Cold start maximum ECT, deg F.

       -  DFLDH = Decel Fuel low load hysteresis.

       -  DFLDL = Decel Fuel low load shut off.

       -  FN125 = LOM Load function to activate LOM spark  strategy.   Input:   RPM
          and Output:  load.

       -  FN306 = Cranking fuel pulsewidth multiplier as a function  of  number  of
          pips in crank, sec.  X-input = CRKPIP_CTR_BG

       -  FN880(CTNTMR) = DSDRPM adder vs.  time at Idle, sec.

       -  FN1360 = Stabilized Open Loop Fuel Table, = an 8 X  10  table  of  lambda
          values as a function of engine speed N, and PERLOAD.
                 X = FN070B(N) 
                 Y = FN072B(PERLOAD)

       -  EGRMPT = Egrate ramp time for TCSTRT <= CTLOW, sec.

       -  HLODH = Upper LOAD Limit for Closed Loop Fuel Control, unitless.

       -  IDLRPM = Maximum RPM for Closed Throttle Mode Idle, rpm.  Range of  0  to
          7000, accuracy of 25 RPM.

       -  IDRPMH = Hysteresis for IDLRPM.  Range of 0 to 1000, accuracy of 25 RPM.

       -  INLRPM = Maximum RPM to increment CTHTMR.

       -  INLRPH = Hysteresis for INLRPM.

       -  ISCTM = Time interval over which the rate of change in  engine  speed  is
          evaluated to check for rpm control lockout.  Typical value - 4 sec.



                                         26-5

                                    TIMERS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  LUGSW = LUGTMR logic switch.

       -  LUGTIM = Engine load transition time, sec.

       -  NDIF = The deviation in engine speed allowed  over  the  ISCTM  specified
          time  interval.   Values  too  small could lock the ISC system out of C/L
          speed control indefinately.   Values  too  large  invalidate  the  check.
          Typical value - 32 rpm.

       -  NIHYS = Neutral Idle Hysteresis, sec.  Base value is 2,  range  is  0  to
          100.

       -  NIOLD = Neutral Idle Open Loop Delay, sec.  Base value is 255, range is 0
          to 255.

       -  NLAST = Last sampled rpm for lockout logic.  NLAST is re-calculated  when
          ISCTMR exceeds ISCTM.

       -  NUMEGO = Number of EGO sensors present (1 or 2).

       -  RPMDED =  Adaptive  ISC  learning  deadband.   Learning  is  disabled  if
          RPMERR_A exceeds this deadband.  ..Typical value - 50 rpm.

       -  TEMPFB = Minimum ECT required to start ATMR2 timer, deg F.




































                                         26-6

                                    TIMERS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  ATMR1_LST = Last calculated value of ATMR1.

       -  CRKPIP_CTR = See above.

       -  CRKPIP_CTR_BG = See above.

      Bit Flags:

       -  ADPTMR_FLG = Adaptive Fuel Time Flag.

       -  CTNFLG = 1 = closed throttle neutral idle.

       -  DMFLG = Decel fuel low load timer enabled flag; 1 -> Count up timer.

       -  IDLFLG = Flag indicating transmission in drive and at idle.

       -  LEGOFG1 = Lack of EGO-1 switching.

       -  LEGOFG2 = Lack of EGO-2 switching.

       -  NEW_PIP = See above.



































                                         26-7

                                    TIMERS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                                STRATEGY MODULE: TIMER_DC
   ADPTMR - ADAPTIVE FUEL ENABLE TIMER


      BRIEF DESCRIPTION:

      This timer allows Adaptive Fuel to be enabled if the Engine is  in  Run  Mode
      and  the  Engine Coolant Temperature is within a certain band.  Adaptive Fuel
      is disabled if either of these conditions is not met.

      RUN mode ------------------------|
                                       |AND -| COUNT UP ADPTMR
      AFECT1 <= ECT <= AFECT2 ---------|     | ADPTMR_FLG
                                             |
                                             | --- ELSE ---
                                             |
                                             | ADPTMR = 0
                                             | Clear ADPTMR_FLG



   ATMR1 - TIME SINCE ENGINE START-UP


      CRKFLG = 0 ----------------------------| ATMR1_LST = ATMR1
      (RUN or UNDERSPEED mode)               | (save last calculated value 
                                             |  of ATMR1)
                                             | Count up ATMR1 (calculate new
                                             |  value)
                                             |
                                             | --- ELSE ---
                                             |
                                             | ATMR1_LST = ATMR1
                                             | (save last calculated value 
                                             |  of ATMR1)
                                             | ATMR1 = 0



   ATMR2 - TIME SINCE ENGINE COOLANT TEMPERATURE BECAME GREATER THAN TEMPFB


      ECT > TEMPFB --------------------|S  Q-| COUNT UP ATMR2
                                       |     | 
      NEVER ---------------------------|C    | 
      (except at power-up initialization)    | 
                                             | --- ELSE ---
                                             |
                                             | ATMR2 = 0



   ATMR3 - TIME SINCE ENTERING RUN MODE


      UNDSP = 0 -----------------------------| Increment ATMR3
        (Run Mode)


                                         26-8

                                    TIMERS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   CRKPIP_CTR - PIP COUNTER FOR CRANKING FUEL


      CRKPIP_CTR is used as a crank fuel multiplier in order to do  a  lean-out  or
      fuel shut-off during sub-zero cold operation.  Some calibrators are using the
      logic to improve restarts following a stall  during  -20  deg  F  testing  by
      turning  off  the  fuel  during  the first seconds of crank.  This allows the
      engine to restart on the residual fuel remaining in the  manifold  after  the
      stall.


      CRKCTR_RESET = 1 ----------------|
                                       |
      FLG_STALL = 1 -------------------|AND -| Reset counter part way
                                       |     | CRKPIP_CTR = CRKPIPCNT2
      ATMR1_LST <= CRKTM1 -------------|     | CRKPIP_CTR_BG = CRKPIPCNT2 
       (in run or underspeed less            |
        than CRKTM1 seconds)                 | 
                                             | --- ELSE ---
      CRKFLG = 1 ----------------------|     | 
       (in crank)                      |OR --| CRKPIP_CTR is incremented
                                       |     | every rising edge of PIP
      CRKTMR_INC > 0 ------------------|     | CRKPIP_CTR_BG = CRKPIP_CTR
                                             |
                                             | --- ELSE ---
                                             | 
                                             | Freeze CRKPIP_CTR
                                             | CRKPIP_CTR = CRKPIP_CTR_BG


   In Foreground PIP_DATA module

      always --------------------------------| Increment CRKPIP_CTR every
                                             | rising edge of PIP,
                                             | Clip CRKPIP_CTR at 255 as
                                             | a maximum
























                                         26-9

                                    TIMERS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   CTNTMR - CLOSED THROTTLE NEUTRAL TIMER


      ECT > CTHIGH --------------------|
                                       |
      APT = -1 ------------------------|    
       (closed throttle)               |
                                       |AND -| Count up CTNTMR 
      NDSFLG = 0 ----------------------|     | Clip to NIOLD + NIHYS
       (neutral)                       |     | CTNFLG = 1 
                                       |     | 
      N < INLRPM + FN880 --------|S  Q-|     | 
                                 |           |
      N > INLRPM+FN880+INLRPH ---|C          | 
                                             | --- ELSE ---
                                             |
                                             | Count down CTNTMR 
                                             | CTNFLG = 0
                                             | Clip CTNTMR to 0



   CTTMR - TIME AT CLOSED THROTTLE


      APT = -1 ------------------------------| Count up CTTMR
       (closed throttle mode)                |
                                             | --- ELSE ---
                                             |
                                             | CTTMR = 0






























                                        26-10

                                    TIMERS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   IDLTMR - TIME AT IDLE WITH TRANSMISSION IN DRIVE

      DNDSUP = 1 ----------------------|
       (drive)                         |
                                       |
      APT = -1 ------------------------|AND -| Increment IDLTMR
       (closed throttle mode)          |     | IDLFLG = 1
                                       |     |
      N < IDLRPM ----------------|S  Q-|     |
                                 |           | 
      N > IDLRPM + IDRPMH -------|C          | 
                                             | --- ELSE ---
                                             |
                                             | IDLTMR = 0
                                             | IDLFLG = 0



   ISCTMR - RPM SAMPLE / KAM UPDATE DELAY TIMER (sec)

      This timer is used for two separate purposes in the normal idle speed
      control strategy. It is always cleared in dashpot-preposition mode.

      - In rpm control mode, it is used to prevent ISCKAM updates while
        RPMERR_A is outside the deadband allowed for ISCKAM learning.

      - In dashpot mode, it is used to pace the rate of change of RPM checks
        in order to determine whether or not to go to lockout mode.


      In Mode Select logic ------|
                                 |AND -|
      APT >= 0 ------------------|     |
       (preposition mode)              |
                                       |
      In Isckam Update logic ----|     |
                                 |AND -|
      |RPMERR_A| > RPMDED -------|     |OR --| ISCTMR = 0
       (outside deadband)              |     |
                                       |     |
      In Lockout logic ----------|     |     |
                                 |     |     | 
      ISCFLG < 1 ----------------|     |     |
       (not rpm control          |     |     |
        or lockout)              |AND -|     |
                                 |           |
      ISCTMR >= ISCTM -----------|           |
       (time to check RPM)       |           |
                                 |           |
      |N - NLAST| > NDIF --------|           |
       (RPM changing too fast)               |
                                             | --- ELSE ---
                                             |
                                             | Increment ISCTMR






                                        26-11

                                    TIMERS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   LESTMR1 - LACK OF EGO SWITCHING TIMER (TIME SINCE LAST EGO SWITCH)

      EGO-1 SWITCH --------------------|     
                                       |OR --| LESTMR1 = 0
      OPEN LOOP FUEL CONTROL ----------|     |
                                             | --- ELSE ---
                                             |
                                             | Count up LESTMR1


   Additional logic associated with LESTMR1:

      EGO-1 switch --------------------------| Increment EGO_CNT1

      LESTMR1 >= BYPLES ---------------------| LEGOFG1 = 1
                                             | EGO_CNT1 = 0


      EGO_CNT1 > 0 --------------------------| LEGOFG1 = 0


   LESTMR2 - LACK OF EGO SWITCHING TIMER (TIME SINCE LAST EGO SWITCH)

      EGO-2 SWITCH --------------------|    
                                       |OR --| LESTMR2 = 0
      OPEN LOOP FUEL CONTROL ----------|     | 
                                             | --- ELSE ---
                                             |
                                             | COUNT UP LESTMR2


   Additional logic associated with LESTMR2:

      NUMEGO = 2 ----------------------|
                                       |AND -| Increment EGO_CNT2
      EGO-2 switch --------------------|


      LESTMR2 >= BYPLES ---------------------| LEGOFG2 = 1
                                             | EGO_CNT2 = 0


      EGO_CNT2 > 0 --------------------------| LEGOFG2 = 0

















                                        26-12

                                    TIMERS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   LUGTMR - LOM LOAD TRANSITION TIMER

      LOAD > FN125 --------------------|
                                       |OR --| Count up LUGTMR
      APT = 1 -------------------------|     |  (clip at LUGTIM)
       (wide open throttle)                  |
                                             | --- ELSE ---
                                             |
      LOAD <= FN125 -------------------|     |
                                       |AND -| LUGTMR = 0
      LUGSW = 1 -----------------------|     |
                                             |
                                             | --- ELSE ---
                                             |
                                             | Count down LUGTMR
                                             | (CLIP AT 0)



   MULTMR - TIME SINCE INCREMENTING LAMMUL


      Always --------------------------------| COUNT UP MULTMR

          (Note: MULTMR is periodically set to 0 within
           the Open Loop Fuel Logic)



   NACTMR - NOT AT CLOSED THROTTLE TIME


      APT = 0 -------------------------|
       (part throttle mode)            |OR --| COUNT UP NACTMR 
                                       |     |
      APT = 1 -------------------------|     | 
       (wide open throttle mode)             | 
                                             | --- ELSE ---
                                             | 
                                             | NACTMR = 0



   NDDTIM - TIME SINCE NEUTRAL/DRIVE SWITCH STATE CHANGE


      NEUTRAL/DRIVE SWITCH STATE CHANGE -----| NDDTIM = 0
                                             |
                                             | --- ELSE ---
                                             |
                                             | Count up NDDTIM









                                        26-13

                                    TIMERS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   NWOTMR LOGIC (NOT AT WIDE OPEN THROTTLE TIMER)


      APT = 1 -------------------------------| NWOTMR = 0
       (Wide Open Throttle)                  |
                                             | --- ELSE ---
                                             |
                                             | Count up NWOTMR



   PRGTMR - CANISTER PURGE TIMER


      PRGFLG = 1 ----------------------------| Count up PRGTMR
                                             |
                                             | --- ELSE ---
                                             |
                                             | Freeze PRGTMR



   PUTMR - TIME SINCE CPU POWER-UP


      CPU POWER ON --------------------------| Count up PUTMR



   RUN_TMR - TIME SINCE ENTERING RUN MODE


      UNDSP = 0 -----------------------------| Increment RUN_TMR
                                             |
                                             | --- ELSE ---
                                             |
                                             | Freeze RUN_TMR



   RUNUPTMR - TIME SINCE RUNUP (.125 sec)

      RUNUPTMR measures the time since the runup rpm was first exceeded.  The timer
      is  used  to disable IPSIBR update for a time period following initial RUNUP.
      For setting of RUNUP_FLG see idle speed control chapter.


      RUNUP_FLG = 1 -------------------------| Increment RUNUPTMR
                                             |
                                             | --- ELSE ---
                                             |
                                             | RUNUPTMR = 0








                                        26-14

                                    TIMERS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   SETTMR - RPM CONTROL ENTRY DELAY TIMER (.125 sec)

      This timer is used  to  delay  entry  into  RPM  control  for  a  time  which
      corresponds  to  the  manifold stabilization time.  SETTMR is cleared in Idle
      Speed Control MODE_SELECT.

      In mode select ------------------|
                                       |
      APT >= 0 ------------------|     |AND -| SETTMR = 0
       (not closed throttle)     |     |     |
                                 |OR --|     |
      APT = -1 ------------|     |           |
                           |AND -|           |       
      DASPOT <> DASCTL ----|                 |
       (daspot too large)                    |
                                             | --- ELSE ---
                                             |
                                             | Increment SETTMR



   TSEGRE - ACCUMULATED TIME EGR IS ENABLED


      TCSTRT > CTLOW ------------------------| TSEGRE = EGRMPT ('R' = 1)
                                             |
                                             | --- ELSE ---
                                             |
      EGREN = 1 -----------------------------| Count up TSEGRE
       (EGR enabled)                         |  (clip at EGRMPT)
                                             |
                                             | --- ELSE ---
                                             |
                                             | Freeze TSEGRE



   TSLPIP - TIME SINCE LAST PIP


      NEW_PIP = 1 ---------------------------| TSLPIP = 0
                                             | NEW_PIP = 0
                                             |
                                             | --- ELSE ---
                                             |
                                             | Count up TSLPIP

      Where NEW_PIP is set equal to 1 upon a PIP interrupt.












                                        26-15

                                    TIMERS - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL






























































                                        26-16












                                      CHAPTER 27

                               FAILURE MODE MANAGEMENT

















































                                         27-1

                      FAILURE MODE MANAGEMENT, OVERVIEW - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  FAILURE MODE STRATEGY


      The Failure Mode (FMEM)  strategy  protects  vehicle  function  from  adverse
      effects  of  an EEC component failure.  The strategy recognizes open or short
      circuit failure for seven sensors:  MAF, TP, ECT, ACT, EVP/EPT, BP  and  EGO.
      In  general,  if  the  continuous Self Test strategy recognizes a failure the
      FMEM strategy will execute an alternative vehicle strategy.  The  alternative
      strategy disables logic which relies on realistic sensor values.  Some sensor
      FMEM strategies also substitute a "safe" value for the bad sensor.  A summary
      of the alternate strategies is tabulated below.


      -----------------------------------------------------------------------
                                     |           Sensors                     |
      Alternate Strategy             | MAF | TP | ECT | ACT | EGR | BP | EGO |
      _______________________________|_____|____|_____|_____|_____|____|_____|
      -------------------------------|-----|----|-----|-----|-----|----|-----|
      SUPERCHARGE - Not Bypassed     |     | X  |     |     |     |    |     |
      -----------------------------------------------------------------------|
      Adaptive Fuel - No Learning    |  X  | X  |  X  |  X  |     |    |     |
      -----------------------------------------------------------------------|
      Idle Speed - Fixed Duty Cycle  |  X  | X  |     |     |     |    |     |
      -----------------------------------------------------------------------|
      EGR - Disabled                 |  X  | X  |  X  |  X  |  X  |  X |     |
      -----------------------------------------------------------------------|
      Thermactor Air - Bypass        |  X  | X  |  X  |  X  |     |    |     |
      -----------------------------------------------------------------------|
      Decel Fuel Shutoff - Disable   |  X  | X  |  X  |  X  |  X  |    |     |
      -----------------------------------------------------------------------|
      Foreground Fuel - Disable      |  X  |    |     |     |     |    |     |  
      -----------------------------------------------------------------------|
      Managed Fuel Air - Disable     |  X  |    |  X  |  X  |     |    |     |
      -----------------------------------------------------------------------|
      ECAD - Full Speed mode         |  X  | X  |  X  |  X  |     |    |     |
      -----------------------------------------------------------------------|
      Adaptive Fuel - Reinitialize   |     |    |     |     |     |    |  X  |
      -----------------------------------------------------------------------|


      In the event of a primary side failure of the High Data Rate  Distributorless
      Ignition  system (HDR-DIS), closed loop fuel, EGR, and air conditioner clutch
      can be disabled.  In addition, DIS FMEM strategy can adjust LAMBSE  and  SAF,
      if desired.
















                                         27-2

                 FAILURE MODE MANAGEMENT, FAILURE RECOGNITION - GSAJ0
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 FAILURE RECOGNITION


      OVERVIEW

      The FMEM strategy checks the "Continuous Self Test Code" Filters to ascertain
      whether  a  sensor  has  failed.   If the sensor failure lasts long enough to
      trigger a Self Test Code, the FMEM  strategy  will  substitute  an  alternate
      value  and  strategy.   Until  the  Self  Test  filters  exceed  their  fault
      thresholds, the strategy continues to use the last known  valid  value.   The
      logic  diagram  below  describes  the  entire  Fault  recognition  and  value
      substitution strategy.  However, to more effectively use the Self Test  Fault
      filters, the logic is divided into two sections; the Fault Flag logic and the
      Sensor input process logic.  (See Specific Sensor FMEMs.)


      DEFINITIONS

      INPUTS

      Bit Flags:

       -  CRKFLG = Flag indicating Crank mode.

      Calibration Contants:

       -  FILHYS = Hysteresis term  to  permit  normal  TP  update,  if  sensor  is
          functioning properly.
































                                         27-3

                 FAILURE MODE MANAGEMENT, FAILURE RECOGNITION - GSAJ0
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS

                          STRATEGY MODULE: INPUT_FAIL_REC_COM1


      SENSOR >= SENSORMIN -----------|     | SENSOR WITHIN
       (sensor OK)                   |     |  ACCEPTABLE RANGE
      C***FIL < C***LVL - FILHYS ----|     |  UPDATE SENSOR INPUT
       (sensor high fault            |AND -|
        filter OK)                   |     | Failure Flags = 0
      SENSOR <= SENSORMAX -----------|     |
       (sensor OK)                   |     |
      C***FIL < C***LVL - FILHYS ----|     | --- ELSE ---
       (sensor low fault filter OK)        |
                                           | SENSOR OUTSIDE
      CRANK MODE (CRKFLG = 1) -------------|  RANGE
       (Optional)                          | SENSOR = INITIAL VALUE
                                           |
                                           | --- ELSE ---
                                           |
      C***FIL > C***LVL -------------|     | SENSOR OUTSIDE
       (sensor high fault)           |OR --|  RANGE - NOT DUE TO
      C***FIL > C***LVL -------------|     |  LOW BATTERY VOLTAGE
       (sensor low fault)                  | Failure Flags = 1
                                           |
                                           |  ALTERNATE STRATEGY
                                           | SENSOR = SUBSTITUTED
                                           |   VALUE
                                           |
                                           | --- ELSE ---
                                           |
                                           | SENSOR DATA NOT
                                           |  RELIABLE - DO NOT
                                           |  UPDATE UNTIL CHECK
                                           |  PROVES VALUE VALID.


      NOTE:  MAP Failure Mode Recognition is described in the MAP
             calculation (See INPUT CONVERSIONS AND FILTERS Chapter).



      Should this strategy be implemented in the Continuous Self Test Strategy, the
      following specifications must be met:

       -  FMEM Code must be executed following the A/D conversion.

       -  FMEM Code must be executed, once per background loop, during  ALL  Engine
          Modes (CRANK, UNDERSPEED, RUN, KEYON).

       -  Continuous Self Test Check provides two functions:  It does Normal  Fault
          Filtering  for  ALL  sensors checked by the continuous Self Test; and, it
          also executes the FMEM_FLAG logic.







                                         27-4

   INPUT AND FAILURE MODE AND SELF TEST, ACP SWITCH INPUT SIGNAL PROCESSING - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                    AC PRESSURE (ACP) SWITCH INPUT SIGNAL PROCESSING


      OVERVIEW

      This module is for processing the AC Pressure Switch input.  It  contains  an
      inversion  as  the input is normally high and is pulled low when the Pressure
      Switch is tripped.  It contains a check on ACPSW_HP to ensure that the  input
      should  be  read  as  acpsw  and  not something else.  Note that in the logic
      below, "acpsw" refers to the CPU Pin designated to be the AC Pressure  Switch
      input.



      DEFINITIONS

      INPUTS

      Calibration Constants:

       -  ACPSW_HP = AC Pressure Switch Hardware Present.



      OUTPUTS

      Registers:

       -  ACPSW = AC Pressure Switch Input; 1 -> AC Pressure High.




      PROCESS
                            STRATEGY MODULE: INPUT_ACPSW_COM1


      ACPSW_HP = 1 --------------------|
                                       |AND -| ACPSW = 1
      acpsw = 0 -----------------------|     |
                                             | --- ELSE ---
                                             |
                                             | ACPSW = 0

















                                         27-5

                  FAILURE MODE MANAGEMENT, ACT SENSOR UPDATE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    ACT SENSOR UPDATE


      OVERVIEW

      If the ACT Sensor fails, the FMEM Strategy will use the initial value for ACT
      (by preventing an Update) until the failure is recognized as bona fide.


      DEFINITIONS

      INPUTS

      Registers:

       -  C112FIL = Self  Test  Register  which  counts  the  number  of  ACT  high
          failures.

       -  C113FIL = Self Test Register which counts the number of ACT low failures.

       -  TCSTRT = Engine Coolant Temperature at start, deg F.

       -  IACT = A/D conversion of ACT sensor input, counts.

      Bit Flags:

       -  AFMFLG = Flag indicating that ACT sensor has failed.

       -  WRMEGO = Ego sensor should be warm flag; 1 -> Ego warm, 0 -> Ego is

      Calibration Constants:

       -  ACTFMM = FMEM default value for ACT.

       -  ACTMAX = Maximum ACT (ACT Open), Counts.

       -  ACTMIN = Minimum ACT (ACT Shorted), Counts.

       -  C112LVL = Threshold for ACT short fault, unitless.

       -  C113LVL = Threshold for ACT Open fault, unitless.

       -  FILHYS = Hysteresis  term  to  prevent  spurious  exit  of  Failure  Mode
          strategy.

       -  FN703A = ECT/ACT transfer function.

       -  NUMEGO =  Calibration  switch  which  indicates  number  of  EGO  sensors
          present, mono or stereo.











                                         27-6

                  FAILURE MODE MANAGEMENT, ACT SENSOR UPDATE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  ACT = Air Charge Temperature, deg F.

      Bit Flags:

       -  AFMFLG = Flag indicating that ACT sensor has failed.



      PROCESS
                             STRATEGY MODULE: INPUT_ACT_COM1


      This module is performed during  engineering  units  conversion.   Substitute
      TCSTRT  (ECT  at  strat)  for  ACT  as  best estimate of air temperature till
      vehicle warms up.  At that time use ACTFMM.


      AFMFLG = 0  --------------------|
                                      |
      IACT <= ACTMAX -----------------|AND -| ACT = FN703A(IACT)
                                      |     |
      IACT >= ACTMIN -----------------|     |
                                            | --- ELSE ---
      WRMEGO = 0 ---------------------|     |
       (start up Open Loop)           |     |
                                      |AND -| ACT = TCSTRT 
      NUMEGO <> 0 --------------------|     |
                                            | --- ELSE ---
                                            |
      AFMFLG = 1 ---------------------------| ACT = ACTFMM
                                            |
                                            | --- ELSE ---
                                            |
                                            | Do not update ACT






















                                         27-7

                  FAILURE MODE MANAGEMENT, ACT SENSOR UPDATE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           FAILURE FLAG LOGIC (FOR ACT SENSOR)

                                  CONTINUOUS SELF TEST


      C112FIL > C112LVL --------------------| afmlo = 1
                                            | 
                                            | --- ELSE ---
                                            | 
      C112FIL < C112LVL - FILHYS -----------| afmlo = 0


      C113FIL > C113LVL --------------------| afmhi = 1
                                            | 
                                            | --- ELSE ---
                                            | 
      C113FIL < C113LVL - FILHYS -----------| afmhi = 0


      afmhi = 1 ----------------------|
                                      |OR --| AFMFLG = 1
      afmlo = 1 ----------------------|     | 
                                            | --- ELSE ---
                                            | 
                                            | AFMFLG = 0



































                                         27-8

              FAILURE MODE MANAGEMENT, ADAPTIVE FUEL TABLE FMEM - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                ADAPTIVE FUEL TABLE FMEM


      OVERVIEW

      This module sets and clears two adaptive fuel failure mode  flags;  one  flag
      for each adaptive table in a two EGO control system.



      DEFINITIONS

      INPUTS

      Registers:

       _  C179FIL = At adaptive fuel limit, system lean fault filter.

       _  C181FIL = At adaptive fuel limit, system rich fault filter.

       _  C182FIL = At adaptive fuel limit, system lean at idle fault filter.

       _  C183FIL = At adaptive fuel limit, system rich at idle fault filter.

       _  C188FIL = At adaptive fuel limit (EGO #2), system lean fault filter.

       _  C189FIL = At adaptive fuel limit (EGO #2), system rich fault filter.

       _  C191FIL = At adaptive fuel limit (EGO #2),  system  lean  at  idle  fault
          filter.

       _  C192FIL = At adaptive fuel limit (EGO #2),  system  rich  at  idle  fault
          filter.

      Bit Flags:

       _  NUMEGO = Number of EGO sensors.

      Calibration Constants:

       _  C179LVL = At adaptive fuel limit, system lean fault filter threshold.

       _  C181LVL = At adaptive fuel limit, system rich fault filter threshold.

       _  C182LVL = At adaptive fuel  limit,  system  lean  at  idle  fault  filter
          threshold.

       _  C183LVL = At adaptive fuel  limit,  system  rich  at  idle  fault  filter
          threshold.

       _  C188LVL = At adaptive fuel limit  (EGO  #2),  system  lean  fault  filter
          threshold.

       _  C189LVL = At adaptive fuel limit  (EGO  #2),  system  rich  fault  filter
          threshold.

       _  C191LVL = At adaptive fuel limit (EGO #2),  system  lean  at  idle  fault
          filter threshold.


                                         27-9

              FAILURE MODE MANAGEMENT, ADAPTIVE FUEL TABLE FMEM - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       _  C192LVL = At adaptive fuel limit (EGO #2),  system  rich  at  idle  fault
          filter threshold.

       _  FILHYS = Hysteresis  term  to  prevent  spurious  exit  of  Failure  Mode
          strategy.



      OUTPUTS

      Bit Flags:

       _  ADT1FMFLG = Adaptive table 1 failure mode.

       _  ADT2FMFLG = Adaptive table 2 failure mode.













































                                        27-10

              FAILURE MODE MANAGEMENT, ADAPTIVE FUEL TABLE FMEM - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: INPUT_ADAPT_COM1


      C179FIL > C179LVL ----------------|
       (adapt lean clip, ego 1)         |
                                        |
      C181FIL > C181LVL ----------------|
       (adapt rich clip, ego 1)         |
                                        |OR --| ADT1FMFLG = 1
      C182FIL > C182LVL ----------------|     |
       (adapt lean clip at idle, ego 1) |     |
                                        |     |
      C183FIL > C183LVL ----------------|     |
       (adapt rich clip at idle, ego 1)       |
                                              | --- ELSE ---
      C179FIL < C179LVL - FILHYS -------|     |
                                        |     |
      C181FIL < C181LVL - FILHYS -------|     |
                                        |AND -| ADT1FMFLG = 0
      C182FIL < C182LVL - FILHYS -------|
                                        |
      C183FIL < C183LVL - FILHYS -------|





































                                        27-11

              FAILURE MODE MANAGEMENT, ADAPTIVE FUEL TABLE FMEM - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      For Stereo EGO systems:


      NUMEGO = 2 -----------------------|
                                        |
      C188FIL > C188LVL ----------|     |
       (adapt lean clip, ego 2)   |     |
                                  |     |AND -| ADT2FMFLG = 1
      C189FIL > C189LVL ----------|     |     |
       (adapt rich clip, ego 2)   |     |     |
                                  |OR --|     |
      C191FIL > C191LVL ----------|           |
       (adapt lean clip at idle,  |           |
        ego 2)                    |           |
                                  |           |
      C192FIL > C192LVL ----------|           |
       (adapt rich clip at idle,              |
        ego 2)                                |
                                              | --- ELSE ---
      NUMEGO = 2 -----------------------|     |
                                        |     |
      C188FIL < C188LVL - FILHYS -|     |     |
                                  |     |AND -| ADT2FMFLG = 0
      C189FIL < C189LVL - FILHYS -|     |
                                  |     |
      C191FIL < C191LVL - FILHYS -|AND -|
                                  |
      C192FIL < C192LVL - FILHYS -|
































                                        27-12

          INPUT AND FAILURE MODE AND SELF TEST, AODE INPUT EQUATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  AODE INPUT EQUATIONS


      OVERVIEW

      Once per background loop, the output shaft speed is calculated  if  at  least
      one  new  rising  edge occured since the last calculation.  If the time since
      the last edge becomes large, the shaft speed is set  to  zero.   Zero  output
      shaft speed indicates that the shaft has stopped or the sensor has failed.

      The following parameters are calculated primarily by the output  shaft  speed
      sensor  (OSS):   NOBAR,  VSBARTL, VSBART_RT.  In the event of an OSS failure,
      these parameters will be calculated using the vehicle speed sensor (VSS).



      DEFINITIONS

      INPUTS

      Registers:

       -  NO = Unfiltered output shaft speed.

       -  NOBART = Filtered output shaft speed for transmission use.

       -  RT_NOVS = Ratio of actual N/V to base N/V in KAM.

       -  VS = Unfiltered vehicle speed.

       -  VSBARV = Filtered vehicle speed for Self-Test.

       -  VS_LIM_BAR = Filtered vehicle speed used for vehicle speed limiting.

      Bit Flags:

       -  OSFMFLG = Output shaft speed sensor failure flag.

      Calibration Constants:

       -  NVBASE = Base engine speed divided by vehicle speed.

       -  TCNO = Time constant for output shaft speed filtering.

       -  TCVST = Time constant for filtered vehicle speed.

       -  TSTRAT = Transmission type.













                                        27-13

          INPUT AND FAILURE MODE AND SELF TEST, AODE INPUT EQUATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  NOBAR = Filtered output shaft speed.

       -  NOBART = See above.

       -  VSBARTL = Filtered vehicle speed for transmission use.

       -  VSBART_RT = Filtered vehicle speed adjusted for RT_NOVS for  transmission
          use.

       -  VSBARV = see above.

       -  VS_SMPL_TM = CLOCK time in milliseconds at the time VSBART is calculated.




      PROCESS
                          STRATEGY MODULE: INPUT_AODE_EQNS_COM1

                                VEHICLE SPEED PROCESSING


      Always ----------------------------| VSBARV = ROLAV(VS,TCVST)
                                         | NOBART = ROLAV(NO,TCNO)
                                         | VS_SMPL_TM = current CLOCK time in
                                          milliseconds


      OSFMFLG = 0 -----------------|
       (OSS OK)                    |AND -| NOBAR = NOBART
                                   |     | VSBART_RT = NOBART/NVBASE
      TSTRAT = 7 ------------------|     |  (clip VSBART_RT to 127.5 max.)
       (AODE Transmission)               | VSBARTL = NOBART/(RT_NOVS * NVBASE)
                                         |
                                         | --- ELSE ---
                                         | 
                                         | NOBAR = VS_LIM_BAR * NVBASE * RT_NOVS
                                         | VSBART_RT = VSBARV * RT_NOVS
                                         | VSBARTL = ROLAV(VS,TCVST)

















                                        27-14

                  FAILURE MODE MANAGEMENT, ECT SENSOR UPDATE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    ECT SENSOR UPDATE


      OVERVIEW

      If the ECT Sensor fails, the FMEM strategy will substitute TOT or ACT  during
      CRANK  if  an  automatic transmission is available, for ENGINE RUNNING Mode a
      default value will be used.  The Normal engine strategy will not recognize  a
      need for Cold Weather Fuel compensation.



      DEFINITIONS

      INPUTS

      Registers:

       -  ACT = Air charge temperature.

       -  C117FIL = Self  Test  Register  which  counts  the  number  of  ECT  high
          failures.

       -  C118FIL = Self Test Register which counts the number of ECT low failures.

       -  CRK_ECT_CTR = Crank ECT process counter for selecting CRK_PIP_INJ.

       -  ECT = Engine Coolant Temperature, deg F.

       -  ECT_INST = Instantaneous ECT (no rolling average).

       -  FMECTR = Background loop counter used to ramp  failed  ECT  from  TOT  in
          crank mode to ECTFMM.

       -  TOT = Transmission Oil Temperature, deg F.

       -  TSLPIP = Time since last PIP.

      Bit Flags:

       -  CFMFLG = Flag indicating that ECT sensor is in/out of range.

       -  CRKFLG = Crank flag.

       -  CRK_PIP_INT = CRK_PIP_INJ initialization indicator; 1 ->  CRK_PIP_INJ  is
          initialized.

       -  FLG_FRST_ECT = First pass ECT reading flag; 0 -> First pass for  ECT  A/D
          reading.

       -  IACT = A/D conversion of ACT sensor, counts.

       -  IECT = A/D conversion of ECT sensor, counts.

       -  ITOT = A/D conversion of TOT sensor, counts.





                                        27-15

                  FAILURE MODE MANAGEMENT, ECT SENSOR UPDATE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  C117LVL = Threshold for ECT Short Fault, unitless.

       -  C118LVL = Threshold for ECT Open fault, unitless.

       -  CRK_PIP_ECT  =  ECT  break  point  which  selects  between  the   default
          CRK_PIP_INJ (1), and CRK_PIP_CAL.

       -  CRK_PIP_CAL = Number of PIP periods per injector firing for higher ECTs.

       -  ECTFMM = FMEM default value for ECT, deg F.

       -  ECTMAX = Maximum engine ECT, Counts.

       -  ECTMIN = Minimum engine ECT, Counts.

       -  FILHYS = Hysteresis  term  to  prevent  spurious  exit  of  Failure  Mode
          strategy.

       -  FMECNT = Number of background loops between incrementing/decrementing ECT
          register  by  2  deg.F.   A  good  estimate  of The ECT ramp is 2 deg.F/6
          seconds, therefore, FMECNT = 6 sec./.030 sec.  per background loop = 200.

       -  FN703A = ECT/ACT transfer function.

       -  FN703DB = Byte size TOT transfer function.

       -  TCECT = Time constant for ECT, sec.



      OUTPUTS

      Registers:

       -  ECT = Engine Coolant Temperature, deg F.

       -  ECT_INST = See above.

       -  CRK_ECT_CTR = See above.

       -  CRK_PIP_INJ = Number of PIP periods per injector firing.

       -  FMECTR = Background loop counter used to ramp  failed  ECT  from  TOT  in
          crank mode to ECTFMM.

      Bit Flags:

       -  CFMFLG = Flag indicating that ECT sensor is in/out of range.

       -  CRK_PIP_INT = See above.

       -  FLG_FRST_ECT = First pass ECT reading flag; 0 -> First pass for  ECT  A/D
          reading.





                                        27-16

                  FAILURE MODE MANAGEMENT, ECT SENSOR UPDATE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: INPUT_ECT_COM1


      This module is performed during engineering units conversion.


      CFMFLG = 0 --------------------|
                                     |
      IECT <= ECTMAX ----------------|
                                     |AND -| ECT_INST = FN703A(IECT)
      IECT >= ECTMIN ----------------|     | ECT = ECT_INST
                                     |     | FLG_FRST_ECT = 1
      FLG_FRST_ECT = 0 --------------|     | 
                                           | --- ELSE ---
      CFMFLG = 0 --------------------|     |
                                     |     |
      IECT <= ECTMAX ----------------|AND -| ECT_INST = FN703A(IECT)
                                     |     | ECT = ROLAV(ECT_INST,TCECT)
      IECT >= ECTMIN ----------------|     |  (ECT sensor ok)
                                           |
                                           | --- ELSE ---
      TSTRAT >= 4 -------------------|     |
       (TOT availible)               |     |
                                     |     | ECT_INST = FN703DB(ITOT)
      CRKFLG = 1 --------------------|AND -| ECT = TOT
                                     |     | FLG_FRST_ECT = 1
      FLG_FRST_ECT = 0 --------------|     |  (infer ECT from TOT)
                                           |
                                           | --- ELSE ---
                                           |
      CRKFLG = 1 ---------------------|    | ECT_INST = FN703DB(ITOT)
                                      |AND-| ECT = ROLAV(TOT,TCECT)
      TSTRAT >= 4 --------------------|    |  (sensor bad, infer ECT from TOT)
       (TOT availible)                     |
                                           |
                                           | --- ELSE ---
                                           |
      CRKFLG = 1 --------------------|     |
                                     |AND -| ECT_INST = FN703A(IACT)
      FLG_FRST_ECT = 0 --------------|     | ECT = ACT
                                           | FLG_FRST_ECT = 1
                                           |  (infer ECT from ACT)
                                           |
                                           | --- ELSE ---
                                           |
      CRKFLG = 1 --------------------------| ECT_INST = FN703A(IACT)
       (Crank mode)                        | ECT = ROLAV(ACT,TCECT)
                                           |  (sensor bad, infer ECT from ACT)
                                           |
                                           | --- ELSE ---
                                           |
      CFMFLG = 1 --------------------------| Increment FMECTR
       (every background loop)             |  (clip at 255 as a max.)
                                           | Perform ECT RAMP LOGIC
                                           |
                                           | --- ELSE ---
                                           | 
                                           | Do not update ECT

                                        27-17

                  FAILURE MODE MANAGEMENT, ECT SENSOR UPDATE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                     ECT RAMP LOGIC


      ECT > ECTFMM ------------------|            
                                     |AND -| ECT = ECT - 2 deg. F
      FMECTR >= FMECNT --------------|     | FMECTR = 0
                                           |  (ramp down to ECTFMM)
                                           |
                                           | --- ELSE ---
      ECT < ECTFMM ------------------|     |
                                     |AND -| ECT = ECT + 2 deg. F
      FMECTR >= FMECNT --------------|     | FMECTR = 0 
                                           |  (ramp up to ECTFMM)
                                           |
                                           | --- ELSE ---
                                           |
      ECT = ECTFMM ------------------------| Do not update ECT
                                           |  (ECT is already ECTFMM)



                         FAILURE FLAG LOGIC (FOR ECT SENSOR)

                                 CONTINUOUS SELF TEST


      C117FIL > C117LVL -------------------| cfmlo = 1
                                           | 
                                           | --- ELSE ---
                                           | 
      C117FIL < C117LVL - FILHYS ----------| cfmlo = 0


      C118FIL > C118LVL -------------------| cfmhi = 1
                                           | 
                                           | --- ELSE ---
                                           | 
      C118FIL < C118LVL - FILHYS ----------| cfmhi = 0


      cfmhi = 1 ---------------------|
                                     |OR --| CFMFLG = 1
      cfmlo = 1 ---------------------|     | 
                                           | --- ELSE ---
                                           | 
                                           | CFMFLG = 0














                                        27-18

                  FAILURE MODE MANAGEMENT, ECT SENSOR UPDATE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               CRK_PIP_INJ SELECTOR LOGIC


      TSLPIP > 0.8 sec. -------------------| CRK_PIP_INT = 0
                                           | CRK_ECT_CTR = 0


      CRK_PIP_INT = 1 ---------------------| EXIT INPUT_ECT_COM1
                                           |
                                           | --- ELSE ---
                                           |
      ECT_INST > CRK_PIP_ECT --------------| CRK_ECT_CTR = CRK_ECT_CTR + 1
                                           |
                                           | --- ELSE ---
                                           |
                                           | CRK_ECT_CTR = CRK_ECT_CTR - 1


      CRK_ECT_CTR >= 3 --------------------| CRK_PIP_INT = 1
                                           | CRK_PIP_INJ = CRK_PIP_CAL








































                                        27-19

                   FAILURE MODE MANAGEMENT, EVP SENSOR FMEM - GSAL0
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               EVP SENSOR FMEM (PFEHP = 0)


      OVERVIEW

      The EVP sensor failure Mode strategy will force the EGR valve  to  close  and
      will have no adverse impact on Spark or Fuel.


      DEFINITIONS

      INPUTS

      Registers:

       _  C327FIL = Self Test Register which counts the number of EVP low failures.

       _  C337FIL = Self  Test  Register  which  counts  the  number  of  EVP  high
          failures.

       _  EOFF = The EGR valve reading when  the  valve  is  fully  closed  in  A/D
          counts.

       _  IEGR = A/D conversion of EVP or EPT sensor, counts.

      Bit Flags:

       _  EFMFLG = Flag indicating that EVP EGR  sensor  has  failed.   (This  flag
          performs for both Sonic and PFE EGR.)

       _  EFMLO = EGRLO FMEM flag.

       _  EFMHI = EGRHI FMEM flag.

      Calibration Constants:

       _  C327LVL = Threshold for EVP fault, unitless.

       _  C337LVL = Threshold for (PFE) EVP fault, unitless.

       _  EVPMAX = Maximum EGR Valve position, counts.

       _  EVPMIN = Minimum EGR Valve position, counts.

       _  FILHYS = Hysteresis  term  to  prevent  spurious  exit  of  Failure  Mode
          strategy.



      OUTPUTS

      Registers:

       _  EVP = EGR valve position reading in A/D counts.






                                        27-20

                   FAILURE MODE MANAGEMENT, EVP SENSOR FMEM - GSAL0
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Bit Flags:

       _  EFMFLG = See above.

       _  EFMLO = See above.

       _  EFMHI = See above.



      PROCESS

                             STRATEGY MODULE: INPUT_EVP_COM1

      This module is performed during engineering units conversion.


      EFMFLG = 0 ---------------|
                                |
      IEGR <= EVPMAX -----------|AND -| EVP = IEGR
                                |     |
      IEGR >= EVPMIN -----------|     | --- ELSE ---
                                      |
      EFMFLG = 1 ---------------------| EVP = EOFF
                                      |
                                      | --- ELSE ---
                                      |
                                      | Do NOT update EVP


                           FAILURE FLAG LOGIC (FOR EVP SENSOR)

                                  CONTINUOUS SELF TEST

      EFMLO = 1 ----------------------------|      
       (fault 327)                          |OR --| EFMFLG = 1 
                                            |     |
      EFMHI = 1 ----------------------------|     |
       (fault 337)                                | --- ELSE ---
                                                  |
                                                  | EFMFLG = 0


      Performed each continuous self test filter call:

      C327FIL > C327LVL --------------------------| EFMLO = 1
                                                  | 
                                                  | --- ELSE ---
                                                  | 
      C327FIL < C327LVL - FILHYS -----------------| EFMLO = 0


      Performed each continuous self test filter call:

      C337FIL > C337LVL --------------------------| EFMHI = 1
                                                  | 
                                                  | --- ELSE ---
                                                  | 
      C337FIL < C337LVL - FILHYS -----------------| EFMHI = 0

                                        27-21

              FAILURE MODE MANAGEMENT, MASS AIR FLOW SENSOR FMEM - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                MASS AIR FLOW SENSOR FMEM


      DEFINITIONS

      INPUTS

      Registers:

       -  C184FIL = MAF high in-range filter (Code 184).

       -  C185FIL = MAF low in-range filter (Code 185).

       -  C157FIL = Error 157 counter in continuous VIP.

       -  C158FIL = Error 158 counter in continuous VIP.

       -  IMAF = MAF sensor.

       -  IMFMCTR = Provides hysteresis for IMFMFLG, background loop counter,
          counts.

       -  TOTLDST = Total inferred load.

       -  TP_REL = Relative TP; TP - RATCH, counts.

      Bit Flags:

       -  CRKFLG = Crank Flag.

       -  IMFMFLG = Instantaneous mass air flow sensor FMEM flag.

       -  MFMFLG = Flag indicating that MAF sensor has failed.

      Calibration Constants:

       -  C184LVL = MAF low in-range threshold (Code 184).

       -  C185LVL = MAF low in-range threshold (Code 185).

       -  C157LVL = Threshold level for fault 157.

       -  C158LVL = Threshold level for fault 158.

       -  FILHYS = Hysteresis term to prevent spurious exit of Failure Mode
          strategy.

       -  MFMHYS = Calibration for IMFMFLG background loop hysteresis, counts.

       -  VMAMAX = Maximum MAF sensor reading, counts.

       -  VMAMIN = Minimum MAF sensor reading, counts.

       -  VMARPM = Maximum RPM for checking MAF sensor high limit.






                                        27-22

              FAILURE MODE MANAGEMENT, MASS AIR FLOW SENSOR FMEM - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  IMFMCTR = See above.

      Bit Flags:

       -  IMFMFLG = See above.

       -  MFMFLG = See above.

       -  V_MAF_ER_FLG = Flag indicating in-range failure of Mass Air Flow Sensor.















































                                        27-23

              FAILURE MODE MANAGEMENT, MASS AIR FLOW SENSOR FMEM - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: INPUT_MAF_COM1


      The module is performed  during  MAF  sensor  engineering  units  conversion.
      Check for sensor within limits.


      MFMFLG = 0 -----------------------|      
                                        |
      N >= VMARPM ----------------|     |
                                  |OR --|AND --| MAF Sensor output
      IMAF <= VMAMAX -------------|     |      |  within limits
                                        |      |   
      IMAF >= VMAMIN -------------------|      | --- ELSE ---
                                               |
                                               | IMFMFLG = 1
                                               | IMFMCTR = MFMHYS



                                IMFMFLG AND IMFMCTR LOGIC


      CRKFLG = 1 ------------------------------| IMFMFLG = 0
       (sensor test disabled in crank mode)    | IMFMCTR = 0
                                               |
                                               | --- ELSE ---
                                               |
      IMFMCTR = 0 -----------------------------| IMFMFLG = 0
                                               |
                                               | --- ELSE ---
                                               |
                                               | Decrement IMFMCTR
                                               |  (clip to zero)


      NOTE:  This logic provides a calibratible delay after the sensor  returns  in
      range, equal to MFMHYS - 1 background loops, before exiting FMEM.





















                                        27-24

              FAILURE MODE MANAGEMENT, MASS AIR FLOW SENSOR FMEM - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       FAILURE FLAG LOGIC FOR MASS AIR FLOW SENSOR


      This module is performed during continuous self test routines.


      C158FIL > C158LVL -----------------------| mfmlo = 1
                                               |
                                               | --- ELSE ---
                                               |
      C158FIL < C158LVL - FILHYS --------------| mfmlo = 0


      C157FIL > C157LVL -----------------------| mfmhi = 1
                                               |
                                               | --- ELSE ---
                                               |
      C157FIL < C157LVL - FILHYS --------------| mfmhi = 0


      mfmhi = 1 -------------------------|
                                         |OR --| MFMFLG = 1
      mfmlo = 1 -------------------------|     |
                                               | --- ELSE ---
                                               |
                                               | MFMFLG = 0


      NOTE:  Failure Mode  recognition  using  the  continuous  self  test  filters
      controls   MFMFLG.   The  IMFMFLG  controls  foreground/background  fuel  and
      CYLARC_BG calculations.


      C185FIL >= C185LVL ----------------|
                                         |OR --| V_MAF_ER_FLG = 1
      C184FIL >= C184LVL ----------------|     |  (in range failure)
                                               |
                                               | --- ELSE ---
      C185FIL < C185LVL - FILHYS --------|     |
                                         |AND -| V_MAF_ER_FLG = 0
      C184FIL < C184LVL - FILHYS --------|     |  (sensor OK)



















                                        27-25

                   FAILURE MODE MANAGEMENT, PFE SENSOR FMEM - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               PFE SENSOR FMEM (PFEHP = 1)


      OVERVIEW

      The EPT FMEM Logic checks the A/D value of the EPT sensor and compares it  to
      the permissible range of values (as defined by the Self Test Strategy).

       -  If the value is within the allowed range,  the  strategy  clears  a  flag
          (which permits normal EGR strategy execution).

       -  If the sensor value is outside the allowed range  long  enough  for  Self
          Test  to  recognize  and  flag an error code, the strategy will force the
          valve to close.




      DEFINITIONS

      INPUTS

      Registers:

       _  C327FIL = Self Test Register which counts the number of EVP low failures.

       _  C337FIL = Self  Test  Register  which  counts  the  number  of  EVP  high
          failures.

      Bit Flags:

       _  EFMFLG = Flag indicating that EVP EGR  sensor  has  failed.   (This  flag
          performs for both Sonic and PFE EGR.)

       _  EFMHI = EGRHI FMEM flag.

       _  EFMLO = EGRLO FMEM flag.

      Calibration Constants:

       _  C327LVL = Threshold for EVP fault, unitless.

       _  C337LVL = Threshold for (PFE) EVP fault, unitless.

       _  FILHYS = Hysteresis  term  to  prevent  spurious  exit  of  Failure  Mode
          strategy.














                                        27-26

                   FAILURE MODE MANAGEMENT, PFE SENSOR FMEM - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       _  EPTZER = Rolling average of the EPT sensor at Idle, counts.

      Bit Flags:

       _  EFMFLG = Flag indicating that EVP EGR  sensor  has  failed.   (This  flag
          performs for both Sonic and PFE EGR.)

       _  EFMHI = See above.

       _  EFMLO = See above.














































                                        27-27

                   FAILURE MODE MANAGEMENT, PFE SENSOR FMEM - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS

                             STRATEGY MODULE: INPUT_PFE_COM1


      This module is performed during engineering units conversion.


      EFMFLG = 0 ---------------|
                                |AND -| EPTZER = 650
      Previous EFMFLG = 1 ------|     |  (reinitial EPTZER)



                         FAILURE FLAG LOGIC (FOR PFE EGR SENSOR)

                                  CONTINUOUS SELF TEST

      EFMLO = 1 ----------------|
       (fault 327)              |
                                |OR --| EFMFLG = 1
      EFMHI = 1 ----------------|     |
       (fault 337)                    | --- ELSE ---
                                      |
                                      | EFMFLG = 0


                    Performed each continuous self test filter call:

      C327FIL > C327LVL --------------| EFMLO = 1
                                      |
                                      | --- ELSE ---
                                      |
      C327FIL < C327LVL - FILHYS -----| EFMLO = 0


                    Performed each continuous self test filter call:

      C337FIL > C337LVL --------------| EFMHI = 1
                                      |
                                      | --- ELSE ---
                                      |
      C337FIL < C337LVL - FILHYS -----| EFMHI = 0

















                                        27-28

                   FAILURE MODE MANAGEMENT, TOT SENSOR FMEM - CAAJ0
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                     TOT SENSOR FMEM


      DEFINTIONS

      INPUTS

      Registers:

       _  ECT = Engine Coolant Temperature, deg F.

       _  ECTCNT = ECT counter used in TCSTRT average.

       _  ITOT = Transmission Oil temperature, counts.

      Bit Flags:

      Calibration Constants:

       _  FN703D(ITOT) = TOT transfer function; purpose: convert ITOT A/D counts
          into
          deg. F, counts.

       _  TCTOT = Time constant for filtered TOT, sec.

       _  TOTMAX = Maximum allowable TOT counts, counts.

       _  TOTMIN = Minimum allowable TOT counts, counts.



      OUTPUTS

      Registers:

       _  TOT = Transmission Oil Temperature, deg F.
























                                        27-29

                   FAILURE MODE MANAGEMENT, TOT SENSOR FMEM - CAAJ0
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: INPUT_TOT_COM1


      This module is performed during engineering units conversion.


      ITOT <= TOTMAX -----------|
                                |
      ITOT >= TOTMIN -----------|AND -| TOT = FN703D(ITOT)
                                |     |  (sensor OK, start rolling
      ECTCNT = 0 ---------------|     |   average at actual value)
                                      |
                                      | --- ELSE ---
      ITOT <= TOTMAX -----------|     |
                                |AND -| TOT = ROLAV(FN703D(ITOT),TCTOT)
      ITOT >= TOTMIN -----------|     |  (sensor OK)
                                      |
                                      | --- ELSE ---
                                      |
                                      | TOT = ECT
                                      |  (sensor bad, use ECT)






































                                        27-30

                   FAILURE MODE MANAGEMENT, TP SENSOR FMEM - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                     TP SENSOR FMEM


      OVERVIEW

      This logic is performed  after  A/D  conversions  during  all  engine  modes,
      including  SELF TEST.  The FMEM strategy checks the continuous Self Test Code
      Filters to ascertain whether the TP sensor failed.   If  the  sensor  failure
      lasts  long  enough  to  trigger  a  SELF TEST code, FMEM strategy will infer
      throttle position based upon airflow.  AM has protective logic in  the  event
      of  a  load  sensor  failure.  (See the AM calculation contained in the INPUT
      CONVERSIONS AND FILTERS Chapter).

      The TP sensor Update logic substitutes a function  of  AM  for  a  failed  TP
      sensor.   This  action  permits  recognition  of  the  various throttle modes
      (Closed, Part, or WOT).  However, AE fuel will be disabled due to lack of TAR
      signal.

      The load parameters have protective logic in event of  load  sensor  failure.
      (See the BP calculation in the EEC OVERVIEW Chapter.)



      DEFINITIONS

      INPUTS

      Registers:

       _  AM = Air Mass Flow, lbm/min.

       _  C121FIL = TP out of range filter (Code 121).

       _  C122FIL = Self Test Register which counts the number of TP-Low  failures.
          It  increments by C122UP each time a failure occurs and decrements by one
          each time the sensor data is valid.

       _  C123FIL = Self Test Register which counts the number of TP-High failures.
          It  increments by C123UP each time a failure occurs and decrements by one
          count each time the sensor data is valid.

       _  C124FIL = TP higher than expected (in-range) (Code 124).

       _  C125FIL = TP lower than expected (in-range) (Code 125).

       _  RATCH = Closed throttle position, counts.

      Bit Flags:

       _  CRKFLG = Crank Flag.

       _  ITP = Throttle position value from A/D conversion, counts.

       _  TFMFLG = Flag indicating that TP sensor has failed.






                                        27-31

                   FAILURE MODE MANAGEMENT, TP SENSOR FMEM - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       _  C121LVL = TP out of range threshold (Code 121).

       _  C122LVL = Threshold level for recognize of TP-Low failure.  When  C122FIL
          equals  (or  exceeds)  the Self Test strategy will set an error code 122.
          NOTE:  The value of C122LVL must be equal to 254.

       _  C123LVL = Threshold level  for  recognition  of  TP-High  Failure.   When
          C123FIL  equals  (or exceeds) C123LVL, the Self Test strategy will set an
          error code 123.  NOTE:  The value of C123LVL must be equal to 254.

       _  C124LVL = Threshold for TP higher than expected.

       _  C125LVL = Threshold for TP lower than expected.

       _  FILHYS = Hysteresis  term  to  prevent  spurious  exit  of  Failure  Mode
          strategy.

       _  FN096 = TP counts above ratch; used for TP FMEM value.

       _  IDLMAF = Maximum AM at Idle, lb/min.

       _  RATIV = Inititializing value for RATCH, typically 250 counts.

       _  TAPMAX = Maximum valid TP value, counts.  (Calibrated by Self Test Design
          Section)

       _  TAPMIN = Minimum valid TP value, counts.  (Calibrated by Self Test Design
          Section)



      OUTPUTS

      Registers:

       _  RATCH = Closed throttle position, counts.

       _  TP = Throttle position, counts.

      Bit Flags:

       _  TFMFLG = Flag indicating that TP sensor has failed.

       _  V_TP_ER_FLG = Flag indicating  in-range  failure  of  TP  sensor/throttle
          body.













                                        27-32

                   FAILURE MODE MANAGEMENT, TP SENSOR FMEM - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: INPUT_TP_COM1


      This module is performed during engineering units conversion.


      TFMFLG = 0 ------------------|
                                   |
      ITP >= TAPMIN ---------------|AND -| TP = ITP
                                   |     |  (TP sensor within
      ITP <= TAPMAX ---------------|     |   acceptable range)
                                         |
                                         | --- ELSE ---
      CRKFLG = 1 ------------------|     | 
       (crank mode)                |OR --| TP = RATCH
                                   |     |  (TP sensor out of limits)
      AM < IDLMAF -----------------|     |
                                         | --- ELSE ---
                                         |
      TFMFLG = 1 ------------------------| TP = RATCH + FN096(AM)
                                         | RATCH = RATIV
                                         |  (TP sensor out of limits
                                         |   but NOT due to Low
                                         |   battery voltage)
                                         |
                                         | --- ELSE ---
                                         |
                                         | No change to TP
                                         |  (TP sensor data unreliable
                                         |   DO NOT update until
                                         |   confident data valid)




























                                        27-33

                   FAILURE MODE MANAGEMENT, TP SENSOR FMEM - CBAZA
                    PEDD-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           FAILURE FLAG LOGIC (FOR TP SENSOR)

                               CONTINUOUS SELF TEST CHECK


      C122FIL > C122LVL -----------------| tfmlo = 1
                                         |
                                         | --- ELSE ---
                                         |
      C122FIL < C122LVL - FILHYS --------| tfmlo = 0


      C123FIL > C123LVL -----------------| tfmhi = 1
                                         |
                                         | --- ELSE ---
                                         |
      C123FIL < C123LVL - FILHYS --------| tfmhi = 0


      tfmhi = 1 -------------------|
                                   |OR --| TFMFLG = 1
      tfmlo = 1 -------------------|     |
                                         | --- ELSE ---
                                         |
                                         | TFMFLG = 0


      C121FIL > C121LVL -----------|
                                   |
      C124FIL > C124LVL -----------|OR --| V_TP_ER_FLG = 1
                                   |     |  (in-range failure)
      C125FIL > C125LVL -----------|     |
                                         | --- ELSE ---
      C124FIL < C124LVL - FILHYS --|     |
                                   |     |
      C121FIL < C121LVL - FILHYS --|AND -| V_TP_ER_FLG = 0
                                   |
      C125FIL < C125LVL - FILHYS --|






















                                        27-34












                                      CHAPTER 28

                                  KEEP ALIVE MEMORY

















































                                         28-1

                              KEEP ALIVE MEMORY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       KEEP ALIVE MEMORY (KAM) QUALIFICATION TEST


      OVERVIEW

      Each time the vehicle is started, the data stored in KAM may  not  be  valid.
      Power  interruptions,  noise,  etc.,  may have altered KAM contents.  Or, the
      computer may not be reading KAM registers correctly  because  of  a  hardware
      fault.   When  the  KAM registers are intialized, a special binary pattern is
      written into three bytes of KAM.  The KAM register names  are  KAMQA,  KAMQB,
      and  KAMQC.   During each background loop, the KAM registers are tested.  The
      KAM qualification test judges the validity of the KAM data by looking for the
      proper binary pattern.  The alternate courses of action are either:

          1) If the proper pattern is present, the KAM data is  considered  OK  for
          use by the strategy.

          2) If not present, the KAM data is suspect.  The KAM is over-written to a
          set  of  initial values.  The inital values are also used in place of the
          KAM data when the strategy references KAM.


      The KAM registers KAMQA, KAMQB, and KAMQC are assigned to different areas  of
      the  KAM.   This will help protect for partial KAM failures.  The assignments
      are:


      KAM                         KAM
      Register                    Address
      ---------                   -------
      KAMQA                       LOWEST ADDRESS OF KAM
      KAMQB                       MIDDLE ADDRESS OF KAM
      KAMQC                       HIGHEST ADDRESS OF KAM


      The KAM qualification test is normally performed each  background  loop  when
      the computer is running.























                                         28-2

                              KEEP ALIVE MEMORY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS


      INPUTS

      Registers:

       -  EPTZER = Rolling average of the EPT sensor at Idle, counts.

       -  GR_CM = Commanded gear for shift solenoids.

       -  GR_CM_KAM = KAM equivalent of GR_CM for reinit protection.

       -  ISCKAM1 = Idle Speed KAM IPSIBR cell 1.

       -  ISCKAM2 = Idle Speed KAM IPSIBR cell 2.

       -  ISCKAM3 = Idle Speed KAM IPSIBR cell 3.

       -  ISKSUM = Idle Adaptive airflow check sum.

       -  KAMQA = KAM Qualification test register 1.

       -  KAMQB = KAM Qualification test register 2.

       -  KAMQC = KAM Qualification test register 3.

       -  RT_NOVS_KAM = NOV ratio in KAM.

       -  V_MODE_SETUP = VIP Throttle Adjust Mode enable flag; 1 -> enabled.

      Calibration Constants:

       -  BAPFMM = Default value for BP failure.

       -  BPMAX = Maximum allowable IBAP value, " Hg.

       -  BPMIN = Minimum allowable IBAP value, " Hg.

       -  GRCMKIV = KAM initialization value for GR_CM.

       -  RTNVMN = Minimum valid RT_NOVS_KAM.

       -  RTNVMX = Maximum value for RT_NOVS_KAM.

       -  VEPTHL = Self Test lower Idle limit  (defined  in  Self  Test  Strategy).
          (Upper limit for KEYON EPTZER)

       -  VEPTLL = Self Test upper Idle limit  (defined  in  Self  Test  Strategy).
          (Lower limit for KEYON EPTZER.)










                                         28-3

                              KEEP ALIVE MEMORY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  BP = Barometric pressure stored in KAM, " Hg.

       -  EPTZER = See above.

       -  ISCKAM0 = Idle Speed KAM IPSIBR cell 0.

       -  ISCKAM1 = See above.

       -  ISCKAM2 = See above.

       -  ISCKAM3 = See above.

       -  ISCKAM4 = Idle Speed KAM IPSIBR cell 4.

       -  ISCKAM5 = Idle Speed KAM IPSIBR cell 5.

       -  ISKSUM = See above.

       -  KAMQA (B,C) = See above.

       -  KWUCTR = KAM warm_up counter.  Stores number of warm_ups in  KAM.   Reset
          to zero if KAM is corrupted.  (battery disconnect, etc.)

       -  LEGOFG1 = Lack of ego switch (EGO-1) flag.

       -  LEGOFG2 = Lack of ego switch (EGO-2) flag.

       -  NOVCTR = NOV calculation sampling counter.

       -  RT_NOVS_KAM = See above.

      Bit Flags:

       -  FLG_FRST_NOV = First pass to store NOV in KAM flag:  0 -> RT_NOVS_KAM has
          not been loaded; 1 -> RT_NOVS_KAM has been loaded.

       -  FLG_NOV_KAM = Flag indicating at least one update  of  RT_NOVS_KAM  since
          last KAM update.

       -  VIP_KAM = Indicates KAM invalid for VIP.
















                                         28-4

                              KEEP ALIVE MEMORY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              KAM QUALIFICATION TEST LOGIC
                                 STRATEGY MODULE: KAM_GA



      Performed each background loop.



      KAMQA = 10101010 BINARY---|
                                |
      KAMQB = 11000110 BINARY---|AND ------| KAMOK = 1
                                |          | ASSUME KAM DATA IS VALID
      KAMQC = 01110101 BINARY---|          | ALL STRATEGY REFERENCES TO
                                |          | KAM WILL USE KAM DATA.
      RT_NOVS_KAM >= RTNVMN ----|          |
                                |          |
      RT_NOVS_KAM <= RTNVMX ----|          | --- ELSE ---
                                           |
                                           | CLEAR KAMOK = 0
                                           | VIPKAM = 1
                                           | ASSUME KAM DATA IS BAD.
                                           | INITIALIZE ALL KAM
                                           | LOCATIONS USED IN THE
                                           | STRATEGY.
                                           | WRITE THE SPECIAL
                                           | BINARY PATTERNS TO KAM:
                                           |  KAMQA = 10101010 BINARY
                                           |  KAMQB = 11000110 BINARY
                                           |  KAMQC = 01110101 BINARY
                                           |
                                           | LTMTB1rc = 0.5
                                           | LTMTB2rc = 0.5
                                           | CHKSUM = 22016
                                           | ISCKAMn = 0.0
                                           | ISKSUM = 0.0
                                           | EPTZER = 650
                                           | BP = BAPFMM
                                           | KWUCTR = 0
                                           | GR_CM_KAM = GRCMKIV
                                           | GR_CM = GRCMKIV
                                           | NOVCTR = 0
                                           | RT_NOVS_KAM = 1.0
                                           | FLG_FRST_NOV = 0
                                           | FLG_NOV_KAM = 0
                                           | LEGOFG1 = 0
                                           | LEGOFG2 = 0













                                         28-5

                              KEEP ALIVE MEMORY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


              ADAPTIVE FUEL TABLE VALIDATION PROCEDURE (POWER UP SEQUENCE)


      Each time the vehicle is started, the data stored in KAM may or may not be
      valid. Power interruptions, noise, etc., may have altered the KAM contents.
      Alternatively, the computer may not be reading KAM registers correctly
      because of a hardware fault. The KAM qualification test judges the validity
      of the KAM data, and KAM can be initialized as required. Based on the results
      of the KAM qualification test, validate the adaptive fuel table as follows; 



      |(SUM OF ALL ADAPTIVE             | ASSUME THE ADAPTIVE FUEL
        FUEL KAM CELLS)                 | DATA IN KAM IS VALID.
       - CHKSUM| <= 1 ------------------| CHKSUM = SUM OF ADAPTIVE FUEL
                                        | CELLS
                                        |
                                        | --- ELSE ---
                                        |
                                        | ASSUME THE ADAPTIVE FUEL 
                                        | DATA IN KAM IS WRONG.
                                        | DO A TOTAL INITIALIZATION
                                        | OF THE ADAPTIVE FUEL
                                        | DATA IN KAM.
                                        | FOR EACH CELL:
                                        | 1) SET LTMTB1rc = 0.5
                                        |    SET LTMTB2rc = 0.5
                                        | 2) SET CHKSUM = 22016
                                        | KWUCTR = 0
                                        



      CHKSUM is a KAM memory word containing  the  sum  of  the  LTMTB1  or  LTMTB2
      contents.   CHKSUM  is  incremented  or  decremented  each time any LTMTB1 or
      LTMTB2 cell is updated.  A one count difference between the present  sum  and
      the  stored  sum is allowed to account for the case of power down after a KAM
      update but prior to CHKSUM update.






















                                         28-6

                              KEEP ALIVE MEMORY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  ISCKAM QUALIFICATION

                             (Done during Power-up sequence)


      |ISCKAM0 + ISCKAM1 + ISCKAM2         
        + ISCKAM3 - ISKSUM| <= 1 Bit ------| Assume the ISCKAMs are valid
                                           | NO ACTION TAKEN
                                           | ISKSUM = ISCKAM0 + ISCKAM1
                                           |  + ISCKAM2 + ISCKAM3
                                           |
                                           | --- ELSE ---
                                           |
                                           | Assume ISCKAMs Data are
                                           |  invalid.
                                           | Re-Initialize the ISCKAM
                                           |  ISCKAM0 = 0
                                           |  ISCKAM1 = 0
                                           |  ISCKAM2 = 0
                                           |  ISCKAM3 = 0
                                           |  ISKSUM = 0







































                                         28-7

                              KEEP ALIVE MEMORY - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               KAM QUALIFICATION (EPTZER)


      During Power-up sequence, check the range of EPTZER.


      EPTZER > VEPTLL --------|      | EPTZER is OK
                              |AND --|
      EPTZER < VEPTHL --------|      | --- ELSE ---
                                     |
                                     | EPTZER is NOT OK
                                     | EPTZER = 650


                                  VIP THROTTLE MODE SET

                    (Done each background loop while in running VIP)

      V_MODE_SETUP = 1 ----------------------| Re-Initialize the ISCKAM 
       (VIP Throttle Adjust Mode)            | ISCKAM0 = 0 
                                             | ISCKAM1 = 0 
                                             | ISCKAM2 = 0 
                                             | ISCKAM3 = 0 
                                             | ISKSUM = 0


      During power-up sequence, check the range of BP.

      BP <= BPMAX ------------|
                              |AND --| BP is OK
      BP >= BPMIN ------------|      |
                                     | --- ELSE ---
                                     |
                                     | BP = BAPFMM


























                                         28-8












                                      CHAPTER 29

                                   EEC-IV SELF TEST

















































                                         29-1

               ENGINE OFF SELF TEST, EEC-IV SELF TEST OVERVIEW - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                EEC-IV SELF TEST OVERVIEW


      Self Test is divided into two types of testing, one which occurs only at  the
      "request"  of  the  service technician (the "on-demand" tests), and one which
      continuously  surveys  the  system  during  normal   operating   modes   (the
      "continuous"   tests).    The  on-demand  portion  is  further  divided  into
      "engine-running" and "engine-off" tests.

      The engine-off portion of the  test  "looks"  for  normal  engine-off  sensor
      readings.   Any  out-of-limits, open, or shorted sensor input is signalled by
      sending a service code.  If all sensors are within expected ranges,  a  "111"
      code  is  issued.  Codes are repeated to make it easier for the technician to
      verify the code sequence.  After the service codes, a single pulse occurs  to
      signal  the technician that the next set of codes will be from the continuous
      test.  Continuous test codes are issued using the same format as the  service
      codes,  and  are  also  repeated.  Finally, the test enters the "output state
      test", which simply turns actuator outputs "on" and "off" based on "requests"
      from  the technician (these consist of depressing the throttle and letting it
      return to closed position).  STO is also turned "on" and "off" in this  mode,
      so that the technician knows the state in which the other outputs should be.

      The  engine-running  portion  signals  that  it  has  begun  by  sending   an
      "identification"  code  (=no.   of  cylinders/2).   It  then tests inputs and
      EEC-IV-controlled functions by forcing various conditions and  "looking"  for
      expected  engine  response  to them.  A single output pulse is sent to signal
      the test operator to "goose" the throttle, during which inputs are tested for
      dynamic  response.   If  no RPM change is detected, a special code (code 538)
      will be sent to indicate that the test was incorrectly performed.   When  the
      "goose" test has completed, service codes are sent.

      The "continuous" self test  monitors  inputs  during  normal  operation,  and
      stores  information  in keep-alive memory (KAM) when errors are detected.  In
      general, checks are made only for open-or short-circuits.  When the number of
      errors  in a given time period exceeds a calibratable threshold, that code is
      stored in KAM.  As a special diagnostic aid, in engine-off conditions and STI
      is  latched  or  when STI=GND and the on-demand (running) test has completed,
      codes will be stored every time an error is detected, and STO will be  turned
      on  as  long  as  the  fault  is  present.   This is designed to help isolate
      intermittent faults (eg.:  the test operator can  "wiggle"  the  harness  and
      connectors, and STO will indicate when the intermittent fault recurs).  Codes
      which indicate faults that have not recurred in 80 engine warm-up cycles  are
      "erased".   Codes can also be manually "erased" by opening up STI while codes
      are being output in the engine-off mode.
















                                         29-2

            ENGINE OFF SELF TEST, EEC-IV SELF TEST BLOCK DIAGRAMS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             EEC-IV SELF TEST BLOCK DIAGRAMS


      PROCESS
                           STRATEGY MODULE: VO_BLOCKDIAG_COM1


               ENGINE-OFF:                      ENGINE-RUNNING:


             !-------------!                   !--------------!
             ! ENGINE-OFF  !                   !  I.D. CODE   !
             !    TEST     !                   !              !
             !-------------!                   !--------------!
                    |                                  |
                    v                                  v
             !-------------!                   !--------------!
             !   SERVICE   !                   !    ENGINE    !
             !    CODE     !                   !   RUNNING    !
             !-------------!                   !     TEST     !
                    |                          !--------------!
                    v                                  v
             !-------------!                   !--------------!
             !   SINGLE    !                   !    SINGLE    !
             !   PULSE     !                   !    PULSE     !
             !-------------!                   !--------------!
                    |                                  |
                    v                                  v 
             !-------------!                   !--------------!
             ! CONTINUOUS  !     REQUIRES      !   DYNAMIC    !
             !    TEST     !     MECHANIC----->!   RESPONSE   !
             !   CODES     !   INTERVENTION    !     TEST     !   
             !-------------!         |         !--------------! 
                    |                |                 |
             !-------------!         |         !--------------!
             !   OUTPUT    !<--------|         !    SERVICE   !
             !   PULSING   !                   !     CODES    !
             !-------------!                   !--------------!
                                                       |
                                                       v
      NOTE:  TEST CODES CAN BE                 !--------------!
             MANUALLY ERASED BY                ! 2 MIN. DELAY !
             UN-GROUNDING STI DURING           !(TIMING CHECK)!
             CODE OUTPUT (ENGINE-OFF).         !--------------!
                                                       |
                                                       v
                                               !--------------!
                                 REQUIRES----->!   "WIGGLE"   !
                                 MECHANIC      !     TEST     !   
                               INTERVENTION    !--------------! 










                                         29-3

            ENGINE OFF SELF TEST, EEC-IV SELF TEST BLOCK DIAGRAMS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              "CONTINUOUS" TESTS (STI=OPEN)


               ENGINE-OFF:                      ENGINE-RUNNING:


             !-------------!                   !---------------!
             !   "WIGGLE"  !                   !  CONTINUOUS   !
             !     TEST    !                   !  TEST MODE    !
             !-------------!                   !---------------!


















































                                         29-4












                                      CHAPTER 30

                              SELF TEST ENTRY/EXIT LOGIC

















































                                         30-1

                    SELF TEST ENTRY/EXIT LOGIC (K.O.E.O.) - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  SELF TEST ENTRY/EXIT LOGIC


      OVERVIEW

      This logic checks for entry and exit conditions for the various  self  test  modes
      described below:


                Engine Off Test
                Engine Off Wiggle Mode
                Engine Running Test
                Engine Running Wiggle Mode
                Continuous Self Test


      Engine Running Test is disabled if an automatic transmission is put into drive  or
      if vehicle speed is above MINMPH.  This is done for safety reasons.


      If STI is ungrounded during the output of codes in Engine Off Test, all continuous
      self  test  codes are erased from KAM.  This allows for repair verification by the
      mechanic.


      DEFINITIONS

      INPUTS

      Registers:

      - VSBAR = Filtered vehicle speed

      Bit Flags:

      - CRANKING = Engine Cranking Flag

      - DISABLE_NOSTART = NST VIP disable flag

      - DISABLE_RUNNING  = RVIP disable flag

                                   Continued on Next Page


















                                         30-2

                    SELF TEST ENTRY/EXIT LOGIC (K.O.E.O.) - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   Continued from Previous Page

      NDSFLG =  Neutral/Drive flag 1 = Drive

      NO_START = NST VIP enable flag

      PFEHP_FLG  = 1 Means PFE EGR is used, = 0 means sonic is used

      RUNNING = RVIP Enable Flag

      STIFLG = Self Test Input (demultiplexed) 1 = STI grounded

      STI_RESET = 1 = Operator requested Throttle Plate

      STO_TRIGGER = Trigger indicates STO output requested

      STO_WORKING = Self Test Output in use

      UNDSP = Underspeed Flag

      VIP_ENABLE = VIP enable flag

      Calibration Constants:

      - TRLOAD = Transmission load switch: See Base Strategy

      - VSTYPE = Integrated Vehicle Speed/Cruise Control System
                 Present Switch: See Base Strategy


      OUTPUTS

      Bit Flags:

      - DISABLE_NOSTART = Same as above

      - DISABLE_RUNNING = Same as above

      - NO_START = Same as above

      -RUNNING = Same as above

      - VFS_OUT_FLG = 1 = VFS output requested

      - VIP_ENABLE = Same as above

      - VIP_FP_OVERRIDE  = 1 Means that regular strategy controls
                           fuel pump

      - WIGFLG = Indicates Vip wiggle test










                                         30-3

                    SELF TEST ENTRY/EXIT LOGIC (K.O.E.O.) - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                               STRATEGY MODULE: VO_I_EXEC_COM5

                     For application with EPC VFS SOLENOID, PFE/SONIC EGR


                              | VIP_FP_OVERRIDE = 0
      ALWAYS------------------| (Make sure base strategy can control pump)
                              | CALL LOADPOINT




      ALWAYS------------------| WIGFLG = 0


      PUTMR > OR = 4 SEC------| VIP_ENABLE = 1


                                       Continued on Next Page








































                                         30-4

                    SELF TEST ENTRY/EXIT LOGIC (K.O.E.O.) - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                       Continued from Previous Page


      NO_START = 1 -----|                 | (Continue in Engine Off Test
      (The KOEO mode)   |                 |  continue executing NO START VIP
      STIFLG = 1--------|AND--------------|  background sequence, and 
      (STI grounded)    |                 |  outputting codes)
      CRANKING = 1------|                 | VFS_OUT_FLG = 1
      (engine stopped)  |                 | (Output TV pressure)
                                          |
                                          |
                                          |  ------ELSE------
                                          |
      NO_START = 1 ----------------|      |  
      STIFLG = 1 --------|         |      |
                         |AND--|   |      | (Exit Engine Off Test)
      CRANKING = 0-------|     |   |AND---| call RAM_INIT
                               |   |      | NO_START = 0
      STIFLG = 0---------|     |OR-|      | DISABLE_NOSTART = 1
      STO_WORKING = 0----|AND--|          | VIP_ENABLE = 0
      STO_TRIGGER = 0----|                | (Turn STO off)
      (not outputting codes)              | (Return to Background)
                                          |
                                          |  ------ELSE------
                                          |
                                          | Call VIP_CODE_ERASE  
                                          | (erase all continuous codes
      NO_START=1 -----------|             |   from KAM)
      STIFLG = 0------------|             | (Exit Engine Off Test 
      STO_WORKING = 1---|   |AND----------| call RAM_INIT
                        |OR-|             | NO_START = 0
      STO_TRIGGER = 1---|                 | DISABLE_NOSTART = 1
      (outputting codes)                  | VIP_ENABLE = 0
                                          | (Turn STO off,
                                          |   return to Background)

      NOTES:
       1. The flag NO_START is set immediately after the two
          2msec pulses are putput on STO.  The two 2msec pulses
          indicate that the module test and RAM test were
          sucessfully completed.

       2. A RAM_INIT sets CRKFLG=1 which causes WIGFLG to toggle
          during engine run-up if STI was grounded prior to
          cranking.

                                     Continued on Next Page  













                                         30-5

                    SELF TEST ENTRY/EXIT LOGIC (K.O.E.O.) - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                     Continued from Previous Page

                                          |
                                          | ------ELSE------
                                          |
      RUNNING = 1-------------------|     |
      (in KOER mode)                |     | 
                                    |     |
      STI_RESET=1 ------------|     |     | 
                              |     |     | 
      STI_RESET=0 ----|       |OR --|     |  
                      |AND ---|     |     |  
      STIFLG=1 -------|             |     |  
                                    |     | FIEPT = UROLAV (IEGR, VTCEPT)
                                    |     | (Continue in Engine Running 
                                    |     |  Test - continue executing  
      TRLOAD < 3-----------|        |     |  Engine Running background 
      TRLOAD > = 3---|     |OR------|AND--|  sequence and outputting codes)
      (auto trans)---|AND--|        |     |
      NDSFLG = 0-----|              |     |
      (in neutral)                  |     |
      VSTYPE NOT = 0----|           |     |
      (VSS present)     |AND--|     |     |
      VSBAR < = MINMPH--|     |OR---|     |
                              |           |
      VSTYPE = 0--------------|           |
      (no VSS)                            |
      PFEHP_FLG = 1 ----------------------|
                                          |
                                          | ------ELSE------
                                          |
      RUNNING = 1 ------------------|     |     
      (in KOER mode)                |     | 
                                    |     | (Continue in Engine Running
      STI_RESET = 1 ----------|     |     |   Test - continue executing
                              |     |     |   Engine Running Background
      STI_RESET = 0 ----|     |OR---|     |   sequence and outputting
                        |AND--|     |     |   codes)
      STIFLG = 1 -------|           |     |
                                    |     |
                                    |     |
      TRLOAD < 3 -------------|     |     |
      TRLOAD > = 3---|        |OR---|AND--|
      (auto trans)---|AND-----|     |     |
      NDSFLG = 0-----|              |     |
      (in neutral)                  |     |
      VSTYPE NOT = 0 ----|          |     |
      (VSS PRESENT)      |AND-|     |     |
      VSBAR <= MINMPH----|    |OR---|     |
                              |           |
      VSTYPE = 0 -------------|           |
       

                                    Continued on Next Page






                                         30-6

                    SELF TEST ENTRY/EXIT LOGIC (K.O.E.O.) - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    Continued from Previous Page
                                          | ------ELSE------
                                          |
      RUNNING = 1 ------------------------| (Vehicle is moving, in gear,
                                          |  or exit requested)
                                          | (Exit Engine Running Test)
                                          | CALL RAM_INIT
                                          | RUNNING = 0
                                          | DISABLE_RUNNING = 1
                                          | VIP_ENABLE = 0
                                          | DISABLE_NOSTART = 1
                                          |
                                          | ------ELSE------
                                          |
      CRANKING = 1 ---------|             | Enter Engine Off Test 
      STIFLG = 1 -----------|AND----------|  NO_START = 1
      DISABLE_NOSTART = 0 --|             |
                                          | ------ELSE------
                                          |
      CRANKING = 1 ---------|             | Enter Engine Off Wiggle Mode
      STIFLG = 1 -----------|AND----------|  WIGFLG = 1
      DISABLE_NOSTART = 1 --|             |

                                     Continued on Next Page




































                                         30-7

                    SELF TEST ENTRY/EXIT LOGIC (K.O.E.O.) - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    Continued from Previous Page

      CRANKING = 0 -------------------------|     |
      UNDSP = 0-----------------------------|     |
      (run mode)                            |     |
      STIFLG = 1----------------------------|     |
      (STI grounded)                        |     | ------ELSE------
      VIP_ENABLE = 1------------------------|     |
      PUTMR > OR =6 SEC---------------------|     |
      (time since powerup)                  |     | (Enter Engine Running
      TSSTIL > OR = 1 SEC-------------------|AND--|      Test)
      (time since STI grounded)             |     | RUNNING = 1
      DISABLE_RUNNING = 0-------------------|     | 
                                            |     |
      TRLOAD < 3------------|               |     |
      TRLOAD => 3---|       |OR-------------|     |
      (auto trans)  |AND----|               |     |
      NDSFLG = 0----|                       |     |
      (in neutral)                          |     |
      VSTYPE = 0--------------|             |     |
      (no VSS)                |OR-----------|     |
      VSTYPE NOT = 0----|     |                   |
                        |AND--|                   | ------ELSE------ 
      VSBAR <= MINMPH---|                         |
                                                  |
                                                  |
      CRANKING = 0 -------------------------|     |
      UNDSP = 0-----------------------------|     |
      (run mode)                            |     |
      STIFLG = 1----------------------------|     |
      (STI grounded)                        |     |
      VIP_ENABLE = 1------------------------|     | (Engine Running Test 
      PUTMR > OR = 6 SEC--------------------|     |  should not be entered 
      (time since powerup)                  |     |  because vehicle is 
                                            |     |  moving or is in gear.)
      TSSTIL > OR = 1 SEC-------------------|AND--| DISABLE_RUNNING = 1
      (time since STI grounded)             |     |
      DISABLE_RUNNING = 0-------------------|     |
                                                  | ------ELSE------
                                                  |
      CRANKING = 0 -------------------------|     |
      UNDSP = 0-----------------------------|     |
      STIFLG = 1----------------------------|     |
      VIP_ENABLE = 1 -----------------------|     |
      PUTMR > OR = 6 SEC--------------------|     |
                                            |     |  (Enter Engine Running
      TSSTIL > OR = 1 SEC-------------------|AND--|   Wiggle Mode.)
                                            |     |    WIGFLG = 1
      DISABLE_RUNNING = 1-------------------|     | 
                                                  | ------ELSE------
                                                  |
      VIP_ENABLE = 1 -----------------------------| Enter Continuous Test








                                         30-8












                                        CHAPTER 31

                                   ENGINE OFF SELF TEST

















































                                         31-1

             ENGINE OFF SELF TEST, ENGINE OFF SELF TEST SEQUENCE - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              ENGINE OFF SELF TEST SEQUENCE


      PROCESS
                              STRATEGY MODULE: VO_EOTS_COM1


                         -----------
                       (    ENTER    )
                         -----------                 
                              |
                              v
                        !-----------!
                        !   TURN    !
                        !  STO OFF  ! 
                        !-----------!
                              |   
                        /-----------\
                       / DO MODULE   \  FAIL
                      / INSTRUCTION   \--------------------|
                      \     TEST      /                    |
                       \             /                     |
                        \-----------/                      |
                              |PASS                        v
                         /--------\     FAIL        !--------------!
                        /   TEST   \--------------->!  TURN STO ON !   
                        \ KAM/RAM  /                ! CONTINUOUSLY !
                         \--------/                 !   AND EXIT   !
                              |PASS                 !--------------!
                         /---------\    FAIL        !--------------!
                        / TEST ROM  \-------------->!     SET      !
                        \           /               ! SERVICE CODE !
                         \---------/                !--------------!
                              |PASS                        |
                 |----------->|                            |
                 |            v                            |
                 |    NO/----------\                       |
                 |-----/ PUTMR =>   \ SEE NOTE 1           |
                       \ V_LANSDTM ?/                      | 
                        \----------/                       |
                              |YES                         |
                 |----------->|                            |
                 |            v                            |
                 |    NO/----------\                       |
                 |-----/TSSTIL_TMR  \ SEE NOTE 1           |
                       \V_HICKOKTM ?/                      |
                        \----------/                       |
                              | YES                        |
                              v                            |
                             (B)                          (A)










                                         31-2

             ENGINE OFF SELF TEST, ENGINE OFF SELF TEST SEQUENCE - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (B)                          (A)
                              |                            |
                              v                            | 
                    !--------------------------!           |
                    !SEND TWO 2MS PULSES ON STO!           | 
                    !2MS BETWEEN PULSES        !           |
                    !--------------------------!           |
                              |                            |
                 |----------->|<---------------------------|
                 |            v
                 |       /---------\
                 |  NO  /  PUTMR >  \ SEE NOTE 1
                 |------\   4 SEC   /
                         \---------/
                              |
                 |----------->|YES
                 |            v
                 |       /---------\
                 |      /FUEL PUMP  \ SEE NOTE 1
                 |  NO / TURNED OFF  \
                 |-----\ (TIMED OUT) / 
                        \           /
                         \---------/
                              |YES
                              v
                         /-----------\               !-----------------!
                        /    TEST     \      FAIL    !       SET       !
                       /   A/D'S AND   \------------>! SERVICE CODE(S) !
                       \   SWITCHES    /             !-----------------!
                        \             /                        |
                         \-----------/PASS                     |
                               |<------------------------------|
                               v 
                              (C)


      NOTE:

       -  Execute normal background until conditions are met.

       -  Calibration Recommendation: Since TSSTIL_TMR update may lag PUTMR by one
          background, V_LANSDTM should be calibrated to .275 sec. and V_HICKOKTM
          should be
          calibrated to .180 sec to insure delay integrity.
















                                         31-3

             ENGINE OFF SELF TEST, ENGINE OFF SELF TEST SEQUENCE - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 (C) 
                                  |
                                  v
                             /---------\    FAIL        !-----------------!
        FAIL /---------\    / TEST OCC  \-------------->!       SET       !
         |<-/FUEL PUMP  \<-|\           /               ! SERVICE CODE(S) !
         |  \CKT TEST** /  | \---------/                !-----------------!
         |   \---------/   |      |     PASS                      |
         |       |         |------|<------------------------------|
         |       |                 
         |       |PASS!------------------------!
         |       |--->!   . SEND SERVICE CODES !
         v         ^  !------------------------! 
      !--------!   |              |
      !  SET   !   |              v                
      !SERVICE !---|  !--------------------------!
      !CODE(S) !      !   . SEND SEPARATOR PULSE !
      !--------!      !--------------------------! 
                                  |
                                  v
                             /---------\    YES        !---------------!
                            /VIP_KAM =1 \------------->! SEND CODE 512*!
                            \     ?     /              !---------------!
                             \---------/                        |
                                  | NO                          |
                                  v                             |
                          !-------------------!                 |
                          ! . SEND CODES FROM !                 |
                          !   CONTINUOUS TEST !                 |
                          !-------------------!                 |
                                  |<----------------------------|
                                  v
                      !----------------------------!
                      !   . ENTER OUTPUT TEST MODE !
                      !----------------------------!


      *See Normal Strategy KAM qualification test logic for setting of VIP_KAM=1. 
      Code 512 is output during continuous code output.


      ** NOTE: Fuel pump check test must be performed after OCC test.


















                                         31-4

                      ENGINE OFF SELF TEST, KAM/RAM TEST - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                      KAM/RAM TEST


      PROCESS
                             STRATEGY MODULE: VO_KAMRAM_COM1


                                  -----------
                                (    ENTER    )
                                  -----------
                                       |
                                       v 
                      !-----------------------------------!  
                      ! SET POINTER TO BEGINNING OF       !
                      ! EXT_RAM                           !
                      !-----------------------------------!  
                 |-------------------->|                      
                 |                     v
                 |        !-------------------------!
                 |        ! SAVE REGISTER CONTENTS  !
                 |        !-------------------------!
                 |                     |
                 |        !-------------------------!
                 |        !   WRITE HEX AAAA TO     !
                 |        !   REGISTER              !
                 |        !-------------------------!
                 |                     |
                 |        !-------------------------!
                 |        ! READ REGISTER CONTENTS  !
                 |        !-------------------------!
                 |                     |
                 |              /-------------\
                 |             / IS CONTENTS   \  NO  
                 |             \  = AAAA       /-------------|
                 |              \-------------/              |
                 |                     | YES                 |
                 |                     v                     |
                 |        !------------------------!         |
                 |        !   WRITE HEX 5555 TO    !         |
                 |        !     REGISTER           !         |
                 |        !------------------------!         |
                 |                     |                     |
                 |        !------------------------!         |
                 |        ! READ REGISTER CONTENTS !         |
                 |        !------------------------!         |
                 |                     |                     |
                 |                /---------\                |
                 |               /    IS     \ NO            | 
                 |              /  CONTENTS   \------------->|  
                 |              \   = 5555    /              |
                 |               \           /               v
                 |                \---------/           !-----------!
                 |                     | YES            !TURN STO ON!         
                 |                     v                !   EXIT    !
                 |                    (A)               !-----------!





                                         31-5

                      ENGINE OFF SELF TEST, KAM/RAM TEST - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                      (A)
                                       |
                 |                     v                
                 |            !------------------!      
                 |            ! RESTORE REGISTER !
                 |            !     CONTENTS     !  
                 |            !------------------!
            !-----------!              | 
            !INCREMENT  !              |
            ! POINTER   !              |
            !-----------!              |
                 ^                     |             
                 |       NO    /-------------\      
                 |<-----------/  END OF 2K    \    
                              \  EXT-RAM ?    /    
                               \-------------/      
                                       | YES      
                                       |
                                       v
                               --------------
                            (  GO TO ROM_TEST  )
                               --------------






































                                         31-6

                 ENGINE OFF SELF TEST, READ-ONLY MEMORY TEST - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  READ-ONLY MEMORY TEST


      PROCESS
                              STRATEGY MODULE: VO_ROM_COM1


                                  -----------          
                                (    ENTER    )        
                                  -----------
                                       |
                                       v
                      !----------------------------------!
                      ! DO A 16-BIT ADDITION OF CONTENTS !
                      ! OF ALL ROM LOCATIONS RETAINING   !
                      ! THE 16 LEAST SIGNIFICANT BITS    !
                      ! OF THE RESULT.                   !
                      !----------------------------------!
                                       |
                                       v
                                  /---------\    NO    !---------!
                                 /  SUM=0 ?  \-------->!   SET   !
                                 \           /         ! CODE 511!
                                  \---------/          !---------!
                                       |   YES             |
                                       |<------------------|
                                       v
                                  -----------
                                (     EXIT    )
                                  -----------


      NOTE:  A specific location will contain checksum such that sum of correct ROM
      contents (including checksum)=0.   Location is labeled "Rom_To" or
      "Rom_Total".

























                                         31-7

           ENGINE OFF SELF TEST, ENGINE COOLANT TEMPERATURE SENSOR - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            ENGINE COOLANT TEMPERATURE SENSOR


      OVERVIEW

      The ECT sensor test checks the ECT sensor and associated  circuitry  in  four
      specific areas.

       -  Low voltage output such as short circuits.  -Service code 117.

       -  High voltage output.  i.e.  open circuits,  disconnects.   -Service  code
          118.

       -  Lower ECT range fault.  -Service code 116.

       -  Upper ECT range fault.  -Service code 116.



      The analog signal from the ECT sensor undergoes A/D conversion  and  IECT  is
      compared to four calibration parameters; ECTMIN, ECTMAX, VIECT1, and VIECT2.

      Cross checks are made first to direct service to a hard fault.  -i.e.   short
      circuits  or  simple  disconnects.   Shorts  are  tested  first determined by
      ECTMIN, then open circuits determined by ECTMAX.

      VIECT1 and VIECT2 define low and  high  range  values  and  are  subsequently
      compared to IECT to evaluate normal sensor readings.

      Specific vehicle preparation  must  be  performed  to  establish  a  standard
      against which the range is checked.

      The calibration values are established by PEDD/EED and should not be changed.



      DEFINITIONS

      INPUTS

      Registers:

       -  ECT

       -  IECT

      Calibration Constants:

       -  ECTMIN; Minimum Engine off ECT -COUNTS

       -  ECTMAX; Maximum Engine off ECT -COUNTS

       -  VIECT1; Minimum Engine off ECT (RANGE) -COUNTS

       -  VIECT2; Maximum Engine off ECT (RANGE) -COUNTS





                                         31-8

           ENGINE OFF SELF TEST, ENGINE COOLANT TEMPERATURE SENSOR - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                              STRATEGY MODULE: VO_ECT_COM1


                        -----------
                      (    ENTER    )
                        -----------
                             |                           
                             v
                        /---------\    NO      !---------!
                       /  IECT >=  \---------->! CODE 117!-->|
                       \  ECTMIN ? /           !---------!   |
                        \---------/                          |
                             |   YES                         |
                             |                               |
                             v                               |
                        /---------\    NO      !---------!   |
                       /  IECT <=  \---------->! CODE 118!-->|   
                       \ ECTMAX ?  /           !---------!   |
                        \---------/                          |
                             |   YES                         |
                             v                               |
                        /---------\                          |
                       /   VIECT1  \   NO      !---------!   |
                      /  >=IECT >=  \--------->! CODE 116!-->|
                      \    VIECT2 ? /          !---------!   |
                       \           /                         |
                        \---------/                          |
                             |   YES                         |
                             |<------------------------------| 
                             v
                        -----------
                      (     EXIT    )
                        -----------


























                                         31-9

                ENGINE OFF SELF TEST, THROTTLE POSITION SENSOR - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                THROTTLE POSITION SENSOR


      PROCESS
                               STRATEGY MODULE: VO_TP_COM1


                        -----------
                      (    ENTER    )
                        -----------
                             |
                             v
                        /---------\   NO       !---------!
                       /  ITP >=   \---------->! CODE 122!-->|
                       \ TAPMIN ?  /           !---------!   |
                        \---------/                          |
                             |   YES                         |
                             |                               |
                             v                               |
                        /---------\     NO     !---------!   |
                       /   ITP <=  \---------->! CODE 123!-->|
                       \ TAPMAX ?  /           !---------!   |  
                        \---------/                          |
                             |   YES                         |
                             v                               |
                        /---------\                          |
                       /   VTAP1   \   NO      !---------!   |
                      /  <=ITP <=   \--------->! CODE 121!-->|
                      \    VTAP2 ?  /          !---------!   |
                       \           /                         |
                        \---------/                          |
                             |  YES                          |
                             |<------------------------------|
                             v
                        -----------
                      (     EXIT    )
                        -----------























                                        31-10

          ENGINE OFF SELF TEST, AIR CHARGE TEMPERATURE  SENSOR TEST - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                     ACT SENSOR TEST


      PROCESS
                              STRATEGY MODULE: VO_ACT_COM1


                        -----------                         
                      (    ENTER    )
                        -----------
                             |                           
                             v
                        /---------\    NO      !---------!
                       /  IACT >=  \---------->! CODE 112!---|
                       \  ACTMIN ? /           !---------!   |
                        \---------/                          |
                             |   YES                         |
                             |                               |
                             v                               |
                        /---------\    NO      !---------!   |
                       /  IACT <=  \---------->! CODE 113!---|   
                       \ ACTMAX ?  /           !---------!   |
                        \---------/                          |
                             |   YES                         |
                             v                               |
                        /---------\                          |
                       /   VIACT1  \   NO      !---------!   |
                      /  =>IACT =>  \--------->! CODE 114!-->|
                      \    VIACT2 ? /          !---------!   |
                       \           /                         |
                        \---------/                          |
                             |   YES                         |
                             |<------------------------------| 
                             v
                        -----------
                      (     EXIT    )
                        -----------























                                        31-11

                  ENGINE OFF SELF TEST, MASS AIRFLOW SENSOR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   MAF AIRFLOW SENSOR


      OVERVIEW

      This test determines if the MAF sensor is out of range.



      DEFINITIONS

      Registers:

       -  IMAF = MAF input register.

      Calibration Constants:

       -  VMAF01 = MAF low limit.

       -  VMAMAX = MAF short to power limit.




      PROCESS
                              STRATEGY MODULE: VO_MAF_COM1


      IMAF >= VMAMAX -------------------------| Set code 158
                                              |  (extreme limit failure)
                                              |
                                              | --- ELSE ---
                                              |
      IMAF >= VMAF01 -------------------------| Set code 159
                                              |  (range failure) 

























                                        31-12

         ENGINE OFF SELF TEST, EXHAUST GAS RE-CIRCULATION SENSOR TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                         EXHAUST GAS RE-CIRCULATION SENSOR TEST


      DEFINITIONS

      Registers:

       -  IEGR = EGR sensor input.

      Calibration Constants:

       -  EPTMAX = Maximum EPT reading (open), counts.

       -  EPTMIN = Minimum EPT reading (short), counts.

       -  EVPMAX = Maximum EVP reading (open), counts.

       -  EVPMIN = Minimum EVP reading (short), counts.

       -  PFEHP = Switch to select EGR strategy; 0 -> use sonic strategy, 1 ->  use
          PFE strategy, 2 -> do not use any EGR.

       -  VEPTHL = EPT high limit (valve closed), counts.

       -  VEPTLL = EPT low limit (valve closed), counts.

       -  VEVPHL = EVP high limit (valve closed), counts; end of essential ordering
          of constants.

       -  VEVPLL = EVP low limit (valve closed), counts.






























                                        31-13

         ENGINE OFF SELF TEST, EXHAUST GAS RE-CIRCULATION SENSOR TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                              STRATEGY MODULE: VO_EGR_COM2


           (PFE)                          
        -----------                        
      (    ENTER    )                          
        -----------                       
             |                                       
             v                                                    
        /---------\  YES       -----------             
       / PFEHP = 2 \-------->(    EXIT    )
       \           /           -----------
        \---------/                              
             | NO                               
             v                                (SONIC)                            
        /---------\                        
       / PFEHP = 1 \  NO                    /---------\  NO
       \     ?     /---------------------->/ PFEHP = 0 \-------------------| 
        \---------/                        \     ?     /                   |      
             |  YES                         \---------/                    |     
             |                                   |  YES                    |
             |                                   v                         |
             v                              /---------\ YES !---------!    |
        /---------\                        /  IEGR <=  \--->! CODE 327!--->|
       /   IEGR<=  \ YES !---------!       \  EVPMIN   /    !---------!    |
       \   EPTMIN  /---->! CODE 327!----|   \---------/                    |
        \---------/      !---------!    |        | NO                      |
             |  NO                      |        v                         |
             v                          |   /---------\ YES !---------!    |
        /---------\                     |  /  IEGR >=  \--->! CODE 337!--->|
       /   IEGR >= \ YES !---------!    |  \  EVPMAX   /    !---------!    |
       \   EPTMAX  /---->! CODE 337!--->|   \---------/                    |
        \---------/      !---------!    |        | NO                      |
             |  NO                      |        v                         |
             v                          |   /---------\ YES !---------!    |
        /---------\                     |  /  IEGR <   \--->! CODE 328!--->|
       /   VEPTLL  \ NO  !---------!    |  \  VEVPLL ? /    !---------!    |
      / <= IEGR <=  \--->! CODE 335!--->|   \---------/                    |
      \    VEPTHL   /    !---------!    |        | NO                      |
       \           /                    |        v                         |
        \---------/                     |   /---------\ YES !---------!    |
             |  YES                     |  /  IEGR >   \--->! CODE 334!--->|
             |<-------------------------|  \  VEVPHL ? /    !---------!    |
             v                              \---------/                    |
        -----------                              | NO                      |
      (     EXIT    )                            |<------------------------|
        -----------                              v
                                            -----------
                                          (     EXIT    )
                                            -----------









                                        31-14

        ENGINE OFF SELF TEST, MANUAL LEVER POSITION SENSOR INPUT TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                     MANUAL LEVER POSITION SENSOR INPUT TEST (E40D)


      OVERVIEW

      The Manual Lever Position Sensor (MLPS) Input Test is to  be  performed  with
      the  transmission  selector  lever in the PARK position.  INDS (in counts) is
      checked to verify that all 6 resistances in series (Park,  Reverse,  Neutral,
      Overdrive,  Manual  2,  and  Manual  1) result in a voltage output within the
      range VND1 to  VND2.   The  values  for  the  range  are  determined  by  the
      tolerances  of the 6 MLPS resistance to VREF and a 560 OHM resistance to VREF
      as the voltage divider.

      The divider network consists of the input to the EEC (INDS), divided  by  the
      560  OHM  resistance  to  VREF and the 6 resistors in series (MLPS) to signal
      return.

      The INDS register is in "counts".  To convert voltage to counts:


                        INDS counts = MLPS voltage * (VREF/1023)



      DEFINITIONS

      Registers:

       -  INDS = Input Neutral/drive switch.  -counts

      Calibration Constants:

       -  VND1 = Lower limit for MLPS test.  -counts

       -  VND2 = Upper limit for MLPS test.  -counts

       -  TRLOAD = 6 indicates MLPS.























                                        31-15

        ENGINE OFF SELF TEST, MANUAL LEVER POSITION SENSOR INPUT TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: VO_MLPS_INPUT_COM2


      TRLOAD = 6  ---------------------|
       (MLPS)                          |
                                       |AND -| Set code 654
      INDS < VND1 ---------------|     |     |  (MLPS out of Park range)
       (INDS too low)            |     |
                                 |OR --|     
      INDS > VND2 ---------------|
       (INDS too high)  
















































                                        31-16

        ENGINE OFF SELF TEST, TRANSMISSION OIL TEMPERATURE SENSOR TEST - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                        TRANSMISSION OIL TEMPERATURE SENSOR TEST


      OVERVIEW

      The TOT (Transmission Oil  Temp)  sensor  test  checks  the  TOT  sensor  and
      associated circuitry in four specific areas.

       -  Low voltage output such as short circuits.  -Service code 638

       -  High voltage output.  i.e.  open circuits,  disconnects.   -Service  code
          637.

       -  Lower TOT range fault.  -Service code 636.

       -  Upper TOT range fault.  -Service code 636.


      The analog signal from the TOT sensor undergoes A/D conversion  and  ITOT  is
      compared to four calibration parameters; TOTMIN, TOTMAX, VITOT1, and VITOT2.

      Gross checks are made first to direct service to a hard fault.  -i.e.   short
      circuits  or  simple  disconnects.   Shorts  are  tested  first determined by
      TOTMIN, then open circuits determined by TOTMAX.

      VITOT1 and VITOT2 define low and  high  range  values  and  are  subsequently
      compared to ITOT to evaluate normal sensor readings.

      Specific vehicle preparation  must  be  performed  to  establish  a  standard
      against  which  the  range is checked.  Refer to section entitled; Initiating
      Self-Test.

      The calibration values are established by ESD/EED and should not be changed.



























                                        31-17

        ENGINE OFF SELF TEST, TRANSMISSION OIL TEMPERATURE SENSOR TEST - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  TOT

       -  ITOT

      Calibration Constants:

       -  TOTMIN; Maximum Engine off TOT -COUNTS

       -  TOTMAX; Minimum Engine off TOT -COUNTS

       -  VITOT1; Minimum Engine off TOT (RANGE) -COUNTS

       -  VITOT2; Maximum Engine off TOT (RANGE) -COUNTS









































                                        31-18

        ENGINE OFF SELF TEST, TRANSMISSION OIL TEMPERATURE SENSOR TEST - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                              STRATEGY MODULE: VO_TOT_COM2


                        -----------
                      (    ENTER    )
                        -----------
                             |                           
                             v
                        /---------\    NO      !---------!
                       /  ITOT>=   \---------->! CODE 638!-->|
                       \  TOTMIN ? /           !---------!   |
                        \---------/                          |
                             |   YES                         |
                             |                               |
                             v                               |
                        /---------\    NO      !---------!   |
                       /  ITOT <=  \---------->! CODE 637!-->|   
                       \ TOTMAX ?  /           !---------!   |
                        \---------/                          |
                             |   YES                         |
                             v                               |
                        /---------\                          |
                       /   VITOT1  \   NO      !---------!   |
                      /  >=ITOT >=  \--------->! CODE 636!-->|
                      \    VITOT2 ? /          !---------!   |
                       \           /                         |
                        \---------/                          |
                             |   YES                         |
                             |<------------------------------| 
                             v
                        -----------
                      (     EXIT    )
                        -----------


























                                        31-19

                 ENGINE OFF SELF TEST, ACC/NEUTRAL INPUT TEST - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 ACC/NEUTRAL INPUT TEST


      PROCESS
                             STRATEGY MODULE: V0_ACCNEU_COM1


                                --------
                              (  ENTER   )
                                --------
                                   |
                                   v
                             NO/----------\
                    |<--------/V_NEUTST_ENA\
                    |         \    = 1     /
                    |          \----------/
                    |              |YES
                    |              v
                    |          /----------\ YES      !--------!
                    |         / NDSFLG = 1 \-------->!CODE 522! 
                    |         \            /         !--------!          
                    |          \----------/              |
                    |              | NO                  |
                    |------------->|<--------------------|
                                   |
                                   v                     
                               /---------\  NO       !---------!
                              /  ACCS=0   \--------->! CODE 539!
                              \           /          !---------!
                               \---------/               |
                                   | YES                 |
                                   |<--------------------|
                                   |
                                   |
                                   |
                                   v
                                -------
                              (  EXIT   )
                                -------





















                                        31-20

                    ENGINE OFF SELF TEST, IVPWR INPUT TEST - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    IVPWR INPUT TEST


      PROCESS
                             STRATEGY MODULE: VO_IVPWR_COM1


                      ----------                        
                    (   ENTER    )                      
                      ----------
                          |
                          v
                     /---------\
                    / IIVPWR    \  YES     !---------!
                    \ < VKYPWR  /--------->!CODE 513 !
                     \---------/           !---------!
                          |  NO                 |
                          |<--------------------|
                          v
                      ---------
                    (  EXIT     )
                      ---------


      NOTE:  This test is  designed  to  check  continuity  of  the  IVPWR  circuit
      internal to the EEC module and can be used as a battery voltage check, if the
      parameter VKYPWR is calibrated to the minimum voltage to  prevent  occurrence
      of false codes.


                    COUNTS = IIVPWR *.1786 * 1023
                             --------------------
                                   VREF


                    IIVPWR = VREF * COUNTS
                               -------------
                                .1786 * 1023


      NOTE: Recommended VKYPWR value: 400 counts (10.9 volts)



















                                        31-21

        ENGINE OFF SELF TEST, ELECTRONIC THROTTLE VALVE SOLENOID TEST - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                         ELECTRONIC THROTTLE VALVE SOLENOID TEST


      PROCESS
                              STRATEGY MODULE: VO_ETV_COM2


              ------
            (  ENTER  )       |-----------|
              ------          |           v
                 |            | !---------------------!
                 v            | !etv_ocm_min_D =      !
           NO/--------\       | !(ETV_BIAS - (ETV_GAIN!
      |-----/ TSTRAT=7 \      | !* TV_COUNTS))        !
      |     \          /      | !                     !                 
      |      \--------/       | !         +           !         
      |          |YES         | !                     !              
      |    NO/--------\       | !((VBAT - 10.0) *     !
      |<----/V_ETV_TEST\      | !ETV_GAIN_BAT         !
      |     \  = 1 ?   /      | !---------------------!         
      |      \--------/       |           |                      
      |          | YES        |           v                       
      |  !---------------!    |      /--------\YES    !---------!
      |  ! TV_COUNTS =   !    |     /ETVOCM <  \----->!SET CODE !--|
      |  ! TV1CNTS_TEST  !    |    /etv_ocm_min_\     !    624  !  |        
      |  !---------------!    |    \          D /     !---------!  |      
      |          |            |     \          /                   |       
      |  !--------------!     |      \--------/                    |      
      |  !RUN TV VFS    !     |           |NO                      |
      |  !OUTPUT ROUTINE!     |           v                        |            
      |  !--------------!     | !---------------------!            |
      |          |            | !.TV_COUNTS =TV2CNTS_ !            |
      |          |            | !  TEST               !            | 
      |          v            | !.DO TV VFS OUTPUT    !            |
      | !-----------------!   | !  ROUTINE            !            |
      | !WAIT ETV_TEST_SEC!   | !.WAIT ETV_TEST_SEC   !            |   
      | !-----------------!   | !---------------------!            |        
      |          |            |           |                        |        
      |          |            |           v                        |      
      | !-----------------!   |     /------------\      !---------!|       
      | !V_ETVOCM_SAV =   !   |    /|V_ETVOCM_SAV \NO   !SET CODE !|       
      | !    ETVOCM       !   |   /    - ETVOCM|   \--->!   625   !|      
      | !-----------------!   |   \  >= VETVDT     /    !---------!|          
      |          |            |    \              /          |     |         
      |          |------------|     \------------/           |     |
      |                                   |YES               v     |
      |                                   |<-----------------------|
      |                                   v
      |                              !------------!
      |                              !TV_COUNTS =0!
      |                              !------------!
      |                                   |
      |                                -------
      |----------------------------->(  EXIT   )
                                       -------





                                        31-22

        ENGINE OFF SELF TEST, ELECTRONIC THROTTLE VALVE SOLENOID TEST - CBAZA
                     PED-PTPE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      NOTE:

       -  TV VFS output routine part of base strategy

       -  Clip ETV_OCM_MIN_D to zero                           























































                                        31-23

                ENGINE OFF SELF TEST, OCTANE ADJUST INPUT TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                OCTANE ADJUST INPUT TEST


      OVERVIEW

      The Octane Adjust Input Test determines that if the hardware is  present  for
      field  service  to retard spark for octane, a Code 341 is output when the A/D
      channel or ROM port input indicates the pin is open requesting  spark  retard
      strategy.



      DEFINITIONS

      Bit Flags:

       -  OCTADJ = A/D channel or ROM port used as input to retard  the  spark  for
          octane adjustment.

      Calibration Constants:

       -  OCTADJHP = Octane adjust pin hardware present switch.  If set  to  0,  no
          OCTADJ pin present, if set to 1 an OCTADJ pin is present.




      PROCESS
                             STRATEGY MODULE: VO_OCTADJ_COM1


      OCTADJHP = 0 ---------------------|     
                                        |OR --| No Octane Adjust service pin exists
      OCTADJHP = 1 ---------------|     |     |  or service pin exists but is not 
                                  |AND -|     |  in use
      OCTADJ = 0 -----------------|           | EXIT this test
       (OCTADJ < 512 counts on A/D)           |
                                              | --- ELSE ---
      OCTADJHP = 1 ---------------------|     | 
                                        |AND -| Set Code 341
      OCTADJ = 1 -----------------------|     | Exit this test
       (OCTADJ => 512 counts on A/D)


















                                        31-24

                  ENGINE OFF SELF TEST, OUTPUT CIRCUIT CHECK - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  OUTPUT CIRCUIT CHECK


      OVERVIEW

      The OCC uses special module hardware to test certain output channels for open
      circuits/shorted  drivers.   The  hardware  consists  of  a resistor- divider
      network which is fed back into an A/D channel.  The test  begins  by  turning
      off all outputs in the network.  Outputs are then turned on and off, one at a
      time, and the A/D  channel  is  used  to  determine  the  change  in  voltage
      associated  with each.  A voltage change smaller than expected causes a fault
      code to be registered.  The output channels, their  associated  fault  codes,
      and expected voltage change calibration parameters for each appear below.



      PROCESS
                              STRATEGY MODULE: VO_OCC_COM16


               OC# | CIRCUIT FUNCT. | CAL. PARAMETER | ERROR CODE
               ____|________________|________________|____________ 
                1  |    AM2   4)    |    OCCDT1      |    553
                2  |    AM1   5)    |    OCCDT2      |    552
                3  |    hedf  6)    |    OCCDT3      |    563  
                4  |    EVR   2)    |    OCCDT4      |    558
                5  |    CANP        |    OCCDT5      |    565
                7  |    FP          |    OCCDT7      |    556
                8  |    edf  7)     |    OCCDT8      |    564
                9  |    MLUS        |    OCCDT9      |    652
               10  |    SS1         |    OCCSS1      |    621
               11  |    SS2         |    OCCSS2      |    622


               NOTES:

                       FP    - FUEL PUMP 
                       EVR   - ELECTRONIC VACUUM REG.   

               2) ONLY IF PFEHP=0 OR 1
               4) ONLY IF THRMHP = 1 AND VTABFL = 1
               5) ONLY IF THRMHP = 1
               6) FUNCTION ONLY IF HEDFHP = 1
               7) FUNCTION ONLY IF EDFHP = 1 
















                                        31-25

          ENGINE OFF SELF TEST, OUTPUT CIRCUIT CHECK TEST STRUCTURE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           OUTPUT CIRCUIT CHECK TEST STRUCTURE


      DEFINITIONS

      INPUTS

      Registers:

       -  IOCC = Output circuit check.

       -  OCCSAV = Starting value for OCC check.

      Calibration Constants:

       -  OCCDT1 = Minimum change in output circuit check.

       -  OCCDT2 = Minimum change in output circuit check.

       -  OCCDT3 = Minimum change in output circuit check.

       -  OCCDT4 = Minimum change in output circuit check.

       -  OCCDT5 = Minimum change in output circuit check.

       -  OCCDT6 = Minimum change in output circuit check.

       -  OCCDT7 = Minimum change in output circuit check.

       -  OCCDT8 = Minimum change in output circuit check.

       -  OCCDT9 = Minimum change in LUS output circuit check.

       -  VDLHED = Minimum time to hold on high  fan  while  performing  OCC  test,
          seconds.

       -  VDLEDF = Minimum time to hold on  low  fan  while  performing  OCC  test,
          seconds.






















                                        31-26

          ENGINE OFF SELF TEST, OUTPUT CIRCUIT CHECK TEST STRUCTURE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: VO_OCCTS_COM1


                              -----------             
                            (    ENTER    )
                              -----------
                                   |
                    !-------------------------!
                    !DE-ENERGIZE ALL OUTPUTS  !
                    !(EXCEPT edf)**           |
                    ! . OC=1                  !
                    !-------------------------!
                                   |              NOTE: HEDF TEST MUST
                           !----------------!        IMMEDIATELY FOLLOW
                           ! DELAY 50 MSEC. !        EDF TEST
                           !----------------!
                                   |          **ONLY WHEN EDF IS PRESENT
           |---------------------->|
           |            !---------------------!
           |            ! SAVE IOCC IN OCCSAV !
           |            !---------------------!
           |                       |
           |           !-----------------------!
           |           !ENERGIZE* OUTPUT #(OC) ! 
           |           !-----------------------!  
           |                       |         *EXCEPT OC #8(edf)**WHICH     
           |               !----------------! SHOULD BE DE-ENERGIZED    
           |               ! DELAY 50 MSEC. ! DURING THIS STEP
           |               !----------------!
           |                       |
           |                /-------------\           !-------------!
           |               /  ABS[OCCSAV-  \     NO   !     SET     !
           |              /   IOCC]    >=   \-------->! APPROPRIATE !
           |              \ OCCDT(OC) COUNTS/         !  FAIL CODE  !
           |               \       ?       /          ! (SEE TABLE) !
           |                \-------------/           !-------------!
           |                       |  YES                    |
           |                       |<------------------------|
           |                       v
          (A)                 /--------\ YES     !-----------!
                             /IS THIS   \------->!  DELAY    !
                             \  edf ?   /        !VDLEDF-SEC !
                              \--------/         !-----------!
                                   |<------------------|
                                NO |
                                   v
                              /--------\ YES     !-----------!
                             / IS THIS  \------->!  DELAY    !
                             \   hedf ? /        !VDLHED-SEC !
                              \--------/         !-----------!
                                   |<------------------|
                                N0 |
                                   v
                                  (B)





                                        31-27

          ENGINE OFF SELF TEST, OUTPUT CIRCUIT CHECK TEST STRUCTURE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  (B)
          (A)                      |
           ^                       v
           |         !--------------------------!
           |         !DE-ENERGIZE  OUTPUT #(OC) ! 
           |         !--------------------------!   
           |                       |                
           |               !----------------!       
           |               ! DELAY 50 MSEC. !
      !----------!         !----------------!
      !OC = OC+1 !                 |          
      !----------!            /---------\           
           |           NO    /    IS     \          
           |<---------------/ OC = LASTOC?\         
                            \             /         
                             \           /          
                              \---------/           
                                   |  YES
                                   v
                              -----------
                            (    EXIT     )
                              -----------






































                                        31-28

                     ENGINE OFF SELF TEST, MLUS OCC TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                      MLUS OCC TEST


      OVERVIEW

      The MLUS driver is a peak and hold driver that ramps current to pull in a low
      resistance  solenoid.   The  driver then drops current to a state where it is
      being switched between 0 and 1 amp for the rest of the time required for  the
      requested  duty  cycle.   There  is a timeout circuit in the EEC to force the
      current to drop to the sustain mode (current switching between 0 and  1  amp)
      after  2.5ms to 4.17ms.  That is if the solenoid has not pulled in by 4.17ms,
      this timer forces the current to drop to sustain mode.

      Due to the above described operation of the MLUS driver, an OCC check of  the
      MLUS  circuit  must  take  place  before  the sustain mode is activated.  The
      sustain mode does not provide sufficient change  at  the  OCC  A/D  input  to
      validate the MLUS circuit.

      This test utilizes CLOCK, the global timer to measure a change of voltage  at
      the  OCC  A/D  input.   The integrity of the MLUS circuit can then be checked
      within the time the peak and hold driver provides  sufficient  current.   The
      test  parameters are set in background.  The background is then placed into a
      loop controlled by the GLOBAL TIMER.  Each pass thru the loop  that  IOCC  is
      low,  the  IOCC  A/D  is read for the next pass.  The loop continues until 1)
      IOCC is greater than V_LUSOCC_DEL which indicates the MLUS is OK, or  2)  The
      time  limit  V_MLUS_MAXTM  is exceeded and a code 652 is set.  The background
      then continues to execute turning off the MLUS solenoid and proceeding to the
      next KOEO test if any.

      NOTE:  This test must follow immediately after the current KOEO OCC test.






























                                        31-29

                     ENGINE OFF SELF TEST, MLUS OCC TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      Registers:

       -  CLOCK

       -  IOCC = OCC A/D input register

       -  OCCSAV = Stored value of OCC.

       -  Start_tm = Global time at start of test (temp reg.)

      Calibration Constant:

       -  V_LUSOCC_DEL = Delta IOCC required to pass MLUS OCC test.

       -  V_LUSOCC_ENA = MLUS OCC test enable switch, 1 = enable.

       -  V_MLUS_MAXTM = Time to sit and wait for MLUS to change IOCC.









































                                        31-30

                     ENGINE OFF SELF TEST, MLUS OCC TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: VO_MLUS_OCC_COM1


      V_LUSOCC_ENA = 1 -----------------------| Delay 50ms
                                              | OCCSAV := IOCC
                                              | Write ^FFFF to MLUS DUCE output
                                              |  (energize MLUS solenoid)
                                              | start_tm := CLOCK
                                              | DO: MLUS_OCC_TEST_WAIT
                                              | Write zero toi MLUS DUCE output
                                              |  (de-energize MLUS solenoid)


      Begin: MLUS_OCC_TEST_WAIT

      |IOCC - OCCSAV| < V_LUSOCC_DEL -|
                                      |AND -| Sample OCC A/D
      CLOCK - start_tm <=             |     |
                    V_MLUS_MAXTM -----|     |  (IOCC)
                                            | Do: MLUS_OCC_TEST_WAIT
                                            |
                                            | --- ELSE ---
                                            |
      CLOCK - start_tm > V_MLUS_MAXTM ------| Set service code 652

      End: MLUS_OCC_TEST_WAIT

































                                        31-31

                 ENGINE OFF SELF TEST, FUEL PUMP MONITOR TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIATARY & CONFIDENTIAL


                                 FUEL PUMP MONITOR TEST


      OVERVIEW

      This test determines if the proper FPM input is received by the processor  as
      the fuel pump is commanded on and off.



      DEFINTIONS

      Registers:

       -  VIP_CNT_EX = Self test executive pointer.

       -  VIP_TIMER_EX = VIP state timer.

      Bit Flags:

       -  CODE_556 = Primary fuel pump circuit failure (from OCC test).

       -  CODE_543 = Fuel pump circuit open-battery to ECA.

       -  CODE_542 = Fuel pump circuit open-ECA to motor ground.

       -  FPM = State of the FPM input; 1 -> high, implying pump on.

       -  PUMP = Controls state of fuel pump control output; 1 -> commanded on.

      Calibration Constants:

       -  V_FPMDLY  =  Fuel  Pump  Monitor  test  fuel   pump   on-to-off/off-to-on
          stabilization delay time.

       -  V_FPMFLG = Fuel Pump Monitor test enable switch; 1 -> enable.
























                                        31-32

                 ENGINE OFF SELF TEST, FUEL PUMP MONITOR TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIATARY & CONFIDENTIAL


      PROCESS
                              STRATEGY MODULE: VO_FPM_COM2

      VIP_CNT_EX = fpm_test_1 -----------| DO: FPM TEST 1 PROCESS
                                         |  (If test is enabled, start pump, 
                                         |   initialize delay timer.)
                                         |
                                         | --- ELSE ---
                                         |
      VIP_CNT_EX = fpm_test_2 -----------| DO: FPM TEST 2 PROCESS
                                         |  (Check for FPM = 1, if not,
                                         |   set code 543.  Stop pump,
                                         |   initialize delay timer.)
                                         |
                                         | --- ELSE ---
                                         |
      VIP_CNT_EX = fpm_test_3 -----------| DO: FPM TEST 3 PROCESS
                                         |  (Check for FPM = 0, if not,
                                         |   set code 542. End of test)









































                                        31-33

                 ENGINE OFF SELF TEST, FUEL PUMP MONITOR TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIATARY & CONFIDENTIAL


      BEGIN: FPM TEST 1 PROCESS

      V_FPMFLG = 1 ----------------|     |  (Start test)
       (Test enabled)              |AND -| VIP_TIMER_EX = 0
                                   |     |  (Initialize delay timer)
      CODE_556 = 0 ----------------|     |
       (No fuel pump OCC                 | PUMP = 1
        failure)                         |  (Command fuel pump on)
                                         |
                                         | VIP_CNT_EX = fpm_test_2
                                         |  (Set up for next process)
                                         |
                                         | --- ELSE ---
                                         |
                                         | (Skip to next test)
                                         | VIP_CNT_EX = fpm_test_3 + 1
                                         |  (Next test)

      END: FPM TEST 1 PROCESS



      BEGIN: FPM TEST 2 PROCESS

      VIP_TIMER_EX > V_FPMDLY -----|     | (pass code 543 test)
       (time delay)                |AND -| VIP_TIMER_EX = 0
                                   |     |  (re_init timer for next delay)
      FPM = 1 ---------------------|     |  
       (Indicates pump on)               | PUMP = 0
                                         |  (command pump off)
                                         |
                                         | VIP_CNT_EX = fpm_test_3
                                         |  (Set up for next process)
                                         |
                                         | --- ELSE ---
      VIP_TIMER_EX > V_FPMDLY -----|     |  
       (Time delay)                |AND -| SET CODE_543 = 1
                                   |     |  (fail test)
      FPM = 0 ---------------------|     |
       (Indicates pump off)              | VIP_TIMER_EX = 0
                                         |  (re-init timer for next delay)
                                         | 
                                         | PUMP = 0
                                         |  (command pump off)
                                         |
                                         | VIP_CNT_EX = fpm_test_3
                                         |  (Set up for next process)

      END: FPM TEST 2 PROCESS











                                        31-34

                 ENGINE OFF SELF TEST, FUEL PUMP MONITOR TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIATARY & CONFIDENTIAL


      BEGIN: FPM TEST 3 PROCESS

      VIP_TIMER_EX > V_FPMDLY -----|     | (pass code 542 test)
       (time delay)                |AND -| VIP_CNT_EX = fpm_test_3+1
                                   |     |  (next test)
      FPM = 0 ---------------------|     |
       (indicates pump off)              |
                                         | --- ELSE ---
      VIP_TIMER_EX > V_FPMDLY -----|     |  
       (time delay)                |AND -| SET CODE_542 = 1           
                                   |     |  (fail test)              
      FPM = 1 ---------------------|     |                            
       (indicates pump on)               | VIP_CNT_EX = fpm_test_3+1 
                                         |  (next test)               

                                 END: FPM TEST 3 PROCESS












































                                        31-35

                 ENGINE OFF SELF TEST, KAM QUALIFICATION TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 KAM QUALIFICATION TEST


      PROCESS
                            STRATEGY MODULE: VO_KAMQUAL_COM1


                             PERFORMED EACH BACKGROUND LOOP


      KAMQA = 10101010 BINARY ----------|     
                                        |     
      KAMQB = 11000110 BINARY ----------|AND -| Set KAMOK = 1
                                        |     | Assume KAM data is valid
      KAMQC = 01110101 BINARY ----------|     | All strategy references
                                              |  to KAM will use RAM data
                                              |
                                              | --- ELSE ---
                                              |
                                              | Clear KAMOK = 0 
                                              | Set VIP_KAM = 1
                                              | Assume KAM data is bad
                                              | Initialize all KAM 
                                              |  locations used in the 
                                              |  strategy
                                              | Write the special binary
                                              |  patterns to KAM:
                                              |    KAMQA = 10101010 BINARY
                                              |    KAMQB = 11000110 BINARY
                                              |    KAMQC = 01110101 BINARY
                                              | Substitute the KAM initial
                                              |  values for all strategy
                                              |  references to KAM
                                              |  (NOTE: VIP_KAM initialized to 0
                                              |   on power-up)

























                                        31-36

                    ENGINE OFF SELF TEST, OUTPUT TEST MODE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    OUTPUT TEST MODE


      OVERVIEW

      In this mode, normal outputs, EDF or HEDF  can  be  turned  on/off  based  on
      operator requests.



                               NORMAL OUTPUTS ON/OFF LOGIC


      Move throttle part mid-range, then release to turn on/off normal outputs.



                                    EDF ON/OFF LOGIC


      With STO high, move throttle  past  mid-range  and  hold  until  Code  10  is
      displayed  on  Star  Tester (approx.  10 sec.), then release throttle to turn
      "on" EDF and normal outputs.   To  turn  "off"  outputs  move  throttle  past
      mid-range and then release.



                                    HEDF ON/OFF LOGIC


      With STO high, move throttle past mid-range and hold until Code 10  and  then
      Code 20 is displayed on Star Tester (approx.  15 sec.), then release throttle
      to run "on" HEDF and normal outputs.  To turn  "off"  outputs  move  throttle
      past mid-range and then release.



      DEFINITIONS

      INPUTS

      Registers:

       -  ITP = Instantaneous throttle angle A/D counts.

       -  OUTTMR = VIP utility timer (engine  off  self  test  output  state  test,
          engine running self test TP adj.  cont T_STRT test).

       -  VIP_TIMER_EX = VIP state timer.

      Bit Flags:

       -  REQFLG = Low speed output requested.

       -  EDF = Dual speed fan control.





                                        31-37

                    ENGINE OFF SELF TEST, OUTPUT TEST MODE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  EDFHP = Fan hardware present switch.

       -  HEDFHP = Two speed fan output present.

       -  VHFNTM = Minimum time to hold down TP to enable  high  fan  output  test,
          seconds.

       -  VLFNTM = Minimum time to hold down TP to  enable  low  fan  output  test,
          seconds.

       -  VTAP5 = Upper limit of TP for output test units are counts.

       -  VTAP6 = Lower limit of TP for output test units are counts.



      OUTPUT

      Registers:

       -  OUTTMR = See above.

       -  VIP_TIMER_EX = See above.

      Bit Flags:

       -  EDF = See above.

       -  HEDF = Dual speed fan high speed control.

       -  REQFLG = See above.

       -  VHFNON = VIP flag for high speed fan output test.

       -  VHLNON = VIP flag for low speed fan output test.























                                        31-38

                    ENGINE OFF SELF TEST, OUTPUT TEST MODE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: VO_OTM_CB_COM1


                                     NORMAL OUTPUTS


                                   STO
                                   SS1
                                   SS2
                                   ACR
                                   EVR
                                   LUS/MLUS
                                   CANP
                                   ISC
                                   AM1/SWC
                                   AM2











































                                        31-39

                    ENGINE OFF SELF TEST, OUTPUT TEST MODE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            For Application with EDF or HEDF


      1. RESET OUTTMR & VIP TIMER  2. CLEAR VLFNON & VHFN ON
         PRIOR TO ENTRY


        -----           /--------\ YES      -----
      ( ENTER )------->/ARE CODES \------>( EXIT  )
        -----         /  BEING     \        -----
                      \  OUTPUTTED?/
                       \          /
                        \--------/
           |<---------------| NO
           v
       /--------\ NO        /--------\ NO        /--------\ NO
      / ITP >    \-------->/IS REQFLG \-------->/IS OUTTMR \----->|
      \ VTAP5    /  ^  ^   \  SET ?   /   ^     \=> 10 MIN /      |
       \--------/   |  |    \--------/    |      \--------/       |
           |YES     | (B)       | YES     |          | YES        |
       !-------!    |       /--------\NO  |          |            |
       !. SET  !    |      / ITP <=   \---|          |            |
       !REQFLG !    |      \  VTAP6   /              |            |
       !-------!    |       \--------/               |            |
           |        |           |YES                 v            |
           v        |           |               !----------!      |
       /-------\YES |           v               !TURN ALL  !      |
      /ARE OUT- \---|       /--------\YES       !ACTUATORS !      |
      \PUTS ON? /          /ARE OUT-  \-------->!"OFF" IN- !      |
       \-------/           \PUTS ON?  /         !CLUDING   !      |
           | NO             \--------/          !EDF & HEDF!      |
           v                    |NO             !----------!      |
          (A)                   |                    |            |
                                v                    |            |
           !---------!   YES/--------\               |            |
           !TURN "ON"!<----/IS "VLFN  \              |            |
           !  EDF    !     \ON"FLG SET/              |            |
           !---------!      \--------/               |            |
               |                |NO                  |            |
               |--------------->|                    |            |
           !---------!   YES/--------\               |            |
           !TURN "ON"!<----/IS "VHFN  \              |            |
           ! HEDF    !     \ON"FLG SET/              |            |
           !---------!      \--------/               |            |
               |--------------->|NO                  v            |
                        !---------------!     !-------------!     |
                        !TURN "ON"      !---->!.CLEAR VLFNON!     |
                        !REGULAR OUTPUTS!     !VHFNON&REQFLG!     |
                        !---------------!     !.SET OUTTMR=0!     |
                                              !-------------!     |
                                                     |            |
              -----        !-----------------!       v            |
            ( EXIT  )<-----!SET VIP_TIMER_EX !<-------------------|
              -----        ! = 0             !
                           !-----------------!





                                        31-40

                    ENGINE OFF SELF TEST, OUTPUT TEST MODE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            For Application with EDF or HEDF


                    (A)
                     |
                     v
             !--------------------!
             !ALLOW VIP_TIMER_EX  !
             !   TO RUN           !
             !--------------------!
                     |
                /--------\ NO
               /IS HEDFHP \-----------|
               \    =1 ?  /           |
                \--------/            |      /--------\ NO
                     | YES            |---->/IS EDFHP  \----->(B)
                     v                |     \   =1?    /
              /-------------\NO       |      \--------/
             /IS VIP_TIMER_EX\--------|          | YES
             \   > VHFNTM    /                   v
              \-------------/             /-------------\NO
                     |YES                /IS VIP_TIMER_EX\---------|
                     v                   \   > VLFNTM    /         |
                /---------\NO             \-------------/          |
               /IS "VHFNON"\---------|           |YES              |
               \   =0?     /         |           v                 |
                \---------/          |       /--------\NO          |
                     |YES            |      /IS VLFNON \---------->|
                     v               |      \   =0 ?   /           |
            !-----------------!      |       \--------/            |
            !.SET "VHFNON"=1  !      |           |YES              |
            !.SET "VLFNON"=0  !----->|           v                 |
            !OUTPUT CODE 20   !      |    !--------------!         |
            !-----------------!      |    !.SET VLFNON=1 !-------->|
                                     |    !OUTPUT CODE 10!         |
                                     |    !--------------!         |
                                     v                             v
                                   ------                       ------
                                 (  EXIT  )                   (  EXIT  )
                                   ------                       ------




















                                        31-41

                    ENGINE OFF SELF TEST, OUTPUT TEST MODE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL






























































                                        31-42












                                      CHAPTER 32

                               ENGINE RUNNING SEQUENCE

















































                                         32-1

         ENGINE RUNNING SEQUENCE, ENGINE RUNNING SELF TEST STRUCTURE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           ENGINE RUNNING SELF TEST STRUCTURE


      PROCESS
                            STRATEGY MODULE: VR_ERTS_CB_COM1


                      -----------
                     (    ENTER    )
                       -----------
                           |
                 !---------------------!
                 !   ENGINE-RUNNING    !
                 ! TEST INITIALIZATION !
                 !---------------------!
                           |
                      /-----------\
                     /GENERIC IDLE \
                     \SPEED CONTROL/
                      \-----------/
                           |  
                    /--------------\
                   /HIGH RPM ISC    \
                   \     TEST       /
                    \--------------/
                           |
                      /-----------\
                     / MAF SENSOR  \
                     \    TEST     /
                      \-----------/
                           |
                     /-------------\
                    /OVERDRIVE CANC \
                   / SWITCH CIRCUIT  \
                   \       TEST      /
                    \               /
                     \-------------/
                           |
                    /---------------\     
                   /    A/D  AND     \
                   \  SWITCH TESTS   / 
                    \---------------/
                           |
                   /-----------------\     
                  /   EGO SWITCHING   \
                  \       TEST        /     
                   \-----------------/     
                           |
                    /----------------\
                   /  THERMACTOR AIR  \
                   \      TEST        /
                    \----------------/
                           |
                     /-------------\
                    /SPARK CONTROL  \
                    \   TEST        /
                     \-------------/
                           |
                          (A)

                                         32-2

         ENGINE RUNNING SEQUENCE, ENGINE RUNNING SELF TEST STRUCTURE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                          (A)
                           |
                      /---------\     
                     /   EGR     \
                     \   TEST    /
                      \---------/
                           |
                      /---------\
                     / LOW RPM   \
                     \ ISC TEST  /
                      \---------/
                           |        
                     /----------\
                    /    GOOSE   \             
                    \    TEST    /             
                     \----------/              
                           |                   
                  !--------------------!       
                  ! SEND SERVICE CODES !
                  !--------------------!
                           |                                  
                   !-------------------!
                   !   2 MINUTE DELAY  ! *
                   ! FOR TIMING CHECK  !
                   !                   !
                   ! CYLINDER BALANCE  ! *
                   !      TEST         !
                   !                   !
                   ! THROTTLE PLATE    ! *
                   !  ADJUST MODE      !
                   !-------------------!          
                           |                      
                      /---------\      ----       
                     /  WIGGLE   \--->(EXIT)      
                     \   TEST    /     ----       
                      \---------/                 


      The Cylinder Balance Test and Throttle Plate Adjust Mode Entry  is  dependent
      upon  operator  action  as  described  in  it's documentation unit.  They are
      entered from the 2-minute delay for timing check.  The Cylinder Balance  Test
      always  returns  to  complete  the  entire  2-minute  delay for timing check.
      However, the Throttle Plate Adjust exits directly to the Wiggle Test.

















                                         32-3

           ENGINE RUNNING SELF TEST, EGOBAR FILTER AND STATE FLAGS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              EGOBAR FILTER AND STATE FLAGS


      DEFINITIONS

      INPUTS

      Registers:

       -  DCLST_START = DCL signal to start self-test.

       -  EGOBAR1 = Filtered EGO used in VIP.

       -  EGOBAR2 = Filtered EGO used in VIP.

       -  FPM = Fuel Pump Monitor.

       -  IEGO1 = EGO-1 channel.

       -  IEGO2 = EGO-2 channel.

      Bit Flags:

       -  PUMP = Fuel pump mode fit flag; 1-> enable.

      Calibration Constants:

       -  VTCEGO = EGOBAR time constant.



      OUTPUTS

      Registers:

       -  EGOBAR1 = See above.

       -  EGOBAR2 = See above.

       -  EGOSTE1 = Filtered EGO state 1.

       -  EGOSTE2 = Filtered EGO state 2.


















                                         32-4

           ENGINE RUNNING SELF TEST, EGOBAR FILTER AND STATE FLAGS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: VR_EGOBAR_COM2


      unconditionally ------------------------| EGOBAR1 = ROLAV(IEGO1,VTCEGO)


      DCLST_START = 0 ------------------------| switchpoint = 427
                                              |
                                              | --- ELSE ---
                                              |
                                              | switchpoint = 855


      EGOBAR1 <= switchpoint -----------------| EGOSTE1 = 0
                                              |
                                              | --- ELSE ---
                                              |
                                              | EGOSTE1 = 1


      FPM = 0 --------------------------|
                                        |AND -| Set Code 543
      PUMP = 1 -------------------------|     | Clear Code 136
                                              | Clear Code 137
                                              |
                                              | --- ELSE ---
                                              |
      FPM = 0 --------------------------------| Clear Code 136
                                              | Clear Code 137


      FPM = 1 --------------------------------| EGOBAR2 = ROLAV(IEGO2,VTCEGO)


      FPM = 1 --------------------------|
                                        |AND -| EGOSTE2 = 0
      EGOBAR2 <= 855 -------------------|     |
                                              | --- ELSE ---
                                              |
      FPM = 1 --------------------------------| EGOSTE2 = 1



















                                         32-5

             ENGINE RUNNING SELF TEST, DELAY LOGIC CLARIFICATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                DELAY LOGIC CLARIFICATION


      PROCESS
                           STRATEGY MODULE: VR_DELAYLOGIC_COM1


      Delay VDLY(x) means:


                               !----------!
                               !   SET    !
                               ! VIPTMR=0 !
                               !----------!
                                     |
                                     |<-------------|
                                     v              |
                                /---------\    YES  | 
                               / VIPTMR <  \--------|
                               \ VDLY(x) ? /
                                \---------/       
                                     |  NO
                                     |
                                     v
                                  CONTINUE


      NOTE: "RESTART VIPTMR" means "SET VIPTMR = 0".
































                                         32-6

           ENGINE RUNNING SELF TEST, ENGINE RUNNING INITIALIZATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              ENGINE RUNNING INITIALIZATION


      OVERVIEW

      The Engine  Running  Initialization  sets  specific  inputs  and  outputs  as
      required  in  preparation  for  performing the Engine Running On-demand Test.
      The inputs and outputs are determined based on the Strategy application.

      Part of the initialization process is to check the FMEM failure flags for any
      hard  fault  present.  These flags would have been set from the VIP EXECUTIVE
      when a 2 second time period is allowed to  do  Continuous  testing  prior  to
      entry into the Engine Running Test.

      If any of the failure flags are present, the test is aborted  and  a  service
      code  998  and  the  corresponding  fault  code(s)  will  be output on STO as
      notification that a hard fault currently exists.



      DEFINITIONS

      INPUTS

      Registers:

       -  VIP_CNT_EX = Vip State Counter.

       -  VIP_TIMER_EX = VIP state timer.

      Bit Flags:

       -  AFMFLG = ACT FMEM Flag.

       -  CFMFLG = ECT failure mode (FMEM) flag.

       -  DIS_FMFLG = Dual Plug DIS FMEM flag.

       -  MFMFLG = MAP/MAF FMEM flag.

       -  TFMFLG = TP FMEM flag.

      Calibration Constants:

       -  VIPSPK = Vip Spark advance units are Deg.

       -  VISCN = Extended idle CLISC desired RPM.

       -  VRLAM = Rich LAMBDA for EGO test units are LAMBDAS.



      OUTPUTS

      Registers:

       -  QD_FUEL = Quick & Dirty fuel  compensation  puddle  mass  transfer  rate,
          lbs./sec.


                                         32-7

           ENGINE RUNNING SELF TEST, ENGINE RUNNING INITIALIZATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  TFC_HR = Fuel mass per injection event, from Transient Fuel  Compensation
          and/or Quick and Dirty fuel compensation, lbm/pip.

       -  EGRDC = EGR duty cycle.

       -  KAMREF = Adaptive Fuel correction.

       -  KAMRF1 = EGO-1 Adaptive fuel correction.

       -  KAMRF2 = EGO-2 Adaptive fuel correction.

       -  LAMBSE = Closed loop desired equivalence rate.

       -  LAMBSE1 = LAMBDA equivalence ratio (EGO-1).

       -  LAMBSE2 = LAMBDA equivalence ratio (EGO-2).

       -  PURGDC = Purge duty cycle (FN600 output).

       -  RVIPRPM = RVIP "desired RPM" to CLISCP.

       -  SAF = Spark advance Bin 2.

       -  VCUTOUT = Number of injector cutout during Cylinder Bal Test.

       -  VIP_CNT_EX = Vip state counter.

      Bit Flags:

       -  EFFLG1 = (background) Equilibrium Fuel FLaG; controls  initialization  of
          AISF; 1 -> AISF has been initialized.

       -  QD_READY = Foreground Quick and Dirty fuel compensation enable flag; 1 ->
          enabled.

       -  TFC_FG_EN = ForeGround Transient Fuel  Compensation  ENable  flag;  1  ->
          ENabled.

       -  AM1 = Air Management #1 solenoid.

       -  AM2 = Air Management #2 = TAD.

       -  BRK_NEVER_OFF = Brake always on during RVIP test.

       -  BRK_NEVER_ON = Brake not applied during RVIP test.

       -  ERROR 543 = Fuel pump fault in running VIP; Impacts EGO2.

       -  TCS_OPEN = Transmission control switch set to open.

       -  TCS_SHORT = Transmission control switch set to close.

       -  RVIP_CYL_BAL = Indicates running VIP cylinder.

       -  RVIP_CYL_QUIT = 1 -> cyl balance test aborted.

       -  STI_RESET = 1 -> Operator requested Throttle Plate Adjust Mode.



                                         32-8

           ENGINE RUNNING SELF TEST, ENGINE RUNNING INITIALIZATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  VRUN_ISCFLG = RVIP idle speed control flag.

       -  V_MODE_SETUP = 1 -> Use throttle mode VIP constants.

























































                                         32-9

           ENGINE RUNNING SELF TEST, ENGINE RUNNING INITIALIZATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: VR_RUN_INIT_COM18


      ALWAYS -------------------------| Turn STO off
      (When in VR_RUN_INIT)           | CODE COUNT = 0
                                      | RVIP_CYL_BAL = 0
                                      | RVIP_CYL_QUIT = 0
                                      | VCUTOUT = 0
                                      | STI_RESET = 0
                                      | V_MODE_SETUP = 0

















































                                        32-10

           ENGINE RUNNING SELF TEST, ENGINE RUNNING INITIALIZATION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       FMEM FAULT PRESENT AND INITIALIZATION LOGIC


      AFMFLG = 1 ---------------|
                                |     
      CFMFLG = 1 ---------------|      
                                |OR --| ; Output code 998 and the corresponding
      TFMFLG = 1 ---------------|     | ; FMEM fault code(s), then, repeat the 
                                |     | ; sequence.
      MFMFLG = 1 ---------------|     |
                                      | ; Exit Engine Running Self Test
                                      | ; sequence
                                      |
                                      | --- ELSE ---
                                      |
                                      | VRUN_ISCFLG = 1
                                      | LAMBSE1 = VRLAM
                                      | LAMBSE2 = VRLAM
                                      | RVIPRPM = VISCN
                                      | KNOCK_ENABLED = 0
                                      | ; by this point, all background transient
                                      | ; fuel and all background 'QD' fuel
                                      | ; software must no longer be able to
                                      | ; execute during E.R. VIP.
                                      | EFFLG1 = 0
                                      | ; the next four parameters
                                      | ; must be cleared in the order shown.
                                      | QD_READY = 0
                                      | ; disable fg QD.
                                      | TFC_FG_EN = 0
                                      | ; disable fg TFC.
                                      | QD_FUEL = 0
                                      | TFC_HR = 0
                                      |
                                      | KAMRF1 = 1.0
                                      | KAMRF2 = 1.0
                                      | ERROR_543 = 0
                                      | SAF = VIPSPK
                                      | EGRDC = 0
                                      | ACR = 1
                                      | PURGDC = 0
                                      | BRAKE_NEVER_ON = 1
                                      | BRAKE_NEVER_OFF = 1
                                      | TCS_OPEN = 0
                                      | TCS_SHORT = 0
                                      | VIP_TIMER_EX = 0
                                      | VIP_CNT_EX = VR_OUT_ENGCYL           


      The following logic outputs engine ID pulses on  STO.   ID  code  equals  1/2
      number of cylinders in engine.


      always -------------------------| Output ENGCYL pulses for the
      (When in VR_OUT_ENGCYL)         | engine I.D. code on STO.
                                      | ; I.D. code = # of CYL/2
                                      | Wait until pulsing is complete.
                                      | VIP_TIMER_EX = 0
                                      | VIP_CNT_EX = VR_HICAM_ISC

                                        32-11

             ENGINE-RUNNING SELF TEST, GENERIC IDLE SPEED CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                        GENERIC IDLE SPEED CONTROL FOR SELF TEST


      NOTE:  THE FOLLOWING OVERVIEW COVERS BOTH OF THE ISC TEST MODULES.

      OVERVIEW

      The ISC is an adaptive air bypass system designed to regulate the duty  cycle
      to  the  air  bypass  solenoid  to obtain a desired engine speed for all idle
      operating conditions and provide a  dashpot  action.   Predicted  airflow  is
      adaptively corrected to minimize the impact of hardware variability.

      The Self Test ISC tests are designed to check control of the ISC system at an
      extended RPM or high cam condition, as well as a low RPM relative to, but not
      equal to,  normal  base  idle.   Self  Test  uses  the  base  control  system
      algorithm,  but  substitutes  certain  calibration  parameters  in  order  to
      maintain Self Test commonality  among  the  many  engine  calibrations.   The
      following documentation describes the Self Test portion of ISC.  See the Base
      Strategy chapter on Generic ISC for detailed information.

      When in Closed Loop ISC and the engine RPM is oscillating, VIP is locked  out
      of  RPM  control  until  either  the  engine speed is within the control band
      (DSDRPM+RPMCTR) or a settling time (SETTMR > V_SETLNG_TM) has  expired.   See
      Base Strategy ISC MODE SELECT LOGIC.

      The flag which was set in the VIP executive to trigger  the  substitution  of
      specific  parameters  in  the  Base Strategy is VRUN_ISCFLG, therefore:  When
      VRUN_ISCFLG = 1


      DEFINITIONS

      INPUTS

      Registers:

       -  DISABLE_ISC = Disable CLISC in PART of RVIP.

       -  RVIPRPM = RVIP desired RPM to CLISCP.

       -  VRUN_ISCFLG = RVIP idle speed control flag.

      Calibration Constants:

       -  ISLBND = Band for idle speed control ramp down time.

       -  ISUBND = Extended idle test control band limit.

       -  NGOOSE = Desired RPM for idle speed control ramp.

       -  VISCN = Extended idle CLISC desired RPM.

       -  VISDL1 = Extended idle delay time.

       -  VISDL3 = Idle speed control ramp down test delay.

       -  VSIBRM = VIP- maximum allowed value for IPSI.



                                        32-12

             ENGINE-RUNNING SELF TEST, GENERIC IDLE SPEED CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  VSIBRN = VIP- minimum allowed value for IPSI.

       -  VTCDSN = Time constant for ISC ramp down.

       -  VTCN = Time constant for engine RPM.

       -  VTC_OVER = VIP idle air response time constant.

       -  VTC_UNDER = VIP idle air response time constant.

       -  V_879_MULT = VIP multiplier for daspot function.

       -  V_SETLNG_TM = VIP delay to enter ISC ROM control.



      OUTPUTS

      Registers:

       -  DISABLE_ISC = See above.

       -  VRUN_ISCFLG = See above.





































                                        32-13

             ENGINE-RUNNING SELF TEST, GENERIC IDLE SPEED CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: VR_GENISC_COM6


        DSDRPM CALCULATION     
        ------------------
                                  DSDRPM = DESNLO
               (seed the filter)

                                  DSDRPM = ROLAV(RVIPRPM, VTCDSN)

        DSDRPM is always filtered during ENGINE RUNNING VIP.

        NOTE: During vip ISC adaptive learning is disabled (HCAMFG = 1)


        DESMAF CALCULATION         
        ------------------
              DESMAF = DESMAF_PRE(predicted air flow) +IPSIBR +DASPOT 
                       +ISCKAMn

              DESMAF_PRE = FN875N * FN1861(ECT,ATMR3) [+ACPPM] [+PSPPM]
                           [+EDFPPM] [+HWPPM] [+HEDFPPM]

                 FN875N is the air flow required, closed throttle,
                 in neutral, for the desired engine speed.

                 Where applicable [ACPPM],[PSPPM],[EDFPPM], [HWPPM] 
                 and [HEDFPPM] represent the airflow needed in 
                 DESMAF_PRE for the increased load due to rpm adders.
                 

              IPSIBR adjusts DESMAF for load changes.  Changes in IPSIBR
              results in corresponding change to bypass valve duty cycle.

                      IPSIBR = IPSIBR + ISCPSI (clipped to VSIBRN as a
                               minimum and VSIBRM as a maximum.)

              where ISCPSI is calculated as:

              ISCPSI = RPMERR_A * (DESMAF_PRE/DSDRPM) * BG_TIMER/VTC_UNDER
                                                        OR VTC_OVER   

              RPMERR_A > OR = 0 ------| use VTC_UNDER
              (RPM error for air flow | ----else----
               correction)            | use VTC_over

              RPMERR_A = ROLAV(RPMERR,TCBPA) where RPMERR = DSDRPM - N

              DASPOT is the air flow to provide a preposition at open
              throttle positions (APT = 0 OR 1).  It is bled off after
              a closed throttle transition allowing a smooth transition
              to RPM control.







                                        32-14

             ENGINE-RUNNING SELF TEST, GENERIC IDLE SPEED CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  DASPOT DECREMENT

               DASPOT =  DASPOT -(FN879(DASPOT)* V_879_MULT)


              ISCKAMn = Adaptive correction for load condition, where n
              is the value of ISFLAG (see base strategy for load state
              definition).


        ISCDTY CALCULATION
        ------------------

              The mass air flow through the ISC actuator (DEBYMA) is calcu-
              lated as the mass air flow at idle (DESMAF), less the flow
              through the throttle plate, corrected for altitude (FN890).

              ISCDTY = FN8000(DEBYMA,PERLOAD_ISC) *  IDCMUL + IDCOFS

                                           29.92
              DEBYMA = (DESMAF - ITHBMA) * ----- - FN890(BP)
                                            BP

                      ITHBMA is the air flow through the throttle plate
                      at idle.

              FN8000 is the characterization table for the ISC actuator
              with: x input = FN061(DEBYMA) and y input = FN060
              (PERLOAD_ISC).

              IDCMUL is a multiplier for development, usually set to 1.

              IDCOFS is the ISCDTY adder for development, usually set to 0.



























                                        32-15

             ENGINE-RUNNING SELF TEST, GENERIC IDLE SPEED CONTROL - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Generic ISC normally  uses  feedback  spark  for  control  of  load  changes.
      However,  in  RUNNING  VIP the spark timing is fixed.  This is the reason for
      the independent VIP ISC calibration parameters.

      The VIP calibration parameters which are substituted are:

                BASE               VIP
                ----               ---

             FN879                 V_879_MULT

             PSIBRM                VSIBRM

             PSIBRN                VSIBRN

             SETLNG_TM             V_SETLNG_TM

             TCDESN                VTCDSN

             TCN                   VTCN

             TC_OVER               VTC_OVER

             TC_UNDER              VTC_UNDER    




































                                        32-16

          ENGINE RUNNING SELF TEST, TRANSMISSION CONTROL SWITCH TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                        TRANSMISSION CONTROL SWITCH CIRCUIT TEST

      OVERVIEW

      The KOER Transmission Control Switch ("TCS") Circuit Test monitors  the  ITCS
      register for the states corresponding respectively to the open and the closed
      states of the Overdrive Cancel switch.  If, during the  course  of  the  KOER
      test  sequence,  both  states  are  not recognized, a code 632 will be output
      during KOER code output.  This test requires  the  operator  to  depress  the
      Overdrive Cancel switch anytime during the KOER test sequence.

      DEFINITIONS

      Bit Flags:

       -  ITCS = Input register that indicates the current state of the  TCS  input
          pin  of  the  LSI;  1  -> HIGH voltage on the TCS LSI input pin; 0 -> LOW
          voltage on the pin.

       -  TCS_OPEN = 1 -> the LOW voltage state of the TCS input pin on the LSI has
          been recognized during the KOER TCS test.

       -  TCS_SHORT = 1 -> the HIGH voltage state of the TCS input pin on  the  LSI
          has been recognized during the KOER TCS test.

      Calibration Constants:

       -  V_TCS_ENA = TCS circuit test enable switch; 1 -> enable.



      PROCESS
                              STRATEGY MODULE: VR_TCS_COM2


      During KOER initialization, set code 632, TCS_SHORT = 0, TCS_OPEN = 0.

      The following is performed in SEQUENCE_2, VIP_BRAKE_TEST (once per background
      loop):


      ITCS = 1 -------------------------------| TCS_SHORT = 1
                                              |
                                              | --- ELSE ---
                                              |
                                              | TCS_OPEN = 1


      The following is performed in SEQUENCE_2, VIP_EXECUTIVE:


      V_TCS_ENA = 0 --------------------|
                                        |OR --| Clear Code 632
      TCS_OPEN = 1 ---------------|     |
                                  |AND -|
      TCS_SHORT = 1 --------------|




                                        32-17

                 ENGINE RUNNING SELF TEST, HIGH RPM ISC TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    HIGH RPM ISC TEST


      PROCESS
                           STRATEGY MODULE: VR_HICAM_ISC_COM2


      VIP_TIMER_EX < VISDL1 ------------------| RETURN
                                              |  (delay VISDL1 seconds
                                              |   for engine to stabilize
                                              |   at DSDRPM)
                                              |
                                              | --- ELSE --- 
                                              |
      |DSDRPM - NBAR| > ISUBND ---------------| Set CODE_412
                                              |  (RPM out of range)
                                              | DISABLE_ISC = 1
                                              |  (freeze ISC duty cycle)
                                              | VIP_TIMER_EX = 0
                                              | VIP_CNT_EX = VR_SENSOR_CHK
                                              |
                                              | --- ELSE ---
                                              |
                                              | DISABLE_ISC = 1
                                              | VIP_TIMER_EX = 0
                                              | VIP_CNT_EX = VR_SENSOR_CHK 


































                                        32-18

                  ENGINE RUNNING SELF TEST, ECT SENSOR TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                     ECT SENSOR TEST


      PROCESS
                              STRATEGY MODULE: VR_ECT_COM1


                           -----------
                         (    ENTER    )
                           -----------
                                |
                                v
                           /---------\
                          /   VIECT3  \   NO       !---------!
                         /   >=IECT>=  \---------->! CODE 116!
                         \    VIECT4 ? /           !---------!
                          \           /                 |
                           \---------/                  |
                                |  YES                  |
                                |<----------------------|
                                v
                           ----------
                         (     EXIT   )
                           ----------




































                                        32-19

              ENGINE RUNNING SELF TEST, THROTTLE POSITION SENSOR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                THROTTLE POSITION SENSOR


      PROCESS
                              STRATEGY MODULE: VR_TPS_COM1


                        -----------
                      (    ENTER    )
                        -----------
                             |
                             v
                        /---------\                          
                       /   VTAP3   \   NO      !---------!   
                      /  <=ITP <=   \--------->! CODE 121!
                      \    VTAP4 ?  /          !---------!
                       \           /                |
                        \---------/                 |
                             |  YES                 |
                             |<---------------------|
                             v
                        -----------
                      (     EXIT    )
                        -----------




































                                        32-20

           ENGINE RUNNING SELF TEST, AIR CHARGE TEMPERATURE SENSOR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              AIR CHARGE TEMPERATURE SENSOR


      PROCESS
                              STRATEGY MODULE: VR_ACT_COM1


                           -----------
                         (    ENTER    )
                           -----------
                                |
                                v
                           /---------\
                          /   VIACT3  \    NO      !---------!
                         /  >=IACT >=  \---------->! CODE 114!
                         \    VIACT4 ? /           !---------!
                          \           /                 |
                           \---------/                  |
                                |  YES                  |
                                |<----------------------|
                                v
                           -----------
                         (     EXIT    )
                           -----------




































                                        32-21

                 ENGINE RUNNING SELF TEST, BRAKE ON/OFF TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    BRAKE ON/OFF TEST


      OVERVIEW

      The BRAKE ON/OFF test checks the integrity of the brake switch input  to  the
      processor.   This  test  requires the operator to depress the brake pedal any
      time during the ENGINE RUNNING test, from the I.D.  code to the service  code
      output,  (including the GOOSE test).  This will toggle the input, BIFLG, when
      the switch opens and closes.  The BIFLG check is done every  background  pass
      and the service code setup is done just prior to the code output routine.



      DEFINITIONS

      Bit Flags:

       -  BIFLG = Brake input signal.

       -  BRK_NEVER_OFF = Brake always on during test; initialized to 1  in  engine
          running initialization.

       -  BRK_NEVER_ON = Brake not applied during test; initialized to 1 in  engine
          running initialization.

      Calibration Constants:

       -  BIHP = Base strategy hardware present indicator; 1 = switch present.

       -  VBISW = Brake input test enable switch; 1 = enable test.





























                                        32-22

                 ENGINE RUNNING SELF TEST, BRAKE ON/OFF TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                              STRATEGY MODULE: VR_BOO_COM1


                                       BIFLG CHECK


      BIFLG = 1 ------------------------------| BRK_NEVER_ON = 0
       (brake on, Boo high)                   |
                                              |  --- ELSE ---
                                              | 
                                              | BRK_NEVER_OFF = 0



                                   SERVICE CODE SET-UP


      VBISW = 1 ------------------|
                                  |AND -| 
      BIHP = 1 -------------------|     |     
                                        |AND -| SET CODE 536
      BRK_NEVER_ON = 1 -----------|     |
                                  |OR --|
      BRK_NEVER_OFF = 1 ----------|



































                                        32-23

                ENGINE RUNNING SELF TEST, MASS AIRFLOW SENSOR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   MASS AIRFLOW SENSOR


      PROCESS
                              STRATEGY MODULE: VR_MAF_COM2



                         --------
                       (  ENTER   )
                         --------
                            |
                            v
                  YES/--------------\
            |-------/ KOER CODE 412  \
            |       \    PRESENT     /
            |        \--------------/
            |               |NO
            |               v                     !----------!
            |       /----------------\  YES       !  Output  !
            |      /IMAF => VMAFR2 OR \---------->! code 159 !
            |      \   IMAF <= VMAFR1 /           !----------!
            |       \----------------/                  | 
            |               | NO                        |
            |               |                           v
            |-------------->|                !---------------------!
                            |                ! EXIT ENGINE RUNNING !
                            |                !     SELF TEST       !
                            |                !---------------------!
                            v
                         --------
                       (  EXIT    )
                         --------



























                                        32-24

        ENGINE RUNNING SELF TEST, TRANSMISSION OIL TEMPERATURE SENSOR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           TRANSMISSION OIL TEMPERATURE SENSOR


      PROCESS
                              STRATEGY MODULE: VR_TOT_COM1


                           -----------
                         (    ENTER    )
                           -----------
                                |
                                v
                           /---------\
                          /   VITOT3  \   NO       !---------!
                         /  >=ITOT >=  \---------->! CODE 636!
                         \    VITOT4 ? /           !---------!
                          \           /                 |
                           \---------/                  |
                                |  YES                  |
                                |<----------------------|
                                v
                           ----------
                         (     EXIT   )
                           ----------




































                                        32-25

                 ENGINE RUNNING SELF TEST, EGO SWITCHING TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               EGO SWITCHING TEST (STEREO)


      PROCESS
                              STRATEGY MODULE: VR_EGO_COM5


        ---------       /-------\YES      ----             
      (   ENTER   )--->/V_EGOHP=0\---->(  EXIT  )                        
        ---------      \         /        ----
            |NO         \-------/
            |
            |            !-------------!
            v            !IF NUMEGO=1  !      !----------------!
        /---------\ YES  !SET CODE 173&!      !.RAMP FUEL LEAN !
       / NBAR >=   \---->!IF NUMEGO=2  !----->!   VIPLR1       !
       \  VNMIN    /     !SET CODES 173!  ^   !.CLIP AT LEAN   !
        \---------/      !& 137        !  |   !  LIMIT LEQV    !
            |            !-------------!  |           |
            |                             |           v
            |                             |     /----------\ YES
            |                             |    / EGOSTE1=1  \------|
            |                             |    \  LEAN ?    /      |
            |                             |     \----------/       |
            v                             |           | NO         v
        --------------    !----------!    |           |       !---------! 
      (GO TO GOOSE TEST)  ! CONTINUE !--->|           |<------!  CLEAR  !
        --------------    ! RAMPING  !                |       ! CODE 173!
                          !----------!                v       !---------!
                               ^                /----------\YES
                               |               / EGOSTE2=1  \------|
                               |               \  LEAN ?    /      |
                               |                \----------/       |
                               |                      | NO         v
                               |                      |       !---------!
                               | NO                   |<------!  CLEAR  !
                               |                      |       ! CODE 137!
                               |                      v       !---------!
                         /----------\       YES /----------\
                        / VIPTMR >=  \<--------/IS 173 OR   \
                        \ VIPTM3     /         \ 137 PRESENT/ 
                         \----------/           \----------/
                               |YES                   | NO
                               v                      v
                             (AA)                    (A)


      NOTE:  If FPM becomes zero during the EGO switching test, codes 136  and  137
      will be cleared and a Code 543 will be output.











                                        32-26

                 ENGINE RUNNING SELF TEST, EGO SWITCHING TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                !-----------------!
                !IF NUMEGO=1 SET  ! 
                !CODE 172 & IF    !       !------------------!
      (A)------>!NUMEGO=2 THEN SET!       !.RAMP FUEL RICH AT!
                !CODES 172 & 136  !------>!    VIPRR1        !
                !START VIPTMR     !   ^   !.CLIP AT RICH     !
                !-----------------!   |   !    LIMIT REQV    !
                                      |   !------------------!
                                      |            |
                      |--------------------------->|
                      |               ^            v
                      |               |      /---------\ YES
                      |               |     / EGOSTE1=0 \-------|
                      |               |     \   RICH ?  /       |
                      |               |      \---------/        |
                      |               |            | NO         |
                      |        !-----------!       |            v
                      |        !CONTINUE   !       |      !----------!             
                      |        !RAMPING    !       |<-----!CLEAR CODE!
                      |        !ZERO VIPTMR!       |      !    172   !
                      |        !-----------!       |      !----------!
                      |               ^            v
                      |               |      /---------\ YES
                      |               |     / EGOSTE2=0 \-------|
                      |               |     \   RICH ?  /       |
                      |               |      \---------/        |
                      |               |            |NO    !----------!
                      |               |            |<-----!CLEAR CODE!
                      |               |N0          |      !    136   !
                      |NO             |            |      !----------!
                /---------\ YES /---------\ YES/----------\       
               / VIPTMR>=  \<--/IS LAMBSE  \<-/IS 172 OR   \
               \ VIPTM4    /   \ =< REQV ? /  \136 PRESENT?/
                \---------/     \---------/    \----------/
                      |YES                         | NO
                      v                            v
              !-------------!                -----------------
      (AA)--->!STORE CODE(s)!              ( EXIT TO NEXT TEST )
              !WHICH DO NOT !                -----------------
              !    CLEAR    !
              !-------------!
                      |
              !--------------!         ------------------
              !SET LAMBSE1 & !------->(EXIT TO SPARK TEST ) 
              !LAMBSE2=VRLAM !         ------------------
              !--------------!














                                        32-27

                ENGINE RUNNING SELF TEST, THERMACTOR AIR TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: VR_THERMAIR_COM3


                                   THERMACTOR AIR TEST

            (C)                 (C)
             ^                   ^
             |NO                 |NO
         /--------\      YES /--------\             -----
        /VAIRFL=1  \<-------/THRMHP=1? \<--------(  ENTER  )
        \          /        \          /            -----
         \--------/          \--------/
             | YES
        !------------!
        !IF NUMEGO=1 !
        !SET CODE 311!
        !& IF NUMEGO=!
        !2 THEN      !     !----------!      !-------------!
        !SET CODES   !---->!RAMP FUEL !----->!AIR UPSTREAM,!
        !311 & 314   !     !RICH AT   !      !AM1 & AM2    !
        !START VIPTMR!     !VIPRR1    !      !    BOTH ON  !
        !------------!     !FOR VDLY1 !      !-------------!
                           !----------!             |
                            |---------------------->|
                            |                  /---------\ YES
                            |                 /EGOSTE1=1  \------|
                            |                 \ (LEAN) ?  /      |
                            |                  \---------/       |
                            |                       | NO         v
                            |                       |       !---------!
                            |                       |<------!  CLEAR  !
                            |                       |       ! CODE 311!
                            |                       |       !---------!
                            |                       v
                            |                  /---------\ YES
                            |                 /EGOSTE2=1  \----->| 
                            |                 \  (LEAN) ? /      |
                            |                  \---------/       |
                            | NO                    | NO         v
                            |                       |       !---------!
                            |                       |<------!  CLEAR  !
                            |                       |       ! CODE 314!
                            |                       v       !---------!
                       /---------\    YES     /----------\
                      /VIPTMR >   \<---------/IS 311 OR   \
                      \ VIPTM2    /          \314  PRESENT/
                       \---------/            \----------/
                            | YES                   | NO
                            v                       v
                    !-----------------!           ( B )
                    !STORE CODES WHICH! 
                    ! DID NOT CLEAR   !
                    !-----------------!
                            |
                            v
                          ( C )



                                        32-28

                ENGINE RUNNING SELF TEST, THERMACTOR AIR TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                        ( B )
                          |
                          v
              !-----------------------!
              !.AIR DOWN STREAM,AM1   !
              !   ON, AM2 OFF         !            /--------\NO
              !. START VIPTMR         !           / VTABFL=1 \--->(C)
              !-----------------------! |-------->\          /          
                          |             |          \--------/
         |--------------->|             |               |
         |                v             |               v
         |           /---------\        |       !---------------!
         |          /EGOSTE1 OR \ YES   |       !AIR UPSTREAM & !     
         |         /EGOSTE2 = 0  \-------       !BYPASSED,AM1   !
         |         \  (RICH) ?   /      ^       !   OFF, AM2 ON !
         |          \           /       |       !DELAY VDLY2    !
         |           \---------/        |       !    SEC        !
         |                | NO          |       !---------------!
         |                |        !--------!           |
         |                |        !SET CODE!           |
         |                |        !  312   !           |
         |                |        !--------!           |
         |                |             |               v
         |     NO   /----------\ YES    |         /-----------\ YES
         |<--------/ VIPTMR >=  \------>|        / EGOSTE1 OR  \----|
                   \ VATMR2     /                \ EGOSTE2 =0 ?/    |
                    \----------/                  \-----------/     |
                                                        |           |
                                                        v           |
                (C)                                !----------!     |
                 |                                 !SET CODE  !---->|
                 v                                 !   313    !     v
         !----------------------!                  !----------!   ( C)
         !SET LAMBSE1 & LAMBSE2=!      -----------
         !VRLAM BOTH AM1 & AM2  !---->(GO TO SPARK )
         !        OFF           !       CNTRL TEST
         !----------------------!      -----------























                                        32-29

                 ENGINE RUNNING SELF TEST, SPARK CONTROL TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   SPARK CONTROL TEST


      OVERVIEW

      The Spark Control Test provides verification that the  EEC  spark  output  is
      actually controlling by means of using the engine RPM as feedback while other
      parameters are held constant.  The ISC duty cycle is held constant to prevent
      engine  speed  correction and LAMBSE is fixed to VRLAM as the spark output is
      ramped from an initial starting point to a final spark and the  engine  speed
      (NBAR)  input is compared to a calibrated delta for the expected change.  The
      delta distance to be ramped divided by the spark ramp  rate  plus  the  delay
      times  result  in total test time required when there is a failure.  However,
      when the delta is reached, indicating the system  is  controlling,  the  test
      time is less.



      DEFINITIONS

      Registers:

       -  NSAV = Temporary register to store current NBAR.

       -  NBAR = Filtered engine speed input used to compare to NSAV.

       -  SAF = Final spark advance output to spark controller.

       -  VIP_TIMER_EX = VIP execution time; 1/8 second later, also used as  medium
          for ramping spark advance.

      Calibration Constants:

       -  V_SPK_ENABL = Calibration switch to enable/disable test,  flag  bit  0  =
          bypass test; 1 = do test.

       -  V_SPK_INIT = Initial spark starting point to begin ramping from.

       -  VDLY8 = Delay time used before beginning spark  ramp  or  used  as  delay
          before entering the EGR TEST when the SPARK TEST is bypassed.

       -  V_SPK_RATE = Spark ramp rate required during test.

       -  V_SPK_FINAL = Final spark for spark ramp to end.

       -  VIPSPK = Normal VIP spark (30 deg's BTC).

       -  VSPTDL = Delay time before exiting test after setting SAF = VIPSPK.

       -  CODE 213 = Service code which indicated spark control fault present.










                                        32-30

                 ENGINE RUNNING SELF TEST, SPARK CONTROL TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: VR_SPARK_COM1


                     ----- 
                   ( ENTER )
                     -----
                       |
                       v
                  /-----------\NO   !-------!     -----
                 / V_SPK_ENABL \--->! DELAY !-->(  EXIT )
                 \     = 1     /    ! VDLY8 !     -----
                  \-----------/     !-------!
                       |YES
                       v
                !---------------!
                ! SAF=V_SPK_INIT!
                !---------------!
                       |
                 !------------!
                 ! DELAY VDLY8!
                 !------------!
                       | 
              !-----------------!
              !   . NSAV = NBAR !  
              !   . VIPTMR = 0  !
              !-----------------!
                       |
      |--------------->|
      |       !-----------------!
      |       !SAV=V_SPK_INIT - !
      |       !V_SPK_RATE*VIPTMR!
      |       !-----------------!
      |                |
      |        /--------------\YES
      |       /ABS(NSAV-NBAR)  \------------------------|
      |       \   => VSPRPM    /                        |
      |        \--------------/                         |        
      |                |NO                              |
      |    YES  /------------\NO    !---------!         |
      |--------/    SAF >     \---->!  SET    !         |
               \ V_SPK_FINAL  /     !CODE 213 !         |
                \------------/      !---------!         |
                                         |              |
                                         v              |
                       |--------------------------------|
                       v
                  !----------!
                  !SAF=VIPSPK!
                  !----------!
                       |
                !--------------!         -----
                ! DELAY VSPTDL !-----> ( EXIT  )    
                !--------------!         ----- 






                                        32-31

       ENGINE RUNNING SELF TEST, EXHAUST GAS RE-CIRCULATION SYSTEM TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                   EXHAUST GAS RE-CIRCULATION SYSTEM TEST (PFE/SONIC)


      DEFINITIONS

      Registers:

       -  EGRDC = EGR duty cycle.

       -  FIEPT = VIP EPT filter.

       -  IEGR = EGR sensor input.

       -  IEVPSV = Register to save initial value of IEVP for KOER self test (Sonic
          EGR) (Double define with FEPTSV).

       -  VIP_TIMER_EX = VIP state timer.

      Calibration Constants:

       -  EPTMAX = Maximum EPT reading (open), counts.

       -  EPTMIN = Minimum EPT reading (short), counts.

       -  EVPMAX = Maximum EVP reading (open), counts.

       -  EVPMIN = Minimum EVP reading (short), counts.

       -  PFEHP = Switch to select EGR strategy; 0 -> use sonic strategy, 1 ->  use
          PFE strategy, 2 -> do not use any EGR.

       -  VDCMAX = Maximum EVP DC to stop EGR test, percent.

       -  VDCMIN = Minimum EVP DC at start of EGR TEST, percent.

       -  VEGRAT = EVP DC rate to open EGR valve, percent.

       -  VEPTRH = EPT high limit (valve closed), counts.

       -  VEPTRL = FIEPT low limit (valve closed), counts.

       -  VEVPDL = RVIP EGR valve position change, counts.

       -  VEVPHL = EVP high limit (valve closed), counts; end of essential ordering
          of constants.

       -  VEVPLL = EVP low limit (valve closed), counts.













                                        32-32

       ENGINE RUNNING SELF TEST, EXHAUST GAS RE-CIRCULATION SYSTEM TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: VR_DELPFE_SON_EGR_COM1


        ---------
      (  ENTER    )
        ---------
            |
            v
        /---------\  YES       -----------             
       /  PFEHP = 2\-------->(    EXIT     )
       \           /           -----------
        \---------/                              
             | NO                               
             v                               (SONIC)
        /---------\                        
       /  PFEHP    \  NO                   
       \     =1    /----------------------------| 
        \---------/                             |      
             |  YES                             |     
             |                                  |  
             |                                  v                          
             v                             /---------\ YES  !---------!    
       /---------\                        /  IEGR <=  \---->! CODE 327!--->|
      / FIEPT <=  \YES  !--------!        \  EVPMIN ? /     !---------!    |
      \ EPTMIN    /---->!CODE 327!----|    \---------/                     |
       \---------/      !--------!    |         | NO                       |
            |                         |         v                          |
            | NO                      |    /---------\ YES  !---------!    |
            v                         |   /  IEGR >=  \---->! CODE 337!--->|
       /---------\                    |   \  EVPMAX ? /     !---------!    |
      / FIEPT >=  \ YES !--------!    |    \---------/                     |
      \ EPTMAX    /---->!CODE 337!--->|         | NO                       |
       \---------/      !--------!    |         v                          |
            |                         |    /---------\ YES  !---------!    |
            | NO                      |   /  IEGR <   \---->! CODE 328!--->|
            v                         |   \  VEVPLL ? /     !---------!    |
       /---------\                    |    \---------/                     |
      / FIEPT <   \ YES !--------!    |         | NO                       |
      \ VEPTRL    /---->!CODE 326!--->|         v                          |
       \---------/      !--------!    |    /---------\ YES  !---------!    |
            |                         |   /  IEGR >   \---->! CODE 334!--->|
            | NO                      |   \  VEVPHL ? /     !---------!    |
            v                         |    \---------/                     |
       /---------\                    |         | NO                       |
      / FIEPT >   \ YES !--------!    |         v                          |
      \ VEPTRH    /---->!CODE 336!--->|       ( B )          ( EXIT )<-----|
       \---------/      !--------!    |                       
            |                         |
            | NO                      |
            v                         v
           (A)                    ---------
                                (   EXIT    )
                                  ---------






                                        32-33

       ENGINE RUNNING SELF TEST, EXHAUST GAS RE-CIRCULATION SYSTEM TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                   (A)                               
                    |                                  
                    v                                  
        !----------------------!            
        !.VIP_TIMER_EX := 0    !            
        !.FEPTSV := FIEPT      !            
        !----------------------!            
                    |                                  
      |------------>|                    
      |             v                    
      |   !----------------------!       
      |   !.RAMP EGRDC AT VEGRAT !       
      |   ! START FROM VDCMIN TO !       
      |   ! VDCMAX.              !       
      |   !.EGRDC := VDCMIN +    !       
      |   ! VEGRAT * VIP_TIMER_EX!       
      |   !----------------------!       
      |             |                    
      |             |                    
      |             v                    
      |        /---------\               
      |       /|FEPTSV-   \  YES 
      |      /  FIEPT| >   \----|
      |      \  VEPTDL ?   /    |
      |       \           /     |
      |        \---------/      |       
      |             | NO        |
      |             v           |
      |    NO  /---------\      |
      |-------/ EGRDC >=  \     |
              \ VDCMAX ?  /     |
               \---------/      |
                    | YES       |
                    |           |
                    |           |
                    v           |
               !----------!     |
               ! CODE 332 !     |
               !----------!     |
                    |           |
                    |           |
                    |<----------|
                    v                         
            !------------------!                 
            !.EGRDC := 0       !                 
            !.VIP_TIMER_EX := 0!                 
            !------------------!                 
                    |                         
                    |
                    v
                ---------
              (   EXIT    )
                ---------







                                        32-34

       ENGINE RUNNING SELF TEST, EXHAUST GAS RE-CIRCULATION SYSTEM TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                         (SONIC)


                  ( B )
                    |
                    v
         !---------------------!
         !VIP_TIMER_EX := 0    !
         !IEVPSV := IEGR       !
         !---------------------!
                    |                                  
      |------------>|
      |             v
      |   !----------------------!
      |   !.RAMP EGRDC AT VEGRAT !
      |   ! START FROM VDCMIN TO !       
      |   ! VDCMAX.              !       
      |   !.EGRDC=VDCMIN +       !       
      |   ! VEGRAT * VIP_TIMER_EX!       
      |   !----------------------!       
      |             |                    
      |             v         
      |       /-----------\   YES     
      |      / IEGR-IEVPSV \----|
      |      \ > VEVPDL ?  /    |
      |       \-----------/     |
      |             | NO        |
      |             |           |
      |             v           |
      |    NO  /---------\      |
      |-------/ EGRDC >=  \     |
              \  VDCMAX   /     |
               \---------/      |
                    |           |
                    | YES       |
                    v           |
               !----------!     |
               ! CODE 332 !     |
               !----------!     |
                    |           |
                    |<----------|
                    v                         
            !------------------!                 
            !EGRDC := 0        !                 
            !VIP_TIMER_EX := 0 !                 
            !------------------!                 
                    |
                    v
                ---------
              (   EXIT    )
                --------- 









                                        32-35

                  ENGINE RUNNING SELF TEST, LOW RPM ISC TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    LOW RPM ISC TEST


      PROCESS
                            STRATEGY MODULE: VR_LOW_ISC_COM4


      VIP_CNT_EX = VR_LOW_ISC ----------------| DISABLE_ISC = 0
                                              | RVIPRPM = NGOOSE
                                              | VIP_TIMER_EX = 0
                                              |  (continue with ISC test)


      VIP_TIMER_EX < VISDL3 ------------------| RETURN
                                              |  (delay VISDL3 seconds
                                              |   for engine to stabilize
                                              |   at DSDRPM)
                                              |
                                              | --- ELSE ---
                                              |
      |DSDRPM - NBAR| > ISLBND ---------------| Set CODE_411
                                              |  (RPM out of range)
                                              | VIP_TIMER_EX = 0
                                              | VIP_CNT_EX = VR_GOOSE
                                              |
                                              | --- ELSE ---
                                              |
                                              | VIP_TIMER_EX = 0
                                              | VIP_CNT_EX = VR_GOOSE































                                        32-36

                     ENGINE RUNNING SELF TEST, GOOSE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                      GOOSE TEST, MASS AIR, STEREO EGO, WITH KNOCK


      OVERVIEW

      Test operator is directed to "Goose" throttle as soon as he sees single pulse
      (readout  of  "10" on Star unit) so that dynamic response can be tested.  The
      test will end when one of the following conditions are met:

           a)  VGOOS_DELAY seconds elapse after the RPM response occurs
           b)  Time in test exceeds VGOOSEC seconds.


      In the second case, a code 538 will be sent to indicate that the test was not
      performed.


      DEFINITIONS

      Registers:

       -  IMAF = MAF sensor.

       -  MAFSAV = Temporary register to store current IMAF value.

       -  NSAV = Temporary register to store current NBAR.

       -  TPSAV = Temporary register to store current TP value.

       -  VIP_TIMER_EX = VIP state timer.

      Bit flags:

       -  VF1  =  Flag  indicating  VIPTMR  has  been  loaded  with  a  new   value
          (VGOOS_DELAY), based on RPM response.

       -  CODE_129 = Flag bit for error code 129, to be  cleared  during  the  test
          when the MAF indicates an increase beyond a calibrated target.

       -  CODE_167 = Flag bit for error code 167, to be  cleared  during  the  test
          when the TP indicates movement beyond a calibrated target.

       -  CODE_225 = Flag bit for error code 225, to be cleared during the test  if
          knock is present.

       -  CODE_538 = Flag bit for error code 538, to be  cleared  during  the  test
          when the RPM has increased above a calibrated target.













                                        32-37

                     ENGINE RUNNING SELF TEST, GOOSE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  V_GOOS_DELAY = Time elapse after RPM change to exit test.

       -  V_GOOSEC = Time in GOOSE test loop.

       -  V_GOOSMAF = MAF change required in GOOSE test.

       -  V_GOOSN = RPM change to determine GOOSE test has been performed.

       -  V_GOOSPK = Spark advance for knock sensing; limited  by  normal  strategy
          parameter SPUCLP.

       -  V_GOOSTP = TP change required in GOOSE test.

       -  V_GOOSW = Flag to enter GOOSE test; 1 -> enter, 0 -> bypass.

       -  V_KNK_DLY = Delay time for GOOSE initialization.

       -  V_KNK_FUEL = New LAMBSE setting for engine knock enhancement.

       -  V_KTS = Knock threshold pulse time.

       -  VRLAM = Normal LAMBSE setting from EGO switching test.



      CALIBRATION INFORMATION

      Typical values are provided for the following calibration constants:

       -  V_GOOS_DELAY = min.  1.5 sec's.

       -  V_GOOSEC = 15 sec's.

       -  V_GOOSMAF = 50 cnts.

       -  V_GOOSN = 400 RPM.

       -  V_GOOSPK = 50 deg's BTC.

       -  V_GOOSTP = 200 cnts.

       -  VIPSPK = 30 deg's BTC.

       -  V_KNK_DLY = 1 sec.

       -  V_KNK_FUEL = 0.8 LAMBDAS.

       -  V_KTS = 25 ticks.

       -  VRLAM = 0.9 LAMBDAS.








                                        32-38

                     ENGINE RUNNING SELF TEST, GOOSE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: VR_GOOSE_MA_COM5


                    -------
                  (  ENTER  )
                    -------
                       |
                       v
                  /---------\  YES
                 /V_GOOSW=0 ?\-------->( EXIT )
                 \           /
                  \---------/ 
                       |  NO
                       |               !--------------------------!
                       v               ! .SET SAF TO V_GOOSPK     !
                  /---------\   YES    ! .SET LAMBSE1 = LAMBSE2 = !
                 / KIHP=1 ?  \-------->!   V_KNK_FUEL             !
                 \           /         ! WINDOW_DELTA = V_KTS     ! 
                  \---------/          ! (OVERIDE NORMAL STRATEGY !
                       |               !  KTS PULSE WIDTH)        !
                       |  NO           !--------------------------!
                       |                             |
                       |                     !----------------!
                       |                     !DELAY V_KNK_DLY !
                       |                     !----------------!
                       |                             |
                       |<----------------------------|
                       v                        
               !----------------------------!
               ! .SET CODE_225,CODE_129,    !
               !    CODE_167 & CODE_538     !
               ! .SAVE CURRENT NBAR-->NSAV  !
               ! .SAVE CURRENT TP-->TPSAV   !
               ! .SAVE CURRENT IMAF->MAFSAV !
               !  VIP_KNOCK = 0             !
               ! (begin sensing for knock)  !
               !----------------------------!
                       |
                       v
               !----------------------------!
               ! SEND SINGLE 0.5 SEC PULSE  !
               ! ON STO                     !
               !----------------------------!
                       |
                       v
                  !--------------!
                  !VIP_TIMER_EX=0!
                  !--------------!
                     ( G1 )          










                                        32-39

                     ENGINE RUNNING SELF TEST, GOOSE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


               ( G1 )
      |--------->|
      |          v          /--------------\                        
      |     /---------\YES /VIP_KNOCK = 1   \YES !---------------!
      |    / KIHP=1 ?  \-->\(KNOCK DETECTED)?--->! CLEAR CODE_225!
      |    \           /    \---------------/    !---------------!
      |     \---------/            |                    |
      |          |  NO             |  NO                |
      |          |<-------------------------------------|
      |          v
      |     /---------\  
      |    /           \  YES   !---------------!
      |   / (N-NSAV) => \------>!CLEAR CODE_538 !
      |   \  V_GOOSN ?  /       !---------------!
      |    \           /                |
      |     \---------/                 |
      |          |  NO                  |
      |          |<---------------------|
      |          v
      |     /---------\
      |    /    ABS    \  YES   !----------------!
      |   /  (TP-TPSAV) \------>! CLEAR CODE_167 !
      |   \     =>      /       !----------------!
      |    \ V_GOOSTP ?/                  |
      |     \---------/                   |
      |          |  NO                    |
      |          |<-----------------------|
      |          v
      |     /---------\
      |    /           \  YES   !----------------!
      |   /IMAF-MAFSAV \------->! CLEAR CODE_129 !
      |   \=>V_GOOSMAF ?/       !----------------!
      |    \           /                  |
      |     \---------/                   |
      |          |  NO                    |
      |          |<-----------------------|
      |          v
      |     /---------\
      |    /    IS     \  YES /---------\ YES !--------------!
      |   / CODE_538    \--->/    VF1    \--->! .SET VF1     !
      |   \   CLEAR ?   /    \  CLEAR ?  /    !VIP_TIMER_EX= !
      |    \           /      \---------/     ! (V_GOOSEC-   !
      |     \---------/            |  NO      ! V_GOOS_DELAY)!
      |          |  NO             v          !--------------!         
      |          |<----------------------------------|
      |          v
      | NO/---------\YES  /--------\YES  !-------------------!      
      |--/VIP_TIMER_EX-->/KIHP = 1 ?\--->!.SET LAMBSE1 =     !--|
         \>V_GOOSEC ?/   \          /    !LAMBSE2 = VRLAM    !  |
          \---------/     \--------/     !-------------------!  |
                              |NO                               |
                              |------------->(G2)<--------------|








                                        32-40

                     ENGINE RUNNING SELF TEST, GOOSE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                              ( G2 )
                                 |
                                 |
                                 v
                          YES/--------\
                |-----------/ CODE_ 538\
                v           \   SET ?  /     
      !------------------!   \--------/      
      !CALL SETUP_CODE   !       |
      !                  !       |
      !ENTER ERROR INTO  !       v
      !SERVICE CODE TABLE!   /--------\YES  !------------------!
      !------------------!  / CODE_129 \--->!CALL SETUP_CODE   !
                |           \   SET ?  /    !ENTER ERROR INTO  !
                |            \--------/     !SERVICE CODE TABLE!
                |                |NO        !------------------!
                |                |<------------------|
                |                v
                |            /--------\YES  !------------------!
                |           / CODE_167 \--->!CALL SETUP_CODE   !
                |           \  SET ?   /    !ENTER ERROR INTO  !
                |            \--------/     !SERVICE CODE TABLE!
                |                |NO        !------------------!
                |                |<------------------|
                |                v
                |         NO/----------\
                |<---------/IS KIHP = 1 \
                |          \     ?      /
                |           \----------/
                |                |YES
                |                |
                |            /--------\YES  !------------------!
                |           / CODE_225 \--->!CALL SETUP_CODE   !
                |           \  SET ?   /    !ENTER ERROR INTO  !
                |            \--------/     !SERVICE CODE TABLE!
                |                |NO        !------------------!
                |--------------->|<------------------|
                                 v
                           !------------!
                           !SAF = VIPSPK!
                           !------------!
                                 |
                                 v         
                          !------------------!
                          ! GO TO SERVICE    !
                          ! OUTPUT ROUTINE   !
                          !                  !
                          ! SEND ALL SERVICE !
                          ! CODES NOT CLEARED!
                          !------------------! 










                                        32-41

            ENGINE RUNNING SELF TEST, 2 MINUTE DELAY TIMING CHECK - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               2 MINUTE DELAY/TIMING CHECK


      OVERVIEW

      The following logic is processed each  background  loop  during  the  2  min.
      timing  check  to  determine  whether  the  operator is requesting either the
      Cylinder Balance Test or the TP Adjust Mode, or  using  the  time  period  to
      actually  check  the  ignition  timing.   Once  the  Cylinder Balance test is
      selected, depending on the state of the flag VCBFLG, the test will be allowed
      once  or  repetitively.  The Cylinder Balance Test always returns to complete
      the 2 minute timing check.  The TP Adjust Mode  is  selected  by  ungrounding
      STI.  This causes the logic to go to a STI_RESET TIMER which allows 4 seconds
      to recognize the STI grounded to actually enter the TP Adjust Mode.   Exiting
      from the TP Adjust Mode either allows re-entry into the Mode, exiting Running
      VIP, or going into WIGGLE mode.



      PROCESS
                           STRATEGY MODULE: VR_TIMING_CHK_COM1


      2 min. timing check in process ---|
                                        |
      VCBFLG <> 0 ----------------------|
                                        |AND -| Do: Cylinder Balance Test
      Cylinder Balance Test requested --|     |
                                        |     |
      STIFLG = 1 -----------------------|     |
                                              | --- ELSE ---
      2 min. timing check in process ---|     |
                                        |     | 
      V_MODE_OPT = 1 -------------------|AND -| Check for TP ADJUST MODE ENTRY
                                        |     | STI_RESET = 1
      STIFLG = 0 -----------------------|     | VIP_TIMER_EX = 0 
                                              | Do: STI_RESET_TIMER LOGIC
                                              |
                                              | --- ELSE ---
      2 min. timing check expired ------|     |
                                        |AND -| Do: VIP_REINIT
      STIFLG = 0 -----------------------|     |
                                              | --- ELSE ---
                                              |
                                              | Continue 2 min. 
                                              |  timing check














                                        32-42

               ENGINE RUNNING SELF TEST, CYLINDER BALANCE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  CYLINDER BALANCE TEST


      OVERVIEW

      The purpose of the cylinder balance test is to assist the mechanic in finding
      a  weak  or non-contributing cylinder.  The test is entered by depressing and
      releasing the throttle within two minutes after the engine running  self-test
      codes have been output.

      Once the test is entered the engine is allowed  to  stabilize  and  the  idle
      speed  control  duty  cycle  is fixed.  Engine RPM is measured and stored for
      later use.  Next the fuel is shut off to injector number 8 (6 or 4, depending
      on  engine).   After  a  brief  stabilization  period the engine RPM is again
      measured and stored.  The injector is turned on  again  and  the  process  is
      repeated  for each of the injectors down to injector one.  At this point, the
      maximum RPM drop is selected from the table of RPM drops for  each  cylinder.
      The RPM drops for each cylinder are now checked to see that they are at least
      a calibrateable % of the maximum.


                            Example:  150 RPM x 65% = 98 RPM


      If all cylinders drop at least this amount, then a code  90  is  output  then
      repeated.

      If a cylinder did not drop at least this amount,  then  the  cylinder  number
      would be output.  For example, 30 for cylinder number 3.  This indicates that
      cylinder number 3 is either weak or noncontributing.

      The test can now be repeated if the throttle is depressed and released within
      two minutes of the code being output.  This time the test checks to determine
      if the RPM drop is at least a lower calibrateable % of the maximum.


                            Example:  150 RPM x 43% = 65 RPM


      If all the RPM drops are greater than 65 RPM, then a code 90 is  output.   If
      cylinder  number  3  had  failed,  the first pass and passed the second, then
      cylinder number 3 is considered to be weak.  It may be that the  injector  is
      partially  plugged.  If cylinder number 3 again failed, then code 30 would be
      output again.

      The test can be repeated  a  third  time  by  depressing  and  releasing  the
      throttle.   The  test  now  checks to determine if the RPM drop is at least a
      lower yet calibrateable % of the maximum.


                            Example:  150 RPM x 20% = 30 RPM









                                        32-43

               ENGINE RUNNING SELF TEST, CYLINDER BALANCE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      If all the RPM drops are greater than 30 RPM then a code 90 is output.

      If cylinder number 3 had failed  the  first  and  second  pass,  then  it  is
      considered to be a very weak cylinder.

      If cylinder number 3 failed the third pass then a code  30  would  be  output
      again.    In   this   case,   cylinder   number  3  is  considered  to  be  a
      non-contributing cylinder.  It may be that the injector harness connector  is
      not plugged in.



















































                                        32-44

               ENGINE RUNNING SELF TEST, CYLINDER BALANCE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: VR_CYLBAL_COM6


                         -------
                       (  ENTER  )
                         -------
                            |
                            v
                    !----------------!
                    !SET ABORT FLG =0! THE ABORT FLG IS DEFINED IN
                    !RVIP_CYL_BAL    ! SOFTWARE AS RVIP_CYL_QUIT
                    !----------------! THE FLAGS RVIPCYL_QUIT AND
                            |          RVIP_CYL_BAL ARE CLEARED
                           (A)         DURING RUNNING INITIALIZATION.
                            |
                            v
                   1=  /---------\
                 |<---/ ABORT FLG \
                 |    \   STATE   /
                 |     \---------/
                 |          | =0
                 |          v
        -----    | 0=  /--------\ > 0 
      ( EXIT  )<------/ VCBFLG   \--------->|
        -----    |    \  STATE   /          |
                 |     \--------/           |
                 |          | < 0           |
                 |          v               |------>(B)
                 | 1=  /-------\ = 0        |
                 |<---/RVIP-CYL-\---------->|
                      \   BAL   /
                       \-------/


      NOTE:

       -  Normal engine  cooling  strategy  is  used  throughout  cylinder  balance
          testing, except as shown in logic diagrams.





















                                        32-45

               ENGINE RUNNING SELF TEST, CYLINDER BALANCE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                          (B)
                           |
                           v
                    !-------------!
                    !.SET TPOFLG=0!
                    !.RESET VIPTMR!
                    !-------------!
                           |
                           |<------------------------|
             (APT NOT= -1) v                         |
      !------!  OPEN   /--------\                    |
      ! SET  !<-------/   TP     \                   |
      !TPOFLG!        \  STATE   /                   |
      ! = 1  !         \--------/                    |
      !------!             | CLOSE (APT = -1)        |
         |                 |                         |
         |---------------->|                         |
                           v                         |
                        /-------\ = 0                | < 2 MIN 
                       / TPOFLG  \------|            |
                       \  STATE  /      |       /--------\ 
                        \-------/       |----->/   TMR    \
                           | = 1        |      \  STATE   /
                           |            |       \--------/
                           v            |            | > 2 MIN
                 CLOSE /-------\ OPEN   |            |
             |<-------/   TP    \-------|            |
             |        \  STATE  /                    v
          NO |         \-------/                 ----------
             |                                (   EXIT TO   )
             v                                  WIGGLE TEST
            (C)                                  ----------




























                                        32-46

               ENGINE RUNNING SELF TEST, CYLINDER BALANCE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


            (C)
             |
             v                            
      !------------------!  |----------------------------------------|       
      !SET: SPARK ADVANCE!  |                                        | YES
      !        =VIPSPK   !  |                                        |
      !  I = ENGCYL*2    !  v   /-------\Closed  /-------\ NO    /-------\
      !LAMBSE1=LAMBSE2=  !---->/   TP    \----->/ ACCS=1 &\---->/ VIPTMR  \
      !         VLAMCB   !     \  STATE  /      \ HPWAC=0 /     \< VCBDLY / 
      !DSDRPM(RVIPRPM)=  !      \-------/        \-------/       \-------/
      !         VISCN1   !         |Open             |YES            |
      !CLEAR ALL FAULT   !         |                 |               |
      !         CODES    !         v                 v               |
      !OPEN LOOP FUEL    !  !--------------!  !--------------!       |
      !------------------!  !.SET FAULT 538!  !.SET FAULT 539!       |
                            !--------------!  !--------------!       |
                                       |          |                  |
                                       v          v                  |
                                  !-------------------!              |
                                  !.SET ABORT FLAG = 1!              |
                                  !.TURN ON INJECTOR I!              |
                                  !-------------------!              |
                                            |                        |
                                            V                        |
                                           (E)                       |
                                                                     |
                                                                     |
                                                                     v
                                                            NO /-----------\
                                 |----------------------------/RVIP-CYL BAL \
                                 |                            \  = 0        /   
                                 |                             \-----------/    
                                 v                                   |YES
                        !----------------!                           |      
                        !SET(VCBPCT-THIS-!                           v
                        !TIME)=(VCBPCT-  !                  !-----------------!
                        !THIS-TIME)+     !------|           !SET (VCBPCT-THIS-!
                        !VCBPAD  CLIP    !      |           !TIME) = VCBPCT   !
                        !TO VCBCLP       !      |           !-----------------!
                        !----------------!      |                    |
                                                |------------------->|
                                                                     |
                                                                     v
                                                                    (D)
















                                        32-47

               ENGINE RUNNING SELF TEST, CYLINDER BALANCE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  (D)
                                   |
                                   v
                             !-------------!
                             !RESET VIPTMR !
                             !-------------!
                                   |
                         !-------------------------!
                         !OPEN LOOP ISC CONSTANT   !
                         !DUTY CYCLE DO NOT USE    !
                         !FUEL OR SPARK FEEDBACK ON!
                         !RPM CONTROL              !
                         !-------------------------!
                            |       
                   ---------|<-----------------------|
                   |                                 |
                   v                                 | YES     !-----------!
               /-------\ CLOSE   /-------\ NO    /-------\NO   !   D0      !
              /   TP    \------>/ ACCS=1 &\---->/ VIPTMR< \--->!VCBHN(I)   !
              \  STATE  /       \ HPWAC=0 /     \ VISDL4  /    !CALCULATION!
               \-------/         \-------/       \-------/     !-----------!
                   | OPEN            | YES                          |
                   v                 v                              v
             !--------------!  !--------------!                !----------!      
             !.SET FAULT 538!  !.SET FAULT 539!                !   RESET  !
             !--------------!  !--------------!                !VIPTMR = 0!
                   |                 |                         !TURN OFF  !
                   |                 |                         !INJECTOR I!
                   |<----------------|                         ! = VCUTOFF!
                   |                                           !----------!
                   v                                                |<--------|
           !----------------!                                       v         |
           !.CLEAR FAULT    !          !--------------!   OPEN  /-------\     |
           ! CODES(s)       !<---------!.SET FAULT 538!<-------/   TP    \    |
           !.SET ABORT FLG  !          !--------------!        \  STATE  /    |
           !  = 1           !                                   \-------/     |
           ! TURN ON        !<---|                                  | CLOSED  |
           ! INJECTOR I     !    |                                  v         |
           !----------------!    |     !--------------!    YES  /-------\     |
                   |             |-----!.SET FAULT 539!<-------/ACCS=1 & \    |
                   v                   !--------------!        \ HPWAC=0 /    |
                  (F)                                           \-------/     |
                                                                    | NO      |
                                                                    v         |
                                   !-------------------!    NO  /-------\     |
                                   !DO VCBLN(I)        !<------/ VIPTMR< \----|
                YES /-----\        !                   !       \ VISDL5  / YES
           (D)<----/ I > 0 \<------!VCBDELTAN(I) =     !        \-------/
                   \       /       ! NSAV-UCBLN_TEMP   !
                    \-----/        !.TURN ON INJECTOR I!                   
                       | NO        !.SET I = I -1      !
                       v           !-------------------!
                      (E)







                                        32-48

               ENGINE RUNNING SELF TEST, CYLINDER BALANCE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                        (E)
                         |
                         |
                         v
         !----------------------------------------------!
         !. SET I = ENGCYL*2                            !
         !     NOTE: I RANGES FROM ENGCYL*2 TO 1        !
         !. LET LARGEST VCBDELTAN(I)=VCBDELTA           !
         !----------------------------------------------!
                         |
                         v
                  !------------------!
                  !. SET I = ENGCYL*2!
                  !------------------!
         |-------------->|
         |               v
         |     /----------------------------------------------\YES
         |    /VCBDELTAN(I) <= VCBDELTA [1-(VCBPCT-THIS-TIME)] \--|               
         |    \                                                /  |
         |     \----------------------------------------------/   |
         |            NO|                                         |
         |              |<----------------------|          |------|      
         |         !----------!                 |          v
         |         ! I = I-1  !                 |     !---------!
         |         !----------!                 |-----!SET CODE ! 
         |              |                             !   I0    !
         |       YES/---------\                       !---------!
         |---------/  I > 0    \
                   \           /
                    \---------/
                        |NO
                        v
                       (F)



























                                        32-49

               ENGINE RUNNING SELF TEST, CYLINDER BALANCE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 (F)
                                  |
                                  v
                      !----------------------------!
                      !SET: DSDRPM=NGOOSE          !
                      !     CLOSED IDLE SPD CONTROL!
                      !     LAMBSE1=LAMBSE2=VRLAM  !
                      !                            !
                      !----------------------------!
                                  |
                                  |--------------|
                                                 v
             !-------!    !---------! YES     /--------\ 
             !OUTPUT !<---!  DELAY  !<-------/ IS ANY   \
             ! CODES !    ! VCBTM3  !   ^   /   CODE     \
             !-------!    !---------!   |   \  PRESENT   /
                 |                      |    \          /
                 |                      |     \--------/
                 |                      |         | NO
                 |                      |         v 
                 |                      |     !--------!
                 |                      |-----!  SET   !
                 |                            !CODE 90 !
                 |                            !--------!
                 |
                 |
                 |
                 |
                 v
            !----------!
            !SET RVIP- !
            !CYL BAL = !--------->( A )
            !    1     !
            !----------! 


























                                        32-50

               ENGINE RUNNING SELF TEST, CYLINDER BALANCE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  VCBHN(I) CALCULATION


                   ------
                 ( ENTER  )      I = INJECTOR NO.
                   ------
                     |
                     v
             !------------------! 
             !.RESET VIPTMR     !
             !.CLEAR VCB-PIP-CNT!
             !.SAVE LAST PIPTIME!
             ! IN "VLPTM"       !
             !------------------!
                     |
                     |<-------------------------|
                     v                          |
             !------------------!               |
             !.WHEN PIPHIGH IN- !               |
             ! CREMENT          !               |
             !   VCB-PIP-CNT    !               |
             !------------------!               |
                     |                          |
                     |                          |
                     v                          |
               /-----------\ N0                 |
              /IS VIPTMR => \-------------------|
              \   VCBTM2    /
               \-----------/
                     | YES
                     v
          !----------------------------!
          !.CALCULATE CYL. BAL HIGH RPM!
          !                            !
          !  NSAV = VCB-PIP-CNT 120    !
          !         ----------- * ---  !
          !       (LAST PIPTIME-  NO.  !
          !        TIME - VLPTM   OF   !
          !                       CLY  !
          !----------------------------!
                     |
                !------------!       VCBHN(I) DISPLAY
                !VCBHN(I) =  !       ONLY REGISTERS
                !  NSAV      !
                !------------!
                     |
                     v
                   ------
                 ( EXIT   )
                   ------










                                        32-51

               ENGINE RUNNING SELF TEST, CYLINDER BALANCE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  VCBLN(I) CALCULATION


                   ------
                 ( ENTER  )
                   ------
                     |
                     v
             !------------------! 
             !.RESET VIPTMR     !
             !.CLEAR VCB-PIP-CNT!
             !.SAVE LAST PIPTIME!
             ! IN "VLPTM"       !
             !------------------!
                     |
                     |<-------------------------|
                     v                          |
             !------------------!               |
             !.WHEN PIPHIGH IN- !               |
             ! CREMENT          !               |
             !   VCB-PIP-CNT    !               |
             !------------------!               |
                     |                          |
                     |                          |
                     v                          |
               /-----------\ N0                 |
              /IS VIPTMR => \-------------------|
              \   VCBTM1    /
               \-----------/
                     | YES
                     v
          !----------------------------!
          !.CALCULATE CYL. BAL LOW RPM !
          !                            !
          ! UCBLN_TEMP= VCB-PIP-CNT 120!
          !         ----------- * ---  !
          !       (LAST PIPTIME-  NO.  !
          !        TIME - VLPTM   OF   !
          !                       CLY  !
          !----------------------------!
                     |
                !-----------!      VCBLN(I) DISPLAY
                !VCBLN(I) = !      ONLY REGISTERS
                !UCBLN_TEMP !
                !-----------!
                     |
                     v
                   ------
                 ( EXIT   )
                   ------










                                        32-52

               ENGINE RUNNING SELF TEST, CYLINDER BALANCE TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                      (PARAMETERS)


      PARAMETER                                      TYPICAL
        NAME                   DESCRIPTION           VALUE
      ------------------------------------------------------
       HPWAC       WAC HARDWARE PRESENT SWITCH          0
       VCBCLP      MAX. CLIP ON DROP REQ'D FOR CYL     .065
                     BALANCE TEST                    RPM/100
       VCBDLY      DELAY BEFORE STARTING CYL         22 SEC
                     BALANCE TEST
       VCBFLG      FLAG: 0=BYPASS TEST, -1 =
                     ALLOW TEST 1 = ALLOW MULTIPLE
                     TEST ENTRY
       VCBPAD      ADDED TO VCBPCT EA. REPEAT OF     .25
       VCBPCT      % DELTA RPM DROP REQ'D FOR        .30
                     CYL BALANCE TEST
       VCBTM1      TIME TO AVG. N, ALL INJECTORS ON    3 SEC
       VCBTM2      TIME TO AVG. N, ALL INJECTORS OFF   3 SEC
       VCBTM3      DELAY PRIOR TO OUTPUTTING VIP CODES 6 SEC
       VISCN1      DESIRED RPM TO DO CYL BAL TEST     1550 RPM
       VISDL4      DELAY PRIOR TO CYL BAL TEST         6 SEC
       VISDL5      TIME TO WAIT FOR RPM DROP           6 SEC
       VLAMCB      LAMBDA FOR CYL BALANCE TEST       .95 




































                                        32-53

           ENGINE RUNNING SELF TEST, THROTTLE PLATE ADJUSTMENT MODE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             THROTTLE PLATE ADJUSTMENT MODE


      OVERVIEW

      The THROTTLE ADJUST MODE allows checking and if necessary adjustment  of  the
      throttle  hard  set  or  other  means  of  changing  the air flow through the
      throttle body.  The Idle Speed Control System is  requested  to  achieve  the
      Actuator airflow which would, in combination with the throttle plate leakage,
      allow the correct engine speed at the given  desired  RPM.   Either  the  RPM
      range  error  (V_MODE_SEL  =  0)  or  the  actuator  duty  cycle  range error
      (V_MODE_SEL = 1 ) are indicated by a specific frequency output  on  the  STAR
      Tester.

      The spark control output is either fixed to base idle spark (V_MODE_SEL =  0)
      or  allows normal feedback control (V_MODE_SEL = 1) depending on which method
      of testing is requested.

      NOTE:  The base timing value and should be verified and reset as necessary to
      specification prior to determining accuracy of the idle test.

      The operator can enter the throttle adjust mode any time during the 2  minute
      timing  check by ungrounding and again grounding STI within a 4 second lapsed
      time (STI_RESET).

      STI_RESET is cleared on entry to Engine Running when VRUN_ISCFLG is set to 1.
      Exit  from  Engine  Running  Test  will  only be allowed when STI_RESET is 0.
      STI_RESET can only be set to 1 during the 2 minute timing  check.   See  exit
      logic  page  for  other  conditions which will cause exit from Engine Running
      Test.

      Once the mode  is  entered  the  preset  engine  conditions  are  allowed  to
      stabilize  for  a  calibrated  period  of time.  To signal that this time has
      elapsed and throttle adjustment may proceed, a separator pulse is  output  on
      Self  Test  Output (STO).  The MODE SET UP LOGIC can be exited by ungrounding
      the STI.

      NOTE:  Applications  which  have  electrodrive  fan  require  low  speed  fan
      operation during this mode.

      The VIP flag, RUNNING remain set ( = 1) during this mode.

      The STO is also used as feedback to the operator during the adjust mode.   If
      the  RPM  or  ISCDTY  is  within  the  range the STO will be "on" constantly,
      otherwise it will "flash" at a rate of 1 Hz when RPM is below  or  ISCDTY  is
      above the range or at a rate of 4 Hz when RPM is above or ISCDTY is below the
      range.  If at anytime during this mode the TP sensor goes out  of  range  the
      STO will flash at a rate of 8 Hz.

      The Adjustment Mode ends when a calibrated time  period  (V_MODE_END),  or  a
      maximum  of  10 minutes (600 seconds) is reached.  As long as the time period
      is less than (V_MODE_END) the mode can be re-entered by ungrounding  STI  and
      again  grounding STI within 4 seconds.  The re-entry point is at the MODE SET
      UP LOGIC where all the parameters are set up and the  STO  signals  that  the
      mode is entered.





                                        32-54

           ENGINE RUNNING SELF TEST, THROTTLE PLATE ADJUSTMENT MODE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  VIP_TIMER_EX = VIP execution time; timer (eighths of sec.).

       -  OUTTMR = VIP output test timer (seconds); revised  from  flag  driven  to
          free running timer.

      Bit Flags:

       -  DISABLE_ISC = Flag used  for  idle  fuel  modulation  determination  1  =
          disable, 0 = enable.

       -  OLFLG = Base Strategy flag which indicates type  of  fuel  control,  0  =
          closed loop control, 1 = open loop control.

       -  V_MODE_SETUP = Flag indicates entry in the  Throttle  Adjust  Mode,  1  =
          enabled.

       -  STIFLG = Self Test input which  indicates  VIP  testing  requested,  1  =
          tester input is grounded.

       -  STI_RESET = STI status flag during 2 minute timing check.  See  STI_RESET
          LOGIC and TIMER LOGIC within the process.

      Calibration Constants:

       -  VDLY_ENTER = Delay time to stabilize engine before sending pulse  on  STO
          which indicates adjust mode entered, base value = 4 seconds.

       -  V_ISCDTY_HI = Maximum ISC duty cycle allowed at idle RPM.

       -  V_ISCDTY_LO = Minimum ISC duty cycle allowed at idle RPM.

       -  V_KDNDT = VIP gain for idle fuel modulation, base value = 0.0005.

       -  V_MODE_SEL = Calibration flag which chooses whether to use RPM  error  or
          ISCDTY error during test mode, 0 = RPM check, 1 = ISCDTY check.

       -  V_MODE_END = Time to allow in service mode, base value = 300 seconds.

       -  V_MODE_OPT = Enable flag for throttle plate adjust mode, 1 = enable.

       -  V_NHIGH = Maximum range of rpm set, base value = 50 rpm.

       -  V_NLOW = Minimum range of rpm set, base value = 30 rpm.

       -  V_RPM_SET = Desired rpm to be used in DSDRPM calculation,  base  value  =
          1000 rpm.  Note:  Must be above NUBASE rpm.

       -  V_STO_DELAY = Time delay to allow the tester to clear after  sending  the
          1/2  second  pulse  on  STO, base value = 4 seconds.  Note:  clipped to a
          minimum of 4 seconds.




                                        32-55

           ENGINE RUNNING SELF TEST, THROTTLE PLATE ADJUSTMENT MODE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      OUTPUTS

      Registers:

       -  VIP_TIMER_EX = See above.

       -  OUTTMR = See above.

      Bit Flags:

       -  STI_RESET = See above.

       -  V_MODE_SETUP = See above.

       -  OLFLG = See above.

       -  DISABLE_ISC = See above.











































                                        32-56

           ENGINE RUNNING SELF TEST, THROTTLE PLATE ADJUSTMENT MODE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: VR_TPADJ_MODE_COM2


      This logic is performed once STI_RESET = 1 from the 2 min.  delay logic.  The
      purpose  is  to  allow  a 4 second time period to enter the TP ADJUST MODE by
      again grounding STI.  If the 4 seconds elapses  without  action  on  STI  the
      result  is  to exit RUNNING VIP.  When TP ADJUST MODE is requested, DSDRPM is
      calculated based on the calibration parameter V_RPM_SET and fuel  control  is
      forced closed loop.


      VIP_CNT_EX = STI_RESET Timer Logic -----| PROCESS: STI_RESET Timer Logic


      BEGIN: STI_RESET TIMER LOGIC

      VIP_TIMER_EX < .25 seconds -------------| Allow 1/4 second for switch
                                              |  debounce to prevent clearing
                                              |  ISCKAM when not entering the
                                              |  THROTTLE ADJUST MODE
                                              |
                                              | --- ELSE ---
      VIP_TIMER_EX < 4 seconds ---------|     |
                                        |AND -| Allow 4 seconds to determine
      STIFLG = 0 -----------------------|     |  if THROTTLE ADJUST MODE 
       (STI not grounded)                     |  entry is selected
                                              |
                                              | --- ELSE ---
      VIP_TIMER_EX < 4 seconds ---------|     |
                                        |AND -| V_MODE_SETUP = 1
      STIFLG = 1 -----------------------|     | RVIPRPM = V_RPM_SET
       (STI is grounded)                      | OLFLG = 0 
                                              |  (closed loop fuel)
                                              | VRUN_ISCFLG = 0
                                              | VIP_TIMER_EX = 0 
                                              | VIP_CNT_EX = MODE SETUP LOGIC
                                              |
                                              | --- ELSE ---
      VIP_TIMER_EX >= 4 seconds --------|     |
                                        |AND -| STI_RESET = 0
      STIFLG = 0 -----------------------|     | VIP_CNT_EX = VIP_REINIT
       (STI not grounded)                     |  (TP ADJUST MODE not selected)
                                              |
                                              | --- ELSE ---
      VIP_TIMER_EX >= 4 seconds --------|     |
                                        |AND -| STI_RESET = 0
      STIFLG = 1 -----------------------|     | VIP_CNT_EX = VIP_REINIT 
       ( STI is grounded)                     |  (TP ADJUST MODE has been  
                                              |   bypassed and WIGGLE TEST
                                              |   is requested)

      END:  STI_RESET TIMER LOGIC







                                        32-57

           ENGINE RUNNING SELF TEST, THROTTLE PLATE ADJUSTMENT MODE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      This logic sets up the conditions for the  test  and  allows  the  engine  to
      stabilize.   Feedback spark is locked at the mean idle spark value and KAM is
      disabled from learning by clearing each background loop.

      Idle Fuel Modulation is used for idle stability  of  speed  density  systems.
      Most  MAF  systems  do  not  need Idle Fuel Modulation and can be disabled by
      setting the gain term V_KDNDT = 0.  Certain MAF  configurations  may  require
      compensation  which  is  opposite  of what is required for speed density.  In
      these cases the gain term V_KDNDT can be made negative.

      Please note that Engine Running VIP used Idle Fuel Modulation.


      VIP_CNT_EX = MODE SET UP Logic ---------| OUTTMR = 0
                                              | PROCESS: MODE SET UP LOGIC


      BEGIN: MODE SET UP LOGIC (V_MODE_SETUP = 1)

      STIFLG = 0 -----------------------------| VIP_CNT_EX = STI_RESET TIMER Logic
                                              |
                                              | --- ELSE ---
                                              |
      VIP_TIMER_EX < VDLY_ENTER --------------| RETURN TO BACKGROUND
                                              | Delay for engine to stabilize
                                              | Base strategy actions:
                                              |  See IPSIBR and DESMAF
                                              |   calculations in ISC chapter
                                              |  ISCKAM is cleared each 
                                              |   background loop
                                              |  Forced closed loop fuel control
                                              |  See IGNITION TIMING chapter for
                                              |   spark control conditions
                                              |
                                              | --- ELSE ---
                                              |  
                                              | Continue Base Strategy actions
                                              | Send single 0.5 sec. pulse on STO
                                              | VIP_TIMER_EX = 0
                                              | VIP_CNT_EX = 
                                              |   TP ADJUST MODE FEEDBACK Logic

      END: MODE SET UP LOGIC 


      Note:  V_MODE_SEL must be calibrated to select either the RPM or  the  ISCDTY
      error  capability of the test.  This determines whether Base Strategy control
      of Idle Speed is fixed duty cycle and spark with RPM error  check  or  normal
      ISC  control  and feedback spark with ISCDTY error check.  0 = RPM check, 1 =
      ISCDTY check.


      VIP_CNT_EX = TP ADJUST MODE FEEDBACK Logic ----| DO: TP ADJUST MODE 
                                                     |          FEEDBACK LOGIC






                                        32-58

           ENGINE RUNNING SELF TEST, THROTTLE PLATE ADJUSTMENT MODE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: TP ADJUST MODE FEEDBACK LOGIC

      VIP_TIMER_EX < V_STO_DELAY -------------| Delay to clear tester after
       (clipped to 4 sec's min.)              | 0.5 sec. pulse on STO
                                              | STO = 0
                                              |
                                              | --- ELSE ---
                                              |
      OUTTMR => V_MODE_END -------------------| Test has timed out
       (vector clipped at 600 sec's max.)     | STO = 0
                                              | VIP_TIMER_EX = 0
                                              | VIP_CNT_EX = VIP_REINIT
                                              |  (exit Self-Test)
                                              |
                                              | --- ELSE ---
                                              |
      STI_FLG = 0 ----------------------------| VIP_CNT_EX = STI_RESET TIMER Logic
                                              |  (check for Self-Test exit or
                                              |   TP adjust mode restart)
                                              | STO = 0
                                              |  (STO off)
                                              |
                                              | --- ELSE ---
      ITP < VTAP3 ----------------------|     |
                                        |OR --| Pulse STO at 8 Hz
      ITP > VTAP4 ----------------------|     |  (TP out of range)
                                              |
                                              | --- ELSE ---
                                              |
      NBAR <= (DSDRPM - V_NLOW) --------|     | Pulse STO at 1 Hz
                                        |OR --|  (RPM too low or, while in ISC 
      ISCDTY = > V_ISCDTY_HI -----------|     |   feedback mode, ISC Duty Cycle
                                              |   too high)                   
                                              |  
                                              | --- ELSE ---
                                              |
      NBAR >= (DSDRPM + V_NHIGH) -------|     |
                                        |OR --| Pulse STO at 4 Hz
      ISCDTY <= V_ISCDTY_LO ------------|     |  (RPM too high or, while in ISC 
                                              |   feedback mode, ISC Duty Cycle
                                              |   too low)                   
                                              |
                                              | --- ELSE ---
                                              |
                                              | STO = 1
                                              |  (turn STO on continuously)
                                              |  (RPM, ISCDTY and TP within
                                              |   range)

      END:  TP ADJUST MODE FEEDBACK LOGIC


      NOTE:  VIP flags V_MODE_SETUP and STI_RESET are cleared on exit from  the  TP
      ADJUST MODE during the re-init procedure.






                                        32-59

           ENGINE RUNNING SELF TEST, THROTTLE PLATE ADJUSTMENT MODE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL






























































                                        32-60












                                      CHAPTER 33

                              CONTINUOUS TEST STRUCTURE

















































                                         33-1

                         FILTERING LOGIC (CONTINUOUS) - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                     FILTERING LOGIC


      Each fault to be detected and stored requires an  event  counter-timer  which
      will  be  incremented by an "Up-count" value (calibratable) each time a fault
      is detected, and decremented by 1 each time the fault is not detected.  Fault
      detection  and  up/down counting are done once per background loop.  When the
      counter-timer  for  a  particular   fault   exceeds   a   "threshold"   value
      (calibratable)  for  that  fault,  the  corresponding  KAM fault code will be
      stored.

      The "Wiggle Test" is a special case.  Whenever the wiggle test mode is active
      and  any  one  of the fault filters active during the wiggle mode exceeds its
      threshold (WIGLVL), STO is turned "on" (otherwise it will be "off").


      PROCESS
                             STRATEGY MODULE: VC_FILTER_COM2

                                 -----------
                               (    ENTER    )
                                 -----------
                                      |
                                      v
                           NO    /---------\    YES
                  |-------------/ FAULT (N) \-------------|
                  |             \ DETECTED ?/             |
                  v              \---------/              v
          !--------------!                         !--------------!
          ! CXXXFIL   =  !                         ! CXXXFIL  =   !
          ! CXXXFIL   -1 !                         ! CXXXFIL  +   !
          !--------------!                         ! CXXXUP       !
                  |                                !--------------!
                  |                                       |
                  |------------->|<-----------------------|
                                 |
                                 v                  
                            /---------\             
                           /   CXXXFIL \    YES     
                          /     >       \----------------|
                          \    CXXXLVL  /                |
                           \     ?     /                 |
                            \---------/                  |
                                 |  NO                   v
                                 v             !---------------------!
                            -----------        ! STORE KAM CODE (N)  !
                          (     EXIT    )<-----! ZERO WARM-UP CYCLE  !
                            -----------        ! COUNTER (N)         !
                                               !---------------------!











                                         33-2

        CONTINUOUS SELF TEST, FAULT THRESHOLD/UPCOUNT VALUE SELECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                         FAULT THRESHOLD/UPCOUNT VALUE SELECTION
                         "WIGGLE" VERSUS NORMAL CONTINUOUS TEST


      OVERVIEW

      Continuous Self-Test can operate in one of two modes, normal  continuous  and
      Wiggle.   In  normal  continuous,  the  calibrated  values  for  fault filter
      upcounts and thresholds (CxxxUP and CxxxLVL) are used to control the  setting
      of  service  codes.   During  Wiggle  mode,  a  value  of 255 is used for all
      non-zero upcounts (except as noted) and the value of WIGLVL is used  for  all
      thresholds  (except  as noted).Also, STO will be activated at any time that a
      continuous fault is present.  This will cause a STAR tester to output a  tone
      whenever  a  failure  is  caused by a service technician manipulating the EEC
      harness  and/or  connectors.   This  is  done  to  assist  the  diagnosis  of
      intermittent harness problems.

      Wiggle mode is entered when Self-Test In (STI) is grounded  after  initiating
      and  exiting,  or  aborting, on demand self test (KOEO or KOER).  This can be
      done by grounding, ungrounding, then re-grounding STI with the engine off  or
      running.   Or,  wiggle  will be entered after an on demand Self-Test (KOEO or
      KOER) is completed.  If the vehicle is in gear  when  engine  running  (KOER)
      Self-Test  is  initiated,  or  the  vehicle  is  placed in gear during engine
      running Self-Test; wiggle mode will be entered.  See the Self-Test entry/exit
      logic for a complete description.



































                                         33-3

        CONTINUOUS SELF TEST, FAULT THRESHOLD/UPCOUNT VALUE SELECTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: VC_FAULT_COM1


      WIGFLG = 1 -----------------------------| Wiggle test:
       (set in Self-Test entry logic)         | Set all non-zero upcounts to 
                                              | 255 except as noted in test
                                              | descriptions
                                              | Set all continuous thresholds
                                              | to WIGLVL except as noted in 
                                              | test descriptions
                                              |  
                                              | --- ELSE ---
                                              | 
                                              | Not in Wiggle
                                              | Use calibrated upcounts and 
                                              | thresholds
                                              |
      WIGFLG = 1 -----------------------|     |
       (in wiggle test)                 |AND -| Turn STO on
                                        |     |
      CxxxFIL > CxxxLVL-----------------|     |
       (any fault filter greater              |
         than threshold)                      |
                                              |
                                              | --- ELSE ---
                                              |
      WIGFLG = 1 -----------------------------| Turn STO off
       (in wiggle test)                       |
                                              |
       (all fault filters less                |
        than or equal to the                  |
         threshold)                           | 


                       CONTINUOUS CODE PARAMETER NAMING CONVENTION

                                              |WARM-UP|VECTOR
        FAULT      | FILTER |UPCOUNT|THRESHOLD|COUNTER|RAM FLAG
      -------------|--------|-------|---------|-------|------------
      FAULT        |CXXXFIL |CXXXUP | CXXXLVL |CXXXCNT|CXXX_KAM_BIT
      DESCRIPTION


















                                         33-4

          CONTINUOUS SELF TEST, KAM CODE WARM_UP COUNTER/ERASE LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                          KAM CODE WARM_UP COUNTER/ERASE LOGIC


      OVERVIEW

      Each KAM code has a counter for "Number of Engine warm-ups" since  the  fault
      was  last  stored.   The warm up counters are incremented once per each power
      up, only if a true warm up has occurred as described below.

      Each individual code is erased when its counter is >= 80.  Codes can also  be
      manually cleared by ungrounding STI during Engine-Off code output mode.



      DEFINITIONS

      Calibration Constants:

       -  VECT3 = coolant temp.  limit to trigger warm up counters (150 deg.  F).

       -  VECT5 = starting coolant temp.  for warm up counters (120 deg.  F).







































                                         33-5

          CONTINUOUS SELF TEST, KAM CODE WARM_UP COUNTER/ERASE LOGIC - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                        STRATEGY MODULE: VC_WARMUP_KAM_ERASE_COM1


                                  WARM_UP COUNTER LOGIC

      WARM_UP = 0 ----------------------|
                                        |
      TCSTRT < VECT5 -------------------|     
                                        |AND -|SET  WARM_UP = 1
      ECT > VECT3 ----------------------|     | (the flag WARM_UP is
                                        |     |  initialized to 0 on  
      RUN MODE -------------------------|     |  power up and is never
       (CRKFLG=0, UNSP=0)                     |  cleared once a true
                                              |  warmup has occurred 


      STIFLG = 0 -----------------------|            
                                        |     |INCREMENT ALL CODE 
      POWER_UP = 1 ---------------------|AND -| WARM-UP COUNTERS   
       (set in RAM INIT.)               |     |
                                        |     |SET  POWER_UP  = 0 
      WARM_UP = 1 ----------------------|     |         



                                  KAM CODE ERASE LOGIC

      WARM-UP COUNTER(N) >= 80 ---------------|ERASE KAM CODE(N)
                                              |
                                              | --- ELSE ---
                                              |
      STO_WORKING = 1 ------------|           | 
       (engine off code output    |           |
        mode*)                    |OR --|     |
                                  |     |     |
      STO_TRIGGER = 1 ------------|     |     |
                                        |AND -|ERASE ALL KAM CODES
      NO_START = 1 ---------------------|     |
       (engine off test in process)     |     |
                                        |     |
      STIFLG = 0 -----------------------|     |
       (self test not requested) 


      * Note: Includes the output of any codes in Engine Off Self Test;
        service codes, separator pulse, and continuous codes.













                                         33-6

                  CONTINUOUS SELF TEST, ECT OPEN/SHORT TESTS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  ECT OPEN/SHORT TESTS
      PROCESS
                              STRATEGY MODULE: VC_ECT_COM1


                               -----------
                             (    ENTER    )
                               -----------
                                    |
                                    v
                               /---------\   NO      !----------!
                              /  IECT >=  \--------->! FAULT 117!
                              \  ECTMIN ? /          !----------!
                               \---------/                 |
                                    |  YES                 |
                                    |<---------------------|
                                    v
                            !--------------!
                            !  DO FAULT    !
                            ! FILTERING 117!
                            !--------------!
                                    |
                                    v
                               /---------\   NO      !----------!
                              /  IECT <=  \--------->! FAULT 118!
                              \  ECTMAX ? /          !----------!
                               \---------/                 |
                                    |  YES                 |
                                    |<---------------------|
                                    v
                            !--------------!
                            !  DO FAULT    !
                            ! FILTERING 118!
                            !--------------!
                                    |
                                    v
                               -----------
                             (     EXIT    )
                               -----------





















                                         33-7

                    CONTINUOUS SELF TEST, ACT SENSOR TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                     ACT SENSOR TEST
      PROCESS
                              STRATEGY MODULE: VC_ACT_COM1


                               -----------
                             (    ENTER    )
                               -----------
                                    |
                                    v
                               /---------\   NO      !----------!
                              /  IACT >=  \--------->! FAULT 112!
                              \  ACTMIN ? /          !----------!
                               \---------/                 |
                                    |  YES                 |
                                    |<---------------------|
                                    v
                            !--------------!
                            !   DO FAULT   !
                            ! FILTERING 112!
                            !--------------!
                                    |
                                    v
                               /---------\   NO      !----------!
                              /  IACT <=  \--------->! FAULT 113!
                              \  ACTMAX ? /          !----------!
                               \---------/                 |
                                    |  YES                 |
                                    |<---------------------|
                                    v
                            !--------------!
                            !   DO FAULT   !
                            ! FILTERING 113!
                            !--------------!
                                    |
                                    v
                               -----------
                             (     EXIT    )
                               -----------





















                                         33-8

       CONTINUOUS SELF TEST, IN-RANGE THROTTLE POSITION, INJECTOR LOAD - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                         INJECTOR LOAD CALCULATIONS (VINJ_LOAD)


      OVERVIEW

      Given an assumed air/fuel ratio (closed loop or from lambda in open loop) and
      a  calculated  value of fuel mass/injection, the unitless parameter VINJ_LOAD
      can be calculated from this information and compared with the value  of  LOAD
      from the air meter flow in self test.



      DEFINITIONS

      INPUTS

      Registers:

       -  LBMF_INJn = Registers that contain the fuel mass per injection  for  each
          bank (n = 1,2).

       -  BIAS_G = Closed loop air/fuel ratio bias (Lambdas).

       -  LAMBSE1 = Lambda fuel multiplier.

      Bit Flags:

       -  OLFLG = Open loop flag; 1 -> open loop, 0 -> closed loop.

      Calibration Constants:

       -  SARCHG = Standard air charge (Lbm/intake)



      OUTPUTS

      Registers:

       -  VINJ_LOAD = normalized load parameter based on injector flow and air/fuel
          ratio, unitless.



















                                         33-9

       CONTINUOUS SELF TEST, IN-RANGE THROTTLE POSITION, INJECTOR LOAD - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: VC_VINJ_LOAD_COM1


      NUMEGO = 2 -------|
       (stereo)         |AND -| Average LBMF_INJ1 and 2
                        |     |
      OLFLG = 0 --------|     | lbmf_ave = (LBMF_INJ1 +
       (closed loop)          |  LBMF_INJ2)/2
                              |
                              | --- ELSE ---
                              |
                              | Lbmf_inj2 will equal Lbmf_inj1
                              |  (Single EGO or open loop)
                              | 
                              | lbmf_ave = LBMF_INJ1


      OLFLG = 0 --------------| VINJ_LOAD = lbmf_ave *
       (Closed loop)          |  (14.6 + BIAS_G)/SARCHG
                              |
                              | where 14.6 + BIAS_G is the
                              |  estimated air/fuel ratio
                              |
                              | --- ELSE ---
                              |
                              | Open loop
                              |
                              | VINJ_LOAD = lbmf_ave *
                              |  14.6 * LAMBSE1 /SARCHG
                              |   
                              |
                              | where 14.6 * LAMBSE1 is the
                              |  estimated air/fuel ratio


























                                        33-10

     CONTINUOUS SELF TEST, IN-RANGE THROTTLE POSITION, LOAD CALCULATIONS - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                     THROTTLE POSITION LOAD CALCULATIONS (VTP_LOAD)


      OVERVIEW

      TOTLDST (Total load from  throttle  body  at  sea  level)  is  corrected  for
      Barometric  and  temperature to get a load value that can be compared to LOAD
      from the air meter and injectors for self test.



      DEFINITIONS

      INPUTS

      Registers:

       -  TOTLDST = Total load at sea level.

       -  BP = Barometric pressure, in.  hg.

      Calibration Constants:

       -  FN059 = Temperature compensation.  sqrt(560/(ACT+460)).



      OUTPUTS

      Registers:

       -  VTP_LOAD = Normalized load parameter based on throttle body flow.




      PROCESS
                            STRATEGY MODULE: VC_VTP_LOAD_COM1


                       VTP_LOAD = TOTLDST * FN059(ACT) * BP/29.92



















                                        33-11

           IN-RANGE AIR METER, TP, INJECTOR PROCESSING (CONTINUOUS) - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                       IN-RANGE AIR METER, TP, INJECTOR PROCESSING


      OVERVIEW


      Three measures of "LOAD" are calculated by the base  strategy  from  the  Air
      Meter,  the  TP  sensor and Fuel flow.  These measures need to be filtered to
      minimize noise from the closed loop limit cycle, manifold filling effects and
      other  transient  errors.   The  three  filtered values of "LOAD" can then be
      compared to determine if one of these is in error.

      A number of timers are used to disable the  error  detection  at  times  when
      purge, long fuel ramps, etc.  could make the fuel assumptions unreliable.



      FAILURE CODES


      Code 124:

       -  Indicates a value of TP higher than expected for a given flow.

       -  Possible causes:
          1.  TP sensor error.
          2.  Air bypass solenoid flow low/blocked or solenoid disconnected.
          3.  Throttle body obstructed.
          4.  BP sensor reading high.
          5.  ACT sensor reading low.
          6.  EGR flow low.


      Code 125

       -  Indicates a value of TP lower than expected for a given flow.

       -  Possible causes:
          1.  TP sensor error.
          2.  Air bypass solenoid flow high/stuck open.
          3.  Throttle stop set screw mis-adjusted (open).
          4.  Throttle plate not closing.
          5.  Throttle plate damage.
          6.  BP sensor reading low.
          7.  ACT sensor reading high.
          8.  EGR flow high.


      Code 184

       -  Indicates air meter output higher than flow  based  on  TP  and  injector
          flow.

       -  Possible causes:
          1.  Air Meter error.





                                        33-12

           IN-RANGE AIR METER, TP, INJECTOR PROCESSING (CONTINUOUS) - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Code 185

       -  Indicates air meter output lower than flow based on TP and injector flow.

       -  Possible causes:
          1.  Oil/dust contaminated Air Meter.
          2.  Air meter error.
          3.  Air leak between Air Meter and throttle body.


      Code 186

       -  Injector pulsewidth during closed loop operation  higher  than  would  be
          expected.

       -  Possible causes:
          1.  Partially obstructed injectors(s).
          2.  Disconnected injector or inoperative injector driver(s).
          3.  Low voltage at injectors(s), high resistance electrical connections.
          4.  Low fuel pressure.
          5.  Vacuum leaks.
          6.  EGO drift (switching rich of stoichiometric).
          7.  Air leaks into exhaust manifold.
          8.  Misfires.
          9.  Mass air flow at altitude (inferred BP only).


      Code 187

       -  Injector pulsewidth during closed loop operation shorter  than  would  be
          expected.

       -  Possible causes:
          1.  Injector(s) leaking.
          2.  High fuel pressure.
          3.  EGO drift (switching lean of stoichiometric).
          4.  Short circuits/injector driver(s).
          5.  Excessive fuel from canister purge.
          6.  Mass air flow high at sea level (inferred BP only).


      Code 121

       -  Indicates that the TP sensor is inconsistant with the Air Meter (high  TP
          at low air flow or low TP at high air flow).

       -  Possible causes:
          1.  TP sensor error or TP sensor disconnected from throttle body.
          2.  Air meter  error  or  leak  between  air  meter  and  throttle  body.
              (Unlikely if the engine still runs).










                                        33-13

           IN-RANGE AIR METER, TP, INJECTOR PROCESSING (CONTINUOUS) - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  DFSFLG = Decel Fuel Shut_off flag; 1 -> the decel fuel multiplier is  not
          one.

       -  VINJ_LOAD = Load based on injector pulsewidth (unitless).

       -  LESTMR1 = Self test lack of EGO switch timer.

       -  LESTMR2 = Self test lack of EGO switch timer (Stereo).

       -  LOAD = Load calculated from airmeter (unitless).

       -  NBAR = Filtered RPM.

       -  NUMEGO = Number of EGO sensors.

       -  TP_REL = Throttle position.

       -  VTP_LOAD = Load from throttle position TOTLDST

       -  V_INRANG_FLG  =  Normal  EGO  switches  expected.   From  Continuous  EGO
          switching test.

       -  OLFLG = Open Loop (=1) or closed loop (=0) fuel flag.

      Calibration Constants:

       -  V_INRAN_ERR = Maximum acceptable descrepancy between load values.

       -  VLOAD_FIL = Filter constant for filtering "LOAD" values.

       -  VLOADMAX = Maximum LOAD at which to conduct in-range test.

       -  VLOADMIN = Minimum LOAD at which to conduct in-range test.

       -  V_MAXSW = Maximum time after an EGO switch to continue test.

       -  VRPMMAX = Maximum RPM at which the test is to be run.

       -  VRPMMIN = Minimum RPM at which the test is to be run.

       -  VTPMAX = Maximum TP for test enable.

       -  VTPMIN = Minimum TP to enable test.

       -  V_TP_LOW = Maximum TP to do TP sensor very low test.

       -  V_TP_ERR_MIN = Min time at TP sensor out of range to set code 121.

       -  V_LOAD_LOW = Min LOAD to set Code 121 with TP sensor low.

       -  V_TP_HIGH = Min TP to do TP sensor very high test.



                                        33-14

           IN-RANGE AIR METER, TP, INJECTOR PROCESSING (CONTINUOUS) - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  V_LOAD_HI = Max LOAD to set Code 121 with TP sensor high.

       -  V_WOTNMIN = Min RPM to enable TP sensor very high test

       -  VINRANGMIN = Min time at in-range test conditions before performing test.



      OUTPUTS

      Registers:

       -  VAM_LD_FIL = Filtered value of airmeter load.

       -  VINJ_LD_FIL = Filtered value of inujector load.

       -  VTP_LD_FIL = Filtered value of TP load.

       -  ERR_TP_AM = Difference between TP and Air Meter filtered load.

       -  ERR_TP_INJ = Difference between TP and Injector filtered load.

       -  ERR_AM_INJ = Difference between Air Meter and Injector filtered load.

       -  V_LOAD_TOL = Maximum acceptable LOAD variation.

       -  VINRANGTIM = Time at in-range test conditions.

       -  V_TP_ERR_TMR = Time at conditions for TP sensor out of range.

       -  C121LVL = Continuous code 121 level, TP very high or low.

       -  C124LVL = Continuous code 124 level, TP reads high.

       -  C125LVL = Continuous Code 125 level, TP reads low.

       -  C184LVL = Continuous code 184 level, Air Meter high.

       -  C185LVL = Continuous code 185 level, Air Meter low.

       -  C186LVL = Continuous code 186 level, Pulse width high.

       -  C187LVL = Continuous code 187 level, Pulse width low.

      Bit Flags:

       -  V_INJ_ER_FLG = Injector Failure flag for MIL light.













                                        33-15

           IN-RANGE AIR METER, TP, INJECTOR PROCESSING (CONTINUOUS) - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                      STRATEGY MODULE: VC_INRANGE_TP_MAF_FUEL_COM1


      Always:


      DFSFLG = 0 --------------------------| VAM_LD_FIL = ROLAV(LOAD,VLOAD_FIL)
       (not in decel fuel shut off)        | VTP_LD_FIL = 
                                           |   ROLAV(VTP_LOAD,VLOAD_FIL)
                                           | VINJ_LD_FIL = 
                                           |   ROLAV(VINJ_LOAD,VLOAD_FIL)  


      TP_REL < V_TP_LOW -------|
                               | 
      LOAD > V_LOAD_LOW -------|AND -|
                               |     |
      N > V_WOTNMIN -----------|     |
                                     |OR --| Increment V_TP_ERR_TMR
      TP_REL > V_TP_HIGH ------|     |     |
                               |     |     | --- ELSE ---
      LOAD < V_LOAD_HI --------|AND -|     |
                               |           | V_TP_ERR_TMR = 0
      N > V_WOTNMIN -----------|



































                                        33-16

           IN-RANGE AIR METER, TP, INJECTOR PROCESSING (CONTINUOUS) - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      During continuous testing:


      V_TP_ERR_TMR > V_TP_ERR_MIN ---|
                                     |AND -| error_detected = 1
      FLG_ECTSTABLQ = 1 -------------|     | Fault Filter C121 
       (ATMR4 > ECTSTABLTIM)               |  (TP sensor out of range.)
                                           | VINRANGTIM = 0
                                           |
                                           | --- ELSE ---
      V_INRANG_FLG = 1 --------------|     |
       (from EGO switch test)        |     |
                                     |     |
      LOAD > VLOADMIN ---------|     |     |
                               |OR --|     |
      TP_REL > VTPMIN ---------|     |     |
                                     |     |
      LOAD < VLOADMAX ---------|     |     |
                               |OR --|     |
      TP_REL < VTPMAX ---------|     |AND -| INCREMENT VINRANGTIM
                                     |     | Do "calculate/Check tolerances
      NBAR > VRPMMIN ----------------|     |  logic"
                                     |     | Fault Filter C121
      NBAR < VPRPMMAX ---------------|     |
                                     |     |
      OLFLG = 0 ---------------------|     |
       (closed loop)                 |     |
                                     |     |
      LESTMR1 < V_MAXSW -|           |     |
                         |AND -|     |     |
      NUMEGO = 1 --------|     |     |     |
                               |OR --|     |
      LESTMR1 < V_MAXSW -|     |     |     |
                         |     |     |     | 
      LESTMR2 < V_MAXSW -|AND -|     |     |
                         |           |     |     
      NUMEGO = 2 --------|           |     |
                                     |     |
      DFSFLG = 0 --------------------|     |
                                           | --- ELSE ---
                                           |
                                           | RESET VINRANGTIM = 0 
                                           | Fault Filter C121

















                                        33-17

           IN-RANGE AIR METER, TP, INJECTOR PROCESSING (CONTINUOUS) - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      C186FIL >= C186LVL ------------|
                                     |OR --| V_INJ_ER_FLG = 1
      C187FIL >= C187LVL ------------|     |  (injector failure,
                                           |   used for MIL light)
                                           |
                                           | --- ELSE ---
      C186FIL < C186LVL - FILHYS ----|     |
                                     |AND -| V_INJ_ER_FLG = 0
      C187FIL < C187LVL - FILHYS ----|     |  (injector OK)



      BEGIN:  Calculate/Check Tolerances Logic

      always ------------------------------| V_LOAD_TOL = VAM_LD_FIL * V_INRAN_ERR


      VINRANGTIM > VINRANGMIN -------------| ERR_TP_AM = VTP_LD_FIL - VAM_LD_FIL
                                           | ERR_TP_INJ = VTP_LD_FIL - VINJ_LD_FIL
                                           | ERR_AM_INJ = VAM_LD_FIL - VINJ_LD_FIL
                                           | Do "In_range Fault Check Logic"

      END:  Calculate/Check tolerances logic





































                                        33-18

           IN-RANGE AIR METER, TP, INJECTOR PROCESSING (CONTINUOUS) - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN:  In-range Fault Check Logic

      ERR_TP_AM > V_LOAD_TOL --|     
                               |
      ERR_TP_INJ > V_LOAD_TOL -|AND -| Fault Filter C124
                               |     | error_detected = 1
      EGOFL1 = 1 --------|     |     |  (TP load high as compared to
       (EGO rich; avoid  |     |     |   Air meter and fuel)
        setting TP code  |     |     |
        when fuel        |     |     |
        follows AM)      |     |     | --- ELSE ---
                         |OR --|     |
      NUMEGO = 2 --|     |           | Fault Filter C124
                   |AND -|           |  (error 124 not detected)
      EGOFL2 = 1 --|


      -1 * ERR_TP_AM > 
              V_LOAD_TOL ------|     
                               |AND -| error_detected = 1 
      -1 * ERR_TP_INJ >        |     | Fault Filter C125
              V_LOAD_TOL ------|     |  (TP load low as compared to
                               |     |   air meter and fuel)
      EGOFL1 = 0 --------|     |     |
       (EGO lean; avoid  |OR --|     | 
        setting TP code  |           | --- ELSE ---
        when fuel        |           |
        follows AM)      |           | Fault Filter C125
                         |           |  (error 125 not detected)
      NUMEGO = 2 ---|    |       
                    |AND-|       
      EGOFL2 = 0 ---|            


      -1 * ERR_TP_AM >
             V_LOAD_TOL -------|      
                               |AND -| error_detected = 1
      ERR_AM_INJ >             |     | Fault Filter C184
             V_LOAD_TOL -------|     |  (MAF higher than expected)
                                     | 
                                     | --- ELSE ---
                                     |
                                     | Fault Filter C184 
                                     |  (error 184 not detected)


      ERR_TP_AM > V_LOAD_TOL --|      
                               |AND -| error_detected = 1
      -1 * ERR_AM_INJ >        |     | Fault Filter C185
           V_LOAD_TOL ---------|     |  (MAF lower than expected)
                                     |
                                     | --- ELSE ---
                                     |
                                     | Fault Filter C185
                                     |  (error 185 not detected)





                                        33-19

           IN-RANGE AIR METER, TP, INJECTOR PROCESSING (CONTINUOUS) - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      -1 * ERR_TP_INJ >
             V_LOAD_TOL -------|      
                               |AND -| error_detected = 1
      -1 * ERR_AM_INJ >        |     | Fault Filter C186
             V_LOAD_TOL -------|     |  (pulse width higher than
                                     |   expected)
                                     |
                                     | --- ELSE ---
                                     |
                                     | Fault Filter C186
                                     |  (error 186 not detected)     


      ERR_TP_INJ > V_LOAD_TOL -|     
                               |     
      ERR_AM_INJ > V_LOAD_TOL -|AND -| error_detected = 1
                               |     | Fault Filter C187
      PURGDC = 0 --------|     |     |  (pulse width lower than expected)
       (purge is not     |     |     |
        affecting fuel)  |OR --|     |
                         |           |
      PRG_DEC = 0 -------|           |
                                     | --- ELSE ---
                                     |
                                     | Fault Filter C187
                                     |  (error 187 not detected)  

      END:  In-range Fault Check Logic
































                                        33-20

                  CONTINUOUS SELF TEST, MASS AIRFLOW SENSOR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   MASS AIRFLOW SENSOR

      PROCESS
                              STRATEGY MODULE: VC_MAF_COM1


               --------
             (  ENTER   )
               --------
                  |
                  v
             /---------\ NO      /---------\ YES    !---------!
            / N    =>   \------>/  IMAF =>  \------>!FAULT 158!
            \ VMARPM    /       \  VMAMAX   /       !---------!
             \---------/         \---------/             |
                  |YES                | NO               |
                  |                   |<-----------------|
                  |                   v
                  |              !-------------!
                  |              !DO FAULT     !
                  |              !FILTERING 158!
                  |              !-------------!
                  |                   |
                  |<------------------|
                  v
            NO/--------\
       |<----/ RUN MODE \
       |     \          /
       |      \--------/
       |          | YES
       |          v
       |     /---------\
       | NO /   TP_REL  \
       |<--/      >      \ 
       |   \   TP_VMAF   /
       |    \-----------/
       |          | YES
       |          v
       |     /---------\ NO     /------\  YES     /---------\ YES     !---------!
       |    /IS TSLPIP  \----->/ N  >   \------->/ IMAF <=   \------->!FAULT 157!
       |   /      >      \    / VMAFLOWN \       \ VMAMIN    /        !---------!
       |   \ VMAFPIPLMT  /    \          /        \---------/               |
       |    \           /      \--------/               | NO                |
       |     \---------/            | NO                |                   |
       |          |YES              |                   |<------------------|
       |--------->|<----------------|                   v
                  |                              !-------------!
                  |                              !DO FAULT     !
                  |                              !FILTERING 157!
                  |                              !-------------!
                  |                                     |
                  |<------------------------------------|
                  v
                ------
              (  EXIT  )
                ------

      NOTE:  Do not check for fault 157 during KOEO Wiggle Test.  Air Flow and IMAF
      will be at or near zero.

                                        33-21

                       CONTINUOUS SELF TEST, SONIC EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  SONIC EGR SYSTEM TEST


      OVERVIEW:

      In the documentation, this module is enabled via the  lower  case  parameters
      egr_system  and  sonic_egr from VC_xxxx_SEL_COMn.  In the software, a similar
      parameter may  be  used  or  the  test  may  be  enabled  based  on  whatever
      combinations of PFEHP, PFEHP_FG, EGRHP_FG, etc.  are available.

      When the test is entered, the IEGR input is checked  to  insure  that  it  is
      within  the max/min limits.  If this test fails, the appropriate fault filter
      is upcounted and no further testing is required.  If the  voltage  is  within
      limits,  it is then checked to insure that it is not below the lowest voltage
      expected from a closed valve.  Note that these checks are bypassed until  EGR
      is enabled for the first time.

      Additional checks are made when the EGR is commanded off to insure  that  the
      valve  is  returning  to  the closed position.  When the EGR is on (high duty
      cycle), a check is made (if the PCT_LOAD is low enough) to see if  the  valve
      has moved sufficiently from the closed position.

      Lowercase parameters such  as  sonic_egr_test_ena,  sonic_egr_off_test,  etc.
      are  used  to  control  flow  through  the ladder diagrams.  The use of these
      parameters in the documentation does not imply that  similar  parameters  are
      required in the software.

      Note that the flags V_EGR_STK_ON and, V_EGR_ON_CR are used to reset any fault
      filters  that  have partially counted up and control timers when a particular
      test mode is first entered.






























                                        33-22

                       CONTINUOUS SELF TEST, SONIC EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                          STRATEGY MODULE: VC_EGR_SON_MA_COM10


      Step one (if sonic EGR is present) is to test for an input  voltage  that  is
      out of range.  If an open or short circuit is detected, the test is complete.
      Otherwise, the test continues to check for flow or a stuck open valve.

      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
      NOTE:
      EFMLO is passed to the fault filter routine every time it is called for  code
      327 and returns value of 1 if the code is set and returns a value of 0 if the
      code is clear.  Similarly, EFMHI is passed with code 337.   EFMHI  and  EFMLO
      are  used  to  set  and  clear  EFMFLG.   This  logic is described in the EGR
      chapter.

      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!


      egr_system <> sonic_egr ---------| sonic_egr_test_ena := 0             
       (parameters egr_system          |  (no sonic EGR hardware, no testing)
        and sonic_egr from the         |                                     
        VC_xxxx_SEL_COMn module)       |                                     
                                       | 
                                       | --- ELSE ---
                                       | 
      IEGR <= EVPMIN ------------|     | 
       (voltage below minimum)   |AND -| error_detected := 1
                                 |     | Fault Filter Code 327
      V_EGR_RDY = 1 -------------|     |  (upcount fault)
       (EGR has been                   |  (see note above)
        enabled)                       |
                                       | Fault Filter Code 337
                                       |  (see note above)
                                       | Fault Filter Code 328
                                       |  (downcount faults not present)
                                       |  
                                       | V_EGR_ON_CR := 0
                                       | V_EGR_STK_ON := 0
                                       |  (clear flags - modes not to be active)
                                       |  
                                       | sonic_egr_test_ena := 0
                                       |  (done testing)
                                       |  
                                       | --- ELSE ---

                                (continued on next page)













                                        33-23

                       CONTINUOUS SELF TEST, SONIC EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

                                       | 
      IEGR >= EVPMAX ------------|     | 
       (voltage above maximum)   |AND -| error_detected := 1
                                 |     | Fault Filter Code 337
      V_EGR_RDY = 1 -------------|     |  (upcount fault)
       (EGR has been                   |  (see note above)
        enabled)                       |
                                       | Fault Filter Code 327
                                       |  (see note above)
                                       | Fault Filter Code 328
                                       |  (downcount faults not present)
                                       |  
                                       | V_EGR_ON_CR := 0
                                       | V_EGR_STK_ON := 0
                                       |  (clear flags - modes not to be active)
                                       |  
                                       | sonic_egr_test_ena := 0
                                       |  (done testing)
                                       | 
                                       | --- ELSE ---
                                       | 
      IEGR < VEVPLL -------------|     | error_detected := 1
       (voltage below closed     |AND -| Fault Filter Code 328
        valve voltage)           |     |  (upcount fault)
                                 |     |
      WIGFLG = 0 ----------------|     | Fault Filter Code 327
                                       | Fault Filter Code 337
                                       |  (downcount faults not present)
                                       |  
                                       | sonic_egr_test_ena := 1
                                       |  (allow further testing)
                                       | 
                                       | --- ELSE ---
                                       | 
                                       | Fault Filter Code 327
                                       | Fault Filter Code 337
                                       | Fault Filter Code 328
                                       |  (no faults, downcount)
                                       |
                                       | sonic_egr_test_ena := 1
                                       |  (allow further testing)

















                                        33-24

                       CONTINUOUS SELF TEST, SONIC EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      To get here, sonic_egr_test_ena must be set by the  previous  diagram  (sonic
      hardware present, no open or short fault).  This diagram determines which EGR
      mode (on or off) is to be tested.  For which ever mode is enabled, the  flags
      that control action in the other mode are cleared.


      sonic_egr_test_ena := 1 ---|
       (testing allowed)         |AND -| V_EGR_ON_CR := 0
        by previous diagram)     |     | sonic_egr_on_test := 0 
                                 |     |  (EGR on test not active)
      EGRDC = 0 -----------------|     |
       (EGR not on)                    | sonic_egr_off_test := 1
                                       |  (perform test for valve stuck open)
                                       |
                                       | --- ELSE ___
                                       |
      sonic_egr_test_ena := 1 ---------| V_EGR_OFF_CR := 0
       (testing allowed)               | sonic_egr_off_test := 0 
        by previous diagram)           |  (EGR off test not active)
       (EGR is on)                     |
                                       | sonic_egr_on_test := 1
                                       |  (perform test for valve opening)
                                       |
                                       | --- ELSE ___
                                       |
                                       | sonic_egr_off_test := 0
                                       | sonic_egr_on_test := 0
                                       |  (no more testing)


      Test to see if this is the first pass through the EGR off test.  If so, reset
      the timer VIP_TIMER_EX and clear out the fault filter for code 334.  If it is
      not the first pass, continue on.  Of course, if  the  EGR  off  test  is  not
      enabled, no action is required.


      V_EGR_STK_ON = 0 ----------|     | V_EGR_STK_ON := 1
       (last pass was not in     |AND -|  (this is the first background loop   
        EGR off test)            |     |   in this test mode)                  
                                 |     |                                       
      sonic_egr_off_test = 1 ----|     | VIP_TIMER_EX := 0                     
       (mode enabled)                  |  (reset for time delay before testing)
                                       |                                       
                                       | Do: EGR Off Fault Filter Reset     
                                       | Do: EGR Off Test
                                       |                                       
                                       | --- ELSE ---                          
                                       | 
      sonic_egr_off_test = 1 ----------| Do: EGR Off Test
       (mode enabled)          










                                        33-25

                       CONTINUOUS SELF TEST, SONIC EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN:  EGR Off Test

      This diagram, which follows the previous, tests to  determine  if  the  input
      voltage  is  too high for a closed valve (valve not closing).  If it is, code
      334 may be set after the time delay.


      IEGR > VEVPHL -------------|
       (voltage above closed     |
        value)                   |
                                 |AND -| error_detected := 1
      VIP_TIMER_EX >= VIETMR ----|     | Fault Filter Code 334
       (mode enabled)            |     |  (upcount fault filter)
                                 |     | 
      WIGFLG = 0 ----------------|     | 
       (not in wiggle mode)            | 
                                       | --- ELSE ---
                                       | 
      IEGR <= VEVPHL ------------------| Fault Filter Code 334    
       (voltage OK.)                   |  (downcount fault filter)
                                       |                          
                                       | --- ELSE ---
                                       | 
                                       | no action
                                       |  (mode not active or fault present
                                       |   but not timed out yet)

      END:  EGR Off Test
































                                        33-26

                       CONTINUOUS SELF TEST, SONIC EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      This test (enabled by sonic_egr_on_test = 1) checks to see if the  conditions
      are right to test the EGR valve for opening.  This requires that the PCT_LOAD
      be low enough to insure that there is adequate vacuum and the EGR duty  cycle
      be  high  to indicate that the EEC is trying to open the valve.  Alternately,
      if code 332 is already set, the test will be enabled to allow the  system  to
      clear the code (and the MIL light) if the failure disappears.


      sonic_egr_on_test <> 1 ----------| no action
       ( do not perform test           |
         for valve opening)            |
                                       | --- ELSE ---
      C332FIL > C332LVL ---------|     | 
       (Code set, bypass         |     | 
       entry conditions)         |OR --| Do: Test for EGR Flow
                                 |     |  (perform check to see
      PCT_LOAD <                 |     |   if valve opening can be
          V_EGR_LOAD ------|     |     |   detected.)
       (enough muscle      |AND -|     |  
        vacuum )           |           |  
                           |           | 
      EGRDC > VCRTDC- -----|           | 
       (trying real hard to            | 
       to open EGR valve)              | 
                                       | --- ELSE ---
                                       |
                                       | no action
                                       |  (can't run test yet because 
                                       |   load / duty cycle entry conditions
                                       |   have not been met.)       






























                                        33-27

                       CONTINUOUS SELF TEST, SONIC EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN:  Test for EGR FLow

      At this point, the load and EGR duty cycle (or code  332)  requirements  have
      been  met  to determine if valve opening can be detected.  A check is made to
      see if this is the first pass through the test - if it  is,  C332FIL  may  be
      reset.  Otherwise, the test continues on.


      V_EGR_ON_CR = 0 -----------------| V_EGR_ON_CR := 1
       (not in this mode last          |  (set up to skip this step next
        background pass)               |   pass)
                                       | 
                                       | VIP_TIMER_EX := 0
                                       |  (start up timer)
                                       | 
                                       | Do: EGR On Fault Filter Reset
                                       | 
                                       | --- ELSE ---
                                       | 
                                       | no action
                                       |  (continue to next part of test)


      This is the test to determine if the EGR valve has opened.  At this point all
      of the conditions should be right to insure that the valve should be opened a
      significant amount.  If an adequate opening is not detected for a  period  of
      time, a fault is assumed.


      IEGR <= VEVPCL ------------|
       (open valve not           | 
        observed)                | 
                                 |
      VIP_TIMER_EX >=            |AND -| error_detected := 1
                   V_EGR_CTMR ---|     | Fault Filter Code 332
       (enough time in test)     |     |  (upcount fault filter)
                                 |     | 
      WIGFLG = 0 ----------------|     | 
       (not in wiggle mode)            | 
                                       | --- ELSE ---
                                       | 
      IEGR > VEVPCL -------------------| Fault Filter Code 332
       (voltage OK.)                   |  (downcount fault filter)
                                       | 
                                       | --- ELSE ---
                                       | 
                                       | no action
                                       |  (mode not active or fault present
                                       |   but not timed out yet)

      END:  Test for EGR FLow









                                        33-28

                       CONTINUOUS SELF TEST, SONIC EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN:  EGR Off Fault Filter Reset

      This is called on the first entry into the EGR off test  to  allow  resetting
      the fault filter if it has yet set it's code to avoid "pumping up" the filter
      and setting a fault if the mode is repeatedly exited and entered.

      C334FIL <= C334LVL --------------| C334FIL := 0
       (code 334 not set)              |  (Get a fresh start on fault filter)
                                       |
                                       | --- ELSE ---
                                       |  (no action)

      END:  EGR Off Fault Filter Reset


      BEGIN:  EGR On Fault Filter Reset

      This is called on the first entry into the EGR on test to allow resetting the
      fault filter if it has yet set it's code to avoid "pumping up" the filter and
      setting a fault if the mode is repeatedly exited and entered.

      C332FIL <= C332LVL --------------| C332FIL := 0
       (code 332 not set)              |  (Get a fresh start on fault filter)
                                       |
                                       | --- ELSE ---
                                       |
                                       |  (no action)

      END:  EGR On Fault Filter Reset































                                        33-29

                     CONTINUOUS SELF TEST, DELTA PFE EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             DELTA PFE / PFE EGR SYSTEM TEST


      OVERVIEW

      In the documentation, this module is enabled via the  lower  case  parameters
      egr_system  and  pfe_egr  from  VC_xxxx_SEL_COMn.  In the software, a similar
      parameter may  be  used  or  the  test  may  be  enabled  based  on  whatever
      combinations of PFEHP, PFEHP_FG, EGRHP_FG, etc.  are available.

      The first step in this test is to determine if one of the testable  operation
      modes is present (Idle, non-idle with no EGR, or non-idle with EGR).

      In the Idle mode, checks are made to see if the sensor is in range (for Delta
      PFE  systems, only the high voltage checks are made).  Note:  Testing of code
      327 and code 337 is locked out until EGR has been enabled for the first time.

      During non-idle conditions with EGR off (EGR off cruise), the  input  voltage
      is checked against the minimum limit (PFE) or maximum limit (Delta PFE) after
      a time delay.

      Finally, during non-idle conditions when a large EGR duty cycle is  requested
      and  PCT_LOAD  is low enough to insure that adequate vacuum is available (EGR
      on cruise test), the input voltage is checked against the  maximum  (PFE)  or
      minimum  (Delta  PFE)  limit  after  a  time delay.  If this test passes, the
      system is tested to determine if some EGR flow is indicated.

      Lowercase   parameters   such    as    egr_off_cruise_test,    egr_idle_test,
      egr_cruise_test,  etc.  are used to control flow through the ladder diagrams.
      The use of these parameters in the documentation does not imply that  similar
      parameters are required in the software.

      Note that the flags V_EGR_IDLE, V_EGR_OFF_CR, and, V_EGR_ON_CR  are  used  to
      reset  any  fault  filters  that have partially counted up and control timers
      when a particular test mode is first entered.

























                                        33-30

                     CONTINUOUS SELF TEST, DELTA PFE EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      Registers:

       -  C327FIL = EVP/EPT circuit below minimum voltage fault filter.

       -  C332FIL = EGR valve opening not detected (Sonic, PFE) fault filter

       -  C336FIL = Exhaust pressure high/EPT  circuit  voltage  high  (PFE)  fault
          filter.

       -  C337FIL = EVP/EPT circuit above maximum voltage fault filter.

       -  CFIEPT = Continuous VIP EPT filter.

       -  EGRDC = EGR duty cycle.

       -  FIEPT = VIP EPT filter.

       -  IEGR = EGR sensor input.

       -  NBAR = Rolling average RPM.

       -  PCT_LOAD = Percent inferred LOAD (altitude independant).

       -  VEOFFDC = VIP EGR off duty cycle.

       -  VIP_TIMER_EX = VIP state timer.

       -  V_EGR_RDY = Continuous EGR test ready flag (Latched)

      Bit Flags:

       -  APT = Throttle mode flag.

       -  EFMHI = EGRHI FMEM flag.

       -  EFMLO = EGRLO FMEM flag.

       -  WIGFLG = Indicates VIP wiggle test.

      Calibration Constants:

       -  C326LVL = EPT circuit voltage low (PFE) threshold.

       -  C336LVL = Exhaust pressure high/EPT circuit voltage high (PFE) threshold.

       -  EPTMAX = Maximum EPT reading (open), counts

       -  EPTMIN = Minimum EPT reading (short), counts

       -  EPTZER_IV = Initial or default value for EPTZER and EPTBAR.

       -  VCRTDC = GR cruise test duty cycle limit, percent.

       -  VEPTCL = EPT cruise test limit, counts.




                                        33-31

                     CONTINUOUS SELF TEST, DELTA PFE EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  VEPTIH = EPT high limit at idle; units are counts end  of  essential  cal
          constant ordering.

       -  VEPTIL = EPT low limit at idle, counts.

       -  VN = Maximum idle speed, RPM.

       -  VTCEPT = EPT time constant.

       -  V_DELPFE_HP = Flag indicates DELTA PFE EGR system  present;  1  ->  DELTA
          PFE.

       -  V_EGR_CTMR = EGR cruise test timer limit.

       -  V_EGR_IDLE = EGR Idle test was in progress last background pass.

       -  V_EGR_LOAD = Maximum PCT_LOAD at which to perform EGR flow test.

       -  V_EGR_OFF_CR = Indicates that EGR off Part throttle /wot test in progress
          last background pass.

       -  V_EGR_ON_CR = Indicates that the EGR on cruise test (test for  flow)  was
          in progress last background loop.





































                                        33-32

                     CONTINUOUS SELF TEST, DELTA PFE EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: VC_EGR_DELPFE_MA_COM10


      During the power up initialization, FIEPT and CFIEPT are initialized  to  the
      value  of EPTZER_IV along with other parameters such as EPTBAR.  This is done
      so that the filtered values have a good "starting point" and possibly setting
      fault codes as they ramp up from zero.


      initialize -----------------------------| FIEPT = EPTZER_IV
       (ram initialization, once              | CFIEPT = EPTZER_IV
        per power up or on re-init)


      Determine if PFE EGR is present, if it is determine  if  the  conditions  are
      correct for the idle test or one of the cruise tests.

      egr_system <> pfe_egr ------------------| (exit test. no PFE EGR to be
       (parameters egr_system and pfe_egr     |  tested)
        from the VC_xxxx_SEL_COMn module)     | egr_idle_test := 0     
                                              | egr_off_cruise_test := 0
                                              | egr_on_cruise_test := 0
                                              | 
                                              | --- ELSE ---
      APT = -1 -------------------------|     | 
        (closed throttle)               |AND -| FIEPT := ROLAV(IEGR, VTCEPT)
                                        |     | 
      NBAR < VN ------------------------|     | egr_idle_test := 1
       (idle RPM)                             |  (perform idle test)    
                                              |                         
                                              | egr_off_cruise_test := 0
                                              | egr_on_cruise_test := 0 
                                              |
                                              | V_EGR_ON_CR := 0
                                              | V_EGR_OFF_CR := 0
                                              |  (clear flags for modes not
                                              |   enabled)
                                              |  (note: the existing software may 
                                              |  clear these flags at the exit from
                                              |  the idle test (test FIEPT against
                                              |  limits). This is functionaly  
                                              |  equivalent.)
                                              |
                                              | --- ELSE ---

                                (continued on next page)













                                        33-33

                     CONTINUOUS SELF TEST, DELTA PFE EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

                                              | 
      EGRDC < VEOFFDC ------------------------| V_EGR_IDLE := 0
                                              |  (not doing test at idle)
                                              | egr_idle_test := 0
                                              | 
                                              | V_EGR_ON_CR := 0
                                              | egr_on_cruise_test := 0 
                                              | 
                                              | egr_off_cruise_test := 1
                                              |  (do EGR off cruise test)
                                              |
                                              | CFIEPT := ROLAV(IEGR, VTCEPT)
                                              |  (update filtered IEGR value used 
                                              |   in test)
                                              |  (note: in existing software this 
                                              |   update may actually be done after
                                              |   testing for the first pass 
                                              |   (V_EGR_OFF_CR) and clearing fault
                                              |   filters if required. This is 
                                              |   functionally equivalent)
                                              |
                                              | --- ELSE ---
      C332FIL > C332LVL ----------------|     |
       (Code 332 set, bypass            |     |
        test entry conditions)          |OR --| V_EGR_IDLE := 0              
                                        |     |  (not doing test at idle)    
      PCT_LOAD < V_EGR_LOAD ------|     |     | egr_idle_test := 0           
       (enough muscle vacuum)     |AND -|     |                              
                                  |           | V_EGR_OFF_CR := 0            
      EGRDC > VCRTDC -------------|           | egr_off_cruise_test := 0     
       (trying to make EGR flow)              |                              
                                              | egr_on_cruise_test := 1      
                                              |  (do EGR on cruise test)     
                                              |                              
                                              | CFIEPT := ROLAV(IEGR, VTCEPT)
                                              |  (update filtered IEGR value used 
                                              |   in test)
                                              |  (note: in existing software this 
                                              |   update the first pass 
                                              |   (V_EGR_ON_CR) and may actually 
                                              |   be done after testing for
                                              |   clearing fault filters if 
                                              |   required. This is functionally 
                                              |   equivalent)
                                              |
                                              | --- ELSE ---
                                              | 
                                              | V_EGR_IDLE := 0
                                              | egr_idle_test := 0
                                              | 
                                              | V_EGR_OFF_CR := 0
                                              | egr_off_cruise_test := 0 
                                              | 
                                              | V_EGR_ON_CR := 0
                                              | egr_on_cruise_test := 0 
                                              | 
                                              |  (no EGR testing, exit)

                                        33-34

                     CONTINUOUS SELF TEST, DELTA PFE EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      If this is the first pass through the Idle test, reset any fault filters that
      have not set.

      V_EGR_IDLE = 0 -------------------|
       (last pass was not in            | 
        idle test)                      |AND -| V_EGR_IDLE := 1
                                        |     |  (this is the first background
      egr_idle_test = 1 ----------------|     |   loop in the idle test)
       (now in idle test mode)                |
                                              | Do: Idle Fault Filter Reset
                                              | Do: Idle FIEPT Test
                                              |
                                              | --- ELSE ---
                                              |
      egr_idle_test = 1 ----------------------| Do: Idle FIEPT Test
       (now in idle test mode)












































                                        33-35

                     CONTINUOUS SELF TEST, DELTA PFE EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN:  Idle FIEPT Test

      Test the filtered  EPT  input  (FIEPT)  against  maximum  limits  and  values
      expected  at  idle.   Note that this ladder diagram may not exactly match the
      software which may use nested VEPTIL / EPTMIN and VEPTIH / EPTMAX  checks  to
      reduce  execution  time.   However,  as  long  as  EPTMIN < VEPTIL < VEPTIH <
      EPTMAX, the function is equivalent.  Code 327 is locked  out  for  Delta  PFE
      systems unitll EGR is first enabled.

      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
      NOTE:
      EFMLO is passed to the fault filter routine every time it is called for  code
      327 and returns value of 1 if the code is set and returns a value of 0 if the
      code is clear.  Similarly, EFMHI is passed with code 337.   EFMHI  and  EFMLO
      are  used  to  set  and  clear  EFMFLG.   This  logic is described in the EGR
      chapter.

      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!


      FIEPT <= EPTMIN ------------------| 
       (open circuit)                   |AND -| error_detected := 1
                                        |     | Fault Filter Code 327
      V_EGR_RDY = 1 --------------------|     |  (upcount code 327)
       (EGR has been                          |  (See note above)
        enabled)                              |
                                              | Fault Filter Code 326
                                              | Fault Filter Code 336
                                              | Fault Filter Code 337
                                              |  (Down count other codes)
                                              |  (See note above)
                                              | 
                                              | --- ELSE ---
                                              |  
      FIEPT >= EPTMAX ------------------|     |                          
       (short to power)                 |AND -| error_detected := 1      
                                        |     | Fault Filter Code 337    
      V_EGR_RDY = 1 --------------------|     |  (upcount code 337)      
       (EGR has been                          |  (See note above)        
        enabled)                              |                          
                                              | Fault Filter Code 326    
                                              | Fault Filter Code 327    
                                              | Fault Filter Code 336    
                                              |  (Down count other codes)
                                              |  (See note above)        
                                              |  
                                              | --- ELSE ---

                                (continued on next page)











                                        33-36

                     CONTINUOUS SELF TEST, DELTA PFE EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

      FIEPT < VEPTIL -------------------|     |  
       (low value)                      |AND -| error_detected := 1
                                        |     | Fault Filter Code 326
      WIGFLG = 0 -----------------------|     |  (upcount code 326)
       (not in wiggle test)                   |
                                              | Fault Filter Code 327
                                              | Fault Filter Code 336
                                              | Fault Filter Code 337
                                              |  (Down count other codes)
                                              |  (See note above)
                                              |
                                              | --- ELSE ---
      FIEPT > VEPTIH -------------------|     |  
       (high value)                     |AND -| error_detected := 1
                                        |     | Fault Filter Code 336
      WIGFLG = 0 -----------------------|     |  (upcount code 336)
       (not in wiggle test)                   |
                                              | Fault Filter Code 326
                                              | Fault Filter Code 327
                                              | Fault Filter Code 337
                                              |  (Down count other codes)
                                              |  (See note above)
                                              |
                                              | --- ELSE ---
                                              |
                                              | Fault Filter Code 326
                                              | Fault Filter Code 327
                                              | Fault Filter Code 336
                                              | Fault Filter Code 337
                                              |  (Down count all codes)   
                                              |  (See note above)

      END: Idle FIEPT Test             

























                                        33-37

                     CONTINUOUS SELF TEST, DELTA PFE EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      This is the start of the EGR on cruise test.   This  test  is  run  when  the
      engine is not at idle, and either the EGR duty cycle / load requirements have
      been met, or fault 332 is set.  First, V_EGR_OFF_CR is checked and if this is
      the  first pass through the fault filters are cleared out and VIP_TIMER_EX is
      reset.  The test will then proceed.

      V_EGR_ON_CR = 0 ------------------|     
       (last pass was not in            |     
        this test)                      |AND -| V_EGR_ON_CR := 1
                                        |     |  (this is the first background loop
      egr_on_cruise_test = 1 -----------|     |   in this test mode)
       (now in cruise test)                   |
                                              | VIP_TIMER_EX := 0
                                              |  (reset for time delay before
                                              |   testing)
                                              |
                                              | Do: EGR On Cruise Fault Filter
                                              |     Reset
                                              | Do: EGR On Cruise Test
                                              |
                                              | --- ELSE --- 
                                              | 
      egr_on_cruise_test = 1 -----------------| Do: EGR On Cruise Test
       (now in cruise test)


      BEGIN: EGR On Cruise Test

      This is the EGR on cruise test.  This will be active when the EGR duty  cycle
      and  load  criteria  is  met  (or code 332 set) and VIP_TIMER_EX has timed up
      enough since it was reset in the diagram above.  Checks are made against  the
      absolute  minimum  (Delta  PFE)  or Maximum (PFE) limits.  If these pass, the
      flow check is made.  It is assumed that if CFIEPT is high (Delta PFE) or  low
      (PFE)  enough,  EGR  flow has been detected.  Note:  For PFE systems, exhaust
      backpressure will tend to raise CFIEPT, the flow test can not be performed at
      high airflows (high backpressure).

      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
      NOTE:
      EFMLO is passed to the fault filter routine every time it is called for  code
      327 and returns value of 1 if the code is set and returns a value of 0 if the
      code is clear.  Similarly, EFMHI is passed with code 337.   EFMHI  and  EFMLO
      are  used  to  set  and  clear  EFMFLG.   This  logic is described in the EGR
      chapter.

      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!














                                        33-38

                     CONTINUOUS SELF TEST, DELTA PFE EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      VIP_TIMER_EX < V_EGR_CTMR --------------| no action
       (not enough time in test               |
        to set faults)                        | 
                                              |
                                              | --- ELSE ---
      V_DELPFE_HP = 1 ------------------|     |
       (Delta PFE)                      |AND -| error_detected := 1
                                        |     | Fault Filter Code 327
      CFIEPT <= EPTMIN -----------------|     |  (upcount fault filter)
       (input below minimum)                  |  (see note above)
                                              | 
                                              | --- ELSE ---
      V_DELPFE_HP = 1 ------------------|     | 
       (Delta PFE)                      |     | 
                                        |     | 
      CFIEPT < VEPTCL ------------------|AND -| Fault Filter Code 327
       (no flow detected)               |     |  (downcount fault filter)
                                        |     |  (see note above)
      WIGFLG = 0 -----------------------|     | error_detected := 1
       (not in wiggle mode)                   | Fault Filter Code 332
                                              |  (upcount fault filter)
                                              |
                                              | --- ELSE ---
                                              |
      V_DELPFE_HP = 1 ------------------------| Fault Filter Code 327
       (Delta PFE)                            |  (see note above)
                                              | Fault Filter Code 332
                                              |  (downcount fault filter)
                                              |
                                              | --- ELSE ---
                                              |
      CFIEPT >= EPTMAX -----------------------| error_detected := 1
       (input above maximum)                  | Fault Filter Code 337
       (V_DELPFE_HP = 0)                      |  (upcount fault filter)
        (regular PFE)                         |  (see note above)
                                              |
                                              | --- ELSE ---
      CFIEPT > VEPTCL ------------------|     |                          
       (no flow detected)               |     | 
       (V_DELPFE_HP = 0)                |AND -| Fault Filter Code 337
        (regular PFE)                   |     |  (downcount fault filter)
                                        |     |  (see note above)
      WIGFLG = 0 -----------------------|     |
       (not wiggle mode)                      | error_detected := 1
                                              | Fault Filter Code 332
                                              |  (upcount fault filter)
                                              |
                                              | --- ELSE ---
                                              |
                                              | Fault Filter Code 337
                                              | Fault Filter Code 332
                                              |  (downcount fault filter)
                                              |  (see note above)
                                              |  (V_DELPFE_HP = 0) 
                                              |  (regular PFE)

      END: EGR On Cruise Test



                                        33-39

                     CONTINUOUS SELF TEST, DELTA PFE EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      This is the start of the EGR off cruise test.  This  test  is  run  when  the
      engine  is  not  at idle, and either the EGR duty cycle is less than VEOFFDC.
      First, V_EGR_OFF_CR is checked and if this is  the  first  pass  through  the
      fault  filters are cleared out and VIP_TIMER_EX is reset.  The test will then
      proceed.

      V_EGR_OFF_CR = 0 -----------------|
       (last pass was not in            |  
        this test)                      |AND -| V_EGR_OFF_CR := 1
                                        |     |  (this is the first background loop
      egr_off_cruise_test = 1 ----------|     |   in this test mode)
       (now in EGR off cruise test)           |
                                              | VIP_TIMER_EX :=  0
                                              |  (reset for time delay before
                                              |   testing)
                                              |
                                              | Do: EGR Off Cruise Fault Filter 
                                              |     Reset
                                              | Do: EGR Off Cruise Test
                                              |
                                              | --- ELSE ---
                                              |
      egr_off_cruise_test = 1 ----------------| Do: EGR Off Cruise Test
       (now in EGR off cruise test)




































                                        33-40

                     CONTINUOUS SELF TEST, DELTA PFE EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: EGR Off Cruise Test

      This is the EGR off cruise test.  This will be active when the EGR duty cycle
      is  low enough and VIP_TIMER_EX has timed up enough since it was reset in the
      diagram above.  Checks are made against the absolute maximum (Delta  PFE)  or
      minimum (PFE) limits.

      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
      NOTE:
      EFMLO is passed to the fault filter routine every time it is called for  code
      327 and returns value of 1 if the code is set and returns a value of 0 if the
      code is clear.  Similarly, EFMHI is passed with code 337.   EFMHI  and  EFMLO
      are  used  to  set  and  clear  EFMFLG.   This  logic is described in the EGR
      chapter.

      !!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!

      VIP_TIMER_EX < V_EGR_CTMR --------------| no action
       (not enough time in test               |
        to set faults)                        |
                                              |
                                              | --- ELSE ---
      V_DELPFE_HP = 1 ------------------|     |
       (Delta PFE)                      |     |  
                                        |     |  
      CFIEPT > EPTMAX ------------------|AND -| error_detected := 1
       (input above maximum)            |     | Fault Filter Code 337
                                        |     |  (upcount fault filter)
      V_EGR_RDY = 1 --------------------|     |  (see note above)
       (EGR has been enabled)                 |
                                              | --- ELSE ---
                                              |
      V_DELPFE_HP = 1 ------------------------| Fault Filter Code 337
       (Delta PFE)                            |  (downcount fault filter)
                                              |  (see note above)
                                              | 
                                              | --- ELSE ---
      CFIEPT < EPTMIN ------------------|     |                        
       (input below minimum)            |     | 
       (V_DELPFE_HP = 0)                |AND -| error_detected := 1
                                        |     | Fault Filter Code 327
      V_EGR_RDY = 1 --------------------|     |  (upcount fault filter)
       (EGR has been enabled)                 |  (see note above)
                                              |
                                              | --- ELSE ---
                                              |
                                              | Fault Filter Code 327    
                                              |  (see note above)
                                              |  (regular PFE)    
                                              |  (V_DELPFE_HP = 0)

      END: EGR Off Cruise Test








                                        33-41

                     CONTINUOUS SELF TEST, DELTA PFE EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: Idle Fault Filter Reset

      This is called on the first entry into the idle test to allow  resetting  any
      fault  filters  that  have  not  yet set their code to avoid "pumping up" the
      filter and setting a fault if the mode is repeatedly exited and entered.

      EFMLO = 0 ------------------------------| C327FIL := 0
       (code 327 not set)                     |  (Get fresh start on fault filter)
                                              |
                                              | --- ELSE ---
                                              |
                                              | no action


      C326FIL <= C326LVL ---------------------| C326FIL := 0
       (code 326 not set)                     |  (Get fresh start on fault filter)
                                              |
                                              | --- ELSE ---
                                              |
                                              | no action


      C336FIL <= C336LVL ---------------------| C336FIL := 0
       (code 336 not set)                     |  (Get fresh start on fault filter)
                                              |
                                              | --- ELSE ---
                                              |
                                              | no action


      EFMHI = 0 ------------------------------| C337FIL := 0
       (code 337 not set)                     |  (Get fresh start on fault filter)
                                              |
                                              | --- ELSE ---
                                              |
                                              | no action

      END: Idle Fault Filter Reset






















                                        33-42

                     CONTINUOUS SELF TEST, DELTA PFE EGR - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: EGR on Cruise Fault Filter Reset

      This is called on the first entry into  the  EGR  on  cruise  test  to  allow
      resetting  any  fault  filters  that  have  not  yet  set their code to avoid
      "pumping up" the filter and setting a fault if the mode is repeatedly  exited
      and entered.

      C332FIL <= C332LVL ---------------------| C332FIL := 0
       (code 332 not set)                     |  (Get fresh start on fault filter)
                                              |
                                              | --- ELSE ---
                                              |
                                              | no action


      EFMHI = 0 ------------------------------| C337FIL := 0
       (code 337 not set)                     |  (Get fresh start on fault filter)
                                              |
                                              | --- ELSE ---
                                              |
                                              | no action


      EFMLO = 0 ------------------------------| C327FIL := 0
       (code 327 not set)                     |  (Get fresh start on fault filter)
                                              |
                                              | --- ELSE ---
                                              |
                                              | no action

      END: EGR on Cruise Fault Filter Reset


      BEGIN: EGR Off Cruise Fault Filter Reset

      This is called on the first entry into the  EGR  off  cruise  test  to  allow
      resetting  any  fault  filters  that  have  not  yet  set their code to avoid
      "pumping up" the filter and setting a fault if the mode is repeatedly  exited
      and entered.

      EFMLO = 0 ------------------------------| C327FIL := 0
       (code 327 not set)                     |  (Get fresh start on fault filter)
                                              |
                                              | --- ELSE ---
                                              |
                                              | no action


      EFMHI = 0 ------------------------------| C337FIL := 0
       (code 337 not set)                     |  (Get fresh start on fault filter)
                                              |
                                              | --- ELSE ---
                                              |
                                              | no action

      END: EGR Off Cruise Fault Filter Reset




                                        33-43

                   CONTINUOUS SELF TEST, EGR SYSTEM SELECT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            EGR SYSTEM SELECTION (PFE/SONIC)


      OVERVIEW

      This module determines if PFE, Sonic, or no EGR is present  based  on  PFEHP.
      If  there  is  no EGR, the FMEM flags and Code 332 are set to zero for bullet
      proofing.  It also sets the value of egr_system to enable/disable the  PFE  /
      delta PFE EGR and Sonic EGR tests.

      By putting this logic in a separate module outside the actual EGR tests,  the
      total  number  of  unique strategy modules required to document the tests for
      the various combinations of EGR types along with  the  variations  on  PFEHP,
      PFEHP_FG,  no  PFEHP,  etc.   are  reduced.   Note that the use of lower case
      parameters (egr_system, pfe_egr) does not imply that a parameter  be  created
      in  the  software  - PFEHP can still be used in the assembly code if the same
      functionality is maintained.



      DEFINITIONS

      Registers:

       -  C332FIL = EGR valve opening not detected (Sonic, PFE) fault filter.

      Bit Flags:

       -  EFMHI = EGRHI FMEM flag.

       -  EFMLO = EGRLO FMEM flag.

      Calibration Constants:

       -  PFEHP = Switch to select EGR strategy; 2 -> do not use any EGR, 1 ->  use
          PFE strategy, 0 -> use sonic strategy.
























                                        33-44

                   CONTINUOUS SELF TEST, EGR SYSTEM SELECT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                         STRATEGY MODULE: VC_DELPFE_SON_SEL_COM1


      unconditionally --------------| sonic_egr := 0
                                    | pfe_egr := 1
                                    | no_egr := 2
                                    |  (supply numeric value because symbolic
                                    |   names are not part of this stupid
                                    |   language. Note that there is no real
                                    |   reason to actually look at this diagram
                                    |   since the numeric values are not actually
                                    |   used anywhere.)


      PFEHP = 0 --------------------| egr_system := sonic_egr
                                    |  (continue to EGR tests, this parameter 
                                    |   is used to enable EGR test)
                                    | 
                                    | --- ELSE ---
                                    | 
      PFEHP = 1 --------------------| egr_system := pfe_egr
                                    |  (continue to EGR tests, this parameter 
                                    |   is used to enable EGR test)
                                    | 
                                    | --- ELSE ---
                                    | 
                                    | EFMLO := 0
                                    | EFMHI := 0
                                    | C332FIL := 0
                                    |  (No EGR system, therefore no EGR failure)
                                    | 
                                    | egr_system := no_egr
                                    |  (Done testing EGR system, exit)


























                                        33-45

               TRANSMISSION OIL TEMPERATURE SENSOR (CONTINUOUS) - CBAZA
                     PED-PTEM FoMoCo, PROPRIETARY & CONFIDENTIAL


                                  TOT OPEN/SHORT TESTS
      PROCESS
                              STRATEGY MODULE: VC_TOT_COM2


                               -----------
                             (    ENTER    )
                               -----------
                                    |
                                    v
                               /---------\   NO      !----------!
                              /  ITOT =>  \--------->! FAULT 638!
                              \  TOTMIN ? /          !----------!
                               \---------/                 |
                                    |  YES                 |
                                    |<---------------------|
                                    v
                            !--------------!
                            !  DO FAULT    !
                            ! FILTERING    !
                            !--------------!
                                    |
                                    v
                               /---------\   NO      !----------!
                              /  ITOT <=  \--------->! FAULT 637!
                              \  TOTMAX ? /          !----------!
                               \---------/                 |
                                    |  YES                 |
                                    |<---------------------|
                                    v
                            !--------------!
                            !  DO FAULT    !
                            ! FILTERING    !
                            !--------------!
                                    |
                                    v
                               -----------
                             (     EXIT    )
                               -----------





















                                        33-46

                        TFI IGNITION TEST (CONTINUOUS) - CBAZA
                     PED-PTEM FoMoCo, PROPRIETARY & CONFIDENTIAL


                              TFI IGNITION TEST


      OVERVIEW


      The TFI Ignition Test monitors the integrity of the PIP  and  IDM
      signals.   The  PIP  signal  is monitored using two methods.  The
      first determines if a "hard" failure exists by checking how  long
      a  period  of  time  has elapsed since the last PIP interrupt has
      occurred.  The second method checks a relationship between  three
      consecutive  PIP periods (see the PIP down logic contained within
      this test).  This second method is sensitive to intermittent  PIP
      failures.   The IDM is monitored by comparing the relative number
      of PIP periods to the number of IDM periods.  In a system with no
      PIP  or  IDM  failures,  the  relative  number will be one of the
      following:   (-1,  0,  1).   The  register  PIPIDM  contains  the
      relative  number  of  PIPs  to IDMs.  When this register contains
      values outside of the expected (how far outside the  expected  is
      calibratable)  a  failure  is  indicated.   Since  the PIP signal
      integrity is known before the IDM signal is  tested  the  failure
      indication is due to an IDM failure.

      Service code 211 = PIP circuit failure.

      Service code 212 = IDM circuit failure.



      DEFINITIONS

      Self Test Registers:

      - C211CNT = Code 211 warmup counter

      - C211FIL = Code 211 fault filter

      - C212CNT = Code 212 warmup counter

      - C212FIL = Code 212 fault filter  

      - PIPIDM = Counter incremented at each PIP down and
                 decremented at each IDM up.

      - VPIPERRCNT = Number of PIP errors between PIP background
                   executions.

      - VPIPPASCNT = Number of good PIP occurrences between PIP
                     background executions.











                                        33-47

                        TFI IGNITION TEST (CONTINUOUS) - CBAZA
                     PED-PTEM FoMoCo, PROPRIETARY & CONFIDENTIAL


                              TFI IGNITION TEST


      Self Test Flags:

      - C211_KAM_BIT = Code 211 kam bit.

      - C452_KAM_BIT = Code 452 kam bit.

      - C528_KAM_BIT = Code 528 kam bit.

      - C536_KAM_BIT = Code 536 kam bit.

      - ERROR_DETECTED = Error flag passed to fault filter routine.

      - IDM_BYPASS = When set indicates to bypass IDM test as a 
                     result of a PIP failure.

      - V_PRE_CLUTCH = Last background clutch position.

      - WIGFLG = When set indicates wiggle test activated.

      Self Test Calibration Constants:

      - C211LVL = Code 211 fault filter threshold.

      - C211UP   = Code 211 fault filter increment.

      - C212LVL  = Code 212 fault filter threshold.

      - C212UP   = Code 212 fault filter increment.

      - IDMERR   = PIP vs. Tach occurrence to indicate an IDM error.

      - PIPERR   = PIP error level to set PIP fault.

      - VDLY6    = Time to bypass IDM test after valid PIP occurs.

      - VPMAX    = Maximum PIP period to enter PIP test.

      - V_CL_BRK_TM = Hard fault PIP test time delay after driver
                      uses brake/clutch.

      - V_IDM_NOISE = Value of PIPIDM that determines IDM noise.

      - V_PIP_HARD  = Maximum time between PIPs to indicate a hard
                      fault.

      Self Test Timers:

      - V_CL_BRK_TMR = Time since driver declutched or braked.









                                        33-48

                        TFI IGNITION TEST (CONTINUOUS) - CBAZA
                     PED-PTEM FoMoCo, PROPRIETARY & CONFIDENTIAL


                              TFI IGNITION TEST


      Base Strategy Registers:

      - DT12S = Current PIP period.

      - DT23S = Previous PIP period.

      - DT34S = Second previous PIP period.

      Base Strategy Flags:

      - BIFLG = When set indicates brake is on.

      - NDSFLG = When set indicates in neutral.

      Base Strategy Calibration Constants:



      PROCESS
                      STRATEGY MODULE: VC_TFI_IGN_COM1


      BEGIN: TFI_IGN_TEST_BACKGROUND  


      WIGFLG = 1 -----------| DO: DRIVER_ACTION
       (In wiggle mode)     |
                            | --- ELSE ---
                            |
                            | DO: DRIVER_ACTION
                            | DO: PIP_BG_FAULT_ASSESSMENT
                            | DO: PIP_BG_FAULT_FILTER_CONTROL
                            | DO: IDM_BG


      END: TFI_IGN_TEST_BACKGROUND





















                                        33-49

                        TFI IGNITION TEST (CONTINUOUS) - CBAZA
                     PED-PTEM FoMoCo, PROPRIETARY & CONFIDENTIAL


                              TFI IGNITION TEST


      BEGIN: DRIVER_ACTION (for vehicles that do NOT support a
             clutch switch)


      This logic provides a mechanism for determining  if  braking  has
      occurred.   Applying  the  brake  has  the  potential  to cause a
      vehicle stall.  When the brake is depressed  by  the  driver  the
      timer  V_CL_BRK_TMR  is  reset.  This timer is then used in tests
      (e.g.  PIP test) that may require knowledge of the application of
      the brake with its potential to stall the engine.  The use of the
      timer can then prevent a false failure indication due to a  stall
      should a stall occur.



      BIHP = 0 ---------------|
       (no boo input)         |
                              |
      C536_KAM_BIT = 1 -------|
       (boo failure)          |OR --| V_CL_BRK_TMR := 0
                              |     
      C452_KAM_BIT = 1 -------|
       (vss failure, boo      |
        cannot be tested)     |
                              |
      BIFLG = 1 --------------|
       (brake on)



      END: DRIVER_ACTION


























                                        33-50

                        TFI IGNITION TEST (CONTINUOUS) - CBAZA
                     PED-PTEM FoMoCo, PROPRIETARY & CONFIDENTIAL


                              TFI IGNITION TEST


      BEGIN: PIP_BG_FAULT_ASSESSMENT


      DT12S < VPMAX ----------------|
       (rpm sufficient to test)     |
      TSLPIP <= V_PIP_HARD ---------|AND --| C211FIL := C211FIL +
       (no hard fault)              |      |  (C211UP * VPIPERRCNT) - 
      VPIPERRCNT = 0 ---------------|      |   VPIPPASCNT
       (no intermittent fault)             | VPIPPASCNT := 0
                                           |
                                           | --- ELSE ---
                                           |
      DT12S < VPMAX ----------------|      |
                                    |AND --| C211FIL := C211FIL +
      TSLPIP <= V_PIP_HARD ---------|      |  (C211UP * VPIPERRCNT) -
                                           |   VPIPPASCNT
                                           | IDM_BYPASS := 1
                                           | TSLIDM := 0
                                           | VPIPERRCNT := 0
                                           | VPIPPASCNT := 0
                                           |  (intermittent fault
                                           |   detected) 
                                           |
                                           | --- ELSE ---
                                           |
      DT12S < VPMAX ----------------|      |
                                    |AND --| IDM_BYPASS := 1
      V_CL_BRK_TMR < V_CL_BRK_TM ---|      | TSLIDM := 0
       (driver action delay)               | VPIPERRCNT := 0
                                           | VPIPPASCNT := 0
                                           |
                                           | --- ELSE ---
                                           |
      DT12S < VPMAX -----------------------| IDM_BYPASS := 1
                                           | TSLIDM := 0
                                           | ERROR_DETECTED:= 1
                                           |  (hard fault indicated)
                                           | VPIPPASCNT  := 0
                                           | VPIPERRCNT := 0
                                           |
                                           | --- ELSE ---
                                           |
                                           | VPIPERRCNT := 0
                                           | VPIPPASCNT := 0


      END: PIP_BG_FAULT_ASSESSMENT










                                        33-51

                        TFI IGNITION TEST (CONTINUOUS) - CBAZA
                     PED-PTEM FoMoCo, PROPRIETARY & CONFIDENTIAL


                              TFI IGNITION TEST

      BEGIN: PIP_BG_FAULT_FILTER_CONTROL


      ERROR_DETECTED = 1 --------| DO: FAULT FILTER ROUTINE (code 211)
       (hard fault indicated)    |
                                 | --- ELSE ---
                                 |
      DT12S >= VPMAX ------|     |
                           |AND -| C211FIL := 0
      C211FIL <= C211LVL --|     |
                                 | --- ELSE --
                                 |
      C211FIL > C211LVL ---------| C211_KAM_BIT := 1
                                 | C211CNT := 0
                                 | (for intermittent detection)

      END: PIP_BG_FAULT_FILTER_CONTROL



      BEGIN: IDM_BG

      IDM_BYPASS = 1 ------------|
       (bypass due to pip fault) |
      C212FIL > C212LVL ---------|AND --| IDM_BYPASS := 0
       (MIL due to IDM on)       |      | TSLIDM := 0
      TSLIDM > VDLY6 ------------|      | PIPIDM := 0
       (bypass time expired)            |  (bypass time has expired,
                                        |   MIL was on due to IDM
                                        |   failure)
                                        |
                                        | --- ELSE ---
                                        |
      IDM_BYPASS = 1 ------------|      |
                                 |AND --| C212FIL := 0
      TSLIDM > VDLY6 ------------|      | IDM_BYPASS := 0
                                        | TSLIDM := 0
                                        | PIPIDM := 0
                                        |  (bypass time has expired,
                                        |   MIL was not on due to IDM
                                        |   failure)
                                        |
                                        | --- ELSE ---
                                        |
      IDM_BYPASS = 1 -------------------| PIPIDM := 0
                                        |  (bypass time has not 
                                        |   expired)
                                        |
                                        | --- ELSE ---
                                        |

                                       Continued on Next Page






                                        33-52

                        TFI IGNITION TEST (CONTINUOUS) - CBAZA
                     PED-PTEM FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   Continued from Previous Page



      PIPIDM > IDMERR ------------|     | 
       (missing idms)             |OR --| ERROR_DETECTED := 1
      PIPIDM < V_IDM_NOISE -------|     | PIPIDM := 0
       (extra or intermittent idm)      | DO: FAULT FILTER ROUTINE
                                        |     (code 212)
                                        |
                                        | --- ELSE ---
                                        |
                                        | DO: FAULT FILTER ROUTINE
                                        |     (Code 212)

      END: IDM_BG












































                                        33-53

                        TFI IGNITION TEST (CONTINUOUS) - CBAZA
                     PED-PTEM FoMoCo, PROPRIETARY & CONFIDENTIAL


          
                              TFI IGNITION TEST

      TFI Ignition Test Foreground

      PIP Down Processing:

      Under the constraint of  constant  acceleration  over  three  PIP
      periods ((DT12S + DT34S)/2)/DT23S will approach the value of 1 if
      the periods are small enough (i.e.  sufficient  RPM).   Deviation
      from  1 indicates that one or more of the periods DT12S, DT23S or
      DT34S has been corrupted.

      CRKFLG = 1 -----------------------------| PIPIDM := 0
       (crank mode)                           | VPIPERRCNT := 0
                                              | VPIPPASCNT := 0
                                              |
                                              | --- ELSE ---
      ((DT12S + DT34S)/2)/DT23S <= -|         |
       (1 + PIPERR) (intermittent   |OR -|    |
       PIP no failure criteria)     |    |AND-| VPIPPASCNT := VPIPPASCNT + 1
      ((DT12S + DT34S)/2)/DT23S ----|    |    | VPIPFLG := 0
       >= (1 - PIPERR)                   |    |  (no intermittent pip failure)
                                         |    |
      PIPIDM = 127 ----------------------|    |
       (pipidm at upperclip, do not           | --- ELSE ---
        increment)                            |
                                              |
      ((DT12S + DT34S)/2)/DT23S <= -|         |
       (1 + PIPERR)                 |OR ------| PIPIDM := PIPIDM + 1
      ((DT12S + DT34S)/2)/DT23S ----|         | VPIPPASCNT := VPIPPASCNT + 1
       >= (1 - PIPERR)                        | VPIPFLG := 0
                                              |  (no intermittent pip failure)
                                              |
                                              | --- ELSE ---
                                              |
      PIPIDM = 127 ---------------------------| VPIPERRCNT := VPIPERRCNT + 1
                                              | VPIPFLG := 1
                                              |  (intermittent pip failure)
                                              |
                                              | --- ELSE ---
                                              |
                                              | VPIPERRCNT := VPIPERRCNT + 1
                                              | VPIPFLG := 1
                                              | PIPIDM := PIPIDM + 1
                                              |  (intermittent pip failure)

      End of PIP down Processing


      IDM Up Processing:

      PIPIDM <> -128 ----------------| PIPIDM := PIPIDM - 1
       (pipidm not at lower clip, ok
        to decrement)

      End of IDM Up Processing



                                        33-54

             CONTINUOUS SELF TEST, THROTTLE POSITION SENSOR TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                     TP SENSOR TEST
      PROCESS                                  
                              STRATEGY MODULE: VC_TPS_COM1


                          -----------
                        (    ENTER    )
                          -----------
                               |
                               v
                          /---------\   NO      !----------!
                         / ITP >=    \--------->! FAULT 122!
                         \ TAPMIN ?  /          !----------!
                          \---------/                 |
                               |  YES                 |
                               |<---------------------|
                               v
                       !--------------!
                       !   DO FAULT   !
                       ! FILTERING 122!
                       !--------------!
                               |
                               v
                          /---------\   NO      !----------!
                         / ITP <=    \--------->! FAULT 123!
                         \ TAPMAX ?  /          !----------!
                          \---------/                 |
                               |  YES                 |
                               |<---------------------|
                               v
                       !--------------!
                       !   DO FAULT   !
                       ! FILTERING 123!
                       !--------------!
                               |
                               |
                               v
                          -----------
                        (     EXIT    )
                          -----------




















                                        33-55

               CONTINUOUS SELF TEST, VEHICLE SPEED SENSOR TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                VEHICLE SPEED SENSOR TEST


      OVERVIEW

      The VEHICLE SPEED SENSOR TEST determines if the VSS is not  producing  output
      when  the vehicle is moving.  The test relies on the inferred motion detector
      flag VMOVING to determine vehicle motion.  VSFMFLG is set when  the  lack  of
      VSS input indicates a failure.



      DEFINITIONS

      Registers:

       -  C452CNT = Code 452 warmup counter.

       -  C452FIL = Code 452 fault filter.

       -  PUTMR = Time since powerup or re-initialization.

       -  VSBARV = Filtered vehicle speed for self-test.

       -  VSSTMR = Duration of VSS failure.

      Bit Flags:

       -  CRKFLG = Flag indicating crank mode.

       -  VMOVING = Flag indicates inferred vehicle motion; 1 -> moving.

       -  VSFMFLG = Vehicle speed sensor failure mode (FMEM) flag.

      Calibration Constants:

       -  C452LVL = Code 452 fault filter threshold.

       -  C452UP = Code 452 fault filter increment.

       -  VSSMN1 = Calculated vehicle speed VSS test failure threshold.

       -  VSSSW = VSS test calibration switch.

       -  VSSTIM = Minimum time with no sensor output for failure.

       -  VSTYPE = Integrated vehicle speed/cruise control system present switch.













                                        33-56

               CONTINUOUS SELF TEST, VEHICLE SPEED SENSOR TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                              STRATEGY MODULE: VC_VSS_COM1


      RUNNING = 1 ----------------------|     
       (KOER VIP)                       |OR --| Exit this module
                                        |     |   
      NO_START = 1 ---------------------|     |
       (KOEO VIP)                             |
                                              | --- ELSE ---
      CRKFLG = 1 -----------------------|     |
       (in crank mode)                  |OR --| VSSTMR = 0
                                        |     | Exit this module
      PUTMR < 4 ------------------------|     |
       (less than 4 sec since: powerup,       | 
        editing, KOEO or KOER VIP, or         |
        a reset)                              |
                                              | --- ELSE ---  
      VSSSW = 0 ------------------------|     | 
       (test cal'd out)                 |OR --| C452FIL := 0
                                        |     | VSFMFLG := 0
      VSTYPE = 0 -----------------------|     | Exit this module
       (no VSS sensor)                        |
                                              | --- ELSE ---
      VMOVING = 1 ----------------------|     | 
       (inferred vehicle motion)        |AND -| Increment VSSTMR
                                        |     | Do "CHECK VSS TIMER"   
      VSBARV < VSSMN1 ------------------|     |
       (insufficient sensor output)           |
                                              | --- ELSE ---
                                              |
      VSBARV >= VSSMN1 -----------------------| Sensor output sufficient,
                                              |  down count fault filter
                                              | CALL FAULT FILTER 452
                                              | VSSTMR := 0



      BEGIN: "CHECK VSS TIMER"

      VSSTMR >= VSSTIM -----------------------| Set error_detected  
       (duration of insufficient sensor       |  (Code 452)
        output considered a failure)          | Call fault filter 452

      END: "CHECK VSS TIMER"















                                        33-57

               CONTINUOUS SELF TEST, VEHICLE SPEED SENSOR TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      VMOVING = 0 ----------------------|
       (not in test conditions)         |AND -| Not in test, code not
                                        |     |  currently "set"
      C452FIL < C452LVL - FILHYS -------|     | Reset fault filter for
                                              |  next entry
                                              | C452FIL = 0
                                              | VSFMFLG := 0
                                              |
                                              | --- ELSE ---
                                              |
      C452FIL < C452LVL - FILHYS -------------| VSFMFLG := 0
                                              |
                                              | --- ELSE ---
                                              |
      C452FIL > C452LVL ----------------------| VSFMFLG := 1













































                                        33-58

               CONTINUOUS SELF TEST, BRAKE ON/OFF CIRCUIT TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                BRAKE ON/OFF CIRCUIT TEST


      OVERVIEW

      If the input does not change state  after  V_ZTOSPD_CNT  transitions  from  a
      speed  of  zero  to a speed of V_BOO_SPD, then the BOO input is assumed to be
      faulty.



      DEFINITIONS

      INPUTS

      Self Test Registers:

       -  C452FIL = Fault filter register for VSS test.

       -  V_ZTOSPD_CTR = Number of vehicle speed transitions from a speed  of  zero
          to a speed of V_BOO_SPD without a BOO transition.

      Base Strategy Registers:

       -  VSBAR

      Self Test Flags:

       -  V_CBOO_ENA = Continuous BOO test enable flag, 1 = test enabled.

       -  V_SPDTOZ_FLG = When set this flag indicates a transition from  a  vehicle
          speed of V_BOO_SPD to a speed of zero has occurred.

       -  V_BOO_OLD = BIFLG from previous background loop.

      Base Strategy Flags:

       -  BIFLG

       -  CRKFLG

       -  NO_START

       -  RUNNING
















                                        33-59

               CONTINUOUS SELF TEST, BRAKE ON/OFF CIRCUIT TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Self Test Calibration Constants:

       -  C536UP = Continuous BOO test fault filter increment.

       -  C536LVL = Continuous BOO test fault filter threshold.

       -  V_BOO_SPD = Vehicle speed required to increment V_ZTOSPD_CTR.

       -  V_ZTOSPD_CNT  =  Number  of  zero  MPH  to  vehicle  speed  =   V_BOO_SPD
          transitions without a brake input considered a BOO failure.

      Base Strategy Calibration Constants:

       -  BIHP

      Base Strategy Timers:

       -  PUTMR










































                                        33-60

               CONTINUOUS SELF TEST, BRAKE ON/OFF CIRCUIT TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                              STRATEGY MODULE: VC_BOO_COM1


      Test Entry Conditions:


      V_CBOO_ENA = 0 ----------------|
       (test cal'd out)              |
      BIHP = 0 ----------------------| 
       (no brake input hardware)     |
      RUNNING = 1 -------------------|
       (KOER)                        |
      NO_START = 1 ------------------|
       (KOEO)                        |OR --| exit BRAKE ON/OFF CIRCUIT 
                                     |     |       TEST
      CRKFLG = 1 --------------------|     |
       (in crank mode)               |     | --- ELSE ---
      PUTMR < 4 ---------------------|     |
       (less than 4 sec since:             | (test is performed)
        powerup, exiting KOEO or
        KOER VIP, or a reset)


      BOO Test:


      V_BOO_OLD <> BIFLG ------------| V_BOO_OLD := BIFLG
       (boo input changed)           | V_ZTOSPD_CTR := 0
                                     | call fault filter for code 536
                                     |
                                     | --- ELSE ---
                                     |
      VSBAR > V_BOO_SPD -------|     |
                               |AND -| V_ZTOSPD_CTR := V_ZTOSPD_CTR + 1
      V_SPDTOZ_FLG = 1 --------|     | V_SPDTOZ_FLG := 0
                                     | Do Boo_Failure_Process
                                     | call fault filter for code 536
                                     |
                                     | --- ELSE ---
                                     |
      VSBAR = 0 ---------------------| V_SPDTOZ_FLG := 1
                                     | call fault filter for code 536
                                     |
                                     | --- ELSE ---
                                     |
                                     | call fault filter for code 536













                                        33-61

               CONTINUOUS SELF TEST, BRAKE ON/OFF CIRCUIT TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            *** BEGIN BOO_FAILURE_PROCESS ***
                              (performed only when called)


      C452FIL > 0 -------------------| C536FIL := 0
       (VSS failure indication)      | V_ZTOSPD_CTR := 0
                                     | return
                                     | 
                                     | --- ELSE ---
                                     |
                                     |
      V_ZTOSPD_CTR > V_ZTOSPD_CNT ---| ERROR_DETECTED := 1
       (failure)                     | V_ZTOSPD_CTR := 0
                                     | return
                                     |
                                     |--- ELSE ---
                                     |
                                     | return


                             *** END BOO_FAILURE_PROCESS ***







































                                        33-62

                CONTINUOUS SELF TEST, ADAPTIVE TABLE CLIP TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                           ADAPTIVE TABLE CLIP TEST - MASS AIR


      OVERVIEW

      When the fuel system is using a KAMRF1/KAMRF2 that is at  its  rich  or  lean
      limit,  a  service code is stored in KAM.  The test distinguishes between the
      lean limit and the rich limit and also whether at idle or not at idle.



      DEFINITIONS

      Registers:

       -  C179FIL = At adaptive fuel limit (EGO #1), system lean fault filter.

       -  C181FIL = At adaptive fuel limit (EGO #1), system rich fault filter.

       -  C182FIL = At adaptive fuel limit (EGO #1),  system  lean  at  idle  fault
          filter.

       -  C183FIL = At adaptive fuel limit (EGO #1),  system  rich  at  idle  fault
          filter.

       -  C188FIL = At adaptive fuel limit (EGO #2), system lean fault filter.

       -  C189FIL = At adaptive fuel limit (EGO #2), system rich fault filter.

       -  C191FIL = At adaptive fuel limit (EGO #2),  system  lean  at  idle  fault
          filter.

       -  C192FIL = At adaptive fuel limit (EGO #2),  system  rich  at  idle  fault
          filter.

       -  KAMRF1 = Total learned fuel system correction (from EGO #1).

       -  KAMRF2 = Total learned fuel system correction (from EGO #2).

       -  LOAD = Nondimensional, generic engine load.

       -  N = Engine speed, RPM.

       -  LAMAVE1 = Average LAMBSE1.

       -  LAMAVE2 = Average LAMBSE2.

      Bit Flags:

       -  ERROR_DETECTED = Flag indicates a failure is indicated; 1 -> failure.

       -  ISCFLG = ISC mode indicator flag;  -1  ->  Dashpot  Mode,  0  ->  Dashpot
          Preposition Mode, 1 -> closed Loop RPM Control Mode, 2 -> Closed loop RPM
          Control lockout.






                                        33-63

                CONTINUOUS SELF TEST, ADAPTIVE TABLE CLIP TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  C179LVL = At adaptive fuel limit  (EGO  #1),  system  lean  fault  filter
          threshold.

       -  C179UP = At adaptive fuel  limit  (EGO  #1),  system  lean  fault  filter
          increment.

       -  C181LVL = At adaptive fuel limit  (EGO  #1),  system  rich  fault  filter
          threshold.

       -  C181UP = At adaptive fuel  limit  (EGO  #1),  system  rich  fault  filter
          increment.

       -  C182LVL = At adaptive fuel limit (EGO #1),  system  lean  at  idle  fault
          filter threshold.

       -  C182UP = At adaptive fuel limit (EGO  #1),  system  lean  at  idle  fault
          filter increment.

       -  C183LVL = At adaptive fuel limit (EGO #1),  system  rich  at  idle  fault
          filter threshold.

       -  C183UP = At adaptive fuel limit( EGO  #1),  system  rich  at  idle  fault
          filter increment.

       -  C188LVL = At adaptive fuel limit  (EGO  #2),  system  lean  fault  filter
          threshold.

       -  C188UP = At adaptive fuel  limit  (EGO  #2),  system  lean  fault  filter
          increment.

       -  C189LVL = At adaptive fuel limit  (EGO  #2),  system  rich  fault  filter
          threshold.

       -  C189UP = At adaptive fuel  limit  (EGO  #2),  system  rich  fault  filter
          increment.

       -  C191LVL = At adaptive fuel limit (EGO #2),  system  lean  at  idle  fault
          filter threshold.

       -  C191UP = At adaptive fuel limit (EGO  #2),  system  lean  at  idle  fault
          filter increment.

       -  C192LVL = At adaptive fuel limit (EGO #2),  system  rich  at  idle  fault
          filter threshold.

       -  C192UP = At adaptive fuel limit (EGO  #2),  system  rich  at  idle  fault
          filter increment.

       -  MAXADP = Maximum adaptive correction.

       -  MINADP = Minimum adaptive correction.

       -  V_ADAPTV_ENA = Adaptive fuel clip test enable switch; 1 -> enable.

       -  V_ADPLD_MAX = Maximum LOAD to perform adaptive clip test.



                                        33-64

                CONTINUOUS SELF TEST, ADAPTIVE TABLE CLIP TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  V_ADPLD_MIN = Minimum LOAD to perform adaptive clip test.

       -  V_ADPN_MAX = Maximum N to perform adaptive clip test.

       -  V_ADPN_MIN = Minimum N to perform adaptive clip test.

       -  V_LAMAV_MAX = LAMAVEn above which a clipped adaptive cell may be failed.

       -  V_LAMAV_MIN = LAMAVEn below which a clipped adaptive cell may be failed.



















































                                        33-65

                CONTINUOUS SELF TEST, ADAPTIVE TABLE CLIP TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: VC_MAADP_COM2


      Fault Filters not currently illuminating the MIL (CxxFIL  <=  CxxLVL)  get  a
      fresh start each time the test conditions become true.


      C179FIL <= C179LVL -------------|
       (failure no longer indicated)  |
                                      |                  
      LOAD <= V_ADPLD_MIN --|         |AND --| C179FIL := 0
      LOAD >= V_ADPLD_MAX --|         |
      N >= V_ADPN_MAX ------|OR ------|      
      N <= V_ADPN_MIN ------|
       (outside test range) |                  
      ISCFLG > 0 -----------|
       (idle air flow)


      C181FIL <= C181LVL -------------|
       (failure no longer indicated)  |                  
                                      |
      LOAD <= V_ADPLD_MIN --|         |AND --| C181FIL := 0
      LOAD >= V_ADPLD_MAX --|         |
      N >= V_ADPN_MAX ------|OR-------|
      N <= V_ADPN_MIN ------|
       (outside test range) |                  
      ISCFLG > 0 -----------|
       (idle air flow)


      C182FIL <= C182LVL --------------|
       (failure no longer indicated)   |AND --| C182FIL := 0
      ISCFLG <= 0 ---------------------|
       (not idle air flow)


      C183FIL <= C183LVL --------------|
       (failure no longer indicated)   |AND --| C183FIL := 0
      ISCFLG <= 0 ---------------------|
       (not idle air flow)


















                                        33-66

                CONTINUOUS SELF TEST, ADAPTIVE TABLE CLIP TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      C188FIL <= C188LVL --------------|
       (failure no longer indicated)   |
                                       |                                 
      LOAD <= V_ADPLD_MIN --|          |AND --|C188FIL :=0
      LOAD >= V_ADPLD_MAX --|          |
      N >= V_ADPN_MAX ------|OR -------|
      N <= V_ADPN_MIN ------|      
       (outside test range) |                   
      ISCFLG > 0 -----------|
       ( idle air flow)


      C189FIL <= C189LVL --------------|
       (failure no longer indicated)   |
                                       |
      LOAD <= V_ADPLD_MIN --|          |AND --| C189FIL := 0
      LOAD >= V_ADPLD_MAX --|          |
      N >= V_ADPN_MAX ------|OR -------|
      N <= V_ADPN_MIN ------|
       (outside test range  |                  
      ISCFLG > 0 -----------|
       (idle air flow)


      C191FIL <= C191LVL ---------------|
       (failure no longer indicated)    |AND --| C191FIL := 0
      ISCFLG <= 0 ----------------------|
       (not idle air flow)


      C192FIL <= C192LVL ---------------|
       (failure no longer indicated)    |AND --| C192FIL := 0
      ISCFLG <= 0 ----------------------|
       (not idle air flow)


























                                        33-67

                CONTINUOUS SELF TEST, ADAPTIVE TABLE CLIP TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Test Logic (KAM data from EGO #1).

      ISCFLG <= 0 ----------------------|      | ERROR_DETECTED := 1
       (not idle air flow)              |      | call fault filter routine
      V_ADPLD_MAX > LOAD > V_ADPLD_MIN--|      |  (code 179)
       (load window)                    |      | call fault filter routine
      V_ADPN_MAX > N > V_ADPN_MIN ------|AND --|  (code 181)
       (engine speed window)            |      | call fault filter routine
      KAMRF1 = MINADP + 0.5-------------|      |  (code 182) 
       (failure criteria)               |      | call fault filter routine
      V_ADAPTV_ENA = 1 -----------------|      |  (code 183)
      LAMAVE1 >= V_LAMAV_MAX------------|      |    
                                               | --- ELSE ---
                                               |
      ISCFLG <= 0 ----------------------|      | ERROR_DETECTED := 1
       (not idle air flow)              |      | call fault filter routine
      V_ADPLD_MAX > LOAD > V_ADPLD_MIN--|      |  (code 181)
       (load window)                    |AND --| call fault filter routine
      V_ADPN_MAX > N > V_ADPN_MIN ------|      |  (code 179)
       (engine speed window)            |      | call fault filter routine
      KAMRF1 = MAXADP + 0.5-------------|      |  (code 182)
       (failure criteria)               |      | call fault filter routine
      V_ADAPTV_ENA = 1 -----------------|      |  (code 183)
      LAMAVE1 <= V_LAMAV_MIN------------|      |
                                               | --- ELSE ---
                                               |
      ISCFLG > 0  ----------------------|      | ERROR_DETECTED := 1  
       (idle air flow)                  |AND --| call fault filter routine
      KAMRF1 = MINADP + 0.5-------------|      |  (code 182)
       (failure criteria)               |      | call fault filter routine
      V_ADAPTV_ENA = 1 -----------------|      |  (code 179)
      LAMAVE1 >= V_LAMAV_MAX------------|      | call fault filter routine
                                               |  (code 181)
                                               | call fault filter routine
                                               |  (code 183)
                                               |
                                               | --- ELSE ---
                                               |
      ISCFLG > 0 -----------------------|      | ERROR_DETECTED := 1
       (idle air flow)                  |AND --| call fault filter routine
      KAMRF1 = MAXADP + 0.5-------------|      |  (code 183)
       (failure criteria)               |      | call fault filter routine
      V_ADAPTV_ENA = 1 -----------------|      |  (code 179)
      LAMAVE1 <= V_LAMAV_MIN------------|      | call fault filter routine
                                               |  (code 181)
                                               | call fault filter routine
                                               |  (code 182)
                                               |
                                               | --- ELSE ---

                                        Continued on Next Page 









                                        33-68

                CONTINUOUS SELF TEST, ADAPTIVE TABLE CLIP TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                          Continued from Previous Page

                                               | call fault filter routine
      V_ADPLD_MAX>LOAD> V_ADPLD_MIN -|         |  (code 179)
       (load window)                 |AND-|    | call fault filter routine
      V_ADPN_MAX >N> V_ADPN_MIN -----|    |OR -|  (code 181)
       (engine speed window)              |    | call fault filter routine
      ISCFLG > 0 -------------------------|    |  (code 182)
       (idle air flow)                    |    | call fault filter routine
      V_ADAPTV_ENA = 0 -------------------|    | (code 183)
       (test cal'd out)

















































                                        33-69

                CONTINUOUS SELF TEST, ADAPTIVE TABLE CLIP TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Test Logic (KAM data from EGO #2).

      ISCFLG <= 0 ----------------------|     | ERROR_DETECTED := 1
       (not idle air flow)              |     | call fault filter routine
      V_ADPLD_MAX > LOAD > V_ADPLD_MIN--|     |  (code 188)
       (load window)                    |     | call fault filter routine
      V_ADPN_MAX > N > V_ADPN_MIN ------|AND -|  (code 189)
       (engine speed window)            |     | call fault filter routine
      KAMRF2 = MINADP + 0.5-------------|     |  (code 191) 
       (failure criteria)               |     | call fault filter routine
      NUMEGO = 2 -----------------------|     |  (code 192)
      V_ADAPTV_ENA = 1 -----------------|     |  
       (test cal'd in)                  |     | --- ELSE ---    
      LAMAVE2 >= V_LAMAV_MAX------------|     |
                                              |
                                              |
      ISCFLG <= 0 ----------------------|     | ERROR_DETECTED := 1
       (not idle air flow)              |     | call fault filter routine
      V_ADPLD_MAX > LOAD > V_ADPLD_MIN--|     |  (code 189)
       (load window)                    |AND -| call fault filter routine
      V_ADPN_MAX > N > V_ADPN_MIN ------|     |  (code 188)
       (engine speed window)            |     | call fault filter routine
      KAMRF2 = MAXADP + 0.5-------------|     |  (code 191)
       (failure criteria)               |     | call fault filter routine
      NUMEGO = 2 -----------------------|     |  (code 192)
      V_ADAPTV_ENA = 1 -----------------|     |  
       (test cal'd in)                  |     | 
      LAMAVE2 <= V_LAMAV_MIN------------|     |
                                              | --- ELSE ---
      V_ADAPTV_ENA = 1 -----------------|     |
       (test cal'd in)                  |     |
      ISCFLG > 0  ----------------------|     | ERROR_DETECTED := 1  
       (idle air flow)                  |AND -| call fault filter routine
      KAMRF2 = MINADP + 0.5-------------|     |  (code 191)
       (failure criteria)               |     | call fault filter routine
      NUMEGO = 2 -----------------------|     |  (code 188)
      LAMAVE2 >= V_LAMAV_MAX------------|     | call fault filter routine
                                              |  (code 189)
                                              | call fault filter routine
                                              |  (code 192)
                                              |
                                              | --- ELSE ---

                                              Continued on Next Page
















                                        33-70

                CONTINUOUS SELF TEST, ADAPTIVE TABLE CLIP TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                          Continued from Previous Page

      V_ADAPTV_ENA = 1 -----------------|     |
       (test cal'd in)                  |     |
      ISCFLG > 0 -----------------------|     | ERROR_DETECTED := 1
       (idle air flow)                  |AND -| call fault filter routine
      KAMRF2 = MAXADP + 0.5-------------|     |  (code 192)
       (failure criteria)               |     | call fault filter routine
      NUMEGO = 2 -----------------------|     |  (code 188)
      LAMAVE2 <= V_LAMAV_MIN------------|     | call fault filter routine
                                              |  (code 189)
                                              | call fault filter routine
                                              |  (code 191)
                                              |
                                              | --- ELSE ---
      V_ADPLD_MAX >LOAD>V_ADPLD_MIN -|        |
       (load window)                 |AND-|   | call fault filter routine
      V_ADPN_MAX >N> V_ADPN_MIN -----|    |OR-|  (code 188)
       (engine speed window)              |   | call fault filter routine
      ISCFLG > 0 -------------------------|   |  (code 189)
       (idle air flow)                    |   | call fault filter routine
      V_ADAPTV_ENA = 0 -------------------|   |  (code 191)
       (test cal'd out)                       | call fault filter routine
                                              |  (code 192)




































                                        33-71

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                         EGO SWITCHING, DYNAMIC FUEL STRATEGIES


      OVERVIEW

      This  test  determines  that  the  EGO  sensor  is  switching  properly  when
      conditions  are present that will allow a functional fuel system to cause the
      EGO sensor to switch.  The fundamental principles of the EGO/fuel system test
      are;

      1 - that while the EGO test conditions are true  a  functioning  fuel  system
      will not violate any EGO test criteria.

      2 - while the EGO test conditions are false the EGO sensor cannot be expected
      to  switch, therefore all failure indicators are reset (LAMBSE and time since
      last EGO switch criteria) or suspended (number of switches criterion).

      Three separate failure criteria are used to determine if the EGO/fuel  system
      is malfunctioning;

      1 - total number of EGO switches; if the  EGO  sensor/fuel  system  is  in  a
      condition  where  the EGO sensor(s) do not switch at all then, after the test
      has accumulated sufficient test time (to give the sensors the opportunity  to
      switch  the required number of times) and a sufficient number of switches has
      not occurred, then the test will indicate a malfunction.

      2 - LAMBSE at clip; if LAMBSE is at a clip  and  remains  there  for  V_LESTM
      seconds  while  the  test  conditions  are  true  the  test  will  indicate a
      malfunction.

      3 - Time since last EGO switch; if at any time the test conditions  are  true
      and the time since the last EGO switch took place exceeds V_LEGO_MAX the test
      will indicate a malfunction.  When one or both sensors have failed while  the
      EGO  test  was  inactive, special conditions are checked to allow testing for
      time since last EGO switch while purging is taking place.  See the  procedure
      "PURG_NOT_CAUSE_FOR_FAILURE".


      DEFINITIONS

      Registers:

       -  ATMR1 = Time since exiting crank mode.

       -  C171FIL = Lack of EGO11 switch, adaptive fuel at limit fault filter.

       -  C172FIL = Lack of EGO11 switch, EGO indicates lean fault filter.

       -  C173FIL = Lack of EGO11 switch, EGO indicates rich fault filter.

       -  C175FIL = Lack of EGO21 switch, adaptive fuel at limit fault filter.

       -  C176FIL = Lack of EGO21 switch, EGO21 indicates lean fault filter.

       -  C177FIL = Lack of EGO21 switch, EGO21 indicates rich fault filter.

       -  EGOTSTCUMTMR = accumulated time that the EGO  test  test  conditions  are
          true.


                                        33-72

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  KAMRF1 = Total learned fuel system correction from EGO11.

       -  KAMRF2 = Total learned fuel system correction from EGO21.

       -  LAMBSE1 = Desired air/fuel ratio, EGO11.

       -  LAMBSE2 = Desired air/fuel ratio, EGO21.

       -  LEGONOTPURG = In EGO test, when equal to  1,  testing  while  purging  is
          appropriate.

       -  LOAD = Nondimensional, generic engine load.

       -  PRGTMR = Total cumulative purge on time.

       -  PURGDC = Purge duty cycle.

       -  PUTMR = Time since powerup.

       -  TP_REL = Relative Throttle Position, counts.  TP - RATCH.

       -  V_EGOTST_TMR = Time since self test closed loop conditions have been met.

       -  V_LEGOTMR1 = Self test time since last EGO11 switch while test conditions
          are active.

       -  V_LEGOTMR2 = Self test time since last EGO21 switch while test conditions
          are active.

       -  V_LESTMR1 = Self test lack of EGO11 switchng timer.

       -  V_LESTMR2 = Self test lack of EGO21 switching timer.

       -  V_PUTMR = Self Test time since powerup timer.

      Bit Flags:

       -  AFMFLG = Flag indicating that ACT sensor is in/out of range.

       -  BFMFLG = BP failure flag set to 1 if BP sensor fails.

       -  CFMFLG = Flag indicating that ECT sensor is in/out of range.

       -  CRKFLG = Flag indicating crank mode.

       -  EGOFL11 = EGO11 state flag; 1 -> rich.

       -  EGOFL21 = EGO21 state flag; 1 -> rich.

       -  EGOTSTCUMFLG = Flag used to start and halt EGOTSTCUMTMR; 0 -> halt.

       -  EGREN = Flag indicating EGR is enabled; 1 -> enabled.

       -  error_detected = Flag indicates a failure is indicated; 1 -> failure.

       -  LEGOFG11 = Lack of EGO11 switching.




                                        33-73

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  LEGOFG21 = Lack of EGO21 switching.

       -  MFMFLG = MAP failure flag set to 1 if MAP sensor fails.

       -  NO_START = Engine off VIP enable flag.

       -  OL_DESIRED = Open loop desired flag; 1 = open loop desired.

       -  ISCFLG = Indication of Idle Air Flow; 1 = Idle Air Flow.

       -  RUNNING = Flag which indicates that idle speed  is  being  controlled  by
          Engine Running VIP.

       -  SWTFL11 = EGO switch flag; 1 -> EGO11 switched this background loop.

       -  SWTFL21 = EGO switch flag; 1 -> EGO21 switched this background loop.

       -  TFMFLG = Flag indicating TP sensor is in/out of range.

       -  V_LAMJMP1 = 1 -> base strategy caused a LAMBSE1  jump  since  last  EGO11
          switch.

       -  V_LAMJMP2 = 2 -> base strategy caused a LAMBSE2  jump  since  last  EGO21
          switch.

       -  V_EGO1_BYPS = Prevents additional EGO11 service code.

       -  V_EGO1L_BYPS = Prevents additional EGO11 service code.

       -  V_EGO2_BYPS = Prevents additional EGO21 service code.

       -  V_EGO2L_BYPS = Prevents additional EGO21 service code.

       -  V_EGR_OLD = Previous background EGR state.

       -  V_EGR_DLYFG  =  EGO  test  EGR  transition  indication  flag;  1  ->  EGR
          transition has occurred.

       -  V_INJ_ER_FLG = In range injector error flag.

       -  V_INRANG_FLG =  Continuous  EGO  test  intermediate  test  flag  used  by
          in-range sensor tests.

       -  V_MAF_ER_FLG = In range MAF error flag.

       -  V_TP_ER_FLG = In range TP error flag.

      Calibration Constants:

       -  C171LVL = Lack of EGO11 switch,  adaptive  fuel  at  limit  fault  filter
          threshold.

       -  C171UP = Lack of EGO11  switch,  adaptive  fuel  at  limit  fault  filter
          increment.

       -  C172LVL = Lack  of  EGO11  switch,  EGO11  indicates  lean  fault  filter
          threshold.



                                        33-74

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  C172UP =  Lack  of  EGO11  switch,  EGO11  indicates  lean  fault  filter
          increment.

       -  C173LVL = Lack  of  EGO11  switch,  EGO11  indicates  rich  fault  filter
          threshold.

       -  C173UP =  Lack  of  EGO11  switch,  EGO11  indicates  rich  fault  filter
          increment.

       -  C175LVL = Lack of EGO21 switch,  adaptive  fuel  at  limit  fault  filter
          threshold.

       -  C175UP = Lack of EGO21  switch,  adaptive  fuel  at  limit  fault  filter
          increment.

       -  C176LVL = Lack  of  EGO21  switch,  EGO21  indicates  lean  fault  filter
          threshold.

       -  C176UP =  Lack  of  EGO21  switch,  EGO21  indicates  lean  fault  filter
          increment.

       -  C177LVL = Lack  of  EGO21  switch,  EGO21  indicates  rich  fault  filter
          threshold.

       -  C177UP =  Lack  of  EGO21  switch,  EGO21  indicates  rich  fault  filter
          increment.

       -  ETST_SWCUMTM =  Accumulated  time  EGO  test  active  before  failure  is
          indicated because of number of switches failure criteria.

       -  LAMMAX = Maximum closed loop LAMBSE clip.

       -  LAMMIN = Minimum closed loop LAMBSE clip.

       -  MAXADP = Maximum adaptive correction.

       -  MINADP = Minimum adaptive correction.

       -  PRG_DEC = Purge DC decrement amount when purge overwhelms fuel control.

       -  PURGSW = When switch = 1, purging allowed during open loop fuel control.

       -  V_EGO_EGR_SW = Switch  when  set  to  1  allows  EGO  test  to  take  EGR
          transitions into account.

       -  V_EGOIDL_ENA = Switch to enable EGO sensor test at idle air flows;  1  ->
          enable.

       -  V_EGOLD_MAX = Maximum LOAD to perform EGO sensor test when not at idle.

       -  V_EGOLD_MIN = Minimum LOAD to perform EGO sensor test when not at idle.

       -  V_EGORNTM = Time since exiting crank mode (ATMR1) to wait before enabling
          EGO test.

       -  V_EGOTP_MIN = Minimum TP_REL to perform EGO sensor test when not at idle.




                                        33-75

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  V_EGOTST_TM = Time since closed loop conditions minus EGO input have been
          met.

       -  V_EGO_ENA = Continuous EGO test enable switch; 1 -> enable.

       -  V_LEGO_MAX  =  Maximum  time  since  last  EGO-n  switch  before  failure
          indication.

       -  V_LEGO_MAX2  =  Maximum  time  since  last  EGOn  switch  before  failure
          indication when failure took place while EGO testing was suspended.

       -  V_LESTM1 = Time since last EGO11 switch  limit  to  fail  continuous  EGO
          switching test.

       -  V_LESTM2 = Time since last EGO21 switch  limit  to  fail  continuous  EGO
          switching test.












































                                        33-76

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                            STRATEGY MODULE: VC_EGO_TEST_COM1


      Test Entry Conditions:

      V_EGO_ENA = 0 ----------|
       (test cal'd out)       |
                              |OR --| EXIT EGO SWITCHING TEST
      RUNNING = 1 ------------|     |
       (KOER)                 |     |
      NO_START = 1 -----------|     |
       (KOEO)                       |
                                    | --- ELSE ---
      CRKFLG = 1 -------------|     |
       (in crank mode)        |OR --| EGOTSTCUMTMR := 0
                              |     | Do: EGO_TEST_TMR_CLEAR
      PUTMR < 4 --------------|     |  (test is bypassed, clear timers
       (less than 4 sec since:      |   until test is executed)
        powerup, exiting KOEO       |
        or KOER VIP, or a reset)    |
                                    | --- ELSE ---
                                    |
                                    | Do: EGR_TRANSITION_DELAY_FLAG_CONTROL
                                    | Do: EGO_PURG_CHK
                                    | Do: PURG_NOT_CAUSE_FOR_FAILURE
                                    | Do: EGO_SWITCHING_FAILURE_INDICATOR_CONTROL
                                    | Do: ACCUM_TIMER_CONTROL
                                    | Do: IN_RANGE_ENTRY































                                        33-77

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: IN_RANGE_ENTRY

      The following test conditions plus the conditions in EGOTST_TMR_CONTROL
      must be true for V_EGOTST_TM seconds before the fuel system can be tested.
      The conditions in IN_RANGE_ENTRY are separated from the conditions in
      EGOTST_TMR_CONTROL for use by the In-Range-Failure-Test via V_INRANG_FLG.

      OL_DESIRED = 0 ---------------|
       (closed loop desired)        |
      ATMR1 >= V_EGORNTM -----------|
                                    |                            
      AFMFLG = 0 -------------------|
                                    |
      BFMFLG = 0 -------------------|
                                    |                              
      CFMFLG = 0 -------------------|
                                    |AND -| V_INRANG_FLG := 1
      MFMFLG = 0 -------------------|     |  (for use by in-range-failure
                                    |     |   test)
      TFMFLG = 0 -------------------|     | Do: EGOTST_TMR_CONTROL
       (no failed sensors)          |     | Do: EGOTST_TMR_CHK
      V_EGR_DLYFG = 0 --------------|     |
       (no egr transitions)               | 
                                          | --- ELSE ---
                                          |
                                          | V_INRANG_FLG := 0
                                          |  (for use by in-range-failure
                                          |   test)
                                          | Do: EGOTST_TMR_CONTROL

      END: IN_RANGE_ENTRY





























                                        33-78

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: EGOTST_TMR_CONTROL

      V_INRANG_FLG = 1 -----------------|
       (above conditions met)           |
                                        |
      V_INJ_ER_FLG = 0 -----------------|
       (no injector failure)            |
                                        | 
      V_TP_ER_FLG = 0 ------------------| 
       (no inrange TP failure)          | 
                                        |
      V_MAF_ER_FLG = 0 -----------------|AND -| increment V_EGOTST_TMR
       (no inrange MAF failure)         |     | EGOTSTCUMFLG := 1
                                        |     |  (allow EGOTSTCUMTMR to run)
      TP_REL=> V_EGOTP_MIN -|           |     |  
       (min TP_REL to test) |           |     | 
                            |           |     |  
      ISCFLG = 0 -----------|           |     |  
       (not at idle)        |AND -|     |     |  
                            |     |     |     |  
      LOAD > V_EGOLD_MIN ---|     |     |     |  
       (load indicator)     |     |     |     |  
                            |     |     |     |  
      LOAD < V_EGOLD_MAX ---|     |OR --|     |
                                  |           |
      ISCFLG = 1 -----------|     |           |
       (at idle)            |AND -|           |
                            |                 |  
      V_EGOIDL_ENA = 1 -----|                 |
       (enable at idle)                       |
                                              |  --- ELSE ---                   
                                              |
                                              | Do: EGO_TEST_TMR_CLEAR
                                              |  (test is bypassed, clear
                                              |   timers until test is executed)
                                              | Do: VEGOFIL_ZERO
                                              |  (control fault filter for
                                              |   MIL control)
                                              | EGOTSTCUMFLG := 0
                                              |  (EGOTSTCUMTMR halted)

      END: EGOTST_TMR_CONTROL


















                                        33-79

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: EGOTST_TMR_CHK

      Control of how long the test conditions must be present before testing is to
      take place is accomplished with the calibration parameter V_EGOTST_TM.

      V_EGOTST_TMR > V_EGOTST_TM -----|
       (test conditions present       |
        sufficiently long to test)    |AND -| Do: EGO11_TESTS
                                      |     | Do: EGO21_TESTS
      NUMEGO = 2 ---------------------|     |
                                            | --- ELSE ---
                                            |
      V_EGOTST_TMR > V_EGOTST_TM -----------| Do: EGO11_TESTS
       (test conditions present
        sufficiently long to test)

      END: EGOTST_TMR_CHK


      BEGIN: ACCUM_TIMER_CONTROL

      The timer EGOTSTCUMTMR is a cumulative timer that documents total accumulated
      time that the EGO test conditions are true since the last time crank mode was
      exitted.  If crank mode is
      re-entered, this timer is cleared (see "Test Entry Conditions").

      EGOTSTCUMFLG = 1 -----------------| allow EGOTSTCUMTMR to run
       (test conditions true)           |                            
                                        | --- ELSE ---
                                        |
                                        | freeze EGOTSTCUMTMR

      END: ACCUM_TIMER_CONTROL



























                                        33-80

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: EGO_TEST_TMR_CLEAR

      Conditions other than fuel system failures which may prevent EGO switches are
      present.  The following timers which are indicators of fuel system failure
      are
      cleared until conditions for testing become true.

      V_LESTMR1 := 0
      V_LESTMR2 := 0
      V_EGOTST_TMR := 0
      V_LEGOTMR1 := 0
      V_LEGOTMR2 := 0

      END: EGO_TEST_TMR_CLEAR


      BEGIN: EGO_PURG_CHK

      PURGDC = 0 -----------------------|
       (purge disabled)                 |OR --| ego_purg_byps := 0
                                        |     |  (no purging restrictions
      PRG_DEC = 0 ----------------------|     |   on ego test)
       (purge does not effect                 |  
        fuel system)                          |
                                              | --- ELSE ---
                                              |
                                              | ego_purg_byps := 1
                                                 (purging restrictions on
                                                  on ego test in effect)

      END: EGO_PURG_CHK





























                                        33-81

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: PURG_NOT_CAUSE_FOR_FAILURE

      This logic recognizes whether one or both EGO sensors has stop switching.  In
      the case where one sensor stopped switching, the control system causes both
      banks to be controlled by the remaining sensor.  In the case where both
      sensors fail the system will go open loop.  Normally a rich failure cannot be
      recognized unless purging has been removed, eliminating purge as the cause of
      the apparent failure.  In the first case above, if the ego test was inactive
      from the time the ego stopped switching to the time the LEGOFGn flag becomes
      set a failure will have to be recognized while purging is taking place.  If
      one EGO is switching properly then the inference is that purging is not
      overdriving the non switching sensor.  In the second case (both sensors
      failed) failure recognization can take place if purging is suspended during
      open loop operation (PURGSW = 0).

      The following logic recognizes the above conditions and indicates to the
      failure assessment logic that one of the above situations exist.  The flag
      LEGONOTPURG indicates whether or not a test for ego failure may be performed
      if one of the above situations has occurred.

      LEGOFG11 = 1 ------|
       (byples timeout)  |
                         |
      LEGOFG21 = 0 ------|AND -|
                         |     |
      NUMEGO > 1 --------|     |
       (two forward egos)      |OR --| LEGONOTPURG := 1
                               |     |  (conditions imply that purge
      LEGOFG11 = 0 ------|     |     |   was not the cause of EGO11 or
                         |AND -|     |   EGO21 stuck rich)
      LEGOFG21 = 1 ------|     |     |  
       (byples timeout)        |     |
                               |     |
      LEGOFG11 = 1 ------|     |     | 
       (byples timout)   |     |     | 
                         |     |     |
      LEGOFG11 = 1 ------|AND -|     | 
       (byples timout)   |           | 
                         |           |
       (byples timeout)  |           |
      PURGSW = 0 --------|           |
       (no purge while open loop)    |
                                     | --- ELSE ---    
                                     |                 
                                     | LEGONOTPURG := 0

      END: PURG_NOT_CAUSE_FOR_FAILURE













                                        33-82

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: VEGOFIL_ZERO

      Fault filters not currently illuminating the MIL (CxxxFIL <= CxxxLVL)
      get a fresh start each time the test conditions become true.

      1.  C171FIL <= C171LVL -----------------| C171FIL := 0

      2.  C172FIL <= C172LVL -----------------| C172FIL := 0

      3.  C173FIL <= C173LVL -----------------| C173FIL := 0

      4.  C175FIL <= C175LVL -----------------| C175FIL := 0

      5.  C176FIL <= C176LVL -----------------| C176FIL := 0

      6.  C177FIL <= C177LVL -----------------| C177FIL := 0

      END: VEGOFIL_ZERO










































                                        33-83

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      EGO11/Fuel System Tests:

      Base strategy will assign LAMBSE1 the value  of  LAMBSE2  after  LESTMR11  >=
      BYPLES.   Failure  codes  171,  172 or 173 as appropriate will be stored upon
      failure, with the MIL being  illuminated.   But  as  a  result  of  the  Base
      Strategy action, the failure condition is overwritten.  The fault filter will
      down count.  The service code will remain stored in KAM, but the MIL will  be
      turned off.


      The following logic segment within the below logic will  maintain  the  fault
      filter  value  after  failure  (CxxxFIL  >  CxxxLVL)  until the sensor starts
      switching, causing the MIL to remain illuminated  until  the  actual  failure
      condition is not present.



               C17xFIL > C17xLVL ------------|
                (failure has been indicated) |AND -|
                                             |     |
               LEGOFG11 = 1 -----------------|     |
                (ego hasn't switched since         |
                  failure)
               (EXAMPLE logic segment)




































                                        33-84

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: EGO11_TESTS

      C171FIL > C171LVL -----------------------|
       (failure has been indicated)            |AND -| error_detected := 1
                                               |     | call fault filter routine
      LEGOFG11 = 1 ----------------------------|     |  (code 171)
       (ego hasn't switched since                    | call fault filter routine
        failure                                      |  (code 172)
                                                     | call fault filter routine
                                                     |  (code 173)
                                                     |
                                                     | --- ELSE ---
      C172FIL > C172LVL -----------------------|     |
       (failure has been indicated)            |AND -| error_detected := 1
                                               |     | call fault filter routine
      LEGOFG11 = 1 ----------------------------|     |  (code 172)
       (ego hasn't switched since                    | call fault filter routine
        failure)                                     |  (code 171)
                                                     | call fault filter routine
                                                     |  (code 173)
                                                     |
                                                     | --- ELSE ---
      C173FIL > C173LVL -----------------------|     |
       (failure has been indicated)            |AND -| error_detected := 1
                                               |     | call fault filter routine
      LEGOFG11 = 1 ----------------------------|     |  (code 173)
       (ego hasn't switched since                    | call fault filter routine
        failure)                                     |  (code 171)
                                                     | call fault filter routine
                                                     |  (code 172)
                                                     |  
                                                     | --- ELSE --- 
      V_LESTMR1 > V_LESTM1 --------------|           |  
        (failure indicated)              |           |
                                         |           |  
      EGOSS11 < V_EGOSWNUM --------|     |           | 
       (fail from start)           |     |OR --|     |
                                   |     |     |     |  
      ego_purg_byps = 0 -----|     |AND -|     |     |
                             |OR --|     |     |     |
      EGOFL11 = 0 -----------|     |     |     |     | 
                                   |     |     |     |  
      EGOTSTCUMTMR > ETST_SWCUMTM -|     |     |     |
       (sufficient cumulated test time)  |     |AND -| error_detected := 1
                                         |     |     | call fault filter routine
      V_LEGOTMR1 > V_LEGO_MAX -----------|     |     |  (code 171)
                                               |     | call fault filter routine
      KAMRF1 = 0.5 + MINADP -------------|     |     |  (code 172)
       (adaptive clip)                   |OR --|     | call fault filter routine
                                         |           |  (code 173)
      KAMRF1 = 0.5 + MAXADP -------------|           |  (fuel system failure)
                                                     |
                                                     | --- ELSE ---

                                (continued on next page)





                                        33-85

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

      V_LESTMR1 > V_LESTM1---------------|           |
        (failure indicated)              |           |
                                         |           |  
      V_EGO1L_BYPS = 0 ------------|     |           |
                                   |     |           |
      EGOSS11 < V_EGOSWNUM --------|AND -|OR --|     |
        (fail from start)          |     |     |     |
                                   |     |     |     |  
      EGOTSTCUMTMR > ETST_SWCUMTM -|     |     |     |
       (sufficient cumulated test time)  |     |AND -| error_detected := 1
                                         |     |     | call fault filter routine
      V_LEGOTMR1 > V_LEGO_MAX -----------|     |     |   (code 172)
       (gross lack of ego switch)              |     | call fault filter routine
      EGOFL11 = 0 -----------------------------|     |  (code 171)
       (lean)                                        | call fault filter routine
                                                     |  (code 173)
                                                     |  (ego circuit failure)
                                                     | V_EGO1_BYPS := 1
                                                     |
                                                     | --- ELSE ---
      LEGONOTPURG = 1 -------------|                 | 
       (purge not implicated as    |AND -|           |
        cause of failure)          |     |           |
      V_LEGOTMR1 > V_LEGO_MAX2 ----|     |           |
       (failure indicated)               |           |
                                         |           |
      V_LESTMR1 > V_LESTM1 --------------|           |  
       (failure indicated)               |           |
                                         |           | 
      EGOSS11 < V_EGOSWNUM --------|     |OR --|     |
       (fail from start)           |     |     |     |
      ego_purg_byps = 0 -----------|     |     |     |  
      V_EGO1_BYPS = 0 -------------|AND -|     |     |
                                   |     |     |AND -| error_detected := 1
      EGOTSTCUMTMR > ETST_SWCUMTM -|     |     |     | Call fault filter routine
       (sufficient cumulated test time)  |     |     |  (code 173)
                                         |     |     | Call fault filter routine
      V_LEGOTMR1 > V_LEGO_MAX -----------|     |     |  (code 171)
       (gross lack of ego switch)              |     | call fault filter routine
                                               |     |  (code 172)
      EGOFL11 = 1 -----------------------------|     | V_EGO1L_BYPS := 1
       (rich)                                        |  
                                                     | --- ELSE ---
                                                     |
                                                     | Call fault filter routine
                                                     |  (code 171)
                                                     | Call fault filter routine
                                                     |  (code 172)
                                                     | call fault filter routine
                                                     |  (code 173)
                                                       (no failures present)

      END: EGO11_TESTS





                                        33-86

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      EGO21/Fuel System Tests:

      Base strategy will assign LAMBSE2 the value  of  LAMBSE1  after  LESTMR21  >=
      BYPLES.   Failure  codes  176,  177 or 178 as appropriate will be stored upon
      failure, with the MIL being  illuminated.   But  as  a  result  of  the  Base
      Strategy action, the failure condition is overwritten.  The fault filter will
      down count.  The service code will remain stored in KAM, but the MIL will  be
      turned off.


      The following logic segment within the below logic will  maintain  the  fault
      filter  value  after  failure  (CxxxFIL  >  CxxxLVL)  until the sensor starts
      switching, causing the MIL to remain illuminated  until  the  actual  failure
      condition is not present.



               C17xFIL > C17xLVL ------------|
                (failure has been indicated) |AND -|
                                             |     |
               LEGOFG21 = 1 -----------------|     |
                (ego hasn't switched since         |
                  failure)
               (EXAMPLE logic segment)




































                                        33-87

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: EGO21_TESTS

      C175FIL > C175LVL -----------------------|
       (failure has been indicated)            |AND -| error_detected := 1
                                               |     | call fault filter routine
      LEGOFG21 = 1 ----------------------------|     |  (code 175)
       (ego hasn't switched since                    | call fault filter routine
        failure)                                     |  (code 176)
                                                     | call fault filter routine
                                                     |  (code 177)
                                                     |  
                                                     | --- ELSE ---
      C176FIL > C176LVL -----------------------|     |
       (failure has been indicated)            |AND -| error_detected := 1
                                               |     | call fault filter routine
      LEGOFG21 = 1 ----------------------------|     |  (code 176)
       (ego hasn't switched since                    | call fault filter routine
         failure)                                    |  (code 175)
                                                     | call fault filter routine
                                                     |  (code 177)
                                                     |
                                                     | --- ELSE ---
      C177FIL > C177LVL -----------------------|     |
       (failure has been indicated)            |AND -| error_detected := 1
                                               |     | call fault filter routine
      LEGOFG21 = 1 ----------------------------|     |  (code 177)
       (ego hasn't switched since                    | call fault filter routine
        failure)                                     |  (code 175)
                                                     | call fault filter routine
                                                     |  (code 176)
                                                     |  
                                                     | --- ELSE ---
      V_LESTMR2 > V_LESTM2 --------------|           |
        (failure indicated)              |           |
                                         |           |
      EGOSS21 < V_EGOSWNUM --------|     |           |
       (fail from start)           |AND -|OR --|     |
                                   |     |     |     |  
      ego_purg_byps = 0 -----|     |     |     |     |
                             |OR --|     |     |     |
      EGOFL21 = 0 -----------|     |     |     |     |
       (lean)                      |     |     |     |
      EGOTSTCUMTMR > ETST_SWCUMTM -|     |     |     |
       (sufficient cumulated test time)  |     |     |
                                         |     |AND -| error_detected := 1
      V_LEGOTMR2 > V_LEGO_MAX -----------|     |     | call fault filter routine
       (gross lack of ego switch)              |     |  (code 175)
      KAMRF2 = 0.5 + MINADP -------------|     |     | call fault filter routine
       (adaptive clip)                   |OR --|     |  (code 176)
                                         |           | call fault filter routine
      KAMRF2 = 0.5 + MAXADP -------------|           |  (code 177)
                                                     | (fuel system failure)
                                                     |  
                                                     |  --- ELSE ---
                                                     |

                                (continued on next page)



                                        33-88

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             (continued from previous page)

      V_LESTMR2 > V_LESTM2---------------|           |
        (failure indicated)              |           |
                                         |           |
      V_EGO2L_BYPS = 0 ------------|     |           |
                                   |     |OR --|     |
      EGOSS21 < V_EGOSWNUM --------|AND -|     |     |
        (fail from start)          |     |     |     | 
                                   |     |     |     |
      EGOTSTCUMTMR > ETST_SWCUMTM -|     |     |AND -| error_detected := 1
       (sufficient cumulated test time)  |     |     | call fault filter routine
                                         |     |     |  (code 176)
      V_LEGOTMR2 > V_LEGO_MAX -----------|     |     | call fault filter routine
       (gross lack of ego switch)              |     |  (code 175)
      EGOFL21 = 0 -----------------------------|     | call fault filter routine
       (lean)                                        |  (code 177)
                                                     |  (ego circuit failure)
                                                     | V_EGO2_BYPS := 1
                                                     |
                                                     | --- ELSE ---
      LEGONOTPURG = 1 -------------|                 |
       (purge not implicated       |AND -|           |
        as cause of failure)       |     |           |
      V_LEGOTMR2 > V_LEGO_MAX2 ----|     |           |
       (failure indicated)               |           |
                                         |           |
      V_LESTMR2 > V_LESTM2---------------|           |
       (lambse at clip)                  |           | 
                                         |           |  
      EGOSS21 < V_EGOSWNUM --------|     |           |
       (fail from start)           |     |           |
      ego_purg_byps = 0 -----------|AND -|OR --|     |  
      V_EGO2_BYPS = 0 -------------|     |     |     |
                                   |     |     |     |
      EGOTSTCUMTMR > ETST_SWCUMTM -|     |     |     |
       (sufficient cumulated test time)  |     |AND -| error_detected := 1
                                         |     |     | Call fault filter routine
      V_LEGOTMR2 > V_LEGO_MAX------------|     |     |  (code 177)
       (gross lack of ego switch)              |     | Call fault filter routine
                                               |     |  (code 175)
      EGOFL21 = 1 -----------------------------|     | call fault filter routine
       (rich)                                        |  (code 176)
                                                     |  (fuel system failure)
                                                     | V_EGO2L_BYPS := 1
                                                     |  
                                                     | --- ELSE ---
                                                     |
                                                     | call fault filter routine
                                                     |  (code 175)
                                                     | call fault filter routine
                                                     |  (code 176)
                                                     | call fault filter routine
                                                     |  (code 177)
                                                     |  (no failures present)

      END: EGO21_TESTS



                                        33-89

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: EGR_TRANSITION_DELAY_FLAG_CONTROL

      The EGR transition flag V_EGR_DLYFG when set indicates that an EGR transition
      has taken place.  To allow the EGO test to disregard EGR transitions,
      calibrate V_EGO_EGR_SW = 0.  Otherwise any EGR transition (on/off, off/on)
      will reset the EGO test timer and associated EGO fuel system failure
      indicators.


      EGRDC = 0 ------------------------------| temp := 1
       (egr off)                              |
                                              | --- ELSE ---
                                              |
                                              | temp := 0

      V_EGR_OLD <> temp ----------------|
       (egr transition)                 |AND -| V_EGR_DLYFG := 1
      V_EGO_EGR_SW = 1 -----------------|     |  (ego test reset due to
       (egr considered to                     |   egr transition)
        affect ego)                           | V_EGR_OLD := temp
                                              |
                                              | --- ELSE ---
                                              |
                                              | V_EGR_DLYFG := 0
                                                (egr not affecting ego test)

      END: EGR_TRANSITION_DELAY_FLAG_CONTROL

































                                        33-90

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: EGO_SWITCHING_FAILURE_INDICATION_CONTROL

      Timers V_LESTMR1 and V_LESTMR2 indicate the time LAMBSE1 or LAMBSE2 has been
      at its clip.

      VIP Lack of EGO11 Switching Timer:

      LAMBSE1 <= LAMMIN --------------|
       (rich clip, lean system)       | 
                                      |OR --| (V_LESTMR1 runs indicating
      LAMBSE1 >= LAMMAX --------|     |     |  potential lambse/ego based
       (lean clip, rich system) |AND -|     |  failure)
                                |           |
      ego_purg_byps = 0 --------|           |
       (no purging restrictions)            |
                                            | --- ELSE ---
                                            |
                                            | V_LESTMR1 := 0
                                            | (no lambse/ego based
                                            |  errors indicated)


      Vip Lack of EGO21 Switching Timer:

      LAMBSE2 <= LAMMIN --------------|
       (rich clip, lean system)       |
                                      |OR --| (V_LESTMR2 runs indicating
      LAMBSE2 >= LAMMAX --------|     |     |  potential lambse/ego based
       (lean clip, rich system) |AND -|     |  failure)
                                |           |
      ego_purg_byps = 0 --------|           |
       (no purging restrictins)             |
                                            | --- ELSE ---
                                            |
                                            | V_LESTMR2 := 0
                                            |  (no lambse/ego based
                                            |    errors indicated)























                                        33-91

         CONTINUOUS SELF TEST, EGO SWITCHING, DYNAMIC FUEL STRATEGIES - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Time Since Last EGO11 Switch Logic:

      SWTFL11 = 1 ---------------------| V_LEGOTMR1 := 0
       (EGO11 switched this BG)        |
                                       | --- ELSE ---
      V_LAMJMP1 = 1 -------------|     |
       (LAMBSE1 jump occurred)   |     | 
                                 |OR --| V_LEGOTMR1 := 0
      ego_purg_byps = 1 ---|     |     | V_LAMJMP1 := 0
       (purge is affecting |     |     |  (reinitialization due to
        ego performance)   |AND -|     |    LAMBSE1 jump)
                           |
      EGOFL11 = 1 ---------|
       (rich)              |
      LEGONOTPURG = 0 -----|
       (purge implicated as a
        cause of failure)


      Time Since Last EGO21 Switch Logic:

      SWTFL21 = 1 ---------------------| V_LEGOTMR2 := 0
       (EGO21 switched this BG)        |
                                       | --- ELSE ---
      V_LAMJMP2 = 1 -------------|     |
       (LAMBSE2 jump occurred)   |     |
                                 |OR --| V_LEGOTMR2 := 0
      ego_purg_byps = 1 ---|     |     | V_LAMJMP2 := 0
       (purge is affecting |     |     |  (reinitialization due to
        ego performance)   |AND -|     |    LAMBSE2 jump)
                           |
      EGOFL21 = 1 ---------|
       (rich)              |
      LEGONOTPURG = 0 -----|
       (purge implicated as a
        cause of failure)

      END: EGO_SWITCHING_FAILURE_INDICATION_CONTROL






















                                        33-92

                 CONTINUOUS SELF TEST, FUEL PUMP CIRCUIT TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 FUEL PUMP CIRCUIT TEST


      OVERVIEW

      The state of the Fuel Pump Monitor (FPM) is compared to  the  expected  state
      based  on  the  fuel  pump  on/off  command.  Also, after a stall, the Output
      Circuit Check (OCC) is performed on the fuel pump relay.

      When the fuel pump is commanded off, FPM should be low.  If it is not  (after
      waiting  V_FPMTM  seconds  for  the  relay  to settle) code 542 is set.  This
      indicates that either the fuel pump relay is stuck "on" or there is  an  open
      circuit between the ECA and the fuel pump ground (circuit ooo in the diagram)
      allowing the ECA pull-up circuit to hold FPM high.

      If the fuel pump is commanded on, FPM should be high.  If it  is  not  (after
      waiting V_FPMTM seconds) code 543 is set.  This indicates a break in the line
      between the battery and the FPM input to the ECA (circuit xxx in diagram)  or
      no contact inside the fuel pump relay.

      If the engine stalls, the fuel pump is commanded off and  then  exercised  to
      perform  the output circuit check (OCC).  An OCC failure indicates a break in
      the line between the battery and the driver inside the ECA  (circuit  ***  in
      the diagram).

                       FUEL PUMP / FUEL PUMP MONITOR (FPM) CIRCUIT

      B+ xxxxxxxxxxxxxxxx                oooooooooooo
                        x              ..o..        o    g
      b+ *************  x              ..o..        o    r
              S      *  x            ..     ..    -----  o
              O .....*..x....       .   PUMP  .    ---   u
              L !    >  x   !        ..     ..      -    n
              E !  <     \  !          ..o..             d
              N !    >  x \ !          ..o..             
              O !  <    x   !            o  
              I !....*..x...!            o
              D      *  xxxxxxxxxxxooooooo 
                     *             x  
               ......*.............o...............
               !     *             x              !
               !     *** OCC       o        ECA   !
               !     *             x     (EEC-IV  !
               !   Driver         FPM     MODULE) !
               !..................................!















                                        33-93

                 CONTINUOUS SELF TEST, FUEL PUMP CIRCUIT TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      Self test Registers:

       -  IOCC = OCC A/D input level.

       -  OCCSAV = Saved value of OCC A/D input.

      Self Test Calibration Constants:

       -  OCCDT7 = Fuel pump primary OCC calibration level.

       -  V_FPMDLY  =  Fuel  pump  monitor  test  fuel  pump  on-to-off   off-to-on
          stabilization delay time.

       -  V_FPMFLG = Fuel pump monitor test enable switch, 1 = enable.

       -  V_FPMTM = Fuel pump transition delay time.

       -  VPUMP_LAST = State of fuel pump during last background loop.

      Self Test Flags:

       -  ERROR_DETECTED = Flag passed to fault filter routine indicating self test
          detected a failure.

       -  FPM = State of the FPM input.  1 = high (Pump on).

      Self Test Timers:

       -  VIP_FPMTMR = Fuel pump on-to-off transition delay timer.

      Base Strategy Flags:

       -  PUMP = Controls state of fuel pump control output.  1 = commanded on.

























                                        33-94

                 CONTINUOUS SELF TEST, FUEL PUMP CIRCUIT TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                           STRATEGY MODULE: VC_FUEL_PUMP_COM2

      Every Background Loop (in continuous or not):


      PUMP <> VPUMP_LAST ---------------------| VIP_FPMTMR = 0
       (Fuel Pump changed on/off state)       |  (restart timer)
                                              |
                                              | VPUMP_LAST =  PUMP
      PUTMR < 4 ------------------------|     |
                                        |     | 
      NO_START = 1 ---------------------|OR --| Exit this test 
                                        |     |  (not in "continuous")
      RUNNING = 1 ----------------------|     |
                                              | --- ELSE ---                 
                                              |
      V_FPMFLG = 0 ---------------------------| call fault filter for code 542
       (test cal'd out)                       | call fault filter for code 543
                                              | call fault filter for code 556
                                              | exit this test
                                              |
                                              | --- ELSE ---
                                              |
      PUMP = 1 -------------------------------| DO: FP COMMANDED ON PROCESS 
                                              |
                                              | --- ELSE ---
                                              |
      RMSPRU = 1 -----------------------------| De-energize all OCC outputs
       (Run mode since powerup = true         | delay 50 msec
        and PUMP = 0, engine has stalled)     | OCCSAV = IOCC
                                              | PUMP = 1
                                              | (command fuel pump on)
                                              | delay 50 msec
                                              | DO:  FP OCC PROCESS
                                              |
                                              | --- ELSE ---
                                              |
      VIP_FPMTMR >= V_FPMTM ------------|     | (FPM high when pump
       (Pump has been off for           |     |  commanded off, code 542)
        V_FPMTM seconds)                |AND -| ERROR_DETECTED = 1
                                        |     |
      FPM = 1 --------------------------|     | call fault filter for code 542
       (indicates pump on)                    | call fault filter for code 556  
                                              | 
                                              | --- ELSE ---
                                              | 
                                              | (No errors detected)
                                              | call fault filter for code 542
                                              | call fault filter for code 556










                                        33-95

                 CONTINUOUS SELF TEST, FUEL PUMP CIRCUIT TEST - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                             BEGIN: FP COMMANDED ON PROCESS


      UNDSP = 0 ------------------------------| RMSPRU = 1
       (Run mode)                             |  (run mode since powerup = 
                                              |   true)

                                   
                                              |  (FPM low with pump commanded
                                              |   on  - fault 543 detected)
      FPM = 0 --------------------------|     | 
       (FPM input low)                  |AND -| ERROR_DETECTED = 1
                                        |     | call fault filter for code 543 
      VIP_FPMTMR >= V_FPMTM ------------|     | call fault filter for code 542
       (Pump has been on for                  | call fault filter for code 556
        at least v_FPMTM sec.)                | 
                                              |
                                              | --- ELSE ---
                                              |
                                              |  (No error detected)
                                              | call fault filter for code 543
                                              | call fault filter for code 542
                                              | call fault filter for code 556

                              END: FP COMMANDED ON PROCESS


                                  BEGIN: FP OCC PROCESS

                                              |  (FP relay primary circuit 
      |OCCSAV-IOCC| < OCCDT7 -----------------|   failure; code 556)
       (insufficient change in OCC)           | PUMP = 0
                                              | RMSPRU = 0
                                              | ERROR_DETECTED = 1
                                              | call fault filter for code 556
                                              |
                                              | --- ELSE ---
                                              |
                                              |  (No failure detected)
                                              | PUMP = 0
                                              | RMSPRU = 0
                                              | call fault filter for code 556

                                   END: FP OCC PROCESS
















                                        33-96

                 ISC FEEDBACK CONTROL LIMITS TEST (CONTINUOUS) CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                            ISC FEEDBACK CONTROL LIMITS TEST


      OVERVIEW:

      The purpose of this test is to monitor the ISC  feedback  control  limits  of
      minimum  actuator  airflow, maximum actuator duty cycle, and adaptive limits.
      Base Strategy has defined these limits in the ISC strategy chapter.  When any
      of  these  limits is exceeded an error flag is set for processing in the Self
      Test continuous  testing.   The  following  logic  describes  how  Self  Test
      processes this error flag.



      DEFINITIONS

      Self Test Registers:

       -  C413CNT = Code 413 warmup counter.

       -  C414CNT = Code 414 warmup counter.

       -  C415CNT = Code 415 warmup counter.

       -  C416CNT = Code 416 warmup counter

       -  C413FIL = Code 413 fault filter, ISC acutator minimum airflow. 

       -  C414FIL = Code 414 fault filter, ISC actuator maximum duty cycle.

       -  C415FIL = Code 415 fault filter, ISCKAM at min. adaptive clip.

       -  C416FIL = Code 416 fault filter, ISCKAM at max. adaptive clip.

       -  VIP_ISCTMR = VIP ISC timer.

      Self Test Calibration Constants:

       -  C413LVL = Code 413 fault filter threshold.

       -  C413UP = Code 413 fault filter upcount.

       -  C414LVL = Code 414 fault filter threshold.

       -  C414UP = Code 414 fault filter upcount.

       -  C415LVL = Code 415 fault filter threshold.

       -  C415UP = Code 415 fault filter upcount.











                                        33-97

                 ISC FEEDBACK CONTROL LIMITS TEST (CONTINUOUS) CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       -  C416LVL = Code 416 fault filter threshold

       -  C416UP  = Code 416 fault filter upcount.

       -  V_IDLN_LIM = RPM limit to do ISC Limits Testing.

       -  V_ISC_TIME = Time at ISC limit before processing error. 

       -  V_ISC_TST = ISC test type enable switch, 1 = enable min.
                        airflow/max. duty cycle test only, 2 = enable
                        ISCKAM clips in addition to above.




      PROCESS
                           STRATEGY MODULE: VC_ISC_LIMITS_COM1

      PUTMR < 4 ------------------|
                                  |
      NO_START = 1 ---------------|OR --|Exit this test
                                  |     | (not in "continuous")
      RUNNING = 1 ----------------|     |
                                        | --- ELSE ---
                                        |
      V_ISC_TST = 0 --------------|     | 
       (test cal'd out)           |     | 
                                  |     |  
      ISC_ERR = 0 ----------------|OR --| VIP_ISCTMR = 0
       (no ISC errors)            |     | ERROR_DETECTED = 0 
                                  |     | ISC_ERR = 0
      DSDRPM > V_IDLN_LIM --------|     | call fault filter for code 413
       (RPM limit to test)              | call fault filter for code 414
                                        | call fault filter for code 415
                                        | call fault filter for code 416
                                        | Exit this test
                                        |
                                        | --- ELSE ---
                                        |
      ISC_ERR = -1 ---------------|     | 
                                  |AND -| ERROR_DETECTED = 1 
      VIP_ISCTMR => V_ISC_TIME ---|     | ISC_ERR = 0
                                        | (ISC actuator min. airflow code 413)
                                        | call fault filter for code 413 
                                        | call fault filter for code 414
                                        | call fault filter for code 415
                                        | call fault filter for code 416
                                        |
                                        | --- ELSE ---
          

                                        Continued on Next Page








                                        33-98

                 ISC FEEDBACK CONTROL LIMITS TEST (CONTINUOUS) CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                    Continued from Previous Page

      ISC_ERR = 1 ----------------|    
                                  |AND -| ERROR_DETECTED = 1
      VIP_ISCTMR => V_ISC_TIME----|     | ISC_ERR = 0
                                        | (ISC actuator max. duty cycle, code 414)
                                        | call fault filter for code 414
                                        | call fault filter for code 415
                                        | call fault filter for code 416 
                                        |
                                        | --- ELSE ---
                                        |
      ISCKAM(n) <= PSIBRN --------|     |
                                  |     |
      V_ISC_TST = 2 --------------|AND -| ERROR_DETECTED = 1
                                  |     | ISC_ERR = 0
      ISC_ERR = 2 ----------------|     | (ISC control system at min. adaptive
                                        |  clip, code 415   
                                        | call fault filter for code 415
                                        | call fault filter for code 416
                                        |
                                        | --- ELSE ---
                                        |
      ISCKAM(n) => PSIBRM---------|     | 
                                  |     | 
      V_ISC_TST = 2 --------------|AND -| ERROR_DETECTED = 1 
                                  |     | ISC_ERR = 0
      ISC_ERR = 2 ----------------|     | (ISC control system at max. adaptive
                                        |  clip, code 416)
                                        | call fault filter for code 416
                                        |
                                        | --- ELSE ---
                                        | 
                                        | ERROR_DETECTED = 0
                                        | ISC_ERR = 0


      NOTE:  The value of the flag ISC_ERR is set in Base Strategy ISC chapter.  It
      is  cleared  here  in VIP to insure refreshing every background loop, because
      the logic where it is set is only executed when ISCFLG = 1 or 2.




















                                        33-99

              CONTINUOUS SELF TEST, MALFUNCTION INDICATOR LIGHT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                               MALFUNCTION INDICATOR LIGHT

      OVERVIEW

      The purpose of the Malfunction Indicator Light (MIL) is to alert  the  driver
      that  the  computer  has detected a fault with the EEC-IV system.  If the MIL
      were not present, the driver may not be aware that a problem  exists  because
      The Failure Mode Effects Management (FMEM) strategy is capable of maintaining
      good drive characteristics with a fault present.  However,  the  vehicle  may
      not  be  operating  at an optimum point with regard to emissions, economy and
      performance.  When the MIL is on, the  driver  of  the  vehicle  should  seek
      service at his earliest convenience.  It is not necessary to immediately shut
      the vehicle down and have it towed in for service.

      The malfunction indicator light (MIL) warning system has been implemented  to
      comply with California regulations for the 1988 and beyond model years.

      The light, which is labeled  "Check  Engine"  or  "Service  Engine  Soon"  is
      located  on the dashboard such that the driver can see it.  Power is supplied
      to the light whenever the ignition switch is in the run  or  crank  position.
      The ground circuit for the light is provided through the EEC module self test
      output (STO).  Whenever the EEC-IV strategy determines that the light  should
      be  on,  the STO output driver is turned on (STO voltage will be low).  Since
      the light is controlled by STO, the self test error codes can  be  determined
      by counting the check engine light pulses during self test.

      The light will be turned on by  the  EEC  module  (after  a  delay  of  FMDTM
      seconds) whenever a fault is detected for any of the monitored signals.  When
      MILTMR exceeds the calibrateable delay time (FMDTM), the light will  turn  on
      for  at  least a calibrateable time of V_MILONTM seconds.  If the fault is no
      longer present, then the light will turn off as soon as the light has been on
      for at least V_MILONTM seconds.

      If the light is on for a period less than  V_MILONTM  seconds,  it  indicates
      that  the  light  was not activated by the MIL light strategy.  This could be
      caused by an intermittent short to  ground  of  the  STO  wire,  intermittent
      operation in HLOS, or fault detection while in the wiggle self test mode (STI
      grounded).  With the exception of the grounded STO wire, operation  in  HLOS,
      or an intermittent fault with VSS in the wiggle test mode, a continuous error
      code will always be present, indicating the reason for the fault.

      The check engine light is turned on in the crank mode until a PIP  signal  is
      detected  as  a bulb check.  The bulb check can be disabled by setting MILLIM
      to zero.  If the light does not turn off while the  engine  is  cranking,  it
      indicates that the EEC module is not receiving PIP signals.

      The calibration parameter MIL_SW can take values of 0, 1 or 2.  If MIL_SW  is
      set  to zero, the MIL light is not activated by the MIL logic.  Note that the
      MIL light will still turn on whenever STO  is  grounded  (HLOS,  self  test).
      Production  calibrations  must  have  MIL_SW  set  to  1  to  meet California
      regulations.  When MIL-SW is set to 2, the MIL light will  activate  whenever
      any  continuous  fault filter indicates a fault is present for at least FMDTM
      seconds.







                                        33-100

              CONTINUOUS SELF TEST, MALFUNCTION INDICATOR LIGHT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      DEFINITIONS

      INPUTS

      Registers:

       -  C332FIL = Fault Filter indicating EGR flow problem.

       -  CXXXFIL = Fault Filter for any continuous fault.

      Bit Flags:

       -  ADT1FMFLG = Flag indicating that one or more of the  adaptive  table  one
          cells  have  reached  the max or min clip values (MAXADP or MINADP); 1 ->
          table is at clip, 0 -> table not at clip.

       -  ADT2FMFLG = Flag indicating that one or more of the  adaptive  table  two
          cells  (stereo  ego only) have reached the max or min clip values (MAXADP
          or MINADP); 1 -> table is at clip, 0 -> table not at clip.

       -  AFMFLG = Flag indicating the ACT sensor has failed.

       -  BFMFLG = Flag indicating that the BP sensor has failed; 1 -> failure.

       -  CFMFLG = Flag indicating the ECT sensor has failed.

       -  CRKFLG = Flag indicating status of CRANK MODE; 1 -> in CRANK MODE,  0  ->
          not in CRANK MODE.

       -  DISABLE_NOSTART = 1 -> KOEO VIP test is  enteredL;  Disables  bulb  check
          when KOEO test is exited.

       -  EFMFLG = Flag indicating the EVP/EPT sensor has failed.

       -  EGO1FMFLG = Flag indicating there is an EGO-1 sensor failure.

       -  EGO2FMFLG = Flag indicating there  is  an  EGO-2  sensor  failure.   (for
          stereo EGO systems only).

       -  FIRST_PIP = Flag set to 1 when the first PIP is detected.  Reset to  zero
          on power-up or stall.

       -  MFMFLG = Flag indicating the MAF sensor has failed.

       -  RUNNING = Flag indicating that engine-running VIP  is  active;  1  ->  in
          engine-running VIP, 0 -> not in engine-running VIP.

       -  STIFLG = Flag indicating the state of STI; 1 -> low, Self Test requested,
          0 -> high, Self Test not requested.

       -  TFMFLG = Flag indicating the TP sensor has failed.

       -  V_INJ_ER_FLG = Inrange fuel flow error flag.

       -  V_MAF_ER_FLG = Inrange Mass Air Flow sensor flag.

       -  V_TP_ER_FLG = Inrange TP error flag.



                                        33-101

              CONTINUOUS SELF TEST, MALFUNCTION INDICATOR LIGHT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      Calibration Constants:

       -  C332LVL = Fault threshold for EGR flow problem.

       -  CXXXLVL = Fault threshold for any continuous fault.

       -  CXXXUP = Upcount for any continuous fault.

       -  FMDTM = Time delay after fault is detected to turn on MIL, sec.

       -  MILLIM = Software switch to enable/disable bulb  check,  unitless;  1  ->
          enable, 0 -> disable.

       -  MIL_SW = MIL enable switch, unitless; 0 -> Do not turn on MIL,  1  ->  Do
          MIL  logic  to meet California regulation, must be 1 for production; 2 ->
          Do MIL logic and turn MIL light on for any continuous fault,  development
          calibration only.

       -  V_MILONTM = Minimum MIL on time, sec.



      OUTPUTS

      Registers:

       -  MILTMR = Timer used to record the time that a continuous fault  has  been
          present, sec.



      CALIBRATION INFORMATION

       -  FMDTM should be set at 4.5 seconds.  This will  allow  the  check  engine
          light  to  turn  on  within  5  seconds  of the fault occurrence.  The .5
          seconds of time is used to allow the fault  filter  to  reach  the  fault
          threshold.

       -  V_MILONTM should  be  large  enough  to  easily  distinguish  between  an
          intermittent  harness  short  and a strategy controlled activation of the
          check engine light.  A 10  second  on  time  is  suggested.   If  set  to
          8191.875,  then  the  MIL  light  will remain on once it is on, until the
          engine is turned off.

       -  MIL_SW must be set to 1 for production calibration.















                                        33-102

              CONTINUOUS SELF TEST, MALFUNCTION INDICATOR LIGHT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      PROCESS
                             STRATEGY MODULE: VC_MIL_MA_COM9

                       MILTMR IS A FREE-RUNNING INCREMENTING TIMER

      NO_START = 1 ----------------------|
      (KOEO VIP)                         |OR --| EXIT
                                         |     | Allow KOEO or KOER
      RUNNING = 1 -----------------------|     | Self Test to control
       (ENGINE RUNNING VIP)                    | STO/MIL
                                               |
                                               | --- ELSE ---
                                               |
      STIFLG = 1 ------------------------------| MILTMR = 0
       (STI GROUNDED, NOW IN WIGGLE MODE)      | Allow Wiggle Test to
                                               | control STO/MIL
                                               |
                                               | --- ELSE ---
      CRKFLG = 1 ------------------------|     |
       (IN CRANK)                        |     |
                                         |     |
      DISABLE_NOSTART = 0 ---------------|     |
       (KOEO VIP NOT REQUESTED)          |     |
                                         |AND -| DO BULB CHECK
      FIRST_PIP = 0 ---------------------|     | (TURN STO ON)
       (PIP NOT YET RECEIVED)            |     | MILTMR = 0
                                         |     |
      MILLIM = 1 ------------------------|     |
       (BULB CHECK REQUIRED)                   |
                                               | --- ELSE ---
      MIL_SW = 0 ------------------------|     |
       (MIL cal'd out)                   |OR --| Either PIPs coming in,
                                         |     | KOEO Self Test exited or,
      CRKFLG = 1 ------------------------|     | MIL or bulb check cal'd out
       (not in UNDERSPEED or RUN mode, not     |
        in Continuous Self Test)               | TURN MIL OFF
                                               | (STO OFF)
                                               | MILTMR = 0
                                               |
                                               | --- ELSE ---
                                               |
                                               | Do: "CHECK FOR MIL
                                               | FAULT" LOGIC

















                                        33-103

              CONTINUOUS SELF TEST, MALFUNCTION INDICATOR LIGHT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: "CHECK FOR MIL FAULT" LOGIC

      AFMFLG = 1 ---------------------------|
       (ACT, Codes 112 or 113)              |
                                            |
      BFMFLG = 1 ---------------------------|
       (BP, Code 126)                       |
                                            |
      CFMFLG = 1 ---------------------------|
       (ECT, Codes 117 OR 118)              |
                                            |
      EFMFLG = 1 ---------------------------|
       (EGR, Codes 327 or 337)              |
                                            |
      MFMFLG = 1 ---------------------------|
       (MASS AIR Codes 157 or 158)          |
                                            |
      TFMFLG = 1 ---------------------------|
       (TP Codes 122, 123)                  |
                                            |
      EGO1FMFLG = 1 ------------------------|
       (EGO Codes 171,172,173,174 or 194)   |
                                            |
      EGO2FMFLG = 1 ------------------------|
       (EGO Codes 175,176,177,178 or 195)   |
                                            |
      ADT1FMFLG = 1 ------------------------|
       (ADAPTIVE Codes 179,181,182, 183)    |
                                            |
      ADT2FMFLG = 1 ------------------------|
       (ADAPTIVE Codes 188, 189, 191, 192)  |
                                            |
      C332FIL > C332LVL --------------------|
                                            |OR --| MIL fault present
      MIL_SW = 2  --------------------|     |     | Do: "MIL FAULT"
                                      |AND -|     |
      CXXXFIL > CXXXLVL --------------|     |     |
                                            |     |
      V_TP_ER_FLG = 1 ----------------------|     |
       (Inrange TP, Codes 121,124,125)      |     |
                                            |     |
      V_INJ_ER_FLG = 1 ---------------------|     |
       (Inrange Fuel, Codes 186,187)        |     |
                                            |     |
      V_MAF_ER_FLG = 1 ---------------------|     |
       (Inrange MAF, Codes 184, 185)              |
                                                  | --- ELSE ---
                                                  |
                                                  | No fault present.
                                                  | Do: "NO MIL FAULT"
      END: "CHECK FOR MIL FAULT" LOGIC









                                        33-104

              CONTINUOUS SELF TEST, MALFUNCTION INDICATOR LIGHT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


      BEGIN: "NO MIL FAULT"

      MILTMR < FMDTM --------------|
       (Time delay)                |
                                   |OR --| No fault is currently detected
      MILTMR >= FMDTM +            |     | and the MIL has not turned on or
       V_MILONTM ------------------|     | has been on for at least the
        (MIL Minimum on time)            | minimum time.
                                         |
                                         | TURN MIL OFF
                                         | (STO off)
                                         | MILTMR = 0
                                         |
                                         | --- ELSE ---
                                         |
      STO = 1 ---------------------------| No fault is currently detected,
      (MIL already on)                   | but one had been present for at
                                         | least FMDTM seconds
                                         | (illuminating the MIL) but the
                                         | MIL has not yet been on for the
                                         | minimum time.
                                         |
                                         | TURN MIL ON
                                         | (STO on)
                                         |
                                         | --- ELSE ---
                                         |
                                         | MILTMR has counted up, but no
                                         | fault is currently detected
                                         | and the MIL is not currently on.
                                         | DO NOT turn the MIL on.
                                         |
                                         | TURN MIL OFF
                                         | (STO off)

      END: "NO MIL FAULT"


      BEGIN: "MIL FAULT"

      MILTMR <  FMDTM -------------------| A fault has been detected but
       (Time delay before illuminating   | the delay time (FMDTM) to
         MIL)                            | turn MIL has not yet been met.
                                         |
                                         | TURN MIL OFF
                                         | (STO off)
                                         |
                                         | --- ELSE ---
                                         |
                                         | A fault is present, and the
                                         | delay time has been exceded,
                                         | turn on the MIL.
                                         |
                                         | TURN MIL ON
                                         | (STO on)

      END: "MIL FAULT"



                                        33-105

              CONTINUOUS SELF TEST, MALFUNCTION INDICATOR LIGHT - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL






























































                                        33-106












                                      CHAPTER 34

                                ERROR CODE DESCRIPTION

















































                                         34-1

                            ERROR CODE DESCRIPTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                ERROR CODE DESCRIPTION
                           STRATEGY MODULE: VIP_ERRCODE_CB


                                            SELF TEST SECTION
   ERROR|                                |-----------------------|
   CODE |        DESCRIPTION             | K.O.E.O| E.R. |  CONT |
   -----|--------------------------------|--------|------|-------|
    10  |CYL #1 LOW -CYL BALANCE TEST    |        |  X   |       | 
    20  |CYL. #2 LOW -CYL BALANCE TEST   |        |  X   |       |
    30  |CYL #3 LOW -CYL BALANCE TEST    |        |  X   |       |
    40  |CYL #4 LOW -CYL BALANCE TEST    |        |  X   |       |
    50  |CYL. #5 LOW -CYL. BALANCE TEST  |        |  X   |       |
    60  |CYL #6 LOW -CYL BALANCE TEST    |        |  X   |       |
    70  |CYL #7 LOW -CYL BALANCE TEST    |        |  X   |       |
    80  |CYL. #8 LOW -CYL BALANCE TEST   |        |  X   |       |
    90  |PASS (CYL BALANCE TEST)         |        |  X   |       |
   111  |PASS                            |   X    |  X   |  X    |
   112  |254 DEGREES F INDICATED ACT -   |   X    |      |   X   |
        |   CKT. GROUNDED                |        |      |       |
   113  |-40 DEGREES F INDICATED ACT -   |   X    |      |   X   |
        |   SENSOR CKT. OPEN             |        |      |       |
   114  |INDICATES ACT OUT OF SELF-TEST  |   X    |  X   |       |
        |  RANGE                         |        |      |       |
   116  |INDICATES ECT OUT OF SELF-TEST  |   X    |  X   |       |
        |  RANGE                         |        |      |       |
   117  |254 DEGREES F INDICATED ECT -   |   X    |      |   X   |
        |   CKT. GROUNDED                |        |      |       |
   118  |-40 DEGREES F INDICATED ECT -   |   X    |      |   X   |
        |   SENSOR CKT. OPEN             |        |      |       |
   121  |INDICATES TP OUT OF SELF-TEST   |   X    |  X   |       |
        |  RANGE                         |        |      |       |
   122  |TPS CKT. BELOW MIN. VOLTAGE     |   X    |      |   X   |
   123  |TPS CKT ABOVE MAX VOLTAGE       |   X    |      |   X   |
   126  |INDICATES MAP/BP OUT OF SELF-   |   X    |  X   |   X   |
        |  TEST RANGE                    |        |      |       |
   129  |NO MAF CHANGE IN GOOSE          |        |  X   |       |
   136  |EGO SENSOR INPUT INDICATES SYS. |        |  X   |       |
        |   LEAN - NO EGO SWITCH         |        |      |       |
   137  |EGO SENSOR INPUT INDICATES SYS. |        |  X   |       |
        |   RICH                         |        |      |       |
   139  |NO HEGO SWITCH DETECTED (LEFT HEGO)      |      |   X   | 
   144  |NO EGO SWITCH DETECTED          |        |      |   X   |
   157  |MAF SENSOR CKT OPEN             |        |      |   X   |  
   158  |MAF SENSOR CKT SHORT TO PWR     |   X    |      |   X   |
   159  |MAF SENSOR OUT OF RANGE         |        |  X   |       |
   167  |NO TP CHANGE DURING GOOSE       |        |  X   |       |
   172  |EGO SENSOR CKT INDICATES SYSTEM |        |  X   |       |
        |   LEAN                         |        |      |       |
   173  |EGO SENSOR CKT INDICATES SYSTEM |        |  X   |       |
        |   RICH                         |        |      |       |
   179  |ADAPTIVE FUEL LEAN LIMIT REACHED|        |      |   X   |
   181  |ADAPTIVE FUEL RICH LIMIT REACHED|        |      |   X   |
   182  |ADAPTIVE FUEL LIMIT REACHED @IDLE - SYS LEAN    |   X   |
   183  |ADAPTIVE FUEL LIMIT REACHED @IDLE - SYS RICH    |   X   |





                                         34-2

                            ERROR CODE DESCRIPTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                             SELF TEST SECTION
   ERROR|                                |-----------------------|
    CODE|       DESCRIPTION              |K.O.E.0.| E.R. |  CONT.|     
   -----|--------------------------------|--------|------|-------|
   188  |ADAPTIVE FUEL LIMIT _ SYS LEAN (LEFT HEGO)      |   X   |
   189  |ADAPTIVE FUEL LIMIT _ SYS RICH (LEFT HEGO)      |   X   |
   191  |ADAPTIVE FUEL LIMIT REACHED     |        |      |   X   |
        | @IDLE SYS. LEAN (LEFT HEGO)    |        |      |       |
   192  |ADAPTIVE FUEL LIMIT REACHED     |        |      |   X   |
        | @IDLE SYS. RICH (LEFT HEGO)    |        |      |   X   |  
   211  |PIP CIRCUIT FAULT               |        |      |   X   |
   212  |LOSS OF IDM INPUT TO PROCESSOR  |        |      |   X   |
   213  |SPARK CONTROL FAILURE           |        |  X   |       |
   215  |ECA DETECTED COIL #1 PRIM CKT FAILURE    |      |   X   |
   216  |ECA DETECTED COIL #2 PRIM CKT FAILURE    |      |   X   | 
   217  |ECA DETECTED COIL #3 PRIM CKT FAILURE    |      |   X   |
   225  |KNOCK NOT SENSED                |        |  X   |       |
   239  |PIPS OCCURED WHILE ENGINE WAS   |        |      |  X    |
        |  TURNING                       |        |      |       |
   241  |EEC/EDIS SELF TEST DATA TRANS-  |        |      |  X    |
        |  MISSION ERROR                 |        |      |       |    
   311  |THERMACTOR AIR SYSTEM INOPERATIVE        |  X   |       |
        | (RIGHT SIDE W/DUAL HEGO)       |        |      |       |
   312  |THERMACTOR UPSTREAM DURING SELF TEST     |  X   |       |
   313  |THERMACTOR AIR NOT BYPASSED DURING S.T.  |  X   |       |
   314  |THERMACTOR AIR SYSTEM INOPERATIVE        |  X   |       |
        | (LEFT SIDE W/DUAL HEGO)        |        |      |       |
   315  |THERMACTOR AIR FAILED DURING    |        |      |  X    |
        | "COLD" OPERATION               |        |      |       |
   316  |THERMACTOR AIR FAILED "HOT"     |        |      |  X    |
        | RE-TEST AT IDLE                |        |      |       |
   326  |EPT VOLTAGE LOW (PFE)           |        |  X   |  X    |
   327  |EPT/EVP BELOW MINIMUM VOLTAGE   |   X    |  X   |  X    | 
   328  |EVP VOLTAGE BELOW CLOSED LIMIT  |   X    |  X   |  X    |
        |   (SONIC)                      |        |      |       |
   332  |EGR VALVE NOT OPENING(PFE,SONIC)|        |  X   |  X    |
   334  |EVP VOLTAGE ABOVE CLOSED LIMIT  |   X    |  X   |  X    | 
        |   (SONIC)                      |        |      |       |
   335  |EPT SENSOR VOLTAGE OUT OF RANGE(PFE)X    |      |       |
   336  |EPT VOLTAGE HIGH (PFE)          |        |  X   |  X    |
   337  |EPT/EVP CKT. ABOVE MAX. VOLTAGE |   X    |  X   |  X    |
   341  |OCTANE ADJUST SERVICE PIN IN USE|        |      |       |
        |  CIRCUIT GROUNDED              |   X    |      |       |
   411  |RPM NOT WITHIN SELF-TEST LOWER  |        |  X   |       |
        |  RPM LIMIT BAND                |        |      |       |
   412  |RPM NOT WITHIN SELF-TEST UPPER  |        |  X   |       |
        |  RPM LIMIT BAND                |        |      |       |
   452  |INSUFFICIENT INPUT FROM V.S.S.  |        |      |  X    |
   511  |ROM TEST FAILED                 |   X    |      |       |
   512  |KAM TEST FAILED                 |        |      |  X    |
   513  |FAILURE IN EEC REFERENCE VOLTAGE|   X    |      |       |
   522  |NDS CKT. OPEN DURING SELF TEST  |   X    |      |       |








                                         34-3

                            ERROR CODE DESCRIPTION - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                            SELF TEST SECTION
   ERROR|                                |------------------------|
    CODE|        DESCRIPTION             |K.O.E.O  | E.R. |  CONT | 
   --------------------------------------|---------|------|-------|
   524  |LOW SPEED FP CKT OPEN-BAT TO ECA|   X     |      |   X   |
   536  |BOO SWITCH CKT. FAILED OPEN/    |         |  X   |   X   |
        | CLOSED - ECA INPUT OPEN OR     |         |      |       |
        | BRAKE NOT ACTUATED DURING TEST |         |      |       |
   538  |OPERATOR ERROR -(DYNAMIC        |         |  X   |       |
        |  RESPONSE/CYL BALANCE TEST)    |         |      |       |
   539  |AC ON/DEFROST DURING SELF TEST  |   X     |      |       |
   542  |FP CKT OPEN -ECA TO MTR GND     |   X     |      |   X   |
   543  |FP CKT OPEN - BAT TO ECA        |   X     |      |   X   |
   552  |AM1 CKT FAILURE                 |   X     |      |       |  
   553  |AM2 CKT FAILURE                 |         |      |       |
   555  |SUPERCHARGER BYPASS SOLENOID 1  |    X    |      |       |
        |  CKT FAILURE                   |         |      |       |
   556  |FUEL PUMP CKT FAILURE           |    X    |      |   X   |
   558  |ELECTRONIC VAC REGULATOR (EVR)  |    X    |      |       |
        |  CKT FAILURE                   |         |      |       |
   565  |CANNISTER PURGE(CANP)CKT FAILURE|    X    |      |       |
   617  |1-2 SHIFT ERROR                 |         |      |   X * |
   618  |2-3 SHIFT ERROR                 |         |      |   X * |
   619  |3-4 SHIFT ERROR                 |         |      |   X * |
   621  |SHIFT SOLENOID #1 CIRCUIT FAILURE    X    |      |       |
   622  |SHIFT SOLENOID #2 CIRCUIT FAILURE    X    |      |       |
   624  |ETV SOLENOID FAILURE OR OUTPUT  |    X    |      |   X * |
        |  DRIVER SHORT TO GROUND        |         |      |       |    
   625  |ETV SOLENOID DRIVER             |    X    |      |       |
   628  |MLUS ERROR                      |         |      |   X   |
   632  |OVERDRIVE CANCEL SWITCH CIRCUIT |         |  X   |       |
   634  |PRNDL CIRCUIT FAILURE           |         |      |   X   |
   636  |TOT SENSOR OUT OF RANGE         |   X     |  X   |       |
   637  |-40 DEG.F INDICATED TOT CKT OPEN|   X     |      |   X   | 
   638  |290 DEG.F INDICATED TOT CKT GRD |   X     |      |   X   |
   639  |TSS FAILURE                     |         |      |   X   |
   652  |MLUS-OCC ERROR                  |   X     |      |       |  
   654  |MLPS NOT IN PARK                |   X     |      |       |
   655  |MLPS NOT IN NEUTRAL             |   X     |      |       |    
   998  |HARD FAULT PRESENT              |         |  X   |       |

   * SEE BASE STRATEGY FOR TEST DOCUMENTATION.


















                                         34-4












                                      CHAPTER 35

                               ROM IDENTIFICATION CODE

















































                                         35-1

                           ROM IDENTIFICATION CODE - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                 ROM IDENTIFICATION CODE


      ROM identification codes are used by both IC and module  suppliers.   The  IC
      suppliers require a means of identifying ROM chip contents quickly since they
      produce different calibration bit patterns on the  same  wafer.   The  module
      suppliers  utilize  these  codes to insure that the ROM/module combination is
      correct.

      In the past, the ROM identification codes (CALID and VERID) were generated by
      hand.   They  were  then  distributed  to  Engine  Systems  to  put  in their
      calibrations for Cert.  If any change to the Cert calibration was made  or  a
      different strategy used, new values had to be generated and calibrated in.

      For 1988 and beyond, the procedure has been  changed  to  make  this  process
      easier.   The  new  process  removes  CALID  and replaces it with ROM_TO.  In
      addition, VERID has been deleted and a new parameter "FIXSUM" has been added.
      FIXSUM should always be set to 0.  Specifically:


      1.  The non-modifiable Vector  parameter  "ROM_TO"  replaces  the  old  CALID
          parameter  as  the ROM chip identifier.  The ROM_TO value is generated by
          Vector during a calibration release and is located  at  200A  HEX.   This
          value  is  the complement of the ROM pattern CHECKSUM and is also used to
          perform the EEC-IV diagnostic "CHECKSUM Memory Test".

      2.  The new parameter "FIXSUM" is a Vector calibration parameter  located  at
          2004  HEX  and should always be set to 0.  This parameter will be used to
          assure the ROM_TO values are unique and will only be changed by the  SWDV
          engineer if a duplicate ROM_TO value is found.


                           ROM IDENTIFICATION CODE PROCEDURES



      1.  PEDD SW will set the value of the calibration parameter FIXSUM  to  0  in
          the base release.

      2.  When Engine Systems releases a CERT calibration, the ROM  chip  ID  code,
          ROM_TO, will be automatically generated by VECTOR, and the value is to be
          recorded on the calibration release sheet submitted to SWDV.

      3.  PEDD SWDV will verify that the ROM_TO value is not the same as any  other
          previous  ROM_TO  prior to sending the binary file to EED.  If the ROM_TO
          value matches another, PEDD SWDV will change  the  value  of  FIXSUM  and
          generate  a  new  ROM_TO  value, which will be checked again for a match.
          This process is repeated until a unique ROM_TO value is generated.

      4.  For production calibrations only, EED systems will receive and record the
          value of ROM_TO for final ROM verification.

      5.  EED will then transmit the binary file to the  vendors,  verify  the  ROM
          chip  against  the  binary  file,  verify  the  CHECKSUM,  verify the RAM
          read/write test, and verify the ROM_TO value and location.





                                    35-2

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                                   INDEX



   2, 19-13                            ACTPTMR2, 3-8, 11-6, 11-8
                                       ADAPTM, 7-74
   AC_MN_DT, 11-7                      ADEGCT, 7-75
   AC_MN_FT, 14-4                      ADPLOD, 7-74
   AC_OFF_DLY, 10-19                   ADPTMR, 7-74, 26-2, 26-8
   AC_PPM, 10-25                       ADPTMR_FLG, 26-8
   AC_PPM_RQST, 10-25, 10-28, 11-10    ADT1FMFLG, 12-8, 27-11, 33-104
   ac_rpm, 10-9, 10-15, 10-19          ADT2FMFLG, 12-8, 27-12, 33-104
   AC_RPM_FLG, 10-19                   AELOAD, 3-8
   AC_STATE_ENT, 23-57                 AETP, 3-8
   ACC_DELAY, 11-10                    AFECT1, 26-8
   ACCFLG, 10-42, 11-10, 22-48,        AFECT2, 26-8
       23-57                           AFMFLG, 7-74, 9-6, 9-16, 9-24,
   ACCS, 11-2                              13-9, 27-7 to 27-8, 32-11,
   ACECT_CL, 11-6                          33-104
   ACECT_FLG, 11-6 to 11-7             AHISL, 7-95
   ACECT_SH, 11-6                      AHISL_TICK, 7-95, 7-140 to 7-141,
   ACIOTMR, 10-19, 11-7 to 11-8,           7-171
       14-4                            AIOTMR, 11-6
   ACITMR, 11-8, 11-10                 AIR_ACEL, 19-3
   ACLOD, 10-42                        AIR_B3, 19-3, 19-11, 19-20
   ACMNDT_N, 11-6                      AIR_BF_FLG, 19-3, 19-11, 19-20
   ACMNDT_TP, 11-6                     AIR_BG_FIL, 19-3, 19-11, 19-22
   ACNHI_FLG, 11-6 to 11-7             AIR_CHG, 19-3, 19-11, 19-14,
   ACNHI_SH, 11-6                          19-16, 19-20, 19-22
   ACNLO_CH, 11-6                      AIR_CHG_COMP, 19-8, 19-24
   ACNLO_FLG, 11-6 to 11-7             AIR_CHG_CUR, 19-3, 19-8, 19-11,
   ACNLO_SH, 11-6                          19-14, 19-24
   ACOFFTMR, 3-8                       AIR_CHG_LEAK, 19-3
   ACPSW, 14-7, 27-5                   AIR_CHG_PRV, 19-8, 19-14, 19-16
   ACPSW_HP, 27-5                      AIR_CHG_ST, 19-3, 19-8
   ACR, 11-10, 32-11                   AIR_CHG_W, 19-3
   ACRPMTMR, 3-8                       AIR_CHG_WOT, 3-8, 19-3, 19-11,
   ACRQST, 10-19, 11-7 to 11-8,            19-16, 19-20
       11-10, 14-4                     AIR_CRK_INT, 5-7, 19-22
   ACRT, 3-6                           AIR_DEC_MUL, 19-11
   ACSTRD, 11-7                        AIR_DOWN_CAL, 7-129, 7-163, 19-7
   ACSTRT, 7-108 to 7-109, 24-10,      AIR_FK, 19-11
       24-50                           AIR_K_OLD, 19-3, 19-11, 19-14
   ACSTRT_ACCUM, 5-6, 24-10, 24-50     AIR_MAN_VOL, 19-20
   ACSW, 11-2, 11-7                    AIR_NUM_MULT, 19-3, 19-11, 19-20
   ACT, 3-8, 7-41, 7-108, 9-9, 13-8,   AIR_PIP_CNT, 19-7
       19-20, 24-24, 24-28, 24-50,     AIR_PIP_INT, 5-7
       27-7, 27-17, 33-11              AIR_STRT, 19-22
   ACTFMM, 27-7                        AIR_WOT_ANT, 19-3, 19-16, 19-20
   ACTMAX, 27-7, 31-11, 33-8           AISF, 7-98, 7-103 to 7-104, 7-133
   ACTMIN, 27-7, 31-11, 33-8           AISFM, 7-103
   ACTP_CL, 11-8                       ALOSL, 7-95
   ACTP_FLG, 11-6 to 11-7, 14-4        ALOSL_TICK, 7-95, 7-140, 7-171
   ACTP_SH, 11-6                       ALT_CAL_DIST, 18-5
   ACTPLOW_FLG, 11-6





                                  Index-1

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   ALT_CAL_FLG, 7-25, 7-41, 7-95,      BCSDC_HR1, 23-42
       10-15, 10-17, 10-20, 10-31,     BCSDC_HR2, 23-42
       18-3, 18-5                      BCSDC_HRD, 20-33, 23-33 to 23-34,
   AM, 7-108 to 7-109, 8-19, 9-9,          23-41 to 23-42
       9-16, 9-25, 12-9, 24-23,        BCSDC_I, 23-43
       27-31, 27-33                    BCSDC_OPN, 23-33 to 23-34, 23-40
   AM1, 13-9 to 13-11                      to 23-41
   AM2, 3-3, 13-9 to 13-12             BCSDC_P, 23-43
   AM2_PW_DTKS, 13-12                  BCSDC_SFT_ST, 23-31, 23-33
   AM2_PW_DUCE, 13-12                  BFMFLG, 9-6, 33-104
   AM_INT_CUR_X, 19-6, 19-8            BG_TMR, 8-24, 8-36, 10-55, 18-5,
   AM_INT_PRV_X, 19-8                      23-41 to 23-43, 23-46, 24-9
   AMPEM, 9-25                         BGACFLG, 19-8, 19-22
   AMPMUL, 7-75                        BIAS_G, 7-51 to 7-52, 7-59 to
   ANPIP, 7-45 to 7-47, 7-60               7-61, 7-76, 33-10
   ANPIP1, 3-8                         BIFLG, 23-16, 24-8, 32-23, 33-61
   ANPIP2, 3-8                         BIHP, 24-8, 32-23, 33-61
   ANTICIPATION, 19-14                 BKPT_PW, 7-95, 7-171
   APT, 3-8, 6-4, 7-22 to 7-23, 7-30,  BOO, 24-8
       7-42, 7-46, 7-91, 7-95, 8-19,   BOO_LVL, 24-8
       8-43, 9-6, 9-14, 9-23, 10-8,    BP, 7-42, 8-13, 8-16, 9-9, 9-16
       10-21, 10-41, 12-6, 13-6 to         to 9-17, 10-46, 19-20, 19-22,
       13-10, 24-11 to 24-12, 26-10        20-4, 23-17, 24-23, 24-28 to
       to 26-11, 26-13 to 26-15,           24-30, 28-5, 28-8, 33-11
       33-33                           BP_DISOFF, 24-28
   ARCANTCOR, 19-20                    BP_DISPLAY, 24-28
   ARCHFLG, 19-3, 19-11, 19-22         BP_INTR, 3-8, 20-4, 21-9 to 21-11,
   ARCHGQ1_FLG, 19-21                      23-50
   ARCHIDLE_SW, 19-22                  BP_WORD, 9-16, 9-22, 9-24
   ARCHLK, 19-24                       BPKFLG, 24-10
   ARCHQ1_FLG, 19-21                   BPMAX, 24-28 to 24-30, 28-8
   ARCHSW, 19-22                       BPMIN, 24-28 to 24-30, 28-8
   ARCWOTCOR, 19-20                    BPUFLG, 24-12
   ATBYS, 13-8                         BPUNMH, 23-17
   ATMR1, 7-20, 7-41 to 7-42, 7-104,   BPUNMN, 23-17
       7-113, 9-6, 10-17 to 10-18,     BPUPDENTM, 24-28
       11-7, 12-7, 13-9 to 13-10,      BPUPDTTMR, 24-28
       19-22, 24-10, 24-48, 26-2,      BRAKE_NEVER_OFF, 32-11
       26-8 to 26-9                    BRAKE_NEVER_ON, 32-11
   ATMR1_LST, 26-8 to 26-9             BRK_AWAY_CNT, 23-57, 23-59
   ATMR2, 7-20, 7-113, 9-6, 12-7,      BRK_AWAY_LVL, 23-59
       26-2, 26-8                      BRK_NEVER_OFF, 32-23
   ATMR3, 7-108 to 7-109, 8-19,        BRK_NEVER_ON, 32-23
       10-20, 26-2, 26-8               BRKDLY, 23-19
   ATMR4, 7-21                         BYLDST, 20-40
   AWOTMR_D_FLG, 13-6                  BYMAST, 20-40
   AWOTMR_MAX, 13-6                    BYP_LOD, 13-9
   AWOTMR_U_D, 13-6, 13-9 to 13-10     BYP_TM, 13-8
   AWOTMR_U_FLG, 13-6                  BYPLES, 26-12
                                       BYPLES1, 7-10, 7-12
   BAPFMM, 24-28, 24-30, 28-5, 28-8    BYPLODHI, 13-8
   BCSDC, 20-33, 23-31, 23-33 to       BYPLODLO, 13-8
       23-34, 23-40 to 23-43, 23-60    BYPTMR1, 13-8 to 13-9
   BCSDC_D, 23-43                      BYPWOT, 13-9
   BCSDC_HR, 23-41                     BYTE_8, 16-50





                                  Index-2

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   BYTE_9, 16-50                       C183LVL, 27-11, 33-66
   BYTE_NUM, 16-48 to 16-50            C184, 33-20
   BZZRPM, 10-15, 10-17                C184FIL, 27-25
   BZZRPM LOGIC, 10-17                 C184LVL, 27-25
   BZZRPM_ALT, 10-15, 10-17            C185, 33-20
   BZZTM, 10-17 to 10-18               C185FIL, 27-25
   BZZTM_ALT, 10-17                    C185LVL, 27-25
                                       C186, 33-20
   C112FIL, 27-8                       C186FIL, 33-18
   C112LVL, 27-8                       C186LVL, 33-18
   C113FIL, 27-8                       C187, 33-20
   C113LVL, 27-8                       C187FIL, 33-18
   C117FIL, 27-18                      C187LVL, 33-18
   C117LVL, 27-18                      C188FIL, 27-12
   C118FIL, 27-18                      C188LVL, 27-12, 33-67
   C118LVL, 27-18                      C189FIL, 27-12
   C121FIL, 27-31, 27-34               C189LVL, 27-12, 33-67
   C121LVL, 27-32, 27-34               C191FIL, 27-12
   C122FIL, 27-31 to 27-32, 27-34      C191LVL, 27-12, 33-67
   C122LVL, 27-32, 27-34               C192FIL, 27-12
   C122UP, 27-31                       C192LVL, 27-12, 33-67
   C123FIL, 27-31 to 27-32, 27-34      C211FIL, 20-31
   C123LVL, 27-32, 27-34               C211LVL, 33-48
   C123UP, 27-31                       C211UP, 33-48
   C124, 33-19                         C212LVL, 33-48
   C124FIL, 27-31, 27-34               C212UP, 33-48
   C124LVL, 27-32, 27-34               C326FIL, 33-42
   C125, 33-19                         C326LVL, 33-42
   C125FIL, 27-31                      C327FIL, 27-20 to 27-21, 27-26,
   C125LVL, 27-32, 27-34                   27-28, 33-42 to 33-43
   C157FIL, 27-25                      C327LVL, 27-20 to 27-21, 27-26,
   C157LVL, 27-25, 33-21                   27-28
   C157UP, 33-21                       C332FIL, 33-27, 33-29, 33-34,
   C158FIL, 27-25                          33-43, 33-45, 33-104
   C158LVL, 27-25, 33-21               C332LVL, 33-27, 33-29, 33-34,
   C158UP, 33-21                           33-43, 33-104
   C171FIL, 7-13                       C334FIL, 33-29
   C171LVL, 7-13                       C334LVL, 33-29
   C172FIL, 7-13                       C336FIL, 33-42
   C172LVL, 7-13                       C336LVL, 33-42
   C173FIL, 7-13                       C337FIL, 27-20 to 27-21, 27-26,
   C173LVL, 7-13                           27-28, 33-42 to 33-43
   C175FIL, 7-13                       C337LVL, 27-20 to 27-21, 27-26,
   C175LVL, 7-13                           27-28
   C176FIL, 7-13                       C413LVL, 33-97
   C176LVL, 7-13                       C413UP, 33-97
   C177FIL, 7-13                       C414LVL, 33-97
   C177LVL, 7-13                       C414UP, 33-97
   C179FIL, 27-11                      C415LVL, 33-97
   C179LVL, 27-11, 33-66               C415UP, 33-97
   C181FIL, 27-11                      C416LVL, 33-98
   C181LVL, 27-11, 33-66               C416UP, 33-98
   C182FIL, 27-11                      C452FIL, 33-57 to 33-58
   C182LVL, 27-11, 33-66               C452LVL, 33-58
   C183FIL, 27-11                      C617_KAM_BIT, 21-53





                                  Index-3

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   C617CNT, 21-53                      CODE_129, 32-39 to 32-41
   C618_KAM_BIT, 21-53                 CODE_167, 32-39 to 32-41
   C618CNT, 21-53                      CODE_225, 32-39, 32-41
   C619_KAM_BIT, 21-53                 CODE_538, 32-39 to 32-41
   C619CNT, 21-53                      CODE_542, 31-35
   C624FIL, 22-43                      CODE_543, 31-34
   C624LVL, 22-43                      CODE_556, 31-34
   C628_KAM_BIT, 20-34                 COEFDC, 9-28
   C628CNT, 20-34                      COEFER1, 9-28
   C639FIL, 20-25                      COEFER2, 9-28
   C639LVL, 20-25                      COLTBU, 7-73
   C656_KAM_BIT, 23-56                 CONPR, 3-8, 9-15, 9-17
   CALCLP, 7-168                       COUNT, 32-10
   CANP, 3-3                           CPRGTMR, 12-7, 12-9
   CANP_PRD_DT, 25-3                   CRK_ECT_CTR, 27-19
   CANP_PW_DTKS, 12-10                 CRK_FUL, 7-95, 7-147 to 7-148,
   CANP_PW_DUCE, 12-10                     7-159
   CART_MODE, 16-49                    CRK_PIP_CAL, 27-19
   CART_STATUS, 16-48 to 16-50         CRK_PIP_INJ, 7-95, 7-148, 27-19
   CC_ERR_SW, 20-9                     CRK_PIP_INT, 7-147, 27-19
   CC_FM_FLG, 20-9, 20-34, 22-14,      CRKCTR_RESET, 26-9
       23-18                           CRKFLG, 3-8, 5-6, 6-4, 7-10, 7-21,
   CC_FM_LVL, 20-34                        7-84, 7-95, 7-103, 7-114,
   CCD_HP, 8-56, 8-68 to 8-69, 8-72,       7-140, 7-147 to 7-148, 7-155,
       8-74 to 8-76                        7-159, 9-6, 9-14, 9-23, 10-7,
   CDNMULT, 10-25                          10-21, 14-4, 19-22, 19-24,
   CFIEPT, 33-33 to 33-34, 33-39,          20-9, 20-31, 24-9, 24-11 to
       33-41                               24-12, 24-14, 24-18, 26-8 to
   CFMFLG, 7-74, 9-6, 9-16, 9-24,          26-9, 27-3 to 27-4, 27-17,
       13-9, 14-4, 14-7, 24-32,            27-24, 27-31, 33-6, 33-57,
       24-35, 27-17 to 27-18, 32-11,       33-61, 33-103
       33-104                          CRKPIP_CTR, 7-108, 26-9
   CHANGE_FUELPW, 7-141, 7-164 to      CRKPIP_CTR_BG, 7-108, 26-5, 26-9
       7-165                           CRKPIPCNT2, 26-9
   CHANGED PAGES, 1, 5 to 6, 11, 1-2,  CRKTIM, 10-20
       7-85 to 7-96, 7-116 to 7-136,   CRKTM1, 26-9
       7-138, 7-140 to 7-171           CRKTMR_INC, 26-9
   CHGTM, 10-21                        CS_MAX_TIME, 20-54
   CHKAIR, 7-30, 13-11                 CS_MULT, 20-54
   CHKSUM, 7-13, 7-77 to 7-78, 28-5    CS_SFT_MULT, 20-54, 21-9 to 21-11,
       to 28-6                             23-17
   CIDRSW, 7-114                       CTAFLG, 13-7, 13-10
   CINTSW, 7-114                       CTARTM, 13-10
   CINTV, 7-114                        CTATMR, 13-7, 13-10
   CL_THRTL, 6-4, 8-7                  CTBYS, 13-8
   CLDCTM, 21-45                       CTBYSH, 13-8
   CLLS_AT_PT, 8-19                    CTDFSO, 7-90
   CLOCK, 23-58 to 23-59               CTDLY, 23-19
   CLOCK_SEC, 24-9                     CTEDSO, 7-90
   CMD_CODE, 16-49 to 16-50            CTEHI, 9-14, 24-12
   CNET_TP_MIN, 23-57                  CTHIGH, 7-20, 7-113, 9-6, 12-7
   CODE 112, 31-11                     CTHIN, 7-42
   CODE 113, 31-11                     CTLOW, 7-20, 7-42, 7-113, 9-6,
   CODE 114, 31-11, 32-21                  9-9, 12-7, 26-15
   CODE 213, 32-31                     CTNFLG, 7-30, 10-17, 26-10





                                  Index-4

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   CTNTMR, 7-30, 26-2, 26-10           DELTOTLD, 20-40, 24-28
   CTPRG, 12-6                         DESDP, 9-15, 9-17
   CTPRGH, 12-6                        DESEM, 9-9, 9-15, 9-17, 9-22
   CTPTFG, 6-4, 10-55                  DESEM_FLG, 9-15
   CTTMR, 7-31, 7-90, 7-104, 7-107,    DESEP, 9-17
       26-2, 26-10                     DESMAF, 10-3, 10-56
   CXXX_KAM_BIT, 33-4                  DESMAF_PRE, 10-3, 10-25 to 10-26,
   CXXXCNT, 33-4                           10-55 to 10-56
   CXXXFIL, 33-4                       DESNLO, 10-15 to 10-16, 10-18
   CXXXLVL, 33-4                       DFHLOD, 7-89
   CXXXUP, 33-4                        DFHLODH, 7-89
   CYCCTR, 21-45                       DFLOD, 7-89
   CYL_AIR_CHG, 7-104, 7-133, 7-140,   DFLODH, 7-89
       7-163, 8-9, 8-64, 19-3, 19-16,  DFMIN0, 8-54
       19-22                           DFNOVH, 7-89
   CYLARC_BG, 19-3, 19-8, 19-22,       DFNOVS, 7-89
       24-23                           DFSECT, 7-91
                                       DFSFLG, 7-91, 7-103, 7-118, 13-9,
   D, 7-91, 7-95                           33-16 to 33-17
   D21DLY, 23-21                       DFSLAM, 7-41
   D32DLY, 23-21                       DFSRPH, 7-89
   D43DLY, 23-21                       DFSRPM, 7-89
   DALOD_FLG, 13-8, 13-10              DFSVS, 7-89
   DASCTL, 10-41, 26-15                DFSVS_HYS_FG, 7-89, 7-91
   DASMHYST, 10-8                      DFSVSH, 7-89
   DASMPH, 10-8                        DGT3, 8-66
   DASPOT, 10-3, 10-35 to 10-36,       DIFCTR, 8-54
       10-41, 10-56, 26-15             DISABLE_ISC, 10-7, 32-18, 32-36
   DASPTK, 10-35                       DISABLE_NOSTART, 33-103
   DATA_TIME, 19-6, 20-27, 24-44       DISTANCE, 18-5
   DC3_PRD_DT, 25-3                    DISTRIBUTOR ROTOR REGISTRY, 8-46
   DC5_PRD_DT, 25-3                    DLT_INDS, 20-47
   DC6_PRD_DT, 25-3                    DMIN1, 8-54
   DC7_PRD_DT, 25-3                    DNAC_DR, 10-18
   DCECTTM, 7-31                       DNAC_NEUT, 10-18
   DCELQ4, 7-89 to 7-90                DNDSUP, 7-25, 7-42, 7-114, 8-19,
   DCELQ5, 7-89 to 7-90                    8-43, 10-17 to 10-18, 10-20,
   DCEVS, 7-31                             10-25, 10-28, 10-35, 10-41 to
   DCEVSH, 7-31                            10-42, 24-33, 24-35, 26-11
   DCLST_START, 32-5                   DNDT_LST, 8-24 to 8-25
   DCOFF, 9-28                         DNDT_SPK, 8-9, 8-24 to 8-25, 8-45,
   DCSM_WU_CNT, 23-56                      24-38
   DCSTROKE, 23-33, 23-41              DNLOD, 13-8
   DEBYCP, 10-54                       DNLODH, 13-8
   DEBYMA, 10-2, 10-54                 DNSTMI, 13-10
   DEGPIP, 7-115                       DOL, 3-3
   DELAMB, 7-75                        DOL_COUNT, 3-8, 7-149, 15-3
   DELHYS, 10-3, 10-35                 DOUBLE_EDGE, 8-56 to 8-57, 8-68
   DELOPT, 9-21 to 9-22, 9-24          DP_MAX, 9-16 to 9-17
   DELPR, 9-16                         DP_MIN, 9-16 to 9-17
   DELTA, 6-4                          DRBASE, 8-43, 10-15
   DELTA_RATIO, 21-32, 21-36, 23-27,   DRBASE_ALT, 10-15
       23-32 to 23-33                  DRC21, 21-36
   DELTAT, 24-51 to 24-52              DRC23, 21-32
   DELTOTHI, 24-28                     DRC34, 21-32





                                  Index-5

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   DRV2NEU_FLG, 22-7 to 22-9           ECT, 3-8, 5-6 to 5-7, 7-21 to
   DSDRPM, 7-89, 7-103, 8-40, 8-43,        7-23, 7-25, 7-31, 7-41, 7-75,
       9-14, 10-7, 10-9, 10-15,            7-91, 7-98, 7-102, 7-104,
       10-18 to 10-20, 10-31, 10-35,       7-107, 8-13, 8-19, 8-27, 8-83,
       10-41, 10-55, 24-12, 24-32,         9-9, 9-14, 11-6, 12-6, 13-8,
       32-18, 32-36                        14-4, 14-7, 19-20, 20-54,
   DSDRPM_CALC, 10-7                       23-3, 23-17, 24-9, 24-12,
   DSDRPM_LST, 10-15, 10-31                24-28, 24-50, 26-8, 27-17 to
   DSDRPM_OFF, 10-31                       27-18, 27-29 to 27-30, 33-6
   DSLMBS1_D, 7-63                     ECT_INST, 27-17, 27-19
   DSLMBS2_D, 7-63                     ECT_TQM, 20-54
   DSRDE[GR_CM], 23-27                 ECTBPLO, 24-28
   DSRU[GR_CM], 23-31                  ECTCNT, 5-6, 10-31, 24-10, 24-50,
   DSRUE, 23-27                            27-29 to 27-30
   DSTM2, 7-90                         ECTFMM, 27-18
   DSTPBR, 10-3, 10-7, 10-35           ECTMAX, 27-17, 33-7
   DT12S, 7-98, 7-104, 7-120, 7-126,   ECTMIN, 27-17, 33-7
       7-130, 7-133, 7-141, 7-168,     ECTNOK, 8-83
       8-50 to 8-51, 8-54, 8-66 to     ECTSTABL, 7-21
       8-68, 8-74 to 8-76, 8-81,       ECTSTABLTIM, 7-21
       24-9                            ECTSTHYS, 7-21
   DT12S_AVG, 21-58, 23-31, 24-9       EDF_DELAY, 10-26
   DT12SH, 7-141                       EDFHP, 10-26, 14-4, 14-10, 31-25,
   DT23S, 7-120, 8-50, 8-54                31-41
   DTPCYC, 8-51                        EDFPPM, 10-26
   DTSIG, 8-50                         EDFTMR, 14-10
   DUCE_VFS_1, 22-36 to 22-37          EDFTPPM, 10-25 to 10-26
   DWELL, 8-68, 8-73 to 8-75           EDSEL, 7-148
   DWELLA, 8-72                        EEC_CHKSUM, 16-48 to 16-50
   DWELLM, 8-72                        EFFLG1, 7-102 to 7-103, 32-11
   DWFHP, 14-10                        EFMFLG, 9-6, 9-14, 9-16, 9-23 to
   DWL_MAXT, 8-72                          9-24, 27-20 to 27-21, 27-26
   DWL_XS_MIN, 8-72                        to 27-28, 33-104
   DWLBSE_D, 8-72                      EFMHI, 27-20 to 27-21, 27-26 to
   DWLCOR, 8-73                            27-28, 33-23, 33-36, 33-39,
   DWLELD, 8-56, 8-58, 8-73 to 8-76        33-42 to 33-43, 33-45
   DWLIDM, 8-73                        EFMLO, 27-20 to 27-21, 27-26 to
   DWLMAX, 8-72                            27-28, 33-23, 33-36, 33-39,
   DWLMAXT, 8-74, 8-76                     33-42 to 33-43, 33-45
   DWLMIN, 8-72                        EFTC, 7-103 to 7-104
   DWLTSW, 8-74, 8-76                  EFTR, 7-98, 7-103, 7-133
   DYN_MIN_ARC, 7-163                  EGO-1, 26-12
   DYNPW, 7-164 to 7-165, 7-168,       EGO1FMFLG, 7-13, 12-7, 33-104
       7-171                           EGO2FMFLG, 7-13, 12-7, 33-104
                                       EGO_CNT1, 26-12
                                       EGO_CNT2, 26-12
                                       EGOBAR1, 32-5
                                       EGOBAR2, 32-5
                                       EGOCL1, 7-41
                                       EGOCNT11, 7-10
   EAM, 32-11                          EGOCNT21, 7-12
   EAM_HP, 13-12                       EGOCT11, 7-10, 7-74, 7-76 to 7-77
   ECHO_PIP, 8-6, 8-57 to 8-58         EGOCT21, 7-12, 7-74, 7-76, 7-78
   ECHO_TRANS, 8-6, 8-57 to 8-58       EGOFL1, 33-19
   ECSM_LVL, 23-56                     EGOFL11, 7-9, 7-76





                                  Index-6

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   EGOFL2, 33-19                       EPCFMRV, 22-14
   EGOFL21, 7-9, 7-76                  EPT_OK_FLG, 9-15
   EGOFLx1, 7-9, 7-60 to 7-61          EPTBAR, 3-8, 9-14 to 9-17, 24-12
   EGOSS11, 7-10                       EPTBAR_CH, 9-15
   EGOSS21, 7-12                       EPTBAR_SL, 9-15
   EGOSSS1, 7-10, 7-12, 7-41           EPTMAX, 31-14, 32-33, 33-36,
   EGOSTE1, 32-5                           33-39, 33-41
   EGOSTE2, 32-5                       EPTMIN, 31-14, 32-33, 33-36,
   EGR, 26-15                              33-39, 33-41
   EGR_ERROR, 9-17, 9-21, 9-28         EPTSW, 24-12
   EGR_ERROR0, 9-28                    EPTZER, 9-14, 9-16 to 9-17, 24-12,
   EGR_ERROR1, 9-28                        27-27 to 27-28, 28-5, 28-8
   EGR_ERROR2, 9-28                    EPTZER_IV, 9-14, 33-33
   EGR_ON_FLG, 9-15, 9-22, 9-28        ERR_AM_INJ, 33-18 to 33-20
   EGRACT, 8-16, 8-27, 9-3, 9-25,      ERR_T0, 20-33, 23-43, 23-47,
       19-20, 20-40                        23-56, 23-58
   EGRATE, 9-9, 9-22                   ERR_T1, 23-43, 23-47
   EGRBAR, 3-8, 9-23, 24-11            ERR_TP_AM, 33-18 to 33-19
   EGRDC, 9-3, 9-28 to 9-29, 32-11,    ERR_TP_INJ, 33-18 to 33-20
       32-34 to 32-35, 33-25, 33-27,   ERR_TST_BRK, 23-56, 23-58
       33-34                           ETLUMX, 23-17
   EGRDC1, 9-28                        ETV_BIAS, 22-41
   EGRDC2, 9-28                        ETV_GAIN, 22-41
   EGRDC_MAX, 9-28                     ETV_GAIN_BAT, 22-41
   EGREN, 9-6, 9-9, 9-15 to 9-17,      ETV_OCM_MN_D, 22-41
       9-21 to 9-22, 9-24, 9-28,       ETV_TEST, 22-14, 22-42
       26-15, 33-90                    ETVOCM, 20-15, 22-42
   EGRFLG, 9-28                        EVP, 3-8, 9-23, 24-11, 27-20 to
   EGRGAIN, 9-28                           27-21
   EGRHP_FLG, 9-3                      EVPBAR, 9-21, 9-24
   EGRMPT, 9-9, 26-15                  EVPMAX, 9-23, 27-20 to 27-21,
   EGRTD1, 9-6                             31-14, 32-33, 33-24
   EGRTD2, 9-6                         EVPMIN, 9-23, 27-20 to 27-21,
   EGRTD3, 9-6                             31-14, 32-33, 33-23
   EGRTD4, 9-6                         EVR, 3-3
   EGRTD5, 9-6                         EVR_PRD_DT, 9-29, 25-3
   EIP_TMR, 22-8, 24-48                EVR_PW_DTKS, 9-29
   EISF, 7-102, 7-104, 7-133           EVR_PW_DUCE, 9-29
   EISF_FG, 7-133                      EVTDOT, 12-7
   EM, 9-3, 9-15 to 9-16, 9-24 to
       9-25
   ENA_CSLP_TST, 23-57                 F_A_RATIO1, 3-8, 7-95
   ENABLE_DYNAM, 7-163                 F_A_RATIO2, 3-8, 7-95
   ENGCYL, 7-54, 7-59, 7-163, 8-51,    F_A_RATIOn, 7-140
       8-59 to 8-60, 8-72, 19-24,      FAEGCT, 7-75
       20-40, 24-23                    FAN_DELAY, 14-10
   ENPIP, 7-45 to 7-47, 7-60           FANTMR, 10-26, 14-10 to 14-11
   ENPIP1, 3-8                         FB_DIFF, 7-95, 7-140 to 7-141,
   ENPIP2, 3-8                             7-171
   EOFF, 3-8, 9-22 to 9-24, 24-11,     FBS_ENTRY_TC, 8-36, 8-40, 8-43
       27-20 to 27-21                  FEPTSV, 32-34
   EPC_CM_ENA, 22-41                   FGFFLG, 7-155 to 7-156
   EPC_ENG_TMR, 22-8 to 22-9           FIEPT, 32-33 to 32-34, 33-33,
   EPC_ERR_SW, 20-9                        33-36 to 33-37
   EPC_MAN42, 22-33                    FILFRC, 19-11





                                  Index-7

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   FILHYS, 7-13, 20-25, 27-3 to 27-4,  FLG_FRST_CM, 21-25, 21-40 to
       27-8, 27-11, 27-18, 27-20 to        21-42, 21-51, 21-57, 22-24,
       27-21, 27-25 to 27-26, 27-28,       22-35, 23-17, 23-26, 23-31
       27-32, 27-34, 33-18, 33-58      FLG_FRST_DS, 21-3 to 21-5, 21-24,
   FIRST_MPH, 24-44                        21-36, 22-10
   FIRST_OSS, 20-23, 20-27             FLG_FRST_ECT, 27-17
   FIRST_PIP, 5-7, 7-147, 24-38 to     FLG_FRST_NOV, 20-20, 28-5
       24-39, 33-103                   FLG_FRST_TCS, 20-13
   FIRST_PIP_LO, 24-38 to 24-39        FLG_FRST_TV, 22-7, 22-16
   FKARCCRANK, 19-22                   FLG_FWD_REV, 22-9 to 22-10, 22-20
   FKARCIDLE, 19-22                    FLG_HIGH_ALT, 23-17
   FKEXIT_MIN, 8-36                    FLG_HIGH_SLP, 20-31 to 20-33
   FKMKAY, 8-51                        FLG_HOT_21, 21-9, 21-11
   FKSKAY, 8-50                        FLG_HRD_EN, 23-8
   FL, 33-8                            FLG_HRD_JMP, 23-41 to 23-42
   FL ACCEPT, 33-8                     FLG_HRD_LK, 23-8, 23-41 to 23-42
   FL UNDERLINE, 33-8                  FLG_HRD_LST, 23-8, 23-41
   FL_OLTMR_337, 7-31                  FLG_HRD_MODE, 23-41 to 23-42
   FL_OLTMR_338, 7-31                  FLG_HT_MOD, 23-7, 23-57
   FL_OLTMR_VSBAR, 7-31                FLG_MAN42, 21-25, 22-33
   FLG_4X4L, 7-16, 20-17, 20-21,       FLG_MLUS_FM, 23-18, 23-20, 23-22
       21-10 to 21-11, 21-16, 21-33,   FLG_NEU_DRV, 22-8 to 22-9
       21-40, 22-25, 22-33             FLG_NEU_REV, 22-8 to 22-9
   FLG_BCSDCNXT, 23-31 to 23-32        FLG_NEW_NOV, 20-20
   FLG_CLUP, 23-8, 23-26 to 23-27,     FLG_NOV_KAM, 20-20, 21-51, 28-5
       23-33, 23-40, 23-43, 23-46      FLG_NV_SHFT, 21-15 to 21-16,
   FLG_CLUP_LST, 23-26                     23-26
   FLG_CRV_DS, 20-31, 23-50 to 23-51   FLG_OL_320A, 7-30 to 7-31
   FLG_CRV_LK, 23-7 to 23-8, 23-33,    FLG_OL_337, 7-30 to 7-31
       23-46, 23-51                    FLG_OL_338, 7-30 to 7-31
   FLG_CRV_LST, 20-31, 23-50           FLG_OL_VS, 7-30, 7-32
   FLG_CT_LST, 23-15                   FLG_OLUP, 23-26 to 23-27, 23-40,
   FLG_DASMNQ, 10-7 to 10-8, 10-35         23-42
   FLG_DASMNQ LOGIC, 10-8              FLG_OLUP_LST, 23-26, 23-42
   FLG_DCSM_UP, 23-56                  FLG_OPEN, 20-33, 21-51, 23-8,
   FLG_DE_CMGR, 21-32, 21-36, 22-13        23-26, 23-40 to 23-41
   FLG_DFSO_LOAD, 7-89 to 7-90         FLG_OPEN_LST, 23-8, 23-40
   FLG_DFSO_NOVS, 7-89 to 7-90         FLG_OPN_BS, 23-26 to 23-27, 23-33
   FLG_DIS_CSM, 23-7, 23-56, 23-59     FLG_OT_LK, 23-3, 23-7, 23-15 to
   FLG_DLY_SOSC, 23-26 to 23-27,           23-17, 23-19, 23-40, 23-50,
       23-31                               23-57
   FLG_DNS_CTL, 23-8, 23-27, 23-32,    FLG_PID_CTL, 23-33, 23-39, 23-41
       23-46                               to 23-43, 23-57
   FLG_DNS_EXIT, 23-27, 23-46          FLG_PWR, 21-40 to 21-42, 21-51,
   FLG_DRV_REV, 22-8 to 22-9               22-12 to 22-13, 22-33, 24-51
   FLG_DYN_CD, 22-25, 24-55                to 24-52
   FLG_ECTSTABLQ, 7-21, 7-31, 7-41     FLG_REV_DRV, 22-8 to 22-9
       to 7-42, 33-17                  FLG_SF_AUTO, 21-25, 21-41 to
   FLG_ENG_IN, 22-9 to 22-10, 22-19        21-42, 21-51
   FLG_ENG_LK, 23-8                    FLG_SFT_DN, 21-3, 21-5, 22-35,
   FLG_ENG_TV, 22-10 to 22-11, 22-20       23-27, 23-31
   FLG_FMM_CC, 23-64                   FLG_SFT_IN, 21-3 to 21-4, 21-20,
   FLG_FMM_LK, 23-7, 23-51, 23-64          21-25, 21-42, 21-52, 22-11 to
                                           22-13, 22-24 to 22-25, 22-32,
                                           22-35, 23-18, 23-50, 23-57





                                  Index-8

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   FLG_SFT_MDN, 21-40 to 21-42         FLG_UPS_JMP, 23-41 to 23-42
   FLG_SFT_STRT, 23-26 to 23-27,       FLG_VE_DSGR, 21-15 to 21-16,
       23-31, 23-33                        22-13
   FLG_SFT_UP, 21-3, 21-5, 22-12,      FLG_VER_BRK, 23-57 to 23-59
       22-26, 22-33, 22-35, 23-26 to   FLGTVENG_CD, 24-53
       23-27                           FMDTM, 33-105
   FLG_SFT_VAL, 21-51 to 21-52         FMECNT, 27-18
   FLG_SFT_VER, 21-51 to 21-52         FMECTR, 27-17 to 27-18
   FLG_SPK_TQM, 8-64, 21-57 to 21-58   FMEM, 24-51, 27-3 to 27-4
   FLG_SS_1, 21-45                     FMEM_FLAG, 27-4
   FLG_SS_2, 21-45                     FMEM_HEGO, 7-11
   FLG_STABLECT, 7-21                  FMFLG, 27-25
   FLG_STALL, 5-6, 26-9                FMMDSD, 10-7
   FLG_STROKE, 23-33, 23-40 to 23-41   FMMISC, 10-2, 10-7
   FLG_TCS, 20-8, 20-13, 20-48         FMMMLP, 20-48
   FLG_TIP, 23-33, 23-39               FN004, 9-16
   FLG_TIP_OUT, 21-16, 21-42, 22-33    FN005, 7-109
   FLG_TOT_WRM, 20-54                  FN007, 7-109
   FLG_TP3_LCK, 23-7                   FN008, 7-109
   FLG_TP_CT, 23-15                    FN021A, 7-73
   FLG_TQ_TRN, 8-23                    FN023, 7-109
   FLG_TQ_TRUN, 22-48                  FN024, 7-109
   FLG_TQM_BGS, 21-58                  FN035, 10-46, 24-23
   FLG_TQM_ENA, 8-90, 20-54            FN036, 19-6
   FLG_TST_BRK, 23-57 to 23-58         FN040A, 19-22
   FLG_TVENG_CD, 22-20, 24-53 to       FN052B, 19-20
       24-54                           FN052BP, 19-20
   FLG_TVENG_MD, 22-10, 22-20, 24-53   FN052C, 19-22
       to 24-54                        FN052M, 19-20
   FLG_TVSTR_CD, 22-16, 24-53 to       FN059, 19-20, 24-24, 24-28, 33-11
       24-54                           FN059T, 19-20
   FLG_UCTL_LST, 23-26, 23-31          FN070D, 7-73
   FLG_UN_ALT, 23-17, 23-20, 23-22     FN074B, 9-16
   FLG_UN_BRK, 23-16, 23-19, 23-22     FN096, 27-32 to 27-33
   FLG_UN_CT, 23-15, 23-18 to 23-19,   FN1036A, 19-20, 20-40
       23-22                           FN1037, 20-40
   FLG_UN_MDN, 23-17, 23-20, 23-22     FN1039, 20-40
   FLG_UN_PRN, 23-17, 23-19, 23-22     FN1052, 19-20
   FLG_UN_SPD, 23-18, 23-20, 23-22     FN1135, 8-82
   FLG_UN_TEMP, 23-17, 23-20, 23-22    FN1144B, 8-81, 8-84, 8-86 to 8-87
   FLG_UN_TRA, 23-15, 23-19, 23-22     FN123A, 19-24
   FLG_UN_TRD, 23-16, 23-19, 23-22     FN123E, 19-24
   FLG_UN_ULSF, 23-17, 23-21 to        FN125, 26-13
       23-22                           FN129A, 7-42
   FLG_UNC_UNLK, 23-7, 23-17, 23-22,   FN12A, 21-10
       23-26, 23-33, 23-51, 23-64      FN12DC, 22-33
   FLG_UNLK_DS, 21-24, 21-36, 23-8     FN12DC_4X4L, 22-33
       to 23-9, 23-46                  FN12S, 21-10
   FLG_UP_NE, 21-3 to 21-4, 21-9,      FN12S_4X4L, 21-10
       21-42                           FN12T, 22-12
   FLG_UP_TQM, 21-57 to 21-58          FN12TQ, 21-59
   FLG_UPS_CTL, 23-26 to 23-27,        FN1315(N,LOAD), 7-114
       23-31 to 23-33                  FN1321, 7-98, 7-102, 7-104
   FLG_UPS_EXIT, 23-26 to 23-27,       FN1322AL, 7-98, 7-104
       23-46                           FN1322DL, 7-98, 7-104





                                  Index-9

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   FN1323A, 7-104                      FN23T, 22-12
   FN1323D, 7-104                      FN23TQ, 21-59
   FN1325A, 7-79 to 7-80               FN246A, 9-16
   FN1325Arc, 7-77 to 7-78             FN247A, 9-17
   FN1327, 7-148 to 7-151, 7-155,      FN300, 7-41
       7-164                           FN301, 7-42
   FN1329, 7-148 to 7-149, 7-152,      FN303, 7-42
       7-155, 7-164                    FN308, 7-42
   FN1348, 7-109                       FN309, 7-42
   FN1349, 7-109                       FN312QD, 7-107
   FN1350, 7-95                        FN312S, 7-104
   FN1351, 7-51, 7-54, 7-59            FN313, 7-98, 7-102, 7-104
   FN1352, 7-51 to 7-52, 7-59          FN315, 7-59
   FN1353, 7-51 to 7-52, 7-59          FN320A, 7-31
   FN1360, 7-41                        FN325, 7-41
   FN1361, 7-41                        FN32A, 21-11
   FN1362, 7-41                        FN32DC, 22-33
   fn1362, 7-41                        FN32S, 21-11
   FN1362_ALT, 7-41                    FN336(ECT), 7-114
   FN143A, 8-81                        FN337, 7-31
   FN145, 8-84, 8-87                   FN338, 7-31
   FN145A, 8-81                        FN339, 7-61
   FN146B, 8-82                        FN342, 7-60
   FN1615A, 22-48                      FN344, 7-60
   FN1616, 22-48                       FN346, 7-60
   FN1862D, 10-25                      FN346A, 7-51, 7-54, 7-59
   FN1862N, 10-25                      FN348A, 7-95
   FN2000, 8-19                        FN348BP, 7-95
   FN2001, 8-19                        FN34A, 21-9
   FN2020, 8-45                        FN34DC_4X4L, 22-33
   FN2100, 8-13                        FN34DT, 22-34
   FN211, 9-9                          FN34PPH, 21-9
   FN2110, 8-13                        FN34S, 21-9
   FN2120, 8-13                        FN34T, 22-12
   FN212A, 7-42, 9-9                   FN34TQ, 21-59
   FN2140, 8-13                        FN367, 7-95
   FN217A, 9-9                         FN371, 7-25
   FN219B, 9-24                        FN371_ALT, 7-25
   FN21_HOT, 21-11                     FN384, 5-6
   FN21A, 21-10 to 21-11               FN385, 5-7
   FN21DC, 22-33                       FN385(ECT), 5-6
   FN21S, 21-11                        FN387_ALT(ECT), 7-95
   FN21S_4X4L, 21-10                   fn387A, 7-95
   FN220, 9-9                          fn387a, 7-95
   FN2200, 8-16                        FN387A(ECT), 7-95
   FN221B, 9-22                        FN393F, 7-26
   FN2230, 8-16                        FN393R, 7-26
   FN2240, 8-16                        FN394F(ECT), 24-32
   FN2250, 8-16                        FN394R, 24-32, 24-34
   FN2300, 8-27                        FN396A, 7-42
   FN2320, 8-27                        FN43A, 21-11
   FN23A, 21-11                        FN43DT, 22-33
   FN23DC_4X4L, 22-33                  FN43S, 21-11
   FN23PPH, 21-10 to 21-11             FN513, 6-4
   FN23S, 21-11                        FN600, 12-7





                                  Index-10

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   FN602, 12-7                         FN880, 10-15, 10-17, 26-10
   FN603, 12-8                         FN884, 10-7
   FN605A, 12-7, 12-9                  FN884(TCSTRT), 10-2, 10-7
   FN606, 13-9                         FN885, 10-25
   FN607, 13-10                        FN887A(ACT), 10-25
   FN615, 20-4                         FN894, 10-35
   FN615(BP), 20-4                     FN908A, 9-9
   FN616_SW, 22-19                     FN908B, 9-9
   FN616F, 22-16, 22-19                FN[GR_CM]SSLP, 23-7
   FN616R, 22-19                       FN_SRLK, 23-50
   FN617, 22-24, 22-48                 FNDCNOCAP, 23-41
   FN617(SPD_RATIO), 22-42             FNDCNOSLIP, 23-41
   FN618, 22-48                        FNDN2SSLP_0, 23-9
   FN619, 22-48                        FNDN3SSLP_0, 23-9
   FN620, 22-14                        FNDNSSFT32, 23-33
   FN622, 22-14                        FNDNSSFT43, 23-33
   FN622A, 22-14                       FNDRC32, 21-36
   FN623, 22-48                        FNHOTL, 23-50
   FN627, 12-7                         FNHOTU, 23-50
   FN689L, 23-64                       FNKGAIN_D, 23-43
   FN690, 20-54                        FNKGAIN_DU, 23-43
   FN690TQM, 20-54                     FNKGAIN_I, 23-43
   FN703A, 24-7, 24-9, 27-7, 27-17     FNKGAIN_IU, 23-43
   FN703D(ITOT), 27-29 to 27-30        FNKGAIN_P, 23-43
   FN703DB, 27-17                      FNKGAIN_PU, 23-43
   FN711, 8-13                         FNTQ2SRE, 21-58
   FN712, 8-13                         FNTQ2SRS, 21-57
   FN721, 8-16                         FNTQ3SRE, 21-58
   FN722, 8-16                         FNTQ3SRS, 21-57
   FN723, 8-16                         FNTQ4SRE, 21-58
   FN724A, 8-16                        FNTQ4SRS, 21-57
   FN725A, 8-16                        FNTQ_MAX[fn_index], 22-48
   FN730, 8-27                         FNTQMULT, 22-48
   FN731, 8-27                         FNUPSSFT23, 23-33
   FN741, 8-19                         FNUPSSFT34, 23-33
   FN743, 8-23                         FOFFLG2, 7-16 to 7-17, 7-120
   FN745, 8-45                         FP, 3-4
   FN746, 8-45                         FPM, 7-9, 31-34 to 31-35, 32-5
   FN766, 8-24, 8-27, 8-29, 8-37       FRCHIC, 7-109
   FN799, 8-23, 8-25, 8-29, 8-33,      FREQ18, 8-72
       8-90                            FUEL_BKPT, 7-95, 7-140
   FN8000, 10-2                        FUEL_CUT, 7-120, 7-172
   FN811, 10-56                        FUEL_IN_SYNC, 7-126, 24-38
   FN821A, 10-15, 10-17                FUEL_SUM, 7-148 to 7-149, 7-159,
   FN822B, 10-26                           7-171, 15-3
   FN825A, 10-15, 10-17                FUELPW1, 7-148 to 7-151, 7-164
   FN825A_ALT, 10-15, 10-17            FUELPW2, 7-148 to 7-151, 7-164
   FN825B, 10-15, 10-17                FUELPWn, 7-61, 7-141, 7-148 to
   FN826A, 10-15, 10-18                    7-149, 7-159
   FN830, 10-3, 10-35                  fulfg_altpip, 7-130, 7-133
   FN851, 10-56                        FULPIPALT_DT, 7-130
   FN852, 10-56
   FN875D, 10-25
   FN875N, 10-25                       GEAR_CUR, 3-8, 21-3, 21-5, 21-20,
   FN879, 10-3                             21-43, 21-45, 22-27 to 22-28





                                  Index-11

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   GEAR_OLD, 3-8, 21-3, 21-5, 21-51,   HEGOx1, 7-9
       22-27 to 22-28                  HF_LAM, 7-41
   GR_CM, 3-8, 21-9 to 21-11, 21-20,   HFDLTA, 7-126, 8-51, 8-54, 8-60,
       21-24 to 21-25, 21-27, 21-29,       8-67 to 8-68, 8-74, 8-76
       21-32 to 21-33, 21-36 to        HFPCYC, 8-51
       21-37, 21-40 to 21-42, 21-45,   Hicam, 10-28
       21-51, 21-53, 21-57 to 21-58,   HICOMP, 7-95, 7-109
       22-10, 22-25 to 22-26, 22-48,   HLDTM1, 7-30
       23-7, 23-17, 23-21, 23-26 to    HLDTM2, 7-30
       23-27, 23-33, 23-46, 23-50 to   HLODH, 7-31
       23-51, 23-64, 28-5              HMCTM, 13-10
   GR_CM_KAM, 21-25, 28-5              HMSTM, 13-10
   GR_CM_LST, 3-8, 21-24 to 21-25      HMTMR, 13-6, 13-10
   GR_DS, 3-8, 21-3 to 21-5, 21-15     HMTMR_FLG, 13-6, 13-10
       to 21-16, 21-20, 21-24          HNO_4X4L_CL, 7-16
   GR_DS_LST, 3-8, 21-3 to 21-5,       HNO_4X4L_SH, 7-16
       21-15 to 21-16, 21-20           HNO_CL, 7-16
   GR_DS_TV, 21-3 to 21-5, 21-20,      HNO_SH, 7-16
       21-27, 21-29, 21-32, 21-36,     HOT21_C, 21-9
       22-10, 22-12 to 22-13, 22-25    HOT21_S, 21-9
       to 22-26, 22-33 to 22-35,       HP_4X4L, 20-16 to 20-17
       23-9                            HPTCS, 20-11, 20-13 to 20-14
   GR_HOT, 23-50                       HSF_ACP_OTMR, 14-7
   GR_OLD, 3-8, 21-25, 21-32, 21-36,   HSF_ACP_ROTM, 14-7
       21-40 to 21-42, 21-57, 23-21    HSF_FLG, 10-19, 14-10, 14-13
   GR_SEQ_131, 21-20                   HSF_REQUESTED, 14-7
   GR_SEQ_141, 21-20                   HSF_RQST, 14-4, 14-7, 14-10
   GR_SEQ_241, 21-20                   HSFAN_DELAY, 14-10
   GR_SEQ_311, 21-20                   HSFECT1_SH, 14-7
   GR_SEQ_411, 21-20                   HSFECT2_SH, 14-7
   GR_SEQ_421, 21-20                   HSFECT_CL, 14-7
   GR_SEQ_PNTR, 21-20, 21-32, 21-36    HSFLOD, 14-7
   GR_SEQ_PNTR CALCULATION, 21-4       HSFRPM, 14-7
   GRCMKIV, 28-5                       HSFVS, 14-7
   GRMSFT, 21-24                       HSPFLG, 7-16 to 7-17, 7-30, 7-42,
   GRRAT1, 21-45                           8-23, 13-9
   GRRAT2, 21-45, 23-46                HVQ1, 12-6 to 12-7
   GRRAT3, 21-45                       HWRT, 3-6
   GRRAT4, 21-45                       HYS_OTEMP, 22-45
                                       HYST2, 6-4
   HALF_FUEL, 7-30, 7-41, 7-45,        HYSTS, 6-4
       7-120, 7-155                    HYSTSPD, 24-51 to 24-52
   HALL EFFECT SENSOR, 8-60            HYSTST, 24-51 to 24-52
   HCAMFG, 7-73, 7-84, 10-7, 10-28,
       10-45                           I4X4L, 20-16 to 20-17, 24-48
   HCAMSW, 7-73, 7-84                  I4X4L_LST, 20-16
   HCDCLP, 10-17                       IAAT, 24-7
   HCNCLP, 10-17                       IACT, 27-7, 32-21, 33-8
   HEDF, 31-40                         IBAP, 3-8, 24-24, 24-28 to 24-29
   HEDFHP, 10-19, 14-7, 14-10, 31-25,  IBGPSI, 10-45, 10-55
       31-41                           IDCMUL, 10-2
   HEDFRPM, 10-9, 10-15, 10-19         IDCOFS, 10-2
   HEGO, 7-11                          IDKMUL, 7-114
   HEGO11, 7-58                        IDLCOT, 11-10
   HEGO21, 7-58                        IDLDEL, 24-12





                                  Index-12

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   IDLE_CELL_SW, 7-73, 7-84              COLD TEMPERATURE TV SOLENOID
   IDLE_TEMP_SW, 7-114                       OPERATION, 24-53
   IDLFLG, 7-114, 26-11                    DEFINITIONS, 24-53
   IDLMAF, 27-32 to 27-33                  OVERVIEW, 24-53
   IDLRPM, 26-11                           PROCESS, 24-54
   IDLTMR, 7-30, 26-2                    DYNAMIC TV DUE TO COLD
   IDMERR, 33-48                             TRANSMISSION, 24-55
   IDRPMH, 26-11                           DEFINITIONS, 24-55
   IECT, 24-9, 27-17, 33-7                 OVERVIEW, 24-55
   IEGO1, 32-5                             PROCESS, 24-55
   IEGO2, 32-5                           POWER MODE, 24-51
   IEGR, 3-8, 9-14, 9-23, 24-12,           DEFINITIONS, 24-51
       27-20 to 27-21, 31-14, 32-33,       OVERVIEW, 24-51
       32-35, 33-23 to 33-24, 33-26,       PROCESS, 24-52
       33-28, 33-33 to 33-34           int_inj_num, 7-164
   IERPMH, 9-14, 24-12                 int_seq_num, 7-163 to 7-164
   IETVOCM, 20-15                      intcyl_bank_indicator, 7-164
   IEVPSV, 32-35                       INTM, 19-6
   IGN_TYPE, 8-69, 8-73 to 8-74,       IOCC, 31-27
       8-76                            IPDL, 3-8, 20-45 to 20-48, 21-51,
   IGNITION TIMING STRATEGY                24-48
     DISTRIBUTOR ROTOR REGISTRY,       IPDL_LST, 20-45, 20-47
         8-46                          IPSIBR, 10-3, 10-7, 10-45, 10-54
       OVERVIEW, 8-46                      to 10-56
     SIGNATURE PIP DISTRIBUTOR         IPSIDLY, 10-54
       OVERVIEW, 8-47                  ISC-BPA, 3-4
   IGR_DS, 21-3 to 21-4, 21-9 to       ISC_A_DER, 10-56
       21-11, 21-15 to 21-16, 21-20,   ISC_A_PROP, 10-56
       23-26                           ISC_ERR, 10-45, 10-54
   IIVPWR, 24-8                        ISC_PRD_DT, 25-3
   IMAF, 19-6, 27-24, 32-39 to 32-40   ISC_PTP, 7-51 to 7-52, 7-59
   IMFMCTR, 19-3, 27-24                ISC_PTP_SW, 7-59
   IMFMFLG, 19-3, 19-21, 27-24         ISC_PW_DTKS, 10-49
   IMMEDIATE, 7-165                    ISC_PW_DUCE, 10-49
   INDS, 20-46 to 20-47, 24-32 to      ISCDTY, 10-2, 10-7, 10-49, 10-54,
       24-33                               20-40
   INDS_LST, 20-47                     ISCFLG, 7-45, 7-47, 7-59, 7-73 to
   INF_MAP, 19-20                          7-74, 7-84, 7-103, 8-19, 8-43,
   INF_MVAC, 19-20                         9-16, 9-24, 10-3, 10-31,
   INIT_TOT, 5-6, 20-54, 24-50             10-41 to 10-42, 10-45, 10-54,
   INITIALIZATION ROUTINE, 3-8             10-56, 19-22, 26-11
   INJ_BANK1, 7-155                    ISCFLG_LST, 7-45, 7-47
   INJ_BANK2, 7-155                    ISCKAM, 10-3, 10-45, 10-56, 28-5
   INJ_OFF_DELAY, 7-165                ISCKAM0, 28-7 to 28-8
   INJ_PIP_CNT1, 3-8, 24-38            ISCKAM1, 28-7 to 28-8
   INJ_PIP_CNT2, 3-8, 24-38            ISCKAM2, 28-7 to 28-8
   INJDLY, 7-114 to 7-115, 7-143       ISCKAM3, 28-7 to 28-8
   INJDLY_BETA, 7-115                  ISCKAMn, 10-3, 10-56
   INJDLY_MIN, 7-114                   ISCLPD, 10-15, 10-20
   INJECTORS, 3-4                      ISCLPD_ALT, 10-15, 10-20
   INJIV, 3-9                          ISCPSI, 10-3, 10-54 to 10-55
   INJREF, 7-143                       ISCTM, 10-42, 26-11
   INLRPH, 26-10                       ISCTMR, 10-41 to 10-42, 10-45,
   INLRPM, 26-10                           26-2, 26-11
   INPUT CONVERSIONS AND FILTERS





                                  Index-13

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   ISFLAG, 7-46, 7-73, 7-84, 10-28,    LAMBSE1, 3-8, 7-10, 7-34, 7-41,
       10-55 to 10-56                      7-45 to 7-47, 7-58, 7-62 to
   ISKSUM, 10-45, 10-56, 28-5, 28-7        7-63, 7-76, 7-95, 8-13, 12-8,
       to 28-8                             32-11, 32-39 to 32-40, 33-10,
   ISLAST, 7-46, 10-28, 10-55              33-91
   ISLBND, 32-36                       LAMBSE2, 3-8, 7-11, 7-34, 7-41,
   ISUBND, 32-18                           7-45 to 7-47, 7-58, 7-62 to
   ITCS, 20-13, 32-17                      7-63, 7-76, 7-95, 12-8, 32-11,
   ITOT, 27-29 to 27-30                    32-39 to 32-40, 33-91
   ITP, 24-48, 27-31, 27-33, 31-40,    LAMBSEn, 7-60 to 7-61
       33-55                           LAMMAX, 7-10 to 7-11, 7-62, 33-91
   IVCAL, 19-6, 20-15, 24-8            LAMMIN, 7-10 to 7-11, 7-45, 7-62,
   IXFRPR, 9-17                            33-91
                                       LAMMUL, 3-8, 7-25 to 7-26, 7-41,
                                           26-13
   KAM, 28-5                           LAMMUL RESET LOGIC, 7-25
   KAM_ERROR, 10-45, 10-56, 24-10      LAMSW, 7-46
   KAM_NO_RESET, 7-13                  LAMWIN, 7-75 to 7-76
   KAMERROR, 24-30                     LAST_HI_PIP, 7-168, 8-66, 24-38
   KAMOK, 28-5                         LAST_LD_MBT, 8-24, 8-38
   KAMQA, 28-5                         LBMF_INJ, 7-159
   KAMQB, 28-5                         LBMF_INJ1, 7-95, 33-10
   KAMQC, 28-5                         LBMF_INJ2, 7-95, 33-10
   KAMRF1, 7-84, 7-95, 12-8, 32-11     LBMF_INJn, 7-140 to 7-141
   KAMRF2, 7-84, 7-95, 12-8, 32-11     LBMF_TAB, 7-159
   KAY, 24-14                          LDBPLO, 24-28
   KAYCTR, 8-51                        LDEH, 7-22 to 7-23
   KGAIN_D, 23-43                      LDEL, 7-22 to 7-23
   KGAIN_I, 23-43                      LDFLG, 7-22 to 7-23, 7-30, 7-42
   KGAIN_P, 23-43                      LDLTM, 7-22 to 7-23
   KI, 8-86                            LDMH, 7-22 to 7-23
   KIHP, 8-83, 8-85, 32-39 to 32-41    LDMHH, 7-22 to 7-23
   KLLIM, 8-51                         LEGAL DISCLAIMER, 20-49
   KNK_HIGH, 8-85, 24-13               LEGOFG1, 26-12, 28-5
   KNK_INT, 8-85                       LEGOFG11, 7-10, 7-58, 7-84, 12-8
   KNOCK, 8-86                         LEGOFG2, 26-12, 28-5
   KNOCK STRATEGY ENABLE LOGIC, 8-83   LEGOFG21, 7-10, 7-12, 7-58, 7-84,
   KNOCK_DETECTED, 8-85, 24-13             12-8
   KNOCK_ENABLED, 8-82 to 8-83,        LEQV, 32-26
       32-11                           LESFLG, 7-41
   KNOCK_OCCURRED, 8-85, 8-88, 24-13   LESFLG1, 7-10
   KPEI, 9-9                           LESTMR1, 26-2, 26-12, 33-17
   KS, 24-13                           LESTMR11, 7-10, 7-45 to 7-47
   KSF, 24-8                           LESTMR2, 26-2, 26-12, 33-17
   KTS, 8-86 to 8-87                   LESTMR21, 7-11 to 7-12, 7-45 to
   KULMT, 8-51                             7-47
   KWCTR, 8-85                         LEXTMR2, 26-12
   KWUCNT, 7-75                        LIMIT_PURGE, 7-47, 7-76, 12-8 to
   KWUCTR, 7-13, 7-75, 28-5 to 28-6        12-9
                                       LINK_SW, 15-3
                                       LLDTM, 7-30
   LAM_OLD1, 3-9, 7-34                 LMBJMP, 7-45
   LAM_OLD2, 3-9, 7-34
   LAMAVE1, 3-8, 7-34
   LAMAVE2, 3-8, 7-34





                                  Index-14

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   LOAD, 7-31, 7-41 to 7-42, 7-59,     MAN1HI, 20-46
       7-73 to 7-74, 7-89, 7-98,       MAN1LO, 20-46
       7-102, 7-104, 8-7, 8-9, 8-13,   MAP, 27-4
       8-16, 8-19, 8-25, 8-27, 8-45,   MAP_AIR_0, 19-3, 19-11, 19-20
       8-81, 8-83 to 8-84, 9-9,        MAP_ERR_SW, 20-9
       10-42, 10-46, 13-6, 13-8,       MAPPEREGR, 19-20
       14-7, 22-48, 24-23 to 24-24,    MAX_SLIP_DIF, 20-32
       24-28, 24-48, 26-13, 33-16 to   MAX_SLIP_ERR, 20-33
       33-17                           MAXADP, 7-77 to 7-78
   LOADS, 13-8                         MAXSLIP, 23-7 to 23-9
   LODNOK, 8-83                        MFMFLG, 7-74, 9-6, 9-16, 9-24,
   LOLODH, 7-31                            10-7, 13-9, 19-3, 20-9, 22-14,
   LOWLOD, 10-42                           24-28, 24-48, 27-24, 32-11,
   LOWVOL_CH, 10-21                        33-104
   LOWVOL_FLG, 10-21                   MFMHYS, 27-24
   LOWVOL_SL, 10-21                    MHPFD, 7-126, 8-47
   LPCT1L, 7-74, 7-76 to 7-77          MHPFD_NEG, 24-38
   LPCT1R, 7-74, 7-76 to 7-77          MIDTV, 7-114
   LPCT2L, 7-74, 7-76, 7-78            MIL_SW, 33-103 to 33-104
   LPCT2R, 7-74, 7-76, 7-78            MILLIM, 33-103
   LSF_FLG, 14-10, 14-13               MILTMR, 33-103, 33-105
   LSF_RLY_PRCT, 14-10                 MIN_PIP_DLY, 24-38
   LSF_RQST, 10-26, 14-4, 14-10 to     MINACCL, 7-42
       14-11                           MINADP, 7-77 to 7-78, 12-8
   LSFECT_CL, 14-4                     MINDES_CL, 9-15
   LSFECT_FLG, 14-4                    MINDES_SH, 9-15
   LSFECT_SH, 14-4                     MINDLA, 8-74, 8-76
   LSFVS_CH, 14-4                      MINDLB, 8-74, 8-76
   LSFVS_SL, 14-4                      MINMPH, 8-43, 10-41
   LST_PW, 7-156, 7-164                MINPW, 7-95
   LST_PWx, 7-159                      MINPW_LBMF, 7-95, 7-140
   LSTCOL, 7-74                        MINPWT, 7-61, 7-95, 7-140, 7-164,
   LSTROW, 7-74                            7-168
   LTMTB1, 7-13                        MKAY, 3-9, 7-126, 8-51, 8-54,
   LTMTB1rc, 7-77, 7-84, 28-5 to           8-67
       28-6                            mkay', 8-51
   LTMTB2, 7-13                        MLPS_2, 20-46, 20-48, 23-17
   LTMTB2rc, 7-78, 7-84, 28-5 to       MLPS_2HI, 20-46
       28-6                            MLPS_2LO, 20-46
   LUDLY, 23-20                        MLUS_DLY_TMR, 20-31 to 20-33
   LUGSW, 26-13                        MLUS_FM_FLG, 20-31, 20-33, 23-18
   LUGTIM, 26-13                       MLUS_MX_TOT, 20-31, 20-33
   LUGTMR, 7-23, 8-16, 26-2, 26-13     MLUS_TST_ENA, 20-31
   LUHECT_CL, 23-3                     MNPIP, 24-16
   LUHECT_SH, 23-3                     MNPIPn, 7-120, 24-16
   LUHTOT_CL, 23-3                     MODULE_ID, 16-49
   LUHTOT_SH, 23-3                     MPHCNT, 24-44
   LUS_PRD_DT, 25-3                    MPHTIM1, 24-44
   LUS_PW_DTKS, 23-60                  MPHTIM2, 24-44
   LUS_PW_DUCE, 23-60                  MTEFTC, 7-98, 7-104
                                       MTEISF, 7-98, 7-102, 7-104
   MAF, 19-6                           MULTMR, 7-26, 26-2, 26-13
   MAF_INTP_FLG, 19-21, 24-28          MX_HISLP_TM, 20-33
   MAF_TIME, 19-6                      MX_OTSLP_TM, 20-33
   MAFSAV, 32-39 to 32-40              MX_TMSLBRK, 23-59





                                  Index-15

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   N, 5-6 to 5-7, 6-4, 7-30 to 7-31,   NELUMN, 23-18
       7-41 to 7-42, 7-59, 7-73,       NETVMN, 22-20
       7-89, 7-98, 7-102 to 7-104,     NETVMX, 22-20
       8-13, 8-16, 8-19, 8-27, 8-40,   NEU_RES_TMR, 22-7 to 22-8
       8-45, 8-67, 8-81, 8-83 to       NEUFLG, 7-25
       8-85, 9-9, 9-14, 10-8, 10-31,   NEUHI, 20-46
       10-35, 10-41 to 10-42, 10-46,   NEULO, 20-46
       11-6, 13-7, 19-20, 19-22,       NEUTIM, 22-7
       19-24, 20-3, 20-40, 22-7,       NEV_PEAK_SFT, 21-51 to 21-52
       22-48, 24-12, 24-14, 24-16,     NEW_DWLIDM, 8-73
       24-18, 24-23, 24-28, 24-36,     NEW_OSS, 20-23, 20-27
       24-38, 24-48, 26-10 to 26-11,   NEW_PIP, 8-81 to 8-82, 26-15
       27-24, 32-40, 33-16             NEW_RPM, 8-9, 24-38
   N_BYTE, 7-107, 8-7, 14-7, 22-48,    NEXT_SPOUT_ADVANCED, 8-68
       24-36, 24-38                    NEXT_SPOUT_BETA, 8-68
   N_PREV, 24-38                       NGOOSE, 32-36
   N_QD_MAX, 7-107                     NICT_TRIG_EN, 21-58
   N_RATCH, 10-7 to 10-8, 10-35        NICT_TRIG_ST, 21-57 to 21-58
   N_RATCH LOGIC, 10-8                 NIHYS, 26-10
   N_RUN, 5-6, 22-7, 24-14             NIOLD, 7-30, 26-10
   NACTMR, 10-21, 12-7, 13-10, 26-2,   NITMR1, 7-113
       26-13                           NITMR2, 7-113
   NBAR, 24-16, 24-38, 32-18, 32-36,   NITMR3, 7-113
       32-39, 33-17, 33-33             NITMR4, 7-113
   NBKFLOW_H, 19-20                    NITMR5, 7-113
   NBKFLOW_L, 19-20                    NLAST, 10-41 to 10-42, 26-11
   NBPHI, 24-28                        NLMT_FLG2, 7-16, 7-120
   NBPLO, 24-28                        NLMTHI_0, 7-116
   NCNT, 5-6                           NLMTLO_0, 7-116
   NDBAR, 24-16, 24-38                 NLMTNEUHI_0, 7-116
   NDDELT, 24-32, 24-34                NLMTNEULO_0, 7-116
   NDDTIM, 7-90, 24-32 to 24-34,       NO, 20-23, 27-14
       26-2, 26-13                     NO_FUEL, 7-30, 7-120, 7-156
   NDFFLG, 24-32 to 24-35              NO_LIM_STG1, 7-16
   NDFSO, 7-90                         NO_LIM_STG2, 7-16
   NDIF, 10-42, 26-11                  255_NO_OF_STARTS, 18-3
   NDSFLG, 7-90, 7-116, 10-8, 24-32    NO_OF_STARTS, 16-50, 18-3, 18-5
       to 24-35, 24-48, 26-10          NO_SMPL_TM, 20-37
   NE12A, 21-9                         NO_START, 8-6, 20-31, 22-41, 33-6,
   NE12S, 21-9                             33-57, 33-61, 33-103
   NE23A, 21-9                         NO_START_CHK, 16-50, 18-3, 18-5
   NE23S, 21-9                         NOBAR, 7-16, 27-14
   NE34A, 21-9                         NOBART, 20-4, 20-20, 20-23, 20-25,
   NE34S, 21-9                             20-37, 21-57 to 21-58, 23-31,
   NE_DROP_EX, 21-51 to 21-52              23-46, 24-45, 24-48, 27-14
   NE_DROP_LCK, 21-51                  NOBARTL, 20-37
   NE_DROP_OPEN, 21-51                 NOISE, 8-86
   NE_DROP_TM, 21-52                   NOMAX, 7-16
   NE_STRT_SFT, 22-24, 22-27 to        NOMAX_4X4L, 7-16
       22-28, 22-32                    NORM_SPOUT, 3-9
   NEBART, 20-3 to 20-4, 21-9, 21-51   NOV_ACT, 20-20
       to 21-52, 22-8, 22-20, 22-24,   NOV_ACT_LST, 20-20
       22-32, 23-18, 23-31, 23-46,     NOVCNT, 20-20
       23-64, 24-48                    NOVCTR, 20-20, 28-5
   NELK_FM, 23-64                      NOVDIF, 20-20





                                  Index-16

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   NOVS, 7-89, 8-24, 8-45, 24-16       OPCLT5, 7-20
   NOVSUM, 20-20                       OPNCKT_FLG, 20-9, 22-42 to 22-43
   NSAV, 32-39 to 32-40                OS_ERR_SW, 20-9
   NSTALL, 5-6                         OS_MOV, 24-48
   NTBART, 20-4, 23-46                 OSFMFLG, 20-9, 20-20, 20-25,
   NUBASE, 8-43, 10-15                     20-37, 21-27, 21-51, 22-14,
   NUBASE_ALT, 10-15                       23-64, 27-14
   NUMCYL, 7-126, 7-141, 7-148 to      OSM_HEDF_OFF, 14-7
       7-149, 7-151 to 7-152           OSM_HEDF_ON, 14-7
   NUMEGO, 7-10 to 7-11, 7-13, 7-58,   OSSCNT, 20-23, 20-27
       7-76, 7-78, 7-84, 7-151,        OSSMIN, 20-25
       26-12, 27-7, 27-12, 33-10,      OSSTIM, 20-25
       33-17, 33-19                    OSSTIM1, 20-23, 20-27
   NUMPR, 7-42                         OSSTIM2, 20-23, 20-27
   NVBASE, 20-37, 24-45, 27-14         OSSTMR, 20-25
   NVBASE_X_NVC, 20-20                 OTBRKDLY, 23-19
   NWOTMR, 26-2, 26-14                 OTCTDLY, 23-19
                                       OTEMP_ERR_SW, 20-9
   OCCDT1, 31-25, 31-27                OTEMP_FM_FLG, 20-9, 22-14, 22-45
   OCCDT2, 31-25, 31-27                OUTTMR, 31-40
   OCCDT3, 31-25, 31-27                OVERTEMP_FLG, 13-8 to 13-9, 13-11
   OCCDT4, 31-25, 31-27
   OCCDT5, 31-25, 31-27                PACLIM, 8-74 to 8-75
   OCCDT6, 31-27                       PACOFF, 8-72
   OCCDT7, 31-25, 31-27, 33-96         PACPER, 8-72
   OCCDT8, 31-25, 31-27                PACSLO, 8-74 to 8-75
   OCCDT9, 31-25, 31-27                PARK_ERR, 20-46 to 20-47
   OCCSAV, 31-27                       PARKHI, 20-46
   OCCSS1, 31-25                       PARKLO, 20-46
   OCCSS2, 31-25                       PCT_LOAD, 20-40, 24-23, 33-27,
   OCTADJ, 8-16, 31-24                     33-34
   OCTADJHP, 8-16, 31-24               PDL, 3-9, 20-45, 20-48, 21-3 to
   ODHI, 20-46                             21-4, 21-9 to 21-11, 21-15,
   ODLO, 20-46                             21-24 to 21-25, 21-45, 22-7
   OFM_FMEM, 7-120, 22-42                  to 22-8, 22-10 to 22-11,
   OFMFLG, 20-9, 20-48, 22-42, 23-22       22-21, 23-7, 23-17, 23-46,
   OFMTQMAX_CL, 22-42                      24-32 to 24-34
   OFMTQMAX_SH, 22-42                  PDL_ERR_SW, 20-9
   OL_DESIRED, 7-30, 7-41, 12-7        PDL_ERROR, 20-9, 20-47 to 20-48,
   OLD_BETA, 8-57, 8-66                    22-14
   OLFLG, 3-9, 7-10 to 7-11, 7-34,     PDL_GND, 20-46 to 20-47
       7-41, 7-46 to 7-47, 7-58,       PDL_HGH, 20-46 to 20-47
       7-62, 7-74, 8-13, 12-7, 13-10,  PDL_LST, 3-9, 20-45, 21-3 to 21-4,
       32-57, 33-10, 33-17                 21-9 to 21-11, 21-15, 21-27,
   OLFLG_LST, 7-46 to 7-47                 21-29, 22-7 to 22-8
   OLIDRV, 7-42                        PDL_UNLK, 23-17
   OLINEUT, 7-42                       PDLTIM, 20-47
   OLITD1, 7-30                        PERLOAD, 7-22 to 7-23, 7-31, 7-41,
   OLMCL, 7-41                             24-23
   OLMTD1, 7-42                        PERLOAD_ISC, 10-46
   OLTMR, 7-30 to 7-31                 PFEHP, 9-3, 9-6, 27-20, 27-26,
   OPCLT1, 7-20                            31-14, 31-25, 32-33, 33-45
   OPCLT2, 7-20                        PFEHP_FLG, 9-3
   OPCLT3, 7-20                        PGDC_LST, 7-47, 12-6
   OPCLT4, 7-20                        PHFDLT, 8-54, 8-67





                                  Index-17

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   PIP, 8-86, 24-14                    PWCAL, 7-164
   PIP COUNTER CONTROL LOGIC, 24-14    PWOFF, 7-95, 7-141, 7-148 to
   PIP_DOUBLE, 8-54, 8-56 to 8-58,         7-149, 7-159, 7-168
       8-66                            PWOFS_D, 7-95
   PIP_HIGH, 7-129, 19-6 to 19-7
   PIP_ST2_FLG, 7-120                  QD_COUNTER, 7-136
   PIPACL_D, 8-75                      QD_DEL_N, 7-107
   PIPCNT, 5-6 to 5-7, 24-14           QD_EVENTS, 7-136
   PIPERR, 33-48                       QD_FG_SET, 7-136
   PIPLIM, 24-38                       QD_FUEL, 7-107, 7-136, 32-11
   PIPLIMHYT, 7-120                    QD_READY, 7-107, 7-130, 7-136,
   PIPLMT_HIG, 7-116, 7-120                32-11
   PIPLMT_LOW, 7-116, 7-120            QD_TIP_OUT, 7-107
   PIPNUM, 7-30, 7-41, 7-118           QD_TP_LAST, 7-136
   POFFENG, 8-72, 8-74 to 8-75         QD_TP_MIN, 7-136
   POWER_UP, 33-6                      QD_TP_TME, 7-107
   POWSFG, 10-28
   PPCTR, 3-9, 7-30, 7-41, 7-91,
       7-118                           'R', 26-15
   PPERENG, 8-72, 8-74 to 8-75         RANMUL, 7-73
   PREV_N_PIP, 24-38                   RANNUM, 3-9, 7-73
   PRG_DEC, 12-8, 33-20                RATCH, 3-9, 10-3, 10-7, 10-35,
   PRGFLG, 12-9, 26-14                     19-20, 20-3, 24-18, 24-51,
   PRGIDLE_TMR, 12-6 to 12-7               27-31 to 27-33
   PRGMPH_CL, 12-6                     RATIV, 3-9, 27-32 to 27-33
   PRGMPH_SH, 12-6                     REFC, 8-66
   PRGTD1, 12-7                        REQFLG, 31-40
   PRGTD2, 12-7                        REQV, 32-27
   PRGTD3, 12-7                        RETINC, 8-81, 8-88
   PRGTD4, 12-7                        RETLIM, 8-88
   PRGTD5, 12-7                        REV2NEU_FLG, 22-7 to 22-9
   PRGTMR, 26-2, 26-14                 REV_ENG_ADD, 22-20 to 22-21
   PRLDSW, 24-23                       REVFLG, 7-26, 22-48, 24-32 to
   PRNDL, 21-4                             24-34
   PRNDLY, 23-19                       REVHI, 20-46
   PSGDLT, 7-126, 8-50 to 8-51         REVLO, 20-46
   PSIBRM, 10-45, 10-54, 10-56         RMSPRU, 33-96
   PSIBRN, 10-45, 10-54, 10-56         ROLAV, 8-36, 8-40, 9-22 to 9-23
   PTPAMP, 7-51 to 7-52, 7-59 to       ROWTBU, 7-73
       7-61, 7-75                      RPMCNL, 8-85
   PTPFLG, 24-10, 24-12                RPMCTL, 10-41
   PTSCR, 5-6, 6-4, 10-18              RPMDED, 10-45, 26-11
   PUL_PER_GAL, 15-3                   RPMERR, 10-31, 10-56
   PUL_PER_REV, 21-57 to 21-58,        RPMERR_A, 10-45, 10-54 to 10-55,
       23-31                               26-11
   PULSCT, 7-148 to 7-149              RPMERR_CALC, 10-7
   PUMP, 3-9, 7-117, 31-34, 32-5       RPMERR_DA, 10-31
   PURDC, 12-7                         RPMERR_DAO, 10-31, 10-56
   PURG_ADP_SF, 12-8                   RPMMIN, 8-83
   PURGDC, 7-47, 7-76, 12-6, 12-8 to   RT4X4L, 20-21
       12-10, 32-11, 33-20             RT_GR_CUR, 20-4, 21-25, 21-43,
   PURGSW, 12-7                            21-45, 21-57 to 21-58, 22-27
   PUTMR, 20-31, 22-41, 24-10, 24-12,      to 22-28, 23-31
       24-50, 26-2, 26-14, 33-57,      RT_GR_OLD, 21-25, 22-27 to 22-28,
       33-61                               23-46





                                  Index-18

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   RT_NOVS, 3-9, 20-20 to 20-21,       Self Test CODE 334, 33-26
       20-37, 21-9 to 21-11, 24-45,    SELF TEST CODES
       27-14                             10, 31-41
   RT_NOVS_KAM, 20-20 to 20-21, 28-5     20, 31-41
   RTNVMN, 20-20, 28-5                   326, 32-33
   RTNVMX, 20-20, 28-5                   327, 31-14, 32-33
   RTSTAL, 22-11                         328, 31-14, 32-33
   RUN MODE, 33-6                        332, 32-34 to 32-35
   RUN_TMR, 20-54, 26-2, 26-14           334, 31-14, 32-33
   RUNNING, 7-41, 7-91, 7-156, 8-6,      335, 31-14
       8-65, 8-81, 11-7, 14-4, 20-31,    336, 32-33
       22-41, 24-18, 33-57, 33-61,       337, 31-14, 32-33
       33-103                            341, 31-24
   RUNUP_DIFF, 10-31                     411, 32-36
   RUNUP_DIFF_ALT, 10-31                 412, 32-18
   RUNUP_FLG, 5-6, 10-7, 10-31,          536, 32-23
       26-14                             542, 31-35
   RUNUPTMR, 5-6, 10-54, 26-2, 26-14     543, 32-11
   RVIP_CYL_BAL, 32-10                   632, 32-17
   RVIP_CYL_QUIT, 32-10                  998, 32-11
   RVIPRPM, 10-16, 32-11, 32-36,       SELF TEST CODES>112, 33-8
       32-57                           SELF TEST CODES>113, 33-8
                                       SELF TEST CODES>117, 33-7
   S_VAL_TPADD, 21-51                  SELF TEST CODES>118, 33-7
   S_VAL_TPSUB, 21-51                  SELF TEST CODES>122, 33-55
   S_VAL_VSADD, 21-51                  SELF TEST CODES>123, 33-55
   S_VAL_VSSUB, 21-51                  SELF TEST CODES>157, 33-21
   SA10_LOD_CLR, 8-7                   SELF TEST CODES>158, 33-21
   SA10_LOD_FLG, 8-7                   SELF TEST CODES>311, 32-28
   SA10_LOD_SET, 8-7                   SELF TEST CODES>312, 32-29
   SA10_RPM_CLR, 8-7                   SELF TEST CODES>313, 32-29
   SA10_RPM_FLG, 8-7                   SELF TEST CODES>314, 32-28
   SA10_RPM_SET, 8-7                   SELF TEST CODES>326, 33-36 to
   SA10FG, 8-6 to 8-7                      33-37, 33-42
   SAF, 3-9, 8-6, 8-24, 8-59, 8-64,    SELF TEST CODES>327, 33-23 to
       8-88, 32-11, 32-41                  33-24, 33-36 to 33-37, 33-39,
   SAF_MOD, 8-64, 8-90                     33-41 to 33-43
   SAFTOT, 8-27, 8-65                  SELF TEST CODES>328, 33-23 to
   SARCHG, 7-104, 8-9, 19-20, 19-22,       33-24
       20-40, 24-23, 33-10             SELF TEST CODES>332, 33-28, 33-34,
   SBDS_CHKSUM, 16-49                      33-39, 33-43
   SCINT1, 22-26                       SELF TEST CODES>336, 33-36 to
   SCINT2, 22-26                           33-37, 33-42
   SCINT3, 22-26                       SELF TEST CODES>337, 33-23 to
   SCINT4, 22-26                           33-24, 33-36 to 33-37, 33-39,
   SCSLP1, 22-26                           33-41 to 33-43
   SCSLP1SD, 22-26                     SELF TEST CODES>452, 33-57
   SCSLP2, 22-26                       SELF TEST CODES>536, 33-61
   SCSLP2SD, 22-26                     SELF TEST CODES>542, 33-95
   SCSLP2SU, 22-26                     SELF TEST CODES>543, 33-95
   SCSLP3, 22-26                       SELF TEST CODES>556, 33-95
   SCSLP3SD, 22-26                     SETLNG_TM, 10-41
   SCSLP3SU, 22-26                     SETTMR, 10-41 to 10-42, 26-2,
   SCSLP4, 22-26                           26-15
   SCSLP4SU, 22-26                     SFT_ERR_SW, 20-9





                                  Index-19

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   SFT_FM_FLG, 20-9, 21-53, 22-14      SPK_FB_GAIN, 8-40
   SFT_FM_LVL, 21-53                   SPK_FBS_MIN, 8-33
   SFT_VAL_TM, 21-52                   SPK_FLEX_LIM, 8-7, 8-9, 8-37
   SHFHYS, 7-89                        SPK_IDLE_FB, 8-7, 8-33
   SHFRPM, 7-89                        SPK_LAMBSE, 8-13, 8-16, 8-27,
   SHIFT CONTROL                           22-48
     DETERMINE SHIFT SOLENOID STATES   SPK_LDRATE, 8-24
       DEFINITIONS, 21-43 to 21-44     SPK_LOAD_RES, 8-38
       PROCESS, 21-45                  SPK_LOW_LOAD, 8-9, 8-19
   SIGDLT, 7-126, 8-50 to 8-51         SPK_M_B_T, 8-23, 8-25, 8-27, 8-29,
   SIGKAL, 7-126, 8-50 to 8-51, 19-6       8-33, 8-37, 8-90
   sigkal', 8-50                       SPK_MBT_LAST, 8-24, 8-27
   SIGKLL, 8-50                        SPK_MUL, 8-7
   SIGKLU, 8-50                        SPK_OA, 8-16
   SIGNATURE PIP DISTRIBUTOR, 8-47     SPK_OSC_OFF, 8-9, 8-45
   SIGPIP, 7-126, 8-50 to 8-51, 19-6   SPK_OSCMOD, 8-7, 8-45
   SIM_MIN, 3-9, 24-38                 SPK_SOURCE, 8-6
   SIMLIM4, 3-9                        SPK_STATE, 8-7, 8-36, 8-40, 8-42
   SKSSLC, 8-50                        spk_tar, 8-36
   SLIP_A_UNLK, 21-24                  SPK_TIP_BDL, 8-64
   SLIP_ABS, 20-4, 21-24, 23-39 to     SPK_TIP_NOVS, 8-24
       23-40, 23-43, 23-46 to 23-47    SPK_TRUNC, 8-10, 8-23
   SLIP_DES, 20-32, 23-43, 23-46 to    SPKAD, 8-64, 8-82 to 8-83, 8-88
       23-47, 23-57                    SPKCTL, 8-43
   SLIP_DES_LST, 20-32, 23-46, 23-57   SPKLIM, 8-66, 8-68, 8-75
   SLIP_DES_MIN, 23-8                  SPKSWH, 8-68
   SLIP_DIF_MX, 23-57                  SPKSWL, 8-68
   SLIP_HRD_CH, 23-8                   SPKTMR, 8-42 to 8-43
   SLIP_HRD_SL, 23-8                   SPLCLP, 8-65
   SLIP_RMAX, 23-47                    SPOUT, 3-4, 8-59
   SLIP_TARGET, 23-9, 23-47            SPOUT_ICCD_DELTA, 8-68
   SLL_DWN_FLG, 8-19                   SPOUT_LOW_DELTA, 8-75 to 8-76
   SLL_UP_FLG, 8-19                    SPUCLP, 8-19, 8-23, 8-25, 8-65
   SLP_ABS_CNT, 23-39                  SR[GR_CM], 23-46
   SLP_ABS_HRD, 23-39                  SR[GR_CM]UNL, 23-46
   SLP_ABS_LVL, 23-39                  SR_HL, 23-40
   SLP_TDLY_TIM, 23-57                 SR_HL_OT, 23-40
   SLP_TDLY_TMR, 23-57 to 23-58        SR_PP_LIM, 23-31
   SMPL_TM, 20-37                      SRDNSEXSFT, 23-46
   SPARK ADVANCE LOGIC, 8-82           SRDNSFT, 23-46
   SPD_PM, 24-51 to 24-52              SRLK_FM, 23-64
   SPD_RATIO, 20-4, 22-11, 22-24,      SRLUMN, 23-18
       22-48, 23-18, 23-31 to 23-32,   SRUPSEXSFT, 23-46
       23-40, 23-50, 23-64, 24-51 to   SRUPSFT, 23-46
       24-52                           SSFCTR, 8-51
   SPD_RT_STRT, 21-57 to 21-58,        STAB_LOLD_AM, 8-19
       23-31 to 23-32                  STATE_FLAG, 7-165
   SPK_ABS_LIM, 8-7, 8-9, 8-29, 8-37   STB_LOLD_TMR, 8-19
   SPK_ADD, 8-7                        STCF, 21-57 to 21-58, 23-31
   SPK_AIR_CHG, 8-9, 8-64              STI, 7-9
   SPK_ALT_MIN, 8-33                   STI_RESET, 32-10, 32-42, 32-57
   SPK_BASE, 8-9, 8-13                 STIFLG, 7-9, 20-8 to 20-9, 32-42,
   SPK_BDL, 8-10, 8-16, 8-64               32-57, 33-6, 33-103
   SPK_BDL_CLP, 8-64                   STO, 33-105
   SPK_DNDT_C, 8-24                    STO_TRIGGER, 33-6





                                  Index-20

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   STO_WORKING, 33-6                     FUEL_FG_PIPEDG_COM1, 7-129
   STRAEGY MODULES                       FUEL_INJ_OUT_COM2, 7-147
     FUEL_DYN_OFF_COM1, 7-171            FUEL_INPUT_EGO_COM1, 7-9
   STRATEGY MODULE                       FUEL_KAM_ADAPT_COM1, 7-84
     FUEL_INJ_TIM_COM1, 7-143            FUEL_LAMAVE_COM1, 7-34
   STRATEGY MODULES                      FUEL_LAMBSE_CLIP_COM1, 7-62
     ACC_CONTROL_COM1, 11-6              FUEL_LAMBSE_RESET_COM1, 7-45
     ACC_INPUT_COM3, 11-2                FUEL_MAIN_OFF_COM4, 7-159
     ACC_OUTPUT_COM1, 11-10              FUEL_NO_LIM_COM1, 7-16
     AIR_AIRLEAK_COM3, 19-24             FUEL_OL_LAMBSE_COM2, 7-41
     AIR_AIRMETER_BG_COM1, 19-20         FUEL_OLFLG_COM2, 7-30
     AIR_ANTICIPATION_COM2, 19-14        FUEL_PIP_INT_SYNC_COM1, 7-121
     AIR_FINAL_AIRCHARGE_COM1, 19-16     FUEL_QD_BG_COM1, 7-107
     AIR_MANIFOLD_FILL_COM2, 19-11       FUEL_QD_FG_COM1, 7-136
     AIR_OVERVIEW_COM1, 19-3             FUEL_RPM_LIM_BG_COM5, 7-116
     AIR_SAMPLE_METER_COM3, 19-6         FUEL_RPM_LIM_FG_COM3, 7-120
     ALTR_CAL_CLR_COM1, 18-5             FUEL_RPM_LIM_OBD1_COM1, 7-172
     ALTR_CAL_INIT_COM1, 18-3            FUEL_SCHEDULE_COM1, 7-155
     CANP_COM3, 12-6                     FUEL_SIG_PIP_SYNC_COM1, 7-125
     CCC_BCSDC_CALC_COM5, 23-31          FUEL_TRANS_BG_COM1, 7-102
     CCC_BYP_CLTCH_CTL_COM2, 23-2        FUEL_TRANS_FG_COM1, 7-133
     CCC_BYP_SLIP_CALC_COM5, 23-46       FUEL_WRMEGO_COM1, 7-20
     CCC_CSLP_TST_COM2, 23-56            HWINT_IO_CB, 4-2
     CCC_FMEM_COM3, 23-64                HWINT_SWITCHES_CB, 4-6
     CCC_SCHLD_BYP_SLIP_COM2, 23-7       INPUT_ACPSW_COM1, 27-5
     CCC_SCHLD_LCK_UNLCK_COM11,          INPUT_ACT_COM1, 27-7
         23-50                           INPUT_AODE_EQNS_COM1, 27-14
     CCC_UNCOND_UNLK_COM10, 23-15        INPUT_CAL_FREQ_COM5, 24-19
     CRK_UNDSP_RUN_COM2, 5-6             INPUT_ECT_COM1, 27-17
     DCL_UART_COM1, 16-48                INPUT_VMOVING_COM4, 24-48
     DOL_PULSE_CALC_COM3, 15-3           INPUT_VS_PROCESSING_COM3, 24-44
     DUCE_OUT_CONFIG_COM10, 25-3         INTRN_AODE_INPUT_EQNS_COM1,
     EDF_CONTROL_COM1, 14-10                 20-3
     EDF_HSF_CONTROL_COM2, 14-7          INTRN_AODE_OVERVIEW_COM1, 20-50
     EDF_LSF_CONTROL_COM1, 14-4          INTRN_CALC_FLG_4X4L_COM1, 20-16
     EDF_OUTPUT_COM1, 14-13              INTRN_CALC_VS_RATE_COM2, 20-37
     EEC_CB, 3-2                         INTRN_CSM_COM3, 20-54
     EGR_ACTUAL_COM1, 9-25               INTRN_MLPS_CONV_COM8, 20-45
     EGR_DCGEN_COM3, 9-29                INTRN_MLUS_TEST_COM1, 20-31
     EGR_DESIRED_COM1, 9-9               INTRN_OSS_CALC_COM1, 20-23
     EGR_ENABLE_COM3, 9-6                INTRN_OSS_COM1, 20-27
     EGR_PFE_COM1, 9-14                  INTRN_OSS_TEST_COM1, 20-25
     EPC_CM_COM1, 22-41                  INTRN_RT_NOVS_KAM_CALC_COM2,
     EPC_DYNAMIC_COM11, 22-32                20-20
     EPC_GUIDE_COM3, 22-7                INTRN_TCIL_HP_COM1, 20-14
     EPC_NORM_COM10, 22-24               INTRN_TCIL_REPEAT_COM2, 20-11
     EPC_OTEMP_TEST_COM2, 22-45          INTRN_TCIL_STATE_COM2, 20-8
     EQUA_CB, 24-7                       INTRN_TCS_COM2, 20-13
     EXPORT_VS_CHIME_COM1, 17-3          INTRN_TRANS_TQ_NET_CALC_COM1,
     FUEL_ADAPT_COM1, 7-73                   22-48
     FUEL_BG_CALC_COM8, 7-95             ISC_DASPOT_COM5, 10-35
     FUEL_CL_LAMBSE_COM14, 7-58          ISC_DESMAF_COM1, 10-25
     FUEL_DFSO_COM1, 7-89                ISC_DSDRPM_COM3, 10-15
     FUEL_DYN_CALC_COM3, 7-163           ISC_DUCE_PW_COM1, 10-49
     FUEL_FG_CALC_COM9, 7-140            ISC_HCAMFG_COM1, 10-28





                                  Index-21

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


     ISC_MODE_SELECT_COM2, 10-41         VR_ECT_COM1, 32-19
     ISC_OVERVIEW_COM2, 10-7             VR_EGO_COM5, 32-26
     ISC_PERLOAD_ISC_COM1, 10-46         VR_EGOBAR_COM2, 32-5
     ISC_RPMERR_COM2, 10-31              VR_ERTS_CB_COM1, 32-2
     KAM_GA, 28-5                        VR_GENISC_COM6, 32-14
     SC_CM_GR_AUTO_DWN_COM7, 21-36       VR_GOOSE_MA_COM5, 32-39
     SC_CM_GR_DETR_COM8, 21-24           VR_HICAM_ISC_COM2, 32-18
     SC_CM_GR_MAN1_COM5, 21-27           VR_LOW_ISC_COM4, 32-36
     SC_CM_GR_MAN2_COM5, 21-29           VR_MAF_COM2, 32-24
     SC_GR_DS_AUTO_COM2, 21-9            VR_RUN_INIT_COM18, 32-10
     SC_TIMER_COM2, 21-40                VR_SPARK_COM1, 32-31
     SC_TQMOD_COM1, 21-57                VR_TCS_COM2, 32-17
     SC_VALID_COM7, 21-50                VR_TIMING_CHK_COM1, 32-42
     SC_VER_AUTO_SHFT_COM2, 21-15        VR_TOT_COM1, 32-25
     SPARK_BASE_DWELL_COM1, 8-72         VR_TPADJ_MODE_COM2, 32-57
     SPARK_CCD_HP_COM2, 8-69             VR_TPS_COM1, 32-20
     SPARK_CYL_KNOCK_COM4, 8-81        STRATEGY MODULES>
     SPARK_IDLE_FB_COM1, 8-28              VC_WARMUP_KAM_ERASE_COM1,
     SPARK_LOWEST_COM5, 8-9                33-6
     SPARK_MKAY_COM2, 8-50             STRATEGY MODULES>DCL_GENERIC_COM1,
     SPARK_PIP_DAT_COM2, 8-56              16-5
     SPARK_SPOUT_KNOCK_COM6, 8-64      STRATEGY MODULES>DCL_MAPS_COM7,
     SPARK_TQM_BG_COM1, 8-90               16-43
     SPARK_TRANS_SPK_DET_COM1, 8-54    STRATEGY MODULES>VC_ACT_COM1,
     SPARK_TRQ_TRNC_COM1, 8-23             33-8
     SYSEQ_N_CALC_COM5, 24-38          STRATEGY MODULES>VC_BOO_COM1,
     THERM_2OUT_COM1, 13-6                 33-61
     THERM_AM2_DUCE_PW_COM1, 13-12     STRATEGY
     THROT_COM1, 6-4
   MODULES>VC_DELPFE_SON_SEL_COM1,
     V0_ACCNEU_COM1, 31-20                 33-45
     VO_ACT_COM1, 31-11                STRATEGY MODULES>VC_ECT_COM1,
     VO_BLOCKDIAG_COM1, 29-3               33-7
     VO_ECT_COM1, 31-9                 STRATEGY MODULES>VC_EGO_TEST_COM1,
     VO_EGR_COM2, 31-14                    33-77
     VO_EOTS_COM1, 31-2                STRATEGY
     VO_ETV_COM2, 31-22
   MODULES>VC_EGR_DELPFE_MA_COM10,
     VO_FPM_COM2, 31-33                    33-33
     VO_IVPWR_COM1, 31-21              STRATEGY
     VO_KAMQUAL_COM1, 31-36                MODULES>VC_EGR_SON_MA_COM10,
     VO_KAMRAM_COM1, 31-5                  33-23
     VO_MAF_COM1, 31-12                STRATEGY MODULES>VC_FAULT_COM1,
     VO_MLPS_INPUT_COM2, 31-16             33-4
     VO_MLUS_OCC_COM1, 31-31           STRATEGY MODULES>VC_FILTER_COM2,
     VO_OCC_COM16, 31-25                   33-2
     VO_OCCTS_COM1, 31-27              STRATEGY
     VO_OCTADJ_COM1, 31-24                 MODULES>VC_FUEL_PUMP_COM2,
     VO_OTM_CB_COM1, 31-39                 33-95
     VO_ROM_COM1, 31-7                 STRATEGY
     VO_TOT_COM2, 31-19
   MODULES>VC_INRANGE_TP_MAF_FUEL_COM1,
     VO_TP_COM1, 31-10                     33-16
     VR_ACT_COM1, 32-21                STRATEGY MODULES>VC_MAADP_COM2,
     VR_BOO_COM1, 32-23                    33-66
     VR_CYLBAL_COM6, 32-45             STRATEGY MODULES>VC_MAF_COM1,
     VR_DELAYLOGIC_COM1, 32-6              33-21
     VR_DELPFE_SON_EGR_COM1, 32-33


                                  Index-22

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   STRATEGY MODULES>VC_MIL_MA_COM9,    TCBPA, 10-31
       33-103                          TCBPA_DER, 10-31
   STRATEGY MODULES>VC_TPS_COM1,       TCBYLD, 20-40
       33-55                           TCD43AOF, 21-41
   STRATEGY                            TCD43ON, 21-41
       MODULES>VC_VINJ_LOAD_COM1,      TCDELPR, 9-16
       33-10                           TCDESN, 10-15 to 10-16, 10-18
   STRATEGY MODULES>VC_VSS_COM1,       TCDLOP, 9-22
       33-57                           TCDNAF, 21-41
   STRATEGY MODULES>VC_VTP_LOAD_COM1,  TCDNMF, 21-42
       33-11                           TCDNON, 21-41 to 21-42
   STRATEGY MODULES>VIP_ERRCODE_CB,    TCDP, 9-17
       34-2                            TCEACT, 9-25
   STRATEGY MODULES>VR_THERMAIR_COM3,  TCECT, 24-9, 27-17
       32-28                           TCEGR, 9-23, 24-11
   STROKE_DRP, 23-40                   TCEPC, 22-14
   STROKE_SLP, 23-40                   TCEPT, 9-14, 24-12
   STROKE_TM, 23-40                    TCEPTZER, 9-14
   STROKE_TMR, 23-33, 23-40            TCFBS, 10-31
   SW_DFSO, 13-9                       TCIL_FLASH_TMR, 20-8
   SW_DYN, 22-32                       TCIL_STATE, 20-8, 20-11
   SW_DYN_RPM, 22-32                   TCIL_TM_DLY, 20-8
   SW_MLK, 23-33                       TCILTM1, 20-8
   SW_MSF, 21-24                       TCILTMR, 20-8 to 20-9
   SW_SEQ_MAN2, 21-29                  TCINJD, 7-114
   SW_SFTIN, 21-3 to 21-4              TCN, 24-16, 24-38
   SW_STALTV, 22-11, 22-19             TCNDBR, 24-16, 24-38
   SW_SUPD, 23-31                      TCNDT_SPK, 8-9, 24-38
   SWC, 3-4, 17-3                      TCNE, 20-3
   SWC_HP, 17-3                        TCNO, 27-14
   SWCVS_CL, 17-3                      TCS_OPEN, 32-11, 32-17
   SWCVS_FLG, 17-3                     TCS_SHORT, 32-11, 32-17
   SWCVS_SH, 17-3                      TCSILINV, 20-13
   SWTFL11, 7-10, 33-92                TCSTRT, 7-20, 7-42, 7-75, 7-113,
   SWTFL21, 7-12, 7-34, 33-92              9-6, 9-9, 10-7, 10-18, 12-7,
   SWTFLG11, 7-34                          13-9 to 13-10, 24-10, 24-50,
   SWTFLx1, 7-60                           26-15, 27-7, 33-6
   SYNC_CTR, 7-121, 7-126, 7-130,      TCSTRT_ACCUM, 5-6, 24-10, 24-50
       7-163                           TCTOT, 27-29 to 27-30
   SYNC_CTR_C, 7-121, 7-126            TCTP, 24-17
   SYNC_FAIL, 7-126                    TCTPDL, 24-18
   SYNC_UP_FUEL, 7-126, 24-38          TCTPT, 24-17
   SYNFLG, 7-126, 7-129, 7-148,        TCTPTE, 20-3
       7-163, 8-47, 8-50 to 8-51,      TCTPTV, 20-4
       19-6 to 19-7, 24-38             TCUPOF, 21-40
                                       TCUPOF_4X4L, 21-40
   TAPMAX, 27-32 to 27-33, 31-10,      TCUPON, 21-40
       33-55                           TCUPON_4X4L, 21-40
   TAPMIN, 27-32 to 27-33, 31-10,      TCVBAT, 24-8
       33-55                           TCVS_LIM_BAR, 24-45
   TARMAX, 8-36                        TCVSR, 20-37
   TBART, 24-17                        TCVSRPH, 20-37
   TC_OVER, 10-55                      TCVST, 27-14
   TC_UNDER, 10-55                     TEMP, 7-41
   TCBBAR, 24-28 to 24-29              temp, 7-115





                                  Index-23

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   TEMP_FRAC(FRCHIC), 7-108 to 7-109   TM_TCS_RES, 20-13
   TEMPFB, 26-8                        TM_TV_SS, 22-41
   TFC_CHG, 7-104, 7-133               TM_UN_CT, 23-18, 23-22
   TFC_FG_EN, 7-102 to 7-103, 7-133,   TM_UNLK_WDOG, 21-24
       32-11                           TM_VER_SFT, 21-15 to 21-16, 21-42,
   TFC_HR, 7-102 to 7-103, 7-134,          23-8, 23-26 to 23-27, 23-46
       7-136, 7-140, 32-11             TMCLUP, 23-26
   TFC_IDLE_OFF, 7-103                 TMCTDY, 23-22
   TFC_MIN, 7-134                      TMD[GR_CM]SLP, 23-27
   TFC_MULT, 7-104                     TMDELDN, 21-36
   TFC_SLOPE, 7-104, 7-133             TMDELUP, 21-32
   TFC_TMR, 7-102                      TMDNSEXIT, 23-27
   TFCISW, 7-103                       TMDNUN, 21-24
   TFCTM, 7-102 to 7-103               TMDRVREV, 22-8
   TFMFLG, 7-74, 7-107, 9-6, 10-7,     TMENGACT, 22-8
       13-9, 19-22, 20-9, 21-51,       TMNEUDRV, 22-8
       22-14, 23-64, 24-28, 24-48,     TMNEUREV, 22-8
       24-51 to 24-52, 27-31 to        TMREVDRV, 22-8
       27-34, 32-11, 33-104            TMRTVSCAL, 20-20
   TFSMN, 7-103                        TMSFTSLPMAX, 23-26
   THRMHP, 13-9, 17-3, 31-25           TMSLBRK, 23-59
   TICKS_DOUBLE, 8-68                  TMSQ21P1, 21-27
   TICKS_SINGLE, 8-68                  TMSQ21P4, 21-37
   TIM_INT_FLG, 7-114                  TMSQ23P4, 21-33
   TIME_BRK_AWY, 23-58 to 23-59        TMSQ32P2, 21-29
   TIME_BRK_PRV, 23-59                 TMSQ32P4, 21-37
   TIP_ALLOW_LD, 8-24 to 8-25          TMSQ34P4, 21-33
   TIP_DELTA, 8-24                     TMTCS, 20-13
   TIP_LAST_LD, 8-24 to 8-25           TMTVRMP_12, 22-35
   TIP_MIN_SPK, 8-25                   TMTVRMP_23, 22-35
   TIP_OUT_OVER, 7-104                 TMTVRMP_34, 22-35
   TIP_OUT_TIME, 7-104                 TMUPSEXIT, 23-27
   TIP_TR, 8-25                        TMVEDN, 21-16
   TIP_TR_TRIG, 8-25                   TMVETOUP, 21-16
   TKDTM, 10-18                        TMVEUP, 21-16
   TKYON1, 24-10                       TMVEUP_4X4L, 21-16
   TKYON2, 24-10, 24-12, 24-50         TO_TP_RATE, 21-16
   TKYON3, 24-12                       TOP_ROW, 20-40
   TKYON4, 24-10                       TOPROW, 20-40
   TL0FLG, 8-54                        TOT, 3-9, 20-31, 20-33, 20-54,
   TLOFLG, 8-67                            21-9, 21-51, 22-12, 22-14,
   TM4X4L, 20-16                           22-45, 23-3, 24-48, 24-50,
   TM_4X4L_RES, 20-16 to 20-17             24-53 to 24-55, 27-17, 27-29
   TM_BRK_ZONE, 23-58 to 23-59             to 27-30
   TM_DEL_SFT, 21-32, 21-36            TOT_OTEMP, 22-45
   TM_LK_DLY, 23-19 to 23-22           TOTLDST, 19-22, 20-40, 24-24,
   TM_NOV_CALC, 20-20                      24-28, 33-11
   TM_PDL_RES, 20-47 to 20-48          TOTMAX, 27-29 to 27-30, 31-19,
   TM_SEQ_SFT, 21-27, 21-29, 21-32         33-46
       to 21-33, 21-36 to 21-37        TOTMIN, 27-29 to 27-30, 31-19,
   TM_SFT_CTL, 23-26 to 23-27              33-46
   TM_SFT_EXIT, 23-27                  TOTTTV1, 24-54
   TM_SFT_IN, 20-31, 21-3 to 21-4,     TOTTV1, 24-53
       21-40 to 21-42                  TOTTV2, 24-53 to 24-54
   TM_SFT_SLP, 23-26 to 23-27          TOTTV3, 24-53 to 24-54





                                  Index-24

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   TOTTV4, 24-55                       TQ_MBT, 8-90, 22-48
   TOTVTP, 22-21                       TQ_NET, 22-24, 22-42, 22-48,
   TP, 8-36, 19-20, 20-3 to 20-4,          23-41, 23-50, 23-56 to 23-57
       22-21, 24-17 to 24-18, 24-51,   TQ_NET_ENT, 23-56 to 23-57
       27-3, 27-31 to 27-33, 32-39     TQ_NET_S, 22-24, 22-48
       to 32-40                        TQ_STAT_CP, 22-24, 22-26
   TP-High, 27-31                      TQ_STAT_CP_S, 22-24
   TP-Low, 27-31                       TQ_TIMEOUT, 21-57
   TP3LCK, 23-7                        TQIA12, 22-27 to 22-28
   TP3LCK_HYS, 23-7                    TQIA21, 22-27 to 22-28
   TP_DELTL, 21-57                     TQIA23, 22-27 to 22-28
   TP_DELTU, 21-57                     TQIA32, 22-27 to 22-28
   TP_ERR_SW, 20-9                     TQIA34, 22-27 to 22-28
   TP_LAST, 8-36                       TQIA43, 22-27 to 22-28
   TP_LH, 23-40                        TQM_COLD_CLP, 8-90
   TP_MIN_TQM, 21-57                   TQM_MAX_CLP, 8-90
   TP_RATE, 20-3, 21-16, 23-15 to      TQMOD_TMR, 21-57 to 21-58
       23-16                           TR_ABS, 8-29, 8-33, 8-37
   TP_REL, 6-4, 11-6, 11-8, 19-20,     TR_COR, 8-33, 8-40
       20-3, 20-40, 21-51, 22-19 to    TR_DELTA, 8-43
       22-20, 22-24, 22-32, 23-7,      TR_RES, 8-33, 8-36, 8-43
       23-15 to 23-16, 23-40, 23-56    TR_RES_LAST, 8-36, 8-43
       to 23-57, 23-64, 24-18, 24-28,  TR_SPK_DELTA, 8-27, 22-48
       24-51 to 24-52, 33-16 to        TR_STRT_SFT, 22-24
       33-17, 33-21                    TR_TQ_LIMIT, 8-23, 22-48
   TP_REL_ENT, 23-56 to 23-57          TRAC_ULFLG, 23-20, 23-22
   TP_REL_H, 21-9 to 21-11, 21-57 to   TRADLY, 23-19
       21-59, 22-16                    TRDDLY, 23-19
   TP_SH_VAL2, 21-51                   TRLOAD, 7-25, 7-42, 7-90, 10-8,
   TP_SH_VAL3, 21-51                       10-18, 10-20, 10-25, 10-28,
   TP_SH_VAL4, 21-51                       10-41 to 10-42, 24-32 to
   TP_STRT_SFT, 21-57, 22-32               24-33, 24-35, 24-48, 31-16
   TP_VMAF, 33-21                      TRSPRPML, 8-67
   TPBAR, 3-9, 24-17 to 24-18          TRSRPH, 8-67
   TPBART, 3-9, 20-3                   TRSRPM, 8-67
   TPBARTV, 3-9, 20-4, 22-21           TRUHAC, 23-15
   TPBKFLOW, 19-20                     TRUHDC, 23-16
   TPBPHI, 24-28                       TRULAC, 23-15
   TPBPLO, 24-28                       TRULDC, 23-16
   TPDLBR, 24-18                       TSCF, 20-23
   TPLDST, 20-40                       TSEGRE, 9-9, 26-2, 26-15
   TPSAV, 32-39 to 32-40               TSLADV, 8-82 to 8-83
   TPTVMN, 22-20                       TSLAMU1, 7-45 to 7-47
   TPTVMX, 22-20                       TSLAMU2, 7-45 to 7-47
   TPUNBRK, 23-16                      TSLAMUn, 7-41, 7-60 to 7-61
   TPUNCH, 23-15                       TSLMPH, 3-9, 24-44 to 24-45
   TPUNCT, 23-15                       TSLOSS, 20-23
   TPUNTR, 23-15 to 23-16              TSLPIP, 5-7, 7-117, 10-7, 24-38
   TPV_STRT_SFT, 21-51                     to 24-39, 26-2, 26-15, 27-19
   TQ_BAR, 23-43                       TSSHP, 24-32
   TQ_DIF_MX, 23-57                    TSTALL, 24-14, 24-36, 24-38
   TQ_IALPHA, 22-24, 22-27 to 22-28    TSTRAT, 20-45, 27-14
   TQ_INP_NET, 22-48                   TV1CNTS_TEST, 31-23
   TQ_LEVEL, 8-90, 21-59               TV_COUNT_LST, 22-14, 22-41
   TQ_LIMIT, 22-48                     TV_COUNTS, 22-14, 22-36, 22-41





                                  Index-25

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   TV_DYN, 22-25, 22-33 to 22-35       V_ADAPTV_ENA UR, 33-69
   TV_PRES, 22-12 to 22-14, 22-16,     V_ADPLD_MAX, 33-66
       22-21, 22-25                    V_ADPLD_MIN, 33-66
   TV_PRES_BAR, 22-14                  V_ADPN_MAX, 33-66
   TV_RAMP, 22-35                      V_ADPN_MIN, 33-66
   TV_RAMP_TMR, 22-35                  V_BOO_OLD, 33-61
   TV_SLT_TM, 22-41                    V_BOO_SPD, 33-62
   TV_ST_SFT, 22-25 to 22-26           V_CBOO_ENA, 33-61
   TV_STAT, 22-25 to 22-26             V_CL_BRK_TM, 33-48
   TVCDLT, 22-41                       V_DELPFE_HP, 33-39, 33-41
   TVCHRG, 22-16                       V_EGOTST_TMR, 33-81
   TVEMAX, 22-20                       V_EGR_CTMR, 33-28, 33-39, 33-41
   TVEMOD, 22-20                       V_EGR_DLY, 33-90
   TVFMMN, 22-14                       V_EGR_DLYFG, 33-90
   TVIP_TOT_MIN, 21-51                 V_EGR_IDLE, 33-34 to 33-35
   TVPMIN_1, 22-13                     V_EGR_LOAD, 33-27, 33-34
   TVPMIN_2, 22-13                     V_EGR_OFF_CR, 33-25, 33-33 to
   TVPMIN_3, 22-13                         33-34, 33-40
   TVPMIN_4, 22-13                     V_EGR_OLD, 33-90
   TVPMIN_ENG, 22-13                   V_EGR_ON_CR, 33-23 to 33-25,
   TVPMINPT_1, 22-13                       33-28, 33-33 to 33-34, 33-38
   TVPMINPT_2, 22-13                   V_EGR_RDY, 9-6, 33-36, 33-41
   TVPMINPT_3, 22-13                   V_EGR_STK_ON, 33-23 to 33-25
   TVPMINPT_4, 22-13                   V_EGREN, 9-28
   TVPMINPT_ENG, 22-13                 V_ETV_TEST, 31-23
   TVPMINST_1, 22-13                   V_FPMDLY, 31-34 to 31-35, 33-96
   TVPMINST_2, 22-13                   V_FPMFLG, 31-34, 33-96
   TVPMINST_3, 22-13                   V_FPMTM, 33-95 to 33-96
   TVPMINST_4, 22-13                   V_GOOS_DELAY, 32-40
   TVRMP_12, 22-35                     V_GOOSEC, 32-40
   TVRMP_23, 22-35                     V_GOOSMAF, 32-40
   TVRMP_34, 22-35                     V_GOOSN, 32-40
   TVRMPTM, 22-35                      V_GOOSTP, 32-40
                                       V_GOOSW, 32-39
   U12DLY, 23-21                       V_HICKOKTM, 31-4
   U23DLY, 23-21                       V_IDLN_LIM, 33-98
   U34DLY, 23-21                       V_IDM_NOISE, 33-48
   UNDSP, 3-9, 5-6 to 5-7, 7-95,       V_INJ_ER_FLG, 33-18, 33-104
       7-102 to 7-103, 7-107, 7-126,   V_INRAN_ERR, 33-18
       8-6, 8-73, 19-21, 22-41,        V_INRANG_ERR, 33-15
       24-10, 26-8, 26-14, 33-96       V_INRANG_FLG, 33-17
   UNLKDLY_TMR, 23-15                  V_ISC_TIME, 33-98
   UNLKDLYTM, 23-15                    V_ISC_TST, 33-98
   UNRPMH, 5-7                         V_KNK_DLY, 32-39
   UNSP, 33-6                          V_KTS, 8-81, 32-39
   UPDATM, 10-45                       V_LAMJMP1, 7-45 to 7-47, 33-92
   UPDISC, 10-45                       V_LAMJMP2, 7-45 to 7-47, 33-92
   UPLOD, 13-6                         V_LANSDTM, 31-4
   UPLODH, 13-6                        V_LEGOTMR1, 33-81, 33-92
   UPRATE, 7-77 to 7-79, 7-81          V_LEGOTMR2, 33-81, 33-92
   UPRPM2, 13-7                        V_LESTMR1, 33-81, 33-91
   UPRPMH, 13-7                        V_LESTMR2, 33-81, 33-91
   UPSWOT, 13-10                       V_LOAD_HI, 33-15 to 33-16
                                       V_LOAD_LOW, 33-15 to 33-16
   V_879_MULT, 10-36                   V_LOAD_TOL, 33-18 to 33-20





                                  Index-26

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   V_LUSOCC_DEL, 31-31                 VCUTOUT, 7-156, 32-10
   V_LUSOCC_ENA, 31-31                 VDCMAX, 9-28, 32-34 to 32-35
   V_MAF_ER_FLG, 19-3, 27-25, 33-104   VDCMIN, 9-28, 32-34 to 32-35
   V_MAXSW, 33-15, 33-17               VDLEDF, 31-27
   V_MILONTM, 33-105                   VDLHED, 31-27
   V_MLUS_MAXTM, 31-31                 VDLY1, 32-28
   V_MODE_OPT, 32-42                   VDLY2, 32-29
   V_MODE_SEL, 8-40, 8-45, 10-56       VDLY6, 33-48
   V_MODE_SETUP, 7-41, 8-6, 8-40,      VDLY8, 32-29, 32-31
       8-45, 10-16, 10-56, 24-18,      VECT3, 7-75, 33-6
       28-8, 32-10, 32-57              VECT5, 7-75, 33-6
   V_MODE_SETUPUP, 8-65                VEGRAT, 9-28, 32-34 to 32-35
   V_MOV_DLY, 24-48                    VEOFFDC, 33-34
   V_NEUTST_ENA, 31-20                 VEPTCL, 33-39
   V_PIP_HARD, 33-48                   VEPTDL, 32-34
   V_RPM_SET, 32-57                    VEPTHL, 31-14
   V_SETLNG_TM, 10-42                  VEPTIH, 33-37
   V_SPDTOZ_FLG, 33-61                 VEPTIL, 33-37
   V_SPK_ENABL, 32-31                  VEPTLL, 24-12, 28-8, 31-14
   V_SPK_FINAL, 32-31                  VEPTRH, 32-33
   V_SPK_INIT, 32-31                   VEPTRL, 32-33
   V_SPK_RATE, 32-31                   VER_BRK_TIM, 23-59
   V_TCS_ENA, 32-17                    VEVPCL, 33-28
   V_TP_ER_FLG, 27-32, 27-34, 33-104   VEVPDL, 32-35
   V_TP_ERR_MIN, 33-15, 33-17          VEVPHL, 31-14, 32-33, 33-26
   V_TP_ERR_TMR, 33-16 to 33-17        VEVPLL, 31-14, 32-33, 33-24
   V_TP_HIGH, 33-15 to 33-16           VF1, 32-40
   V_TP_LOW, 33-15 to 33-16            VFS_1_WRITE, 22-36 to 22-37
   V_VSS_LOAD, 24-48                   VFS_OUT_6, 22-37
   V_VSS_MULT, 24-48                   VFS_OUT_FLG, 22-14, 22-37
   V_VSS_NRH1, 24-48                   VHFNON, 31-40 to 31-41
   V_VSS_NRLO, 24-48                   VHFNTM, 31-41
   V_WOTNMIN, 33-15 to 33-16           VHNO_4X4L_CL, 7-16
   V_ZTOSPD_CNT, 33-62                 VHNO_4X4L_SH, 7-16
   V_ZTOSPD_CTR, 33-61                 VHNO_CL, 7-16
   VAIRFL, 32-28                       VHNO_SH, 7-16
   VAM_LD_FIL, 33-16, 33-18            VIACT1, 31-11
   VATMR2, 32-29                       VIACT2, 31-11
   VBAT, 3-9, 7-95, 8-72 to 8-73,      VIACT3, 32-21
       10-21, 19-21, 22-41, 24-8       VIACT4, 32-21
   VBAT_DWELL, 8-73                    VIETMR, 33-26
   VBAT_DWL_HYS, 8-73                  VINJ_LD_FIL, 33-16, 33-18
   VBAT_MIN, 22-41                     VINJ_LOAD, 33-10, 33-16
   VBISW, 32-23                        VINRANGMIN, 33-15, 33-18
   VBMAFMIN, 19-21                     VINRANGTIM, 33-17 to 33-18
   VCAL, 24-8                          VIP_CNT_EX, 31-33 to 31-35, 32-11,
   VCBCLP, 32-47                           32-18, 32-36, 32-57
   VCBDLY, 32-47                       VIP_KAM, 31-4, 31-36
   VCBFLG, 32-42, 32-45                VIP_KNOCK, 8-85, 32-39 to 32-40
   VCBPAD, 32-47                       VIP_REINIT, 32-57
   VCBPCT, 32-47
   VCBTM1, 32-52
   VCBTM2, 32-51
   VCBTM3, 32-50
   VCRTDC, 33-27, 33-34





                                  Index-27

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   VIP_TIMER_EX, 9-28, 31-34 to        VRPMMAX, 33-15
       31-35, 31-40 to 31-41, 32-11,   VRPMMIN, 33-15, 33-17
       32-18, 32-34 to 32-36, 32-39    VRUN_ISCFLG, 10-16, 10-42, 10-54,
       to 32-40, 32-42, 32-57, 33-25       32-11, 32-57
       to 33-26, 33-28, 33-38 to       VS, 24-44 to 24-45, 27-14
       33-41                           VS21PI, 21-27
   VIPLR1, 32-26                       VS32P2, 21-29
   VIPRR1, 32-27 to 32-28              VS_ERR_SW, 20-9
   VIPSPK, 32-11, 32-31, 32-41         VS_LIM_BAR, 24-45, 27-14
   VIPTM2, 32-28                       VS_MOV, 24-48
   VIPTM3, 32-26                       VS_OL_CL, 7-32
   VIPTM4, 32-27                       VS_OL_SH, 7-32
   VISCN1, 32-47                       VS_PREV, 24-45
   VISDL1, 32-18                       VS_RATE, 7-42, 20-37
   VISDL3, 32-36                       VS_RATEPH, 20-37, 21-9 to 21-11
   VISDL4, 32-49                       VS_SH_VAL2, 21-51
   VISDL5, 32-49                       VS_SH_VAL3, 21-51
   VITOT1, 31-19                       VS_SH_VAL4, 21-51
   VITOT2, 31-19                       VS_SMPL_TM, 20-37, 27-14
   VITOT3, 32-25                       VSAMIN, 24-48
   VITOT4, 32-25                       VSBAR, 7-31 to 7-32, 7-42, 7-59,
   VKYPWR, 31-21                           7-89, 8-23, 8-43, 10-8, 10-41,
   VLAMCB, 32-47                           12-6, 14-4, 14-7, 17-3, 18-5,
   VLFNON, 31-40                           24-45, 33-61
   VLFNTM, 31-41                       VSBART_RT, 21-9 to 21-11, 21-27,
   VLOAD_FIL, 33-15 to 33-16               21-29, 21-36, 21-51, 22-11,
   VLOADMAX, 33-15, 33-17                  22-20, 23-18, 23-22, 23-51,
   VLOADMIN, 33-15, 33-17                  23-64, 27-14
   VMAF, 19-6                          VSBARTL, 20-37, 27-14
   VMAFLOWN, 33-21                     VSBARTL_PREV, 20-37
   VMAFO1, 31-12                       VSBARV, 20-20, 24-45, 24-48,
   VMAFPIPLMT, 33-21                       27-14, 33-57
   VMAFR1, 32-24                       VSCNT, 24-45
   VMAFR2, 32-24                       VSCTR, 20-20, 24-45
   VMAMAX, 27-24, 31-12, 33-21         VSDELT, 24-45
   VMAMIN, 27-24, 33-21                VSFMFLG, 20-9, 20-20, 33-57 to
   VMARPM, 27-24, 33-21                    33-58
   VMOV_TOT_MIN, 24-48                 VSIBRM, 10-54
   VMOVINB, 33-58                      VSIBRN, 10-54
   VMOVING, 20-25, 24-48, 33-57        VSLUMN, 23-18
   VN, 33-33                           VSPRGFLG, 12-6 to 12-7
   VND1, 31-16                         VSPTDL, 32-31
   VND2, 31-16                         VSRTVSMN, 20-20
   VNMIN, 32-26                        VSSMN1, 33-57
   VOLTCLP, 10-21                      VSSMPLTM_PREV, 20-37
   VOLTMR, 10-21                       VSSSW, 33-57
   VPMAX, 33-48                        VSSTAL, 22-11
   VPRPMMAX, 33-17                     VSSTIM, 33-57
   VPUMP_LAST, 33-96                   VSSTMR, 33-57
   VR_GOOSE, 32-36                     VSSTP, 24-48
   VR_HICAM_ISC, 32-11                 VSTVMN, 22-20
   VR_LOW_ISC, 32-36                   VSTVMX, 22-20
   VR_OUT_ENGCYL, 32-11                VSTYPE, 33-57
   VR_SENSOR_CHK, 32-18                VSV_STRT_SFT, 21-51
   VRLAM, 32-29, 32-40                 VTABFL, 32-29





                                  Index-28

                               INDEX - CBAZA
                PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


   VTAP1, 31-10                        WIGFLG, 20-31, 22-41, 33-4, 33-24,
   VTAP2, 31-10                            33-37, 33-39
   VTAP3, 32-20                        WIGLVL, 33-4
   VTAP4, 32-20                        WILL_PULS_FIT, 7-165
   VTAP5, 31-40                        WINCLD, 8-85
   VTAP6, 31-40                        WINDOW_BETA, 3-9, 8-81, 8-84
   VTC_OVER, 10-55                     WINDOW_DELTA, 8-81, 8-84, 32-39
   VTC_UNDER, 10-55                    WINLEN, 8-81, 8-84, 8-86 to 8-87
   VTCDSN, 10-16                       WOPEN, 8-81, 8-84, 8-86 to 8-87
   VTCEGO, 32-5                        WOTCOT, 11-7
   VTCEPT, 33-33 to 33-34              WRMEGO, 7-20, 7-22 to 7-23, 7-30,
   VTP_LD_FIL, 33-16, 33-18                7-41 to 7-42, 13-8, 27-7
   VTP_LOAD, 33-11, 33-16
   VTPMAX, 33-15, 33-17                XDCL_BAUD, 16-49
   VTPMIN, 33-15, 33-17                XDCL_ERRO, 16-49
                                       XFRAME, 16-49
   WARM_UP, 7-75, 23-56, 33-6          XFREPT, 9-16

                                    INDEX - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


                          Please  feel  free  to  use
                          this  form to record faults
                          with   the   book,   and/or
                          general     comments    and
                          complaints  about  Strategy
                          Group documentation.  As we
                          make improvements, we would
                          also like to know about the
                          things you  would  like  to
                          see in the strategy book.

                          This form, if used,  should
                          be    directed    to    the
                          responsible  person  listed
                          on   the   cover   of  this
                          document.

                                    INDEX - CBAZA
                     PED-PTE, FoMoCo, PROPRIETARY & CONFIDENTIAL


       ***********************************************************************

      Do you have any general comments on this book, or its availability?














       ***********************************************************************

      Specific errors found in this book.  Please list the page on which the error
      was found, the error itself, and the correction if known.




















       ***********************************************************************

      Please indicate your area, and/or primary use made of this book.





      If you would like to be notified when a change is made, or if you would like
      to discuss something, please write your name and extension below. 



      Name______________________  Ext_____________   Date___________________

